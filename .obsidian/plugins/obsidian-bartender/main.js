/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var an=Object.create;var Re=Object.defineProperty;var ln=Object.getOwnPropertyDescriptor;var cn=Object.getOwnPropertyNames,nr=Object.getOwnPropertySymbols,un=Object.getPrototypeOf,ir=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable;var or=(n,e,t)=>e in n?Re(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ue=(n,e)=>{for(var t in e||(e={}))ir.call(e,t)&&or(n,t,e[t]);if(nr)for(var t of nr(e))hn.call(e,t)&&or(n,t,e[t]);return n};var sr=n=>Re(n,"__esModule",{value:!0});var dn=(n,e)=>{sr(n);for(var t in e)Re(n,t,{get:e[t],enumerable:!0})},fn=(n,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of cn(e))!ir.call(n,r)&&r!=="default"&&Re(n,r,{get:()=>e[r],enumerable:!(t=ln(e,r))||t.enumerable});return n},Tt=n=>fn(sr(Re(n!=null?an(un(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var we=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});dn(exports,{default:()=>tr});function he(n,e){let t=Object.keys(e).map(r=>pn(n,r,e[r]));return t.length===1?t[0]:function(){t.forEach(r=>r())}}function pn(n,e,t){let r=n[e],i=n.hasOwnProperty(e),o=t(r);return r&&Object.setPrototypeOf(o,r),Object.setPrototypeOf(s,o),n[e]=s,a;function s(...l){return o===r&&n[e]===s&&a(),o.apply(this,l)}function a(){n[e]===s&&(i?n[e]=r:delete n[e]),o!==r&&(o=r,Object.setPrototypeOf(s,r||Function))}}var I=Tt(require("obsidian"));function ar(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function le(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ar(Object(t),!0).forEach(function(r){gn(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ar(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function tt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tt=function(e){return typeof e}:tt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(n)}function gn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function re(){return re=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},re.apply(this,arguments)}function mn(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function vn(n,e){if(n==null)return{};var t=mn(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,r)||(t[r]=n[r]))}return t}function bn(n){return En(n)||yn(n)||Sn(n)||wn()}function En(n){if(Array.isArray(n))return Ct(n)}function yn(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Sn(n,e){if(!!n){if(typeof n=="string")return Ct(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ct(n,e)}}function Ct(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function wn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Tn="1.14.0";function de(n){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(n)}var fe=de(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Le=de(/Edge/i),lr=de(/firefox/i),Be=de(/safari/i)&&!de(/chrome/i)&&!de(/android/i),cr=de(/iP(ad|od|hone)/i),Cn=de(/chrome/i)&&de(/android/i),ur={capture:!1,passive:!1};function T(n,e,t){n.addEventListener(e,t,!fe&&ur)}function w(n,e,t){n.removeEventListener(e,t,!fe&&ur)}function rt(n,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function xn(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function ne(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&rt(n,e):rt(n,e))||r&&n===t)return n;if(n===t)break}while(n=xn(n))}return null}var hr=/\s+/g;function L(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(hr," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(hr," ")}}function m(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function Te(n,e){var t="";if(typeof n=="string")t=n;else do{var r=m(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function dr(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,o=r.length;if(t)for(;i<o;i++)t(r[i],i);return r}return[]}function ce(){var n=document.scrollingElement;return n||document.documentElement}function A(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var o,s,a,l,c,u,h;if(n!==window&&n.parentNode&&n!==ce()?(o=n.getBoundingClientRect(),s=o.top,a=o.left,l=o.bottom,c=o.right,u=o.height,h=o.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!fe))do if(i&&i.getBoundingClientRect&&(m(i,"transform")!=="none"||t&&m(i,"position")!=="static")){var d=i.getBoundingClientRect();s-=d.top+parseInt(m(i,"border-top-width")),a-=d.left+parseInt(m(i,"border-left-width")),l=s+o.height,c=a+o.width;break}while(i=i.parentNode);if(r&&n!==window){var p=Te(i||n),g=p&&p.a,v=p&&p.d;p&&(s/=v,a/=g,h/=g,u/=v,l=s+u,c=a+h)}return{top:s,left:a,bottom:l,right:c,width:h,height:u}}}function fr(n,e,t){for(var r=be(n,!0),i=A(n)[e];r;){var o=A(r)[t],s=void 0;if(t==="top"||t==="left"?s=i>=o:s=i<=o,!s)return r;if(r===ce())break;r=be(r,!1)}return!1}function Ae(n,e,t,r){for(var i=0,o=0,s=n.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==b.ghost&&(r||s[o]!==b.dragged)&&ne(s[o],t.draggable,n,!1)){if(i===e)return s[o];i++}o++}return null}function xt(n,e){for(var t=n.lastElementChild;t&&(t===b.ghost||m(t,"display")==="none"||e&&!rt(t,e));)t=t.previousElementSibling;return t||null}function B(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==b.clone&&(!e||rt(n,e))&&t++;return t}function pr(n){var e=0,t=0,r=ce();if(n)do{var i=Te(n),o=i.a,s=i.d;e+=n.scrollLeft*o,t+=n.scrollTop*s}while(n!==r&&(n=n.parentNode));return[e,t]}function Dn(n,e){for(var t in n)if(!!n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function be(n,e){if(!n||!n.getBoundingClientRect)return ce();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=m(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return ce();if(r||e)return t;r=!0}}while(t=t.parentNode);return ce()}function _n(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Dt(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var He;function gr(n,e){return function(){if(!He){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),He=setTimeout(function(){He=void 0},e)}}}function In(){clearTimeout(He),He=void 0}function mr(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function _t(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function vr(n,e){m(n,"position","absolute"),m(n,"top",e.top),m(n,"left",e.left),m(n,"width",e.width),m(n,"height",e.height)}function It(n){m(n,"position",""),m(n,"top",""),m(n,"left",""),m(n,"width",""),m(n,"height","")}var G="Sortable"+new Date().getTime();function An(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(m(i,"display")==="none"||i===b.ghost)){n.push({target:i,rect:A(i)});var o=le({},n[n.length-1].rect);if(i.thisAnimationDuration){var s=Te(i,!0);s&&(o.top-=s.f,o.left-=s.e)}i.fromRect=o}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(Dn(n,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var o=!1,s=0;n.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=A(c),d=c.prevFromRect,p=c.prevToRect,g=a.rect,v=Te(c,!0);v&&(h.top-=v.f,h.left-=v.e),c.toRect=h,c.thisAnimationDuration&&Dt(d,h)&&!Dt(u,h)&&(g.top-h.top)/(g.left-h.left)==(u.top-h.top)/(u.left-h.left)&&(l=On(g,d,p,i.options)),Dt(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=i.options.animation),i.animate(c,g,h,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),o?e=setTimeout(function(){typeof r=="function"&&r()},s):typeof r=="function"&&r(),n=[]},animate:function(r,i,o,s){if(s){m(r,"transition",""),m(r,"transform","");var a=Te(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-o.left)/(l||1),h=(i.top-o.top)/(c||1);r.animatingX=!!u,r.animatingY=!!h,m(r,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=Mn(r),m(r,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),m(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){m(r,"transition",""),m(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},s)}}}}function Mn(n){return n.offsetWidth}function On(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var Me=[],At={initializeByDefault:!0},je={mount:function(e){for(var t in At)At.hasOwnProperty(t)&&!(t in e)&&(e[t]=At[t]);Me.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Me.push(e)},pluginEvent:function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=e+"Global";Me.forEach(function(s){!t[s.pluginName]||(t[s.pluginName][o]&&t[s.pluginName][o](le({sortable:t},r)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](le({sortable:t},r)))})},initializePlugins:function(e,t,r,i){Me.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,re(r,c.defaults)}});for(var o in e.options)if(!!e.options.hasOwnProperty(o)){var s=this.modifyOption(e,o,e.options[o]);typeof s!="undefined"&&(e.options[o]=s)}},getEventProperties:function(e,t){var r={};return Me.forEach(function(i){typeof i.eventProperties=="function"&&re(r,i.eventProperties.call(t[i.pluginName],e))}),r},modifyOption:function(e,t,r){var i;return Me.forEach(function(o){!e[o.pluginName]||o.optionListeners&&typeof o.optionListeners[t]=="function"&&(i=o.optionListeners[t].call(e[o.pluginName],r))}),i}};function We(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,o=n.cloneEl,s=n.toEl,a=n.fromEl,l=n.oldIndex,c=n.newIndex,u=n.oldDraggableIndex,h=n.newDraggableIndex,d=n.originalEvent,p=n.putSortable,g=n.extraEventProperties;if(e=e||t&&t[G],!!e){var v,x=e.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!fe&&!Le?v=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(r,!0,!0)),v.to=s||t,v.from=a||t,v.item=i||t,v.clone=o,v.oldIndex=l,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=h,v.originalEvent=d,v.pullMode=p?p.lastPutMode:void 0;var D=le(le({},g),je.getEventProperties(r,e));for(var F in D)v[F]=D[F];t&&t.dispatchEvent(v),x[O]&&x[O].call(e,v)}}var Fn=["evt"],V=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=vn(r,Fn);je.pluginEvent.bind(b)(e,t,le({dragEl:f,parentEl:k,ghostEl:S,rootEl:M,nextEl:Ce,lastDownEl:nt,cloneEl:P,cloneHidden:Ee,dragStarted:$e,putSortable:W,activeSortable:b.active,originalEvent:i,oldIndex:Oe,oldDraggableIndex:Ge,newIndex:U,newDraggableIndex:ye,hideGhostForTarget:Cr,unhideGhostForTarget:xr,cloneNowHidden:function(){Ee=!0},cloneNowShown:function(){Ee=!1},dispatchSortableEvent:function(a){Y({sortable:t,name:a,originalEvent:i})}},o))};function Y(n){We(le({putSortable:W,cloneEl:P,targetEl:f,rootEl:M,oldIndex:Oe,oldDraggableIndex:Ge,newIndex:U,newDraggableIndex:ye},n))}var f,k,S,M,Ce,nt,P,Ee,Oe,U,Ge,ye,it,W,Fe=!1,ot=!1,st=[],xe,ie,Mt,Ot,br,Er,$e,Ne,Ye,Xe=!1,at=!1,lt,$,Ft=[],Nt=!1,ct=[],ut=typeof document!="undefined",ht=cr,yr=Le||fe?"cssFloat":"float",Nn=ut&&!Cn&&!cr&&"draggable"in document.createElement("div"),Sr=function(){if(!!ut){if(fe)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),wr=function(e,t){var r=m(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=Ae(e,0,t),s=Ae(e,1,t),a=o&&m(o),l=s&&m(s),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+A(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+A(s).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[yr]==="none"||s&&r[yr]==="none"&&c+u>i)?"vertical":"horizontal"},kn=function(e,t,r){var i=r?e.left:e.top,o=r?e.right:e.bottom,s=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,c=r?t.width:t.height;return i===a||o===l||i+s/2===a+c/2},Pn=function(e,t){var r;return st.some(function(i){var o=i[G].options.emptyInsertThreshold;if(!(!o||xt(i))){var s=A(i),a=e>=s.left-o&&e<=s.right+o,l=t>=s.top-o&&t<=s.bottom+o;if(a&&l)return r=i}}),r},Tr=function(e){function t(o,s){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(s||h))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return t(o(a,l,c,u),s)(a,l,c,u);var d=(s?a:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var r={},i=e.group;(!i||tt(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},Cr=function(){!Sr&&S&&m(S,"display","none")},xr=function(){!Sr&&S&&m(S,"display","")};ut&&document.addEventListener("click",function(n){if(ot)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ot=!1,!1},!0);var De=function(e){if(f){e=e.touches?e.touches[0]:e;var t=Pn(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[G]._onDragOver(r)}}},Rn=function(e){f&&f.parentNode[G]._isOutsideThisEl(e.target)};function b(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=re({},e),n[G]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wr(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&!Be,emptyInsertThreshold:5};je.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);Tr(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Nn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?T(n,"pointerdown",this._onTapStart):(T(n,"mousedown",this._onTapStart),T(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(n,"dragover",this),T(n,"dragenter",this)),st.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),re(this,An())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ne=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,f):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var t=this,r=this.el,i=this.options,o=i.preventOnFilter,s=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(Yn(r),!f&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Be&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ne(l,i.draggable,r,!1),!(l&&l.animated)&&nt!==l)){if(Oe=B(l),Ge=B(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Y({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),V("filter",t,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=ne(c,h.trim(),r,!1),h)return Y({sortable:t,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),V("filter",t,{evt:e}),!0}),u)){o&&e.cancelable&&e.preventDefault();return}i.handle&&!ne(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var i=this,o=i.el,s=i.options,a=o.ownerDocument,l;if(r&&!f&&r.parentNode===o){var c=A(r);if(M=o,f=r,k=f.parentNode,Ce=f.nextSibling,nt=r,it=s.group,b.dragged=f,xe={target:f,clientX:(t||e).clientX,clientY:(t||e).clientY},br=xe.clientX-c.left,Er=xe.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,f.style["will-change"]="all",l=function(){if(V("delayEnded",i,{evt:e}),b.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!lr&&i.nativeDraggable&&(f.draggable=!0),i._triggerDragStart(e,t),Y({sortable:i,name:"choose",originalEvent:e}),L(f,s.chosenClass,!0)},s.ignore.split(",").forEach(function(u){dr(f,u.trim(),kt)}),T(a,"dragover",De),T(a,"mousemove",De),T(a,"touchmove",De),T(a,"mouseup",i._onDrop),T(a,"touchend",i._onDrop),T(a,"touchcancel",i._onDrop),lr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,f.draggable=!0),V("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Le||fe))){if(b.eventCanceled){this._onDrop();return}T(a,"mouseup",i._disableDelayedDrag),T(a,"touchend",i._disableDelayedDrag),T(a,"touchcancel",i._disableDelayedDrag),T(a,"mousemove",i._delayedDragTouchMoveHandler),T(a,"touchmove",i._delayedDragTouchMoveHandler),s.supportPointer&&T(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){f&&kt(f),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._disableDelayedDrag),w(e,"touchend",this._disableDelayedDrag),w(e,"touchcancel",this._disableDelayedDrag),w(e,"mousemove",this._delayedDragTouchMoveHandler),w(e,"touchmove",this._delayedDragTouchMoveHandler),w(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):t?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(f,"dragend",this),T(M,"dragstart",this._onDragStart));try{document.selection?ft(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(r){}},_dragStarted:function(e,t){if(Fe=!1,M&&f){V("dragStarted",this,{evt:t}),this.nativeDraggable&&T(document,"dragover",Rn);var r=this.options;!e&&L(f,r.dragClass,!1),L(f,r.ghostClass,!0),b.active=this,e&&this._appendGhost(),Y({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ie){this._lastX=ie.clientX,this._lastY=ie.clientY,Cr();for(var e=document.elementFromPoint(ie.clientX,ie.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ie.clientX,ie.clientY),e!==t);)t=e;if(f.parentNode[G]._isOutsideThisEl(e),t)do{if(t[G]){var r=void 0;if(r=t[G]._onDragOver({clientX:ie.clientX,clientY:ie.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);xr()}},_onTouchMove:function(e){if(xe){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,o=e.touches?e.touches[0]:e,s=S&&Te(S,!0),a=S&&s&&s.a,l=S&&s&&s.d,c=ht&&$&&pr($),u=(o.clientX-xe.clientX+i.x)/(a||1)+(c?c[0]-Ft[0]:0)/(a||1),h=(o.clientY-xe.clientY+i.y)/(l||1)+(c?c[1]-Ft[1]:0)/(l||1);if(!b.active&&!Fe){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(S){s?(s.e+=u-(Mt||0),s.f+=h-(Ot||0)):s={a:1,b:0,c:0,d:1,e:u,f:h};var d="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");m(S,"webkitTransform",d),m(S,"mozTransform",d),m(S,"msTransform",d),m(S,"transform",d),Mt=u,Ot=h,ie=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!S){var e=this.options.fallbackOnBody?document.body:M,t=A(f,!0,ht,!0,e),r=this.options;if(ht){for($=e;m($,"position")==="static"&&m($,"transform")==="none"&&$!==document;)$=$.parentNode;$!==document.body&&$!==document.documentElement?($===document&&($=ce()),t.top+=$.scrollTop,t.left+=$.scrollLeft):$=ce(),Ft=pr($)}S=f.cloneNode(!0),L(S,r.ghostClass,!1),L(S,r.fallbackClass,!0),L(S,r.dragClass,!0),m(S,"transition",""),m(S,"transform",""),m(S,"box-sizing","border-box"),m(S,"margin",0),m(S,"top",t.top),m(S,"left",t.left),m(S,"width",t.width),m(S,"height",t.height),m(S,"opacity","0.8"),m(S,"position",ht?"absolute":"fixed"),m(S,"zIndex","100000"),m(S,"pointerEvents","none"),b.ghost=S,e.appendChild(S),m(S,"transform-origin",br/parseInt(S.style.width)*100+"% "+Er/parseInt(S.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,i=e.dataTransfer,o=r.options;if(V("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}V("setupClone",this),b.eventCanceled||(P=_t(f),P.draggable=!1,P.style["will-change"]="",this._hideClone(),L(P,this.options.chosenClass,!1),b.clone=P),r.cloneId=ft(function(){V("clone",r),!b.eventCanceled&&(r.options.removeCloneOnHide||M.insertBefore(P,f),r._hideClone(),Y({sortable:r,name:"clone"}))}),!t&&L(f,o.dragClass,!0),t?(ot=!0,r._loopId=setInterval(r._emulateDragOver,50)):(w(document,"mouseup",r._onDrop),w(document,"touchend",r._onDrop),w(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,f)),T(document,"drop",r),m(f,"transform","translateZ(0)")),Fe=!0,r._dragStartId=ft(r._dragStarted.bind(r,t,e)),T(document,"selectstart",r),$e=!0,Be&&m(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,i,o,s,a=this.options,l=a.group,c=b.active,u=it===l,h=a.sort,d=W||c,p,g=this,v=!1;if(Nt)return;function x(Pe,on){V(Pe,g,le({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:s,dragRect:i,targetRect:o,canSort:h,fromSortable:d,target:r,completed:D,onMove:function(rr,sn){return dt(M,t,f,i,rr,A(rr),e,sn)},changed:F},on))}function O(){x("dragOverAnimationCapture"),g.captureAnimationState(),g!==d&&d.captureAnimationState()}function D(Pe){return x("dragOverCompleted",{insertion:Pe}),Pe&&(u?c._hideClone():c._showClone(g),g!==d&&(L(f,W?W.options.ghostClass:c.options.ghostClass,!1),L(f,a.ghostClass,!0)),W!==g&&g!==b.active?W=g:g===b.active&&W&&(W=null),d===g&&(g._ignoreWhileAnimating=r),g.animateAll(function(){x("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===f&&!f.animated||r===t&&!r.animated)&&(Ne=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(f.parentNode[G]._isOutsideThisEl(e.target),!Pe&&De(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function F(){U=B(f),ye=B(f,a.draggable),Y({sortable:g,name:"change",toEl:t,newIndex:U,newDraggableIndex:ye,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=ne(r,a.draggable,t,!0),x("dragOver"),b.eventCanceled)return v;if(f.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||g._ignoreWhileAnimating===r)return D(!1);if(ot=!1,c&&!a.disabled&&(u?h||(s=k!==M):W===this||(this.lastPutMode=it.checkPull(this,c,f,e))&&l.checkPut(this,c,f,e))){if(p=this._getDirection(e,r)==="vertical",i=A(f),x("dragOverValid"),b.eventCanceled)return v;if(s)return k=M,O(),this._hideClone(),x("revert"),b.eventCanceled||(Ce?M.insertBefore(f,Ce):M.appendChild(f)),D(!0);var C=xt(t,a.draggable);if(!C||jn(e,p,this)&&!C.animated){if(C===f)return D(!1);if(C&&t===e.target&&(r=C),r&&(o=A(r)),dt(M,t,f,i,r,o,e,!!r)!==!1)return O(),t.appendChild(f),k=t,F(),D(!0)}else if(C&&Hn(e,p,this)){var J=Ae(t,0,a,!0);if(J===f)return D(!1);if(r=J,o=A(r),dt(M,t,f,i,r,o,e,!1)!==!1)return O(),t.insertBefore(f,J),k=t,F(),D(!0)}else if(r.parentNode===t){o=A(r);var X=0,R,K=f.parentNode!==t,N=!kn(f.animated&&f.toRect||i,r.animated&&r.toRect||o,p),ve=p?"top":"left",Z=fr(r,"top","top")||fr(f,"top","top"),ee=Z?Z.scrollTop:void 0;Ne!==r&&(R=o[ve],Xe=!1,at=!N&&a.invertSwap||K),X=Wn(e,r,o,p,N?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,at,Ne===r);var se;if(X!==0){var j=B(f);do j-=X,se=k.children[j];while(se&&(m(se,"display")==="none"||se===S))}if(X===0||se===r)return D(!1);Ne=r,Ye=X;var ae=r.nextElementSibling,te=!1;te=X===1;var et=dt(M,t,f,i,r,o,e,te);if(et!==!1)return(et===1||et===-1)&&(te=et===1),Nt=!0,setTimeout(Bn,30),O(),te&&!ae?t.appendChild(f):r.parentNode.insertBefore(f,te?ae:r),Z&&mr(Z,0,ee-Z.scrollTop),k=f.parentNode,R!==void 0&&!at&&(lt=Math.abs(R-A(r)[ve])),F(),D(!0)}if(t.contains(f))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){w(document,"mousemove",this._onTouchMove),w(document,"touchmove",this._onTouchMove),w(document,"pointermove",this._onTouchMove),w(document,"dragover",De),w(document,"mousemove",De),w(document,"touchmove",De)},_offUpEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._onDrop),w(e,"touchend",this._onDrop),w(e,"pointerup",this._onDrop),w(e,"touchcancel",this._onDrop),w(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(U=B(f),ye=B(f,r.draggable),V("drop",this,{evt:e}),k=f&&f.parentNode,U=B(f),ye=B(f,r.draggable),b.eventCanceled){this._nulling();return}Fe=!1,at=!1,Xe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Pt(this.cloneId),Pt(this._dragStartId),this.nativeDraggable&&(w(document,"drop",this),w(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Be&&m(document.body,"user-select",""),m(f,"transform",""),e&&($e&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),S&&S.parentNode&&S.parentNode.removeChild(S),(M===k||W&&W.lastPutMode!=="clone")&&P&&P.parentNode&&P.parentNode.removeChild(P),f&&(this.nativeDraggable&&w(f,"dragend",this),kt(f),f.style["will-change"]="",$e&&!Fe&&L(f,W?W.options.ghostClass:this.options.ghostClass,!1),L(f,this.options.chosenClass,!1),Y({sortable:this,name:"unchoose",toEl:k,newIndex:null,newDraggableIndex:null,originalEvent:e}),M!==k?(U>=0&&(Y({rootEl:k,name:"add",toEl:k,fromEl:M,originalEvent:e}),Y({sortable:this,name:"remove",toEl:k,originalEvent:e}),Y({rootEl:k,name:"sort",toEl:k,fromEl:M,originalEvent:e}),Y({sortable:this,name:"sort",toEl:k,originalEvent:e})),W&&W.save()):U!==Oe&&U>=0&&(Y({sortable:this,name:"update",toEl:k,originalEvent:e}),Y({sortable:this,name:"sort",toEl:k,originalEvent:e})),b.active&&((U==null||U===-1)&&(U=Oe,ye=Ge),Y({sortable:this,name:"end",toEl:k,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){V("nulling",this),M=f=k=S=Ce=P=nt=Ee=xe=ie=$e=U=ye=Oe=Ge=Ne=Ye=W=it=b.dragged=b.ghost=b.clone=b.active=null,ct.forEach(function(e){e.checked=!0}),ct.length=Mt=Ot=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":f&&(this._onDragOver(e),Ln(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,i=0,o=r.length,s=this.options;i<o;i++)t=r[i],ne(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||$n(t));return e},sort:function(e,t){var r={},i=this.el;this.toArray().forEach(function(o,s){var a=i.children[s];ne(a,this.options.draggable,i,!1)&&(r[o]=a)},this),t&&this.captureAnimationState(),e.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ne(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var i=je.modifyOption(this,e,t);typeof i!="undefined"?r[e]=i:r[e]=t,e==="group"&&Tr(r)},destroy:function(){V("destroy",this);var e=this.el;e[G]=null,w(e,"mousedown",this._onTapStart),w(e,"touchstart",this._onTapStart),w(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(w(e,"dragover",this),w(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),st.splice(st.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ee){if(V("hideClone",this),b.eventCanceled)return;m(P,"display","none"),this.options.removeCloneOnHide&&P.parentNode&&P.parentNode.removeChild(P),Ee=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ee){if(V("showClone",this),b.eventCanceled)return;f.parentNode==M&&!this.options.group.revertClone?M.insertBefore(P,f):Ce?M.insertBefore(P,Ce):M.appendChild(P),this.options.group.revertClone&&this.animate(f,P),m(P,"display",""),Ee=!1}}};function Ln(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function dt(n,e,t,r,i,o,s,a){var l,c=n[G],u=c.options.onMove,h;return window.CustomEvent&&!fe&&!Le?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=r,l.related=i||e,l.relatedRect=o||A(e),l.willInsertAfter=a,l.originalEvent=s,n.dispatchEvent(l),u&&(h=u.call(c,l,s)),h}function kt(n){n.draggable=!1}function Bn(){Nt=!1}function Hn(n,e,t){var r=A(Ae(t.el,0,t.options,!0)),i=10;return e?n.clientX<r.left-i||n.clientY<r.top&&n.clientX<r.right:n.clientY<r.top-i||n.clientY<r.bottom&&n.clientX<r.left}function jn(n,e,t){var r=A(xt(t.el,t.options.draggable)),i=10;return e?n.clientX>r.right+i||n.clientX<=r.right&&n.clientY>r.bottom&&n.clientX>=r.left:n.clientX>r.right&&n.clientY>r.top||n.clientX<=r.right&&n.clientY>r.bottom+i}function Wn(n,e,t,r,i,o,s,a){var l=r?n.clientY:n.clientX,c=r?t.height:t.width,u=r?t.top:t.left,h=r?t.bottom:t.right,d=!1;if(!s){if(a&&lt<c*i){if(!Xe&&(Ye===1?l>u+c*o/2:l<h-c*o/2)&&(Xe=!0),Xe)d=!0;else if(Ye===1?l<u+lt:l>h-lt)return-Ye}else if(l>u+c*(1-i)/2&&l<h-c*(1-i)/2)return Gn(e)}return d=d||s,d&&(l<u+c*o/2||l>h-c*o/2)?l>u+c/2?1:-1:0}function Gn(n){return B(f)<B(n)?1:-1}function $n(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function Yn(n){ct.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&ct.push(r)}}function ft(n){return setTimeout(n,0)}function Pt(n){return clearTimeout(n)}ut&&T(document,"touchmove",function(n){(b.active||Fe)&&n.cancelable&&n.preventDefault()});b.utils={on:T,off:w,css:m,find:dr,is:function(e,t){return!!ne(e,t,e,!1)},extend:_n,throttle:gr,closest:ne,toggleClass:L,clone:_t,index:B,nextTick:ft,cancelNextTick:Pt,detectDirection:wr,getChild:Ae};b.get=function(n){return n[G]};b.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(b.utils=le(le({},b.utils),r.utils)),je.mount(r)})};b.create=function(n,e){return new b(n,e)};b.version=Tn;var H=[],Ke,Rt,Lt=!1,Bt,Ht,pt,Ve;function Xn(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):r.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):(w(document,"pointermove",this._handleFallbackAutoScroll),w(document,"touchmove",this._handleFallbackAutoScroll),w(document,"mousemove",this._handleFallbackAutoScroll)),Dr(),gt(),In()},nulling:function(){pt=Rt=Ke=Lt=Ve=Bt=Ht=null,H.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,o=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(o,s);if(pt=t,r||this.options.forceAutoScrollFallback||Le||fe||Be){jt(t,this.options,a,r);var l=be(a,!0);Lt&&(!Ve||o!==Bt||s!==Ht)&&(Ve&&Dr(),Ve=setInterval(function(){var c=be(document.elementFromPoint(o,s),!0);c!==l&&(l=c,gt()),jt(t,i.options,c,r)},10),Bt=o,Ht=s)}else{if(!this.options.bubbleScroll||be(a,!0)===ce()){gt();return}jt(t,this.options,be(a,!1),!1)}}},re(n,{pluginName:"scroll",initializeByDefault:!0})}function gt(){H.forEach(function(n){clearInterval(n.pid)}),H=[]}function Dr(){clearInterval(Ve)}var jt=gr(function(n,e,t,r){if(!!e.scroll){var i=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=e.scrollSensitivity,a=e.scrollSpeed,l=ce(),c=!1,u;Rt!==t&&(Rt=t,gt(),Ke=e.scroll,u=e.scrollFn,Ke===!0&&(Ke=be(t,!0)));var h=0,d=Ke;do{var p=d,g=A(p),v=g.top,x=g.bottom,O=g.left,D=g.right,F=g.width,C=g.height,J=void 0,X=void 0,R=p.scrollWidth,K=p.scrollHeight,N=m(p),ve=p.scrollLeft,Z=p.scrollTop;p===l?(J=F<R&&(N.overflowX==="auto"||N.overflowX==="scroll"||N.overflowX==="visible"),X=C<K&&(N.overflowY==="auto"||N.overflowY==="scroll"||N.overflowY==="visible")):(J=F<R&&(N.overflowX==="auto"||N.overflowX==="scroll"),X=C<K&&(N.overflowY==="auto"||N.overflowY==="scroll"));var ee=J&&(Math.abs(D-i)<=s&&ve+F<R)-(Math.abs(O-i)<=s&&!!ve),se=X&&(Math.abs(x-o)<=s&&Z+C<K)-(Math.abs(v-o)<=s&&!!Z);if(!H[h])for(var j=0;j<=h;j++)H[j]||(H[j]={});(H[h].vx!=ee||H[h].vy!=se||H[h].el!==p)&&(H[h].el=p,H[h].vx=ee,H[h].vy=se,clearInterval(H[h].pid),(ee!=0||se!=0)&&(c=!0,H[h].pid=setInterval(function(){r&&this.layer===0&&b.active._onTouchMove(pt);var ae=H[this.layer].vy?H[this.layer].vy*a:0,te=H[this.layer].vx?H[this.layer].vx*a:0;typeof u=="function"&&u.call(b.dragged.parentNode[G],te,ae,n,pt,H[this.layer].el)!=="continue"||mr(H[this.layer].el,te,ae)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=be(d,!1)));Lt=c}},30),_r=function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,o=e.activeSortable,s=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(!!t){var c=r||o;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(s("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function Wt(){}Wt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Ae(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:_r};re(Wt,{pluginName:"revertOnSpill"});function Gt(){}Gt.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:_r};re(Gt,{pluginName:"removeOnSpill"});var y=[],q=[],ze,oe,Ue=!1,z=!1,ke=!1,_,qe,mt;function Ir(){function n(e){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));e.options.supportPointer?T(document,"pointerup",this._deselectMultiDrag):(T(document,"mouseup",this._deselectMultiDrag),T(document,"touchend",this._deselectMultiDrag)),T(document,"keydown",this._checkKeyDown),T(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,o){var s="";y.length&&oe===e?y.forEach(function(a,l){s+=(l?", ":"")+a.textContent}):s=o.textContent,i.setData("Text",s)}}}return n.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;_=r},delayEnded:function(){this.isMultiDrag=~y.indexOf(_)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(!!this.isMultiDrag){for(var o=0;o<y.length;o++)q.push(_t(y[o])),q[o].sortableIndex=y[o].sortableIndex,q[o].draggable=!1,q[o].style["will-change"]="",L(q[o],this.options.selectedClass,!1),y[o]===_&&L(q[o],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,o=t.dispatchSortableEvent,s=t.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||y.length&&oe===r&&(Ar(!0,i),o("clone"),s())},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,o=t.cancel;!this.isMultiDrag||(Ar(!1,i),q.forEach(function(s){m(s,"display","")}),r(),mt=!1,o())},hideClone:function(t){var r=this,i=t.sortable,o=t.cloneNowHidden,s=t.cancel;!this.isMultiDrag||(q.forEach(function(a){m(a,"display","none"),r.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),o(),mt=!0,s())},dragStartGlobal:function(t){var r=t.sortable;!this.isMultiDrag&&oe&&oe.multiDrag._deselectMultiDrag(),y.forEach(function(i){i.sortableIndex=B(i)}),y=y.sort(function(i,o){return i.sortableIndex-o.sortableIndex}),ke=!0},dragStarted:function(t){var r=this,i=t.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){y.forEach(function(s){s!==_&&m(s,"position","absolute")});var o=A(_,!1,!0,!0);y.forEach(function(s){s!==_&&vr(s,o)}),z=!0,Ue=!0}i.animateAll(function(){z=!1,Ue=!1,r.options.animation&&y.forEach(function(s){It(s)}),r.options.sort&&vt()})}},dragOver:function(t){var r=t.target,i=t.completed,o=t.cancel;z&&~y.indexOf(r)&&(i(!1),o())},revert:function(t){var r=t.fromSortable,i=t.rootEl,o=t.sortable,s=t.dragRect;y.length>1&&(y.forEach(function(a){o.addAnimationState({target:a,rect:z?A(a):s}),It(a),a.fromRect=s,r.removeAnimationState(a)}),z=!1,Kn(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,o=t.insertion,s=t.activeSortable,a=t.parentEl,l=t.putSortable,c=this.options;if(o){if(i&&s._hideClone(),Ue=!1,c.animation&&y.length>1&&(z||!i&&!s.options.sort&&!l)){var u=A(_,!1,!0,!0);y.forEach(function(d){d!==_&&(vr(d,u),a.appendChild(d))}),z=!0}if(!i)if(z||vt(),y.length>1){var h=mt;s._showClone(r),s.options.animation&&!mt&&h&&q.forEach(function(d){s.addAnimationState({target:d,rect:qe}),d.fromRect=qe,d.thisAnimationDuration=null})}else s._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,o=t.activeSortable;if(y.forEach(function(a){a.thisAnimationDuration=null}),o.options.animation&&!i&&o.multiDrag.isMultiDrag){qe=re({},r);var s=Te(_,!0);qe.top-=s.f,qe.left-=s.e}},dragOverAnimationComplete:function(){z&&(z=!1,vt())},drop:function(t){var r=t.originalEvent,i=t.rootEl,o=t.parentEl,s=t.sortable,a=t.dispatchSortableEvent,l=t.oldIndex,c=t.putSortable,u=c||this.sortable;if(!!r){var h=this.options,d=o.children;if(!ke)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),L(_,h.selectedClass,!~y.indexOf(_)),~y.indexOf(_))y.splice(y.indexOf(_),1),ze=null,We({sortable:s,rootEl:i,name:"deselect",targetEl:_,originalEvt:r});else{if(y.push(_),We({sortable:s,rootEl:i,name:"select",targetEl:_,originalEvt:r}),r.shiftKey&&ze&&s.el.contains(ze)){var p=B(ze),g=B(_);if(~p&&~g&&p!==g){var v,x;for(g>p?(x=p,v=g):(x=g,v=p+1);x<v;x++)~y.indexOf(d[x])||(L(d[x],h.selectedClass,!0),y.push(d[x]),We({sortable:s,rootEl:i,name:"select",targetEl:d[x],originalEvt:r}))}}else ze=_;oe=u}if(ke&&this.isMultiDrag){if(z=!1,(o[G].options.sort||o!==i)&&y.length>1){var O=A(_),D=B(_,":not(."+this.options.selectedClass+")");if(!Ue&&h.animation&&(_.thisAnimationDuration=null),u.captureAnimationState(),!Ue&&(h.animation&&(_.fromRect=O,y.forEach(function(C){if(C.thisAnimationDuration=null,C!==_){var J=z?A(C):O;C.fromRect=J,u.addAnimationState({target:C,rect:J})}})),vt(),y.forEach(function(C){d[D]?o.insertBefore(C,d[D]):o.appendChild(C),D++}),l===B(_))){var F=!1;y.forEach(function(C){if(C.sortableIndex!==B(C)){F=!0;return}}),F&&a("update")}y.forEach(function(C){It(C)}),u.animateAll()}oe=u}(i===o||c&&c.lastPutMode!=="clone")&&q.forEach(function(C){C.parentNode&&C.parentNode.removeChild(C)})}},nullingGlobal:function(){this.isMultiDrag=ke=!1,q.length=0},destroyGlobal:function(){this._deselectMultiDrag(),w(document,"pointerup",this._deselectMultiDrag),w(document,"mouseup",this._deselectMultiDrag),w(document,"touchend",this._deselectMultiDrag),w(document,"keydown",this._checkKeyDown),w(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof ke!="undefined"&&ke)&&oe===this.sortable&&!(t&&ne(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;y.length;){var r=y[0];L(r,this.options.selectedClass,!1),y.shift(),We({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},re(n,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[G];!r||!r.options.multiDrag||~y.indexOf(t)||(oe&&oe!==r&&(oe.multiDrag._deselectMultiDrag(),oe=r),L(t,r.options.selectedClass,!0),y.push(t))},deselect:function(t){var r=t.parentNode[G],i=y.indexOf(t);!r||!r.options.multiDrag||!~i||(L(t,r.options.selectedClass,!1),y.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return y.forEach(function(o){r.push({multiDragElement:o,index:o.sortableIndex});var s;z&&o!==_?s=-1:z?s=B(o,":not(."+t.options.selectedClass+")"):s=B(o),i.push({multiDragElement:o,index:s})}),{items:bn(y),clones:[].concat(q),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function Kn(n,e){y.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function Ar(n,e){q.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function vt(){y.forEach(function(n){n!==_&&n.parentNode&&n.parentNode.removeChild(n)})}b.mount(new Xn);b.mount(Gt,Wt);var _e=b;var Qe=Tt(require("obsidian")),Mr=new Intl.Collator(void 0,{usage:"sort",sensitivity:"base",numeric:!0}).compare;var Or=i18next.t.bind(i18next),Vn="up-and-down-arrows",zn={alphabetical:"plugins.file-explorer.label-sort-a-to-z",alphabeticalReverse:"plugins.file-explorer.label-sort-z-to-a",byModifiedTime:"plugins.file-explorer.label-sort-new-to-old",byModifiedTimeReverse:"plugins.file-explorer.label-sort-old-to-new",byCreatedTime:"plugins.file-explorer.label-sort-created-new-to-old",byCreatedTimeReverse:"plugins.file-explorer.label-sort-created-old-to-new",custom:"Custom"},Un=[["alphabetical","alphabeticalReverse"],["byModifiedTime","byModifiedTimeReverse"],["byCreatedTime","byCreatedTimeReverse"],["custom"]],Fr=function(n,e){let t=this.fileExplorer,r=this.file.children.slice();r.sort(function(i,o){let s,a;if(e&&((s=i instanceof Qe.TFolder)||(a=o instanceof Qe.TFolder)))return s&&!a?1:a&&!s?-1:Mr(i.name,o.name);{if(!n)return Mr(i.name,o.name);let l=n.indexOf(i.path),c=n.indexOf(o.path);return(l>-1?l:1/0)-(c>-1?c:1/0)}}),this.children=r.map(i=>t.fileItems[i.path]).filter(i=>i)},Nr=function(n,e){let t=this,r=this.addNavButton(Vn,Or("plugins.file-explorer.action-change-sort"),function(i){i.preventDefault();let o=new Qe.Menu(t.app);for(let s=e(),a=0,l=Un;a<l.length;a++){for(let c=function(d){let p=Or(zn[d]);o.addItem(function(g){return g.setTitle(p).setActive(d===s).onClick(function(){d!==s&&(r.setAttribute("data-sort-method",d),t.app.workspace.trigger("file-explorer-sort-change",d)),n(d)})})},u=0,h=l[a];u<h.length;u++)c(h[u]);o.addSeparator()}o.showAtMouseEvent(i)});return setTimeout(()=>{r.setAttribute("data-sort-method",e())},100),this.addNavButton("three-horizontal-bars","Drag to rearrange",function(i){i.preventDefault();let o=!this.hasClass("is-active");this.toggleClass("is-active",o),t.app.workspace.trigger("file-explorer-draggable-change",o)}).addClass("drag-to-rearrange"),this.addNavButton("search","Filter items",function(i){var a,l;i.preventDefault();let o=!this.hasClass("is-active");this.toggleClass("is-active",o);let s=document.body.querySelector('.workspace-leaf-content[data-type="file-explorer"] .search-input-container > input');s&&!o?((a=s.parentElement)==null||a.hide(),s.value="",s.dispatchEvent(new Event("input"))):((l=s==null?void 0:s.parentElement)==null||l.show(),s==null||s.focus()),t.app.workspace.trigger("file-explorer-draggable-change",o)}),r};var Je=Tt(require("obsidian")),kr={statusBarOrder:[],ribbonBarOrder:[],fileExplorerOrder:{},actionBarOrder:{},autoHide:!1,autoHideDelay:2e3},$t=class extends Je.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}hide(){}display(){let{containerEl:e}=this;e.empty(),new Je.Setting(e).setName("Auto Collapse").setDesc("Automatically hide items once your mouse leaves the icon container").addToggle(t=>t.setValue(this.plugin.settings.autoHide).onChange(r=>{this.plugin.settings.autoHide=r,this.plugin.saveSettings()})),new Je.Setting(e).setName("Auto Collapse Delay").setDesc("How long to wait before auto collapsing").addText(t=>{t.setPlaceholder(String(2e3)),t.inputEl.type="number",t.setValue(String(this.plugin.settings.autoHideDelay)),t.onChange(r=>we(this,null,function*(){this.plugin.settings.autoHideDelay=Number(r),this.plugin.saveSettings()}))})}};function Pr(n,e){for(var t=[];n=n.previousSibling;)n.nodeType!==3&&(!e||e(n))&&t.push(n);return t}function Rr(n,e){for(var t=[];n=n.nextSibling;)n.nodeType!==3&&(!e||e(n))&&t.push(n);return t}function Lr(n,e){var i,o;let t=(e==null?void 0:e.useClass)?Array.from(n.classList).filter(s=>!s.startsWith("is-")).sort().join(" "):"",r=((e==null?void 0:e.useTag)?n.tagName:"")+((e==null?void 0:e.useClass)?t:"")+((e==null?void 0:e.useText)?n.textContent:"")+((e==null?void 0:e.useAria)?n.getAttr("aria-label"):"")+((e==null?void 0:e.useIcon)?(o=(i=n.querySelector("svg"))==null?void 0:i.className)==null?void 0:o.baseVal:"");return qn(r)}var qn=function(n,e=0){let t=3735928559^e,r=1103547991^e;for(let i=0,o;i<n.length;i++)o=n.charCodeAt(i),t=Math.imul(t^o,2654435761),r=Math.imul(r^o,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0).toString()};function bt(n,e,t,r=1){return n.splice(t,0,...n.splice(e,r)),n}var Et=n=>{let e=[];return n.reduce((t,r)=>(r.children?r.children.length&&(e=[...e,...r.children]):t.push(r),t),[]).concat(e.length?Et(e):e)},Br=(n,e="suggestion-highlight")=>{let t=(i,o,s)=>{let a=o.split("."),l;for(l=0;l<a.length-1;l++)i=i[a[l]];i[a[l]]=s},r=(i,o=[])=>o.reduce((a,[l,c])=>(a[l]=`<span class="${e}">${a[l]}`,a[c]=`${a[c]}</span>`,a),i.split("")).join("");return n.filter(({matches:i})=>i&&i.length).map(({item:i,matches:o})=>{let s=ue({},i);return o.forEach(a=>{var l;s.titleInnerEl.origContent||(s.titleInnerEl.origContent=s.titleInnerEl.textContent),t(s,"titleInnerEl.innerHTML",r(a.value,a.indices)),(l=s.titleInnerEl)==null||l.addClass("has-matches")}),s})};function pe(n){return Array.isArray?Array.isArray(n):Wr(n)==="[object Array]"}var Qn=1/0;function Jn(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-Qn?"-0":e}function Zn(n){return n==null?"":Jn(n)}function ge(n){return typeof n=="string"}function Hr(n){return typeof n=="number"}function ei(n){return n===!0||n===!1||ti(n)&&Wr(n)=="[object Boolean]"}function jr(n){return typeof n=="object"}function ti(n){return jr(n)&&n!==null}function Q(n){return n!=null}function Yt(n){return!n.trim().length}function Wr(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}var ri="Incorrect 'index' type",ni=n=>`Invalid value for key ${n}`,ii=n=>`Pattern length exceeds max of ${n}.`,oi=n=>`Missing ${n} property in key`,si=n=>`Property 'weight' in key '${n}' must be a positive integer`,Gr=Object.prototype.hasOwnProperty,$r=class{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let i=Yr(r);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Yr(n){let e=null,t=null,r=null,i=1;if(ge(n)||pe(n))r=n,e=Xr(n),t=Xt(n);else{if(!Gr.call(n,"name"))throw new Error(oi("name"));let o=n.name;if(r=o,Gr.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(si(o));e=Xr(o),t=Xt(o)}return{path:e,id:t,weight:i,src:r}}function Xr(n){return pe(n)?n:n.split(".")}function Xt(n){return pe(n)?n.join("."):n}function ai(n,e){let t=[],r=!1,i=(o,s,a)=>{if(!!Q(o))if(!s[a])t.push(o);else{let l=s[a],c=o[l];if(!Q(c))return;if(a===s.length-1&&(ge(c)||Hr(c)||ei(c)))t.push(Zn(c));else if(pe(c)){r=!0;for(let u=0,h=c.length;u<h;u+=1)i(c[u],s,a+1)}else s.length&&i(c,s,a+1)}};return i(n,ge(e)?e.split("."):e,0),r?t:t[0]}var li={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ci={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},ui={location:0,threshold:.6,distance:100},hi={useExtendedSearch:!1,getFn:ai,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},E=ue(ue(ue(ue({},ci),li),ui),hi),di=/[^ ]+/g;function fi(n=1,e=3){let t=new Map,r=Math.pow(10,e);return{get(i){let o=i.match(di).length;if(t.has(o))return t.get(o);let s=1/Math.pow(o,.5*n),a=parseFloat(Math.round(s*r)/r);return t.set(o,a),a},clear(){t.clear()}}}var yt=class{constructor({getFn:e=E.getFn,fieldNormWeight:t=E.fieldNormWeight}={}){this.norm=fi(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ge(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){let t=this.size();ge(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Q(e)||Yt(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((i,o)=>{let s=this.getFn(e,i.path);if(!!Q(s)){if(pe(s)){let a=[],l=[{nestedArrIndex:-1,value:s}];for(;l.length;){let{nestedArrIndex:c,value:u}=l.pop();if(!!Q(u))if(ge(u)&&!Yt(u)){let h={v:u,i:c,n:this.norm.get(u)};a.push(h)}else pe(u)&&u.forEach((h,d)=>{l.push({nestedArrIndex:d,value:h})})}r.$[o]=a}else if(!Yt(s)){let a={v:s,n:this.norm.get(s)};r.$[o]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function Kr(n,e,{getFn:t=E.getFn,fieldNormWeight:r=E.fieldNormWeight}={}){let i=new yt({getFn:t,fieldNormWeight:r});return i.setKeys(n.map(Yr)),i.setSources(e),i.create(),i}function pi(n,{getFn:e=E.getFn,fieldNormWeight:t=E.fieldNormWeight}={}){let{keys:r,records:i}=n,o=new yt({getFn:e,fieldNormWeight:t});return o.setKeys(r),o.setIndexRecords(i),o}function St(n,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:i=E.distance,ignoreLocation:o=E.ignoreLocation}={}){let s=e/n.length;if(o)return s;let a=Math.abs(r-t);return i?s+a/i:a?1:s}function gi(n=[],e=E.minMatchCharLength){let t=[],r=-1,i=-1,o=0;for(let s=n.length;o<s;o+=1){let a=n[o];a&&r===-1?r=o:!a&&r!==-1&&(i=o-1,i-r+1>=e&&t.push([r,i]),r=-1)}return n[o-1]&&o-r>=e&&t.push([r,o-1]),t}var Ie=32;function mi(n,e,t,{location:r=E.location,distance:i=E.distance,threshold:o=E.threshold,findAllMatches:s=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,includeMatches:l=E.includeMatches,ignoreLocation:c=E.ignoreLocation}={}){if(e.length>Ie)throw new Error(ii(Ie));let u=e.length,h=n.length,d=Math.max(0,Math.min(r,h)),p=o,g=d,v=a>1||l,x=v?Array(h):[],O;for(;(O=n.indexOf(e,g))>-1;){let R=St(e,{currentLocation:O,expectedLocation:d,distance:i,ignoreLocation:c});if(p=Math.min(R,p),g=O+u,v){let K=0;for(;K<u;)x[O+K]=1,K+=1}}g=-1;let D=[],F=1,C=u+h,J=1<<u-1;for(let R=0;R<u;R+=1){let K=0,N=C;for(;K<N;)St(e,{errors:R,currentLocation:d+N,expectedLocation:d,distance:i,ignoreLocation:c})<=p?K=N:C=N,N=Math.floor((C-K)/2+K);C=N;let ve=Math.max(1,d-N+1),Z=s?h:Math.min(d+N,h)+u,ee=Array(Z+2);ee[Z+1]=(1<<R)-1;for(let j=Z;j>=ve;j-=1){let ae=j-1,te=t[n.charAt(ae)];if(v&&(x[ae]=+!!te),ee[j]=(ee[j+1]<<1|1)&te,R&&(ee[j]|=(D[j+1]|D[j])<<1|1|D[j+1]),ee[j]&J&&(F=St(e,{errors:R,currentLocation:ae,expectedLocation:d,distance:i,ignoreLocation:c}),F<=p)){if(p=F,g=ae,g<=d)break;ve=Math.max(1,2*d-g)}}if(St(e,{errors:R+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:c})>p)break;D=ee}let X={isMatch:g>=0,score:Math.max(.001,F)};if(v){let R=gi(x,a);R.length?l&&(X.indices=R):X.isMatch=!1}return X}function vi(n){let e={};for(let t=0,r=n.length;t<r;t+=1){let i=n.charAt(t);e[i]=(e[i]||0)|1<<r-t-1}return e}var Kt=class{constructor(e,{location:t=E.location,threshold:r=E.threshold,distance:i=E.distance,includeMatches:o=E.includeMatches,findAllMatches:s=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,isCaseSensitive:l=E.isCaseSensitive,ignoreLocation:c=E.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let u=(d,p)=>{this.chunks.push({pattern:d,alphabet:vi(d),startIndex:p})},h=this.pattern.length;if(h>Ie){let d=0,p=h%Ie,g=h-p;for(;d<g;)u(this.pattern.substr(d,Ie),d),d+=Ie;if(p){let v=h-Ie;u(this.pattern.substr(v),v)}}else u(this.pattern,0)}searchIn(e){let{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let g={isMatch:!0,score:0};return r&&(g.indices=[[0,e.length-1]]),g}let{location:i,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options,u=[],h=0,d=!1;this.chunks.forEach(({pattern:g,alphabet:v,startIndex:x})=>{let{isMatch:O,score:D,indices:F}=mi(e,g,v,{location:i+x,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});O&&(d=!0),h+=D,O&&F&&(u=[...u,...F])});let p={isMatch:d,score:d?h/this.chunks.length:1};return d&&r&&(p.indices=u),p}},me=class{constructor(e){this.pattern=e}static isMultiMatch(e){return Vr(e,this.multiRegex)}static isSingleMatch(e){return Vr(e,this.singleRegex)}search(){}};function Vr(n,e){let t=n.match(e);return t?t[1]:null}var zr=class extends me{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Ur=class extends me{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},qr=class extends me{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Qr=class extends me{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Jr=class extends me{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},Zr=class extends me{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Vt=class extends me{constructor(e,{location:t=E.location,threshold:r=E.threshold,distance:i=E.distance,includeMatches:o=E.includeMatches,findAllMatches:s=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,isCaseSensitive:l=E.isCaseSensitive,ignoreLocation:c=E.ignoreLocation}={}){super(e);this._bitapSearch=new Kt(e,{location:t,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},zt=class extends me{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,r,i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+o,i.push([r,t-1]);let s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}},Ut=[zr,zt,qr,Qr,Zr,Jr,Ur,Vt],en=Ut.length,bi=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,Ei="|";function yi(n,e={}){return n.split(Ei).map(t=>{let r=t.trim().split(bi).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){let a=r[o],l=!1,c=-1;for(;!l&&++c<en;){let u=Ut[c],h=u.isMultiMatch(a);h&&(i.push(new u(h,e)),l=!0)}if(!l)for(c=-1;++c<en;){let u=Ut[c],h=u.isSingleMatch(a);if(h){i.push(new u(h,e));break}}}return i})}var Si=new Set([Vt.type,zt.type]),tn=class{constructor(e,{isCaseSensitive:t=E.isCaseSensitive,includeMatches:r=E.includeMatches,minMatchCharLength:i=E.minMatchCharLength,ignoreLocation:o=E.ignoreLocation,findAllMatches:s=E.findAllMatches,location:a=E.location,threshold:l=E.threshold,distance:c=E.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:i,findAllMatches:s,ignoreLocation:o,location:a,threshold:l,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=yi(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){let t=this.query;if(!t)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let o=0,s=[],a=0;for(let l=0,c=t.length;l<c;l+=1){let u=t[l];s.length=0,o=0;for(let h=0,d=u.length;h<d;h+=1){let p=u[h],{isMatch:g,indices:v,score:x}=p.search(e);if(g){if(o+=1,a+=x,r){let O=p.constructor.type;Si.has(O)?s=[...s,...v]:s.push(v)}}else{a=0,o=0,s.length=0;break}}if(o){let h={isMatch:!0,score:a/o};return r&&(h.indices=s),h}}return{isMatch:!1,score:1}}},qt=[];function wi(...n){qt.push(...n)}function Qt(n,e){for(let t=0,r=qt.length;t<r;t+=1){let i=qt[t];if(i.condition(n,e))return new i(n,e)}return new Kt(n,e)}var wt={AND:"$and",OR:"$or"},Jt={PATH:"$path",PATTERN:"$val"},Zt=n=>!!(n[wt.AND]||n[wt.OR]),Ti=n=>!!n[Jt.PATH],Ci=n=>!pe(n)&&jr(n)&&!Zt(n),rn=n=>({[wt.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function nn(n,e,{auto:t=!0}={}){let r=i=>{let o=Object.keys(i),s=Ti(i);if(!s&&o.length>1&&!Zt(i))return r(rn(i));if(Ci(i)){let l=s?i[Jt.PATH]:o[0],c=s?i[Jt.PATTERN]:i[l];if(!ge(c))throw new Error(ni(l));let u={keyId:Xt(l),pattern:c};return t&&(u.searcher=Qt(c,e)),u}let a={children:[],operator:o[0]};return o.forEach(l=>{let c=i[l];pe(c)&&c.forEach(u=>{a.children.push(r(u))})}),a};return Zt(n)||(n=rn(n)),r(n)}function xi(n,{ignoreFieldNorm:e=E.ignoreFieldNorm}){n.forEach(t=>{let r=1;t.matches.forEach(({key:i,norm:o,score:s})=>{let a=i?i.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(e?1:o))}),t.score=r})}function Di(n,e){let t=n.matches;e.matches=[],!!Q(t)&&t.forEach(r=>{if(!Q(r.indices)||!r.indices.length)return;let{indices:i,value:o}=r,s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),e.matches.push(s)})}function _i(n,e){e.score=n.score}function Ii(n,e,{includeMatches:t=E.includeMatches,includeScore:r=E.includeScore}={}){let i=[];return t&&i.push(Di),r&&i.push(_i),n.map(o=>{let{idx:s}=o,a={item:e[s],refIndex:s};return i.length&&i.forEach(l=>{l(o,a)}),a})}var Se=class{constructor(e,t={},r){this.options=ue(ue({},E),t),this.options.useExtendedSearch,this._keyStore=new $r(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof yt))throw new Error(ri);this._myIndex=t||Kr(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!Q(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let t=[];for(let r=0,i=this._docs.length;r<i;r+=1){let o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){let{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:a}=this.options,l=ge(e)?ge(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return xi(l,{ignoreFieldNorm:a}),o&&l.sort(s),Hr(t)&&t>-1&&(l=l.slice(0,t)),Ii(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){let t=Qt(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:a})=>{if(!Q(o))return;let{isMatch:l,score:c,indices:u}=t.searchIn(o);l&&i.push({item:o,idx:s,matches:[{score:c,value:o,norm:a,indices:u}]})}),i}_searchLogical(e){let t=nn(e,this.options),r=(a,l,c)=>{if(!a.children){let{keyId:h,searcher:d}=a,p=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:d});return p&&p.length?[{idx:c,item:l,matches:p}]:[]}let u=[];for(let h=0,d=a.children.length;h<d;h+=1){let p=a.children[h],g=r(p,l,c);if(g.length)u.push(...g);else if(a.operator===wt.AND)return[]}return u},i=this._myIndex.records,o={},s=[];return i.forEach(({$:a,i:l})=>{if(Q(a)){let c=r(t,a,l);c.length&&(o[l]||(o[l]={idx:l,item:a,matches:[]},s.push(o[l])),c.forEach(({matches:u})=>{o[l].matches.push(...u)}))}}),s}_searchObjectList(e){let t=Qt(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:a})=>{if(!Q(s))return;let l=[];r.forEach((c,u)=>{l.push(...this._findMatches({key:c,value:s[u],searcher:t}))}),l.length&&o.push({idx:a,item:s,matches:l})}),o}_findMatches({key:e,value:t,searcher:r}){if(!Q(t))return[];let i=[];if(pe(t))t.forEach(({v:o,i:s,n:a})=>{if(!Q(o))return;let{isMatch:l,score:c,indices:u}=r.searchIn(o);l&&i.push({score:c,key:e,value:o,idx:s,norm:a,indices:u})});else{let{v:o,n:s}=t,{isMatch:a,score:l,indices:c}=r.searchIn(o);a&&i.push({score:l,key:e,value:o,norm:s,indices:c})}return i}};Se.version="6.5.3";Se.createIndex=Kr;Se.parseIndex=pi;Se.config=E;Se.parseQuery=nn;wi(tn);_e.mount(new Ir);var Ai="body > div.app-container div.status-bar",Mi="body > div.app-container div.side-dock-actions",er=I.Platform.isMobile?200:20,Ze=500,tr=class extends I.Plugin{constructor(){super(...arguments);this.fileExplorerFilter=function(){var t,r,i;if(!!((t=this==null?void 0:this.rootEl)==null?void 0:t.fileExplorer))if(((r=this.filter)==null?void 0:r.length)>=1){this.filtered||(this.rootEl._children=this.rootEl.children,this.filtered=!0);let o={includeScore:!0,includeMatches:!0,useExtendedSearch:!0,threshold:.3,keys:["file.name","file.path"]},s=Et(this.rootEl._children),a=new Se(s,o),l=200,c=a.search(this.filter).slice(0,l);this.rootEl.children=Br(c)}else((i=this.filter)==null?void 0:i.length)<1&&this.filtered&&(this.rootEl._children&&(this.rootEl.children=this.rootEl._children),Et(this.rootEl._children).map(s=>{s.titleInnerEl.origContent&&(s.titleInnerEl.setText(s.titleInnerEl.origContent),delete s.titleInnerEl.origContent,s.titleInnerEl.removeClass("has-matches"))}),this.filtered=!1)}}onload(){return we(this,null,function*(){yield this.loadSettings(),this.registerMonkeyPatches(),this.registerEventHandlers(),this.registerSettingsTab(),this.initialize()})}loadSettings(){return we(this,null,function*(){this.settings=Object.assign({},kr,yield this.loadData())})}saveSettings(){return we(this,null,function*(){yield this.saveData(this.settings)})}patchFileExplorerFolder(){let e=this,t=this.app.workspace.getLeaf(),r=this.app.viewRegistry.viewByType["file-explorer"](t),i=new I.TFolder(I.Vault,""),o=r.createFolderDom(i).constructor;this.register(he(o.prototype,{sort(s){return function(...a){let l=e.settings.fileExplorerOrder[this.file.path];return this.fileExplorer.sortOrder==="custom"?Fr.call(this,l,...a):s.call(this,...a)}}}))}initialize(){this.app.workspace.onLayoutReady(()=>{this.patchFileExplorerFolder(),setTimeout(()=>{if(I.Platform.isDesktop){this.insertSeparator(Ai,"status-bar-item",!0,16),this.setStatusBarSorter();let e=this.app.workspace.leftSplit.children,t=this.app.workspace.rightSplit.children;e.concat(t).forEach(r=>{r.hasOwnProperty("tabsInnerEl")&&!r.iconSorter&&(r.iconSorter=this.setTabBarSorter(r.tabsInnerEl,r))})}this.setFileExplorerSorter(),this.insertSeparator(Mi,"side-dock-ribbon-action",!1,18),this.setRibbonBarSorter(),this.app.workspace.iterateRootLeaves(e=>{var t,r;((t=e==null?void 0:e.view)==null?void 0:t.hasOwnProperty("actionsEl"))&&!((r=e==null?void 0:e.view)==null?void 0:r.hasOwnProperty("iconSorter"))&&(e.view.iconSorter=this.setViewActionSorter(e.view.actionsEl,e.view))})},I.Platform.isMobile?3e3:400)})}registerSettingsTab(){this.settingsTab=new $t(this.app,this),this.addSettingTab(this.settingsTab)}clearFileExplorerFilter(){let e=this.getFileExplorer(),t=document.body.querySelector('.workspace-leaf-content[data-type="file-explorer"] .search-input-container > input');t&&(t.value=""),e.dom.infinityScroll.filter="",e.dom.infinityScroll.compute()}registerEventHandlers(){this.registerEvent(this.app.workspace.on("file-explorer-draggable-change",e=>{this.toggleFileExplorerSorters(e)})),this.registerEvent(this.app.workspace.on("file-explorer-sort-change",e=>{e==="custom"?setTimeout(()=>{this.setFileExplorerSorter()},10):this.cleanupFileExplorerSorters()})),this.registerEvent(this.app.workspace.on("file-explorer-load",e=>{setTimeout(()=>{this.setFileExplorerSorter(e)},1e3)})),this.registerEvent(this.app.workspace.on("bartender-leaf-split",(e,t)=>{let r=t.tabsInnerEl;t.type==="tabs"&&t instanceof I.WorkspaceTabs&&this.setTabBarSorter(r,t)})),this.registerEvent(this.app.workspace.on("ribbon-bar-updated",()=>{setTimeout(()=>{this.settings.ribbonBarOrder&&this.ribbonBarSorter&&(this.setElementIDs(this.ribbonBarSorter.el,{useClass:!0,useAria:!0,useIcon:!0}),this.ribbonBarSorter.sort(this.settings.ribbonBarOrder))},0)})),this.registerEvent(this.app.workspace.on("status-bar-updated",()=>{setTimeout(()=>{this.settings.statusBarOrder&&this.statusBarSorter&&(this.setElementIDs(this.statusBarSorter.el,{useClass:!0,useIcon:!0}),this.statusBarSorter.sort(this.settings.statusBarOrder))},0)}))}registerMonkeyPatches(){let e=this;if(this.register(he(this.app.viewRegistry.constructor.prototype,{registerView(t){return function(r,i,...o){return e.app.workspace.trigger("view-registered",r,i),t.call(this,r,i,...o)}}})),this.app.workspace.layoutReady){let t=this.getFileExplorer();this.patchFileExplorer(t)}else{let t=this.app.workspace.on("view-registered",(r,i)=>{if(r!=="file-explorer")return;this.app.workspace.offref(t);let o=new I.WorkspaceLeaf(e.app),s=i(o);this.patchFileExplorer(s)})}this.register(he(I.View.prototype,{onunload(t){return function(...r){try{this.iconSorter&&(this.iconSorter.destroy(),this.iconSorter=null)}catch(i){}return t.call(this,...r)}},onload(t){return function(...r){return setTimeout(()=>{if(this.app.workspace.layoutReady)try{this.leaf.parentSplit instanceof I.WorkspaceTabs||this.hasOwnProperty("actionsEl")&&!this.iconSorter&&(this.iconSorter=e.setViewActionSorter(this.actionsEl,this))}catch(i){}},200),t.call(this,...r)}}})),I.Platform.isDesktop&&this.register(he(HTMLDivElement.prototype,{addEventListener(t){return function(r,i,o){if(r==="mousedown"&&i instanceof Function&&this.hasClass("workspace-tab-header")){let a=i;i=l=>{l instanceof MouseEvent&&((l==null?void 0:l.altKey)||(l==null?void 0:l.metaKey))||a(l)}}return t.call(this,r,i,o)}}})),this.register(he(I.Workspace.prototype,{splitLeaf(t){return function(r,i,o,s,...a){let l=t.call(this,r,i,o,s,...a);return this.trigger("bartender-leaf-split",r,i),l}},changeLayout(t){return function(r,...i){return we(this,null,function*(){let o=yield t.call(this,r,...i);return this.trigger("bartender-workspace-change"),o})}}})),this.register(he(I.Plugin.prototype,{addStatusBarItem(t){return function(...r){let i=t.call(this,...r);return this.app.workspace.trigger("status-bar-updated"),i}},addRibbonIcon(t){return function(...r){let i=t.call(this,...r);return this.app.workspace.trigger("ribbon-bar-updated"),i}}}))}patchFileExplorer(e){let t=this;if(e){let r=e.dom.infinityScroll.constructor;this.register(()=>this.clearFileExplorerFilter()),this.register(he(r.prototype,{compute(i){return function(...o){try{this.scrollEl.hasClass("nav-files-container")&&t.fileExplorerFilter.call(this)}catch(a){}return i.call(this,...o)}}})),this.register(he(e.headerDom.constructor.prototype,{addSortButton(i){return function(...o){var s,a,l;return((l=(a=(s=this.navHeaderEl)==null?void 0:s.parentElement)==null?void 0:a.dataset)==null?void 0:l.type)==="file-explorer"?(t.setFileExplorerFilter(this),Nr.call(this,...o)):i.call(this,...o)}}}))}}insertSeparator(e,t,r,i=16){document.body.querySelectorAll(e).forEach(s=>{let a=r?Pr:Rr;if(s){let l=s.createDiv(`${t} separator`);r&&s.prepend(l);let c=l.createDiv("glyph");(0,I.setIcon)(c,"plus-with-circle",i),l.addClass("is-collapsed"),this.register(()=>l.detach());let h;l.onClickEvent(d=>{l.hasClass("is-collapsed")?(Array.from(s.children).forEach(p=>p.removeClass("is-hidden")),l.removeClass("is-collapsed")):(a(l).forEach(p=>p.addClass("is-hidden")),l.addClass("is-collapsed"))}),s.onmouseenter=d=>{h&&clearTimeout(h)},s.onmouseleave=d=>{this.settings.autoHide&&(h=setTimeout(()=>{a(l).forEach(p=>p.addClass("is-hidden")),l.addClass("is-collapsed")},this.settings.autoHideDelay))},setTimeout(()=>{a(l).forEach(d=>d.addClass("is-hidden")),l.addClass("is-collapsed")},0)}})}setElementIDs(e,t){Array.from(e.children).forEach(r=>{r instanceof HTMLElement&&(r.getAttribute("data-id")||r.setAttribute("data-id",Lr(r,t)))})}setTabBarSorter(e,t){return this.setElementIDs(e,{useClass:!0,useIcon:!0}),_e.create(e,{group:"leftTabBar",dataIdAttr:"data-id",delay:0,dropBubble:!1,dragoverBubble:!1,animation:Ze,onChoose:()=>{var i;return(i=e.parentElement)==null?void 0:i.addClass("is-dragging")},onUnchoose:()=>{var i;return(i=e.parentElement)==null?void 0:i.removeClass("is-dragging")},onStart:()=>{var i;document.body.addClass("is-dragging"),(i=e.querySelector(".separator"))==null||i.removeClass("is-collapsed"),Array.from(e.children).forEach(o=>o.removeClass("is-hidden"))},onEnd:i=>{document.body.removeClass("is-dragging"),i.oldIndex!==void 0&&i.newIndex!==void 0&&(bt(t.children,i.oldIndex,i.newIndex),t.currentTab=i.newIndex,t.recomputeChildrenDimensions()),this.app.workspace.requestSaveLayout()}})}setStatusBarSorter(){let e=document.body.querySelector("body > div.app-container > div.status-bar");e&&(this.setElementIDs(e,{useClass:!0,useAria:!0,useIcon:!0}),this.statusBarSorter=_e.create(e,{group:"statusBar",dataIdAttr:"data-id",delay:er,animation:Ze,onChoose:()=>{Array.from(e.children).forEach(t=>t.removeClass("is-hidden"))},onStart:()=>{var t;(t=e.querySelector(".separator"))==null||t.removeClass("is-collapsed"),Array.from(e.children).forEach(r=>r.removeClass("is-hidden"))},store:{get:t=>this.settings.statusBarOrder,set:t=>{this.settings.statusBarOrder=t.toArray(),this.saveSettings()}}}))}setViewActionSorter(e,t){if(this.setElementIDs(e,{useClass:!0,useIcon:!0}),Object.values(e).find(s=>s==null?void 0:s.hasOwnProperty("nativeDraggable")))return;let i=(t==null?void 0:t.getViewType())||"unknown";return new _e(e,{group:"actionBar",dataIdAttr:"data-id",delay:er,sort:!0,animation:Ze,onStart:()=>{var s;(s=e.querySelector(".separator"))==null||s.removeClass("is-collapsed"),Array.from(e.children).forEach(a=>a.removeClass("is-hidden"))},store:{get:()=>this.settings.actionBarOrder[i],set:s=>{this.settings.actionBarOrder[i]=s.toArray(),this.saveSettings()}}})}setRibbonBarSorter(){let e=document.body.querySelector("body > div.app-container div.side-dock-actions");e&&(this.setElementIDs(e,{useClass:!0,useAria:!0,useIcon:!0}),this.ribbonBarSorter=_e.create(e,{group:"ribbonBar",dataIdAttr:"data-id",delay:er,animation:Ze,onChoose:()=>{Array.from(e.children).forEach(t=>t.removeClass("is-hidden"))},onStart:()=>{var t;(t=e.querySelector(".separator"))==null||t.removeClass("is-collapsed"),Array.from(e.children).forEach(r=>r.removeClass("is-hidden"))},store:{get:t=>this.settings.ribbonBarOrder,set:t=>{this.settings.ribbonBarOrder=t.toArray(),this.saveSettings()}}}))}setFileExplorerFilter(e){let t=e.navHeaderEl;if(t){let r=t.createDiv("search-input-container");t.insertAdjacentElement("afterend",r);let i=r.createEl("input");i.placeholder="Type to filter...",i.type="text",r.hide(),i.oninput=s=>{let a=this.getFileExplorer();s.target instanceof HTMLInputElement&&(s.target.value.length?o.show():o.hide(),a.dom.infinityScroll.filter=s.target.value),a.dom.infinityScroll.compute()};let o=r.createDiv("search-input-clear-button",function(s){s.addEventListener("click",function(){i.value="",o.hide(),i.focus(),i.dispatchEvent(new Event("input"))}),s.hide()})}}setFileExplorerSorter(e){var r;if(e||(e=this.getFileExplorer()),!e||e.sortOrder!=="custom"||e.hasCustomSorter)return;let t=this.getRootFolders(e);if(!(!t||!t.length))for(let i of t){let o=i==null?void 0:i.childrenEl;if(!o)continue;let s;e.hasCustomSorter=!0;let a=!!((r=document.body.querySelector("div.nav-action-button.drag-to-rearrange"))==null?void 0:r.hasClass("is-active"));i.sorter=_e.create(o,{group:"fileExplorer"+i.file.path,multiDrag:!0,multiDragKey:"alt",delay:I.Platform.isMobile?200:0,sort:a,animation:Ze,onStart:l=>{l.items.length?s=l.items:s=[l.item]},onMove:l=>{if(!i.children||!(s==null?void 0:s.length))return;let c=i.children.map(v=>v.el),u=l.related,h=c.indexOf(u),d=s.first(),p=c.indexOf(d),g=s.slice();p>h&&g.reverse();for(let v of g){let x=c.indexOf(v);i.children=bt(i.children,x,h),c=bt(c,x,h)}this.settings.fileExplorerOrder[i.file.path]=i.children.map(v=>v.file.path),this.saveSettings()},onEnd:l=>{var c;s=[],(c=document.querySelector("body>div.drag-ghost"))==null||c.detach()}})}}getFileExplorer(){var t,r;return(r=(t=this.app.workspace.getLeavesOfType("file-explorer"))==null?void 0:t.first())==null?void 0:r.view}getRootFolders(e){var i,o;if(e||(e=this.getFileExplorer()),!e)return;let t=(o=(i=e.dom)==null?void 0:i.infinityScroll)==null?void 0:o.rootEl;return t&&this.traverseRoots(t)}traverseRoots(e,t){t||(t=[e]);for(let r of e.children||[])r.children&&t.push(r),this.traverseRoots(r,t);return t}toggleFileExplorerSorters(e){let t=this.getFileExplorer(),r=this.getRootFolders(t);if(r==null?void 0:r.length)for(let i of r)i.sorter&&i.sorter.option("sort",e)}cleanupFileExplorerSorters(){let e=this.getFileExplorer(),t=this.getRootFolders(e);if(t==null?void 0:t.length)for(let r of t)r.sorter&&(r.sorter.destroy(),delete r.sorter,Object.keys(r.childrenEl).forEach(i=>i.startsWith("Sortable")&&delete r.childrenEl[i]),r.childrenEl.querySelectorAll("div.nav-file-title").forEach(i=>i.draggable=!0),r.childrenEl.querySelectorAll("div.nav-folder-title").forEach(i=>i.draggable=!0));delete e.hasCustomSorter}onunload(){var e,t;(e=this.statusBarSorter)==null||e.destroy(),(t=this.ribbonBarSorter)==null||t.destroy(),this.app.workspace.iterateAllLeaves(r=>{var o,s,a;let i;if((i=(r==null?void 0:r.iconSorter)?r:!1)||(i=((o=r==null?void 0:r.view)==null?void 0:o.iconSorter)?r.view:!1)||(i=(r==null?void 0:r.parentSplit)instanceof I.WorkspaceTabs&&((s=r==null?void 0:r.parentSplit)==null?void 0:s.iconSorter)?r==null?void 0:r.parentSplit:!1))try{(a=i.iconSorter)==null||a.destroy()}catch(l){}finally{delete i.iconSorter}}),this.cleanupFileExplorerSorters()}};
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
