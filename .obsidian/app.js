(()=>{var t={932:t=>{"use strict";t.exports=function(t,e){var n,i=String(t),r=0;if("string"!=typeof e||1!==e.length)throw new Error("Expected character");n=i.indexOf(e);for(;-1!==n;)r++,n=i.indexOf(e,n+1);return r}},5848:t=>{"use strict";t.exports=JSON.parse('{"nbsp":" ","iexcl":"¡","cent":"¢","pound":"£","curren":"¤","yen":"¥","brvbar":"¦","sect":"§","uml":"¨","copy":"©","ordf":"ª","laquo":"«","not":"¬","shy":"­","reg":"®","macr":"¯","deg":"°","plusmn":"±","sup2":"²","sup3":"³","acute":"´","micro":"µ","para":"¶","middot":"·","cedil":"¸","sup1":"¹","ordm":"º","raquo":"»","frac14":"¼","frac12":"½","frac34":"¾","iquest":"¿","Agrave":"À","Aacute":"Á","Acirc":"Â","Atilde":"Ã","Auml":"Ä","Aring":"Å","AElig":"Æ","Ccedil":"Ç","Egrave":"È","Eacute":"É","Ecirc":"Ê","Euml":"Ë","Igrave":"Ì","Iacute":"Í","Icirc":"Î","Iuml":"Ï","ETH":"Ð","Ntilde":"Ñ","Ograve":"Ò","Oacute":"Ó","Ocirc":"Ô","Otilde":"Õ","Ouml":"Ö","times":"×","Oslash":"Ø","Ugrave":"Ù","Uacute":"Ú","Ucirc":"Û","Uuml":"Ü","Yacute":"Ý","THORN":"Þ","szlig":"ß","agrave":"à","aacute":"á","acirc":"â","atilde":"ã","auml":"ä","aring":"å","aelig":"æ","ccedil":"ç","egrave":"è","eacute":"é","ecirc":"ê","euml":"ë","igrave":"ì","iacute":"í","icirc":"î","iuml":"ï","eth":"ð","ntilde":"ñ","ograve":"ò","oacute":"ó","ocirc":"ô","otilde":"õ","ouml":"ö","divide":"÷","oslash":"ø","ugrave":"ù","uacute":"ú","ucirc":"û","uuml":"ü","yacute":"ý","thorn":"þ","yuml":"ÿ","fnof":"ƒ","Alpha":"Α","Beta":"Β","Gamma":"Γ","Delta":"Δ","Epsilon":"Ε","Zeta":"Ζ","Eta":"Η","Theta":"Θ","Iota":"Ι","Kappa":"Κ","Lambda":"Λ","Mu":"Μ","Nu":"Ν","Xi":"Ξ","Omicron":"Ο","Pi":"Π","Rho":"Ρ","Sigma":"Σ","Tau":"Τ","Upsilon":"Υ","Phi":"Φ","Chi":"Χ","Psi":"Ψ","Omega":"Ω","alpha":"α","beta":"β","gamma":"γ","delta":"δ","epsilon":"ε","zeta":"ζ","eta":"η","theta":"θ","iota":"ι","kappa":"κ","lambda":"λ","mu":"μ","nu":"ν","xi":"ξ","omicron":"ο","pi":"π","rho":"ρ","sigmaf":"ς","sigma":"σ","tau":"τ","upsilon":"υ","phi":"φ","chi":"χ","psi":"ψ","omega":"ω","thetasym":"ϑ","upsih":"ϒ","piv":"ϖ","bull":"•","hellip":"…","prime":"′","Prime":"″","oline":"‾","frasl":"⁄","weierp":"℘","image":"ℑ","real":"ℜ","trade":"™","alefsym":"ℵ","larr":"←","uarr":"↑","rarr":"→","darr":"↓","harr":"↔","crarr":"↵","lArr":"⇐","uArr":"⇑","rArr":"⇒","dArr":"⇓","hArr":"⇔","forall":"∀","part":"∂","exist":"∃","empty":"∅","nabla":"∇","isin":"∈","notin":"∉","ni":"∋","prod":"∏","sum":"∑","minus":"−","lowast":"∗","radic":"√","prop":"∝","infin":"∞","ang":"∠","and":"∧","or":"∨","cap":"∩","cup":"∪","int":"∫","there4":"∴","sim":"∼","cong":"≅","asymp":"≈","ne":"≠","equiv":"≡","le":"≤","ge":"≥","sub":"⊂","sup":"⊃","nsub":"⊄","sube":"⊆","supe":"⊇","oplus":"⊕","otimes":"⊗","perp":"⊥","sdot":"⋅","lceil":"⌈","rceil":"⌉","lfloor":"⌊","rfloor":"⌋","lang":"〈","rang":"〉","loz":"◊","spades":"♠","clubs":"♣","hearts":"♥","diams":"♦","quot":"\\"","amp":"&","lt":"<","gt":">","OElig":"Œ","oelig":"œ","Scaron":"Š","scaron":"š","Yuml":"Ÿ","circ":"ˆ","tilde":"˜","ensp":" ","emsp":" ","thinsp":" ","zwnj":"‌","zwj":"‍","lrm":"‎","rlm":"‏","ndash":"–","mdash":"—","lsquo":"‘","rsquo":"’","sbquo":"‚","ldquo":"“","rdquo":"”","bdquo":"„","dagger":"†","Dagger":"‡","permil":"‰","lsaquo":"‹","rsaquo":"›","euro":"€"}')},6588:t=>{"use strict";t.exports=JSON.parse('{"AElig":"Æ","AMP":"&","Aacute":"Á","Acirc":"Â","Agrave":"À","Aring":"Å","Atilde":"Ã","Auml":"Ä","COPY":"©","Ccedil":"Ç","ETH":"Ð","Eacute":"É","Ecirc":"Ê","Egrave":"È","Euml":"Ë","GT":">","Iacute":"Í","Icirc":"Î","Igrave":"Ì","Iuml":"Ï","LT":"<","Ntilde":"Ñ","Oacute":"Ó","Ocirc":"Ô","Ograve":"Ò","Oslash":"Ø","Otilde":"Õ","Ouml":"Ö","QUOT":"\\"","REG":"®","THORN":"Þ","Uacute":"Ú","Ucirc":"Û","Ugrave":"Ù","Uuml":"Ü","Yacute":"Ý","aacute":"á","acirc":"â","acute":"´","aelig":"æ","agrave":"à","amp":"&","aring":"å","atilde":"ã","auml":"ä","brvbar":"¦","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","curren":"¤","deg":"°","divide":"÷","eacute":"é","ecirc":"ê","egrave":"è","eth":"ð","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","iacute":"í","icirc":"î","iexcl":"¡","igrave":"ì","iquest":"¿","iuml":"ï","laquo":"«","lt":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","ntilde":"ñ","oacute":"ó","ocirc":"ô","ograve":"ò","ordf":"ª","ordm":"º","oslash":"ø","otilde":"õ","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","raquo":"»","reg":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","thorn":"þ","times":"×","uacute":"ú","ucirc":"û","ugrave":"ù","uml":"¨","uuml":"ü","yacute":"ý","yen":"¥","yuml":"ÿ"}')},3407:t=>{"use strict";t.exports=JSON.parse('{"AEli":"Æ","AElig":"Æ","AM":"&","AMP":"&","Aacut":"Á","Aacute":"Á","Abreve":"Ă","Acir":"Â","Acirc":"Â","Acy":"А","Afr":"𝔄","Agrav":"À","Agrave":"À","Alpha":"Α","Amacr":"Ā","And":"⩓","Aogon":"Ą","Aopf":"𝔸","ApplyFunction":"⁡","Arin":"Å","Aring":"Å","Ascr":"𝒜","Assign":"≔","Atild":"Ã","Atilde":"Ã","Aum":"Ä","Auml":"Ä","Backslash":"∖","Barv":"⫧","Barwed":"⌆","Bcy":"Б","Because":"∵","Bernoullis":"ℬ","Beta":"Β","Bfr":"𝔅","Bopf":"𝔹","Breve":"˘","Bscr":"ℬ","Bumpeq":"≎","CHcy":"Ч","COP":"©","COPY":"©","Cacute":"Ć","Cap":"⋒","CapitalDifferentialD":"ⅅ","Cayleys":"ℭ","Ccaron":"Č","Ccedi":"Ç","Ccedil":"Ç","Ccirc":"Ĉ","Cconint":"∰","Cdot":"Ċ","Cedilla":"¸","CenterDot":"·","Cfr":"ℭ","Chi":"Χ","CircleDot":"⊙","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","Colon":"∷","Colone":"⩴","Congruent":"≡","Conint":"∯","ContourIntegral":"∮","Copf":"ℂ","Coproduct":"∐","CounterClockwiseContourIntegral":"∳","Cross":"⨯","Cscr":"𝒞","Cup":"⋓","CupCap":"≍","DD":"ⅅ","DDotrahd":"⤑","DJcy":"Ђ","DScy":"Ѕ","DZcy":"Џ","Dagger":"‡","Darr":"↡","Dashv":"⫤","Dcaron":"Ď","Dcy":"Д","Del":"∇","Delta":"Δ","Dfr":"𝔇","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","Diamond":"⋄","DifferentialD":"ⅆ","Dopf":"𝔻","Dot":"¨","DotDot":"⃜","DotEqual":"≐","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrow":"↓","DownArrowBar":"⤓","DownArrowUpArrow":"⇵","DownBreve":"̑","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVector":"↽","DownLeftVectorBar":"⥖","DownRightTeeVector":"⥟","DownRightVector":"⇁","DownRightVectorBar":"⥗","DownTee":"⊤","DownTeeArrow":"↧","Downarrow":"⇓","Dscr":"𝒟","Dstrok":"Đ","ENG":"Ŋ","ET":"Ð","ETH":"Ð","Eacut":"É","Eacute":"É","Ecaron":"Ě","Ecir":"Ê","Ecirc":"Ê","Ecy":"Э","Edot":"Ė","Efr":"𝔈","Egrav":"È","Egrave":"È","Element":"∈","Emacr":"Ē","EmptySmallSquare":"◻","EmptyVerySmallSquare":"▫","Eogon":"Ę","Eopf":"𝔼","Epsilon":"Ε","Equal":"⩵","EqualTilde":"≂","Equilibrium":"⇌","Escr":"ℰ","Esim":"⩳","Eta":"Η","Eum":"Ë","Euml":"Ë","Exists":"∃","ExponentialE":"ⅇ","Fcy":"Ф","Ffr":"𝔉","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","Fopf":"𝔽","ForAll":"∀","Fouriertrf":"ℱ","Fscr":"ℱ","GJcy":"Ѓ","G":">","GT":">","Gamma":"Γ","Gammad":"Ϝ","Gbreve":"Ğ","Gcedil":"Ģ","Gcirc":"Ĝ","Gcy":"Г","Gdot":"Ġ","Gfr":"𝔊","Gg":"⋙","Gopf":"𝔾","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","Gt":"≫","HARDcy":"Ъ","Hacek":"ˇ","Hat":"^","Hcirc":"Ĥ","Hfr":"ℌ","HilbertSpace":"ℋ","Hopf":"ℍ","HorizontalLine":"─","Hscr":"ℋ","Hstrok":"Ħ","HumpDownHump":"≎","HumpEqual":"≏","IEcy":"Е","IJlig":"Ĳ","IOcy":"Ё","Iacut":"Í","Iacute":"Í","Icir":"Î","Icirc":"Î","Icy":"И","Idot":"İ","Ifr":"ℑ","Igrav":"Ì","Igrave":"Ì","Im":"ℑ","Imacr":"Ī","ImaginaryI":"ⅈ","Implies":"⇒","Int":"∬","Integral":"∫","Intersection":"⋂","InvisibleComma":"⁣","InvisibleTimes":"⁢","Iogon":"Į","Iopf":"𝕀","Iota":"Ι","Iscr":"ℐ","Itilde":"Ĩ","Iukcy":"І","Ium":"Ï","Iuml":"Ï","Jcirc":"Ĵ","Jcy":"Й","Jfr":"𝔍","Jopf":"𝕁","Jscr":"𝒥","Jsercy":"Ј","Jukcy":"Є","KHcy":"Х","KJcy":"Ќ","Kappa":"Κ","Kcedil":"Ķ","Kcy":"К","Kfr":"𝔎","Kopf":"𝕂","Kscr":"𝒦","LJcy":"Љ","L":"<","LT":"<","Lacute":"Ĺ","Lambda":"Λ","Lang":"⟪","Laplacetrf":"ℒ","Larr":"↞","Lcaron":"Ľ","Lcedil":"Ļ","Lcy":"Л","LeftAngleBracket":"⟨","LeftArrow":"←","LeftArrowBar":"⇤","LeftArrowRightArrow":"⇆","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVector":"⇃","LeftDownVectorBar":"⥙","LeftFloor":"⌊","LeftRightArrow":"↔","LeftRightVector":"⥎","LeftTee":"⊣","LeftTeeArrow":"↤","LeftTeeVector":"⥚","LeftTriangle":"⊲","LeftTriangleBar":"⧏","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVector":"↿","LeftUpVectorBar":"⥘","LeftVector":"↼","LeftVectorBar":"⥒","Leftarrow":"⇐","Leftrightarrow":"⇔","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","LessLess":"⪡","LessSlantEqual":"⩽","LessTilde":"≲","Lfr":"𝔏","Ll":"⋘","Lleftarrow":"⇚","Lmidot":"Ŀ","LongLeftArrow":"⟵","LongLeftRightArrow":"⟷","LongRightArrow":"⟶","Longleftarrow":"⟸","Longleftrightarrow":"⟺","Longrightarrow":"⟹","Lopf":"𝕃","LowerLeftArrow":"↙","LowerRightArrow":"↘","Lscr":"ℒ","Lsh":"↰","Lstrok":"Ł","Lt":"≪","Map":"⤅","Mcy":"М","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","MinusPlus":"∓","Mopf":"𝕄","Mscr":"ℳ","Mu":"Μ","NJcy":"Њ","Nacute":"Ń","Ncaron":"Ň","Ncedil":"Ņ","Ncy":"Н","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","Nfr":"𝔑","NoBreak":"⁠","NonBreakingSpace":" ","Nopf":"ℕ","Not":"⫬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","NotLeftTriangle":"⋪","NotLeftTriangleBar":"⧏̸","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangle":"⋫","NotRightTriangleBar":"⧐̸","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","Nscr":"𝒩","Ntild":"Ñ","Ntilde":"Ñ","Nu":"Ν","OElig":"Œ","Oacut":"Ó","Oacute":"Ó","Ocir":"Ô","Ocirc":"Ô","Ocy":"О","Odblac":"Ő","Ofr":"𝔒","Ograv":"Ò","Ograve":"Ò","Omacr":"Ō","Omega":"Ω","Omicron":"Ο","Oopf":"𝕆","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","Or":"⩔","Oscr":"𝒪","Oslas":"Ø","Oslash":"Ø","Otild":"Õ","Otilde":"Õ","Otimes":"⨷","Oum":"Ö","Ouml":"Ö","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","PartialD":"∂","Pcy":"П","Pfr":"𝔓","Phi":"Φ","Pi":"Π","PlusMinus":"±","Poincareplane":"ℌ","Popf":"ℙ","Pr":"⪻","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","Prime":"″","Product":"∏","Proportion":"∷","Proportional":"∝","Pscr":"𝒫","Psi":"Ψ","QUO":"\\"","QUOT":"\\"","Qfr":"𝔔","Qopf":"ℚ","Qscr":"𝒬","RBarr":"⤐","RE":"®","REG":"®","Racute":"Ŕ","Rang":"⟫","Rarr":"↠","Rarrtl":"⤖","Rcaron":"Ř","Rcedil":"Ŗ","Rcy":"Р","Re":"ℜ","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","Rfr":"ℜ","Rho":"Ρ","RightAngleBracket":"⟩","RightArrow":"→","RightArrowBar":"⇥","RightArrowLeftArrow":"⇄","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVector":"⇂","RightDownVectorBar":"⥕","RightFloor":"⌋","RightTee":"⊢","RightTeeArrow":"↦","RightTeeVector":"⥛","RightTriangle":"⊳","RightTriangleBar":"⧐","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVector":"↾","RightUpVectorBar":"⥔","RightVector":"⇀","RightVectorBar":"⥓","Rightarrow":"⇒","Ropf":"ℝ","RoundImplies":"⥰","Rrightarrow":"⇛","Rscr":"ℛ","Rsh":"↱","RuleDelayed":"⧴","SHCHcy":"Щ","SHcy":"Ш","SOFTcy":"Ь","Sacute":"Ś","Sc":"⪼","Scaron":"Š","Scedil":"Ş","Scirc":"Ŝ","Scy":"С","Sfr":"𝔖","ShortDownArrow":"↓","ShortLeftArrow":"←","ShortRightArrow":"→","ShortUpArrow":"↑","Sigma":"Σ","SmallCircle":"∘","Sopf":"𝕊","Sqrt":"√","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","Sscr":"𝒮","Star":"⋆","Sub":"⋐","Subset":"⋐","SubsetEqual":"⊆","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","SuchThat":"∋","Sum":"∑","Sup":"⋑","Superset":"⊃","SupersetEqual":"⊇","Supset":"⋑","THOR":"Þ","THORN":"Þ","TRADE":"™","TSHcy":"Ћ","TScy":"Ц","Tab":"\\t","Tau":"Τ","Tcaron":"Ť","Tcedil":"Ţ","Tcy":"Т","Tfr":"𝔗","Therefore":"∴","Theta":"Θ","ThickSpace":"  ","ThinSpace":" ","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","Topf":"𝕋","TripleDot":"⃛","Tscr":"𝒯","Tstrok":"Ŧ","Uacut":"Ú","Uacute":"Ú","Uarr":"↟","Uarrocir":"⥉","Ubrcy":"Ў","Ubreve":"Ŭ","Ucir":"Û","Ucirc":"Û","Ucy":"У","Udblac":"Ű","Ufr":"𝔘","Ugrav":"Ù","Ugrave":"Ù","Umacr":"Ū","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","Uopf":"𝕌","UpArrow":"↑","UpArrowBar":"⤒","UpArrowDownArrow":"⇅","UpDownArrow":"↕","UpEquilibrium":"⥮","UpTee":"⊥","UpTeeArrow":"↥","Uparrow":"⇑","Updownarrow":"⇕","UpperLeftArrow":"↖","UpperRightArrow":"↗","Upsi":"ϒ","Upsilon":"Υ","Uring":"Ů","Uscr":"𝒰","Utilde":"Ũ","Uum":"Ü","Uuml":"Ü","VDash":"⊫","Vbar":"⫫","Vcy":"В","Vdash":"⊩","Vdashl":"⫦","Vee":"⋁","Verbar":"‖","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","Vopf":"𝕍","Vscr":"𝒱","Vvdash":"⊪","Wcirc":"Ŵ","Wedge":"⋀","Wfr":"𝔚","Wopf":"𝕎","Wscr":"𝒲","Xfr":"𝔛","Xi":"Ξ","Xopf":"𝕏","Xscr":"𝒳","YAcy":"Я","YIcy":"Ї","YUcy":"Ю","Yacut":"Ý","Yacute":"Ý","Ycirc":"Ŷ","Ycy":"Ы","Yfr":"𝔜","Yopf":"𝕐","Yscr":"𝒴","Yuml":"Ÿ","ZHcy":"Ж","Zacute":"Ź","Zcaron":"Ž","Zcy":"З","Zdot":"Ż","ZeroWidthSpace":"​","Zeta":"Ζ","Zfr":"ℨ","Zopf":"ℤ","Zscr":"𝒵","aacut":"á","aacute":"á","abreve":"ă","ac":"∾","acE":"∾̳","acd":"∿","acir":"â","acirc":"â","acut":"´","acute":"´","acy":"а","aeli":"æ","aelig":"æ","af":"⁡","afr":"𝔞","agrav":"à","agrave":"à","alefsym":"ℵ","aleph":"ℵ","alpha":"α","amacr":"ā","amalg":"⨿","am":"&","amp":"&","and":"∧","andand":"⩕","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsd":"∡","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","aogon":"ą","aopf":"𝕒","ap":"≈","apE":"⩰","apacir":"⩯","ape":"≊","apid":"≋","apos":"\'","approx":"≈","approxeq":"≊","arin":"å","aring":"å","ascr":"𝒶","ast":"*","asymp":"≈","asympeq":"≍","atild":"ã","atilde":"ã","aum":"ä","auml":"ä","awconint":"∳","awint":"⨑","bNot":"⫭","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","barvee":"⊽","barwed":"⌅","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","beta":"β","beth":"ℶ","between":"≬","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bnot":"⌐","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxDL":"╗","boxDR":"╔","boxDl":"╖","boxDr":"╓","boxH":"═","boxHD":"╦","boxHU":"╩","boxHd":"╤","boxHu":"╧","boxUL":"╝","boxUR":"╚","boxUl":"╜","boxUr":"╙","boxV":"║","boxVH":"╬","boxVL":"╣","boxVR":"╠","boxVh":"╫","boxVl":"╢","boxVr":"╟","boxbox":"⧉","boxdL":"╕","boxdR":"╒","boxdl":"┐","boxdr":"┌","boxh":"─","boxhD":"╥","boxhU":"╨","boxhd":"┬","boxhu":"┴","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxuL":"╛","boxuR":"╘","boxul":"┘","boxur":"└","boxv":"│","boxvH":"╪","boxvL":"╡","boxvR":"╞","boxvh":"┼","boxvl":"┤","boxvr":"├","bprime":"‵","breve":"˘","brvba":"¦","brvbar":"¦","bscr":"𝒷","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsol":"\\\\","bsolb":"⧅","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","bumpeq":"≏","cacute":"ć","cap":"∩","capand":"⩄","capbrcup":"⩉","capcap":"⩋","capcup":"⩇","capdot":"⩀","caps":"∩︀","caret":"⁁","caron":"ˇ","ccaps":"⩍","ccaron":"č","ccedi":"ç","ccedil":"ç","ccirc":"ĉ","ccups":"⩌","ccupssm":"⩐","cdot":"ċ","cedi":"¸","cedil":"¸","cemptyv":"⦲","cen":"¢","cent":"¢","centerdot":"·","cfr":"𝔠","chcy":"ч","check":"✓","checkmark":"✓","chi":"χ","cir":"○","cirE":"⧃","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledR":"®","circledS":"Ⓢ","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","clubs":"♣","clubsuit":"♣","colon":":","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","conint":"∮","copf":"𝕔","coprod":"∐","cop":"©","copy":"©","copysr":"℗","crarr":"↵","cross":"✗","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cup":"∪","cupbrcap":"⩈","cupcap":"⩆","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curre":"¤","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dArr":"⇓","dHar":"⥥","dagger":"†","daleth":"ℸ","darr":"↓","dash":"‐","dashv":"⊣","dbkarow":"⤏","dblac":"˝","dcaron":"ď","dcy":"д","dd":"ⅆ","ddagger":"‡","ddarr":"⇊","ddotseq":"⩷","de":"°","deg":"°","delta":"δ","demptyv":"⦱","dfisht":"⥿","dfr":"𝔡","dharl":"⇃","dharr":"⇂","diam":"⋄","diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","digamma":"ϝ","disin":"⋲","div":"÷","divid":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","dopf":"𝕕","dot":"˙","doteq":"≐","doteqdot":"≑","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","downarrow":"↓","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","dscr":"𝒹","dscy":"ѕ","dsol":"⧶","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","dzcy":"џ","dzigrarr":"⟿","eDDot":"⩷","eDot":"≑","eacut":"é","eacute":"é","easter":"⩮","ecaron":"ě","ecir":"ê","ecirc":"ê","ecolon":"≕","ecy":"э","edot":"ė","ee":"ⅇ","efDot":"≒","efr":"𝔢","eg":"⪚","egrav":"è","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","emacr":"ē","empty":"∅","emptyset":"∅","emptyv":"∅","emsp13":" ","emsp14":" ","emsp":" ","eng":"ŋ","ensp":" ","eogon":"ę","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","equals":"=","equest":"≟","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erDot":"≓","erarr":"⥱","escr":"ℯ","esdot":"≐","esim":"≂","eta":"η","et":"ð","eth":"ð","eum":"ë","euml":"ë","euro":"€","excl":"!","exist":"∃","expectation":"ℰ","exponentiale":"ⅇ","fallingdotseq":"≒","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","ffr":"𝔣","filig":"ﬁ","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","fopf":"𝕗","forall":"∀","fork":"⋔","forkv":"⫙","fpartint":"⨍","frac1":"¼","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac3":"¾","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","gE":"≧","gEl":"⪌","gacute":"ǵ","gamma":"γ","gammad":"ϝ","gap":"⪆","gbreve":"ğ","gcirc":"ĝ","gcy":"г","gdot":"ġ","ge":"≥","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","ges":"⩾","gescc":"⪩","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","gfr":"𝔤","gg":"≫","ggg":"⋙","gimel":"ℷ","gjcy":"ѓ","gl":"≷","glE":"⪒","gla":"⪥","glj":"⪤","gnE":"≩","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gneq":"⪈","gneqq":"≩","gnsim":"⋧","gopf":"𝕘","grave":"`","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","g":">","gt":">","gtcc":"⪧","gtcir":"⩺","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","hArr":"⇔","hairsp":" ","half":"½","hamilt":"ℋ","hardcy":"ъ","harr":"↔","harrcir":"⥈","harrw":"↭","hbar":"ℏ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","horbar":"―","hscr":"𝒽","hslash":"ℏ","hstrok":"ħ","hybull":"⁃","hyphen":"‐","iacut":"í","iacute":"í","ic":"⁣","icir":"î","icirc":"î","icy":"и","iecy":"е","iexc":"¡","iexcl":"¡","iff":"⇔","ifr":"𝔦","igrav":"ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","ijlig":"ĳ","imacr":"ī","image":"ℑ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","imof":"⊷","imped":"Ƶ","in":"∈","incare":"℅","infin":"∞","infintie":"⧝","inodot":"ı","int":"∫","intcal":"⊺","integers":"ℤ","intercal":"⊺","intlarhk":"⨗","intprod":"⨼","iocy":"ё","iogon":"į","iopf":"𝕚","iota":"ι","iprod":"⨼","iques":"¿","iquest":"¿","iscr":"𝒾","isin":"∈","isinE":"⋹","isindot":"⋵","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","itilde":"ĩ","iukcy":"і","ium":"ï","iuml":"ï","jcirc":"ĵ","jcy":"й","jfr":"𝔧","jmath":"ȷ","jopf":"𝕛","jscr":"𝒿","jsercy":"ј","jukcy":"є","kappa":"κ","kappav":"ϰ","kcedil":"ķ","kcy":"к","kfr":"𝔨","kgreen":"ĸ","khcy":"х","kjcy":"ќ","kopf":"𝕜","kscr":"𝓀","lAarr":"⇚","lArr":"⇐","lAtail":"⤛","lBarr":"⤎","lE":"≦","lEg":"⪋","lHar":"⥢","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","lambda":"λ","lang":"⟨","langd":"⦑","langle":"⟨","lap":"⪅","laqu":"«","laquo":"«","larr":"←","larrb":"⇤","larrbfs":"⤟","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","lat":"⪫","latail":"⤙","late":"⪭","lates":"⪭︀","lbarr":"⤌","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","lcaron":"ľ","lcedil":"ļ","lceil":"⌈","lcub":"{","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","leftarrow":"←","leftarrowtail":"↢","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","leftthreetimes":"⋋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","les":"⩽","lescc":"⪨","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","lessgtr":"≶","lesssim":"≲","lfisht":"⥼","lfloor":"⌊","lfr":"𝔩","lg":"≶","lgE":"⪑","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","ljcy":"љ","ll":"≪","llarr":"⇇","llcorner":"⌞","llhard":"⥫","lltri":"◺","lmidot":"ŀ","lmoust":"⎰","lmoustache":"⎰","lnE":"≨","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","longleftrightarrow":"⟷","longmapsto":"⟼","longrightarrow":"⟶","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","lstrok":"ł","l":"<","lt":"<","ltcc":"⪦","ltcir":"⩹","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltrPar":"⦖","ltri":"◃","ltrie":"⊴","ltrif":"◂","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","mDDot":"∺","mac":"¯","macr":"¯","male":"♂","malt":"✠","maltese":"✠","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","mcy":"м","mdash":"—","measuredangle":"∡","mfr":"𝔪","mho":"℧","micr":"µ","micro":"µ","mid":"∣","midast":"*","midcir":"⫰","middo":"·","middot":"·","minus":"−","minusb":"⊟","minusd":"∸","minusdu":"⨪","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","mopf":"𝕞","mp":"∓","mscr":"𝓂","mstpos":"∾","mu":"μ","multimap":"⊸","mumap":"⊸","nGg":"⋙̸","nGt":"≫⃒","nGtv":"≫̸","nLeftarrow":"⇍","nLeftrightarrow":"⇎","nLl":"⋘̸","nLt":"≪⃒","nLtv":"≪̸","nRightarrow":"⇏","nVDash":"⊯","nVdash":"⊮","nabla":"∇","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natur":"♮","natural":"♮","naturals":"ℕ","nbs":" ","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","ncaron":"ň","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","ncy":"н","ndash":"–","ne":"≠","neArr":"⇗","nearhk":"⤤","nearr":"↗","nearrow":"↗","nedot":"≐̸","nequiv":"≢","nesear":"⤨","nesim":"≂̸","nexist":"∄","nexists":"∄","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","ngsim":"≵","ngt":"≯","ngtr":"≯","nhArr":"⇎","nharr":"↮","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","njcy":"њ","nlArr":"⇍","nlE":"≦̸","nlarr":"↚","nldr":"‥","nle":"≰","nleftarrow":"↚","nleftrightarrow":"↮","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nlsim":"≴","nlt":"≮","nltri":"⋪","nltrie":"⋬","nmid":"∤","nopf":"𝕟","no":"¬","not":"¬","notin":"∉","notinE":"⋹̸","notindot":"⋵̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","npar":"∦","nparallel":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","npre":"⪯̸","nprec":"⊀","npreceq":"⪯̸","nrArr":"⇏","nrarr":"↛","nrarrc":"⤳̸","nrarrw":"↝̸","nrightarrow":"↛","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","ntild":"ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","nu":"ν","num":"#","numero":"№","numsp":" ","nvDash":"⊭","nvHarr":"⤄","nvap":"≍⃒","nvdash":"⊬","nvge":"≥⃒","nvgt":">⃒","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwArr":"⇖","nwarhk":"⤣","nwarr":"↖","nwarrow":"↖","nwnear":"⤧","oS":"Ⓢ","oacut":"ó","oacute":"ó","oast":"⊛","ocir":"ô","ocirc":"ô","ocy":"о","odash":"⊝","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","oelig":"œ","ofcir":"⦿","ofr":"𝔬","ogon":"˛","ograv":"ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","omacr":"ō","omega":"ω","omicron":"ο","omid":"⦶","ominus":"⊖","oopf":"𝕠","opar":"⦷","operp":"⦹","oplus":"⊕","or":"∨","orarr":"↻","ord":"º","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oscr":"ℴ","oslas":"ø","oslash":"ø","osol":"⊘","otild":"õ","otilde":"õ","otimes":"⊗","otimesas":"⨶","oum":"ö","ouml":"ö","ovbar":"⌽","par":"¶","para":"¶","parallel":"∥","parsim":"⫳","parsl":"⫽","part":"∂","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","pfr":"𝔭","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plus":"+","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plusdo":"∔","plusdu":"⨥","pluse":"⩲","plusm":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","pointint":"⨕","popf":"𝕡","poun":"£","pound":"£","pr":"≺","prE":"⪳","prap":"⪷","prcue":"≼","pre":"⪯","prec":"≺","precapprox":"⪷","preccurlyeq":"≼","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","precsim":"≾","prime":"′","primes":"ℙ","prnE":"⪵","prnap":"⪹","prnsim":"⋨","prod":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","propto":"∝","prsim":"≾","prurel":"⊰","pscr":"𝓅","psi":"ψ","puncsp":" ","qfr":"𝔮","qint":"⨌","qopf":"𝕢","qprime":"⁗","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quo":"\\"","quot":"\\"","rAarr":"⇛","rArr":"⇒","rAtail":"⤜","rBarr":"⤏","rHar":"⥤","race":"∽̱","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","rangd":"⦒","range":"⦥","rangle":"⟩","raqu":"»","raquo":"»","rarr":"→","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","rarrtl":"↣","rarrw":"↝","ratail":"⤚","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","rcaron":"ř","rcedil":"ŗ","rceil":"⌉","rcub":"}","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","rect":"▭","re":"®","reg":"®","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","rhard":"⇁","rharu":"⇀","rharul":"⥬","rho":"ρ","rhov":"ϱ","rightarrow":"→","rightarrowtail":"↣","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","rightthreetimes":"⋌","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoust":"⎱","rmoustache":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","roplus":"⨮","rotimes":"⨵","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","rsaquo":"›","rscr":"𝓇","rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","ruluhar":"⥨","rx":"℞","sacute":"ś","sbquo":"‚","sc":"≻","scE":"⪴","scap":"⪸","scaron":"š","sccue":"≽","sce":"⪰","scedil":"ş","scirc":"ŝ","scnE":"⪶","scnap":"⪺","scnsim":"⋩","scpolint":"⨓","scsim":"≿","scy":"с","sdot":"⋅","sdotb":"⊡","sdote":"⩦","seArr":"⇘","searhk":"⤥","searr":"↘","searrow":"↘","sec":"§","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","sfr":"𝔰","sfrown":"⌢","sharp":"♯","shchcy":"щ","shcy":"ш","shortmid":"∣","shortparallel":"∥","sh":"­","shy":"­","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","softcy":"ь","sol":"/","solb":"⧄","solbar":"⌿","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","squ":"□","square":"□","squarf":"▪","squf":"▪","srarr":"→","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","subE":"⫅","subdot":"⪽","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","subseteq":"⊆","subseteqq":"⫅","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succ":"≻","succapprox":"⪸","succcurlyeq":"≽","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","sum":"∑","sung":"♪","sup":"⊃","sup1":"¹","sup2":"²","sup3":"³","supE":"⫆","supdot":"⪾","supdsub":"⫘","supe":"⊇","supedot":"⫄","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swArr":"⇙","swarhk":"⤦","swarr":"↙","swarrow":"↙","swnwar":"⤪","szli":"ß","szlig":"ß","target":"⌖","tau":"τ","tbrk":"⎴","tcaron":"ť","tcedil":"ţ","tcy":"т","tdot":"⃛","telrec":"⌕","tfr":"𝔱","there4":"∴","therefore":"∴","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","thinsp":" ","thkap":"≈","thksim":"∼","thor":"þ","thorn":"þ","tilde":"˜","time":"×","times":"×","timesb":"⊠","timesbar":"⨱","timesd":"⨰","tint":"∭","toea":"⤨","top":"⊤","topbot":"⌶","topcir":"⫱","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","tscr":"𝓉","tscy":"ц","tshcy":"ћ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","uArr":"⇑","uHar":"⥣","uacut":"ú","uacute":"ú","uarr":"↑","ubrcy":"ў","ubreve":"ŭ","ucir":"û","ucirc":"û","ucy":"у","udarr":"⇅","udblac":"ű","udhar":"⥮","ufisht":"⥾","ufr":"𝔲","ugrav":"ù","ugrave":"ù","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","umacr":"ū","um":"¨","uml":"¨","uogon":"ų","uopf":"𝕦","uparrow":"↑","updownarrow":"↕","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","upsi":"υ","upsih":"ϒ","upsilon":"υ","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","uring":"ů","urtri":"◹","uscr":"𝓊","utdot":"⋰","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","uum":"ü","uuml":"ü","uwangle":"⦧","vArr":"⇕","vBar":"⫨","vBarv":"⫩","vDash":"⊨","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vcy":"в","vdash":"⊢","vee":"∨","veebar":"⊻","veeeq":"≚","vellip":"⋮","verbar":"|","vert":"|","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","vopf":"𝕧","vprop":"∝","vrtri":"⊳","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","vzigzag":"⦚","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","wedgeq":"≙","weierp":"℘","wfr":"𝔴","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","xfr":"𝔵","xhArr":"⟺","xharr":"⟷","xi":"ξ","xlArr":"⟸","xlarr":"⟵","xmap":"⟼","xnis":"⋻","xodot":"⨀","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrArr":"⟹","xrarr":"⟶","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","yacut":"ý","yacute":"ý","yacy":"я","ycirc":"ŷ","ycy":"ы","ye":"¥","yen":"¥","yfr":"𝔶","yicy":"ї","yopf":"𝕪","yscr":"𝓎","yucy":"ю","yum":"ÿ","yuml":"ÿ","zacute":"ź","zcaron":"ž","zcy":"з","zdot":"ż","zeetrf":"ℨ","zeta":"ζ","zfr":"𝔷","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},6852:t=>{"use strict";t.exports=JSON.parse('{"0":"�","128":"€","130":"‚","131":"ƒ","132":"„","133":"…","134":"†","135":"‡","136":"ˆ","137":"‰","138":"Š","139":"‹","140":"Œ","142":"Ž","145":"‘","146":"’","147":"“","148":"”","149":"•","150":"–","151":"—","152":"˜","153":"™","154":"š","155":"›","156":"œ","158":"ž","159":"Ÿ"}')},9357:t=>{"use strict";t.exports=function(t){return String(t).replace(/\s+/g," ")}},6851:(t,e)=>{"use strict";e.P=function(t,e){var n=e||{},i=!1===n.padLeft?"":" ",r=n.padRight?" ":"";""===t[t.length-1]&&(t=t.concat(""));return t.join(r+","+i).trim()}},8909:t=>{"use strict";t.exports=function(t,e){var n;if(null!=e&&"string"!=typeof e&&("object"!=typeof e||0===e.length))throw new Error("Expected `string` or `Array.<string>` for `tagNames`, not `"+e+"`");if(!t||"object"!=typeof t||"element"!==t.type||"string"!=typeof t.tagName)return!1;if(null==e)return!0;if(n=t.tagName,"string"==typeof e)return n===e;return-1!==e.indexOf(n)}},773:(t,e,n)=>{"use strict";t.exports=n(5204)},5802:(t,e,n)=>{"use strict";var i=n(1878);t.exports=function(t,e){var n=e&&e.children,r=n&&n.length,o=-1,s=[];for(;++o<r;)s[o]=i(t,n[o],o,e);return s.join("")}},1928:(t,e,n)=>{"use strict";var i=n(7529),r=n(4860);t.exports=function(t,e){var n=e.value;if(t.bogusComments)return"<?"+r(n,i(t.entities,{subset:a}))+">";return"\x3c!--"+n.replace(o,(function(e){return r(e,i(t.entities,{subset:s}))}))+"--\x3e"};var o=/^>|^->|<!--|-->|--!>|<!-$/g,s=["<",">"],a=[">"]},5966:t=>{"use strict";var e="\0",n="&",i="`",r='"',o="'",s=[" ","\t","\n","\r","\f"],a=s.concat(n,"/",">","="),l=s.concat(n,">"),c=l.concat(e,r,o,"<","=",i),u=[n,o],h=[n,r];t.exports={name:[[a,a.concat(r,o,i)],[a.concat(e,r,o,"<"),a.concat(e,r,o,"<",i)]],unquoted:[[l,c],[c,c]],single:[[u,u.concat(r,i)],[u.concat(e),u.concat(e,r,i)]],double:[[h,h.concat(o,i)],[h.concat(e),h.concat(e,o,i)]]}},5842:(t,e,n)=>{"use strict";var i=n(7529),r=n(932),o=n(4860);t.exports=function(t,e){var n=t.upperDoctype?a:s,i=t.tightDoctype?"":" ",r=e.name,o=e.public,c=e.system,u=["<!"+n];r&&(u.push(i,r),null!=o?u.push(" public",i,l(t,o)):null!=c&&u.push(" system"),null!=c&&u.push(i,l(t,c)));return u.join("")+">"};var s="doctype",a=s.toUpperCase();function l(t,e){var n=t.quote,s=t.alternative,a=String(e),l=r(a,n)>r(a,s)?s:n;return l+o(a,i(t.entities,{subset:["<","&",l]}))+l}},4307:(t,e,n)=>{"use strict";var i=n(7529),r=n(1218),o=n(9560),s=n(6582).P,a=n(6851).P,l=n(4860),c=n(932),u=n(5802),h=n(5966);t.exports=function(t,e,n,i){var o,s,a,l,c,h,p=t.schema,f=e.tagName,g="",m=e;"html"===p.space&&"svg"===f&&(t.schema=r);c=function(t,e){var n,i,r,o,s,a,l=[];for(n in e)null!=(i=e[n])&&(r=d(t,n,i))&&l.push(r);o=l.length,s=-1;for(;++s<o;)r=l[s],a=null,t.tight&&(a=r.charAt(r.length-1)),s!==o-1&&'"'!==a&&"'"!==a&&(l[s]=r+" ");return l.join("")}(t,e.properties),"svg"===t.schema.space?(a=!1,s=!0,o=t.closeEmpty):(a=t.omit,s=t.close,o=-1!==t.voids.indexOf(f.toLowerCase()),"template"===f&&(m=e.content));l=u(t,m),o=!l&&o,!c&&a&&a.opening(e,n,i)||(g="<"+f+(c?" "+c:""),o&&s&&(h=c.charAt(c.length-1),(!t.tightClose||"/"===h||"svg"===t.schema.space&&h&&'"'!==h&&"'"!==h)&&(g+=" "),g+="/"),g+=">");g+=l,o||a&&a.closing(e,n,i)||(g+="</"+f+">");return t.schema=p,g};var p="'";function d(t,e,n){var r=t.schema,u=o(r,e),d=u.attribute;return!u.overloadedBoolean||n!==d&&""!==n?(u.boolean||u.overloadedBoolean&&"string"!=typeof n)&&(n=Boolean(n)):n=!0,null==n||!1===n||"number"==typeof n&&isNaN(n)?"":(d=function(t,e){var n="html"===t.schema.space?t.valid:1,r=h.name[n][t.safe];return l(e,i(t.entities,{subset:r}))}(t,d),!0===n?d:d+function(t,e,n,r){var o,u,d=t.entities,f=t.quote,g=t.alternative,m=t.smart;"object"==typeof n&&"length"in n&&(n=(r.commaSeparated?a:s)(n,{padLeft:!t.tightLists}));!(n=String(n))&&t.collapseEmpty||(o=n,t.unquoted&&(u=h.unquoted[t.valid][t.safe],o=l(n,i(d,{subset:u,attribute:!0}))),t.unquoted&&o===n||(m&&c(n,f)>c(n,g)&&(f=g),u=(u=f===p?h.single:h.double)["html"===t.schema.space?t.valid:1][t.safe],n=f+(n=l(n,i(d,{subset:u,attribute:!0})))+f),n=n?"="+n:n);return n}(t,0,n,u))}},5204:(t,e,n)=>{"use strict";var i=n(7247),r=n(1218),o=n(4318),s=n(1600),a=n(1878);t.exports=function(t,e){var n=e||{},u=n.quote||l,h=u===l?"'":l,p=n.quoteSmart,d=t&&"object"==typeof t&&"length"in t?{type:"root",children:t}:t;if(u!==l&&"'"!==u)throw new Error("Invalid quote `"+u+"`, expected `'` or `"+'"`');void 0!==n.allowDangerousHTML&&(c||(c=!0,console.warn("Deprecation warning: `allowDangerousHTML` is a nonstandard option, use `allowDangerousHtml` instead")));return a({valid:n.allowParseErrors?0:1,safe:n.allowDangerousCharacters?0:1,schema:"svg"===n.space?r:i,omit:n.omitOptionalTags&&s,quote:u,alternative:h,smart:p,unquoted:Boolean(n.preferUnquoted),tight:n.tightAttributes,upperDoctype:Boolean(n.upperDoctype),tightDoctype:Boolean(n.tightDoctype),bogusComments:Boolean(n.bogusComments),tightLists:n.tightCommaSeparatedLists,tightClose:n.tightSelfClosing,collapseEmpty:n.collapseEmptyAttributes,dangerous:n.allowDangerousHtml||n.allowDangerousHTML,voids:n.voids||o.concat(),entities:n.entities||{},close:n.closeSelfClosing,closeEmpty:n.closeEmptyElements},d)};var l='"',c=!1},8639:(t,e,n)=>{"use strict";var i=n(8145),r=n(8909),o=n(8115),s=n(3370).e,a=n(5254),l=i("comment"),c="optgroup",u=["option"].concat(c),h=["dt","dd"],p=["menuitem","hr","menu"],d=["rp","rt"],f=["tbody","tfoot"],g=["td","th"],m=["a","audio","del","ins","map","noscript","video"],v=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","menu","nav","ol","p","pre","section","table","ul"];function y(t,e,n){var i=s(n,e,!0);return!i||!l(i)&&!o(i)}function b(t,e,n){var i=s(n,e);return!i||r(i,d)}function w(t,e,n){var i=s(n,e);return!i||r(i,g)}t.exports=a({html:function(t,e,n){var i=s(n,e);return!i||!l(i)},head:y,body:function(t,e,n){var i=s(n,e);return!i||!l(i)},p:function(t,e,n){var i=s(n,e);return i?r(i,v):!n||!r(n,m)},li:function(t,e,n){var i=s(n,e);return!i||r(i,"li")},dt:function(t,e,n){var i=s(n,e);return i&&r(i,h)},dd:function(t,e,n){var i=s(n,e);return!i||r(i,h)},rt:b,rp:b,optgroup:function(t,e,n){var i=s(n,e);return!i||r(i,c)},option:function(t,e,n){var i=s(n,e);return!i||r(i,u)},menuitem:function(t,e,n){var i=s(n,e);return!i||r(i,p)},colgroup:y,caption:y,thead:function(t,e,n){var i=s(n,e);return i&&r(i,f)},tbody:function(t,e,n){var i=s(n,e);return!i||r(i,f)},tfoot:function(t,e,n){return!s(n,e)},tr:function(t,e,n){var i=s(n,e);return!i||r(i,"tr")},td:w,th:w})},1600:(t,e,n)=>{"use strict";e.opening=n(6014),e.closing=n(8639)},5254:t=>{"use strict";t.exports=function(t){return function(n,i,r){var o=n.tagName;return!!e.call(t,o)&&t[o](n,i,r)}};var e={}.hasOwnProperty},6014:(t,e,n)=>{"use strict";var i=n(8145),r=n(8909),o=n(3370).b,s=n(4414),a=n(4997),l=n(8115),c=n(8639),u=n(5254),h=i("comment"),p=["title","base"],d=["meta","link","script","style","template"],f=["thead","tbody"];t.exports=u({html:function(t){var e=s(t);return!e||!h(e)},head:function(t){var e,n,i=t.children,o=i.length,s=[],a=-1;for(;++a<o;)if(e=i[a],n=e.tagName,r(e,p)){if(-1!==s.indexOf(n))return!1;s.push(n)}return 0!==o},body:function(t){var e=s(t,!0);return!e||!h(e)&&!l(e)&&!r(e,d)},colgroup:function(t,e,n){var i=o(n,e),l=s(t,!0);if(r(i,"colgroup")&&c(i,a(n,i),n))return!1;return l&&r(l,"col")},tbody:function(t,e,n){var i=o(n,e),l=s(t);if(r(i,f)&&c(i,a(n,i),n))return!1;return l&&r(l,"tr")}})},4414:(t,e,n)=>{"use strict";var i=n(3370).e;t.exports=function(t,e){return i(t,-1,e)}},4997:t=>{"use strict";t.exports=function(t,e){return t&&t.children&&t.children.indexOf(e)}},3370:(t,e,n)=>{"use strict";var i=n(3560);function r(t){return function(e,n,r){var o=e&&e.children,s=n+t,a=o&&o[s];if(!r)for(;a&&i(a);)a=o[s+=t];return a}}e.b=r(-1),e.e=r(1)},8115:(t,e,n)=>{"use strict";var i=n(8145),r=n(3560);t.exports=function(t){return o(t)&&r(t.value.charAt(0))};var o=i("text")},1878:(t,e,n)=>{"use strict";t.exports=function(t,e,n,o){var s=e&&e.type;if(!s)throw new Error("Expected node, not `"+e+"`");if(!i.call(r,s))throw new Error("Cannot compile unknown node `"+s+"`");return r[s](t,e,n,o)};var i={}.hasOwnProperty,r={};r.root=n(5802),r.text=n(9514),r.element=n(4307),r.doctype=n(5842),r.comment=n(1928),r.raw=n(9044)},9044:(t,e,n)=>{"use strict";var i=n(9514);t.exports=function(t,e){return t.dangerous?e.value:i(t,e)}},9514:(t,e,n)=>{"use strict";var i=n(7529),r=n(4860);t.exports=function(t,e,n,o){var s=e.value;return function(t){return t&&("script"===t.tagName||"style"===t.tagName)}(o)?s:r(s,i(t.entities,{subset:["<","&"]}))}},3560:t=>{"use strict";t.exports=function(t){var n;if(t&&"object"==typeof t&&"text"===t.type)n=t.value||"";else{if("string"!=typeof t)return!1;n=t}return""===n.replace(e,"")};var e=/[ \t\n\f\r]/g},4318:t=>{"use strict";t.exports=JSON.parse('["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"]')},5717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},6260:t=>{"use strict";t.exports=function(t){var e="string"==typeof t?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}},7961:(t,e,n)=>{"use strict";var i=n(6260),r=n(6195);t.exports=function(t){return i(t)||r(t)}},8738:t=>{t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},6195:t=>{"use strict";t.exports=function(t){var e="string"==typeof t?t.charCodeAt(0):t;return e>=48&&e<=57}},9480:t=>{"use strict";t.exports=function(t){var e="string"==typeof t?t.charCodeAt(0):t;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}},2139:t=>{"use strict";t.exports=function(t){return n.test("number"==typeof t?e(t):t.charAt(0))};var e=String.fromCharCode,n=/\s/},3017:t=>{"use strict";t.exports=function(t){return n.test("number"==typeof t?e(t):t.charAt(0))};var e=String.fromCharCode,n=/\w/},2123:t=>{"use strict";t.exports=r;var e=["\\","`","*","{","}","[","]","(",")","#","+","-",".","!","_",">"],n=e.concat(["~","|"]),i=n.concat(["\n",'"',"$","%","&","'",",","/",":",";","<","=","?","@","^"]);function r(t){var r=t||{};return r.commonmark?i:r.gfm?n:e}r.default=e,r.gfm=n,r.commonmark=i},6630:(t,e,n)=>{"use strict";var i=n(2854);t.exports=function(t,e){return function(t){return e;function e(e){var n=e&&o(e);return n&&r.call(t,n)?t[n]:null}}(function(t){var e={};if(!t||!t.type)throw new Error("mdast-util-definitions expected node");return i(t,"definition",n),e;function n(t){var n=o(t.identifier);r.call(e,n)||(e[n]=t)}}(t))};var r={}.hasOwnProperty;function o(t){return t.toUpperCase()}},5426:(t,e,n)=>{"use strict";t.exports=function(t,e){var n,r,o=e.children||[],s=o.length,a=[],l=-1;for(;++l<s;)(n=i(t,o[l],e))&&(l&&"break"===o[l-1].type&&(n.value&&(n.value=n.value.replace(/^\s+/,"")),(r=n.children&&n.children[0])&&r.value&&(r.value=r.value.replace(/^\s+/,""))),a=a.concat(n));return a};var i=n(719)},1696:(t,e,n)=>{"use strict";t.exports=function(t){var e,n,s,a,l=t.footnoteById,c=t.footnoteOrder,u=c.length,h=-1,p=[];for(;++h<u;)(e=l[c[h].toUpperCase()])&&(s=e.children.concat(),a=s[s.length-1],n={type:"link",url:"#fnref-"+e.identifier,data:{hProperties:{className:["footnote-backref"]}},children:[{type:"text",value:"↩"}]},a&&"paragraph"===a.type||(a={type:"paragraph",children:[]},s.push(a)),a.children.push(n),p.push({type:"listItem",data:{hProperties:{id:"fn-"+e.identifier}},children:s,position:e.position}));if(0===p.length)return null;return t(null,"div",{className:["footnotes"]},o([i(t),r(t,{type:"list",ordered:!0,children:p})],!0))};var i=n(7552),r=n(7888),o=n(6115)},4590:(t,e,n)=>{"use strict";t.exports=function(t,e){return t(e,"blockquote",i(r(t,e),!0))};var i=n(6115),r=n(5426)},3562:(t,e,n)=>{"use strict";t.exports=function(t,e){return[t(e,"br"),i("text","\n")]};var i=n(914)},7891:(t,e,n)=>{"use strict";t.exports=function(t,e){var n,r=e.value?e.value+"\n":"",o=e.lang&&e.lang.match(/^[^ \t]+(?=[ \t]|$)/),s={};o&&(s.className=["language-"+o]);n=t(e,"code",s,[i("text",r)]),e.meta&&(n.data={meta:e.meta});return t(e.position,"pre",[n])};var i=n(914)},9381:(t,e,n)=>{"use strict";t.exports=function(t,e){return t(e,"del",i(t,e))};var i=n(5426)},790:(t,e,n)=>{"use strict";t.exports=function(t,e){return t(e,"em",i(t,e))};var i=n(5426)},8235:(t,e,n)=>{"use strict";t.exports=function(t,e){var n=t.footnoteOrder,r=String(e.identifier);-1===n.indexOf(r)&&n.push(r);return t(e.position,"sup",{id:"fnref-"+r},[t(e,"a",{href:"#fn-"+r,className:["footnote-ref"]},[i("text",e.label||r)])])};var i=n(914)},5758:(t,e,n)=>{"use strict";t.exports=function(t,e){var n=t.footnoteById,r=t.footnoteOrder,o=1;for(;o in n;)o++;return o=String(o),r.push(o),n[o]={type:"footnoteDefinition",identifier:o,children:[{type:"paragraph",children:e.children}],position:e.position},i(t,{type:"footnoteReference",identifier:o,position:e.position})};var i=n(8235)},4890:(t,e,n)=>{"use strict";t.exports=function(t,e){return t(e,"h"+e.depth,i(t,e))};var i=n(5426)},2202:(t,e,n)=>{"use strict";t.exports=function(t,e){return t.dangerous?t.augment(e,i("raw",e.value)):null};var i=n(914)},1454:(t,e,n)=>{"use strict";t.exports=function(t,e){var n,o=t.definition(e.identifier);if(!o)return r(t,e);n={src:i(o.url||""),alt:e.alt},null!==o.title&&void 0!==o.title&&(n.title=o.title);return t(e,"img",n)};var i=n(729),r=n(713)},5037:(t,e,n)=>{"use strict";var i=n(729);t.exports=function(t,e){var n={src:i(e.url),alt:e.alt};null!==e.title&&void 0!==e.title&&(n.title=e.title);return t(e,"img",n)}},4617:(t,e,n)=>{"use strict";function i(){return null}t.exports={blockquote:n(4590),break:n(3562),code:n(7891),delete:n(9381),emphasis:n(790),footnoteReference:n(8235),footnote:n(5758),heading:n(4890),html:n(2202),imageReference:n(1454),image:n(5037),inlineCode:n(8409),linkReference:n(9266),link:n(404),listItem:n(4463),list:n(7888),paragraph:n(8346),root:n(8100),strong:n(4970),table:n(2605),text:n(989),thematicBreak:n(7552),toml:i,yaml:i,definition:i,footnoteDefinition:i}},8409:(t,e,n)=>{"use strict";t.exports=function(t,e){var n=e.value.replace(/\r?\n|\r/g," ");return t(e,"code",[i("text",n)])};var i=n(914)},9266:(t,e,n)=>{"use strict";t.exports=function(t,e){var n,s=t.definition(e.identifier);if(!s)return r(t,e);n={href:i(s.url||"")},null!==s.title&&void 0!==s.title&&(n.title=s.title);return t(e,"a",n,o(t,e))};var i=n(729),r=n(713),o=n(5426)},404:(t,e,n)=>{"use strict";var i=n(729),r=n(5426);t.exports=function(t,e){var n={href:i(e.url)};null!==e.title&&void 0!==e.title&&(n.title=e.title);return t(e,"a",n,r(t,e))}},4463:(t,e,n)=>{"use strict";t.exports=function(t,e,n){var s,a,l,c=r(t,e),u=c[0],h=n?function(t){var e=t.spread,n=t.children,i=n.length,r=-1;for(;!e&&++r<i;)e=o(n[r]);return e}(n):o(e),p={},d=[];"boolean"==typeof e.checked&&(u&&"p"===u.tagName||(u=t(null,"p",[]),c.unshift(u)),u.children.length>0&&u.children.unshift(i("text"," ")),u.children.unshift(t(null,"input",{type:"checkbox",checked:e.checked,disabled:!0})),p.className=["task-list-item"]);s=c.length,a=-1;for(;++a<s;)l=c[a],(h||0!==a||"p"!==l.tagName)&&d.push(i("text","\n")),"p"!==l.tagName||h?d.push(l):d=d.concat(l.children);s&&(h||"p"!==l.tagName)&&d.push(i("text","\n"));return t(e,"li",p,d)};var i=n(914),r=n(5426);function o(t){var e=t.spread;return null==e?t.children.length>1:e}},7888:(t,e,n)=>{"use strict";t.exports=function(t,e){var n,o,s={},a=e.ordered?"ol":"ul",l=-1;"number"==typeof e.start&&1!==e.start&&(s.start=e.start);n=r(t,e),o=n.length;for(;++l<o;)if(n[l].properties.className&&-1!==n[l].properties.className.indexOf("task-list-item")){s.className=["contains-task-list"];break}return t(e,a,s,i(n,!0))};var i=n(6115),r=n(5426)},8346:(t,e,n)=>{"use strict";t.exports=function(t,e){return t(e,"p",i(t,e))};var i=n(5426)},8100:(t,e,n)=>{"use strict";t.exports=function(t,e){return t.augment(e,i("root",r(o(t,e))))};var i=n(914),r=n(6115),o=n(5426)},4970:(t,e,n)=>{"use strict";t.exports=function(t,e){return t(e,"strong",i(t,e))};var i=n(5426)},2605:(t,e,n)=>{"use strict";t.exports=function(t,e){var n,s,a,l,c,u=e.children,h=u.length,p=e.align||[],d=p.length,f=[];for(;h--;){for(s=u[h].children,l=0===h?"th":"td",n=d||s.length,a=[];n--;)c=s[n],a[n]=t(c,l,{align:p[n]},c?o(t,c):[]);f[h]=t(u[h],"tr",r(a,!0))}return t(e,"table",r([t(f[0].position,"thead",r([f[0]],!0))].concat(f[1]?t({start:i.start(f[1]),end:i.end(f[f.length-1])},"tbody",r(f.slice(1),!0)):[]),!0))};var i=n(7361),r=n(6115),o=n(5426)},989:(t,e,n)=>{"use strict";t.exports=function(t,e){return t.augment(e,i("text",String(e.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))};var i=n(914)},7552:t=>{"use strict";t.exports=function(t,e){return t(e,"hr")}},719:(t,e,n)=>{"use strict";t.exports=function(t,e,n){var i,r=e&&e.type;if(!r)throw new Error("Expected node, got `"+e+"`");i=o.call(t.handlers,r)?t.handlers[r]:t.passThrough&&t.passThrough.indexOf(r)>-1?a:t.unknownHandler;return("function"==typeof i?i:s)(t,e,n)};var i=n(914),r=n(5426),o={}.hasOwnProperty;function s(t,e){return function(t){var e=t.data||{};if(o.call(e,"hName")||o.call(e,"hProperties")||o.call(e,"hChildren"))return!1;return"value"in t}(e)?t.augment(e,i("text",e.value)):t(e,"div",r(t,e))}function a(t,e){var n;return e.children?((n=Object.assign({},e)).children=r(t,e),n):e}},713:(t,e,n)=>{"use strict";t.exports=function(t,e){var n,o,s,a=e.referenceType,l="]";"collapsed"===a?l+="[]":"full"===a&&(l+="["+(e.label||e.identifier)+"]");if("imageReference"===e.type)return i("text","!["+e.alt+l);n=r(t,e),(o=n[0])&&"text"===o.type?o.value="["+o.value:n.unshift(i("text","["));(s=n[n.length-1])&&"text"===s.type?s.value+=l:n.push(i("text",l));return n};var i=n(914),r=n(5426)},6115:(t,e,n)=>{"use strict";t.exports=function(t,e){var n=[],r=-1,o=t.length;e&&n.push(i("text","\n"));for(;++r<o;)r&&n.push(i("text","\n")),n.push(t[r]);e&&t.length>0&&n.push(i("text","\n"));return n};var i=n(914)},729:t=>{"use strict";var e={};function n(t,i,r){var o,s,a,l,c,u="";for("string"!=typeof i&&(r=i,i=n.defaultChars),void 0===r&&(r=!0),c=function(t){var n,i,r=e[t];if(r)return r;for(r=e[t]=[],n=0;n<128;n++)i=String.fromCharCode(n),/^[0-9a-z]$/i.test(i)?r.push(i):r.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2));for(n=0;n<t.length;n++)r[t.charCodeAt(n)]=t[n];return r}(i),o=0,s=t.length;o<s;o++)if(a=t.charCodeAt(o),r&&37===a&&o+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3)))u+=t.slice(o,o+3),o+=2;else if(a<128)u+=c[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s&&(l=t.charCodeAt(o+1))>=56320&&l<=57343){u+=encodeURIComponent(t[o]+t[o+1]),o++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(t[o]);return u}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()",t.exports=n},7621:(t,e,n)=>{"use strict";var i=n(3407);t.exports=function(t){return!!r.call(i,t)&&i[t]};var r={}.hasOwnProperty},7574:(t,e,n)=>{"use strict";var i=n(6588),r=n(6852),o=n(6195),s=n(9480),a=n(7961),l=n(7621);t.exports=function(t,e){var n,o,s={};e||(e={});for(o in p)n=e[o],s[o]=null==n?p[o]:n;(s.position.indent||s.position.start)&&(s.indent=s.position.indent||[],s.position=s.position.start);return function(t,e){var n,o,s,p,k,C,x,S,E,M,L,D,A,T,P,O,F,I,N,B=e.additional,R=e.nonTerminated,z=e.text,H=e.reference,V=e.warning,q=e.textContext,j=e.referenceContext,U=e.warningContext,_=e.position,W=e.indent||[],G=t.length,K=0,$=-1,Y=_.column||1,J=_.line||1,Q="",X=[];"string"==typeof B&&(B=B.charCodeAt(0));O=Z(),S=V?tt:h,K--,G++;for(;++K<G;)if(10===k&&(Y=W[$]||1),38===(k=t.charCodeAt(K))){if(9===(x=t.charCodeAt(K+1))||10===x||12===x||32===x||38===x||60===x||x!=x||B&&x===B){Q+=u(k),Y++;continue}for(D=A=K+1,N=A,35===x?(N=++D,88===(x=t.charCodeAt(N))||120===x?(T=f,N=++D):T=g):T=d,n="",L="",p="",P=v[T],N--;++N<G&&P(x=t.charCodeAt(N));)p+=u(x),T===d&&c.call(i,p)&&(n=p,L=i[p]);(s=59===t.charCodeAt(N))&&(N++,(o=T===d&&l(p))&&(n=p,L=o)),I=1+N-A,(s||R)&&(p?T===d?(s&&!L?S(5,1):(n!==p&&(I=1+(N=D+n.length)-D,s=!1),s||(E=n?1:3,e.attribute?61===(x=t.charCodeAt(N))?(S(E,I),L=null):a(x)?L=null:S(E,I):S(E,I))),C=L):(s||S(2,I),b(C=parseInt(p,m[T]))?(S(7,I),C=u(65533)):C in r?(S(6,I),C=r[C]):(M="",w(C)&&S(6,I),C>65535&&(M+=u((C-=65536)>>>10|55296),C=56320|1023&C),C=M+u(C))):T!==d&&S(4,I)),C?(et(),O=Z(),K=N-1,Y+=N-A+1,X.push(C),(F=Z()).offset++,H&&H.call(j,C,{start:O,end:F},t.slice(A-1,N)),O=F):(p=t.slice(A-1,N),Q+=p,Y+=p.length,K=N-1)}else 10===k&&(J++,$++,Y=0),k==k?(Q+=u(k),Y++):et();return X.join("");function Z(){return{line:J,column:Y,offset:K+(_.offset||0)}}function tt(t,e){var n=Z();n.column+=e,n.offset+=e,V.call(U,y[t],n,t)}function et(){Q&&(X.push(Q),z&&z.call(q,Q,{start:O,end:Z()}),Q="")}}(t,s)};var c={}.hasOwnProperty,u=String.fromCharCode,h=Function.prototype,p={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},d="named",f="hexadecimal",g="decimal",m={hexadecimal:16,decimal:10},v={};v.named=a,v[g]=o,v[f]=s;var y={};function b(t){return t>=55296&&t<=57343||t>1114111}function w(t){return t>=1&&t<=8||11===t||t>=13&&t<=31||t>=127&&t<=159||t>=64976&&t<=65007||65535==(65535&t)||65534==(65535&t)}y[1]="Named character references must be terminated by a semicolon",y[2]="Numeric character references must be terminated by a semicolon",y[3]="Named character references cannot be empty",y[4]="Numeric character references cannot be empty",y[5]="Named character references must be known",y[6]="Numeric character references cannot be disallowed",y[7]="Numeric character references cannot be outside the permissible Unicode range"},9560:(t,e,n)=>{"use strict";var i=n(6632),r=n(8805),o=n(7643),s="data";t.exports=function(t,e){var n=i(e),p=e,d=o;if(n in t.normal)return t.property[t.normal[n]];n.length>4&&n.slice(0,4)===s&&a.test(e)&&("-"===e.charAt(4)?p=function(t){var e=t.slice(5).replace(l,h);return s+e.charAt(0).toUpperCase()+e.slice(1)}(e):e=function(t){var e=t.slice(4);if(l.test(e))return t;"-"!==(e=e.replace(c,u)).charAt(0)&&(e="-"+e);return s+e}(e),d=r);return new d(p,e)};var a=/^data[-\w.:]+$/i,l=/-[a-z]/g,c=/[A-Z]/g;function u(t){return"-"+t.toLowerCase()}function h(t){return t.charAt(1).toUpperCase()}},7247:(t,e,n)=>{"use strict";var i=n(9940),r=n(8289),o=n(5812),s=n(4397),a=n(7716),l=n(1805);t.exports=i([o,r,s,a,l])},7716:(t,e,n)=>{"use strict";var i=n(7e3),r=n(7596),o=i.booleanish,s=i.number,a=i.spaceSeparated;t.exports=r({transform:function(t,e){return"role"===e?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:o,ariaAutoComplete:null,ariaBusy:o,ariaChecked:o,ariaColCount:s,ariaColIndex:s,ariaColSpan:s,ariaControls:a,ariaCurrent:null,ariaDescribedBy:a,ariaDetails:null,ariaDisabled:o,ariaDropEffect:a,ariaErrorMessage:null,ariaExpanded:o,ariaFlowTo:a,ariaGrabbed:o,ariaHasPopup:null,ariaHidden:o,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:a,ariaLevel:s,ariaLive:null,ariaModal:o,ariaMultiLine:o,ariaMultiSelectable:o,ariaOrientation:null,ariaOwns:a,ariaPlaceholder:null,ariaPosInSet:s,ariaPressed:o,ariaReadOnly:o,ariaRelevant:null,ariaRequired:o,ariaRoleDescription:a,ariaRowCount:s,ariaRowIndex:s,ariaRowSpan:s,ariaSelected:o,ariaSetSize:s,ariaSort:null,ariaValueMax:s,ariaValueMin:s,ariaValueNow:s,ariaValueText:null,role:null}})},1805:(t,e,n)=>{"use strict";var i=n(7e3),r=n(7596),o=n(855),s=i.boolean,a=i.overloadedBoolean,l=i.booleanish,c=i.number,u=i.spaceSeparated,h=i.commaSeparated;t.exports=r({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:o,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:h,acceptCharset:u,accessKey:u,action:null,allow:null,allowFullScreen:s,allowPaymentRequest:s,allowUserMedia:s,alt:null,as:null,async:s,autoCapitalize:null,autoComplete:u,autoFocus:s,autoPlay:s,capture:s,charSet:null,checked:s,cite:null,className:u,cols:c,colSpan:null,content:null,contentEditable:l,controls:s,controlsList:u,coords:c|h,crossOrigin:null,data:null,dateTime:null,decoding:null,default:s,defer:s,dir:null,dirName:null,disabled:s,download:a,draggable:l,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:s,formTarget:null,headers:u,height:c,hidden:s,high:c,href:null,hrefLang:null,htmlFor:u,httpEquiv:u,id:null,imageSizes:null,imageSrcSet:h,inputMode:null,integrity:null,is:null,isMap:s,itemId:null,itemProp:u,itemRef:u,itemScope:s,itemType:u,kind:null,label:null,lang:null,language:null,list:null,loop:s,low:c,manifest:null,max:null,maxLength:c,media:null,method:null,min:null,minLength:c,multiple:s,muted:s,name:null,nonce:null,noModule:s,noValidate:s,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:s,optimum:c,pattern:null,ping:u,placeholder:null,playsInline:s,poster:null,preload:null,readOnly:s,referrerPolicy:null,rel:u,required:s,reversed:s,rows:c,rowSpan:c,sandbox:u,scope:null,scoped:s,seamless:s,selected:s,shape:null,size:c,sizes:null,slot:null,span:c,spellCheck:l,src:null,srcDoc:null,srcLang:null,srcSet:h,start:c,step:null,style:null,tabIndex:c,target:null,title:null,translate:null,type:null,typeMustMatch:s,useMap:null,value:l,width:c,wrap:null,align:null,aLink:null,archive:u,axis:null,background:null,bgColor:null,border:c,borderColor:null,bottomMargin:c,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:s,declare:s,event:null,face:null,frame:null,frameBorder:null,hSpace:c,leftMargin:c,link:null,longDesc:null,lowSrc:null,marginHeight:c,marginWidth:c,noResize:s,noHref:s,noShade:s,noWrap:s,object:null,profile:null,prompt:null,rev:null,rightMargin:c,rules:null,scheme:null,scrolling:l,standby:null,summary:null,text:null,topMargin:c,valueType:null,version:null,vAlign:null,vLink:null,vSpace:c,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:s,disableRemotePlayback:s,prefix:null,property:null,results:c,security:null,unselectable:null}})},5789:(t,e,n)=>{"use strict";var i=n(7e3),r=n(7596),o=n(8740),s=i.boolean,a=i.number,l=i.spaceSeparated,c=i.commaSeparated,u=i.commaOrSpaceSeparated;t.exports=r({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:o,properties:{about:u,accentHeight:a,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:a,amplitude:a,arabicForm:null,ascent:a,attributeName:null,attributeType:null,azimuth:a,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:a,by:null,calcMode:null,capHeight:a,className:l,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:a,diffuseConstant:a,direction:null,display:null,dur:null,divisor:a,dominantBaseline:null,download:s,dx:null,dy:null,edgeMode:null,editable:null,elevation:a,enableBackground:null,end:null,event:null,exponent:a,externalResourcesRequired:null,fill:null,fillOpacity:a,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:c,g2:c,glyphName:c,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:a,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:a,horizOriginX:a,horizOriginY:a,id:null,ideographic:a,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:a,k:a,k1:a,k2:a,k3:a,k4:a,kernelMatrix:u,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:a,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:a,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:a,overlineThickness:a,paintOrder:null,panose1:null,path:null,pathLength:a,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:l,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:a,pointsAtY:a,pointsAtZ:a,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:u,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:u,rev:u,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:u,requiredFeatures:u,requiredFonts:u,requiredFormats:u,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:a,specularExponent:a,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:a,strikethroughThickness:a,string:null,stroke:null,strokeDashArray:u,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:a,strokeOpacity:a,strokeWidth:null,style:null,surfaceScale:a,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:u,tabIndex:a,tableValues:null,target:null,targetX:a,targetY:a,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:u,to:null,transform:null,u1:null,u2:null,underlinePosition:a,underlineThickness:a,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:a,values:null,vAlphabetic:a,vMathematical:a,vectorEffect:null,vHanging:a,vIdeographic:a,version:null,vertAdvY:a,vertOriginX:a,vertOriginY:a,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:a,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}})},855:(t,e,n)=>{"use strict";var i=n(8740);t.exports=function(t,e){return i(t,e.toLowerCase())}},8740:t=>{"use strict";t.exports=function(t,e){return e in t?t[e]:e}},7596:(t,e,n)=>{"use strict";var i=n(6632),r=n(9607),o=n(8805);t.exports=function(t){var e,n,s=t.space,a=t.mustUseProperty||[],l=t.attributes||{},c=t.properties,u=t.transform,h={},p={};for(e in c)n=new o(e,u(l,e),c[e],s),-1!==a.indexOf(e)&&(n.mustUseProperty=!0),h[e]=n,p[i(e)]=e,p[i(n.attribute)]=e;return new r(h,p,s)}},8805:(t,e,n)=>{"use strict";var i=n(7643),r=n(7e3);t.exports=a,a.prototype=new i,a.prototype.defined=!0;var o=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],s=o.length;function a(t,e,n,a){var c,u=-1;for(l(this,"space",a),i.call(this,t,e);++u<s;)l(this,c=o[u],(n&r[c])===r[c])}function l(t,e,n){n&&(t[e]=n)}},7643:t=>{"use strict";t.exports=n;var e=n.prototype;function n(t,e){this.property=t,this.attribute=e}e.space=null,e.attribute=null,e.property=null,e.boolean=!1,e.booleanish=!1,e.overloadedBoolean=!1,e.number=!1,e.commaSeparated=!1,e.spaceSeparated=!1,e.commaOrSpaceSeparated=!1,e.mustUseProperty=!1,e.defined=!1},9940:(t,e,n)=>{"use strict";var i=n(7529),r=n(9607);t.exports=function(t){var e,n,o=t.length,s=[],a=[],l=-1;for(;++l<o;)e=t[l],s.push(e.property),a.push(e.normal),n=e.space;return new r(i.apply(null,s),i.apply(null,a),n)}},9607:t=>{"use strict";t.exports=n;var e=n.prototype;function n(t,e,n){this.property=t,this.normal=e,n&&(this.space=n)}e.space=null,e.normal={},e.property={}},7e3:(t,e)=>{"use strict";var n=0;function i(){return Math.pow(2,++n)}e.boolean=i(),e.booleanish=i(),e.overloadedBoolean=i(),e.number=i(),e.spaceSeparated=i(),e.commaSeparated=i(),e.commaOrSpaceSeparated=i()},8289:(t,e,n)=>{"use strict";var i=n(7596);t.exports=i({space:"xlink",transform:function(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}})},5812:(t,e,n)=>{"use strict";var i=n(7596);t.exports=i({space:"xml",transform:function(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}})},4397:(t,e,n)=>{"use strict";var i=n(7596),r=n(855);t.exports=i({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:r,properties:{xmlns:null,xmlnsXLink:null}})},6632:t=>{"use strict";t.exports=function(t){return t.toLowerCase()}},1218:(t,e,n)=>{"use strict";var i=n(9940),r=n(8289),o=n(5812),s=n(4397),a=n(7716),l=n(5789);t.exports=i([o,r,s,a,l])},6464:t=>{"use strict";var e,n="";t.exports=function(t,i){if("string"!=typeof t)throw new TypeError("expected a string");if(1===i)return t;if(2===i)return t+t;var r=t.length*i;if(e!==t||void 0===e)e=t,n="";else if(n.length>=r)return n.substr(0,r);for(;r>n.length&&i>1;)1&i&&(n+=t),i>>=1,t+=t;return n=(n+=t).substr(0,r)}},6582:(t,e)=>{"use strict";e.P=function(t){return t.join(" ").trim()};var n=/[ \t\n\r\f]+/g},78:t=>{"use strict";t.exports=function(t,e,n){return function(){var i=n||this,r=i[t];return i[t]=!e,o;function o(){i[t]=r}}}},832:t=>{"use strict";t.exports=JSON.parse('["cent","copy","divide","gt","lt","not","para","times"]')},4860:(t,e,n)=>{"use strict";var i=n(5848),r=n(6588),o=n(9480),s=n(6195),a=n(7961),l=n(832);t.exports=f,f.escape=function(t){return f(t,{escapeOnly:!0,useNamedReferences:!0})};var c={}.hasOwnProperty,u=function(){var t,e={};for(t in i)e[i[t]]=t;return e}(),h=v(['"',"'","<",">","&","`"]),p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g;function f(t,e){var n=e||{},i=n.subset,o=i?v(i):h,s=n.escapeOnly,f=n.omitOptionalSemicolons;return t=t.replace(o,y),i||s?t:t.replace(p,(function(t,e,n){return g(1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)-56320+65536,n.charCodeAt(e+2),f)})).replace(d,y);function y(t,e,i){return function(t,e,n){var i,o,s,h,p=n.useShortestReferences,d=n.omitOptionalSemicolons;(p||n.useNamedReferences)&&c.call(u,t)&&(i=function(t,e,n,i){var o="&"+t;if(n&&c.call(r,t)&&-1===l.indexOf(t)&&(!i||e&&61!==e&&!a(e)))return o;return o+";"}(u[t],e,d,n.attribute));!p&&i||(s=g(o=t.charCodeAt(0),e,d),p&&(h=m(o,e,d)).length<s.length&&(s=h));if(i&&(!p||i.length<s.length))return i;return s}(t,i.charCodeAt(e+1),n)}}function g(t,e,n){var i="&#x"+t.toString(16).toUpperCase();return n&&e&&!o(e)?i:i+";"}function m(t,e,n){var i="&#"+String(t);return n&&e&&!s(e)?i:i+";"}function v(t){return new RegExp("["+t.join("")+"]","g")}},7257:t=>{"use strict";t.exports=function(t){var e=String(t),n=e.length;for(;"\n"===e.charAt(--n););return e.slice(0,n+1)}},2745:(t,e)=>{(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},3278:(t,e,n)=>{"use strict";var i=n(7529),r=n(5717);t.exports=function(t){var e,n,o;for(n in r(a,t),r(s,a),e=a.prototype)(o=e[n])&&"object"==typeof o&&(e[n]="concat"in o?o.concat():i(o));return a;function s(e){return t.apply(this,e)}function a(){return this instanceof a?t.apply(this,arguments):new s(arguments)}}},914:t=>{"use strict";t.exports=function(t,e,n){var i;null!=n||"object"==typeof e&&!Array.isArray(e)||(n=e,e={});i=Object.assign({type:String(t)},e),Array.isArray(n)?i.children=n:null!=n&&(i.value=String(n));return i}},1744:t=>{"use strict";function e(t){return t&&"object"==typeof t?t:{}}t.exports=function(t){var n=e(e(t).position),i=e(n.start),r=e(n.end);return!(i.line&&i.column&&r.line&&r.column)}},8145:t=>{"use strict";function e(t){if("string"==typeof t)return function(t){return e;function e(e){return Boolean(e&&e.type===t)}}(t);if(null==t)return r;if("object"==typeof t)return("length"in t?i:n)(t);if("function"==typeof t)return t;throw new Error("Expected function, string, or object as test")}function n(t){return function(e){var n;for(n in t)if(e[n]!==t[n])return!1;return!0}}function i(t){var n=function(t){for(var n=[],i=t.length,r=-1;++r<i;)n[r]=e(t[r]);return n}(t),i=n.length;return function(){var t=-1;for(;++t<i;)if(n[t].apply(this,arguments))return!0;return!1}}function r(){return!0}t.exports=e},7361:t=>{"use strict";var e=r("start"),n=r("end");function i(t){return{start:e(t),end:n(t)}}function r(t){return e.displayName=t,e;function e(e){var n=e&&e.position&&e.position[t]||{};return{line:n.line||null,column:n.column||null,offset:isNaN(n.offset)?null:n.offset}}}t.exports=i,i.start=e,i.end=n},3183:(t,e,n)=>{"use strict";var i=n(2854);function r(t){delete t.position}function o(t){t.position=void 0}t.exports=function(t,e){return i(t,e?r:o),t}},5432:t=>{"use strict";var e={}.hasOwnProperty;function n(t){return t&&"object"==typeof t||(t={}),r(t.line)+":"+r(t.column)}function i(t){return t&&"object"==typeof t||(t={}),n(t.start)+"-"+n(t.end)}function r(t){return t&&"number"==typeof t?t:1}t.exports=function(t){if(!t||"object"!=typeof t)return"";if(e.call(t,"position")||e.call(t,"type"))return i(t.position);if(e.call(t,"start")||e.call(t,"end"))return i(t);if(e.call(t,"line")||e.call(t,"column"))return n(t);return""}},6750:t=>{t.exports=function(t){return t}},9294:(t,e,n)=>{"use strict";t.exports=a;var i=n(8145),r=n(6750),o="skip",s=!1;function a(t,e,n,a){var p;function d(t,i,c){var f,g=h(t)?t:{};return u(g.type)&&(f=u(g.tagName)?g.tagName:u(g.name)?g.name:void 0,m.displayName="node ("+r(g.type+(f?"<"+f+">":""))+")"),m;function m(){var r,u=[];return(e&&!p(t,i,c[c.length-1]||null)||(u=l(n(t,c)))[0]!==s)&&t.children&&u[0]!==o&&(r=l(function(t,e){var n,i=-1,r=a?-1:1,o=(a?t.length:i)+r;for(;o>i&&o<t.length;){if((n=d(t[o],o,e)())[0]===s)return n;o="number"==typeof n[1]?n[1]:o+r}}(t.children,c.concat(t))))[0]===s?r:u}}c(e)&&!c(n)&&(a=n,n=e,e=null),p=i(e),d(t,null,[])()}function l(t){return h(t)&&"length"in t?t:"number"==typeof t?[true,t]:[t]}function c(t){return"function"==typeof t}function u(t){return"string"==typeof t}function h(t){return"object"==typeof t&&null!==t}a.CONTINUE=true,a.SKIP=o,a.EXIT=s},2854:(t,e,n)=>{"use strict";t.exports=a;var i=n(9294),r=i.CONTINUE,o=i.SKIP,s=i.EXIT;function a(t,e,n,r){"function"==typeof e&&"function"!=typeof n&&(r=n,n=e,e=null),i(t,e,(function(t,e){var i=e[e.length-1],r=i?i.children.indexOf(t):null;return n(t,r,i)}),r)}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},4787:t=>{"use strict";t.exports=function(t){var e=String(t),n=[],i=/\r?\n|\r/g;for(;i.exec(e);)n.push(i.lastIndex);return n.push(e.length+1),{toPoint:r,toPosition:r,toOffset:function(t){var e,i=t&&t.line,r=t&&t.column;isNaN(i)||isNaN(r)||!(i-1 in n)||(e=(n[i-2]||0)+r-1||0);return e>-1&&e<n[n.length-1]?e:-1}};function r(t){var e=-1;if(t>-1&&t<n[n.length-1])for(;++e<n.length;)if(n[e]>t)return{line:e+1,column:t-(n[e-1]||0)+1,offset:t};return{}}}},734:(t,e,n)=>{"use strict";var i=n(5432);function r(){}t.exports=s,r.prototype=Error.prototype,s.prototype=new r;var o=s.prototype;function s(t,e,n){var r,o,s;"string"==typeof e&&(n=e,e=null),r=function(t){var e,n=[null,null];"string"==typeof t&&(-1===(e=t.indexOf(":"))?n[1]=t:(n[0]=t.slice(0,e),n[1]=t.slice(e+1)));return n}(n),o=i(e)||"1:1",s={start:{line:null,column:null},end:{line:null,column:null}},e&&e.position&&(e=e.position),e&&(e.start?(s=e,e=e.start):s.start=e),t.stack&&(this.stack=t.stack,t=t.message),this.message=t,this.name=o,this.reason=t,this.line=e?e.line:null,this.column=e?e.column:null,this.location=s,this.source=r[0],this.ruleId=r[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},939:(t,e,n)=>{"use strict";t.exports=n(5905)},5442:(t,e,n)=>{"use strict";var i=n(8064),r=n(4228),o=n(8738);t.exports=l;var s={}.hasOwnProperty,a=["history","path","basename","stem","extname","dirname"];function l(t){var e,n;if(t){if("string"==typeof t||o(t))t={contents:t};else if("message"in t&&"messages"in t)return t}else t={};if(!(this instanceof l))return new l(t);for(this.data={},this.messages=[],this.history=[],this.cwd=r.cwd(),n=-1;++n<a.length;)e=a[n],s.call(t,e)&&(this[e]=t[e]);for(e in t)a.indexOf(e)<0&&(this[e]=t[e])}function c(t,e){if(t&&t.indexOf(i.sep)>-1)throw new Error("`"+e+"` cannot be a path: did not expect `"+i.sep+"`")}function u(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function h(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}l.prototype.toString=function(t){return(this.contents||"").toString(t)},Object.defineProperty(l.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(t){u(t,"path"),this.path!==t&&this.history.push(t)}}),Object.defineProperty(l.prototype,"dirname",{get:function(){return"string"==typeof this.path?i.dirname(this.path):void 0},set:function(t){h(this.path,"dirname"),this.path=i.join(t||"",this.basename)}}),Object.defineProperty(l.prototype,"basename",{get:function(){return"string"==typeof this.path?i.basename(this.path):void 0},set:function(t){u(t,"basename"),c(t,"basename"),this.path=i.join(this.dirname||"",t)}}),Object.defineProperty(l.prototype,"extname",{get:function(){return"string"==typeof this.path?i.extname(this.path):void 0},set:function(t){if(c(t,"extname"),h(this.path,"extname"),t){if(46!==t.charCodeAt(0))throw new Error("`extname` must start with `.`");if(t.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=i.join(this.dirname,this.stem+(t||""))}}),Object.defineProperty(l.prototype,"stem",{get:function(){return"string"==typeof this.path?i.basename(this.path,this.extname):void 0},set:function(t){u(t,"stem"),c(t,"stem"),this.path=i.join(this.dirname||"",t+(this.extname||""))}})},5905:(t,e,n)=>{"use strict";var i=n(734),r=n(5442);t.exports=r,r.prototype.message=function(t,e,n){var r=new i(t,e,n);this.path&&(r.name=this.path+":"+r.name,r.file=this.path);return r.fatal=!1,this.messages.push(r),r},r.prototype.info=function(){var t=this.message.apply(this,arguments);return t.fatal=null,t},r.prototype.fail=function(){var t=this.message.apply(this,arguments);throw t.fatal=!0,t}},8064:(t,e)=>{"use strict";function n(t){var e,n;return i(t),e=47===t.charCodeAt(0),(n=function(t,e){var n,i,r="",o=0,s=-1,a=0,l=-1;for(;++l<=t.length;){if(l<t.length)n=t.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(s===l-1||1===a);else if(s!==l-1&&2===a){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){if((i=r.lastIndexOf("/"))!==r.length-1){i<0?(r="",o=0):o=(r=r.slice(0,i)).length-1-r.lastIndexOf("/"),s=l,a=0;continue}}else if(r.length){r="",o=0,s=l,a=0;continue}e&&(r=r.length?r+"/..":"..",o=2)}else r.length?r+="/"+t.slice(s+1,l):r=t.slice(s+1,l),o=l-s-1;s=l,a=0}else 46===n&&a>-1?a++:a=-1}return r}(t,!e)).length||e||(n="."),n.length&&47===t.charCodeAt(t.length-1)&&(n+="/"),e?"/"+n:n}function i(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}e.basename=function(t,e){var n,r,o,s,a=0,l=-1;if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');if(i(t),n=t.length,void 0===e||!e.length||e.length>t.length){for(;n--;)if(47===t.charCodeAt(n)){if(o){a=n+1;break}}else l<0&&(o=!0,l=n+1);return l<0?"":t.slice(a,l)}if(e===t)return"";r=-1,s=e.length-1;for(;n--;)if(47===t.charCodeAt(n)){if(o){a=n+1;break}}else r<0&&(o=!0,r=n+1),s>-1&&(t.charCodeAt(n)===e.charCodeAt(s--)?s<0&&(l=n):(s=-1,l=r));a===l?l=r:l<0&&(l=t.length);return t.slice(a,l)},e.dirname=function(t){var e,n,r;if(i(t),!t.length)return".";e=-1,r=t.length;for(;--r;)if(47===t.charCodeAt(r)){if(n){e=r;break}}else n||(n=!0);return e<0?47===t.charCodeAt(0)?"/":".":1===e&&47===t.charCodeAt(0)?"//":t.slice(0,e)},e.extname=function(t){var e,n,r,o=-1,s=0,a=-1,l=0;i(t),r=t.length;for(;r--;)if(47!==(n=t.charCodeAt(r)))a<0&&(e=!0,a=r+1),46===n?o<0?o=r:1!==l&&(l=1):o>-1&&(l=-1);else if(e){s=r+1;break}if(o<0||a<0||0===l||1===l&&o===a-1&&o===s+1)return"";return t.slice(o,a)},e.join=function(){var t,e=-1;for(;++e<arguments.length;)i(arguments[e]),arguments[e]&&(t=void 0===t?arguments[e]:t+"/"+arguments[e]);return void 0===t?".":n(t)},e.sep="/"},4228:(t,e)=>{"use strict";e.cwd=function(){return"/"}},7529:t=>{t.exports=function(){for(var t={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)e.call(i,r)&&(t[r]=i[r])}return t};var e=Object.prototype.hasOwnProperty},5572:(t,e,n)=>{"use strict";var i=n(3278),r=n(7529),o=n(4186);function s(t){var e=this.data("settings"),n=i(o);n.prototype.options=r(n.prototype.options,e,t),this.Parser=n}t.exports=s,s.Parser=o},8204:t=>{"use strict";t.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},1819:(t,e,n)=>{"use strict";var i=n(7529),r=n(7574);t.exports=function(t){return n.raw=function(t,n,s){return r(t,i(s,{position:e(n),warning:o}))},n;function e(e){for(var n=t.offset,i=e.line,r=[];++i&&i in n;)r.push((n[i]||0)+1);return{start:e,indent:r}}function n(n,i,s){r(n,{position:e(i),warning:o,text:s,reference:s,textContext:t,referenceContext:t})}function o(e,n,i){3!==i&&t.file.message(e,n)}}},3114:(t,e,n)=>{"use strict";t.exports={position:!0,gfm:!0,commonmark:!1,pedantic:!1,blocks:n(8204)}},563:t=>{"use strict";t.exports=function(t,e){var n=t.indexOf("\n",e);for(;n>e&&" "===t.charAt(n-1);)n--;return n}},6497:t=>{"use strict";t.exports=function(t,e){return t.indexOf("`",e)}},3723:t=>{"use strict";t.exports=function(t,e){return t.indexOf("~~",e)}},973:(t,e,n)=>{"use strict";var i=n(6195),r=n(6260);function o(t){return i(t)||r(t)||43===t||45===t||46===t||95===t}t.exports=function t(e,n){var i,r;if(!this.options.gfm)return-1;if(-1===(i=e.indexOf("@",n)))return-1;if((r=i)===n||!o(e.charCodeAt(r-1)))return t.call(this,e,i+1);for(;r>n&&o(e.charCodeAt(r-1));)r--;return r}},2411:t=>{"use strict";t.exports=function(t,e){var n=t.indexOf("*",e),i=t.indexOf("_",e);if(-1===i)return n;if(-1===n)return i;return i<n?i:n}},4681:t=>{"use strict";t.exports=function(t,e){return t.indexOf("\\",e)}},633:t=>{"use strict";t.exports=function(t,e){var n=t.indexOf("[",e),i=t.indexOf("![",e);if(-1===i)return n;return n<i?n:i}},1016:t=>{"use strict";t.exports=function(t,e){var n=t.indexOf("**",e),i=t.indexOf("__",e);if(-1===i)return n;if(-1===n)return i;return i<n?i:n}},46:t=>{"use strict";t.exports=function(t,e){return t.indexOf("<",e)}},8637:t=>{"use strict";t.exports=function(t,n){var i,r,o,s=-1;if(!this.options.gfm)return s;r=e.length,i=-1;for(;++i<r;)-1!==(o=t.indexOf(e[i],n))&&(-1===s||o<s)&&(s=o);return s};var e=["www.","http://","https://"]},4767:(t,e,n)=>{"use strict";var i=n(7529),r=n(3183);t.exports=function(){var t,e=this,n=String(e.file),s={line:1,column:1,offset:0},a=i(s);65279===(n=n.replace(o,"\n")).charCodeAt(0)&&(n=n.slice(1),a.column++,a.offset++);t={type:"root",children:e.tokenizeBlock(n,a),position:{start:s,end:e.eof||i(s)}},e.options.position||r(t,!0);return t};var o=/\r\n|\r/g},4186:(t,e,n)=>{"use strict";var i=n(7529),r=n(78),o=n(4787),s=n(7678),a=n(1819),l=n(831);function c(t,e){this.file=e,this.offset={},this.options=i(this.options),this.setOptions({}),this.inList=!1,this.inBlock=!1,this.inLink=!1,this.atStart=!0,this.toOffset=o(e).toOffset,this.unescape=s(this,"escape"),this.decode=a(this)}t.exports=c;var u=c.prototype;function h(t){var e,n=[];for(e in t)n.push(e);return n}u.setOptions=n(5248),u.parse=n(4767),u.options=n(3114),u.exitStart=r("atStart",!0),u.enterList=r("inList",!1),u.enterLink=r("inLink",!1),u.enterBlock=r("inBlock",!1),u.interruptParagraph=[["thematicBreak"],["list"],["atxHeading"],["fencedCode"],["blockquote"],["html"],["setextHeading",{commonmark:!1}],["definition",{commonmark:!1}]],u.interruptList=[["atxHeading",{pedantic:!1}],["fencedCode",{pedantic:!1}],["thematicBreak",{pedantic:!1}],["definition",{commonmark:!1}]],u.interruptBlockquote=[["indentedCode",{commonmark:!0}],["fencedCode",{commonmark:!0}],["atxHeading",{commonmark:!0}],["setextHeading",{commonmark:!0}],["thematicBreak",{commonmark:!0}],["html",{commonmark:!0}],["list",{commonmark:!0}],["definition",{commonmark:!1}]],u.blockTokenizers={blankLine:n(9269),indentedCode:n(6167),fencedCode:n(1484),blockquote:n(8502),atxHeading:n(684),thematicBreak:n(8352),list:n(2866),setextHeading:n(1578),html:n(6494),definition:n(7742),table:n(308),paragraph:n(7006)},u.inlineTokenizers={escape:n(1796),autoLink:n(2768),url:n(26),email:n(4937),html:n(5810),link:n(7786),reference:n(977),strong:n(1248),emphasis:n(3391),deletion:n(5702),code:n(1243),break:n(4245),text:n(8825)},u.blockMethods=h(u.blockTokenizers),u.inlineMethods=h(u.inlineTokenizers),u.tokenizeBlock=l("block"),u.tokenizeInline=l("inline"),u.tokenizeFactory=l},5248:(t,e,n)=>{"use strict";var i=n(7529),r=n(2123),o=n(3114);t.exports=function(t){var e,n,s=this,a=s.options;if(null==t)t={};else{if("object"!=typeof t)throw new Error("Invalid value `"+t+"` for setting `options`");t=i(t)}for(e in o){if(null==(n=t[e])&&(n=a[e]),"blocks"!==e&&"boolean"!=typeof n||"blocks"===e&&"object"!=typeof n)throw new Error("Invalid value `"+n+"` for setting `options."+e+"`");t[e]=n}return s.options=t,s.escape=r(t),s}},2768:(t,e,n)=>{"use strict";var i=n(2139),r=n(7574),o=n(46);t.exports=l,l.locator=o,l.notInLink=!0;var s="mailto:",a=s.length;function l(t,e,n){var o,l,c,u,h,p=this,d="",f=e.length,g=0,m="",v=!1,y="";if("<"===e.charAt(0)){for(g++,d="<";g<f&&(o=e.charAt(g),!(i(o)||">"===o||"@"===o||":"===o&&"/"===e.charAt(g+1)));)m+=o,g++;if(m){if(y+=m,m="",y+=o=e.charAt(g),g++,"@"===o)v=!0;else{if(":"!==o||"/"!==e.charAt(g+1))return;y+="/",g++}for(;g<f&&(o=e.charAt(g),!i(o)&&">"!==o);)m+=o,g++;if(o=e.charAt(g),m&&">"===o)return!!n||(c=y+=m,d+=y+o,(l=t.now()).column++,l.offset++,v&&(y.slice(0,a).toLowerCase()===s?(c=c.slice(a),l.column+=a,l.offset+=a):y=s+y),u=p.inlineTokenizers,p.inlineTokenizers={text:u.text},h=p.enterLink(),c=p.tokenizeInline(c,l),p.inlineTokenizers=u,h(),t(d)({type:"link",title:null,url:r(y,{nonTerminated:!1}),children:c}))}}}},9269:t=>{"use strict";var e=/^[ \t]*(\n|$)/;t.exports=function(t,n,i){var r,o="",s=0,a=n.length;for(;s<a&&null!=(r=e.exec(n.slice(s)));)s+=r[0].length,o+=r[0];if(""===o)return;if(i)return!0;t(o)}},8502:(t,e,n)=>{"use strict";var i=n(2745),r=n(7901);t.exports=function(t,e,n){var o,s,a,l,c,u,h,p,d,f=this,g=f.offset,m=f.blockTokenizers,v=f.interruptBlockquote,y=t.now(),b=y.line,w=e.length,k=[],C=[],x=[],S=0;for(;S<w&&(" "===(s=e.charAt(S))||"\t"===s);)S++;if(">"!==e.charAt(S))return;if(n)return!0;S=0;for(;S<w;){for(l=e.indexOf("\n",S),h=S,p=!1,-1===l&&(l=w);S<w&&(" "===(s=e.charAt(S))||"\t"===s);)S++;if(">"===e.charAt(S)?(S++,p=!0," "===e.charAt(S)&&S++):S=h,c=e.slice(S,l),!p&&!i(c)){S=h;break}if(!p&&(a=e.slice(S),r(v,m,f,[t,a,!0])))break;u=h===S?c:e.slice(h,l),x.push(S-h),k.push(u),C.push(c),S=l+1}S=-1,w=x.length,o=t(k.join("\n"));for(;++S<w;)g[b]=(g[b]||0)+x[S],b++;return d=f.enterBlock(),C=f.tokenizeBlock(C.join("\n"),y),d(),o({type:"blockquote",children:C})}},4245:(t,e,n)=>{"use strict";var i=n(563);t.exports=r,r.locator=i;function r(t,e,n){for(var i,r=e.length,o=-1,s="";++o<r;){if("\n"===(i=e.charAt(o))){if(o<2)return;return!!n||t(s+=i)({type:"break"})}if(" "!==i)return;s+=i}}},1484:t=>{"use strict";t.exports=function(t,r,o){var s,a,l,c,u,h,p,d,f,g,m,v,y,b=this,w=b.options.gfm,k=r.length+1,C=0,x="";if(!w)return;for(;C<k&&((l=r.charAt(C))===i||l===n);)x+=l,C++;if(v=C,"~"!==(l=r.charAt(C))&&"`"!==l)return;C++,a=l,s=1,x+=l;for(;C<k&&(l=r.charAt(C))===a;)x+=l,s++,C++;if(s<3)return;for(;C<k&&((l=r.charAt(C))===i||l===n);)x+=l,C++;c="",p="";for(;C<k&&(l=r.charAt(C))!==e&&("`"!==a||l!==a);)l===i||l===n?p+=l:(c+=p+l,p=""),C++;if((l=r.charAt(C))&&l!==e)return;if(o)return!0;(y=t.now()).column+=x.length,y.offset+=x.length,x+=c,c=b.decode.raw(b.unescape(c),y),p&&(x+=p);p="",g="",m="",d="",f="";var S=!0;for(;C<k;)if(l=r.charAt(C),d+=g,f+=m,g="",m="",l===e){for(S?(x+=l,S=!1):(g+=l,m+=l),p="",C++;C<k&&(l=r.charAt(C))===i;)p+=l,C++;if(g+=p,m+=p.slice(v),!(p.length>=4)){for(p="";C<k&&(l=r.charAt(C))===a;)p+=l,C++;if(g+=p,m+=p,!(p.length<s)){for(p="";C<k&&((l=r.charAt(C))===i||l===n);)g+=l,m+=l,C++;if(!l||l===e)break}}}else d+=l,m+=l,C++;x+=d+g,C=-1,k=c.length;for(;++C<k;)if((l=c.charAt(C))===i||l===n)u||(u=c.slice(0,C));else if(u){h=c.slice(C);break}return t(x)({type:"code",lang:u||c||null,meta:h||null,value:f})};var e="\n",n="\t",i=" "},6167:(t,e,n)=>{"use strict";var i=n(6464),r=n(7257);t.exports=function(t,e,n){var i,s,a,l=-1,c=e.length,u="",h="",p="",d="";for(;++l<c;)if(i=e.charAt(l),a)if(a=!1,u+=p,h+=d,p="",d="","\n"===i)p=i,d=i;else for(u+=i,h+=i;++l<c;){if(!(i=e.charAt(l))||"\n"===i){d=i,p=i;break}u+=i,h+=i}else if(" "===i&&e.charAt(l+1)===i&&e.charAt(l+2)===i&&e.charAt(l+3)===i)p+=o,l+=3,a=!0;else if("\t"===i)p+=i,a=!0;else{for(s="";"\t"===i||" "===i;)s+=i,i=e.charAt(++l);if("\n"!==i)break;p+=s+i,d+=i}if(h)return!!n||t(u)({type:"code",lang:null,meta:null,value:r(h)})};var o=i(" ",4)},1243:(t,e,n)=>{"use strict";var i=n(6497);t.exports=r,r.locator=i;function r(t,e,n){for(var i,r,o,s,a,l,c=e.length,u=0;u<c&&96===e.charCodeAt(u);)u++;if(0!==u&&u!==c){for(i=u,a=e.charCodeAt(u);u<c;){if(s=a,a=e.charCodeAt(u+1),96===s){if(void 0===r&&(r=u),o=u+1,96!==a&&o-r===i){l=!0;break}}else void 0!==r&&(r=void 0,o=void 0);u++}if(l){if(n)return!0;if(u=i,c=r,s=e.charCodeAt(u),a=e.charCodeAt(c-1),l=!1,c-u>2&&(32===s||10===s)&&(32===a||10===a)){for(u++,c--;u<c;){if(32!==(s=e.charCodeAt(u))&&10!==s){l=!0;break}u++}!0===l&&(i++,r--)}return t(e.slice(0,o))({type:"inlineCode",value:e.slice(i,r)})}}}},7742:(t,e,n)=>{"use strict";var i=n(2139),r=n(6749);t.exports=function(t,e,n){var i,h,p,d,f,g,m,v,y=this,b=y.options.commonmark,w=0,k=e.length,C="";for(;w<k&&((d=e.charAt(w))===a||d===s);)C+=d,w++;if("["!==(d=e.charAt(w)))return;w++,C+=d,p="";for(;w<k&&(d=e.charAt(w))!==l;)"\\"===d&&(p+=d,w++,d=e.charAt(w)),p+=d,w++;if(!p||e.charAt(w)!==l||":"!==e.charAt(w+1))return;g=p,w=(C+=p+l+":").length,p="";for(;w<k&&((d=e.charAt(w))===s||d===a||d===o);)C+=d,w++;if(d=e.charAt(w),p="",i=C,"<"===d){for(w++;w<k&&c(d=e.charAt(w));)p+=d,w++;if((d=e.charAt(w))===c.delimiter)C+="<"+p+d,w++;else{if(b)return;w-=p.length+1,p=""}}if(!p){for(;w<k&&u(d=e.charAt(w));)p+=d,w++;C+=p}if(!p)return;m=p,p="";for(;w<k&&((d=e.charAt(w))===s||d===a||d===o);)p+=d,w++;d=e.charAt(w),f=null,'"'===d?f='"':"'"===d?f="'":"("===d&&(f=")");if(f){if(!p)return;for(w=(C+=p+d).length,p="";w<k&&(d=e.charAt(w))!==f;){if(d===o){if(w++,(d=e.charAt(w))===o||d===f)return;p+=o}p+=d,w++}if((d=e.charAt(w))!==f)return;h=C,C+=p+d,w++,v=p,p=""}else p="",w=C.length;for(;w<k&&((d=e.charAt(w))===s||d===a);)C+=d,w++;if(!(d=e.charAt(w))||d===o)return!!n||(i=t(i).test().end,m=y.decode.raw(y.unescape(m),i,{nonTerminated:!1}),v&&(h=t(h).test().end,v=y.decode.raw(y.unescape(v),h)),t(C)({type:"definition",identifier:r(g),label:g,title:v||null,url:m}))};var o="\n",s="\t",a=" ",l="]";function c(t){return">"!==t&&"["!==t&&t!==l}function u(t){return"["!==t&&t!==l&&!i(t)}c.delimiter=">"},5702:(t,e,n)=>{"use strict";var i=n(2139),r=n(3723);t.exports=s,s.locator=r;var o="~";function s(t,e,n){var r,s,a,l="",c="",u="",h="";if(this.options.gfm&&e.charAt(0)===o&&e.charAt(1)===o&&!i(e.charAt(2)))for(r=1,s=e.length,(a=t.now()).column+=2,a.offset+=2;++r<s;){if(!((l=e.charAt(r))!==o||c!==o||u&&i(u)))return!!n||t("~~"+h+"~~")({type:"delete",children:this.tokenizeInline(h,a)});h+=c,u=c,c=l}}},4937:(t,e,n)=>{"use strict";var i=n(7574),r=n(6195),o=n(6260),s=n(973);t.exports=a,a.locator=s,a.notInLink=!0;function a(t,e,n){var s,a,l,c,u=this,h=u.options.gfm,p=u.inlineTokenizers,d=0,f=e.length,g=-1;if(h){for(s=e.charCodeAt(d);r(s)||o(s)||43===s||45===s||46===s||95===s;)s=e.charCodeAt(++d);if(0!==d&&64===s){for(d++;d<f&&(s=e.charCodeAt(d),r(s)||o(s)||45===s||46===s||95===s);)d++,-1===g&&46===s&&(g=d);if(-1!==g&&g!==d&&45!==s&&95!==s)return 46===s&&d--,a=e.slice(0,d),!!n||(c=u.enterLink(),u.inlineTokenizers={text:p.text},l=u.tokenizeInline(a,t.now()),u.inlineTokenizers=p,c(),t(a)({type:"link",title:null,url:"mailto:"+i(a,{nonTerminated:!1}),children:l}))}}}},3391:(t,e,n)=>{"use strict";var i=n(2745),r=n(3017),o=n(2139),s=n(2411);t.exports=a,a.locator=s;function a(t,e,n){var s,a,l,c,u,h,p,d=0,f=e.charAt(d);if(!("*"!==f&&"_"!==f||(a=this.options.pedantic,u=f,l=f,h=e.length,d++,c="",f="",a&&o(e.charAt(d)))))for(;d<h;){if(p=f,!((f=e.charAt(d))!==l||a&&o(p))){if((f=e.charAt(++d))!==l){if(!i(c)||p===l)return;if(!a&&"_"===l&&r(f)){c+=l;continue}return!!n||((s=t.now()).column++,s.offset++,t(u+c+l)({type:"emphasis",children:this.tokenizeInline(c,s)}))}c+=l}a||"\\"!==f||(c+=f,f=e.charAt(++d)),c+=f,d++}}},1796:(t,e,n)=>{"use strict";var i=n(4681);t.exports=r,r.locator=i;function r(t,e,n){var i,r;if("\\"===e.charAt(0)&&(i=e.charAt(1),-1!==this.escape.indexOf(i)))return!!n||(r="\n"===i?{type:"break"}:{type:"text",value:i},t("\\"+i)(r))}},684:t=>{"use strict";t.exports=function(t,r,o){var s,a,l,c=this.options.pedantic,u=r.length+1,h=-1,p=t.now(),d="",f="";for(;++h<u;){if((s=r.charAt(h))!==n&&s!==e){h--;break}d+=s}l=0;for(;++h<=u;){if((s=r.charAt(h))!==i){h--;break}d+=s,l++}if(l>6)return;if(!l||!c&&r.charAt(h+1)===i)return;u=r.length+1,a="";for(;++h<u;){if((s=r.charAt(h))!==n&&s!==e){h--;break}a+=s}if(!c&&0===a.length&&s&&"\n"!==s)return;if(o)return!0;d+=a,a="",f="";for(;++h<u&&(s=r.charAt(h))&&"\n"!==s;)if(s===n||s===e||s===i){for(;s===n||s===e;)a+=s,s=r.charAt(++h);if(c||!f||a||s!==i){for(;s===i;)a+=s,s=r.charAt(++h);for(;s===n||s===e;)a+=s,s=r.charAt(++h);h--}else f+=s}else f+=a+s,a="";return p.column+=d.length,p.offset+=d.length,t(d+=f+a)({type:"heading",depth:l,children:this.tokenizeInline(f,p)})};var e="\t",n=" ",i="#"},1578:t=>{"use strict";t.exports=function(t,e,n){var i,r,o,s,a,l=t.now(),c=e.length,u=-1,h="";for(;++u<c;){if(" "!==(o=e.charAt(u))||u>=3){u--;break}h+=o}i="",r="";for(;++u<c;){if("\n"===(o=e.charAt(u))){u--;break}" "===o||"\t"===o?r+=o:(i+=r+o,r="")}if(l.column+=h.length,l.offset+=h.length,h+=i+r,o=e.charAt(++u),s=e.charAt(++u),"\n"!==o||"="!==s&&"-"!==s)return;h+=o,r=s,a="="===s?1:2;for(;++u<c;){if((o=e.charAt(u))!==s){if("\n"!==o)return;u--;break}r+=o}if(n)return!0;return t(h+r)({type:"heading",depth:a,children:this.tokenizeInline(i,l)})}},6494:(t,e,n)=>{"use strict";var i=n(1537).g;t.exports=function(t,e,n){var i,m,v,y,b,w,k,C=this.options.blocks.join("|"),x=new RegExp("^</?("+C+")(?=(\\s|/?>|$))","i"),S=e.length,E=0,M=[[r,o,!0],[s,a,!0],[l,c,!0],[u,h,!0],[p,d,!0],[x,f,!0],[g,f,!1]];for(;E<S&&("\t"===(y=e.charAt(E))||" "===y);)E++;if("<"!==e.charAt(E))return;i=-1===(i=e.indexOf("\n",E+1))?S:i,m=e.slice(E,i),v=-1,b=M.length;for(;++v<b;)if(M[v][0].test(m)){w=M[v];break}if(!w)return;if(n)return w[2];if(E=i,!w[1].test(m))for(;E<S;){if(i=-1===(i=e.indexOf("\n",E+1))?S:i,m=e.slice(E+1,i),w[1].test(m)){m&&(E=i);break}E=i}return k=e.slice(0,E),t(k)({type:"html",value:k})};var r=/^<(script|pre|style)(?=(\s|>|$))/i,o=/<\/(script|pre|style)>/i,s=/^<!--/,a=/-->/,l=/^<\?/,c=/\?>/,u=/^<![A-Za-z]/,h=/>/,p=/^<!\[CDATA\[/,d=/]]>/,f=/^$/,g=new RegExp(i.source+"\\s*$")},5810:(t,e,n)=>{"use strict";var i=n(6260),r=n(46),o=n(1537)._;t.exports=l,l.locator=r;var s=/^<a /i,a=/^<\/a>/i;function l(t,e,n){var r,l,c=this,u=e.length;if(!("<"!==e.charAt(0)||u<3)&&(r=e.charAt(1),(i(r)||"?"===r||"!"===r||"/"===r)&&(l=e.match(o))))return!!n||(l=l[0],!c.inLink&&s.test(l)?c.inLink=!0:c.inLink&&a.test(l)&&(c.inLink=!1),t(l)({type:"html",value:l}))}},7786:(t,e,n)=>{"use strict";var i=n(2139),r=n(633);t.exports=l,l.locator=r;var o="(",s=")",a="\\";function l(t,e,n){var r,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,x,S,E=this,M="",L=0,D=e.charAt(0),A=E.options.pedantic,T=E.options.commonmark,P=E.options.gfm;if("!"===D&&(f=!0,M=D,D=e.charAt(++L)),"["===D&&(f||!E.inLink)){for(M+=D,w="",L++,v=e.length,b=0,(C=t.now()).column+=L,C.offset+=L;L<v;){if(p=D=e.charAt(L),"`"===D){for(l=1;"`"===e.charAt(L+1);)p+=D,L++,l++;c?l>=c&&(c=0):c=l}else if(D===a)L++,p+=e.charAt(L);else if(c&&!P||"["!==D){if((!c||P)&&"]"===D){if(!b){if(e.charAt(L+1)!==o)return;p+=o,r=!0,L++;break}b--}}else b++;w+=p,p="",L++}if(r){for(g=w,M+=w+p,L++;L<v&&(D=e.charAt(L),i(D));)M+=D,L++;if(w="",u=M,"<"===(D=e.charAt(L))){for(L++,u+="<";L<v&&">"!==(D=e.charAt(L));){if(T&&"\n"===D)return;w+=D,L++}if(">"!==e.charAt(L))return;M+="<"+w+">",k=w,L++}else{for(D=null,p="";L<v&&(D=e.charAt(L),!p||!('"'===D||"'"===D||T&&D===o));){if(i(D)){if(!A)break;p+=D}else{if(D===o)b++;else if(D===s){if(0===b)break;b--}w+=p,p="",D===a&&(w+=a,D=e.charAt(++L)),w+=D}L++}k=w,L=(M+=w).length}for(w="";L<v&&(D=e.charAt(L),i(D));)w+=D,L++;if(D=e.charAt(L),M+=w,w&&('"'===D||"'"===D||T&&D===o))if(L++,w="",m=D===o?s:D,h=M+=D,T){for(;L<v&&(D=e.charAt(L))!==m;)D===a&&(w+=a,D=e.charAt(++L)),L++,w+=D;if((D=e.charAt(L))!==m)return;for(y=w,M+=w+D,L++;L<v&&(D=e.charAt(L),i(D));)M+=D,L++}else for(p="";L<v;){if((D=e.charAt(L))===m)d&&(w+=m+p,p=""),d=!0;else if(d){if(D===s){M+=w+m+p,y=w;break}i(D)?p+=D:(w+=m+p+D,p="",d=!1)}else w+=D;L++}if(e.charAt(L)===s)return!!n||(M+=s,k=E.decode.raw(E.unescape(k),t(u).test().end,{nonTerminated:!1}),y&&(h=t(h).test().end,y=E.decode.raw(E.unescape(y),h)),S={type:f?"image":"link",title:y||null,url:k},f?S.alt=E.decode.raw(E.unescape(g),C)||null:(x=E.enterLink(),S.children=E.tokenizeInline(g,C),x()),t(M)(S))}}}},2866:(t,e,n)=>{"use strict";var i=n(2745),r=n(6464),o=n(6195),s=n(8930),a=n(9460),l=n(7901);t.exports=function(t,e,n){var r,s,a,p,d,f,g,m,y,b,w,k,C,x,S,E,M,L,D,A,T,P,O,F=this,I=F.options.commonmark,N=F.options.pedantic,B=F.blockTokenizers,R=F.interruptList,z=0,H=e.length,V=null,q=!1;for(;z<H&&((p=e.charAt(z))===h||p===c);)z++;if("*"===(p=e.charAt(z))||"+"===p||"-"===p)d=p,a=!1;else{for(a=!0,s="";z<H&&(p=e.charAt(z),o(p));)s+=p,z++;if(p=e.charAt(z),!s||!("."===p||I&&")"===p))return;if(n&&"1"!==s)return;V=parseInt(s,10),d=p}if((p=e.charAt(++z))!==c&&p!==h&&(N||p!==u&&""!==p))return;if(n)return!0;z=0,x=[],S=[],E=[];for(;z<H;){for(f=e.indexOf(u,z),g=z,m=!1,O=!1,-1===f&&(f=H),r=0;z<H;){if((p=e.charAt(z))===h)r+=4-r%4;else{if(p!==c)break;r++}z++}if(M&&r>=M.indent&&(O=!0),p=e.charAt(z),y=null,!O){if("*"===p||"+"===p||"-"===p)y=p,z++,r++;else{for(s="";z<H&&(p=e.charAt(z),o(p));)s+=p,z++;p=e.charAt(z),z++,s&&("."===p||I&&")"===p)&&(y=p,r+=s.length+1)}if(y)if((p=e.charAt(z))===h)r+=4-r%4,z++;else if(p===c){for(P=z+4;z<P&&e.charAt(z)===c;)z++,r++;z===P&&e.charAt(z)===c&&(z-=3,r-=3)}else p!==u&&""!==p&&(y=null)}if(y){if(!N&&d!==y)break;m=!0}else I||O||e.charAt(g)!==c?I&&M&&(O=r>=M.indent||r>4):O=!0,m=!1,z=g;if(w=e.slice(g,f),b=g===z?w:e.slice(z,f),("*"===y||"_"===y||"-"===y)&&B.thematicBreak.call(F,t,w,!0))break;if(k=C,C=!m&&!i(b).length,O&&M)M.value=M.value.concat(E,w),S=S.concat(E,w),E=[];else if(m)0!==E.length&&(q=!0,M.value.push(""),M.trail=E.concat()),M={value:[w],indent:r,trail:[]},x.push(M),S=S.concat(E,w),E=[];else if(C){if(k&&!I)break;E.push(w)}else{if(k)break;if(l(R,B,F,[t,w,!0]))break;M.value=M.value.concat(E,w),S=S.concat(E,w),E=[]}z=f+1}A=t(S.join(u)).reset({type:"list",ordered:a,start:V,spread:q,children:[]}),L=F.enterList(),D=F.enterBlock(),z=-1,H=x.length;for(;++z<H;)M=x[z].value.join(u),T=t.now(),t(M)(v(F,M,T),A),M=x[z].trail.join(u),z!==H-1&&(M+=u),t(M);return L(),D(),A};var c=" ",u="\n",h="\t",p=/\n\n(?!\s*$)/,d=/^\[(.)][ \t]/,f=/^([ \t]*)([*+-]|\d+[.)])( {1,4}(?! )| |\t|$|(?=\n))([^\n]*)/,g=/^([ \t]*)([*+-]|\d+[.)])([ \t]+)/,m=/^( {1,4}|\t)?/gm;function v(t,e,n){var i,r,o=t.offset,s=t.options.pedantic?y:b,a=null,l=null;return e=s.apply(null,arguments),t.options.gfm&&(i=e.match(d))&&(r=i[0].length,a=" "!==i[1],l=i[1],o[n.line]+=r,e=e.slice(r)),{type:"listItem",spread:p.test(e),checked:a,checklist:l,children:t.tokenizeBlock(e,n)}}function y(t,e,n){var i=t.offset,r=n.line;return e=e.replace(g,o),r=n.line,e.replace(m,o);function o(t){return i[r]=(i[r]||0)+t.length,r++,""}}function b(t,e,n){var i,o,l,h,p,d,g,m=t.offset,v=n.line;for(h=(e=e.replace(f,(function(t,e,n,s,a){o=e+n+s,l=a,Number(n)<10&&o.length%2==1&&(n=c+n);return(i=e+r(c,n.length)+s)+l}))).split(u),(p=a(e,s(i).indent).split(u))[0]=l,m[v]=(m[v]||0)+o.length,v++,d=0,g=h.length;++d<g;)m[v]=(m[v]||0)+h[d].length-p[d].length,v++;return p.join(u)}},7006:(t,e,n)=>{"use strict";var i=n(2745),r=n(7257),o=n(7901);t.exports=function(t,e,n){var a,l,c,u,h,p=this,d=p.options.commonmark,f=p.blockTokenizers,g=p.interruptParagraph,m=e.indexOf(s),v=e.length;for(;m<v;){if(-1===m){m=v;break}if(e.charAt(m+1)===s)break;if(d){for(u=0,a=m+1;a<v;){if("\t"===(c=e.charAt(a))){u=4;break}if(" "!==c)break;u++,a++}if(u>=4&&c!==s){m=e.indexOf(s,m+1);continue}}if(l=e.slice(m+1),o(g,f,p,[t,l,!0]))break;if(a=m,-1!==(m=e.indexOf(s,m+1))&&""===i(e.slice(a,m))){m=a;break}}if(l=e.slice(0,m),n)return!0;return h=t.now(),l=r(l),t(l)({type:"paragraph",children:p.tokenizeInline(l,h)})};var s="\n"},977:(t,e,n)=>{"use strict";var i=n(2139),r=n(633),o=n(6749);t.exports=h,h.locator=r;var s="link",a="full",l="[",c="\\",u="]";function h(t,e,n){var r,h,p,d,f,g,m,v,y=this,b=y.options.commonmark,w=e.charAt(0),k=0,C=e.length,x="",S="",E=s,M="shortcut";if("!"===w&&(E="image",S=w,w=e.charAt(++k)),w===l){for(k++,S+=w,g="",v=0;k<C;){if((w=e.charAt(k))===l)m=!0,v++;else if(w===u){if(!v)break;v--}w===c&&(g+=c,w=e.charAt(++k)),g+=w,k++}if(x=g,r=g,(w=e.charAt(k))===u){if(k++,x+=w,g="",!b)for(;k<C&&(w=e.charAt(k),i(w));)g+=w,k++;if((w=e.charAt(k))===l){for(h="",g+=w,k++;k<C&&(w=e.charAt(k))!==l&&w!==u;)w===c&&(h+=c,w=e.charAt(++k)),h+=w,k++;(w=e.charAt(k))===u?(M=h?a:"collapsed",g+=h+w,k++):h="",x+=g,g=""}else{if(!r)return;h=r}if(M===a||!m)return x=S+x,E===s&&y.inLink?null:!!n||((p=t.now()).column+=S.length,p.offset+=S.length,d={type:E+"Reference",identifier:o(h=M===a?h:r),label:h,referenceType:M},E===s?(f=y.enterLink(),d.children=y.tokenizeInline(r,p),f()):d.alt=y.decode.raw(y.unescape(r),p)||null,t(x)(d))}}}},1248:(t,e,n)=>{"use strict";var i=n(2745),r=n(2139),o=n(1016);t.exports=s,s.locator=o;function s(t,e,n){var o,s,a,l,c,u,h,p=0,d=e.charAt(p);if(!("*"!==d&&"_"!==d||e.charAt(++p)!==d||(s=this.options.pedantic,c=(a=d)+a,u=e.length,p++,l="",d="",s&&r(e.charAt(p)))))for(;p<u;){if(h=d,!((d=e.charAt(p))!==a||e.charAt(p+1)!==a||s&&r(h))&&(d=e.charAt(p+2))!==a){if(!i(l))return;return!!n||((o=t.now()).column+=2,o.offset+=2,t(c+l+c)({type:"strong",children:this.tokenizeInline(l,o)}))}s||"\\"!==d||(l+=d,d=e.charAt(++p)),l+=d,p++}}},308:(t,e,n)=>{"use strict";var i=n(2139);t.exports=function(t,e,n){var s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,x,S,E,M,L;if(!this.options.gfm)return;s=0,k=0,h=e.length+1,p=[];for(;s<h;){if(E=e.indexOf(r,s),M=e.indexOf("|",s+1),-1===E&&(E=e.length),-1===M||M>E){if(k<2)return;break}p.push(e.slice(s,E)),k++,s=E+1}c=p.join(r),a=p.splice(1,1)[0]||[],s=0,h=a.length,k--,l=!1,m=[];for(;s<h;){if("|"===(f=a.charAt(s))){if(g=null,!1===l){if(!1===L)return}else m.push(l),l=!1;L=!1}else if("-"===f)g=!0,l=l||null;else if(":"===f)l=l===o?"center":g&&null===l?"right":o;else if(!i(f))return;s++}!1!==l&&m.push(l);if(m.length<1)return;if(n)return!0;w=-1,x=[],S=t(c).reset({type:"table",align:m,children:x});for(;++w<k;){for(C=p[w],u={type:"tableRow",children:[]},w&&t(r),t(C).reset(u,S),h=C.length+1,s=0,d="",v="",y=!0;s<h;)"\t"!==(f=C.charAt(s))&&" "!==f?(""===f||"|"===f?y?t(f):(!v&&!f||y||(c=v,d.length>1&&(f?(c+=d.slice(0,-1),d=d.charAt(d.length-1)):(c+=d,d="")),b=t.now(),t(c)({type:"tableCell",children:this.tokenizeInline(v,b)},u)),t(d+f),d="",v=""):(d&&(v+=d,d=""),v+=f,"\\"===f&&s!==h-2&&(v+=C.charAt(s+1),s++)),y=!1,s++):(v?d+=f:t(f),s++);w||t(r+a)}return S};var r="\n",o="left"},8825:t=>{"use strict";t.exports=function(t,e,n){var i,r,o,s,a,l,c,u,h,p,d=this;if(n)return!0;i=d.inlineMethods,s=i.length,r=d.inlineTokenizers,o=-1,h=e.length;for(;++o<s;)"text"!==(u=i[o])&&r[u]&&((c=r[u].locator)||t.file.fail("Missing locator: `"+u+"`"),-1!==(l=c.call(d,e,1))&&l<h&&(h=l));a=e.slice(0,h),p=t.now(),d.decode(a,p,(function(e,n,i){t(i||e)({type:"text",value:e})}))}},8352:t=>{"use strict";t.exports=function(t,e,n){var i,r,o,s,a=-1,l=e.length+1,c="";for(;++a<l&&("\t"===(i=e.charAt(a))||" "===i);)c+=i;if("*"!==i&&"-"!==i&&"_"!==i)return;r=i,c+=i,o=1,s="";for(;++a<l;)if((i=e.charAt(a))===r)o++,c+=s+r,s="";else{if(" "!==i)return o>=3&&(!i||"\n"===i)?(c+=s,!!n||t(c)({type:"thematicBreak"})):void 0;s+=i}}},26:(t,e,n)=>{"use strict";var i=n(932),r=n(7574),o=n(6195),s=n(6260),a=n(2139),l=n(8637);t.exports=c,c.locator=l,c.notInLink=!0;function c(t,e,n){var l,c,u,h,p,d,f,g,m,v,y,b,w,k,C=this,x=C.options.gfm,S=C.inlineTokenizers,E=e.length,M=-1,L=!1;if(x){if("www."===e.slice(0,4))L=!0,h=4;else if("http://"===e.slice(0,7).toLowerCase())h=7;else{if("https://"!==e.slice(0,8).toLowerCase())return;h=8}for(M=h-1,u=h,l=[];h<E;)if(46!==(f=e.charCodeAt(h))){if(!o(f)&&!s(f)&&45!==f&&95!==f)break;h++}else{if(M===h-1)break;l.push(h),M=h,h++}if(46===f&&(l.pop(),h--),void 0!==l[0]&&(c=l.length<2?u:l[l.length-2]+1,-1===e.slice(c,h).indexOf("_"))){if(n)return!0;for(g=h,p=h;h<E&&(f=e.charCodeAt(h),!a(f)&&60!==f);)h++,33===f||42===f||44===f||46===f||58===f||63===f||95===f||126===f||(g=h);if(h=g,41===e.charCodeAt(h-1))for(d=e.slice(p,h),m=i(d,"("),v=i(d,")");v>m;)h=p+d.lastIndexOf(")"),d=e.slice(p,h),v--;if(59===e.charCodeAt(h-1)&&(h--,s(e.charCodeAt(h-1)))){for(g=h-2;s(e.charCodeAt(g));)g--;38===e.charCodeAt(g)&&(h=g)}return y=e.slice(0,h),w=r(y,{nonTerminated:!1}),L&&(w="http://"+w),k=C.enterLink(),C.inlineTokenizers={text:S.text},b=C.tokenizeInline(y,t.now()),C.inlineTokenizers=S,k(),t(y)({type:"link",title:null,url:w,children:b})}}}},831:t=>{"use strict";function e(t){var e,n;return"text"!==t.type||!t.position||(e=t.position.start,n=t.position.end,e.line!==n.line||n.column-e.column===t.value.length)}function n(t,e){return t.value+=e.value,t}function i(t,e){return this.options.commonmark||this.options.gfm?e:(t.children=t.children.concat(e.children),t)}t.exports=function(t){return function(r,o){var s,a,l,c,u,h=this,p=h.offset,d=[],f=h[t+"Methods"],g=h[t+"Tokenizers"],m=o.line,v=o.column;if(!r)return d;E.now=w,E.file=h.file,y("");for(;r;){for(s=-1,a=f.length,c=!1;++s<a&&(!(l=g[f[s]])||l.onlyAtStart&&!h.atStart||l.notInList&&h.inList||l.notInBlock&&h.inBlock||l.notInLink&&h.inLink||(u=r.length,l.apply(h,[E,r]),!(c=u!==r.length))););c||h.file.fail(new Error("Infinite loop"),E.now())}return h.eof=w(),d;function y(t){for(var e=-1,n=t.indexOf("\n");-1!==n;)m++,e=n,n=t.indexOf("\n",n+1);-1===e?v+=t.length:v=t.length-e,m in p&&(-1!==e?v+=p[m]:v<=p[m]&&(v=p[m]+1))}function b(){var t=[],e=m+1;return function(){for(var n=m+1;e<n;)t.push((p[e]||0)+1),e++;return t}}function w(){var t={line:m,column:v};return t.offset=h.toOffset(t),t}function k(t){this.start=t,this.end=w()}function C(t){r.slice(0,t.length)!==t&&h.file.fail(new Error("Incorrectly eaten value: please report this warning on https://git.io/vg5Ft"),w())}function x(){var t=w();return e;function e(e,n){var i=e.position,r=i?i.start:t,o=[],s=i&&i.end.line,a=t.line;if(e.position=new k(r),i&&n&&i.indent){if(o=i.indent,s<a){for(;++s<a;)o.push((p[s]||0)+1);o.push(t.column)}n=o.concat(n)}return e.position.indent=n||[],e}}function S(t,r){var o=r?r.children:d,s=o[o.length-1];return s&&t.type===s.type&&("text"===t.type||"blockquote"===t.type)&&e(s)&&e(t)&&(t=("text"===t.type?n:i).call(h,s,t)),t!==s&&o.push(t),h.atStart&&0!==d.length&&h.exitStart(),t}function E(t){var e=b(),n=x(),i=w();return C(t),o.reset=s,s.test=a,o.test=a,r=r.slice(t.length),y(t),e=e(),o;function o(t,i){return n(S(n(t),i),e)}function s(){var e=o.apply(null,arguments);return m=i.line,v=i.column,r=t+r,e}function a(){var e=n({});return m=i.line,v=i.column,r=t+r,e.position}}}}},7678:t=>{"use strict";t.exports=function(t,n){return function(i){var r,o=0,s=i.indexOf(e),a=t[n],l=[];for(;-1!==s;)l.push(i.slice(o,s)),o=s+1,(r=i.charAt(o))&&-1!==a.indexOf(r)||l.push(e),s=i.indexOf(e,o+1);return l.push(i.slice(o)),l.join("")}};var e="\\"},8930:t=>{"use strict";t.exports=function(t){var e,n=0,i=0,r=t.charAt(n),o={},s=0;for(;"\t"===r||" "===r;){for(i+=e="\t"===r?4:1,e>1&&(i=Math.floor(i/e)*e);s<i;)o[++s]=n;r=t.charAt(++n)}return{indent:i,stops:o}}},1537:(t,e)=>{"use strict";var n="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\u0000-\\u0020]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",i="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";e.g=new RegExp("^(?:"+n+"|"+i+")"),e._=new RegExp("^(?:"+n+"|"+i+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Za-z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)")},7901:t=>{"use strict";t.exports=function(t,e,n,i){var r,o,s=t.length,a=-1;for(;++a<s;)if(r=t[a],(void 0===(o=r[1]||{}).pedantic||o.pedantic===n.options.pedantic)&&(void 0===o.commonmark||o.commonmark===n.options.commonmark)&&e[r[0]].apply(n,i))return!0;return!1}},6749:(t,e,n)=>{"use strict";var i=n(9357);t.exports=function(t){return i(t).toLowerCase()}},9460:(t,e,n)=>{"use strict";var i=n(2745),r=n(6464),o=n(8930);t.exports=function(t,e){var n,s,a,l=t.split("\n"),c=l.length+1,u=1/0,h=[];l.unshift(r(" ",e)+"!");for(;c--;)if(s=o(l[c]),h[c]=s.stops,0!==i(l[c]).length){if(!s.indent){u=1/0;break}s.indent>0&&s.indent<u&&(u=s.indent)}if(u!==1/0)for(c=l.length;c--;){for(a=h[c],n=u;n&&!(n in a);)n--;l[c]=l[c].slice(a[n]+1)}return l.shift(),l.join("\n")}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};n.r(t),n.d(t,{DefaultBufferLength:()=>gn,MountedTree:()=>bn,NodeProp:()=>yn,NodeSet:()=>Cn,NodeType:()=>kn,Parser:()=>jn,Tree:()=>En,TreeBuffer:()=>Ln,TreeCursor:()=>Nn,TreeFragment:()=>qn,parseMixed:()=>_n});var e={};n.r(e),n.d(e,{Line:()=>Si,Text:()=>mi,codePointAt:()=>hi,codePointSize:()=>di,countColumn:()=>fi,findClusterBreak:()=>si,findColumn:()=>gi,fromCodePoint:()=>pi});var i={};n.r(i),n.d(i,{Annotation:()=>pr,AnnotationType:()=>dr,ChangeDesc:()=>Li,ChangeSet:()=>Di,CharCategory:()=>Sr,Compartment:()=>Zi,EditorSelection:()=>Bi,EditorState:()=>Lr,Facet:()=>Vi,MapMode:()=>Mi,Prec:()=>Qi,SelectionRange:()=>Ni,StateEffect:()=>gr,StateEffectType:()=>fr,StateField:()=>_i,Text:()=>mi,Transaction:()=>mr,combineConfig:()=>Dr});var r={};n.r(r),n.d(r,{Range:()=>Br,RangeSet:()=>Hr,RangeSetBuilder:()=>Vr,RangeValue:()=>Nr});var o={};n.r(o),n.d(o,{BidiSpan:()=>oa,BlockInfo:()=>el,BlockType:()=>ss,Decoration:()=>as,Direction:()=>_s,EditorView:()=>Nl,MatchDecorator:()=>fc,PluginField:()=>Os,PluginFieldProvider:()=>Ps,Range:()=>Br,ViewPlugin:()=>Ns,ViewUpdate:()=>Us,WidgetType:()=>os,__test:()=>Pc,drawSelection:()=>tc,dropCursor:()=>pc,highlightActiveLine:()=>Mc,highlightSpecialChars:()=>wc,keymap:()=>Gl,logException:()=>As,placeholder:()=>Tc,runScopeHandlers:()=>Yl,scrollPastEnd:()=>Ec});var s={};n.r(s),n.d(s,{IndentContext:()=>nu,LRLanguage:()=>Bc,Language:()=>Ic,LanguageDescription:()=>Jc,LanguageSupport:()=>Yc,ParseContext:()=>Uc,TreeIndentContext:()=>au,continuedIndent:()=>pu,defineLanguageFacet:()=>Fc,delimitedIndent:()=>cu,ensureSyntaxTree:()=>zc,flatIndent:()=>hu,foldInside:()=>mu,foldNodeProp:()=>gu,foldService:()=>fu,foldable:()=>vu,getIndentUnit:()=>Zc,getIndentation:()=>eu,indentNodeProp:()=>iu,indentOnInput:()=>du,indentService:()=>Qc,indentString:()=>tu,indentUnit:()=>Xc,language:()=>$c,languageDataProp:()=>Oc,syntaxParserRunning:()=>Vc,syntaxTree:()=>Rc,syntaxTreeAvailable:()=>Hc});var a={};n.r(a),n.d(a,{StreamLanguage:()=>ku,StringStream:()=>bu,ignoreSpellcheckToken:()=>Iu,lineClassNodeProp:()=>Pu,lineHighlighter:()=>Fu,tokenClassNodeProp:()=>Tu});var l={};n.r(l),n.d(l,{closeHoverTooltips:()=>pw,hasHoverTooltips:()=>uw,hoverTooltip:()=>cw,repositionTooltips:()=>dw,showTooltip:()=>rw,tooltips:()=>Xb});var c={};n.r(c),n.d(c,{CompletionContext:()=>fw,acceptCompletion:()=>Gw,autocompletion:()=>xk,clearSnippet:()=>uk,closeCompletion:()=>$w,completeAnyWord:()=>Ck,completeFromList:()=>mw,completionKeymap:()=>Sk,completionStatus:()=>Mk,currentCompletions:()=>Lk,ifIn:()=>vw,ifNotIn:()=>yw,moveCompletionSelection:()=>Ww,nextSnippetField:()=>hk,pickedCompletion:()=>Cw,prevSnippetField:()=>pk,selectedCompletion:()=>Dk,snippet:()=>lk,snippetCompletion:()=>mk,snippetKeymap:()=>fk,startCompletion:()=>Kw});var u={};n.r(u),n.d(u,{closeBrackets:()=>Ik,closeBracketsKeymap:()=>Vk,deleteBracketPair:()=>Hk,insertBracket:()=>qk});var h={};n.r(h),n.d(h,{collab:()=>Zk,getClientID:()=>iC,getSyncedVersion:()=>nC,receiveUpdates:()=>tC,sendableUpdates:()=>eC});var p={};n.r(p),n.d(p,{bracketMatching:()=>uC,matchBrackets:()=>pC});var d={};n.r(d),n.d(d,{copyLineDown:()=>Yx,copyLineUp:()=>$x,cursorCharBackward:()=>CC,cursorCharForward:()=>kC,cursorCharLeft:()=>bC,cursorCharRight:()=>wC,cursorDocEnd:()=>xx,cursorDocStart:()=>Cx,cursorGroupBackward:()=>LC,cursorGroupForward:()=>MC,cursorGroupLeft:()=>SC,cursorGroupRight:()=>EC,cursorLineBoundaryBackward:()=>_C,cursorLineBoundaryForward:()=>UC,cursorLineDown:()=>zC,cursorLineEnd:()=>GC,cursorLineStart:()=>WC,cursorLineUp:()=>RC,cursorMatchingBracket:()=>$C,cursorPageDown:()=>qC,cursorPageUp:()=>VC,cursorSubwordBackward:()=>PC,cursorSubwordForward:()=>TC,cursorSyntaxLeft:()=>IC,cursorSyntaxRight:()=>NC,defaultKeymap:()=>lS,deleteCharBackward:()=>Fx,deleteCharForward:()=>Ix,deleteGroupBackward:()=>Bx,deleteGroupForward:()=>Rx,deleteLine:()=>Jx,deleteToLineEnd:()=>zx,deleteToLineStart:()=>Hx,deleteTrailingWhitespace:()=>Vx,emacsStyleKeymap:()=>sS,indentLess:()=>rS,indentMore:()=>iS,indentSelection:()=>nS,indentWithTab:()=>cS,insertBlankLine:()=>Zx,insertNewline:()=>Qx,insertNewlineAndIndent:()=>Xx,insertTab:()=>oS,moveLineDown:()=>Gx,moveLineUp:()=>Wx,selectAll:()=>Mx,selectCharBackward:()=>ex,selectCharForward:()=>tx,selectCharLeft:()=>XC,selectCharRight:()=>ZC,selectDocEnd:()=>Ex,selectDocStart:()=>Sx,selectGroupBackward:()=>sx,selectGroupForward:()=>ox,selectGroupLeft:()=>ix,selectGroupRight:()=>rx,selectLine:()=>Lx,selectLineBoundaryBackward:()=>bx,selectLineBoundaryForward:()=>yx,selectLineDown:()=>fx,selectLineEnd:()=>kx,selectLineStart:()=>wx,selectLineUp:()=>dx,selectMatchingBracket:()=>YC,selectPageDown:()=>vx,selectPageUp:()=>mx,selectParentSyntax:()=>Dx,selectSubwordBackward:()=>cx,selectSubwordForward:()=>lx,selectSyntaxLeft:()=>ux,selectSyntaxRight:()=>hx,simplifySelection:()=>Ax,splitLine:()=>qx,standardKeymap:()=>aS,transposeChars:()=>jx});var f={};n.r(f),n.d(f,{blockComment:()=>mS,blockUncomment:()=>vS,commentKeymap:()=>yS,lineComment:()=>dS,lineUncomment:()=>fS,toggleBlockComment:()=>gS,toggleComment:()=>uS,toggleLineComment:()=>pS});var g={};n.r(g),n.d(g,{GutterMarker:()=>CS,gutter:()=>MS,gutterLineClass:()=>xS,gutters:()=>AS,highlightActiveLineGutter:()=>GS,lineNumberMarkers:()=>RS,lineNumbers:()=>jS});var m={};n.r(m),n.d(m,{codeFolding:()=>cE,foldAll:()=>rE,foldCode:()=>eE,foldEffect:()=>$S,foldGutter:()=>dE,foldKeymap:()=>sE,foldedRanges:()=>XS,unfoldAll:()=>oE,unfoldCode:()=>nE,unfoldEffect:()=>YS});var v={};n.r(v),n.d(v,{HighlightStyle:()=>ME,Tag:()=>mE,classHighlightStyle:()=>QE,defaultHighlightStyle:()=>JE,highlightTree:()=>LE,styleTags:()=>wE,tags:()=>YE});var y={};n.r(y),n.d(y,{history:()=>iM,historyField:()=>rM,historyKeymap:()=>CM,invertedEffects:()=>tM,isolateHistory:()=>ZE,redo:()=>aM,redoDepth:()=>pM,redoSelection:()=>cM,undo:()=>sM,undoDepth:()=>hM,undoSelection:()=>lM});var b={};n.r(b),n.d(b,{getPanel:()=>EM,panels:()=>SM,showPanel:()=>TM});var w={};n.r(w),n.d(w,{closeLintPanel:()=>KM,diagnosticCount:()=>jM,forceLinting:()=>ZM,lintGutter:()=>gL,lintKeymap:()=>YM,linter:()=>XM,nextDiagnostic:()=>$M,openLintPanel:()=>GM,setDiagnostics:()=>RM,setDiagnosticsEffect:()=>zM});var k={};n.r(k),n.d(k,{rectangularSelection:()=>bL});var C={};n.r(C),n.d(C,{RegExpCursor:()=>SL,SearchCursor:()=>kL,SearchQuery:()=>UL,closeSearchPanel:()=>hD,findNext:()=>nD,findPrevious:()=>iD,getSearchQuery:()=>JL,gotoLine:()=>PL,highlightSelectionMatches:()=>NL,openSearchPanel:()=>uD,replaceAll:()=>aD,replaceNext:()=>sD,searchConfig:()=>jL,searchKeymap:()=>pD,selectMatches:()=>rD,selectNextOccurrence:()=>VL,selectSelectionMatches:()=>oD,setSearchQuery:()=>KL});var x={};n.r(x),n.d(x,{ContextTracker:()=>qD,ExternalTokenizer:()=>DD,InputStream:()=>MD,LRParser:()=>jD,Stack:()=>wD});var S={};n.r(S),n.d(S,{AbstractTextComponent:()=>IA,App:()=>lq,BaseComponent:()=>AA,ButtonComponent:()=>PA,Component:()=>Vg,DropdownComponent:()=>HA,EditableFileView:()=>_b,Editor:()=>Zu,EditorSuggest:()=>ZI,Events:()=>sb,ExtraButtonComponent:()=>OA,FileManager:()=>wN,FileSystemAdapter:()=>LF,FileView:()=>Ub,FuzzySuggestModal:()=>fN,HoverPopover:()=>dF,ItemView:()=>Vb,Keymap:()=>Bb,MarkdownPreviewRenderer:()=>Wy,MarkdownPreviewSection:()=>qy,MarkdownPreviewView:()=>wB,MarkdownRenderChild:()=>Vy,MarkdownRenderer:()=>mB,MarkdownSourceView:()=>TP,MarkdownView:()=>rR,Menu:()=>zb,MenuItem:()=>Rb,MetadataCache:()=>LA,Modal:()=>KD,MomentFormatComponent:()=>zA,Notice:()=>jb,Platform:()=>By,Plugin:()=>FN,PluginSettingTab:()=>IN,PopoverState:()=>nF,PopoverSuggest:()=>TI,Scope:()=>Nb,Setting:()=>DA,SettingTab:()=>pN,SliderComponent:()=>VA,SuggestModal:()=>dN,TAbstractFile:()=>lb,TFile:()=>cb,TFolder:()=>ub,TextAreaComponent:()=>RA,TextComponent:()=>NA,TextFileView:()=>iF,ToggleComponent:()=>FA,ValueComponent:()=>TA,Vault:()=>hb,View:()=>Hb,ViewRegistry:()=>BF,Workspace:()=>hN,WorkspaceItem:()=>rI,WorkspaceLeaf:()=>cI,WorkspaceParent:()=>oI,WorkspaceRibbon:()=>uN,WorkspaceSidedock:()=>lI,WorkspaceSplit:()=>sI,WorkspaceTabs:()=>aI,addIcon:()=>Py,debounce:()=>De,editorEditorField:()=>IO,editorViewField:()=>NO,finishRenderMath:()=>Kh,fuzzySearch:()=>PT,getAllTags:()=>iA,getLinkpath:()=>ZD,htmlToMarkdown:()=>GD,iterateCacheRefs:()=>eA,iterateRefs:()=>nA,loadMathJax:()=>qh,loadMermaid:()=>Rh,loadPdfJs:()=>Ih,loadPrism:()=>Hh,moment:()=>xN,normalizePath:()=>ne,parseFrontMatterAliases:()=>Pg,parseFrontMatterEntry:()=>Ag,parseFrontMatterStringArray:()=>Tg,parseFrontMatterTags:()=>Og,parseLinktext:()=>tA,parseYaml:()=>kN,prepareFuzzySearch:()=>DT,prepareQuery:()=>LT,prepareSimpleSearch:()=>NT,renderMatches:()=>RT,renderMath:()=>jh,renderResults:()=>BT,request:()=>SN,resolveSubpath:()=>oA,sanitizeHTMLToDom:()=>zg,setIcon:()=>Ty,sortSearchResults:()=>OT,stringifyYaml:()=>CN,stripHeading:()=>rA});var E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function M(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var L=function(){return(L=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function D(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function A(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function T(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t}function O(t){return this instanceof O?(this.v=t,this):new O(t)}function F(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){o.push([t,e,n,i])>1||a(t,e)}))})}function a(t,e){try{!function(t){t.value instanceof O?Promise.resolve(t.value.v).then(l,c):u(o[0][2],t)}(r[t](e))}catch(t){u(o[0][3],t)}}function l(t){a("next",t)}function c(t){a("throw",t)}function u(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function I(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=T(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}Object.create;function N(t,e,n){Object.defineProperty(t,e,{value:n,enumerable:!1,configurable:!0,writable:!0})}for(var B=window,R=0,z=["TouchEvent"];R<z.length;R++){var H=z[R];void 0===B[H]&&(B[H]=function(){})}Object.isEmpty||N(Object,"isEmpty",(function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0})),Object.each||(Object.each=function(t,e,n){for(var i in t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i))return!1;return!0}),Array.prototype.first||N(Array.prototype,"first",(function(){if(0!==this.length)return this[0]})),Array.prototype.last||N(Array.prototype,"last",(function(){if(0!==this.length)return this[this.length-1]})),Array.prototype.contains||N(Array.prototype,"contains",(function(t){return-1!==this.indexOf(t)})),Array.prototype.remove||N(Array.prototype,"remove",(function(t){for(var e=this.length-1;e>=0;e--)this[e]===t&&this.splice(e,1)})),Array.prototype.shuffle||N(Array.prototype,"shuffle",(function(){for(var t,e,n=this.length;0!==n;)e=Math.floor(Math.random()*n),t=this[n-=1],this[n]=this[e],this[e]=t;return this})),Math.clamp||(Math.clamp=function(t,e,n){return Math.min(Math.max(t,e),n)}),Math.square||(Math.square=function(t){return t*t}),String.isString||(String.isString=function(t){return"string"==typeof t||t instanceof String}),String.prototype.contains||(String.prototype.contains=function(t){return-1!==this.indexOf(t)}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=void 0===e||e>this.length?this.length:e;return this.substring(n-t.length,n)===t}),String.prototype.format||(String.prototype.format=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.replace(/{(\d+)}/g,(function(e,n){return void 0!==t[n]?t[n]:e}))}),Number.isNumber||N(Number,"isNumber",(function(t){return"number"==typeof t})),N(window,"isBoolean",(function(t){return"boolean"==typeof t}));var V=function(t){var e=t.nodeType;if(1===e||9===e||11===e){if("string"==typeof t.textContent)return t.textContent;for(var n=[],i=t.firstChild;i;i=i.nextSibling)n.push(V(i));return n.join("")}return(3===e||4===e)&&t.nodeValue||""};Element.prototype.getText=function(){return V(this)},Element.prototype.setText=function(t){!function(t,e){if(String.isString(e)){var n=t.nodeType;1!==n&&9!==n&&11!==n||(t.textContent=e)}else t.empty(),t.appendChild(e)}(this,t)},Element.prototype.addClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addClasses(t)},Element.prototype.addClasses=function(t){for(var e=0;e<t.length;e++)this.classList.add(t[e])},Element.prototype.removeClass=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeClasses(t)},Element.prototype.removeClasses=function(t){for(var e=0;e<t.length;e++)this.classList.remove(t[e])},Element.prototype.toggleClass=function(t,e){t instanceof Array||(t=[t]),e?this.addClasses(t):this.removeClasses(t)},Element.prototype.hasClass=function(t){return this.classList.contains(t)},[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(t){N(t,"prepend",(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=document.createDocumentFragment(),i=0,r=t;i<r.length;i++){var o=r[i];n.appendChild(o instanceof Node?o:document.createTextNode(String(o)))}this.insertBefore(n,this.firstChild)}))})),Node.prototype.detach=function(){this.parentNode&&this.parentNode.removeChild(this)},Node.prototype.empty=function(){for(;this.lastChild;)this.removeChild(this.lastChild)},Node.prototype.insertAfter=function(t){t.parentNode&&t.parentNode.insertBefore(this,t.nextSibling)},Node.prototype.indexOf=function(t){return Array.prototype.indexOf.call(this.childNodes,t)},Node.prototype.setChildrenInPlace=function(t){for(var e=this.firstChild,n=new Set(t),i=0,r=t;i<r.length;i++){for(var o=r[i];e&&!n.has(e);){var s=e;e=e.nextSibling,this.removeChild(s)}o!==e?this.insertBefore(o,e):e=e.nextSibling}for(;e;){s=e;e=e.nextSibling,this.removeChild(s)}},Node.prototype.appendText=function(t){this.appendChild(document.createTextNode(t))},Element.prototype.setAttr=function(t,e){this.setAttribute(t,String(e))},Element.prototype.setAttrs=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];null!==n&&this.setAttr(e,n)}},Element.prototype.getAttr=Element.prototype.getAttribute,N(Element.prototype,"matchParent",(function(t,e){if(this.matches(t))return this;if(this===e)return null;var n=this.parentElement;return n?n.matchParent(t,e):null})),HTMLElement.prototype.show||(HTMLElement.prototype.show=function(){"none"===this.style.display&&(this.style.display=this.getAttribute("data-display")||"",this.removeAttribute("data-display"))}),HTMLElement.prototype.hide||(HTMLElement.prototype.hide=function(){var t=this.style.display;"none"!==t&&(this.style.display="none",t?this.setAttribute("data-display",t):this.removeAttribute("data-display"))}),HTMLElement.prototype.toggle||(HTMLElement.prototype.toggle=function(t){t?this.show():this.hide()}),HTMLElement.prototype.toggleVisibility||(HTMLElement.prototype.toggleVisibility=function(t){this.style.visibility=t?"":"hidden"}),N(HTMLElement.prototype,"isShown",(function(){return!!this.offsetParent})),window.fish=function(t){return document.querySelector(t)},window.fishAll=function(t){return Array.prototype.slice.call(document.querySelectorAll(t))},Element.prototype.find=function(t){return this.querySelector(t)},Element.prototype.findAll=function(t){return Array.prototype.slice.call(this.querySelectorAll(t))},Element.prototype.findAllSelf=function(t){var e=Array.prototype.slice.call(this.querySelectorAll(t));return this.matches(t)&&e.unshift(this),e},Node.prototype.createEl=function(t,e,n){return"string"==typeof e&&(e={cls:e}),(e=e||{}).parent=this,createEl(t,e,n)},Node.prototype.createDiv=function(t,e){return this.createEl("div",t,e)},Node.prototype.createSpan=function(t,e){return this.createEl("span",t,e)},window.createEl=function(t,e,n){var i=document.createElement(t);"string"==typeof e&&(e={cls:e});var r=e||{},o=r.cls,s=r.text,a=r.attr,l=r.title,c=r.value,u=r.type,h=r.parent,p=r.prepend,d=r.href;return o&&(Array.isArray(o)?i.className=o.join(" "):i.className=o),s&&i.setText(s),a&&i.setAttrs(a),l&&(i.title=l),c&&(i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLOptionElement)&&(i.value=c),u&&i instanceof HTMLInputElement&&(i.type=u),u&&i instanceof HTMLStyleElement&&i.setAttribute("type",u),d&&(i instanceof HTMLAnchorElement||i instanceof HTMLLinkElement)&&(i.href=d),n&&n(i),h&&(p?h.insertBefore(i,h.firstChild):h.appendChild(i)),i},window.createDiv=function(t,e){return createEl("div",t,e)},window.createSpan=function(t,e){return createEl("span",t,e)},window.createFragment=function(t){var e=document.createDocumentFragment();return t&&t(e),e};var q=function(t,e,n,i){var r=this._EVENTS;r||(r={},this._EVENTS=r);var o=r[t];o||(o=[],r[t]=o);var s=function(t){var i=t.target;if(i instanceof Element){var r=i.matchParent(e,t.currentTarget);r&&n.call(this,t,r)}};o.push({selector:e,listener:n,options:i,callback:s}),this.addEventListener(t,s,i)},j=function(t,e,n,i){var r=this,o=this._EVENTS;if(o){var s=o[t];s&&(o[t]=s.filter((function(o){if(o.selector===e&&o.listener===n&&o.options===i){var s=o.callback;return r.removeEventListener(t,s,i),!1}return!0})))}};HTMLElement.prototype.on=q,HTMLElement.prototype.off=j,Document.prototype.on=q,Document.prototype.off=j,HTMLElement.prototype.onClickEvent=function(t,e){this.addEventListener("click",t,e),this.addEventListener("auxclick",t,e)},HTMLElement.prototype.trigger=function(t){var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),this.dispatchEvent(e)};var U=new WeakMap;function _(t){var e=t.method,n=t.url,i=t.success,r=t.error,o=t.data,s=t.headers,a=t.withCredentials;e=e||"GET";var l=new XMLHttpRequest;if(t.req=l,l.open(e,n,!0),l.onload=function(){var t=l.status,e=l.response;t>=200&&t<400?i&&i(e,l):r&&r(e,l)},l.onerror=function(t){r&&r(t,l)},s)for(var c in s)s.hasOwnProperty(c)&&l.setRequestHeader(c,s[c]);l.withCredentials=a||!1,o?(void 0===a&&(l.withCredentials=!0),String.isString(o)?l.send(o):o instanceof ArrayBuffer?(l.setRequestHeader("Content-Type","application/octet-stream"),l.send(o)):(l.setRequestHeader("Content-Type","application/json; charset=utf-8"),l.send(JSON.stringify(o)))):l.send()}function W(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function G(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function K(t){return G((new TextEncoder).encode(t))}function $(t){return(new TextDecoder).decode(new Uint8Array(t))}function Y(t){for(var e=window.atob(t),n=e.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.charCodeAt(r);return i.buffer}function J(t){return Q(new Uint8Array(t))}function Q(t){for(var e=[],n=t.byteLength,i=0;i<n;i++)e.push(String.fromCharCode(t[i]));return window.btoa(e.join(""))}function X(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=et,[4,Z(t)];case 1:return[2,e.apply(void 0,[n.sent()])]}}))}))}function Z(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){return[2,crypto.subtle.digest("SHA-256",new Uint8Array(t))]}))}))}function tt(t){for(var e=t.length/2,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=parseInt(t.substr(2*r,2),16);return n}function et(t){for(var e=new Uint8Array(t),n=[],i=0;i<e.length;i++){var r=e[i];n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")}HTMLElement.prototype.onNodeInserted=function(t,e){var n=this,i=function(n){e&&r(),"node-inserted"===n.animationName&&t()},r=function(){n.removeEventListener("animationstart",i);var t=(U.get(n)||0)-1;t<=0?(U.delete(n),n.removeClass("node-insert-event")):U.set(n,t)};return U.set(this,(U.get(this)||0)+1),this.addClass("node-insert-event"),this.addEventListener("animationstart",i),r},window.ajax=_,window.ajaxPromise=function(t){return new Promise((function(e,n){t.success=e,t.error=function(t,e){return n(e)},_(t)}))},window.ready=function(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)};var nt="AES-GCM";function it(t){return crypto.subtle.importKey("raw",t,nt,!1,["encrypt","decrypt"])}function rt(t,e,n){return D(this,void 0,Promise,(function(){var i,r,o;return A(this,(function(s){switch(s.label){case 0:return n||(n=crypto.getRandomValues(new Uint8Array(12))),[4,crypto.subtle.encrypt({name:nt,iv:n},e,t)];case 1:return i=s.sent(),r=new ArrayBuffer(n.byteLength+i.byteLength),(o=new Uint8Array(r)).set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),[2,r]}}))}))}function ot(t,e){return D(this,void 0,Promise,(function(){var n,i;return A(this,(function(r){switch(r.label){case 0:if(t.byteLength<12)throw new Error("Encrypted data is bad");return 12===t.byteLength?[2,new ArrayBuffer(0)]:(n=new Uint8Array(t,0,12),i=new Uint8Array(t,12),[4,crypto.subtle.decrypt({name:nt,iv:n},e,i)]);case 1:return[2,r.sent()]}}))}))}var st=32768,at={N:st,r:8,p:1,maxmem:67108864};function lt(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return t=t.normalize("NFKC"),e=e.normalize("NFKC"),(n=window.require&&window.require("crypto"))?[4,new Promise((function(i,r){n.scrypt(Buffer.from(t,"utf8"),Buffer.from(e,"utf8"),32,at,(function(t,e){t?r(t):i(e)}))}))]:[3,2];case 1:return[2,W(i.sent())];case 2:return[4,window.scrypt.scrypt(new Uint8Array(K(t)),new Uint8Array(K(e)),st,8,1,32)];case 3:return[2,G(i.sent())]}}))}))}function ct(t){if(t<=0)return"0 B";for(var e=["B","KB","MB","GB","TB","PB"],n=e.length-1,i=0;i<e.length;i++)if(t<Math.pow(1024,i+1)){n=i;break}return function(t,e,n,i){void 0===e&&(e=2);void 0===n&&(n=".");void 0===i&&(i=",");var r=t<0?"-":"";t=Math.abs(t);var o=parseInt(t.toFixed(e),10)+"",s=o.length>3?o.length%3:0;return r+(s?o.substr(0,s)+i:"")+o.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+i)+(e?n+Math.abs(t-Math.floor(t)).toFixed(e).slice(2):"")}(t/Math.pow(1024,n),0===n?0:2)+" "+e[n]}var ut="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*?()";var ht=function(){var t=navigator.appVersion;return-1!==t.indexOf("Win")?"Windows":-1!==t.indexOf("Mac")?"MacOS":-1!==t.indexOf("X11")||-1!==t.indexOf("Linux")?"Linux":"Unknown OS"}(),pt=navigator.userAgent.toLowerCase(),dt="MacOS"===ht,ft="Windows"===ht,gt="Linux"===ht,mt=pt.indexOf("firefox")>-1,vt=/^((?!chrome|android).)*safari/i.test(pt);function yt(t){return dt&&0===t.button&&t.ctrlKey}var bt=Object.prototype.hasOwnProperty;function wt(t,e){return bt.call(t,e)}var kt=/&(amp|lt|gt|quot);/g,Ct={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};function xt(t){return Ct[t]}function St(t){return t.replace(kt,xt)}var Et=/[.?*+^$[\]\\(){}|-]/g;function Mt(t){return t.replace(Et,"\\$&")}function Lt(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}var Dt=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/;var At=function(){function t(){this.data={}}return t.prototype.add=function(t,e){var n=this.data,i=n[t];i||(i=[],n[t]=i),i.contains(e)||i.push(e)},t.prototype.remove=function(t,e){var n=this.data,i=n[t];i&&(i.remove(e),0===i.length&&delete n[t])},t.prototype.removeKey=function(t){delete this.data[t]},t.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},t.prototype.keys=function(){return Object.keys(this.data)},t.prototype.clear=function(t){delete this.data[t]},t.prototype.clearAll=function(){this.data={}},t.prototype.contains=function(t,e){var n=this.data[t];return n&&n.contains(e)},t.prototype.count=function(){var t=this.data,e=0;for(var n in t)t.hasOwnProperty(n)&&(e+=t[n].length);return e},t}();function Tt(t){for(var e=[],n=0;n<t;n++)e.push((16*Math.random()|0).toString(16));return e.join("")}function Pt(t,e){for(var n=0,i=0;i<e&&-1!==(i=t.indexOf("\n",i))&&!(i>=e);)i++,n++;return n}var Ot="#^[]|",Ft=ft?'*"\\/<>:|?':"\\/:",It=Ft.split("").join(" "),Nt=Ot.split("").join(" "),Bt=new RegExp("["+Mt(Ft)+"]"),Rt=new RegExp("["+Mt(Ot)+"]");function zt(t){return t.split("/").every((function(t){return!Bt.test(t)}))}var Ht=/\u00A0/g;var Vt=["bmp","png","jpg","jpeg","gif","svg","webp"],qt=["mp3","wav","m4a","3gp","flac","ogg","oga"],jt=["mp4","webm","ogv"],Ut=["pdf"],_t=["md"],Wt=["json","css","js"],Gt=[].concat(Vt,qt,jt,Ut,_t);function Kt(t){var e=t.lastIndexOf("/");return-1===e?t:t.slice(e+1)}function $t(t){var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}function Yt(t){for(;t;){if(Kt(t).startsWith("."))return!0;t=$t(t)}return!1}function Jt(t){var e=Kt(t),n=e.lastIndexOf(".");return-1===n||n===e.length-1||0===n?e:e.substr(0,n)}function Qt(t){var e=t.lastIndexOf(".");return-1===e||e===t.length-1||0===e?t:t.substr(0,e)}function Xt(t){var e=t.lastIndexOf(".");return-1===e||e===t.length-1||0===e?"":t.substr(e+1).toLowerCase()}function Zt(t,e){return e?t+"."+e:t}function te(t,e){return Xt(t)===e}function ee(t){return Gt.contains(t)}function ne(t){return(e=ie(t),e.replace(Ht," ")).normalize("NFC");var e}function ie(t){return""===(t=t.replace(/([\\/])+/g,"/").replace(/(^\/+|\/+$)/g,""))&&(t="/"),t}function re(t){var e=Kt(t);return"md"===Xt(e)?Jt(e):e}function oe(t){return"md"===Xt(Kt(t))?Qt(t):t}var se=window.require;function ae(t){return se&&se(t)}function le(t){var e=ae("electron");e&&t(e)}function ce(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){return(e=ae("fs"))&&e.existsSync(t)?[2,e.promises.readFile(t)]:[2,null]}))}))}function ue(t){return D(this,void 0,Promise,(function(){var e,n;return A(this,(function(i){if(!(e=ae("electron")))throw new Error("Not electron");return n=e.ipcRenderer,[2,new Promise((function(e,i){var r=Tt(16);n.once(r,(function(t,n){n.body?e(n.body):i(n.error)})),n.send("request-url",r,t)}))]}))}))}var he=!1;le((function(t){he=t.ipcRenderer.sendSync("is-dev")}));var pe=he;function de(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:return(t=ae("electron"))?(e=t.remote.clipboard,(n=e.readImage())&&!n.isEmpty()?(i=n.toPNG(),[2,{name:"Pasted image",extension:"png",data:G(i)}]):(r="","Windows"===ht?r=e.readBuffer("FileNameW").toString("ucs2").replace("\0",""):"MacOS"===ht&&(r=e.read("public.file-url"))&&(r=r.replace("file://",""),r=decodeURI(r)),r?(o=Kt(ne(r)),s=Xt(o),a=Jt(o),[4,ce(r)]):[2,null])):[2,null];case 1:return(l=c.sent())?[2,{filepath:r,name:a,extension:s,data:l}]:[2,null]}}))}))}pe||le((function(t){try{t.deprecate.setHandler((function(){}))}catch(t){}}));var fe="language",ge="en",me={en:"English",zh:"简体中文","zh-TW":"繁體中文",ru:"Pусский",ko:"한국어",it:"Italiano",id:"Bahasa Indonesia",ro:"Română","pt-BR":"Portugues do Brasil",cz:"čeština",de:"Deutsch",es:"Español",fr:"Français",no:"Norsk",pl:"język polski",pt:"Português",ja:"日本語",da:"Dansk",uk:"Український",sq:"Shqip",th:"ไทย",tr:"Türkçe (kısmi)",hi:"हिन्दी (आंशिक)",nl:"Nederlands (gedeeltelijk)",ar:"العربية (جزئي)"},ve={interpolation:{prefix:"{{{{",suffix:"}}}}"}},ye="default";i18next.init({fallbackLng:ge,ns:[ye],defaultNS:ye,initImmediate:!1,interpolation:{escapeValue:!1}});var be={setting:{options:"Options",plugin:"Plugin","builtin-plugins":"Core plugins","plugin-options":"Plugin options","folder-path-example-placeholder":"Example: folder 1/folder 2","file-path-example-placeholder":"Example: folder/note","msg-restart-required":"Changing this option requires a restart to take effect.",editor:{name:"Editor","section-general":"General","section-behavior":"Behavior","section-display":"Display","option-spellcheck":"Spellcheck","option-spellcheck-description":"Turn on the spellchecker.","spellcheck-languages":"Spellcheck languages","spellcheck-languages-description":"Choose the languages for the spellchecker to use.","spellcheck-languages-mac-description":"The native spellchecker will automatically detect the language being used for you on macOS.","spellcheck-dict":"Spellcheck dictionary","spellcheck-dict-empty":"The spellcheck dictionary is empty.","option-readable-line-length":"Readable line length","option-readable-line-description":"Limit maximum line length. Less content fits onscreen, but long blocks of text are more readable.","option-strict-line-break":"Strict line breaks","option-strict-line-break-description":"Markdown specs ignore single line breaks in reading view. Turn this off to make single line breaks visible.","option-show-frontmatter":"Show frontmatter","option-show-frontmatter-description":"In reading view, show frontmatter as a code block. Turn off to hide frontmatter section.","option-auto-pair-brackets":"Auto pair brackets","option-auto-pair-brackets-description":"Pair brackets and quotes automatically.","option-auto-pair-markdown":"Auto pair Markdown syntax","option-auto-pair-markdown-description":"Pair symbols automatically for bold and italic.","option-smart-indent-lists":"Smart indent lists","option-smart-indent-lists-description":"Automatically set indentation and place list items correctly.","option-fold-heading":"Fold heading","option-fold-heading-description":"Lets you fold all content under a heading.","option-fold-indent":"Fold indent","option-fold-indent-description":"Lets you fold part of an indentation, such as lists.","option-default-new-pane-view":"Default new pane view","option-default-new-pane-view-description":"The default view a new pane gets opened in.","option-default-new-pane-view-editing":"Editing view","option-default-new-pane-view-reading":"Reading view","option-default-editing-mode":"Default editing mode","option-default-editing-mode-description":"The default editing mode a new pane will start with.","option-default-editing-mode-source":"Source mode","option-default-editing-mode-live-preview":"Live Preview","option-legacy-editor":"Use legacy editor","option-legacy-editor-description":"The legacy editor does not support Live Preview, but has better compatibility with some older plugins, themes, and snippets. To enable Live Preview, disable this option.","option-show-line-number":"Show line number","option-show-line-number-description":"Show line number in the gutter.","option-use-tabs":"Use tabs","option-use-tabs-description":"Use tabs to indent by pressing the “Tab” key. Turn this off to indent using up to 4 spaces.","option-tab-size":"Tab size","option-tab-size-description":"Number of spaces a tab character will render as.","option-line-wrap":"Line wrap","option-line-wrap-description":"Wrap long lines to fit within the window, without having to scroll from left to right.","option-rtl":"Right-to-left (RTL)","option-rtl-description":"Sets the text direction of notes to display in right-to-left.","option-auto-convert-html":"Auto convert HTML","option-auto-convert-html-description":"Automatically convert HTML to Markdown when pasting and drag-and-drop from webpages. Use Ctrl/Cmd+Shift+V to paste without conversion.","option-vim-key-bindings":"Vim key bindings","option-vim-key-bindings-description":"Allows you to use Vim key bindings when editing.","option-vim-key-bindings-mobile":"On mobile devices, this setting is per-device and is not synchronized through the config file.","option-emacsy-keys":"Legacy Emacs-style key bindings for macOS","option-emacsy-keys-description":"Allows you to use the additional Emacs-style navigation keys, which are standard on macOS, but may interfere with some key operations. Not available while in Vim mode.","label-confirm-enable-vim":"Confirm entering Vim mode","label-vim-warning":"Vim mode is for efficient text editing but can be quite counter-intuitive. If you're not familiar with Vim, this option might make it look like Obsidian has stopped working.","label-vim-test":"To verify that you know your way around Vim, please enter the command to quit Vim without saving below:","label-vim-your-answer":"Your answer","placeholder-enter-command":"Enter command...","button-confirm-enable-vim":"Let me enable Vim","msg-vim-mode-enabled":"Command is correct. Vim mode now enabled.","msg-vim-mode-not-enabled":"Command is incorrect. Vim mode remains disabled to protect you.","msg-vim-mode-please-enter-command":"Please enter the command to enable Vim mode","button-turn-on-live-preview":"Turn on Live Preview","label-live-preview-update":"Live Preview update","label-live-preview-update-1":"With this update, Obsidian now offers the new Live Preview mode.","label-live-preview-update-2":"Live Preview lets you preview your notes in the same view that you're writing them in, so you don't need to keep switching between Edit and Preview.","label-live-preview-update-3":"You can see Live Preview in action below:","label-live-preview-update-4":"After turning it on, you can turn it off anytime if you decide you don't like it."},file:{name:"Files & Links","option-confirm-file-deletion":"Confirm file deletion","option-confirm-file-deletion-description":"Prompt before file deletion.","option-delete-destination":"Deleted files","option-delete-destination-description":"What happens to a file after you delete it.","option-choice-system-trash":"Move to system trash","option-choice-vault-trash":"Move to Obsidian trash (.trash folder)","option-choice-permanent-delete":"Permanently delete","option-always-update-links":"Automatically update internal links","option-always-update-links-description":"Turn off to be prompted to update links after renaming a file.","option-new-note-location":"Default location for new notes","option-new-note-location-description":"Where newly created notes are placed. Plugin settings will override this.","option-choice-vault-root":"Vault folder","option-choice-current-folder":"Same folder as current file","option-choice-specified-folder":"In the folder specified below","option-new-file-folder-path":"Folder to create new notes in","option-new-file-folder-path-description":"Newly created notes will appear under this folder. Plugin settings will override this.","option-use-wiki-links":"Use [[Wikilinks]]","option-use-wiki-links-description":"Auto-generate Wikilinks for [[links]] and ![[images]] instead of Markdown links and images. Disable this option to generate Markdown links instead.","option-show-unsupported-files":"Detect all file extensions","option-show-unsupported-files-description":"Show files with any extension even if Obsidian can't open them natively, so that you can link to them and see them in File Explorer and Quick Switcher.","option-link-autocompleted-format":"New link format","option-link-autocompleted-format-description":"What links to insert when auto-generating internal links.","option-choice-shortest-linktext":"Shortest path when possible","option-choice-relative-path":"Relative path to file","option-choice-absolute-path":"Absolute path in vault","option-new-attachment-location":"Default location for new attachments","option-new-attachment-location-description":"Where newly added attachments are placed.","option-choice-subdirectory":"In subfolder under current folder","option-attachment-folder-path":"Attachment folder path","option-attachment-folder-path-description":"Place newly created attachment files, such as images created via drag-and-drop or audio recordings, in this folder.","option-attachment-subfolder-path":"Subfolder name","option-attachment-subfolder-path-description":'If your file is under "vault/folder", and you set subfolder name to "attachments", attachments will be saved to "vault/folder/attachments".',"option-attachment-subfolder-path-placeholder":"attachments"},appearance:{name:"Appearance","option-base-theme":"Base theme","option-base-theme-description":"Choose Obsidian's default color scheme.","dark-theme":"Dark","light-theme":"Light","option-use-obsidian-css":"Apply custom CSS","option-use-obsidian-css-description":"Read and apply “obsidian.css” in the vault folder. This is a legacy setting, please consider moving your custom CSS file to the snippet folder below.","option-community-themes":"Community themes","option-community-themes-description":"Preview and use amazing themes created by the community.","button-browse-community-themes":"Browse","option-font-size":"Font size","option-font-size-description":"Font size in pixels that affects editing and reading views.","option-font-size-action":"Quick font size adjustment","option-font-size-action-description":"Adjust the font size using Ctrl + Scroll, or using the trackpad pinch-zoom gesture.","option-themes":"Themes","option-manage-themes-description":"Manage installed themes and browse community themes.","option-theme-button-manage":"Manage","option-choice-none":"None","button-reload-themes":"Reload themes","msg-reloaded-themes":"Reloaded custom CSS themes.","button-open-themes-folder":"Open themes folder","option-css-snippets":"CSS snippets","label-no-css-snippets-found":"No CSS snippets found.","no-snippet-description":'CSS Snippets are stored in "{{path}}".',"button-reload-snippets":"Reload snippets","button-open-snippets-folder":"Open snippets folder","msg-reloaded-snippets":"Reloaded CSS snippets.","option-toggle-snippet-description":'Apply CSS snippet at "{{path}}".',"label-installed-themes":"Installed themes","label-screenshot-unavailable":"Screenshot unavailable","label-default-theme":"Default","tooltip-click-to-enlarge":"Click to enlarge","button-update":"Update","label-currently-selected":"Selected"},hotkeys:{name:"Hotkeys","prompt-filter":"Filter...","tooltip-delete-hotkey":"Delete hotkey","label-waiting-for-hotkey-press":"Press hotkey...","tooltip-restore-default":"Restore default","tooltip-customize-command":"Customize this command","tooltip-hotkey-single-conflict":'This hotkey conflicts with "{{command}}"',"tooltip-hotkey-multiple-conflicts":"This hotkey conflicts with {{count}} other commands","label-blank-hotkey":"Blank"},about:{name:"About","label-commercial-license":"Commercial license","label-license-key":"License key","license-key-placeholder":"Your license key...","label-enter-commercial-license":"Please enter your commercial license key:","label-activate-license":"Activate license","button-activate":"Activate","label-unknown-version":"Unknown","label-current-version":"Current version: ","label-install-version":"(Installer version: {{version}})","label-up-to-date":"Your app is up-to-date!","label-read-changelog":"Read the changelog.","label-manual-install-required":"A manual installation is required to update to the latest version.","label-download":"Download","label-new-version-ready":"A new version is ready to be installed. ","label-relaunch-to-update":"Relaunch the app to update.","label-disabled-updates":"Updates are disabled.","label-checking-for-updates":"Checking for updates...","button-relaunch":"Relaunch","button-check-for-updates":"Check for updates","option-auto-update":"Automatic updates","option-auto-update-description":"Turn this off to prevent the app from checking for updates.","option-open-help":"Obsidian help","option-open-help-description":"Open the help documentation.","button-open":"Open","option-language":"Language","option-language-description":"Change the display language.","option-insider-build":"Receive insider builds","option-insider-build-description":"Auto-update to insider builds and try new features. These builds are bleeding-edge and might be less stable.","option-advanced":"Advanced","option-hw-acceleration":"Hardware Acceleration","option-hw-acceleration-description":"Turns on Hardware Acceleration, which uses your GPU to make Obsidian smoother.","option-hw-acceleration-warning":"If you turn this off, app performance will be severely degraded.","option-config-location":"Override config folder","option-config-location-description":"Use a different config folder than the default one. Must start with a dot.","option-config-location-warning":"Config location must be a valid folder name that starts with a dot.","label-license":"License","label-your-commercial-license-key":'Your commercial license key is "{{key}}".',"label-commercial-license-info":'Registered to "{{company}}" for {{seats}} users. Valid until {{expiry}}.',"label-validating-commercial-license":"Validating...","label-invalid-commercial-license":"License invalid: ","button-activate-commercial-license":"Activate commercial license","button-remove-commercial-license":"Remove","label-personal-license":" personal license. ","label-thank-you-for-support":"Thank you for your support!","label-free-personal-license":"Personal license: free for personal use."},account:{name:"Account","label-welcome":"Welcome, {{name}}!","label-your-account-email":"Your account is ","label-insider":"insider","label-supporter":"supporter","label-vip":"VIP","label-role-text":"You've upgraded to {{- role}}!","label-insider-build-access":"Thank you for your support. You have access to our insider builds.","label-action-suggestion":"You may want to:","button-get-commercial-license":"Get a commercial license","button-get-catalyst-license":"Support Obsidian with Obsidian Catalyst","button-check-for-catalyst-license":"Check for Obsidian Catalyst","button-upgrade-catalyst-license":"Upgrade to a higher tier","button-log-out":"Log out","label-log-in":"Log in","label-email":"Email","placeholder-email":"Your email...","label-password":"Password","placeholder-password":"Your password...","button-login":"Login","message-empty-email":"Email cannot be empty.","message-invalid-email":"Email is not valid.","message-empty-password":"Password cannot be empty.","message-login-failed":"Login failed, please double check your email and password.","label-no-account":"Don't have an account? ","link-sign-up-now":"Sign up now","message-get-community-badges-instructions":"For Discord and forum badges, please refer to {{link}}.","message-get-community-badges-link-text":"this guide","message-obtain-commercial-license":"To obtain a commercial license, visit {{pricingPageLink}}."},"core-plugin":{"plugin-list":"Plugin list","option-search-plugin":"Search core plugins","option-search-plugin-description":"Filter plugins by name or description.","placeholder-search-plugin":"Search plugins..."},"third-party-plugin":{name:"Community plugins","option-safe-mode":"Safe mode","option-safe-mode-description-on":"Safe Mode is ON. All community plugins are disabled.","option-safe-mode-description-off":"Safe Mode is OFF. Community plugins can now be enabled.","option-browse-community-plugins":"Community plugins","option-browse-community-plugins-description":"Browse and install third-party plugins made by our amazing community.","button-browse":"Browse","label-third-party-plugin-warning":"Community plugins can access files on your computer, connect the internet, and even install additional programs. They can also be faulty and cause data corruption or data loss.","label-disable-safe-mode-confirmation":"Would you like to disable Safe Mode to allow these third-party plugins? Make sure you have setup backups of your vault in case plugins malfunction and wipe your notes.","button-keep-safe-mode":"Keep Safe Mode on","button-disable-safe-mode":"Turn off Safe Mode","label-select-a-plugin":"Select a plugin to install or learn more about it.","placeholder-community-plugins":"Search community plugins...","msg-failed-load-plugins":"Failed to load community plugins.","label-installed":"Installed","tooltip-downloaded-times":"Downloaded {{count}} time","tooltip-downloaded-times_plural":"Downloaded {{count}} times","button-install":"Install","button-enable":"Enable","button-disable":"Disable","button-copy-share-link":"Copy share link","label-no-results-found":"No results found.","msg-failed-to-load-manifest":"Failed to load plugin manifest.","label-version":"Version: {{version}}","label-currently-installed-version":" (currently installed: {{version}})","label-by-author":"By ","label-repository":"Repository: ","label-unsupported":"This plugin does not support your device.","button-update":"Update","label-no-readme":"This plugin did not provide a README file.","msg-installing-plugin":'Installing plugin "{{name}}"...',"msg-failed-to-install-plugin":'Failed to install plugin "{{name}}".',"msg-successfully-installed-plugin":'Successfully installed plugin "{{name}}".',"label-installed-plugins":"Installed plugins","button-reload-plugins":"Reload plugins","msg-reloaded-third-party-plugins":"Reloaded third-party plugins.","label-uninstall":"Uninstall","label-uninstall-plugin":"Uninstall plugin","label-uninstall-plugin-confirmation":"Are you sure you want to uninstall this plugin? This will delete the folder of the plugin.","button-open-plugins-folder":"Open plugins folder","button-check-for-updates":"Check for updates","button-update-all-plugins":"Update all","label-current-plugins":"Current plugins","label-currently-installed":"You currently have {{count}} plugin installed.","label-currently-installed_plural":"You currently have {{count}} plugins installed.","msg-no-updates-found":"No plugin updates found.","msg-updates-found":"Found {{count}} plugin to update.","msg-updates-found_plural":"Found {{count}} plugins to update.","msg-update-plugin":"Update to version {{version}}","option-search-installed-plugin":"Search installed plugins","option-search-installed-plugin-description":"Filter installed plugins by name or description.","placeholder-search-installed-plugin":"Search installed plugins...","label-sort-downloads-high-to-low":"Download count (high to low)","label-sort-downloads-low-to-high":"Download count (low to high)","label-sort-release-date-new-to-old":"First released time (new to old)","label-sort-release-date-old-to-new":"First released time (old to new)","label-sort-name-alphabetical":"Name (A to Z)","label-sort-name-alphabetical-reverse":"Name (Z to A)","label-search-summary":"Showing {{pluginCount}}:"},"mobile-toolbar":{name:"Mobile","option-configure-quick-action":"Configure mobile Quick Action","option-configure-quick-action-description":'Configure which command to trigger when pull down from the top. The current command is set to "{{command}}".',"button-configure":"Configure","placeholder-select-quick-action":"Select Quick Action...","manage-toolbar-options":"Manage toolbar options","option-internal-link":"Add internal link","option-internal-embed":"Add embed","option-tag":"Add tag","option-heading":"Toggle heading","option-strikethrough":"Toggle strikethrough","option-highlight":"Toggle highlight","option-code":"Toggle code","option-blockquote":"Toggle blockquote","option-markdown-link":"Add Markdown link","option-bullet-list":"Toggle bullet list","option-numbered-list":"Toggle numbered list","option-indent-list":"Indent list item","option-unindent-list":"Unindent list item","option-undo":"Undo","option-redo":"Redo","option-move-caret-up":"Move caret up","option-move-caret-down":"Move caret down","option-move-caret-left":"Move caret left","option-move-caret-right":"Move caret right","option-first-line":"Go to first line","option-last-line":"Go to last line","option-toggle-keyboard":"Toggle keyboard","option-configure-toolbar":"Configure mobile toolbar","option-added-options":"Added options","option-more-toolbar-options":"More toolbar options","option-attach":"Insert attachment","option-add-command":"Add global command","option-add-command-description":"Select any global command to add to the toolbar."}},editor:{search:{"placeholder-find":"Find","placeholder-replace":"Replace","label-previous":"Prev","label-next":"Next","label-all":"All","label-exit-search":"Exit search","label-replace":"Replace","label-replace-all":"Replace all"},"link-suggestion":{"label-type-hash":"Type #","label-link-heading":"to link heading","label-type-block":"Type ^","label-link-block":"to link blocks","label-type-pipe":"Type |","label-change-display-text":"to change display text","label-no-match-found":"No match found"},spellcheck:{"no-suggestion":"No suggestions...","add-to-dictionary":"Add to dictionary"},"print-modal":{title:"Export to PDF",caption:'Export "{{filename}}" to PDF with the settings below.',"setting-page-size":"Page size","setting-page-size-a3":"A3","setting-page-size-a4":"A4","setting-page-size-a5":"A5","setting-page-size-legal":"Legal","setting-page-size-letter":"Letter","setting-page-size-tabloid":"Tabloid","setting-landscape":"Landscape","setting-margin":"Margin","setting-margin-default":"Default","setting-margin-minimal":"Minimal","setting-margin-none":"None","setting-downscale-percent":"Downscale percent","button-export-to-pdf":"Export to PDF"},"link-popover":{"tooltip-follow-link":"Follow link","tooltip-open-link":"Open link","tooltip-search-tag":"Search tag"}},interface:{"embed-open-in-default-app-tooltip":"Open in default app","empty-sidebar":"The sidebar is empty, try dragging a pane here.","sidebar-expand":"Expand","sidebar-collapse":"Collapse","msg-fail-to-save-file":'Failed to save file "{{filepath}}". {{message}}.',"no-file":"No file","msg-file-changed":'"{{file}}" has been modified externally, merging changes automatically.',"switch-vault":"Open another vault",help:"Help",settings:"Settings","drag-to-rearrange":"Drag to rearrange","msg-switched-to-read":"Switched default view mode to reading view.","msg-switched-to-edit":"Switched default view mode to editing view.","msg-upgrade-installer":"To use this feature, please re-install with latest installer available from our website.","tooltip-restore-default-settings":"Restore default settings","label-copy":"Copy to clipboard",copied:"{{item}} copied to your clipboard",url:"URL","msg-open-file-through-uri":'Opened file "{{path}}"',"msg-file-not-found-through-uri":'File "{{name}}" not found.',"delete-action-short-name":"Delete","msg-indexing":"Obsidian is indexing your vault...\nThis should only happen once.\nSome functionality may not be available until this is complete.","msg-indexing-complete":"Indexing complete.","label-enter-to-create":"Enter to create","label-update-available":"Update Available","label-debug-info":"Debug info","button-learn-more":"Learn more","button-not-now":"Not now","empty-state":{"no-file-open":"No file is open","create-new-file":"Create new file","go-to-file":"Go to file","see-recent-files":"See recent files",close:"Close","unknown-pane-title":"Plugin no longer active","unknown-pane-desc":"The plugin that created this pane ({{type}}) has gone away"},menu:{"edit-view":"Current view: editing","read-view":"Current view: reading","switch-to-edit-view":"Click to edit","switch-to-read-view":"Click to read","mod-click-open-new-pane":"{{key}}+Click to open in new pane",find:"Find...",replace:"Replace...",edit:"Edit",preview:"Preview","more-options":"More options",close:"Close",pin:"Pin","unlink-pane":"Unlink pane","link-pane":"Link with pane...","delete-file":"Delete file","open-in-new-pane":"Open in new pane","copy-url":"Copy URL","close-current-pane":"Close current pane",copy:"Copy",cut:"Cut",paste:"Paste","paste-as-plain-text":"Paste as plain text","select-all":"Select all","rename-heading":"Rename this heading..."},tooltip:{"click-to-expand":"Click to expand","click-to-collapse":"Click to collapse",alias:"Alias","not-created-yet":"Not created yet, select to create"},"start-screen":{"label-version":"Version","option-open-folder-as-vault":"Open folder as vault","option-open-folder-as-vault-description":"Choose an existing folder of Markdown files.","option-create-vault":"Create new vault","option-create-vault-description":"Create a new Obsidian vault under a folder.","option-open-help-vault":"Open help vault","option-open-help-vault-description":'Open a "Demo & Help" vault.',"option-new-vault-name":"Vault name","option-new-vault-name-description":"Pick a name for your awesome vault.","option-new-vault-location":"Location","option-new-vault-location-description":"Pick a place to put your new vault.","button-open":"Open","button-help":"Help","button-browse":"Browse","button-create-vault":"Create","button-back":"Back","msg-empty-vault-name":"Vault name cannot be empty.","msg-invalid-folder":"Please pick a valid folder.","msg-failed-to-create-vault":"Failed to create vault.","msg-failed-to-create-vault-at-location":"Could not create vault at the given location. Please double check the location and permission.","msg-error-failed-to-open-vault":"Failed to open.","msg-error-remove-current-open-vault":"Can't remove a currently open vault."},"drag-and-drop":{"insert-link-here":"Insert link here","insert-links-here":"Insert links here","move-into-folder":'Move into "{{folder}}"',"star-this-file":"Star this file","star-these-files":"Star these files","open-in-this-pane":"Open in this pane"},window:{maximize:"Maximize",minimize:"Minimize","restore-down":"Restore down","close-window":"Close window","go-back":"Go back","go-forward":"Go forward"},"start-up":{"loading-obsidian":"Loading Obsidian...","obsidian-load-error":"An error occurred while loading Obsidian.","button-reload-app":"Reload app","button-open-another-vault":"Open another vault","loading-components":"Loading components...","loading-plugins":"Loading plugins...","loading-vault":"Loading vault...","msg-failed-to-load-vault":"Failed to load vault: ","loading-cache":"Loading cache...","loading-workspace":"Loading workspace..."},mobile:{"action-import":"Import into vault","action-choose-file-to-insert":"Choose a file to insert","action-insert-text-into-file":"Insert text into {{filename}}","action-insert-link-into-file":"Insert link into {{filename}}","msg-importing":"Importing...","msg-import-success":"Import success","msg-failed-to-import-file":"Failed to import file {{filename}}"}},commands:{"save-file":"Save current file","follow-cursor-link":"Follow link under cursor","open-cursor-link-in-new-pane":"Open link under cursor in new pane","navigate-pane-above":"Focus on pane above","navigate-pane-below":"Focus on pane below","navigate-pane-left":"Focus on pane to the left","navigate-pane-right":"Focus on pane to the right","toggle-pin":"Toggle pin","split-vertically":"Split vertically","split-horizontally":"Split horizontally","navigate-back":"Navigate back","navigate-forward":"Navigate forward","use-dark-mode":"Use dark mode","use-light-mode":"Use light mode","search-current-file":"Search current file","search-replace-current-file":"Search & replace in current file","open-settings":"Open settings","open-help":"Open help","toggle-edit":"Toggle editing/reading view","toggle-source-mode":"Toggle Live Preview/Source mode","delete-current-file":"Delete current file","close-active-pane":"Close active pane","close-other-panes":"Close all other panes","toggle-left-sidebar":"Toggle left sidebar","toggle-right-sidebar":"Toggle right sidebar","toggle-default-new-pane-mode":"Toggle default new pane mode","focus-editor":"Focus on editor","toggle-fold":"Toggle fold on the current line","fold-all":"Fold all headings and lists","unfold-all":"Unfold all headings and lists","swap-line-up":"Swap line up","swap-line-down":"Swap line down","toggle-bold":"Toggle bold","toggle-italics":"Toggle italics","toggle-highlight":"Toggle highlight","toggle-comments":"Toggle comment","insert-link":"Insert Markdown link","toggle-spellcheck":"Toggle spellcheck","delete-paragraph":"Delete paragraph","toggle-checklist":"Toggle checklist status","edit-file-title":"Edit file title","copy-path":"Copy file path","copy-url":"Copy Obsidian URL","export-pdf":"Export to PDF",reload:"Reload app without saving","undo-close-pane":"Undo close pane","context-menu":"Show context menu under cursor","show-debug-info":"Show debug info","toggle-preview":"Toggle reading view"},dialogue:{"label-link-affected":"This will affect {{links}} in {{files}}.","msg-updated-links":"Updated {{links}} in {{files}}.","label-update-links":"Update links","label-confirm-update-link-to-file":"Do you want to update internal links that link to this file?","button-always-update":"Always update","button-just-once":"Just once","button-do-not-update":"Do not update","label-confirm-deletion":'Are you sure you want to delete "{{filename}}"?',"label-move-to-system-trash":"It will be moved to your system trash.","label-move-to-vault-trash":'It will be moved to your Obsidian trash, which is located in the ".trash" hidden folder in your vault.',"label-permanent-delete":"The file will be permanent deleted.","label-non-empty-folder":"This folder is not empty.","label-delete-folder-warning":"If you continue, all files inside this folder will be deleted.","label-delete-folder":"Delete folder","button-delete":"Delete","button-delete-do-not-ask-again":"Delete and don't ask again","label-existing-backlink":"There are currently {{links}} pointing to this note.","label-delete-file":"Delete file","button-cancel":"Cancel","button-done":"Done","button-continue":"Continue","preparing-pdf":"Preparing PDF...","label-rename-file":"Rename file","label-new-name":"New name","msg-rename-success":"Successfully renamed file.","label-rename-heading":"Rename heading"},plugins:{name:"Plugins","file-explorer":{name:"File explorer",desc:"See the files and folders in your vault.","action-open":"Open file explorer","action-show":"Show file explorer","action-create-note":"Create new note","action-create-note-in-new-pane":"Create note in new pane","action-new-note":"New note","action-new-folder":"New folder","action-change-sort":"Change sort order","action-reveal-file":"Reveal file in navigation","action-reveal-active-file":"Reveal active file in navigation","command-move-file":"Move file to another folder","action-move-file":"Move file to...","action-move-folder":"Move folder to...","prompt-type-folder":"Type a folder","label-no-folders":"No folders found.","instruction-navigate":"to navigate","instruction-move":"to move","instruction-dismiss":"to dismiss","label-sort-a-to-z":"File name (A to Z)","label-sort-z-to-a":"File name (Z to A)","label-sort-new-to-old":"Modified time (new to old)","label-sort-old-to-new":"Modified time (old to new)","label-sort-created-old-to-new":"Created time (old to new)","label-sort-created-new-to-old":"Created time (new to old)","menu-opt-new-note":"New note","menu-opt-new-folder":"New folder","menu-opt-set-attachment-folder":"Set as attachment folder","menu-opt-rename":"Rename","menu-opt-delete":"Delete","menu-opt-make-copy":"Make a copy","msg-invalid-characters":"File name cannot contain any of these characters: ","msg-unsafe-characters":"Links will not work with file names containing any of these characters: ","msg-file-already-exists":"There's already a file with the same name","msg-empty-file-name":"File name cannot be empty.","tooltip-modified-time":"Last modified at {{time}}","tooltip-created-time":"Created at {{time}}","tooltip-folders-files-count":"{{fileCount}}, {{folderCount}}","action-move-file-short-name":"Move","label-untitled-file":"Untitled","label-untitled-folder":"Untitled","msg-set-attachment-folder":'Attachments will be saved to "{{path}}" from now on.'},search:{name:"Search",desc:"Search for a keyword in all the notes.","action-open-search":"Search in all files","label-collapse-results":"Collapse results","label-match-case":"Match case","label-explain-search-term":"Explain search term","label-more-context":"Show more context","prompt-start-search":"Type to start search...","label-match-text":"Matches text: ","label-match-regex":"Matches regex: ","label-match-exact-text":"Contains exact text: ","label-match-all":"Match all of: ","label-match-any":"Match any of: ","label-excluding":"Excluding: ","label-case-sensitive":"Case sensitive","label-case-insensitive":"Case insensitive","label-match-file-path":"Match file path: ","label-match-file-name":"Match file name: ","label-match-content":"Match file content: ","label-match-task":"Match task: ","label-match-task-todo":"Match task (todo): ","label-match-task-done":"Match task (done): ","label-match-line":"Match line: ","label-match-block":"Match block: ","label-match-section":"Match section: ","label-match-tag":"Match tag: ","label-no-matches":"No matches found.","matches-with-count":"... and {{count}} more match.","matches-with-count_plural":"... and {{count}} more matches.","label-copy-search-results":"Copy search results","button-copy-results":"Copy results","msg-successfully-copied":"Results copied to your clipboard.","option-show-path":"Show path","option-show-path-description":"Display full path of the file rather than just the file name.","option-link-style":"Link style","option-link-style-description":"Optionally turn each file result in to a link.","option-choice-link-style-none":"None","option-choice-link-style-wikilink":"Wikilink","option-choice-link-style-markdown-link":"Markdown link","option-list-prefix":"List prefix","option-list-prefix-description":"Optionally add a list item prefix to each file result.","option-choice-list-style-none":"None","option-choice-list-style-dash":"Dash (-)","option-choice-list-style-asterisk":"Asterisk (*)","option-choice-list-style-numbered":"Numbered","tooltip-clear-search":"Clear search","label-search-options":"Search options","tooltip-read-more":"Read more","label-history":"History","tooltip-clear-history":"Clear search history","label-path-option-description":"match path of the file","label-file-name-option-description":"match file name","label-tag-option-description":"search for tags","label-line-option-description":"search keywords on same line","label-section-option-description":"search keywords under same heading","menu-opt-search-for":'Search for "{{keyword}}"'},"quick-switcher":{name:"Quick switcher",desc:"Use Ctrl/Cmd+O to jump to other files with your keyboard.","short-name":"Switcher","action-open":"Open quick switcher","instruction-navigate":"to navigate","instruction-open":"to open","instruction-open-in-new-pane":"to open in new pane","instruction-create":"to create","instruction-dismiss":"to dismiss","label-no-note-create-new":"No notes found. Enter to create a new one.","prompt-type-file-name":"Type file to switch to or create...","label-enter-to-create":"Enter to create","tooltip-not-created-yet":"Not created yet, select to create","option-show-existing-only":"Show existing only","option-show-existing-only-description":"Only show results from existing files. Links to files that are not yet created will be hidden.","option-show-attachments":"Show attachments","option-show-attachments-desc":"Show attachment files like images, videos, and PDFs.","option-show-all-file-types":"Show all file types","option-show-all-file-types-desc":"Show all files including ones that Obsidian can't open. The file will be opened with the default app for that file type."},"graph-view":{name:"Graph view",desc:"View a graph that displays links between your notes.","action-open":"Open graph view","action-open-local":"Open local graph","action-copy-screenshot":"Copy screenshot","tab-title":"Graph of {{displayText}}","label-filters":"Filters","prompt-filter-nodes":"Search files...","option-depth":"Depth","option-depth-description":"Show nodes this number of links away","option-neighbor-links":"Neighbor links","option-neighbor-links-description":"Show links between neighbors","option-forelinks":"Outgoing links","option-forelinks-description":"Show links to other files","option-backlinks":"Incoming links","option-backlinks-description":"Show links from other files","option-show-tags":"Tags","option-show-tags-description":"Tags are linked to the files that contain them","option-show-attachments":"Attachments","option-show-attachments-description":"Show attachments","option-show-existing-files-only":"Existing files only","option-show-existing-files-only-description":"When enabled, links to nonexistent files are not shown","option-show-orphans":"Orphans","option-show-orphans-description":"Show files that are not linked to any other file","label-display":"Display","option-show-arrows":"Arrows","option-show-arrows-description":"Show arrows when zoomed in","option-text-fade":"Text fade threshold","option-node-size":"Node size","option-link-thickness":"Link thickness","label-forces":"Forces","option-center-force":"Center force","option-link-force":"Link force","option-link-distance":"Link distance","option-repel-force":"Repel force","tooltip-open-graph-settings":"Open graph settings","msg-screenshot-copied":"Screenshot copied to the clipboard.","label-groups":"Groups","placeholder-enter-query":"Enter query...","tooltip-delete-graph":"Delete group","button-new-group":"New group","tooltip-click-to-change-drag-to-reorder":"Click to change color\nDrag to reorder groups","action-timelapse":"Start graph timelapse animation","tooltip-start-timelapse-animation":"Start timelapse animation","button-animate-timelapse":"Animate"},backlinks:{name:"Backlinks",desc:"Show links from other files to this file. Backlinks can be shown in a separate pane or optionally in the document itself.","action-open":"Open backlinks","action-show":"Show backlinks pane","action-open-for-current":"Open backlinks for the current file","action-toggle-backlinks-in-document":"Toggle backlinks in document","label-linked-mentions":"Linked mentions","label-no-backlinks":"No backlinks found.","label-unlinked-mentions":"Unlinked mentions","label-show-search":"Show search filter","label-link-button-text":"Link","tab-title":"Backlinks for {{displayText}}","label-no-unlinked-mentions":"No unlinked mentions found.",ellipsis:"...","option-backlink-in-document":"Backlink in document","option-backlink-in-document-desc":"Show backlinks in document by default when opening new panes."},"outgoing-links":{name:"Outgoing Links",desc:"Show outgoing links and detect unlinked mentions of other notes in the current note.","action-open":"Open outgoing links","action-show":"Show outgoing links pane","action-open-for-current":"Open outgoing links for the current file","tab-title":"Outgoing links from {{displayText}}","label-links":"Links","label-no-links":"No links found.","label-unlinked-mentions":"Unlinked mentions","tooltip-link-file":"Link this file","tooltip-not-created":"Not created yet"},"tag-pane":{name:"Tag pane",desc:"Display your tags and their number of occurrences.","action-show":"Show tag pane","label-no-tags":"No tags found.","label-sort-by-name-a-to-z":"Tag name (A to Z)","label-sort-by-name-z-to-a":"Tag name (Z to A)","label-sort-by-frequency-high-to-low":"Frequency (high to low)","label-sort-by-frequency-low-to-high":"Frequency (low to high)","action-show-nested-tags":"Show nested tags"},"page-preview":{name:"Page preview",desc:"Hover an internal link to preview its content. In editor mode, press Ctrl/Cmd while hovering.","label-empty-note":'"{{linktext}}" is not created yet. Click to create.',"label-source-editor":"Editor","label-source-preview":"Preview","label-source-search":"Search, Backlinks, and Outgoing links","label-require-mod":"Require {{key}} to trigger page preview on hover"},starred:{name:"Starred",desc:"Star frequently used files and searches.","action-show":"Show starred pane","action-toggle":"Star/unstar current file","action-toggle-search":"Star/unstar current search","action-star":"Star","action-unstar":"Unstar","menu-opt-remove":"Remove","msg-successfully-starred":'Successfully starred {{type}} "{{title}}".',"msg-removed-starred":'Removed starred {{type}} "{{title}}".',"msg-cannot-find-path":'Cannot find file at "{{path}}".'},"custom-css":{name:"Custom CSS",desc:"Read and apply “obsidian.css” in the vault folder.","setting-community-themes":"Community themes","msg-fetching-themes":"Fetching community theme data...","prompt-filter":"Filter...","label-dark-theme-only":"Dark themes only","label-light-theme-only":"Light themes only","label-use":"Use","label-update":"Update","tooltip-remove-theme":"Remove theme","label-visit-on-github":"Visit on GitHub","msg-load-error":"Could not load community themes, please check your network.","msg-now-using-theme":"You're now using {{title}} as your CSS theme.","msg-deleted-theme":"The theme {{title}} has been deleted.","msg-updated-theme":"The theme {{title}} has been updated."},"command-palette":{name:"Command palette",desc:"Use Cmd/Ctrl+P and begin typing to invoke a command.","action-open":"Open command palette","instruction-navigate":"to navigate","instruction-use":"to use","instruction-dismiss":"to dismiss","label-no-commands":"No commands found.","prompt-type-command":"Select a command...","label-pinned-commands":"Pinned commands","option-add-new-pin":"New pinned command","option-add-new-pin-description":"Pinned commands will appear at the top of all commands when no search query is present."},"markdown-format-importer":{name:"Markdown format importer",desc:"Convert Markdown from other apps to Obsidian format.","action-open":"Open Markdown importer","option-roam-tag-fixer":"Roam Research tag fixer","option-roam-tag-fixer-description":'Converts "#tag" and "#[[tag]]" to "[[tag]]".',"option-roam-highlight-fixer":"Roam Research highlight fixer","option-roam-highlight-fixer-description":'Converts "^^highlight^^" to "==highlight==".',"option-roam-todo-converter":"Roam Research TODO converter","option-roam-todo-converter-description":'Converts "{{[[TODO]]}}" to "[ ]".',"option-bear-highlight-fixer":"Bear highlight fixer","option-bear-highlight-fixer-description":'Converts "::highlight::" to "==highlight==".',"zettelkasten-link-fixer":"Zettelkasten link fixer","zettelkasten-link-fixer-description":'Fixes "[[UID]]" links to full "[[UID File Name]]".',"zettelkasten-link-beautifier":"Zettelkasten link beautifier","zettelkasten-link-beautifier-description":'Fixes "[[UID]]" links and also beautify them "[[UID File Name|File Name]]".',"msg-all-files-warning":"Warning: the importer will convert all the files in your vault, not just the current file.","msg-override-files-warning":"Your files will be overwritten. Back up all your files before attempting conversion.","label-start-conversion":"Start Conversion","label-stop":"Stop","label-go-back":"Go back","label-done":"Done","label-processing":"Processing...","label-cancelling":"Cancelling...","label-finished":"Finished!","label-processed-files":"Processed files","label-modified-files":"Modified files","label-total-replacements":"Total replacements"},"daily-notes":{name:"Daily notes",desc:"Create or open today's daily note.","short-name":"Today","action-open":"Open today's daily note","action-open-previous":"Open previous daily note","action-open-next":"Open next daily note","action-insert-text":"Insert text into daily note","action-insert-link":"Insert link into daily note","msg-fail-format":'Failed to create daily note. "{{format}}" is not a valid format.',"msg-fail-folder":'Failed to create daily note. Folder "{{folderOption}}" not found.',"msg-fail-template-file":'Failed to create daily note. Template file "{{template}}" not found.',"msg-no-previous":"There's no daily note before this one.","msg-no-next":"There's no daily note after this one.","option-date-format":"Date format","label-refer-to-syntax":"For more syntax, refer to ","label-syntax-link":"format reference","label-syntax-live-preview":"Your current syntax looks like this: ","option-new-file-location":"New file location","option-new-file-location-description":"New daily notes will be placed here.","option-template":"Template file location","option-template-description":"Choose the file to use as a template.","option-open-on-start":"Open daily note on startup","option-open-on-start-description":"Open your daily note automatically whenever you open this vault."},"zettelkasten-prefixer":{name:"Zettelkasten prefixer",desc:"Create a note with a 12-digit Zettelkasten ID (YYYYMMDDHHII).","short-name":"ZK note","action-create-note":"Create new Zettelkasten note","option-new-file-location":"New file location","option-new-file-location-description":"The folder path to create the new Zettelkasten note.","msg-folder-not-found":'Failed to create Zettelkasten note. Folder "{{folderOption}}" not found.',"option-template-file":"Template file location","option-template-file-description":"The file path to use as template.","option-template-file-placeholder":"Example: folder1/note","option-id-format":"Zettel ID format","msg-template-file-not-found":'Failed to create Zettelkasten note. Template file "{{template}}" not found.'},"random-note":{name:"Random note",desc:"Open a random note to rediscover or review.","short-name":"Random","action-open":"Open random note"},outline:{name:"Outline",desc:"Display the outline of the current file or linked pane.","action-open":"Open outline","action-show":"Show outline pane","action-open-for-current":"Open outline of the current file","tab-title":"Outline of {{displayText}}","label-no-headings":"No headings found."},"word-count":{name:"Word count",desc:"Show word count in the status bar."},slides:{name:"Slides",desc:'Present from Markdown. Use "---" to separate slides.',"action-start":"Start presentation"},"audio-recorder":{name:"Audio recorder",desc:"Record audio and save as attachment.","action-start":"Start recording audio","action-stop":"Stop recording audio","action-toggle":"Start/stop recording","msg-access-denied":"Microphone access was denied, please enable it from the preference pane.","msg-pending-grant":"Please grant microphone permission to start recording.","msg-no-microphone":"No microphone is connected."},"open-with-default-app":{name:"Open in default app",desc:"Add a button to open the current file in its default app.","action-open-file":"Open in default app","action-open-file-mobile":"Share","action-show-in-folder":"Show in system explorer"},templates:{name:"Templates",desc:"Insert template content from a folder of template files.","action-insert":"Insert template","action-insert-current-date":"Insert current date","action-insert-current-time":"Insert current time","option-template-folder-location":"Template folder location","option-template-folder-location-description":"Files in this folder will be available as templates.","option-template-date-format":"Date format","option-template-date-format-description":"{{date}} in the template file will be replaced with this value.","option-template-date-format-description2":"You can also use {{date:YYYY-MM-DD}} to override the format once.","option-template-time-format":"Time format","option-template-time-format-description":"{{time}} in the template file will be replaced with this value.","option-template-time-format-description2":"You can also use {{time:HH:mm}} to override the format once.","instruction-navigate":"to navigate","instruction-insert":"to insert template","instruction-dismiss":"to dismiss","msg-no-templates-found":"No templates found","msg-fail-invalid-folder":"Failed to list templates. Template folder is invalid.","msg-fail-folder-not-found":'Failed to list templates. Folder "{{folderOption}}" not found.',"prompt-type-template":"Type name of a template..."},translucency:{name:"Translucent window",desc:"Turn on translucency effect to enhance a sense of depth. Best used with dark mode. Not supported on Linux."},"slash-command":{name:"Slash commands",desc:"Enable the ability to trigger slash commands in the editor by typing the forward slash."},"editor-status":{name:"Editor status",desc:"Adds a status bar item to show and change the current editor mode.",read:"Reading","edit-source":"Source mode","edit-live-preview":"Live Preview"},publish:{name:"Publish",desc:"Publish your notes through Obsidian Publish.","action-publish-changes":"Publish changes","label-no-internet-access":"You need access to the internet to publish changes.","label-publish-service-description":"Obsidian Publish is an add-on paid service that lets you publish your notes online directly from Obsidian.","label-please-login":"To start publishing, please log in or create a new Obsidian account.","label-no-publish-subscription":"You do not have an Obsidian Publish subscription yet.","button-purchase":"Purchase","label-manage-sites":"Manage sites","label-no-sites":"You don't have any sites.","button-choose":"Choose","tooltip-edit-site-id":"Edit site ID","tooltip-delete-site":"Delete site","label-delete-site-confirmation":"Are you sure you want to delete this site?","label-delete-site-details":"This will immediately and permanently delete your site.","label-confirm-delete-site":'Confirm delete site "{{site}}"',"option-site-id":"Site ID","option-site-id-description":"Your site will be at https://publish.obsidian.md/{site id}. You can change this later. Only lower case letters, numbers, and dashes are allowed.","option-site-id-placeholder":"Pick a site ID","button-create":"Create","msg-invalid-site-id":"Site ID can only contain lowercase letters, numbers, and dashes.","msg-site-id-in-use":"This site ID is in use, please try another one.","msg-create-site-issue":"That was an issue when creating your site.","label-site-options":"Site options","option-site-metadata":"Metadata","option-site-components":"Components","option-site-appearance":"Appearance","option-site-reading-experience":"Reading experience","option-site-misc":"Other site settings","option-site-name":"Site name","option-site-name-description":"Name of your published site. It will show up in the page title of your site.","option-site-name-placeholder":"Name of your site","option-home-page-file":"Homepage file","option-home-page-file-description":"The first page the user sees when landing on your published site","option-home-page-file-placeholder":"Pick a published file","option-logo":"Logo","option-logo-description":"Pick an image file as your site logo.","option-logo-placeholder":"Any any uploaded image in your vault...","option-theme":"Theme","option-theme-description":"Choose default color scheme for your site.","option-show-navigation":"Show navigation","option-show-navigation-description":"Display a list of all published pages on the left side of your published site.","option-show-search":"Show search bar","option-show-search-description":"Display a search bar that lets the visitors search pages, aliases, and headings on your site.","option-show-graph":"Show graph view","option-show-graph-description":"Display a small local graph on each page.","option-show-outline":"Show table of contents","option-show-outline-description":"Display the outline of headings on each page.","option-show-backlinks":"Show backlinks","option-show-backlinks-description":"Show backlink section at the end of each page.","option-sliding-window-mode":"Use sliding windows","option-sliding-window-mode-description":"Open pages in new panes to the right. Allows scrolling through panes horizontally.","option-hover-preview-file":"Show hover preview","option-hover-preview-file-description":"Display page preview when hovering links.","option-readable-line-length":"Readable line length","option-readable-line-length-description":"Limit maximum line length. Fits less content on the screen, but makes long paragraphs more readable.","option-site-password":"Passwords","option-site-password-description":"Restrict access to your site with passwords.","option-google-analytics":"Google Analytics tracking code","option-google-analytics-description":"Configure Google Analytics for your site. Only available for visitors from your custom domain URL. Please check with your local laws and regulations first.","button-manage-passwords":"Manage","button-save-site-settings":"Save site settings","msg-updated-options":"Updated options for your site.","button-go-back":"Back","label-publishing-to":"Publishing to","tooltip-switch-site":"Switch site","button-add-linked":"Add linked","tooltip-add-linked":"Add all files that are linked by currently selected items","msg-added-linked-files":"{{count}} linked file has been added.","msg-added-linked-files_plural":"{{count}} linked files have been added.","tooltip-open-site-options":"Change site options","label-no-changes-detected":"No changes were detected.","label-changed-files-to-be-published":"Changed","label-unchanged-files-already-published":"Unchanged (select to unpublish)","label-file-selected":" selected","button-select-all-files":"Select all","button-deselect-all-files":"Deselect all","label-new-files-to-be-published":"New","button-publish":"Publish","msg-no-permission-to-publish-to-site":"You do not have permissions to publish to the current site.","msg-select-at-least-one-file":"Please select at least one file.","label-upload-changes":"Upload changes","button-done":"Done","button-stop":"Stop","label-status-uploading":"Uploading","label-status-to-publish":"To publish","label-status-to-delete":"To delete","label-status-published":"Published","label-status-deleted":"Deleted","label-status-failed":"Failed","label-status-cancelled":"Cancelled","button-change":"Change","label-clear-cache":"It takes up to a few minutes for the changes to show up on your site. If you do not see your latest changes, try clearing the cache in your browser.","label-visit-site":"You can visit your site here: ","msg-something-went-wrong":"Something went wrong. Please check the developer console for details.","msg-network-error":"A network error occurred.","label-manage-passwords":"Manage passwords","label-add-password":"Add password","action-new-password":"New password","label-no-password":"Your site currently does not have any passwords. Anyone can visit it.","label-have-password":"Your site is password protected. If you have multiple passwords, visitors can access your site by entering any of them.","option-password-name":"Password","option-password-desc":"A hash of your password will be stored securely. Once the password is set, it cannot be revealed in plaintext.","option-password-placeholder":"Your password","option-nickname-name":"Nickname (optional)","option-nickname-desc":"Set a nickname to remind yourself what or who the password is for.","action-add-password":"Add this password","label-untitled-password":"Untitled password","label-password-created-time":"Created {{time}}","msg-added-new-password":"Added new password.","option-custom-domain":"Custom domain","option-custom-domain-desc":"Use your own domain rather than the https://publish.obsidian.md/{site id} URL.","option-noindex":"Disallow search engine indexing","option-noindex-desc":"Prevent search engines from indexing your site.","button-configure":"Configure","label-configure-custom-domain":"Configure custom domain","option-custom-url-name":"Custom URL","option-custom-url-desc":"The URL that your site will be located at.","option-custom-url-placeholder":"www.yourdomain.com","option-custom-url-redirect":"Redirect to your custom domain","option-custom-url-redirect-desc":"Redirect visitors on publish.obsidian.md/id to your custom domain.","button-update-custom-domain":"Update domain setting","label-custom-domain-instructions":"Please refer to our {{link}} on our help site for more information.","label-custom-domain-link-name":"custom domain setup guide","label-site-usage":"You're using {{site}} out of your {{limit}}.","button-add-more-sites":"Buy more sites"},workspaces:{name:"Workspaces",desc:"Save and load workspace layout.","action-load":"Load workspace","action-manage-workspaces":"Manage workspaces","action-save-and-load":"Save and load another workspace","placeholder-save-current-workspace-as":"Save current workspace as...","button-save":"Save","button-load":"Load","tooltip-delete-workspace":"Delete workspace","msg-delete-workspace-success":"Successfully deleted workspace.","msg-please-enter-name":"Please enter a name for the new workspace.","msg-save-workspace-success":"Successfully saved workspace.","label-no-workspaces-found":"No saved workspace found.","placeholder-type-to-search-workspaces":"Type workspace name..."},sync:{name:"Sync",desc:"Synchronize your files through Obsidian Sync.","action-view-version-history":"View Sync version history","label-load-more":"Load more","label-copy-to-clipboard":"Copy to clipboard","label-restore-this-version":"Restore this version","msg-already-latest-version":"This version is already the latest version.","msg-restored-version":"Successfully restored version from {{time}}","label-file-deleted":"This file was deleted","label-no-earlier-version":"There was no earlier versions of this file.","label-empty-file":"Empty","label-setting-files":"Setting files","label-deleted-files":"Deleted files","label-click-to-see-history":"Click on a file to see its history.","label-create-remote-vault":"Create remote vault","msg-please-enter-password":"Please enter a password.","msg-vault-name-cannot-be-empty":"Vault name cannot be empty.","msg-successfully-created-vault":'Successfully create remote vault "{{name}}".',"label-remote-vault-explanation":"Remote vaults securely synchronize your vault between devices.","option-vault-name":"Vault name","option-vault-name-desc":"Helps you remember what this vault is for.","option-vault-name-placeholder":"My awesome vault","option-use-custom-encryption-password":"Customize end-to-end encryption password","option-use-custom-encryption-password-desc":"If you turn this off, we will securely manage an encryption key for you.","option-use-custom-encryption-password-desc-warning":"This option cannot be changed later.","option-encryption-password":"Encryption password","option-encryption-password-desc":"This password cannot be changed later.","option-encryption-password-desc-warning":"If you forget this password, any remote data will remain unusable forever.","option-encryption-password-desc-2":"This does not affect your local data.","option-encryption-password-placeholder":"Your password","label-enter-encryption-password":"Enter encryption password","button-unlock-vault":"Unlock vault","msg-verified-password":"Successfully verified your password.","label-remote-vaults":"Your remote vaults","label-vault-created-time":"Created {{time}}","tooltip-delete-remote-vault":"Delete","label-confirm-delete-remote-vault":"Confirm delete vault","label-confirm-delete-remote-vault-question":"Are you sure you want to delete this remote vault?","label-confirm-delete-remote-vault-result":"All data on our server, including version history, will be deleted. Your local files will stay intact.","label-confirm-delete-remote-vault-warning":"This action is permanent and irreversible.","msg-remote-vault-deleted":"{{name}} has been deleted.","button-connect-to-remote-vault":"Connect","button-disconnect-from-remote-vault":"Disconnect","label-not-remote-vaults":"You don't have any remote vaults.","button-create-new-remote-vault":"Create new vault","label-sync-log":"Sync log","options-only-show-errors":"Errors only","options-only-show-errors-desc":"Only show errors and hide other log items.","button-copy-sync-log":"Copy sync log","msg-successfully-copied-sync-log":"Successfully copied sync log.","button-retry":"Retry","label-no-sync-subscription":"You do not have an Obsidian Sync subscription yet.","button-purchase-subscription":"Purchase","option-pick-remote-vault":"Pick remote vault","button-choose-remote-vault":"Choose","option-pick-remote-vault-desc-connected":'Currently connected to the "{{name}}" remote vault.',"option-pick-remote-vault-desc-not-connected":"Currently not connected to any remote vault.","option-sync-status":"Sync status","option-sync-status-desc-paused":"Obsidian Sync is currently paused.","option-sync-status-desc-running":"Obsidian Sync is currently running.","option-device-name":"Device name","option-device-name-desc":"This name will be displayed in the sync log. Leave empty to use the default name.","button-resume":"Resume","button-pause":"Pause","option-view-deleted-files":"Deleted files","option-view-deleted-files-desc":"View and restore deleted files.","option-sync-log":"Sync activity","option-sync-log-desc":"View recent sync activities for debugging.","button-view":"View","button-bulk-restore":"Bulk restore","button-restore-selected-files":"Restore selected files","msg-restoring":"Restoring...","msg-restoring-complete":"`Restore complete: {{succeeded}} succeeded and {{failed}} failed.`","option-over-size":"Vault size over limit","option-over-size-desc":"Your vault is at {{size}} out of {{limit}}.","msg-largest-files":"View largest files","msg-largest-files-desc":"These are the remote files that are taking the most space. After deleting attachments, use the purge button to free up remote vault space.","button-purge-remote":"Purge","tooltip-purge-remote":"Permanently purge deleted attachments from remote vault to save space.","msg-purge-complete":"Purge complete.","option-selective-sync":"Selective sync","option-excluded-folders":"Excluded folders","option-excluded-folder-desc":"Prevent certain folders from being synced.","option-currently-excluded-folders":" These folders currently excluded:","button-manage-excluded-folders":"Manage","option-sync-image":"Sync images","option-sync-image-desc":"Sync image files with these extensions: {{extensions}}.","option-sync-audio":"Sync audio","option-sync-audio-desc":"Sync audio files with these extensions: {{extensions}}.","option-sync-video":"Sync videos","option-sync-video-desc":"Sync video files with these extensions: {{extensions}}.","option-sync-pdf":"Sync PDFs","option-sync-pdf-desc":"Sync PDF files.","option-sync-unsupported":"Sync all other types","option-sync-unsupported-desc":"Sync unsupported file types.","option-vault-config-sync":"Vault configuration sync","option-view-config-files":"Settings version history","option-view-config-files-desc":"View and restore version history of setting files.","option-sync-app":"Main settings","option-sync-app-desc":"Enable to sync editor settings, files & links settings, etc.","option-sync-appearance":"Appearance settings","option-sync-appearance-desc":"Sync appearance settings like dark mode, active theme, and enabled snippets.","option-sync-appearance-data":"Themes and snippets","option-sync-appearance-data-desc":"Sync downloaded themes and snippets. Whether they are enabled depends on the previous setting.","option-sync-hotkey":"Hotkeys","option-sync-hotkey-desc":"Sync custom hotkeys.","option-sync-core-plugin":"Active core plugin list","option-sync-core-plugin-desc":"Sync which core plugins are enabled.","option-sync-core-plugin-data":"Core plugin settings","option-sync-core-plugin-data-desc":"Sync core plugin settings.","option-sync-community-plugin":"Active community plugin list","option-sync-community-plugin-desc":"Sync which community plugins are enabled.","option-sync-community-plugin-data":"Installed community plugins","option-sync-community-plugin-data-desc":"Sync installed community plugins (.js, .css, and manifest.json files) and their settings.","label-sync-introduction":"Obsidian Sync is Obsidian's add-on sync service with end-to-end encryption and version history.","label-account-required":"To start syncing, please log in or create a new Obsidian account.","button-sign-up":"Sign up","button-log-in":"Log in","label-manage-excluded-folders":"Manage excluded folders","label-number-of-folders-excluded":"{{folders}} are currently excluded from being synced.","label-setup-connection":"Setup connection","label-now-connected-to-vault":'You\'re now connected to "{{name}}".',"button-start-syncing":"Start syncing","label-confirm-merge-vault":"Confirm Merge Vault","msg-vault-has-notes":"Your local vault already contains some notes.","msg-merge-warning":'If you connect to the remote vault "{{name}}", notes in your local vault will be merged with notes from your remote vault.'},"file-recovery":{name:"File recovery",desc:"Let you restore recent snapshots to recover from accidental data loss. Snapshots are only saved for Markdown files.","action-open":"Open saved snapshots","option-interval":"Snapshot interval","option-interval-description":"Minimal interval in minutes between two snapshots.","option-keep":"History length","option-keep-description":"Length in days snapshots is kept for.","option-open-history":"Snapshots","option-open-history-description":"View and restore saved snapshots.","button-view-snapshots":"View","option-clear":"Clear history","option-clear-description":"Wipe all snapshots.","button-clear-history":"Clear","label-clear-warning":"Are you sure you want to delete all snapshots? Note that only snapshots will be removed. All files inside your vault will not be affected.","msg-clear-complete":"Snapshots cleared.","label-no-history-found":"No snapshots found.","placeholder-choose-file":"Choose a file...","label-select-file":"Please select a file on the left to view snapshots."},"note-composer":{name:"Note composer",desc:"Merge, split, and refactor notes.","option-confirm-file-merge":"Confirm file merge","option-confirm-file-merge-description":"Prompt before merge two files.","option-split-replacement-text":"Text after extraction","option-split-replacement-text-description":"What to show in place of the selected text after extracting it.","option-choice-split-replacement-text-link":"Link to new file","option-choice-split-replacement-text-embed":"Embed new file","option-choice-split-replacement-text-none":"None","option-template-file":"Template file location","option-template-file-description":"Template file to use when merging or extracting. Available variables: {{content}}, {{fromTitle}}, {{newTitle}}, {{date:FORMAT}}, e.g. {{date:YYYY-MM-DD}}.","command-merge-file":"Merge current file with another file...","action-merge-file":"Merge entire file with...","label-no-files":"No files found.","instruction-navigate":"to navigate","instruction-merge":"to merge","instruction-create-new":"to create new","instruction-merge-at-top":"to merge at top","instruction-dismiss":"to dismiss","prompt-select-file-to-merge":"Select file to merge into...","label-merge-file":"Merge file","label-confirm-file-merge":'Are you sure you want to merge "{{file}}" into "{{destination}}"? "{{file}}" will be deleted.',"button-merge":"Merge","button-merge-do-not-ask-again":"Merge and don't ask again","command-split-file":"Extract current selection...","command-extract-heading":"Extract this heading...","instruction-append":"to move to bottom","instruction-prepend":"to move to top","msg-fail-to-fetch-template":'Failed to fetch template file: "{{template}}" not found.',"msg-fail-to-find-heading":"Failed to find heading"}},nouns:{"word-with-count":"{{count}} word","word-with-count_plural":"{{count}} words","character-with-count":"{{count}} character","character-with-count_plural":"{{count}} characters","link-with-count":"{{count}} link","link-with-count_plural":"{{count}} links","file-with-count":"{{count}} file","file-with-count_plural":"{{count}} files","folder-with-count":"{{count}} folder","folder-with-count_plural":"{{count}} folders","backlink-with-count":"{{count}} backlink","backlink-with-count_plural":"{{count}} backlinks","site-with-count":"{{count}} site","site-with-count_plural":"{{count}} sites","plugin-with-count":"{{count}} plugin","plugin-with-count_plural":"{{count}} plugins"}};function we(t,e){if(String.isString(t))return null!==e&&String.isString(e)?e:t;var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=we(t[i],e&&e[i]||null));return n}i18next.addResourceBundle(ge,ye,be);var ke=Promise.resolve(),Ce=localStorage.getItem(fe);if(Ce){!1,ke=D(void 0,void 0,void 0,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,ajaxPromise({url:"/i18n/"+Ce+".json"})];case 1:return t=n.sent(),e=JSON.parse(t),i18next.addResourceBundle(Ce,ye,e),[4,i18next.changeLanguage(Ce)];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.error("Failed to load language pack."),[3,4];case 4:return!0,[2]}}))}));try{var xe=Ce.toLowerCase(),Se={zh:"zh-cn",cz:"cs",no:"nn"};Se.hasOwnProperty(xe)&&(xe=Se[xe]),window.moment.locale(xe)}catch(t){}}pe&&le((function(t){window.i18nGenBundles=function(){var e=window.require("fs"),n=t.ipcRenderer.sendSync("resources");for(var i in me)if(me.hasOwnProperty(i)){var r=n+"/i18n/"+i+".json";try{if(e.existsSync(r)){var o=e.readFileSync(r,"utf8"),s=JSON.parse(o),a=we(be,s),l=JSON.stringify(a,null,"\t");e.writeFileSync(r,l,"utf8"),console.log("Saved bundle for",i)}}catch(t){console.error("Failed to process translation for",i,t)}}}}));var Ee=i18next.t.bind(i18next);function Me(t){t+=".";var e=function(e,n){return Ee(t+e,n)};return e.prefix=function(e){return Me(t+e)},e}function Le(t){if(!t)return"";var e=t.split("-"),n={ab:"Abkhazian",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari languages",bi:"Bislama",nb:"Norwegian Bokmål",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",es:"Spanish",ca:"Valencian",km:"Central Khmer",ch:"Chamorro",ce:"Chechen",ny:"Nyanja",zh:"Chinese",za:"Zhuang",cu:"Old Slavonic",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Maldivian",nl:"Flemish",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fr:"French",ff:"Fulah",gd:"Scottish Gaelic",gl:"Galician",lg:"Ganda",ka:"Georgian",de:"German",ki:"Kikuyu",el:"Greek, Modern (1453-)",kl:"Kalaallisut",gn:"Guarani",gu:"Gujarati",ht:"Haitian Creole",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",is:"Icelandic",io:"Ido",ig:"Igbo",id:"Indonesian",ia:"Interlingua (International Auxiliary Language Association)",ie:"Occidental",iu:"Inuktitut",ik:"Inupiaq",ga:"Irish",it:"Italian",ja:"Japanese",jv:"Javanese",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",rw:"Kinyarwanda",ky:"Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",kj:"Kwanyama",ku:"Kurdish",lo:"Lao",la:"Latin",lv:"Latvian",lb:"Luxembourgish",li:"Limburgish",ln:"Lingala",lt:"Lithuanian",lu:"Luba-Katanga",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",gv:"Manx",mi:"Maori",mr:"Marathi",mh:"Marshallese",ro:"Romanian",mn:"Mongolian",na:"Nauru",nv:"Navajo",nd:"North Ndebele",nr:"South Ndebele",ng:"Ndonga",ne:"Nepali",se:"Northern Sami",no:"Norwegian",nn:"Nynorsk, Norwegian",ii:"Sichuan Yi",oc:"Occitan (post 1500)",oj:"Ojibwa",or:"Oriya",om:"Oromo",os:"Ossetic",pi:"Pali",pa:"Punjabi",ps:"Pushto",fa:"Persian",pl:"Polish",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ru:"Russian",sm:"Samoan",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sr:"Serbian",sn:"Shona",sd:"Sindhi",si:"Sinhalese",sk:"Slovak",sl:"Slovenian",so:"Somali",st:"Sotho, Southern",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",tl:"Tagalog",ty:"Tahitian",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",bo:"Tibetan",ti:"Tigrinya",to:"Tonga (Tonga Islands)",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",tw:"Twi",ug:"Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",cy:"Welsh",fy:"Western Frisian",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"},i={abk:"Abkhazian",ace:"Achinese",ach:"Acoli",ada:"Adangme",ady:"Adyghe",aar:"Afar",afh:"Afrihili",afr:"Afrikaans",afa:"Afro-Asiatic languages",ain:"Ainu",aka:"Akan",akk:"Akkadian",alb:"Albanian",sqi:"Albanian",gsw:"Swiss German",ale:"Aleut",alg:"Algonquian languages",tut:"Altaic languages",amh:"Amharic",anp:"Angika",apa:"Apache languages",ara:"Arabic",arg:"Aragonese",arp:"Arapaho",arw:"Arawak",arm:"Armenian",hye:"Armenian",rup:"Macedo-Romanian",art:"Artificial languages",asm:"Assamese",ast:"Leonese",ath:"Athapascan languages",aus:"Australian languages",map:"Austronesian languages",ava:"Avaric",ave:"Avestan",awa:"Awadhi",aym:"Aymara",aze:"Azerbaijani",ban:"Balinese",bat:"Baltic languages",bal:"Baluchi",bam:"Bambara",bai:"Bamileke languages",bad:"Banda languages",bnt:"Bantu languages",bas:"Basa",bak:"Bashkir",baq:"Basque",eus:"Basque",btk:"Batak languages",bej:"Beja",bel:"Belarusian",bem:"Bemba",ben:"Bengali",ber:"Berber languages",bho:"Bhojpuri",bih:"Bihari languages",bik:"Bikol",byn:"Blin",bin:"Edo",bis:"Bislama",zbl:"Blissymbols",nob:"Norwegian Bokmål",bos:"Bosnian",bra:"Braj",bre:"Breton",bug:"Buginese",bul:"Bulgarian",bua:"Buriat",bur:"Burmese",mya:"Burmese",cad:"Caddo",spa:"Spanish",cat:"Valencian",cau:"Caucasian languages",ceb:"Cebuano",cel:"Celtic languages",cai:"Central American Indian languages",khm:"Central Khmer",chg:"Chagatai",cmc:"Chamic languages",cha:"Chamorro",che:"Chechen",chr:"Cherokee",nya:"Nyanja",chy:"Cheyenne",chb:"Chibcha",chi:"Chinese",zho:"Chinese",chn:"Chinook jargon",chp:"Dene Suline",cho:"Choctaw",zha:"Zhuang",chu:"Old Slavonic",chk:"Chuukese",chv:"Chuvash",nwc:"Old Newari",syc:"Classical Syriac",rar:"Rarotongan",cop:"Coptic",cor:"Cornish",cos:"Corsican",cre:"Cree",mus:"Creek",crp:"Creoles and pidgins",cpe:"Creoles and pidgins, English based",cpf:"Creoles and pidgins, French-based",cpp:"Creoles and pidgins, Portuguese-based",crh:"Crimean Turkish",hrv:"Croatian",cus:"Cushitic languages",cze:"Czech",ces:"Czech",dak:"Dakota",dan:"Danish",dar:"Dargwa",del:"Delaware",div:"Maldivian",zza:"Zazaki",din:"Dinka",doi:"Dogri",dgr:"Dogrib",dra:"Dravidian languages",dua:"Duala",dut:"Flemish",nld:"Flemish",dum:"Dutch, Middle (ca.1050-1350)",dyu:"Dyula",dzo:"Dzongkha",frs:"Eastern Frisian",efi:"Efik",egy:"Egyptian (Ancient)",eka:"Ekajuk",elx:"Elamite",eng:"English",enm:"English, Middle (1100-1500)",ang:"English, Old (ca.450-1100)",myv:"Erzya",epo:"Esperanto",est:"Estonian",ewe:"Ewe",ewo:"Ewondo",fan:"Fang",fat:"Fanti",fao:"Faroese",fij:"Fijian",fil:"Pilipino",fin:"Finnish",fiu:"Finno-Ugrian languages",fon:"Fon",fre:"French",fra:"French",frm:"French, Middle (ca.1400-1600)",fro:"French, Old (842-ca.1400)",fur:"Friulian",ful:"Fulah",gaa:"Ga",gla:"Scottish Gaelic",car:"Galibi Carib",glg:"Galician",lug:"Ganda",gay:"Gayo",gba:"Gbaya",gez:"Geez",geo:"Georgian",kat:"Georgian",ger:"German",deu:"German",nds:"Saxon, Low",gmh:"German, Middle High (ca.1050-1500)",goh:"German, Old High (ca.750-1050)",gem:"Germanic languages",kik:"Kikuyu",gil:"Gilbertese",gon:"Gondi",gor:"Gorontalo",got:"Gothic",grb:"Grebo",grc:"Greek, Ancient (to 1453)",gre:"Greek, Modern (1453-)",ell:"Greek, Modern (1453-)",kal:"Kalaallisut",grn:"Guarani",guj:"Gujarati",gwi:"Gwich'in",hai:"Haida",hat:"Haitian Creole",hau:"Hausa",haw:"Hawaiian",heb:"Hebrew",her:"Herero",hil:"Hiligaynon",him:"Western Pahari languages",hin:"Hindi",hmo:"Hiri Motu",hit:"Hittite",hmn:"Mong",hun:"Hungarian",hup:"Hupa",iba:"Iban",ice:"Icelandic",isl:"Icelandic",ido:"Ido",ibo:"Igbo",ijo:"Ijo languages",ilo:"Iloko",arc:"Official Aramaic (700-300 BCE)",smn:"Inari Sami",inc:"Indic languages",ine:"Indo-European languages",ind:"Indonesian",inh:"Ingush",ina:"Interlingua (International Auxiliary Language Association)",ile:"Occidental",iku:"Inuktitut",ipk:"Inupiaq",ira:"Iranian languages",gle:"Irish",mga:"Irish, Middle (900-1200)",sga:"Irish, Old (to 900)",iro:"Iroquoian languages",ita:"Italian",jpn:"Japanese",jav:"Javanese",kac:"Kachin",jrb:"Judeo-Arabic",jpr:"Judeo-Persian",kbd:"Kabardian",kab:"Kabyle",xal:"Oirat",kam:"Kamba",kan:"Kannada",kau:"Kanuri",pam:"Pampanga",kaa:"Kara-Kalpak",krc:"Karachay-Balkar",krl:"Karelian",kar:"Karen languages",kas:"Kashmiri",csb:"Kashubian",kaw:"Kawi",kaz:"Kazakh",kha:"Khasi",khi:"Khoisan languages",kho:"Sakan",kmb:"Kimbundu",kin:"Kinyarwanda",kir:"Kyrgyz",tlh:"tlhIngan-Hol",kom:"Komi",kon:"Kongo",kok:"Konkani",kor:"Korean",kos:"Kosraean",kpe:"Kpelle",kro:"Kru languages",kua:"Kwanyama",kum:"Kumyk",kur:"Kurdish",kru:"Kurukh",kut:"Kutenai",lad:"Ladino",lah:"Lahnda",lam:"Lamba",day:"Land Dayak languages",lao:"Lao",lat:"Latin",lav:"Latvian",ltz:"Luxembourgish",lez:"Lezghian",lim:"Limburgish",lin:"Lingala",lit:"Lithuanian",jbo:"Lojban",dsb:"Lower Sorbian",loz:"Lozi",lub:"Luba-Katanga",lua:"Luba-Lulua",lui:"Luiseno",smj:"Lule Sami",lun:"Lunda",luo:"Luo (Kenya and Tanzania)",lus:"Lushai",mac:"Macedonian",mkd:"Macedonian",mad:"Madurese",mag:"Magahi",mai:"Maithili",mak:"Makasar",mlg:"Malagasy",may:"Malay",msa:"Malay",mal:"Malayalam",mlt:"Maltese",mnc:"Manchu",mdr:"Mandar",man:"Mandingo",mni:"Manipuri",mno:"Manobo languages",glv:"Manx",mao:"Maori",mri:"Maori",arn:"Mapudungun",mar:"Marathi",chm:"Mari",mah:"Marshallese",mwr:"Marwari",mas:"Masai",myn:"Mayan languages",men:"Mende",mic:"Micmac",min:"Minangkabau",mwl:"Mirandese",moh:"Mohawk",mdf:"Moksha",rum:"Romanian",ron:"Romanian",mkh:"Mon-Khmer languages",lol:"Mongo",mon:"Mongolian",mos:"Mossi",mul:"Multiple languages",mun:"Munda languages",nqo:"N'Ko",nah:"Nahuatl languages",nau:"Nauru",nav:"Navajo",nde:"North Ndebele",nbl:"South Ndebele",ndo:"Ndonga",nap:"Neapolitan",new:"Newari",nep:"Nepali",nia:"Nias",nic:"Niger-Kordofanian languages",ssa:"Nilo-Saharan languages",niu:"Niuean",zxx:"Not applicable",nog:"Nogai",non:"Norse, Old",nai:"North American Indian languages",frr:"Northern Frisian",sme:"Northern Sami",nso:"Sotho, Northern",nor:"Norwegian",nno:"Nynorsk, Norwegian",nub:"Nubian languages",iii:"Sichuan Yi",nym:"Nyamwezi",nyn:"Nyankole",nyo:"Nyoro",nzi:"Nzima",oci:"Occitan (post 1500)",pro:"Provençal, Old (to 1500)",oji:"Ojibwa",ori:"Oriya",orm:"Oromo",osa:"Osage",oss:"Ossetic",oto:"Otomian languages",pal:"Pahlavi",pau:"Palauan",pli:"Pali",pag:"Pangasinan",pan:"Punjabi",pap:"Papiamento",paa:"Papuan languages",pus:"Pushto",per:"Persian",fas:"Persian",peo:"Persian, Old (ca.600-400 B.C.)",phi:"Philippine languages",phn:"Phoenician",pon:"Pohnpeian",pol:"Polish",por:"Portuguese",pra:"Prakrit languages",que:"Quechua",raj:"Rajasthani",rap:"Rapanui","qaa-qtz":"Reserved for local use",roa:"Romance languages",roh:"Romansh",rom:"Romany",run:"Rundi",rus:"Russian",sal:"Salishan languages",sam:"Samaritan Aramaic",smi:"Sami languages",smo:"Samoan",sad:"Sandawe",sag:"Sango",san:"Sanskrit",sat:"Santali",srd:"Sardinian",sas:"Sasak",sco:"Scots",sel:"Selkup",sem:"Semitic languages",srp:"Serbian",srr:"Serer",shn:"Shan",sna:"Shona",scn:"Sicilian",sid:"Sidamo",sgn:"Sign Languages",bla:"Siksika",snd:"Sindhi",sin:"Sinhalese",sit:"Sino-Tibetan languages",sio:"Siouan languages",sms:"Skolt Sami",den:"Slave (Athapascan)",sla:"Slavic languages",slo:"Slovak",slk:"Slovak",slv:"Slovenian",sog:"Sogdian",som:"Somali",son:"Songhai languages",snk:"Soninke",wen:"Sorbian languages",sot:"Sotho, Southern",sai:"South American Indian languages",alt:"Southern Altai",sma:"Southern Sami",srn:"Sranan Tongo",suk:"Sukuma",sux:"Sumerian",sun:"Sundanese",sus:"Susu",swa:"Swahili",ssw:"Swati",swe:"Swedish",syr:"Syriac",tgl:"Tagalog",tah:"Tahitian",tai:"Tai languages",tgk:"Tajik",tmh:"Tamashek",tam:"Tamil",tat:"Tatar",tel:"Telugu",ter:"Tereno",tet:"Tetum",tha:"Thai",tib:"Tibetan",bod:"Tibetan",tig:"Tigre",tir:"Tigrinya",tem:"Timne",tiv:"Tiv",tli:"Tlingit",tpi:"Tok Pisin",tkl:"Tokelau",tog:"Tonga (Nyasa)",ton:"Tonga (Tonga Islands)",tsi:"Tsimshian",tso:"Tsonga",tsn:"Tswana",tum:"Tumbuka",tup:"Tupi languages",tur:"Turkish",ota:"Turkish, Ottoman (1500-1928)",tuk:"Turkmen",tvl:"Tuvalu",tyv:"Tuvinian",twi:"Twi",udm:"Udmurt",uga:"Ugaritic",uig:"Uyghur",ukr:"Ukrainian",umb:"Umbundu",mis:"Uncoded languages",und:"Undetermined",hsb:"Upper Sorbian",urd:"Urdu",uzb:"Uzbek",vai:"Vai",ven:"Venda",vie:"Vietnamese",vol:"Volapük",vot:"Votic",wak:"Wakashan languages",wln:"Walloon",war:"Waray",was:"Washo",wel:"Welsh",cym:"Welsh",fry:"Western Frisian",wal:"Wolaytta",wol:"Wolof",xho:"Xhosa",sah:"Yakut",yao:"Yao",yap:"Yapese",yid:"Yiddish",yor:"Yoruba",ypk:"Yupik languages",znd:"Zande languages",zap:"Zapotec",zen:"Zenaga",zul:"Zulu",zun:"Zuni"},r={AF:"Afghanistan",AX:"Åland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, the Democratic Republic of the",CK:"Cook Islands",CR:"Costa Rica",CI:"Côte d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"Curaçao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic of",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia, the Former Yugoslav Republic of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Réunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthélemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin (French part)",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, Bolivarian Republic of",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};return e.length>1?(n[e[0]]||i[e[0]]||e[0])+" ("+(r[e[1]]||e[1])+")"+e.slice(2).map((function(t){return"("+t+")"})).join(""):e.length>0?n[e[0]]||i[e[0]]||r[e[0]]||e[0]:""}function De(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=null,r=null,o=null,s=0,a=function(){if(s){var e=Date.now();if(e<s)return i=window.setTimeout(a,s-e),void(s=0)}i=null,t.apply(r,o)},l=function(){for(var t=[],l=0;l<arguments.length;l++)t[l]=arguments[l];r=this,o=t,i?n&&(s=Date.now()+e):i=window.setTimeout(a,e)};return l.cancel=function(){return i&&(clearTimeout(i),i=null),l},l}function Ae(t){if(navigator.clipboard&&navigator.permissions)navigator.clipboard.writeText(t);else{var e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e);try{e.focus(),e.select(),document.execCommand("copy")}catch(t){}document.body.removeChild(e)}}function Te(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o;return A(this,(function(s){return n=t.getAttr("alt")||null,i=t.createEl("img",{attr:{alt:n}}),r=t.getAttr("width"),o=t.getAttr("height"),r&&i.setAttr("width",r),o&&i.setAttr("height",o),[2,new Promise((function(t){var n=function(){return t()};i.addEventListener("load",n),i.addEventListener("error",n),setTimeout(n,5e3),i.src=e}))]}))}))}function Pe(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){return n=t.createEl("audio",{attr:{controls:""}}),[2,new Promise((function(t){var i=function(){return t()};n.addEventListener("loadedmetadata",i),n.addEventListener("error",i),setTimeout(i,5e3),n.src=e}))]}))}))}function Oe(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){return n=t.createEl("video",{attr:{controls:""}}),[2,new Promise((function(i){var r=function(){return i()};n.addEventListener("loadedmetadata",(function(){0===n.videoWidth&&0===n.videoHeight?(t.removeChild(n),Pe(t,e).then(r,r)):r()})),n.addEventListener("error",r),setTimeout(r,5e3),n.src=e}))]}))}))}var Fe=window.requestIdleCallback;function Ie(t,e){if(e>0&&Fe){var n=Fe(t,{timeout:e});return{high:!1,cancel:function(){return window.cancelIdleCallback(n)}}}var i=requestAnimationFrame(t);return{high:!0,cancel:function(){return cancelAnimationFrame(i)}}}function Ne(t,e){var n=t.relatedTarget;return!(n instanceof Node&&e.contains(n))}function Be(t){t.addEventListener("mousedown",(function(t){1===t.button&&t.preventDefault()}))}/bot|crawl|spider/i.test(navigator.userAgent);var Re={sx:0,sy:0,ex:0,ey:0,t:0};function ze(t){return Re&&Date.now()-Re.t<1e3&&Math.abs(t.clientX-Re.sx)<5&&Math.abs(t.clientY-Re.sy)<5||Math.abs(t.clientX-Re.ex)<5&&Math.abs(t.clientY-Re.ey)<5}function He(t,e,n,i,r,o){function s(t){var e,i=t.clientY,r=Array.from(n.childNodes);for(e=0;e<r.length;e++){if(i<r[e].getBoundingClientRect().bottom)return e}return e}var a,l;i*=i,l=function(t,a){var l=a.clientX,c=a.clientY,u=e.getBoundingClientRect(),h=l-u.x,p=c-u.y,d=null;return{move:function(t,o){t.preventDefault();var a=o.clientX,u=o.clientY;if(null===d){var f=a-l,g=u-c;if(f*f+g*g<i)return!0;var m=e.offsetWidth,v=e.offsetHeight;d=createDiv("drag-ghost");var y=e.cloneNode(!0);d.appendChild(y),d.style.padding="0 5px",d.style.maxWidth="unset",y.style.width=m+"px",y.style.height=v+"px",document.body.appendChild(d),document.body.addClass("is-grabbing"),e.style.visibility="hidden",r();var b=d.getBoundingClientRect(),w=y.getBoundingClientRect();h+=w.x-b.x,p+=w.y-b.y}t.preventDefault();var k=s(o);d&&(d.style.left=a-h+"px",d.style.top=u-p+"px"),e.detach();var C=n.childNodes[k];return n.insertBefore(e,C),!0},end:function(t,i){if(t.preventDefault(),d){var r=s(i);d.detach(),document.body.removeClass("is-grabbing"),e.style.visibility="",e.detach();var a=n.childNodes[r];n.insertBefore(e,a),o(r)}}}},(a=t).addEventListener("mousedown",(function(t){if(0===t.button&&!ze(t)){var e=l(t,t);if(e){var n=function(t){e.move(t,t)||r()},i=function(t){r(),e.end(t,t)},r=function(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)}}})),a.addEventListener("touchstart",(function(t){if(!(t.touches.length>1)){var e=t.touches[0],n=l(t,e);if(n){var i=e.identifier,r=function(t){for(var e=t.changedTouches,n=0;n<e.length;n++){var r=e[n];if(r.identifier===i)return r}return null},o=function(t){var e=r(t);e&&(c(),n.end(t,e))},s=function(t){var e=r(t);e&&(c(),n.end(t,e))},a=function(t){var e=r(t);e&&(n.move(t,e)||c())},c=function(){document.removeEventListener("touchcancel",s),document.removeEventListener("touchend",o),document.removeEventListener("touchmove",a)};document.addEventListener("touchcancel",s),document.addEventListener("touchend",o),document.addEventListener("touchmove",a,{passive:!1})}}}))}var Ve=null,qe=null;var je=null;function Ue(){je&&(clearTimeout(je),je=null)}function _e(t,e){if(Ne(t,e)&&!ze(t)){Ue();var n=e.getAttribute("aria-label")||"",i="bottom";e.hasAttribute("aria-label-position")&&(i=e.getAttribute("aria-label-position"));var r=[];e.hasAttribute("aria-label-classes")&&(r=(e.getAttribute("aria-label-classes")||"").split(" "));var o=0;e.hasAttribute("aria-label-delay")&&(o=parseInt(e.getAttribute("aria-label-delay")||""),isNaN(o)&&(o=0)),Ge(e,n,{placement:i,classes:r,delay:o})}}function We(t,e){Ne(t,e)&&Ke()}function Ge(t,e,n){var i=(n=n||{}).placement,r=void 0===i?"bottom":i,o=n.classes,s=void 0===o?[]:o,a=n.gap,l=void 0===a?8:a,c=n.horizontalParent,u=n.delay,h=void 0===u?0:u;if(h>0)return Ue(),n.delay=0,void(je=window.setTimeout((function(){return Ge(t,e,n)}),h));if(e){var p=t.getBoundingClientRect(),d=p.top,f=p.left,g=p.width,m=p.height;if(c){var v=c.getBoundingClientRect();f=v.left,g=v.width}Ve&&qe===t?Ve.setText(e):(Ke(),Ve=createDiv({cls:"tooltip",text:e}));var y=Ve.createDiv("tooltip-arrow"),b=0,w=0;"bottom"===r?(b=d+m+l,w=f+g/2):"right"===r?(b=d+m/2,w=f+g+l,s.push("mod-right")):"left"===r?(b=d+m/2,w=f-l,s.push("mod-left")):"top"===r&&(b=d-l-5,w=f+g/2,s.push("mod-top")),Ve.addClasses(s),Ve.style.top="0px",Ve.style.left="0px",Ve.style.width="",Ve.style.height="",Ve.parentNode||document.body.appendChild(Ve);var k=Ve.getBoundingClientRect(),C=["bottom","top"].contains(r)?k.width/2:k.width,x="right"===r||"left"===r?k.height/2:k.height;if("left"===r?w-=C:"top"===r&&(b-=x),b+x>window.innerHeight&&(b=window.innerHeight-x-l),b=Math.max(b,l),"top"===r||"bottom"===r){if(w+C>window.innerWidth)w-=S=w+C+l-window.innerWidth,y.style.left="initial",y.style.right=C-S-l/2+"px";else if(w-l-C<0){var S;w+=S=-(w-l-C),y.style.right="initial",y.style.left=C-S-l/2+"px"}w=Math.max(w,l)}Ve.style.top=b+"px",Ve.style.left=w+"px",Ve.style.width=k.width+"px",Ve.style.height=k.height+"px",qe=t}}function Ke(){Ue(),Ve&&(Ve.detach(),Ve=null,qe=null)}function $e(t,e,n){t.setAttribute("aria-label",e);var i=n||{},r=i.placement,o=i.classes,s=i.delay;r&&"bottom"!==r&&t.setAttribute("aria-label-position",r),o&&t.setAttribute("aria-label-classes",o.join(" ")),s&&t.setAttribute("aria-label-delay",String(s)),qe===t&&Ge(t,e,n)}var Ye,Je,Qe=function(){function t(t){this.leftSpacing=0,this.win=t;var e=this.isMac="darwin"===window.process.platform,n=document.body;n.addClass("is-frameless");var i=this.titleBarEl=createDiv("titlebar");n.insertBefore(i,n.firstChild);var r=this.titleBarInnerEl=i.createDiv("titlebar-inner");this.titleBarLeftEl=r.createDiv("titlebar-left"),this.titleBarTextEl=r.createDiv({cls:"titlebar-text",text:"Obsidian"}),window.addEventListener("resize",this.updateStatus.bind(this)),new MutationObserver(this.updateTitle.bind(this)).observe(fish("title"),{subtree:!0,characterData:!0,childList:!0}),this.leftButtonContainerEl=r.createDiv("titlebar-button-container mod-left");var o=r.createDiv("titlebar-button-container mod-right");if(this.updateStatus(),this.updateTitle(),!e){if(t.minimizable){var s=o.createDiv("titlebar-button mod-minimize");s.innerHTML='<svg aria-hidden="false" width="10" height="10" viewBox="0 0 12 12"><rect fill="currentColor" width="10" height="1" x="1" y="6"></rect></svg>',ke.then((function(){$e(s,Ee("interface.window.minimize"))})),s.addEventListener("click",(function(){t.minimize()}))}if(t.maximizable){var a=o.createDiv("titlebar-button mod-maximize");a.innerHTML='<svg aria-hidden="false" width="10" height="10" viewBox="0 0 12 12"><rect width="9" height="9" x="1.5" y="1.5" fill="none" stroke="currentColor"></rect></svg>';var l=function(){t.isMaximized()?$e(a,Ee("interface.window.restore-down")):$e(a,Ee("interface.window.maximize"))};a.addEventListener("click",(function(){t.isMaximized()?t.unmaximize():t.maximize(),l()})),ke.then((function(){l()})),window.addEventListener("resize",l)}if(t.closable){var c=o.createDiv("titlebar-button mod-close");c.innerHTML='<svg aria-hidden="false" width="10" height="10" viewBox="0 0 12 12"><polygon fill="currentColor" fill-rule="evenodd" points="11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"></polygon></svg>',ke.then((function(){$e(c,Ee("interface.window.close-window"))})),c.addEventListener("click",(function(){t.close()}))}}e&&t.maximizable&&r.addEventListener("dblclick",(function(e){0===e.button&&le((function(e){var n=e.remote.systemPreferences.getUserDefault("AppleActionOnDoubleClick","string");"Minimize"===n?t.minimize():"Maximize"!==n&&""!==n||(t.isMaximized()?t.unmaximize():t.maximize())}))}))}return t.prototype.updateTitle=function(){this.titleBarTextEl.setText(document.title)},t.prototype.updateStatus=function(){var t=this,e=t.win,n=t.isMac,i=t.titleBarEl,r=e.webContents.getZoomFactor(),o=document.body,s=e.isFullScreen(),a=22,l=(e.isMaximized()?0:2)/r;a+=l,s&&(a=0),o.style.paddingTop=a+"px",i.style.height=a+"px",i.style.paddingTop=l+"px",i.toggle(!s),o.toggleClass("is-fullscreen",s),this.leftButtonContainerEl.style.left=n?70/r+"px":this.leftSpacing+"px"},t}();le((function(t){var e=t.remote.getCurrentWindow();e.frameless&&(window.frameDom=new Qe(e))})),function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"}(Ye||(Ye={})),function(t){t.None="NONE",t.Slide="SLIDE",t.Fade="FADE"}(Je||(Je={}));var Xe="https://api.obsidian.md";pe&&(Xe="http://127.0.0.1:3000");var Ze=Xe+"/user/info",tn=Xe+"/subscription/business",en=Xe+"/user/signin",nn=Xe+"/user/signout",rn=Xe+"/vault/list",on=Xe+"/vault/access",sn=Xe+"/vault/create",an=Xe+"/vault/delete",ln=Xe+"/publish/list",cn=Xe+"/publish/create",un=Xe+"/publish/delete",hn=Xe+"/publish/limit",pn=Xe+"/subscription/list",dn="obsidian-account",fn=function(){function t(){this.keyValidation="",this.company="",this.expiry=0,this.seats=0;try{var t=JSON.parse(localStorage.getItem(dn));this.email=t.email,this.name=t.name,this.token=t.token,this.license=t.license,this.key=t.key}catch(t){}}return t.prototype.save=function(){var t={email:this.email,name:this.name,token:this.token,license:this.license,key:this.key};localStorage.setItem(dn,JSON.stringify(t))},t.prototype.login=function(t,e,n){var i=this;ajax({url:en,method:"POST",withCredentials:!1,data:{email:t,password:e},success:function(t){var e=JSON.parse(t);e.token&&(i.token=e.token,i.save()),n&&n(e)}})},t.prototype.logout=function(t){var e=this;ajax({url:nn,method:"POST",withCredentials:!1,data:{token:this.token},success:function(n){e.token="",e.email="",e.name="",e.license="",t&&t(n)}})},t.prototype.getUserInfo=function(){return D(this,void 0,Promise,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return[4,ajaxPromise({url:Ze,method:"POST",withCredentials:!1,data:{token:this.token}})];case 1:return t=n.sent(),"Not logged in"===(e=JSON.parse(t)).error?(this.email=null,this.name=null,this.token=null,this.license=null,this.save(),[2]):(this.email=e.email,this.name=e.name,this.license=e.license,this.save(),[2,e])}}))}))},t.prototype.checkKey=function(t){var e=this;this.key?ajax({url:tn,method:"POST",withCredentials:!1,data:{key:this.key},success:function(n){var i=JSON.parse(n);if(i.error)return e.keyValidation=i.error,void(t&&t());e.keyValidation="valid",e.company=i.company,e.expiry=i.expiry,e.seats=i.seats,e.save(),t&&t()},error:t}):t()},t.prototype.getVaults=function(t){ajax({url:rn,method:"POST",withCredentials:!1,data:{token:this.token},success:function(e){var n=JSON.parse(e);t&&t(n.vaults)}})},t.prototype.createVault=function(t,e,n,i){ajax({url:sn,method:"POST",withCredentials:!1,data:{name:t,token:this.token,keyhash:e,salt:n},success:function(t){var e=JSON.parse(t);i&&i(e)}})},t.prototype.deleteVault=function(t,e){ajax({url:an,method:"POST",withCredentials:!1,data:{vault_uid:t,token:this.token},success:function(t){var n=JSON.parse(t);e&&e(n)}})},t.prototype.verifyVaultKey=function(t,e,n){return D(this,void 0,void 0,(function(){return A(this,(function(i){return[2,ajaxPromise({url:on,method:"POST",withCredentials:!1,data:{token:this.token,vault_uid:t,keyhash:e,host:n}})]}))}))},t.prototype.getSites=function(){return D(this,void 0,Promise,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return e=(t=JSON).parse,[4,ajaxPromise({url:ln,method:"POST",withCredentials:!1,data:{token:this.token}})];case 1:return[2,e.apply(t,[n.sent()])]}}))}))},t.prototype.createSite=function(t){ajax({url:cn,method:"POST",withCredentials:!1,data:{token:this.token},success:function(e){var n=JSON.parse(e);t&&t(n)},error:function(e){t&&t(e)}})},t.prototype.deleteSite=function(t,e){ajax({url:un,method:"POST",withCredentials:!1,data:{token:this.token,site_uid:t},success:function(t){var n=JSON.parse(t);e&&e(n)},error:function(t){e&&e(t)}})},t.prototype.getSiteLimit=function(){return D(this,void 0,Promise,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return e=(t=JSON).parse,[4,ajaxPromise({url:hn,method:"POST",withCredentials:!1,data:{token:this.token}})];case 1:return[2,e.apply(t,[n.sent()])]}}))}))},t.prototype.getSubscriptions=function(){return D(this,void 0,Promise,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return e=(t=JSON).parse,[4,ajaxPromise({url:pn,method:"POST",data:{token:this.token}})];case 1:return[2,e.apply(t,[n.sent()])]}}))}))},t.prototype.setKey=function(t){this.key=t,this.save()},t}(),gn=1024,mn=0,vn=function(t,e){this.from=t,this.to=e},yn=function(){function t(t){void 0===t&&(t={}),this.id=mn++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||function(){throw new Error("This node type doesn't define a deserialize function")}}return t.prototype.add=function(t){var e=this;if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=kn.match(t)),function(n){var i=t(n);return void 0===i?null:[e,i]}},t}();yn.closedBy=new yn({deserialize:function(t){return t.split(" ")}}),yn.openedBy=new yn({deserialize:function(t){return t.split(" ")}}),yn.group=new yn({deserialize:function(t){return t.split(" ")}}),yn.contextHash=new yn({perNode:!0}),yn.lookAhead=new yn({perNode:!0}),yn.mounted=new yn({perNode:!0});var bn=function(t,e,n){this.tree=t,this.overlay=e,this.parser=n},wn=Object.create(null),kn=function(){function t(t,e,n,i){void 0===i&&(i=0),this.name=t,this.props=e,this.id=n,this.flags=i}return t.define=function(e){var n=e.props&&e.props.length?Object.create(null):wn,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new t(e.name||"",n,e.id,i);if(e.props)for(var o=0,s=e.props;o<s.length;o++){var a=s[o];if(Array.isArray(a)||(a=a(r)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[a[0].id]=a[1]}}return r},t.prototype.prop=function(t){return this.props[t.id]},Object.defineProperty(t.prototype,"isTop",{get:function(){return(1&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSkipped",{get:function(){return(2&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isError",{get:function(){return(4&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAnonymous",{get:function(){return(8&this.flags)>0},enumerable:!1,configurable:!0}),t.prototype.is=function(t){if("string"==typeof t){if(this.name==t)return!0;var e=this.prop(yn.group);return!!e&&e.indexOf(t)>-1}return this.id==t},t.match=function(t){var e=Object.create(null);for(var n in t)for(var i=0,r=n.split(" ");i<r.length;i++){var o=r[i];e[o]=t[n]}return function(t){for(var n=t.prop(yn.group),i=-1;i<(n?n.length:0);i++){var r=e[i<0?t.name:n[i]];if(r)return r}}},t}();kn.none=new kn("",Object.create(null),0,8);var Cn=function(){function t(t){this.types=t;for(var e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}return t.prototype.extend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i=[],r=0,o=this.types;r<o.length;r++){for(var s=o[r],a=null,l=0,c=e;l<c.length;l++){var u=c[l],h=u(s);h&&(a||(a=Object.assign({},s.props)),a[h[0].id]=h[1])}i.push(a?new kn(s.name,a,s.id,s.flags):s)}return new t(i)},t}(),xn=new WeakMap,Sn=new WeakMap,En=function(){function t(t,e,n,i,r){if(this.type=t,this.children=e,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(var o=0,s=r;o<s.length;o++){var a=s[o],l=a[0],c=a[1];this.props["number"==typeof l?l:l.id]=c}}}return t.prototype.toString=function(){var t=this.prop(yn.mounted);if(t&&!t.overlay)return t.tree.toString();for(var e="",n=0,i=this.children;n<i.length;n++){var r=i[n].toString();r&&(e&&(e+=","),e+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e},t.prototype.cursor=function(t,e){void 0===e&&(e=0);var n=null!=t&&xn.get(this)||this.topNode,i=new Nn(n);return null!=t&&(i.moveTo(t,e),xn.set(this,i._tree)),i},t.prototype.fullCursor=function(){return new Nn(this.topNode,1)},Object.defineProperty(t.prototype,"topNode",{get:function(){return new Pn(this,0,0,null)},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t,e){void 0===e&&(e=0);var n=Tn(xn.get(this)||this.topNode,t,e,!1);return xn.set(this,n),n},t.prototype.resolveInner=function(t,e){void 0===e&&(e=0);var n=Tn(Sn.get(this)||this.topNode,t,e,!0);return Sn.set(this,n),n},t.prototype.iterate=function(t){var e,n=t.enter,i=t.leave,r=t.from,o=void 0===r?0:r,s=t.to,a=void 0===s?this.length:s,l=this;!function(){var t=l.cursor();e=t}();for(var c=e,u=undefined;;){var h=!1;if(c.from<=a&&c.to>=o&&(c.type.isAnonymous||!1!==n(c.type,c.from,c.to,u))){if(c.firstChild())continue;c.type.isAnonymous||(h=!0)}for(;h&&i&&i(c.type,c.from,c.to,u),h=c.type.isAnonymous,!c.nextSibling();){if(!c.parent())return;h=!0}}},t.prototype.prop=function(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)},Object.defineProperty(t.prototype,"propValues",{get:function(){var t=[];if(this.props)for(var e in this.props)t.push([+e,this.props[e]]);return t},enumerable:!1,configurable:!0}),t.prototype.balance=function(e){var n=this;return void 0===e&&(e={}),this.children.length<=8?this:Vn(kn.none,this.children,this.positions,0,this.children.length,0,this.length,(function(e,i,r){return new t(n.type,e,i,r,n.propValues)}),e.makeTree||function(e,n,i){return new t(kn.none,e,n,i)})},t.build=function(t){return Rn(t)},t}();En.empty=new En(kn.none,[],[],0);var Mn=function(){function t(t,e){this.buffer=t,this.index=e}return Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pos",{get:function(){return this.index},enumerable:!1,configurable:!0}),t.prototype.next=function(){this.index-=4},t.prototype.fork=function(){return new t(this.buffer,this.index)},t}(),Ln=function(){function t(t,e,n){this.buffer=t,this.length=e,this.set=n}return Object.defineProperty(t.prototype,"type",{get:function(){return kn.none},enumerable:!1,configurable:!0}),t.prototype.toString=function(){for(var t=[],e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")},t.prototype.childString=function(t){var e=this.buffer[t],n=this.buffer[t+3],i=this.set.types[e],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(t+=4))return r;for(var o=[];t<n;)o.push(this.childString(t)),t=this.buffer[t+3];return r+"("+o.join(",")+")"},t.prototype.findChild=function(t,e,n,i,r){for(var o=this.buffer,s=-1,a=t;a!=e&&!(Dn(r,i,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s},t.prototype.slice=function(e,n,i,r){for(var o=this.buffer,s=new Uint16Array(n-e),a=e,l=0;a<n;)s[l++]=o[a++],s[l++]=o[a++]-i,s[l++]=o[a++]-i,s[l++]=o[a++]-e;return new t(s,r-i,this.set)},t}();function Dn(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function An(t,e){for(var n=t.childBefore(e);n;){var i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(t=n,n=i.prevSibling):n=i}return t}function Tn(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){if(!(s=!i&&t instanceof Pn&&t.index<0?null:t.parent))return t;t=s}if(i)for(var o=t,s=o.parent;s;s=(o=s).parent)o instanceof Pn&&o.index<0&&(null===(r=s.enter(e,n,!0))||void 0===r?void 0:r.from)!=o.from&&(t=s);for(;;){var a=t.enter(e,n,i);if(!a)return t;t=a}}var Pn=function(){function t(t,e,n,i){this.node=t,this._from=e,this.index=n,this._parent=i}return Object.defineProperty(t.prototype,"type",{get:function(){return this.node.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.node.type.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this._from+this.node.length},enumerable:!1,configurable:!0}),t.prototype.nextChild=function(e,n,i,r,o){void 0===o&&(o=0);for(var s=this;;){for(var a=s.node,l=a.children,c=a.positions,u=n>0?l.length:-1;e!=u;e+=n){var h=l[e],p=c[e]+s._from;if(Dn(r,i,p,p+h.length))if(h instanceof Ln){if(2&o)continue;var d=h.findChild(0,h.buffer.length,n,i-p,r);if(d>-1)return new In(new Fn(s,h,e,p),null,d)}else if(1&o||!h.type.isAnonymous||Bn(h)){var f=void 0;if(!(1&o)&&h.props&&(f=h.prop(yn.mounted))&&!f.overlay)return new t(f.tree,p,e,s);var g=new t(h,p,e,s);return 1&o||!g.type.isAnonymous?g:g.nextChild(n<0?h.children.length-1:0,n,i,r)}}if(1&o||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+n:n<0?-1:s._parent.node.children.length,!(s=s._parent))return null}},Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.nextChild(0,1,0,4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.nextChild(this.node.children.length-1,-1,0,4)},enumerable:!1,configurable:!0}),t.prototype.childAfter=function(t){return this.nextChild(0,1,t,2)},t.prototype.childBefore=function(t){return this.nextChild(this.node.children.length-1,-1,t,-2)},t.prototype.enter=function(e,n,i,r){var o;if(void 0===i&&(i=!0),void 0===r&&(r=!0),i&&(o=this.node.prop(yn.mounted))&&o.overlay)for(var s=e-this.from,a=0,l=o.overlay;a<l.length;a++){var c=l[a],u=c.from,h=c.to;if((n>0?u<=s:u<s)&&(n<0?h>=s:h>s))return new t(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r?0:2)},t.prototype.nextSignificantParent=function(){for(var t=this;t.type.isAnonymous&&t._parent;)t=t._parent;return t},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent?this._parent.nextSignificantParent():null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevSibling",{get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{get:function(){return new Nn(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tree",{get:function(){return this.node},enumerable:!1,configurable:!0}),t.prototype.toTree=function(){return this.node},t.prototype.resolve=function(t,e){return void 0===e&&(e=0),Tn(this,t,e,!1)},t.prototype.resolveInner=function(t,e){return void 0===e&&(e=0),Tn(this,t,e,!0)},t.prototype.enterUnfinishedNodesBefore=function(t){return An(this,t)},t.prototype.getChild=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=On(this,t,e,n);return i.length?i[0]:null},t.prototype.getChildren=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),On(this,t,e,n)},t.prototype.toString=function(){return this.node.toString()},t}();function On(t,e,n,i){var r=t.cursor,o=[];if(!r.firstChild())return o;if(null!=n)for(;!r.type.is(n);)if(!r.nextSibling())return o;for(;;){if(null!=i&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return null==i?o:[]}}var Fn=function(t,e,n,i){this.parent=t,this.buffer=e,this.index=n,this.start=i},In=function(){function t(t,e,n){this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}return Object.defineProperty(t.prototype,"name",{get:function(){return this.type.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+2]},enumerable:!1,configurable:!0}),t.prototype.child=function(e,n,i){var r=this.context.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return o<0?null:new t(this.context,this,o)},Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.child(1,0,4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.child(-1,0,4)},enumerable:!1,configurable:!0}),t.prototype.childAfter=function(t){return this.child(1,t,2)},t.prototype.childBefore=function(t){return this.child(-1,t,-2)},t.prototype.enter=function(e,n,i,r){if(void 0===r&&(r=!0),!r)return null;var o=this.context.buffer,s=o.findChild(this.index+4,o.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new t(this.context,this,s)},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent||this.context.parent.nextSignificantParent()},enumerable:!1,configurable:!0}),t.prototype.externalSibling=function(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)},Object.defineProperty(t.prototype,"nextSibling",{get:function(){var e=this.context.buffer,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new t(this.context,this._parent,n):this.externalSibling(1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevSibling",{get:function(){var e=this.context.buffer,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new t(this.context,this._parent,e.findChild(n,this.index,-1,0,4))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{get:function(){return new Nn(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tree",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.toTree=function(){var t=[],e=[],n=this.context.buffer,i=this.index+4,r=n.buffer[this.index+3];if(r>i){var o=n.buffer[this.index+1],s=n.buffer[this.index+2];t.push(n.slice(i,r,o,s)),e.push(0)}return new En(this.type,t,e,this.to-this.from)},t.prototype.resolve=function(t,e){return void 0===e&&(e=0),Tn(this,t,e,!1)},t.prototype.resolveInner=function(t,e){return void 0===e&&(e=0),Tn(this,t,e,!0)},t.prototype.enterUnfinishedNodesBefore=function(t){return An(this,t)},t.prototype.toString=function(){return this.context.buffer.childString(this.index)},t.prototype.getChild=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=On(this,t,e,n);return i.length?i[0]:null},t.prototype.getChildren=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),On(this,t,e,n)},t}(),Nn=function(){function t(t,e){if(void 0===e&&(e=0),this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Pn)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(var n=t._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=t,this.yieldBuf(t.index)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.type.name},enumerable:!1,configurable:!0}),t.prototype.yieldNode=function(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)},t.prototype.yieldBuf=function(t,e){this.index=t;var n=this.buffer,i=n.start,r=n.buffer;return this.type=e||r.set.types[r.buffer[t]],this.from=i+r.buffer[t+1],this.to=i+r.buffer[t+2],!0},t.prototype.yield=function(t){return!!t&&(t instanceof Pn?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))},t.prototype.toString=function(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()},t.prototype.enterChild=function(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree.node.children.length-1:0,t,e,n,this.mode));var i=this.buffer.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],t,e-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))},t.prototype.firstChild=function(){return this.enterChild(1,0,4)},t.prototype.lastChild=function(){return this.enterChild(-1,0,4)},t.prototype.childAfter=function(t){return this.enterChild(1,t,2)},t.prototype.childBefore=function(t){return this.enterChild(-1,t,-2)},t.prototype.enter=function(t,e,n,i){return void 0===n&&(n=!0),void 0===i&&(i=!0),this.buffer?!!i&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n&&!(1&this.mode),i))},t.prototype.parent=function(){if(!this.buffer)return this.yieldNode(1&this.mode?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var t=1&this.mode?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)},t.prototype.sibling=function(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));var e=this.buffer.buffer,n=this.stack.length-1;if(t<0){var i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(e.findChild(i,this.index,-1,0,4))}else{var r=e.buffer[this.index+3];if(r<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))},t.prototype.nextSibling=function(){return this.sibling(1)},t.prototype.prevSibling=function(){return this.sibling(-1)},t.prototype.atLastNode=function(t){var e,n,i,r,o=this.buffer;if(o){if(t>0){if(this.index<o.buffer.buffer.length)return!1}else for(var s=0;s<this.index;s++)if(o.buffer.buffer[s+3]<this.index)return!1;i=o.index,r=o.parent}else i=(e=this._tree).index,r=e._parent;for(;r;i=(n=r).index,r=n._parent)if(i>-1){s=i+t;for(var a=t<0?-1:r.node.children.length;s!=a;s+=t){var l=r.node.children[s];if(1&this.mode||l instanceof Ln||!l.type.isAnonymous||Bn(l))return!1}}return!0},t.prototype.move=function(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}},t.prototype.next=function(t){return void 0===t&&(t=!0),this.move(1,t)},t.prototype.prev=function(t){return void 0===t&&(t=!0),this.move(-1,t)},t.prototype.moveTo=function(t,e){for(void 0===e&&(e=0);(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this},Object.defineProperty(t.prototype,"node",{get:function(){if(!this.buffer)return this._tree;var t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(var i=this.index,r=this.stack.length;r>=0;){for(var o=t;o;o=o._parent)if(o.index==i){if(i==this.index)return o;e=o,n=r+1;break t}i=this.stack[--r]}for(var s=n;s<this.stack.length;s++)e=new In(this.buffer,e,this.stack[s]);return this.bufferNode=new In(this.buffer,e,this.index)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tree",{get:function(){return this.buffer?null:this._tree.node},enumerable:!1,configurable:!0}),t}();function Bn(t){return t.children.some((function(t){return t instanceof Ln||!t.type.isAnonymous||Bn(t)}))}function Rn(t){var e,n=t.buffer,i=t.nodeSet,r=t.maxBufferLength,o=void 0===r?gn:r,s=t.reused,a=void 0===s?[]:s,l=t.minRepeatType,c=void 0===l?i.types.length:l,u=Array.isArray(n)?new Mn(n,n.length):n,h=i.types,p=0,d=0;function f(t,e,n,r,s){for(var l=u.id,y=u.start,b=u.end,w=u.size,k=d;w<0;){if(u.next(),-1==w){var C=a[l];return n.push(C),void r.push(y-t)}if(-3==w)return void(p=l);if(-4==w)return void(d=l);throw new RangeError("Unrecognized record size: "+w)}var x,S,E=h[l],M=y-t;if(b-y<=o&&(S=function(t,e){var n=u.fork(),i=0,r=0,s=0,a=n.end-o,l={size:0,start:0,skip:0};t:for(var h=n.pos-t;n.pos>h;){var p=n.size;if(n.id==e&&p>=0)l.size=i,l.start=r,l.skip=s,s+=4,i+=4,n.next();else{var d=n.pos-p;if(p<0||d<h||n.start<a)break;var f=n.id>=c?4:0,g=n.start;for(n.next();n.pos>d;){if(n.size<0){if(-3!=n.size)break t;f+=4}else n.id>=c&&(f+=4);n.next()}r=g,i+=p,s+=f}}(e<0||i==t)&&(l.size=i,l.start=r,l.skip=s);return l.size>4?l:void 0}(u.pos-e,s))){for(var L=new Uint16Array(S.size-S.skip),D=u.pos-S.size,A=L.length;u.pos>D;)A=v(S.start,L,A);x=new Ln(L,b-S.start,i),M=S.start-t}else{D=u.pos-w;u.next();for(var T=[],P=[],O=l>=c?l:-1,F=0,I=b;u.pos>D;)O>=0&&u.id==O&&u.size>=0?(u.end<=I-o&&(g(T,P,y,F,u.end,I,O,k),F=T.length,I=u.end),u.next()):f(y,D,T,P,O);if(O>=0&&F>0&&F<T.length&&g(T,P,y,F,y,I,O,k),T.reverse(),P.reverse(),O>-1&&F>0){var N=function(t){return function(e,n,i){var r,o,s=0,a=e.length-1;if(a>=0&&(r=e[a])instanceof En){if(!a&&r.type==t&&r.length==i)return r;(o=r.prop(yn.lookAhead))&&(s=n[a]+r.length+o)}return m(t,e,n,i,s)}}(E);x=Vn(E,T,P,0,T.length,0,b-y,N,N)}else x=m(E,T,P,b-y,k-b)}n.push(x),r.push(M)}function g(t,e,n,r,o,s,a,l){for(var c=[],u=[];t.length>r;)c.push(t.pop()),u.push(e.pop()+n-o);t.push(m(i.types[a],c,u,s-o,l-s)),e.push(o-n)}function m(t,e,n,i,r,o){if(void 0===r&&(r=0),p){var s=[yn.contextHash,p];o=o?[s].concat(o):[s]}if(r>25){s=[yn.lookAhead,r];o=o?[s].concat(o):[s]}return new En(t,e,n,i,o)}function v(t,e,n){var i=u.id,r=u.start,o=u.end,s=u.size;if(u.next(),s>=0&&i<c){var a=n;if(s>4)for(var l=u.pos-(s-4);u.pos>l;)n=v(t,e,n);e[--n]=a,e[--n]=o-t,e[--n]=r-t,e[--n]=i}else-3==s?p=i:-4==s&&(d=i);return n}for(var y=[],b=[];u.pos>0;)f(t.start||0,t.bufferStart||0,y,b,-1);var w=null!==(e=t.length)&&void 0!==e?e:y.length?b[0]+y[0].length:0;return new En(h[t.topID],y.reverse(),b.reverse(),w)}var zn=new WeakMap;function Hn(t,e){if(!t.isAnonymous||e instanceof Ln||e.type!=t)return 1;var n=zn.get(e);if(null==n){n=1;for(var i=0,r=e.children;i<r.length;i++){var o=r[i];if(o.type!=t||!(o instanceof En)){n=1;break}n+=Hn(t,o)}zn.set(e,n)}return n}function Vn(t,e,n,i,r,o,s,a,l){for(var c=0,u=i;u<r;u++)c+=Hn(t,e[u]);var h=Math.ceil(1.5*c/8),p=[],d=[];return function e(n,i,r,s,a){for(var c=r;c<s;){var u=c,f=i[c],g=Hn(t,n[c]);for(c++;c<s;c++){var m=Hn(t,n[c]);if(g+m>=h)break;g+=m}if(c==u+1){if(g>h){var v=n[u];e(v.children,v.positions,0,v.children.length,i[u]+a);continue}p.push(n[u])}else{var y=i[c-1]+n[c-1].length-f;p.push(Vn(t,n,i,u,c,f,y,null,l))}d.push(f+a-o)}}(e,n,i,r,0),(a||l)(p,d,s)}var qn=function(){function t(t,e,n,i,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1),this.from=t,this.to=e,this.tree=n,this.offset=i,this.open=(r?1:0)|(o?2:0)}return Object.defineProperty(t.prototype,"openStart",{get:function(){return(1&this.open)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"openEnd",{get:function(){return(2&this.open)>0},enumerable:!1,configurable:!0}),t.addTree=function(e,n,i){void 0===n&&(n=[]),void 0===i&&(i=!1);for(var r=[new t(0,e.length,e,0,!1,i)],o=0,s=n;o<s.length;o++){var a=s[o];a.to>e.length&&r.push(a)}return r},t.applyChanges=function(e,n,i){if(void 0===i&&(i=128),!n.length)return e;for(var r=[],o=1,s=e.length?e[0]:null,a=0,l=0,c=0;;a++){var u=a<n.length?n[a]:null,h=u?u.fromA:1e9;if(h-l>=i)for(;s&&s.from<h;){var p=s;if(l>=p.from||h<=p.to||c){var d=Math.max(p.from,l)-c,f=Math.min(p.to,h)-c;p=d>=f?null:new t(d,f,p.tree,p.offset+c,a>0,!!u)}if(p&&r.push(p),s.to>h)break;s=o<e.length?e[o++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r},t}(),jn=function(){function t(){}return t.prototype.startParse=function(t,e,n){return"string"==typeof t&&(t=new Un(t)),n=n?n.length?n.map((function(t){return new vn(t.from,t.to)})):[new vn(0,0)]:[new vn(0,t.length)],this.createParse(t,e||[],n)},t.prototype.parse=function(t,e,n){for(var i=this.startParse(t,e,n);;){var r=i.advance();if(r)return r}},t}(),Un=function(){function t(t){this.string=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.string.length},enumerable:!1,configurable:!0}),t.prototype.chunk=function(t){return this.string.slice(t)},Object.defineProperty(t.prototype,"lineChunks",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.read=function(t,e){return this.string.slice(t,e)},t}();function _n(t){return function(e,n,i,r){return new $n(e,t,n,i,r)}}var Wn=function(t,e,n,i,r){this.parser=t,this.parse=e,this.overlay=n,this.target=i,this.ranges=r},Gn=function(t,e,n,i,r,o,s){this.parser=t,this.predicate=e,this.mounts=n,this.index=i,this.start=r,this.target=o,this.prev=s,this.depth=0,this.ranges=[]},Kn=new yn({perNode:!0}),$n=function(){function t(t,e,n,i,r){this.nest=e,this.input=n,this.fragments=i,this.ranges=r,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=t}return t.prototype.advance=function(){if(this.baseParse){var t=this.baseParse.advance();if(!t)return null;if(this.baseParse=null,this.baseTree=t,this.startInner(),null!=this.stoppedAt)for(var e=0,n=this.inner;e<n.length;e++){n[e].parse.stopAt(this.stoppedAt)}}if(this.innerDone==this.inner.length){var i=this.baseTree;return null!=this.stoppedAt&&(i=new En(i.type,i.children,i.positions,i.length,i.propValues.concat([[Kn,this.stoppedAt]]))),i}var r=this.inner[this.innerDone],o=r.parse.advance();if(o){this.innerDone++;var s=Object.assign(Object.create(null),r.target.props);s[yn.mounted.id]=new bn(o,r.overlay,r.parser),r.target.props=s}return null},Object.defineProperty(t.prototype,"parsedPos",{get:function(){if(this.baseParse)return 0;for(var t=this.input.length,e=this.innerDone;e<this.inner.length;e++)this.inner[e].ranges[0].from<t&&(t=Math.min(t,this.inner[e].parse.parsedPos));return t},enumerable:!1,configurable:!0}),t.prototype.stopAt=function(t){if(this.stoppedAt=t,this.baseParse)this.baseParse.stopAt(t);else for(var e=this.innerDone;e<this.inner.length;e++)this.inner[e].parse.stopAt(t)},t.prototype.startInner=function(){var t=new Zn(this.fragments),e=null,n=null,i=new Nn(new Pn(this.baseTree,this.ranges[0].from,0,null),1);t:for(var r=void 0,o=void 0;null==this.stoppedAt||i.from<this.stoppedAt;){var s=!0,a=void 0;if(t.hasNode(i)){if(e){var l=e.mounts.find((function(t){return t.frag.from<=i.from&&t.frag.to>=i.to&&t.mount.overlay}));if(l)for(var c=0,u=l.mount.overlay;c<u.length;c++){var h=u[c],p=h.from+l.pos,d=h.to+l.pos;p>=i.from&&d<=i.to&&e.ranges.push({from:p,to:d})}}s=!1}else if(n&&(o=Yn(n.ranges,i.from,i.to)))s=2!=o;else if(!i.type.isAnonymous&&i.from<i.to&&(r=this.nest(i,this.input))){i.tree||Qn(i);var f=t.findMounts(i.from,r.parser);if("function"==typeof r.overlay)e=new Gn(r.parser,r.overlay,f,this.inner.length,i.from,i.tree,e);else(g=ti(this.ranges,r.overlay||[new vn(i.from,i.to)])).length&&this.inner.push(new Wn(r.parser,r.parser.startParse(this.input,ei(f,g),g),r.overlay?r.overlay.map((function(t){return new vn(t.from-i.from,t.to-i.from)})):null,i.tree,g)),r.overlay?g.length&&(n={ranges:g,depth:0,prev:n}):s=!1}else e&&(a=e.predicate(i))&&(!0===a&&(a=new vn(i.from,i.to)),a.from<a.to&&e.ranges.push(a));if(s&&i.firstChild())e&&e.depth++,n&&n.depth++;else for(;!i.nextSibling();){if(!i.parent())break t;var g;e&&!--e.depth&&((g=ti(this.ranges,e.ranges)).length&&this.inner.splice(e.index,0,new Wn(e.parser,e.parser.startParse(this.input,ei(e.mounts,g),g),e.ranges.map((function(t){return new vn(t.from-e.start,t.to-e.start)})),e.target,g)),e=e.prev),n&&!--n.depth&&(n=n.prev)}}},t}();function Yn(t,e,n){for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.from>=n)break;if(o.to>e)return o.from<=e&&o.to>=n?2:1}return 0}function Jn(t,e,n,i,r,o){if(e<n){var s=t.buffer[e+1],a=t.buffer[n-2];i.push(t.slice(e,n,s,a)),r.push(s-o)}}function Qn(t){var e=t.node,n=0;do{t.parent(),n++}while(!t.tree);for(var i=0,r=t.tree,o=0;!((o=r.positions[i]+t.from)<=e.from&&o+r.children[i].length>=e.to);i++);var s=r.children[i],a=s.buffer;r.children[i]=function t(n,i,r,l){for(var c=n;a[c+2]+o<=e.from;)c=a[c+3];var u=[],h=[];Jn(s,n,c,u,h,l);var p=a[c+1]+o==e.from&&a[c+2]+o==e.to&&a[c]==e.type.id;u.push(p?e.toTree():t(c+4,a[c+3],s.set.types[a[c]],a[c+1])),h.push(a[c+1]-l),Jn(s,a[c+3],i,u,h,l);var d=u.length-1;return new En(r,u,h,h[d]+u[d].length)}(0,a.length,kn.none,0);for(var l=0;l<=n;l++)t.childAfter(e.from)}var Xn=function(){function t(t,e){this.offset=e,this.done=!1,this.cursor=t.fullCursor()}return t.prototype.moveTo=function(t){for(var e=this.cursor,n=t-this.offset;!this.done&&e.from<n;)e.to>=t&&e.enter(n,1,!1,!1)||e.next(!1)||(this.done=!0)},t.prototype.hasNode=function(t){if(this.moveTo(t.from),!this.done&&this.cursor.from+this.offset==t.from&&this.cursor.tree)for(var e=this.cursor.tree;;){if(e==t.tree)return!0;if(!(e.children.length&&0==e.positions[0]&&e.children[0]instanceof En))break;e=e.children[0]}return!1},t}(),Zn=function(){function t(t){var e;if(this.fragments=t,this.curTo=0,this.fragI=0,t.length){var n=this.curFrag=t[0];this.curTo=null!==(e=n.tree.prop(Kn))&&void 0!==e?e:n.to,this.inner=new Xn(n.tree,-n.offset)}else this.curFrag=this.inner=null}return t.prototype.hasNode=function(t){for(;this.curFrag&&t.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=t.from&&this.curTo>=t.to&&this.inner.hasNode(t)},t.prototype.nextFrag=function(){var t;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{var e=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(t=e.tree.prop(Kn))&&void 0!==t?t:e.to,this.inner=new Xn(e.tree,-e.offset)}},t.prototype.findMounts=function(t,e){var n,i=[];if(this.inner){this.inner.cursor.moveTo(t,1);for(var r=this.inner.cursor.node;r;r=r.parent){var o=null===(n=r.tree)||void 0===n?void 0:n.prop(yn.mounted);if(o&&o.parser==e)for(var s=this.fragI;s<this.fragments.length;s++){var a=this.fragments[s];if(a.from>=r.to)break;a.tree==this.curFrag.tree&&i.push({frag:a,pos:r.from-a.offset,mount:o})}}}return i},t}();function ti(t,e){for(var n=null,i=e,r=1,o=0;r<t.length;r++)for(var s=t[r-1].to,a=t[r].from;o<i.length;o++){var l=i[o];if(l.from>=a)break;l.to<=s||(n||(i=n=e.slice()),l.from<s?(n[o]=new vn(l.from,s),l.to>a&&n.splice(o+1,0,new vn(a,l.to))):l.to>a?n[o--]=new vn(a,l.to):n.splice(o--,1))}return i}function ei(t,e){for(var n=[],i=function(t,i,r){var o=t+(i.overlay?i.overlay[0].from:0),s=o+i.tree.length,a=Math.max(r.from,o),l=Math.min(r.to,s);if(i.overlay)for(var c=i.overlay.map((function(e){return new vn(e.from+t,e.to+t)})),u=function(t,e,n,i){for(var r=0,o=0,s=!1,a=!1,l=-1e9,c=[];;){var u=r==t.length?1e9:s?t[r].to:t[r].from,h=o==e.length?1e9:a?e[o].to:e[o].from;if(s!=a){var p=Math.max(l,n),d=Math.min(u,h,i);p<d&&c.push(new vn(p,d))}if(1e9==(l=Math.min(u,h)))break;u==l&&(s?(s=!1,r++):s=!0),h==l&&(a?(a=!1,o++):a=!0)}return c}(e,c,a,l),h=0,p=a;;h++){var d=h==u.length,f=d?l:u[h].from;if(f>p&&n.push(new qn(p,f,i.tree,-o,r.from>=p,r.to<=f)),d)break;p=u[h].to}else n.push(new qn(a,l,i.tree,-o,r.from>=o,r.to<=s))},r=0,o=t;r<o.length;r++){var s=o[r];i(s.pos,s.mount,s.frag)}return n}for(var ni="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((function(t){return t?parseInt(t,36):1})),ii=1;ii<ni.length;ii++)ni[ii]+=ni[ii-1];function ri(t){for(var e=1;e<ni.length;e+=2)if(ni[e]>t)return ni[e-1]<=t;return!1}function oi(t){return t>=127462&&t<=127487}function si(t,e,n){return void 0===n&&(n=!0),(n?ai:li)(t,e)}function ai(t,e){if(e==t.length)return e;e&&ci(t.charCodeAt(e))&&ui(t.charCodeAt(e-1))&&e--;var n=hi(t,e);for(e+=di(n);e<t.length;){var i=hi(t,e);if(8205==n||8205==i||ri(i))e+=di(i),n=i;else{if(!oi(i))break;for(var r=0,o=e-2;o>=0&&oi(hi(t,o));)r++,o-=2;if(r%2==0)break;e+=2}}return e}function li(t,e){for(;e>0;){var n=ai(t,e-2);if(n<e)return n;e--}return 0}function ci(t){return t>=56320&&t<57344}function ui(t){return t>=55296&&t<56320}function hi(t,e){var n=t.charCodeAt(e);if(!ui(n)||e+1==t.length)return n;var i=t.charCodeAt(e+1);return ci(i)?i-56320+(n-55296<<10)+65536:n}function pi(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function di(t){return t<65536?1:2}function fi(t,e,n){void 0===n&&(n=t.length);for(var i=0,r=0;r<n;)9==t.charCodeAt(r)?(i+=e-i%e,r++):(i++,r=si(t,r));return i}function gi(t,e,n,i){for(var r=0,o=0;;){if(o>=e)return r;if(r==t.length)break;o+=9==t.charCodeAt(r)?n-o%n:1,r=si(t,r)}return!0===i?-1:t.length}var mi=function(){function t(){}return t.prototype.lineAt=function(t){if(t<0||t>this.length)throw new RangeError("Invalid position "+t+" in document of length "+this.length);return this.lineInner(t,!1,1,0)},t.prototype.line=function(t){if(t<1||t>this.lines)throw new RangeError("Invalid line number "+t+" in "+this.lines+"-line document");return this.lineInner(t,!0,1,0)},t.prototype.replace=function(t,e,n){var i=[];return this.decompose(0,t,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(e,this.length,i,1),yi.from(i,this.length-(e-t)+n.length)},t.prototype.append=function(t){return this.replace(this.length,this.length,t)},t.prototype.slice=function(t,e){void 0===e&&(e=this.length);var n=[];return this.decompose(t,e,n,0),yi.from(n,e-t)},t.prototype.eq=function(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;for(var e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),i=new ki(this),r=new ki(t),o=e,s=e;;){if(i.next(o),r.next(o),o=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(s+=i.value.length,i.done||s>=n)return!0}},t.prototype.iter=function(t){return void 0===t&&(t=1),new ki(this,t)},t.prototype.iterRange=function(t,e){return void 0===e&&(e=this.length),new Ci(this,t,e)},t.prototype.iterLines=function(t,e){var n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);var i=this.line(t).from;n=this.iterRange(i,Math.max(i,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new xi(n)},t.prototype.toString=function(){return this.sliceString(0)},t.prototype.toJSON=function(){var t=[];return this.flatten(t),t},t.of=function(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new vi(e):yi.from(vi.split(e,[])):t.empty},t}(),vi=function(t){function e(e,n){void 0===n&&(n=function(t){for(var e=-1,n=0,i=t;n<i.length;n++){e+=i[n].length+1}return e}(e));var i=t.call(this)||this;return i.text=e,i.length=n,i}return M(e,t),Object.defineProperty(e.prototype,"lines",{get:function(){return this.text.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.lineInner=function(t,e,n,i){for(var r=0;;r++){var o=this.text[r],s=i+o.length;if((e?n:s)>=t)return new Si(i,s,n,o);i=s+1,n++}},e.prototype.decompose=function(t,n,i,r){var o=t<=0&&n>=this.length?this:new e(wi(this.text,t,n),Math.min(n,this.length)-Math.max(0,t));if(1&r){var s=i.pop(),a=bi(o.text,s.text.slice(),0,o.length);if(a.length<=32)i.push(new e(a,s.length+o.length));else{var l=a.length>>1;i.push(new e(a.slice(0,l)),new e(a.slice(l)))}}else i.push(o)},e.prototype.replace=function(n,i,r){if(!(r instanceof e))return t.prototype.replace.call(this,n,i,r);var o=bi(this.text,bi(r.text,wi(this.text,0,n)),i),s=this.length+r.length-(i-n);return o.length<=32?new e(o,s):yi.from(e.split(o,[]),s)},e.prototype.sliceString=function(t,e,n){void 0===e&&(e=this.length),void 0===n&&(n="\n");for(var i="",r=0,o=0;r<=e&&o<this.text.length;o++){var s=this.text[o],a=r+s.length;r>t&&o&&(i+=n),t<a&&e>r&&(i+=s.slice(Math.max(0,t-r),e-r)),r=a+1}return i},e.prototype.flatten=function(t){for(var e=0,n=this.text;e<n.length;e++){var i=n[e];t.push(i)}},e.prototype.scanIdentical=function(){return 0},e.split=function(t,n){for(var i=[],r=-1,o=0,s=t;o<s.length;o++){var a=s[o];i.push(a),r+=a.length+1,32==i.length&&(n.push(new e(i,r)),i=[],r=-1)}return r>-1&&n.push(new e(i,r)),n},e}(mi),yi=function(t){function e(e,n){var i=t.call(this)||this;i.children=e,i.length=n,i.lines=0;for(var r=0,o=e;r<o.length;r++){var s=o[r];i.lines+=s.lines}return i}return M(e,t),e.prototype.lineInner=function(t,e,n,i){for(var r=0;;r++){var o=this.children[r],s=i+o.length,a=n+o.lines-1;if((e?a:s)>=t)return o.lineInner(t,e,n,i);i=s+1,n=a+1}},e.prototype.decompose=function(t,e,n,i){for(var r=0,o=0;o<=e&&r<this.children.length;r++){var s=this.children[r],a=o+s.length;if(t<=a&&e>=o){var l=i&((o<=t?1:0)|(a>=e?2:0));o>=t&&a<=e&&!l?n.push(s):s.decompose(t-o,e-o,n,l)}o=a+1}},e.prototype.replace=function(n,i,r){if(r.lines<this.lines)for(var o=0,s=0;o<this.children.length;o++){var a=this.children[o],l=s+a.length;if(n>=s&&i<=l){var c=a.replace(n-s,i-s,r),u=this.lines-a.lines+c.lines;if(c.lines<u>>4&&c.lines>u>>6){var h=this.children.slice();return h[o]=c,new e(h,this.length-(i-n)+r.length)}return t.prototype.replace.call(this,s,l,c)}s=l+1}return t.prototype.replace.call(this,n,i,r)},e.prototype.sliceString=function(t,e,n){void 0===e&&(e=this.length),void 0===n&&(n="\n");for(var i="",r=0,o=0;r<this.children.length&&o<=e;r++){var s=this.children[r],a=o+s.length;o>t&&r&&(i+=n),t<a&&e>o&&(i+=s.sliceString(t-o,e-o,n)),o=a+1}return i},e.prototype.flatten=function(t){for(var e=0,n=this.children;e<n.length;e++){n[e].flatten(t)}},e.prototype.scanIdentical=function(t,n){if(!(t instanceof e))return 0;for(var i=0,r=n>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1],o=r[0],s=r[1],a=r[2],l=r[3];;o+=n,s+=n){if(o==a||s==l)return i;var c=this.children[o],u=t.children[s];if(c!=u)return i+c.scanIdentical(u,n);i+=c.length+1}},e.from=function(t,n){void 0===n&&(n=t.reduce((function(t,e){return t+e.length+1}),-1));for(var i=0,r=0,o=t;r<o.length;r++){i+=o[r].lines}if(i<32){for(var s=[],a=0,l=t;a<l.length;a++){l[a].flatten(s)}return new vi(s,n)}var c=Math.max(32,i>>5),u=c<<1,h=c>>1,p=[],d=0,f=-1,g=[];function m(t){var n;if(t.lines>u&&t instanceof e)for(var i=0,r=t.children;i<r.length;i++){m(r[i])}else t.lines>h&&(d>h||!d)?(v(),p.push(t)):t instanceof vi&&d&&(n=g[g.length-1])instanceof vi&&t.lines+n.lines<=32?(d+=t.lines,f+=t.length+1,g[g.length-1]=new vi(n.text.concat(t.text),n.length+1+t.length)):(d+t.lines>c&&v(),d+=t.lines,f+=t.length+1,g.push(t))}function v(){0!=d&&(p.push(1==g.length?g[0]:e.from(g,f)),f=-1,d=g.length=0)}for(var y=0,b=t;y<b.length;y++){m(b[y])}return v(),1==p.length?p[0]:new e(p,n)},e}(mi);function bi(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=1e9);for(var r=0,o=0,s=!0;o<t.length&&r<=i;o++){var a=t[o],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=l+1}return e}function wi(t,e,n){return bi(t,[""],e,n)}mi.empty=new vi([""],0);var ki=function(){function t(t,e){void 0===e&&(e=1),this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof vi?t.text.length:t.children.length)<<1]}return t.prototype.nextInner=function(t,e){for(this.done=this.lineBreak=!1;;){var n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],o=r>>1,s=i instanceof vi?i.text.length:i.children.length;if(o==(e>0?s:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(i instanceof vi){var a=i.text[o+(e<0?-1:0)];if(this.offsets[n]+=e,a.length>Math.max(0,t))return this.value=0==t?a:e>0?a.slice(t):a.slice(0,a.length-t),this;t-=a.length}else{t>(a=i.children[o+(e<0?-1:0)]).length?(t-=a.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(a),this.offsets.push(e>0?1:(a instanceof vi?a.text.length:a.children.length)<<1))}}},t.prototype.next=function(t){return void 0===t&&(t=0),t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)},t}(),Ci=function(){function t(t,e,n){this.value="",this.done=!1,this.cursor=new ki(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}return t.prototype.nextInner=function(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);var n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;var i=this.cursor.next(t).value;return this.pos+=(i.length+t)*e,this.value=i.length<=n?i:e<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this},t.prototype.next=function(t){return void 0===t&&(t=0),t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)},Object.defineProperty(t.prototype,"lineBreak",{get:function(){return this.cursor.lineBreak&&""!=this.value},enumerable:!1,configurable:!0}),t}(),xi=function(){function t(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}return t.prototype.next=function(t){void 0===t&&(t=0);var e=this.inner.next(t),n=e.done,i=e.lineBreak,r=e.value;return n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this},Object.defineProperty(t.prototype,"lineBreak",{get:function(){return!1},enumerable:!1,configurable:!0}),t}();"undefined"!=typeof Symbol&&(mi.prototype[Symbol.iterator]=function(){return this.iter()},ki.prototype[Symbol.iterator]=Ci.prototype[Symbol.iterator]=xi.prototype[Symbol.iterator]=function(){return this});var Si=function(){function t(t,e,n,i){this.from=t,this.to=e,this.number=n,this.text=i}return Object.defineProperty(t.prototype,"length",{get:function(){return this.to-this.from},enumerable:!1,configurable:!0}),t}(),Ei=/\r\n?|\n/,Mi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Mi||(Mi={})),Li=function(){function t(t){this.sections=t}return Object.defineProperty(t.prototype,"length",{get:function(){for(var t=0,e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newLength",{get:function(){for(var t=0,e=0;e<this.sections.length;e+=2){var n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0},enumerable:!1,configurable:!0}),t.prototype.iterGaps=function(t){for(var e=0,n=0,i=0;e<this.sections.length;){var r=this.sections[e++],o=this.sections[e++];o<0?(t(n,i,r),i+=r):i+=o,n+=r}},t.prototype.iterChangedRanges=function(t,e){void 0===e&&(e=!1),Pi(this,t,e)},Object.defineProperty(t.prototype,"invertedDesc",{get:function(){for(var e=[],n=0;n<this.sections.length;){var i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new t(e)},enumerable:!1,configurable:!0}),t.prototype.composeDesc=function(t){return this.empty?t:t.empty?this:Fi(this,t)},t.prototype.mapDesc=function(t,e){return void 0===e&&(e=!1),t.empty?this:Oi(this,t,e)},t.prototype.mapPos=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=Mi.Simple);for(var i=0,r=0,o=0;o<this.sections.length;){var s=this.sections[o++],a=this.sections[o++],l=i+s;if(a<0){if(l>t)return r+(t-i);r+=s}else{if(n!=Mi.Simple&&l>=t&&(n==Mi.TrackDel&&i<t&&l>t||n==Mi.TrackBefore&&i<t||n==Mi.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!s)return t==i||e<0?r:r+a;r+=a}i=l}if(t>i)throw new RangeError("Position "+t+" is out of range for changeset of length "+i);return r},t.prototype.touchesRange=function(t,e){void 0===e&&(e=t);for(var n=0,i=0;n<this.sections.length&&i<=e;){var r=i+this.sections[n++];if(this.sections[n++]>=0&&i<=e&&r>=t)return!(i<t&&r>e)||"cover";i=r}return!1},t.prototype.toString=function(){for(var t="",e=0;e<this.sections.length;){var n=this.sections[e++],i=this.sections[e++];t+=(t?" ":"")+n+(i>=0?":"+i:"")}return t},t.prototype.toJSON=function(){return this.sections},t.fromJSON=function(e){if(!Array.isArray(e)||e.length%2||e.some((function(t){return"number"!=typeof t})))throw new RangeError("Invalid JSON representation of ChangeDesc");return new t(e)},t}(),Di=function(t){function e(e,n){var i=t.call(this,e)||this;return i.inserted=n,i}return M(e,t),e.prototype.apply=function(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Pi(this,(function(e,n,i,r,o){return t=t.replace(i,i+(n-e),o)}),!1),t},e.prototype.mapDesc=function(t,e){return void 0===e&&(e=!1),Oi(this,t,e,!0)},e.prototype.invert=function(t){for(var n=this.sections.slice(),i=[],r=0,o=0;r<n.length;r+=2){var s=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=s;for(var l=r>>1;i.length<l;)i.push(mi.empty);i.push(s?t.slice(o,o+s):mi.empty)}o+=s}return new e(n,i)},e.prototype.compose=function(t){return this.empty?t:t.empty?this:Fi(this,t,!0)},e.prototype.map=function(t,e){return void 0===e&&(e=!1),t.empty?this:Oi(this,t,e,!0)},e.prototype.iterChanges=function(t,e){void 0===e&&(e=!1),Pi(this,t,e)},Object.defineProperty(e.prototype,"desc",{get:function(){return new Li(this.sections)},enumerable:!1,configurable:!0}),e.prototype.filter=function(t){var n=[],i=[],r=[],o=new Ii(this);t:for(var s=0,a=0;;){for(var l=s==t.length?1e9:t[s++];a<l||a==l&&0==o.len;){if(o.done)break t;Ai(r,h=Math.min(o.len,l-a),-1);var c=-1==o.ins?-1:0==o.off?o.ins:0;Ai(n,h,c),c>0&&Ti(i,n,o.text),o.forward(h),a+=h}for(var u=t[s++];a<u;){if(o.done)break t;var h;Ai(n,h=Math.min(o.len,u-a),-1),Ai(r,h,-1==o.ins?-1:0==o.off?o.ins:0),o.forward(h),a+=h}}return{changes:new e(n,i),filtered:new Li(r)}},e.prototype.toJSON=function(){for(var t=[],e=0;e<this.sections.length;e+=2){var n=this.sections[e],i=this.sections[e+1];i<0?t.push(n):0==i?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t},e.of=function(t,n,i){var r=[],o=[],s=0,a=null;function l(t){if(void 0===t&&(t=!1),t||r.length){s<n&&Ai(r,n-s,-1);var i=new e(r,o);a=a?a.compose(i.map(a)):i,r=[],o=[],s=0}}return function t(c){if(Array.isArray(c))for(var u=0,h=c;u<h.length;u++){t(h[u])}else if(c instanceof e){if(c.length!=n)throw new RangeError("Mismatched change set length (got "+c.length+", expected "+n+")");l(),a=a?a.compose(c.map(a)):c}else{var p=c.from,d=c.to,f=void 0===d?p:d,g=c.insert;if(p>f||p<0||f>n)throw new RangeError("Invalid change range "+p+" to "+f+" (in doc of length "+n+")");var m=g?"string"==typeof g?mi.of(g.split(i||Ei)):g:mi.empty,v=m.length;if(p==f&&0==v)return;p<s&&l(),p>s&&Ai(r,p-s,-1),Ai(r,f-p,v),Ti(o,r,m),s=f}}(t),l(!a),a},e.empty=function(t){return new e(t?[t,-1]:[],[])},e.fromJSON=function(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");for(var n=[],i=[],r=0;r<t.length;r++){var o=t[r];if("number"==typeof o)n.push(o,-1);else{if(!Array.isArray(o)||"number"!=typeof o[0]||o.some((function(t,e){return e&&"string"!=typeof t})))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==o.length)n.push(o[0],0);else{for(;i.length<r;)i.push(mi.empty);i[r]=mi.of(o.slice(1)),n.push(o[0],i[r].length)}}}return new e(n,i)},e}(Li);function Ai(t,e,n,i){if(void 0===i&&(i=!1),!(0==e&&n<=0)){var r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:0==e&&0==t[r]?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}}function Ti(t,e,n){if(0!=n.length){var i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(mi.empty);t.push(n)}}}function Pi(t,e,n){for(var i=t.inserted,r=0,o=0,s=0;s<t.sections.length;){var a=t.sections[s++],l=t.sections[s++];if(l<0)r+=a,o+=a;else{for(var c=r,u=o,h=mi.empty;c+=a,u+=l,l&&i&&(h=h.append(i[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)a=t.sections[s++],l=t.sections[s++];e(r,c,o,u,h),r=c,o=u}}}function Oi(t,e,n,i){void 0===i&&(i=!1);for(var r=[],o=i?[]:null,s=new Ii(t),a=new Ii(e),l=0,c=0;;)if(-1==s.ins)l+=s.len,s.next();else if(-1==a.ins&&c<l){var u=Math.min(a.len,l-c);a.forward(u),Ai(r,u,-1),c+=u}else if(a.ins>=0&&(s.done||c<l||c==l&&(a.len<s.len||a.len==s.len&&!n))){for(Ai(r,a.ins,-1);l>c&&!s.done&&l+s.len<c+a.len;)l+=s.len,s.next();c+=a.len,a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?new Di(r,o):new Li(r);throw new Error("Mismatched change set lengths")}for(var h=0,p=l+s.len;;)if(a.ins>=0&&c>l&&c+a.len<p)h+=a.ins,c+=a.len,a.next();else{if(!(-1==a.ins&&c<p))break;h+=u=Math.min(a.len,p-c),a.forward(u),c+=u}Ai(r,h,s.ins),o&&Ti(o,r,s.text),l=p,s.next()}}function Fi(t,e,n){void 0===n&&(n=!1);for(var i=[],r=n?[]:null,o=new Ii(t),s=new Ii(e),a=!1;;){if(o.done&&s.done)return r?new Di(i,r):new Li(i);if(0==o.ins)Ai(i,o.len,0,a),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");var l=Math.min(o.len2,s.len),c=i.length;if(-1==o.ins){var u=-1==s.ins?-1:s.off?0:s.ins;Ai(i,l,u,a),r&&u&&Ti(r,i,s.text)}else-1==s.ins?(Ai(i,o.off?0:o.len,l,a),r&&Ti(r,i,o.textBit(l))):(Ai(i,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&Ti(r,i,s.text));a=(o.ins>l||s.ins>=0&&s.len>l)&&(a||i.length>c),o.forward2(l),s.forward(l)}else Ai(i,0,s.ins,a),r&&Ti(r,i,s.text),s.next()}}var Ii=function(){function t(t){this.set=t,this.i=0,this.next()}return t.prototype.next=function(){var t=this.set.sections;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0},Object.defineProperty(t.prototype,"done",{get:function(){return-2==this.ins},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"len2",{get:function(){return this.ins<0?this.len:this.ins},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){var t=this.set.inserted,e=this.i-2>>1;return e>=t.length?mi.empty:t[e]},enumerable:!1,configurable:!0}),t.prototype.textBit=function(t){var e=this.set.inserted,n=this.i-2>>1;return n>=e.length&&!t?mi.empty:e[n].slice(this.off,null==t?void 0:this.off+t)},t.prototype.forward=function(t){t==this.len?this.next():(this.len-=t,this.off+=t)},t.prototype.forward2=function(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)},t}(),Ni=function(){function t(t,e,n){this.from=t,this.to=e,this.flags=n}return Object.defineProperty(t.prototype,"anchor",{get:function(){return 16&this.flags?this.to:this.from},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"head",{get:function(){return 16&this.flags?this.from:this.to},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.from==this.to},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assoc",{get:function(){return 4&this.flags?-1:8&this.flags?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bidiLevel",{get:function(){var t=3&this.flags;return 3==t?null:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"goalColumn",{get:function(){var t=this.flags>>5;return 33554431==t?void 0:t},enumerable:!1,configurable:!0}),t.prototype.map=function(e,n){void 0===n&&(n=-1);var i=e.mapPos(this.from,n),r=e.mapPos(this.to,n);return i==this.from&&r==this.to?this:new t(i,r,this.flags)},t.prototype.extend=function(t,e){if(void 0===e&&(e=t),t<=this.anchor&&e>=this.anchor)return Bi.range(t,e);var n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return Bi.range(this.anchor,n)},t.prototype.eq=function(t){return this.anchor==t.anchor&&this.head==t.head},t.prototype.toJSON=function(){return{anchor:this.anchor,head:this.head}},t.fromJSON=function(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Bi.range(t.anchor,t.head)},t}(),Bi=function(){function t(t,e){void 0===e&&(e=0),this.ranges=t,this.mainIndex=e}return t.prototype.map=function(e,n){return void 0===n&&(n=-1),e.empty?this:t.create(this.ranges.map((function(t){return t.map(e,n)})),this.mainIndex)},t.prototype.eq=function(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0},Object.defineProperty(t.prototype,"main",{get:function(){return this.ranges[this.mainIndex]},enumerable:!1,configurable:!0}),t.prototype.asSingle=function(){return 1==this.ranges.length?this:new t([this.main])},t.prototype.addRange=function(e,n){return void 0===n&&(n=!0),t.create([e].concat(this.ranges),n?0:this.mainIndex+1)},t.prototype.replaceRange=function(e,n){void 0===n&&(n=this.mainIndex);var i=this.ranges.slice();return i[n]=e,t.create(i,this.mainIndex)},t.prototype.toJSON=function(){return{ranges:this.ranges.map((function(t){return t.toJSON()})),main:this.mainIndex}},t.fromJSON=function(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new t(e.ranges.map((function(t){return Ni.fromJSON(t)})),e.main)},t.single=function(e,n){return void 0===n&&(n=e),new t([t.range(e,n)],0)},t.create=function(e,n){if(void 0===n&&(n=0),0==e.length)throw new RangeError("A selection needs at least one range");for(var i=0,r=0;r<e.length;r++){var o=e[r];if(o.empty?o.from<=i:o.from<i)return Ri(e.slice(),n);i=o.to}return new t(e,n)},t.cursor=function(t,e,n,i){return void 0===e&&(e=0),new Ni(t,t,(0==e?0:e<0?4:8)|(null==n?3:Math.min(2,n))|(null!=i?i:33554431)<<5)},t.range=function(t,e,n){var i=(null!=n?n:33554431)<<5;return e<t?new Ni(e,t,16|i):new Ni(t,e,i)},t}();function Ri(t,e){void 0===e&&(e=0);var n=t[e];t.sort((function(t,e){return t.from-e.from})),e=t.indexOf(n);for(var i=1;i<t.length;i++){var r=t[i],o=t[i-1];if(r.empty?r.from<=o.to:r.from<o.to){var s=o.from,a=Math.max(r.to,o.to);i<=e&&e--,t.splice(--i,2,r.anchor>r.head?Bi.range(a,s):Bi.range(s,a))}}return new Bi(t,e)}function zi(t,e){for(var n=0,i=t.ranges;n<i.length;n++){if(i[n].to>e)throw new RangeError("Selection points outside of document")}}var Hi=0,Vi=function(){function t(t,e,n,i,r){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=i,this.extensions=r,this.id=Hi++,this.default=t([])}return t.define=function(e){return void 0===e&&(e={}),new t(e.combine||function(t){return t},e.compareInput||function(t,e){return t===e},e.compare||(e.combine?function(t,e){return t===e}:qi),!!e.static,e.enables)},t.prototype.of=function(t){return new ji([],this,0,t)},t.prototype.compute=function(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ji(t,this,1,e)},t.prototype.computeN=function(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ji(t,this,2,e)},t.prototype.from=function(t,e){return e||(e=function(t){return t}),this.compute([t],(function(n){return e(n.field(t))}))},t}();function qi(t,e){return t==e||t.length==e.length&&t.every((function(t,n){return t===e[n]}))}var ji=function(){function t(t,e,n,i){this.dependencies=t,this.facet=e,this.type=n,this.value=i,this.id=Hi++}return t.prototype.dynamicSlot=function(t){for(var e,n=this.value,i=this.facet.compareInput,r=t[this.id]>>1,o=2==this.type,s=!1,a=!1,l=[],c=0,u=this.dependencies;c<u.length;c++){var h=u[c];"doc"==h?s=!0:"selection"==h?a=!0:0==(1&(null!==(e=t[h.id])&&void 0!==e?e:1))&&l.push(t[h.id])}return function(t,e){var c=t.values[r];if(c===nr)return t.values[r]=n(t),1;if(e&&(s&&e.docChanged||a&&(e.docChanged||e.selection)||l.some((function(e){return(1&ir(t,e))>0})))){var u=n(t);if(o?!function(t,e,n){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}(u,c,i):!i(u,c))return t.values[r]=u,1}return 0}},t}();var Ui=Vi.define({static:!0}),_i=function(){function t(t,e,n,i,r){this.id=t,this.createF=e,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}return t.define=function(e){var n=new t(Hi++,e.create,e.update,e.compare||function(t,e){return t===e},e);return e.provide&&(n.provides=e.provide(n)),n},t.prototype.create=function(t){var e=this,n=t.facet(Ui).find((function(t){return t.field==e}));return((null==n?void 0:n.create)||this.createF)(t)},t.prototype.slot=function(t){var e=this,n=t[this.id]>>1;return function(t,i){var r=t.values[n];if(r===nr)return t.values[n]=e.create(t),1;if(i){var o=e.updateF(r,i);if(!e.compareF(r,o))return t.values[n]=o,1}return 0}},t.prototype.init=function(t){return[this,Ui.of({field:this,create:t})]},Object.defineProperty(t.prototype,"extension",{get:function(){return this},enumerable:!1,configurable:!0}),t}(),Wi=4,Gi=3,Ki=2,$i=1,Yi=0;function Ji(t){return function(e){return new Xi(e,t)}}var Qi={lowest:Ji(Wi),low:Ji(Gi),default:Ji(Ki),high:Ji($i),highest:Ji(Yi),fallback:Ji(Wi),extend:Ji($i),override:Ji(Yi)},Xi=function(t,e){this.inner=t,this.prec=e},Zi=function(){function t(){}return t.prototype.of=function(t){return new tr(this,t)},t.prototype.reconfigure=function(e){return t.reconfigure.of({compartment:this,extension:e})},t.prototype.get=function(t){return t.config.compartments.get(this)},t}(),tr=function(t,e){this.compartment=t,this.inner=e},er=function(){function t(t,e,n,i,r){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}return t.prototype.staticFacet=function(t){var e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]},t.resolve=function(e,n,i){for(var r=[],o=Object.create(null),s=new Map,a=0,l=function(t,e,n){var i=[[],[],[],[],[]],r=new Map;function o(t,s){var a=r.get(t);if(null!=a){if(a>=s)return;var l=i[a].indexOf(t);l>-1&&i[a].splice(l,1),t instanceof tr&&n.delete(t.compartment)}if(r.set(t,s),Array.isArray(t))for(var c=0,u=t;c<u.length;c++){o(u[c],s)}else if(t instanceof tr){if(n.has(t.compartment))throw new RangeError("Duplicate use of compartment in extensions");var h=e.get(t.compartment)||t.inner;n.set(t.compartment,h),o(h,s)}else if(t instanceof Xi)o(t.inner,t.prec);else if(t instanceof _i)i[s].push(t),t.provides&&o(t.provides,s);else if(t instanceof ji)i[s].push(t),t.facet.extensions&&o(t.facet.extensions,s);else{if(!(h=t.extension))throw new Error("Unrecognized extension value in extension set ("+t+"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.");o(h,s)}}return o(t,Ki),i.reduce((function(t,e){return t.concat(e)}))}(e,n,s);a<l.length;a++){var c=l[a];c instanceof _i?r.push(c):(o[c.facet.id]||(o[c.facet.id]=[])).push(c)}for(var u=Object.create(null),h=[],p=[],d=[],f=function(t){u[t.id]=p.length<<1,p.push((function(e){return t.slot(e)})),d.push([])},g=0,m=r;g<m.length;g++){f(m[g])}var v=function(t){var e=o[t],n=e[0].facet;if(e.every((function(t){return 0==t.type}))){u[n.id]=h.length<<1|1;var r=n.combine(e.map((function(t){return t.value}))),s=i?i.config.address[n.id]:null;if(null!=s){var a=rr(i,s);n.compare(r,a)&&(r=a)}h.push(r)}else{for(var l=function(t){0==t.type?(u[t.id]=h.length<<1|1,h.push(t.value)):(u[t.id]=p.length<<1,p.push((function(e){return t.dynamicSlot(e)})),d.push(t.dependencies.filter((function(t){return"string"!=typeof t})).map((function(t){return t.id}))))},c=0,f=e;c<f.length;c++){l(f[c])}u[n.id]=p.length<<1,p.push((function(t){return function(t,e,n){var i=n.map((function(e){return t[e.id]})),r=n.map((function(t){return t.type})),o=i.filter((function(t){return!(1&t)})),s=t[e.id]>>1;return function(t,n){for(var a=t.values[s],l=a===nr||!n,c=0,u=o;c<u.length;c++)1&ir(t,u[c])&&(l=!0);if(!l)return 0;for(var h=[],p=0;p<i.length;p++){var d=rr(t,i[p]);if(2==r[p])for(var f=0,g=d;f<g.length;f++){var m=g[f];h.push(m)}else h.push(d)}var v=e.combine(h);return a!==nr&&e.compare(v,a)?0:(t.values[s]=v,1)}}(t,n,e)})),d.push(e.filter((function(t){return 0!=t.type})).map((function(t){return t.id})))}};for(var y in o)v(y);var b=p.map((function(t){return nr}));if(i){var w=function(t,e){if(e>7)return!1;var n=u[t];if(!(1&n))return d[n>>1].every((function(t){return w(t,e+1)}));var r=i.config.address[t];return null!=r&&rr(i,r)==h[n>>1]};for(var y in u){var k=u[y],C=i.config.address[y];null!=C&&0==(1&k)&&w(+y,0)&&(b[k>>1]=rr(i,C))}}return{configuration:new t(e,s,p.map((function(t){return t(u)})),u,h),values:b}},t}();var nr={};function ir(t,e){if(1&e)return 2;var n=e>>1,i=t.status[n];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;t.status[n]=4;var r=t.config.dynamicSlots[n](t,t.applying);return t.status[n]=2|r}function rr(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}var or=Vi.define(),sr=Vi.define({combine:function(t){return t.some((function(t){return t}))},static:!0}),ar=Vi.define({combine:function(t){return t.length?t[0]:void 0},static:!0}),lr=Vi.define(),cr=Vi.define(),ur=Vi.define(),hr=Vi.define({combine:function(t){return!!t.length&&t[0]}}),pr=function(){function t(t,e){this.type=t,this.value=e}return t.define=function(){return new dr},t}(),dr=function(){function t(){}return t.prototype.of=function(t){return new pr(this,t)},t}(),fr=function(){function t(t){this.map=t}return t.prototype.of=function(t){return new gr(this,t)},t}(),gr=function(){function t(t,e){this.type=t,this.value=e}return t.prototype.map=function(e){var n=this.type.map(this.value,e);return void 0===n?void 0:n==this.value?this:new t(this.type,n)},t.prototype.is=function(t){return this.type==t},t.define=function(t){return void 0===t&&(t={}),new fr(t.map||function(t){return t})},t.mapEffects=function(t,e){if(!t.length)return t;for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i].map(e);o&&n.push(o)}return n},t}();gr.reconfigure=gr.define(),gr.appendConfig=gr.define();var mr=function(){function t(e,n,i,r,o,s){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,i&&zi(i,n.newLength),o.some((function(e){return e.type==t.time}))||(this.annotations=o.concat(t.time.of(Date.now())))}return Object.defineProperty(t.prototype,"newDoc",{get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newSelection",{get:function(){return this.selection||this.startState.selection.map(this.changes)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state||this.startState.applyTransaction(this),this._state},enumerable:!1,configurable:!0}),t.prototype.annotation=function(t){for(var e=0,n=this.annotations;e<n.length;e++){var i=n[e];if(i.type==t)return i.value}},Object.defineProperty(t.prototype,"docChanged",{get:function(){return!this.changes.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reconfigured",{get:function(){return this.startState.config!=this.state.config},enumerable:!1,configurable:!0}),t.prototype.isUserEvent=function(e){var n=this.annotation(t.userEvent);return!(!n||!(n==e||n.length>e.length&&n.slice(0,e.length)==e&&"."==n[e.length]))},t}();function vr(t,e){for(var n=[],i=0,r=0;;){var o=void 0,s=void 0;if(i<t.length&&(r==e.length||e[r]>=t[i]))o=t[i++],s=t[i++];else{if(!(r<e.length))return n;o=e[r++],s=e[r++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function yr(t,e,n){var i,r,o,s;return n?(r=e.changes,o=Di.empty(e.changes.length),s=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):null===(i=t.selection)||void 0===i?void 0:i.map(r),effects:gr.mapEffects(t.effects,r).concat(gr.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function br(t,e,n){var i=e.selection,r=Cr(e.annotations);return e.userEvent&&(r=r.concat(mr.userEvent.of(e.userEvent))),{changes:e.changes instanceof Di?e.changes:Di.of(e.changes||[],n,t.facet(ar)),selection:i&&(i instanceof Bi?i:Bi.single(i.anchor,i.head)),effects:Cr(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function wr(t,e,n){var i=br(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(n=!1);for(var r=1;r<e.length;r++){!1===e[r].filter&&(n=!1);var o=!!e[r].sequential;i=yr(i,br(t,e[r],o?i.changes.newLength:t.doc.length),o)}var s=new mr(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(t){for(var e=t.startState,n=e.facet(ur),i=t,r=n.length-1;r>=0;r--){var o=n[r](t);o&&Object.keys(o).length&&(i=yr(t,br(e,o,t.changes.newLength),!0))}return i==t?t:new mr(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}(n?function(t){for(var e=t.startState,n=!0,i=0,r=e.facet(lr);i<r.length;i++){var o=(0,r[i])(t);if(!1===o){n=!1;break}Array.isArray(o)&&(n=!0===n?o:vr(n,o))}if(!0!==n){var s=void 0,a=void 0;if(!1===n)a=t.changes.invertedDesc,s=Di.empty(e.doc.length);else s=(u=t.changes.filter(n)).changes,a=u.filtered.invertedDesc;t=new mr(e,s,t.selection&&t.selection.map(a),gr.mapEffects(t.effects,a),t.annotations,t.scrollIntoView)}for(var l=e.facet(cr),c=l.length-1;c>=0;c--){var u;t=(u=l[c](t))instanceof mr?u:Array.isArray(u)&&1==u.length&&u[0]instanceof mr?u[0]:wr(e,Cr(u),!1)}return t}(s):s)}mr.time=pr.define(),mr.userEvent=pr.define(),mr.addToHistory=pr.define(),mr.remote=pr.define();var kr=[];function Cr(t){return null==t?kr:Array.isArray(t)?t:[t]}var xr,Sr=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Sr||(Sr={})),Er=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{xr=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(t){}function Mr(t){return function(e){if(!/\S/.test(e))return Sr.Space;if(function(t){if(xr)return xr.test(t);for(var e=0;e<t.length;e++){var n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Er.test(n)))return!0}return!1}(e))return Sr.Word;for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Sr.Word;return Sr.Other}}var Lr=function(){function t(t,e,n,i,r){void 0===r&&(r=null),this.config=t,this.doc=e,this.selection=n,this.values=i,this.applying=null,this.status=t.statusTemplate.slice(),this.applying=r,r&&(r._state=this);for(var o=0;o<this.config.dynamicSlots.length;o++)ir(this,o<<1);this.applying=null}return t.prototype.field=function(t,e){void 0===e&&(e=!0);var n=this.config.address[t.id];if(null!=n)return ir(this,n),rr(this,n);if(e)throw new RangeError("Field is not present in this state")},t.prototype.update=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return wr(this,t,!0)},t.prototype.applyTransaction=function(e){for(var n,i=this.config,r=i.base,o=i.compartments,s=0,a=e.effects;s<a.length;s++){var l=a[s];l.is(Zi.reconfigure)?(i&&(o=new Map,i.compartments.forEach((function(t,e){return o.set(e,t)})),i=null),o.set(l.value.compartment,l.value.extension)):l.is(gr.reconfigure)?(i=null,r=l.value):l.is(gr.appendConfig)&&(i=null,r=Cr(r).concat(l.value))}if(i)n=e.startState.values.slice();else{var c=er.resolve(r,o,this);n=new t(i=c.configuration,this.doc,this.selection,c.values,null).values}new t(i,e.newDoc,e.newSelection,n,e)},t.prototype.replaceSelection=function(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange((function(e){return{changes:{from:e.from,to:e.to,insert:t},range:Bi.cursor(e.from+t.length)}}))},t.prototype.changeByRange=function(t){for(var e=this.selection,n=t(e.ranges[0]),i=this.changes(n.changes),r=[n.range],o=Cr(n.effects),s=1;s<e.ranges.length;s++){for(var a=t(e.ranges[s]),l=this.changes(a.changes),c=l.map(i),u=0;u<s;u++)r[u]=r[u].map(c);var h=i.mapDesc(l,!0);r.push(a.range.map(h)),i=i.compose(c),o=gr.mapEffects(o,c).concat(gr.mapEffects(Cr(a.effects),h))}return{changes:i,selection:Bi.create(r,e.mainIndex),effects:o}},t.prototype.changes=function(e){return void 0===e&&(e=[]),e instanceof Di?e:Di.of(e,this.doc.length,this.facet(t.lineSeparator))},t.prototype.toText=function(e){return mi.of(e.split(this.facet(t.lineSeparator)||Ei))},t.prototype.sliceDoc=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.doc.length),this.doc.sliceString(t,e,this.lineBreak)},t.prototype.facet=function(t){var e=this.config.address[t.id];return null==e?t.default:(ir(this,e),rr(this,e))},t.prototype.toJSON=function(t){var e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(var n in t){var i=t[n];i instanceof _i&&(e[n]=i.spec.toJSON(this.field(t[n]),this))}return e},t.fromJSON=function(e,n,i){if(void 0===n&&(n={}),!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");var r=[];if(i){var o=function(t){var n=i[t],o=e[t];r.push(n.init((function(t){return n.spec.fromJSON(o,t)})))};for(var s in i)o(s)}return t.create({doc:e.doc,selection:Bi.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})},t.create=function(e){void 0===e&&(e={});var n=er.resolve(e.extensions||[],new Map),i=n.configuration,r=n.values,o=e.doc instanceof mi?e.doc:mi.of((e.doc||"").split(i.staticFacet(t.lineSeparator)||Ei)),s=e.selection?e.selection instanceof Bi?e.selection:Bi.single(e.selection.anchor,e.selection.head):Bi.single(0);return zi(s,o.length),i.staticFacet(sr)||(s=s.asSingle()),new t(i,o,s,r)},Object.defineProperty(t.prototype,"tabSize",{get:function(){return this.facet(t.tabSize)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineBreak",{get:function(){return this.facet(t.lineSeparator)||"\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.facet(hr)},enumerable:!1,configurable:!0}),t.prototype.phrase=function(e){for(var n=0,i=this.facet(t.phrases);n<i.length;n++){var r=i[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return e},t.prototype.languageDataAt=function(t,e,n){void 0===n&&(n=-1);for(var i=[],r=0,o=this.facet(or);r<o.length;r++)for(var s=0,a=(0,o[r])(this,e,n);s<a.length;s++){var l=a[s];Object.prototype.hasOwnProperty.call(l,t)&&i.push(l[t])}return i},t.prototype.charCategorizer=function(t){return Mr(this.languageDataAt("wordChars",t).join(""))},t.prototype.wordAt=function(t){for(var e=this.doc.lineAt(t),n=e.text,i=e.from,r=e.length,o=this.charCategorizer(t),s=t-i,a=t-i;s>0;){var l=si(n,s,!1);if(o(n.slice(l,s))!=Sr.Word)break;s=l}for(;a<r;){var c=si(n,a);if(o(n.slice(a,c))!=Sr.Word)break;a=c}return s==a?null:Bi.range(s+i,a+i)},t}();function Dr(t,e,n){void 0===n&&(n={});for(var i={},r=0,o=t;r<o.length;r++)for(var s=o[r],a=0,l=Object.keys(s);a<l.length;a++){var c=s[h=l[a]],u=i[h];if(void 0===u)i[h]=c;else if(u===c||void 0===c);else{if(!Object.hasOwnProperty.call(n,h))throw new Error("Config merge conflict for field "+h);i[h]=n[h](u,c)}}for(var h in e)void 0===i[h]&&(i[h]=e[h]);return i}Lr.allowMultipleSelections=sr,Lr.tabSize=Vi.define({combine:function(t){return t.length?t[0]:4}}),Lr.lineSeparator=ar,Lr.readOnly=hr,Lr.phrases=Vi.define(),Lr.languageData=or,Lr.changeFilter=lr,Lr.transactionFilter=cr,Lr.transactionExtender=ur,Zi.reconfigure=gr.define();const Ar="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),Tr="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Pr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Or{constructor(t,e){this.rules=[];let{finish:n}=e||{};function i(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function r(t,e,o,s){let a=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==e)return o.push(t[0]+";");for(let n in e){let s=e[n];if(/&/.test(n))r(n.split(/,\s*/).map((e=>t.map((t=>e.replace(/&/,t))))).reduce(((t,e)=>t.concat(e))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");r(i(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?t:t.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let e in t)r(i(e),t[e],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let t=Pr[Ar]||1;return Pr[Ar]=t+1,"ͼ"+t.toString(36)}static mount(t,e){(t[Tr]||new Ir(t)).mount(Array.isArray(e)?e:[e])}}let Fr=null;class Ir{constructor(t){if(!t.head&&t.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Fr)return t.adoptedStyleSheets=[Fr.sheet].concat(t.adoptedStyleSheets),t[Tr]=Fr;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),Fr=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let e=t.head||t;e.insertBefore(this.styleTag,e.firstChild)}this.modules=[],t[Tr]=this}mount(t){let e=this.sheet,n=0,i=0;for(let r=0;r<t.length;r++){let o=t[r],s=this.modules.indexOf(o);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),-1==s){if(this.modules.splice(i++,0,o),e)for(let t=0;t<o.rules.length;t++)e.insertRule(o.rules[t],n++)}else{for(;i<s;)n+=this.modules[i++].rules.length;n+=o.rules.length,i++}}if(!e){let t="";for(let e=0;e<this.modules.length;e++)t+=this.modules[e].getRules()+"\n";this.styleTag.textContent=t}}}var Nr=function(){function t(){}return t.prototype.eq=function(t){return this==t},t.prototype.range=function(t,e){return void 0===e&&(e=t),new Br(t,e,this)},t}();Nr.prototype.startSide=Nr.prototype.endSide=0,Nr.prototype.point=!1,Nr.prototype.mapMode=Mi.TrackDel;var Br=function(t,e,n){this.from=t,this.to=e,this.value=n};function Rr(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}var zr=function(){function t(t,e,n,i){this.from=t,this.to=e,this.value=n,this.maxPoint=i}return Object.defineProperty(t.prototype,"length",{get:function(){return this.to[this.to.length-1]},enumerable:!1,configurable:!0}),t.prototype.findIndex=function(t,e,n,i){void 0===i&&(i=0);for(var r=n?this.to:this.from,o=i,s=r.length;;){if(o==s)return o;var a=o+s>>1,l=r[a]-t||(n?this.value[a].endSide:this.value[a].startSide)-e;if(a==o)return l>=0?o:s;l>=0?s=a:o=a+1}},t.prototype.between=function(t,e,n,i){for(var r=this.findIndex(e,-1e9,!0),o=this.findIndex(n,1e9,!1,r);r<o;r++)if(!1===i(this.from[r]+t,this.to[r]+t,this.value[r]))return!1},t.prototype.map=function(e,n){for(var i=[],r=[],o=[],s=-1,a=-1,l=0;l<this.value.length;l++){var c=this.value[l],u=this.from[l]+e,h=this.to[l]+e,p=void 0,d=void 0;if(u==h){var f=n.mapPos(u,c.startSide,c.mapMode);if(null==f)continue;p=d=f}else if((p=n.mapPos(u,c.startSide))>(d=n.mapPos(h,c.endSide))||p==d&&c.startSide>0&&c.endSide<=0)continue;(d-p||c.endSide-c.startSide)<0||(s<0&&(s=p),c.point&&(a=Math.max(a,d-p)),i.push(c),r.push(p-s),o.push(d-s))}return{mapped:i.length?new t(r,o,i,a):null,pos:s}},t}(),Hr=function(){function t(e,n,i,r){void 0===i&&(i=t.empty),this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}return Object.defineProperty(t.prototype,"length",{get:function(){var t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){if(this.isEmpty)return 0;for(var t=this.nextLayer.size,e=0,n=this.chunk;e<n.length;e++){t+=n[e].value.length}return t},enumerable:!1,configurable:!0}),t.prototype.chunkEnd=function(t){return this.chunkPos[t]+this.chunk[t].length},t.prototype.update=function(e){var n=e.add,i=void 0===n?[]:n,r=e.sort,o=void 0!==r&&r,s=e.filterFrom,a=void 0===s?0:s,l=e.filterTo,c=void 0===l?this.length:l,u=e.filter;if(0==i.length&&!u)return this;if(o&&i.slice().sort(Rr),this.isEmpty)return i.length?t.of(i):this;for(var h=new jr(this,null,-1).goto(0),p=0,d=[],f=new Vr;h.value||p<i.length;)if(p<i.length&&(h.from-i[p].from||h.startSide-i[p].value.startSide)>=0){var g=i[p++];f.addInner(g.from,g.to,g.value)||d.push(g)}else 1==h.rangeIndex&&h.chunkIndex<this.chunk.length&&(p==i.length||this.chunkEnd(h.chunkIndex)<i[p].from)&&(!u||a>this.chunkEnd(h.chunkIndex)||c<this.chunkPos[h.chunkIndex])&&f.addChunk(this.chunkPos[h.chunkIndex],this.chunk[h.chunkIndex])?h.nextChunk():((!u||a>h.to||c<h.from||u(h.from,h.to,h.value))&&(f.addInner(h.from,h.to,h.value)||d.push(new Br(h.from,h.to,h.value))),h.next());return f.finishInner(this.nextLayer.isEmpty&&!d.length?t.empty:this.nextLayer.update({add:d,filter:u,filterFrom:a,filterTo:c}))},t.prototype.map=function(e){if(0==e.length||this.isEmpty)return this;for(var n=[],i=[],r=-1,o=0;o<this.chunk.length;o++){var s=this.chunkPos[o],a=this.chunk[o],l=e.touchesRange(s,s+a.length);if(!1===l)r=Math.max(r,a.maxPoint),n.push(a),i.push(e.mapPos(s));else if(!0===l){var c=a.map(s,e),u=c.mapped,h=c.pos;u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(h))}}var p=this.nextLayer.map(e);return 0==n.length?p:new t(i,n,p,r)},t.prototype.between=function(t,e,n){if(!this.isEmpty){for(var i=0;i<this.chunk.length;i++){var r=this.chunkPos[i],o=this.chunk[i];if(e>=r&&t<=r+o.length&&!1===o.between(r,t-r,e-r,n))return}this.nextLayer.between(t,e,n)}},t.prototype.iter=function(t){return void 0===t&&(t=0),Ur.from([this]).goto(t)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.nextLayer==this},enumerable:!1,configurable:!0}),t.iter=function(t,e){return void 0===e&&(e=0),Ur.from(t).goto(e)},t.compare=function(t,e,n,i,r){void 0===r&&(r=-1);var o=t.filter((function(t){return t.maxPoint>0||!t.isEmpty&&t.maxPoint>=r})),s=e.filter((function(t){return t.maxPoint>0||!t.isEmpty&&t.maxPoint>=r})),a=qr(o,s,n),l=new Wr(o,a,r),c=new Wr(s,a,r);n.iterGaps((function(t,e,n){return Gr(l,t,c,e,n,i)})),n.empty&&0==n.length&&Gr(l,0,c,0,0,i)},t.eq=function(t,e,n,i){void 0===n&&(n=0),null==i&&(i=1e9);var r=t.filter((function(t){return!t.isEmpty&&e.indexOf(t)<0})),o=e.filter((function(e){return!e.isEmpty&&t.indexOf(e)<0}));if(r.length!=o.length)return!1;if(!r.length)return!0;for(var s=qr(r,o),a=new Wr(r,s,0).goto(n),l=new Wr(o,s,0).goto(n);;){if(a.to!=l.to||!Kr(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>i)return!0;a.next(),l.next()}},t.spans=function(t,e,n,i,r){var o;void 0===r&&(r=-1);for(var s=new Wr(t,null,r,null===(o=i.filterPoint)||void 0===o?void 0:o.bind(i)).goto(e),a=e,l=s.openStart;;){var c=Math.min(s.to,n);if(s.point?(i.point(a,c,s.point,s.activeForPoint(s.to),l),l=s.openEnd(c)+(s.to>c?1:0)):c>a&&(i.span(a,c,s.active,l),l=s.openEnd(c)),s.to>n)break;a=s.to,s.next()}return l},t.of=function(t,e){void 0===e&&(e=!1);for(var n=new Vr,i=0,r=t instanceof Br?[t]:e?function(t){if(t.length>1)for(var e=t[0],n=1;n<t.length;n++){var i=t[n];if(Rr(e,i)>0)return t.slice().sort(Rr);e=i}return t}(t):t;i<r.length;i++){var o=r[i];n.add(o.from,o.to,o.value)}return n.finish()},t}();Hr.empty=new Hr([],[],null,-1),Hr.empty.nextLayer=Hr.empty;var Vr=function(){function t(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}return t.prototype.finishChunk=function(t){this.chunks.push(new zr(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])},t.prototype.add=function(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new t)).add(e,n,i)},t.prototype.addInner=function(t,e,n){var i=t-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)},t.prototype.addChunk=function(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);var n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0},t.prototype.finish=function(){return this.finishInner(Hr.empty)},t.prototype.finishInner=function(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;var e=new Hr(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e},t}();function qr(t,e,n){for(var i=new Map,r=0,o=t;r<o.length;r++)for(var s=o[r],a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&i.set(s.chunk[a],s.chunkPos[a]);for(var l=new Set,c=0,u=e;c<u.length;c++)for(s=u[c],a=0;a<s.chunk.length;a++){var h=i.get(s.chunk[a]);null!=h&&(n?n.mapPos(h):h)==s.chunkPos[a]&&l.add(s.chunk[a])}return l}var jr=function(){function t(t,e,n,i){void 0===i&&(i=0),this.layer=t,this.skip=e,this.minPoint=n,this.rank=i}return Object.defineProperty(t.prototype,"startSide",{get:function(){return this.value?this.value.startSide:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endSide",{get:function(){return this.value?this.value.endSide:0},enumerable:!1,configurable:!0}),t.prototype.goto=function(t,e){return void 0===e&&(e=-1e9),this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this},t.prototype.gotoInner=function(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){var i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<t||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){var r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()},t.prototype.forward=function(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)},t.prototype.next=function(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}var t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}},t.prototype.setRangeIndex=function(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t},t.prototype.nextChunk=function(){this.chunkIndex++,this.rangeIndex=0,this.next()},t.prototype.compare=function(t){return this.from-t.from||this.startSide-t.startSide||this.to-t.to||this.endSide-t.endSide},t}(),Ur=function(){function t(t){this.heap=t}return t.from=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=-1);for(var r=[],o=0;o<e.length;o++)for(var s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&r.push(new jr(s,n,i,o));return 1==r.length?r[0]:new t(r)},Object.defineProperty(t.prototype,"startSide",{get:function(){return this.value?this.value.startSide:0},enumerable:!1,configurable:!0}),t.prototype.goto=function(t,e){void 0===e&&(e=-1e9);for(var n=0,i=this.heap;n<i.length;n++){i[n].goto(t,e)}for(var r=this.heap.length>>1;r>=0;r--)_r(this.heap,r);return this.next(),this},t.prototype.forward=function(t,e){for(var n=0,i=this.heap;n<i.length;n++){i[n].forward(t,e)}for(var r=this.heap.length>>1;r>=0;r--)_r(this.heap,r);(this.to-t||this.value.endSide-e)<0&&this.next()},t.prototype.next=function(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{var t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),_r(this.heap,0)}},t}();function _r(t,e){for(var n=t[e];;){var i=1+(e<<1);if(i>=t.length)break;var r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}var Wr=function(){function t(t,e,n,i){void 0===i&&(i=function(){return!0}),this.minPoint=n,this.filterPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ur.from(t,e,n)}return t.prototype.goto=function(t,e){return void 0===e&&(e=-1e9),this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this},t.prototype.forward=function(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)},t.prototype.removeActive=function(t){$r(this.active,t),$r(this.activeTo,t),$r(this.activeRank,t),this.minActive=Jr(this.active,this.activeTo)},t.prototype.addActive=function(t){for(var e=0,n=this.cursor,i=n.value,r=n.to,o=n.rank;e<this.activeRank.length&&this.activeRank[e]<=o;)e++;Yr(this.active,e,i),Yr(this.activeTo,e,r),Yr(this.activeRank,e,o),t&&Yr(t,e,this.cursor.from),this.minActive=Jr(this.active,this.activeTo)},t.prototype.next=function(){var t=this.to,e=this.point;this.point=null;for(var n=this.openStart<0?[]:null,i=0;;){var r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>t){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&$r(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}var o=this.cursor.value;if(o.point)if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{if(this.filterPoint(this.cursor.from,this.cursor.to,this.cursor.value,this.cursor.rank)){this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<t&&(i=1),this.cursor.next(),this.to>t&&this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}if(n){for(var s=0;s<n.length&&n[s]<t;)s++;this.openStart=s+i}},t.prototype.activeForPoint=function(t){if(!this.active.length)return this.active;for(var e=[],n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()},t.prototype.openEnd=function(t){for(var e=0,n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e},t}();function Gr(t,e,n,i,r,o){t.goto(e),n.goto(i);for(var s=i+r,a=i,l=i-e;;){var c=t.to+l-n.to||t.endSide-n.endSide,u=c<0?t.to+l:n.to,h=Math.min(u,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Kr(t.activeForPoint(t.to+l),n.activeForPoint(n.to))||o.comparePoint(a,h,t.point,n.point):h>a&&!Kr(t.active,n.active)&&o.compareRange(a,h,t.active,n.active),u>s)break;a=u,c<=0&&t.next(),c>=0&&n.next()}}function Kr(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function $r(t,e){for(var n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Yr(t,e,n){for(var i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function Jr(t,e){for(var n=-1,i=1e9,r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}for(var Qr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Xr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Zr="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),to="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),eo="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),no="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),io="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ro=Zr&&(no||+Zr[1]<57)||eo&&no,oo=0;oo<10;oo++)Qr[48+oo]=Qr[96+oo]=String(oo);for(oo=1;oo<=24;oo++)Qr[oo+111]="F"+oo;for(oo=65;oo<=90;oo++)Qr[oo]=String.fromCharCode(oo+32),Xr[oo]=String.fromCharCode(oo);for(var so in Qr)Xr.hasOwnProperty(so)||(Xr[so]=Qr[so]);function ao(t){return(11==t.nodeType?t.getSelection?t:t.ownerDocument:t).getSelection()}function lo(t,e){return!!e&&t.contains(1!=e.nodeType?e.parentNode:e)}function co(t,e){if(!e.anchorNode)return!1;try{return lo(t,e.anchorNode)}catch(t){return!1}}function uo(t){return 3==t.nodeType?xo(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function ho(t,e,n,i){return!!n&&(fo(t,e,n,i,-1)||fo(t,e,n,i,1))}function po(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function fo(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:go(t))){if("DIV"==t.nodeName)return!1;var o=t.parentNode;if(!o||1!=o.nodeType)return!1;e=po(t)+(r<0?0:1),t=o}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?go(t):0}}}function go(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}var mo={left:0,right:0,top:0,bottom:0};function vo(t,e){var n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function yo(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}var bo,wo=function(){function t(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return t.prototype.eq=function(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset},t.prototype.setRange=function(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)},t.prototype.set=function(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i},t}(),ko=null;function Co(t){if(t.setActive)return t.setActive();if(ko)return t.focus(ko);for(var e=[],n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==ko?{get preventScroll(){return ko={preventScroll:!0},!0}}:void 0),!ko){ko=!1;for(var i=0;i<e.length;){var r=e[i++],o=e[i++],s=e[i++];r.scrollTop!=o&&(r.scrollTop=o),r.scrollLeft!=s&&(r.scrollLeft=s)}}}function xo(t,e,n){void 0===n&&(n=e);var i=bo||(bo=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function So(t,e,n){var i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);var o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Eo(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}var Mo=function(){function t(t,e,n){void 0===n&&(n=!0),this.node=t,this.offset=e,this.precise=n}return t.before=function(e,n){return new t(e.parentNode,po(e),n)},t.after=function(e,n){return new t(e.parentNode,po(e)+1,n)},t}(),Lo=[],Do=function(){function t(){this.parent=null,this.dom=null,this.dirty=2}return Object.defineProperty(t.prototype,"editorView",{get:function(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"overrideDOMText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"posAtStart",{get:function(){return this.parent?this.parent.posBefore(this):0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"posAtEnd",{get:function(){return this.posAtStart+this.length},enumerable:!1,configurable:!0}),t.prototype.posBefore=function(t){for(var e=this.posAtStart,n=0,i=this.children;n<i.length;n++){var r=i[n];if(r==t)return e;e+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")},t.prototype.posAfter=function(t){return this.posBefore(t)+t.length},t.prototype.coordsAt=function(t,e){return null},t.prototype.sync=function(e){if(2&this.dirty){for(var n=this.dom,i=n.firstChild,r=0,o=this.children;r<o.length;r++){if((c=o[r]).dirty){if(!c.dom&&i){var s=t.get(i);s&&(s.parent||s.constructor!=c.constructor)||c.reuseDOM(i)}c.sync(e),c.dirty=0}if(e&&!e.written&&e.node==n&&i!=c.dom&&(e.written=!0),c.dom.parentNode==n){for(;i&&i!=c.dom;)i=Ao(i);i=c.dom.nextSibling}else n.insertBefore(c.dom,i)}for(i&&e&&e.node==n&&(e.written=!0);i;)i=Ao(i)}else if(1&this.dirty)for(var a=0,l=this.children;a<l.length;a++){var c;(c=l[a]).dirty&&(c.sync(e),c.dirty=0)}},t.prototype.reuseDOM=function(t){},t.prototype.localPosFromDOM=function(e,n){var i;if(e==this.dom)i=this.dom.childNodes[n];else{for(var r=0==go(e)?0:0==n?-1:1;;){var o=e.parentNode;if(o==this.dom)break;0==r&&o.firstChild!=o.lastChild&&(r=e==o.firstChild?-1:1),e=o}i=r<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!t.get(i);)i=i.nextSibling;if(!i)return this.length;for(var s=0,a=0;;s++){var l=this.children[s];if(l.dom==i)return a;a+=l.length+l.breakAfter}},t.prototype.domBoundsAround=function(t,e,n){void 0===n&&(n=0);for(var i=-1,r=-1,o=-1,s=-1,a=0,l=n,c=n;a<this.children.length;a++){var u=this.children[a],h=l+u.length;if(l<t&&h>e)return u.domBoundsAround(t,e,l);if(h>=t&&-1==i&&(i=a,r=l),l>e&&u.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+u.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}},t.prototype.markDirty=function(t){void 0===t&&(t=!1),this.dirty|=2,this.markParentsDirty(t)},t.prototype.markParentsDirty=function(t){for(var e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),1&e.dirty)return;e.dirty|=1,t=!1}},t.prototype.setParent=function(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))},t.prototype.setDOM=function(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this},Object.defineProperty(t.prototype,"rootView",{get:function(){for(var t=this;;){var e=t.parent;if(!e)return t;t=e}},enumerable:!1,configurable:!0}),t.prototype.replaceChildren=function(t,e,n){var i;void 0===n&&(n=Lo),this.markDirty();for(var r=t;r<e;r++){var o=this.children[r];o.parent==this&&o.destroy()}(i=this.children).splice.apply(i,P([t,e-t],n));for(r=0;r<n.length;r++)n[r].setParent(this)},t.prototype.ignoreMutation=function(t){return!1},t.prototype.ignoreEvent=function(t){return!1},t.prototype.childCursor=function(t){return void 0===t&&(t=this.length),new To(this.children,t,this.children.length)},t.prototype.childPos=function(t,e){return void 0===e&&(e=1),this.childCursor().findPos(t,e)},t.prototype.toString=function(){var t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")},t.get=function(t){return t.cmView},Object.defineProperty(t.prototype,"isEditable",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.merge=function(t,e,n,i,r,o){return!1},t.prototype.become=function(t){return!1},t.prototype.getSide=function(){return 0},t.prototype.destroy=function(){this.parent=null},t}();function Ao(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}Do.prototype.breakAfter=0;var To=function(){function t(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}return t.prototype.findPos=function(t,e){for(void 0===e&&(e=1);;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;var n=this.children[--this.i];this.pos-=n.length+n.breakAfter}},t}();function Po(t,e,n,i,r,o,s,a,l){var c=t.children,u=c.length?c[e]:null,h=o.length?o[o.length-1]:null,p=h?h.breakAfter:s;if(!(e==i&&u&&!s&&!p&&o.length<2&&u.merge(n,r,o.length?h:null,0==n,a,l))){if(i<c.length){var d=c[i];d&&r<d.length?(e==i&&(d=d.split(r),r=0),!p&&h&&d.merge(0,r,h,!0,0,l)?o[o.length-1]=d:(r&&d.merge(0,r,null,!1,0,l),o.push(d))):(null==d?void 0:d.breakAfter)&&(h?h.breakAfter=1:s=1),i++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function Oo(t,e,n,i,r,o){for(var s=t.childCursor(),a=s.findPos(n,1),l=a.i,c=a.off,u=s.findPos(e,-1),h=u.i,p=u.off,d=e-n,f=0,g=i;f<g.length;f++){d+=g[f].length}t.length+=d,Po(t,h,p,l,c,i,0,r,o)}var Fo="undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],Io=Fo[0],No=Fo[1],Bo=/Edge\/(\d+)/.exec(Io.userAgent),Ro=/MSIE \d/.test(Io.userAgent),zo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Io.userAgent),Ho=!!(Ro||zo||Bo),Vo=!Ho&&/gecko\/(\d+)/i.test(Io.userAgent),qo=!Ho&&/Chrome\/(\d+)/.exec(Io.userAgent),jo="webkitFontSmoothing"in No.documentElement.style,Uo=!Ho&&/Apple Computer/.test(Io.vendor),_o=Uo&&(/Mobile\/\w+/.test(Io.userAgent)||Io.maxTouchPoints>2),Wo={mac:_o||/Mac/.test(Io.platform),windows:/Win/.test(Io.platform),linux:/Linux|X11/.test(Io.platform),ie:Ho,ie_version:Ro?No.documentMode||6:zo?+zo[1]:Bo?+Bo[1]:0,gecko:Vo,gecko_version:Vo?+(/Firefox\/(\d+)/.exec(Io.userAgent)||[0,0])[1]:0,chrome:!!qo,chrome_version:qo?+qo[1]:0,ios:_o,android:/Android\b/.test(Io.userAgent),webkit:jo,safari:Uo,webkit_version:jo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=No.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},Go=function(t){function e(e){var n=t.call(this)||this;return n.text=e,n}return M(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.text.length},enumerable:!1,configurable:!0}),e.prototype.createDOM=function(t){this.setDOM(t||document.createTextNode(this.text))},e.prototype.sync=function(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)},e.prototype.reuseDOM=function(t){3==t.nodeType&&this.createDOM(t)},e.prototype.merge=function(t,n,i){return(!i||i instanceof e&&!(this.length-(n-t)+i.length>256))&&(this.text=this.text.slice(0,t)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)},e.prototype.split=function(t){var n=new e(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),n},e.prototype.localPosFromDOM=function(t,e){return t==this.dom?e:e?this.text.length:0},e.prototype.domAtPos=function(t){return new Mo(this.dom,t)},e.prototype.domBoundsAround=function(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}},e.prototype.coordsAt=function(t,e){return $o(this.dom,t,e)},e}(Do),Ko=function(t){function e(e,n,i){void 0===n&&(n=[]),void 0===i&&(i=0);var r=t.call(this)||this;r.mark=e,r.children=n,r.length=i;for(var o=0,s=n;o<s.length;o++){s[o].setParent(r)}return r}return M(e,t),e.prototype.setAttrs=function(t){if(Eo(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(var e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t},e.prototype.reuseDOM=function(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)},e.prototype.sync=function(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),t.prototype.sync.call(this,e)},e.prototype.merge=function(t,n,i,r,o,s){return(!i||!(!(i instanceof e&&i.mark.eq(this.mark))||t&&o<=0||n<this.length&&s<=0))&&(Oo(this,t,n,i?i.children:[],o-1,s-1),this.markDirty(),!0)},e.prototype.split=function(t){for(var n=[],i=0,r=-1,o=0,s=0,a=this.children;s<a.length;s++){var l=a[s],c=i+l.length;c>t&&n.push(i<t?l.split(t-i):l),r<0&&i>=t&&(r=o),i=c,o++}var u=this.length-t;return this.length=t,r>-1&&(this.children.length=r,this.markDirty()),new e(this.mark,n,u)},e.prototype.domAtPos=function(t){return Zo(this.dom,this.children,t)},e.prototype.coordsAt=function(t,e){return es(this,t,e)},e}(Do);function $o(t,e,n){var i=t.nodeValue.length;e>i&&(e=i);var r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?Wo.chrome||Wo.gecko||(e?(r--,s=1):(o++,s=-1)):n<0?r--:o++;var a=xo(t,r,o).getClientRects();if(!a.length)return mo;var l=a[(s?s<0:n>=0)?0:a.length-1];return Wo.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(function(t){return t.width}))||l),s?vo(l,s<0):l||null}var Yo=function(t){function e(e,n,i){var r=t.call(this)||this;return r.widget=e,r.length=n,r.side=i,r}return M(e,t),e.create=function(t,n,i){return new(t.customView||e)(t,n,i)},e.prototype.split=function(t){var n=e.create(this.widget,this.length-t,this.side);return this.length-=t,n},e.prototype.sync=function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")},e.prototype.getSide=function(){return this.side},e.prototype.merge=function(t,n,i,r,o,s){return!(i&&(!(i instanceof e&&this.widget.compare(i.widget))||t>0&&o<=0||n<this.length&&s<=0))&&(this.length=t+(i?i.length:0)+(this.length-n),!0)},e.prototype.become=function(t){return t.length==this.length&&t instanceof e&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.eq(t.widget)||this.markDirty(!0),this.widget=t.widget,!0)},e.prototype.ignoreMutation=function(){return!0},e.prototype.ignoreEvent=function(t){return this.widget.ignoreEvent(t)},Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){if(0==this.length)return mi.empty;for(var t=this;t.parent;)t=t.parent;var e=t.editorView,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):mi.empty},enumerable:!1,configurable:!0}),e.prototype.domAtPos=function(t){return 0==t?Mo.before(this.dom):Mo.after(this.dom,t==this.length)},e.prototype.domBoundsAround=function(){return null},e.prototype.coordsAt=function(t,e){var n=this.dom.getClientRects(),i=null;if(!n.length)return mo;for(var r=t>0?n.length-1:0;i=n[r],!(t>0?0==r:r==n.length-1||i.top<i.bottom);r+=t>0?-1:1);return 0==t&&e>0||t==this.length&&e<=0?i:vo(i,0==t)},Object.defineProperty(e.prototype,"isEditable",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.dom&&this.widget.destroy(this.dom)},e}(Do),Jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.domAtPos=function(t){return new Mo(this.widget.text,t)},e.prototype.sync=function(){this.setDOM(this.widget.toDOM())},e.prototype.localPosFromDOM=function(t,e){return e?3==t.nodeType?Math.min(e,this.length):this.length:0},e.prototype.ignoreMutation=function(){return!1},Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.coordsAt=function(t,e){return $o(this.widget.text,t,e)},Object.defineProperty(e.prototype,"isEditable",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(Yo),Qo=Wo.android?"​​":"​",Xo=function(t){function e(e){var n=t.call(this)||this;return n.side=e,n}return M(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.merge=function(){return!1},e.prototype.become=function(t){return t instanceof e&&t.side==this.side},e.prototype.split=function(){return new e(this.side)},e.prototype.sync=function(){this.dom?this.dirty&&this.dom.nodeValue!=Qo&&(this.dom.nodeValue=Qo):this.setDOM(document.createTextNode(Qo))},e.prototype.getSide=function(){return this.side},e.prototype.domAtPos=function(t){return Mo.before(this.dom)},e.prototype.localPosFromDOM=function(){return 0},e.prototype.domBoundsAround=function(){return null},e.prototype.coordsAt=function(t){var e=uo(this.dom);return e[e.length-1]||null},Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){return mi.of([this.dom.nodeValue.replace(/\u200b/g,"")])},enumerable:!1,configurable:!0}),e}(Do);function Zo(t,e,n){for(var i=0,r=0;i<e.length;i++){var o=e[i],s=r+o.length;if(!(s==r&&o.getSide()<=0)){if(n>r&&n<s&&o.dom.parentNode==t)return o.domAtPos(n-r);if(n<=r)break;r=s}}for(;i>0;i--){var a=e[i-1].dom;if(a.parentNode==t)return Mo.after(a)}return new Mo(t,0)}function ts(t,e,n){var i,r=t.children;n>0&&e instanceof Ko&&r.length&&(i=r[r.length-1])instanceof Ko&&i.mark.eq(e.mark)?ts(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function es(t,e,n){for(var i=0,r=0;r<t.children.length;r++){var o=t.children[r],s=i+o.length,a=void 0;if((n<=0||s==t.length||o.getSide()>0?s>=e:s>e)&&(e<s||r+1==t.children.length||(a=t.children[r+1]).length||a.getSide()>0)){var l=0;if(s==i){if(o.getSide()<=0)continue;l=n=-o.getSide()}var c=o.coordsAt(e-i,n);return l&&c?vo(c,n<0):c}i=s}var u=t.dom.lastChild;if(!u)return t.dom.getBoundingClientRect();var h=uo(u);return h[h.length-1]||null}function ns(t,e){for(var n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}function is(t,e){if(t==e)return!0;if(!t||!e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(var r=0,o=n;r<o.length;r++){var s=o[r];if(-1==i.indexOf(s)||t[s]!==e[s])return!1}return!0}function rs(t,e,n){if(e)for(var i in e)n&&i in n||t.removeAttribute(i);if(n)for(var i in n)e&&e[i]==n[i]||t.setAttribute(i,n[i])}Go.prototype.children=Yo.prototype.children=Xo.prototype.children=Lo;var os=function(){function t(){}return t.prototype.eq=function(t){return!1},t.prototype.updateDOM=function(t){return!1},t.prototype.compare=function(t){return this==t||this.constructor==t.constructor&&this.eq(t)},Object.defineProperty(t.prototype,"estimatedHeight",{get:function(){return-1},enumerable:!1,configurable:!0}),t.prototype.ignoreEvent=function(t){return!0},Object.defineProperty(t.prototype,"customView",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.destroy=function(t){},t}(),ss=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(ss||(ss={})),as=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.startSide=e,o.endSide=n,o.widget=i,o.spec=r,o}return M(e,t),Object.defineProperty(e.prototype,"heightRelevant",{get:function(){return!1},enumerable:!1,configurable:!0}),e.mark=function(t){return new ls(t)},e.widget=function(t){var e=t.side||0,n=!!t.block;return new us(t,e+=n?e>0?3e8:-4e8:e>0?1e8:-1e8,e,n,t.widget||null,!1)},e.replace=function(t){var e=!!t.block,n=hs(t,e),i=n.start,r=n.end;return new us(t,e?i?-3e8:-1:4e8,e?r?2e8:1:-5e8,e,t.widget||null,!0)},e.line=function(t){return new cs(t)},e.set=function(t,e){return void 0===e&&(e=!1),Hr.of(t,e)},e.prototype.hasHeight=function(){return!!this.widget&&this.widget.estimatedHeight>-1},e}(Nr);as.none=Hr.empty;var ls=function(t){function e(e){var n=this,i=hs(e),r=i.start,o=i.end;return(n=t.call(this,r?-1:4e8,o?1:-5e8,null,e)||this).tagName=e.tagName||"span",n.class=e.class||"",n.attrs=e.attributes||null,n}return M(e,t),e.prototype.eq=function(t){return this==t||t instanceof e&&this.tagName==t.tagName&&this.class==t.class&&is(this.attrs,t.attrs)},e.prototype.range=function(e,n){if(void 0===n&&(n=e),e>=n)throw new RangeError("Mark decorations may not be empty");return t.prototype.range.call(this,e,n)},e}(as);ls.prototype.point=!1;var cs=function(t){function e(e){return t.call(this,-2e8,-2e8,null,e)||this}return M(e,t),e.prototype.eq=function(t){return t instanceof e&&is(this.spec.attributes,t.spec.attributes)},e.prototype.range=function(e,n){if(void 0===n&&(n=e),n!=e)throw new RangeError("Line decoration ranges must be zero-length");return t.prototype.range.call(this,e,n)},e}(as);cs.prototype.mapMode=Mi.TrackBefore,cs.prototype.point=!0;var us=function(t){function e(e,n,i,r,o,s){var a=t.call(this,n,i,o,e)||this;return a.block=r,a.isReplace=s,a.mapMode=r?n<=0?Mi.TrackBefore:Mi.TrackAfter:Mi.TrackDel,a}return M(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.startSide<this.endSide?ss.WidgetRange:this.startSide<=0?ss.WidgetBefore:ss.WidgetAfter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"heightRelevant",{get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5},enumerable:!1,configurable:!0}),e.prototype.eq=function(t){return t instanceof e&&(n=this.widget,i=t.widget,n==i||!!(n&&i&&n.compare(i)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var n,i},e.prototype.range=function(e,n){if(void 0===n&&(n=e),this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return t.prototype.range.call(this,e,n)},e}(as);function hs(t,e){void 0===e&&(e=!1);var n=t.inclusiveStart,i=t.inclusiveEnd;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function ps(t,e,n,i){void 0===i&&(i=0);var r=n.length-1;r>=0&&n[r]+i>t?n[r]=Math.max(n[r],e):n.push(t,e)}us.prototype.point=!0;var ds=function(t){function e(){var e=t.apply(this,arguments)||this;return e.children=[],e.length=0,e.prevAttrs=void 0,e.attrs=null,e.breakAfter=0,e}return M(e,t),e.prototype.merge=function(t,n,i,r,o,s){if(i){if(!(i instanceof e))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),Oo(this,t,n,i?i.children:[],o,s),!0},e.prototype.split=function(t){var n=new e;if(n.breakAfter=this.breakAfter,0==this.length)return n;var i=this.childPos(t),r=i.i,o=i.off;o&&(n.append(this.children[r].split(o),0),this.children[r].merge(o,this.children[r].length,null,!1,0,0),r++);for(var s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=t,n},e.prototype.transferDOM=function(t){this.dom&&(t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)},e.prototype.setDeco=function(t){is(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)},e.prototype.append=function(t,e){ts(this,t,e)},e.prototype.addLineDeco=function(t){var e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=ns(e,this.attrs||{})),n&&(this.attrs=ns(e,{class:n}))},e.prototype.domAtPos=function(t){return Zo(this.dom,this.children,t)},e.prototype.reuseDOM=function(t){"DIV"==t.nodeName&&(this.setDOM(t),this.dirty|=6)},e.prototype.sync=function(e){var n;this.dom?4&this.dirty&&(Eo(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(rs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),t.prototype.sync.call(this,e);for(var i=this.dom.lastChild;i&&Do.get(i)instanceof Ko;)i=i.lastChild;if(!i||"BR"!=i.nodeName&&0==(null===(n=Do.get(i))||void 0===n?void 0:n.isEditable)&&(!Wo.ios||!this.children.some((function(t){return t instanceof Go})))){var r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}},e.prototype.measureTextSize=function(){if(0==this.children.length||this.length>20)return null;for(var t=0,e=0,n=this.children;e<n.length;e++){var i=n[e];if(!(i instanceof Go))return null;var r=uo(i.dom);if(1!=r.length)return null;t+=r[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}},e.prototype.coordsAt=function(t,e){return es(this,t,e)},e.prototype.become=function(t){return!1},Object.defineProperty(e.prototype,"type",{get:function(){return ss.Text},enumerable:!1,configurable:!0}),e.find=function(t,n){for(var i=0,r=0;i<t.children.length;i++){var o=t.children[i],s=r+o.length;if(s>=n){if(o instanceof e)return o;if(s>n)break}r=s+o.breakAfter}return null},e}(Do),fs=function(t){function e(e,n,i){var r=t.call(this)||this;return r.widget=e,r.length=n,r.type=i,r.breakAfter=0,r}return M(e,t),e.prototype.merge=function(t,n,i,r,o,s){return!(i&&(!(i instanceof e&&this.widget.compare(i.widget))||t>0&&o<=0||n<this.length&&s<=0))&&(this.length=t+(i?i.length:0)+(this.length-n),!0)},e.prototype.domAtPos=function(t){return 0==t?Mo.before(this.dom):Mo.after(this.dom,t==this.length)},e.prototype.split=function(t){var n=this.length-t;this.length=t;var i=new e(this.widget,n,this.type);return i.breakAfter=this.breakAfter,i},Object.defineProperty(e.prototype,"children",{get:function(){return Lo},enumerable:!1,configurable:!0}),e.prototype.sync=function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")},Object.defineProperty(e.prototype,"overrideDOMText",{get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):mi.empty},enumerable:!1,configurable:!0}),e.prototype.domBoundsAround=function(){return null},e.prototype.become=function(t){return t instanceof e&&t.type==this.type&&t.widget.constructor==this.widget.constructor&&(t.widget.eq(this.widget)||this.markDirty(!0),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0)},e.prototype.ignoreMutation=function(){return!0},e.prototype.ignoreEvent=function(t){return this.widget.ignoreEvent(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.dom&&this.widget.destroy(this.dom)},e}(Do),gs=function(){function t(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsBelow=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}return t.prototype.posCovered=function(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof fs&&t.type==ss.WidgetBefore)},t.prototype.getLine=function(){return this.curLine||(this.content.push(this.curLine=new ds),this.atCursorPos=!0),this.curLine},t.prototype.flushBuffer=function(t){this.pendingBuffer&&(this.curLine.append(ms(new Xo(-1),t),t.length),this.pendingBuffer=0)},t.prototype.addBlockWidget=function(t){this.flushBuffer([]),this.curLine=null,this.content.push(t)},t.prototype.finish=function(t){t?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()},t.prototype.buildText=function(t,e,n){for(;t>0;){if(this.textOff==this.text.length){var i=this.cursor.next(this.skip),r=i.value,o=i.lineBreak,s=i.done;if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,t--;continue}this.text=r,this.textOff=0}var a=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e),this.getLine().append(ms(new Go(this.text.slice(this.textOff,this.textOff+a)),e),n),this.atCursorPos=!0,this.textOff+=a,t-=a,n=0}},t.prototype.span=function(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)},t.prototype.point=function(t,e,n,i,r){var o=e-t;if(n instanceof us)if(n.block){var s=n.type;s!=ss.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new fs(n.widget||new vs("div"),o,s))}else{var a=Yo.create(n.widget||new vs("span"),o,n.startSide),l=this.atCursorPos&&!a.isEditable&&r<=i.length&&(t<e||n.startSide>0),c=!a.isEditable&&(t<e||n.startSide<=0),u=this.getLine();2!=this.pendingBuffer||l||(this.pendingBuffer=0),this.flushBuffer(i),l&&(u.append(ms(new Xo(1),i),r),r=i.length+Math.max(0,r-i.length)),u.append(ms(a,i),r),this.atCursorPos=c,this.pendingBuffer=c?t<e?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)},t.prototype.filterPoint=function(t,e,n,i){if(i>=this.disallowBlockEffectsBelow||!(n instanceof us))return!0;if(n.block)throw new RangeError("Block decorations may not be specified via plugins");return e<=this.doc.lineAt(this.pos).to},t.build=function(e,n,i,r,o){var s=new t(e,n,i,o);return s.openEnd=Hr.spans(r,n,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s},t}();function ms(t,e){for(var n=0,i=e;n<i.length;n++){var r=i[n];t=new Ko(r,[t],t.length)}return t}var vs=function(t){function e(e){var n=t.call(this)||this;return n.tag=e,n}return M(e,t),e.prototype.eq=function(t){return t.tag==this.tag},e.prototype.toDOM=function(){return document.createElement(this.tag)},e.prototype.updateDOM=function(t){return t.nodeName.toLowerCase()==this.tag},e}(os),ys=[],bs=Vi.define(),ws=Vi.define(),ks=Vi.define(),Cs=Vi.define(),xs=Vi.define(),Ss=Vi.define(),Es=gr.define({map:function(t,e){return t.map(e)}}),Ms=gr.define({map:function(t,e){return t.map(e)}}),Ls=function(){function t(t,e,n,i,r){void 0===e&&(e="nearest"),void 0===n&&(n="nearest"),void 0===i&&(i=5),void 0===r&&(r=5),this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r}return t.prototype.map=function(e){return e.empty?this:new t(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)},t}(),Ds=gr.define({map:function(t,e){return t.map(e)}});function As(t,e,n){var i=t.facet(Cs);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}var Ts=Vi.define({combine:function(t){return!t.length||t[0]}}),Ps=function(t,e){this.field=t,this.get=e},Os=function(){function t(){}return t.prototype.from=function(t){return new Ps(this,t)},t.define=function(){return new t},t}();Os.decorations=Os.define(),Os.atomicRanges=Os.define(),Os.scrollMargins=Os.define();var Fs=0,Is=Vi.define(),Ns=function(){function t(t,e,n){this.id=t,this.create=e,this.fields=n,this.extension=Is.of(this)}return t.define=function(e,n){var i=n||{},r=i.eventHandlers,o=i.provide,s=i.decorations,a=[];if(o)for(var l=0,c=Array.isArray(o)?o:[o];l<c.length;l++){var u=c[l];a.push(u)}return r&&a.push(Bs.from((function(t){return{plugin:t,handlers:r}}))),s&&a.push(Os.decorations.from(s)),new t(Fs++,e,a)},t.fromClass=function(e,n){return t.define((function(t){return new e(t)}),n)},t}(),Bs=Os.define(),Rs=function(){function t(t){this.spec=t,this.mustUpdate=null,this.value=null}return t.prototype.takeField=function(t,e){if(this.spec)for(var n=0,i=this.spec.fields;n<i.length;n++){var r=i[n],o=r.field,s=r.get;o==t&&e.push(s(this.value))}},t.prototype.update=function(t){if(this.value){if(this.mustUpdate){var e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(As(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){As(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this},t.prototype.destroy=function(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){As(t.state,e,"CodeMirror plugin crashed")}},t.prototype.deactivate=function(){this.spec=this.value=null},t}(),zs=Vi.define(),Hs=Vi.define(),Vs=Vi.define(),qs=Vi.define(),js=function(){function t(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}return t.prototype.join=function(e){return new t(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))},t.prototype.addToSet=function(t){for(var e=t.length,n=this;e>0;e--){var i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t},t.extendWithRanges=function(e,n){if(0==n.length)return e;for(var i=[],r=0,o=0,s=0,a=0;;r++){for(var l=r==e.length?null:e[r],c=s-a,u=l?l.fromB:1e9;o<n.length&&n[o]<u;){var h=n[o],p=n[o+1],d=Math.max(a,h),f=Math.min(u,p);if(d<=f&&new t(d+c,f+c,d,f).addToSet(i),p>u)break;o+=2}if(!l)return i;new t(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),s=l.toA,a=l.toB}},t}(),Us=function(){function t(t,e,n){void 0===n&&(n=ys),this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Di.empty(this.startState.doc.length);for(var i=0,r=n;i<r.length;i++){var o=r[i];this.changes=this.changes.compose(o.changes)}var s=[];this.changes.iterChangedRanges((function(t,e,n,i){return s.push(new js(t,e,n,i))})),this.changedRanges=s;var a=t.hasFocus;a!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=a,this.flags|=1)}return Object.defineProperty(t.prototype,"viewportChanged",{get:function(){return(4&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heightChanged",{get:function(){return(2&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"geometryChanged",{get:function(){return this.docChanged||(10&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusChanged",{get:function(){return(1&this.flags)>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docChanged",{get:function(){return!this.changes.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionSet",{get:function(){return this.transactions.some((function(t){return t.selection}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0==this.flags&&0==this.transactions.length},enumerable:!1,configurable:!0}),t}(),_s=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(_s||(_s={})),Ws=_s.LTR,Gs=_s.RTL;function Ks(t){for(var e=[],n=0;n<t.length;n++)e.push(1<<+t[n]);return e}for(var $s=Ks("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ys=Ks("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Js=Object.create(null),Qs=[],Xs=0,Zs=["()","[]","{}"];Xs<Zs.length;Xs++){var ta=Zs[Xs],ea=ta.charCodeAt(0),na=ta.charCodeAt(1);Js[ea]=na,Js[na]=-ea}function ia(t){return t<=247?$s[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Ys[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203||8204==t?256:1}var ra=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,oa=function(){function t(t,e,n){this.from=t,this.to=e,this.level=n}return Object.defineProperty(t.prototype,"dir",{get:function(){return this.level%2?Gs:Ws},enumerable:!1,configurable:!0}),t.prototype.side=function(t,e){return this.dir==e==t?this.to:this.from},t.find=function(t,e,n,i){for(var r=-1,o=0;o<t.length;o++){var s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r},t}(),sa=[];function aa(t,e){var n=t.length,i=e==Ws?1:2,r=e==Ws?2:1;if(!t||1==i&&!ra.test(t))return la(n);for(var o=0,s=i,a=i;o<n;o++){512==(g=ia(t.charCodeAt(o)))?g=s:8==g&&4==a&&(g=16),sa[o]=4==g?2:g,7&g&&(a=g),s=g}for(o=0,s=i,a=i;o<n;o++){if(128==(g=sa[o]))o<n-1&&s==sa[o+1]&&24&s?g=sa[o]=s:sa[o]=256;else if(64==g){for(var l=o+1;l<n&&64==sa[l];)l++;for(var c=o&&8==s||l<n&&8==sa[l]?1==a?1:8:256,u=o;u<l;u++)sa[u]=c;o=l-1}else 8==g&&1==a&&(sa[o]=1);s=g,7&g&&(a=g)}o=0;for(var h=0,p=0,d=void 0,f=void 0,g=void 0;o<n;o++)if(f=Js[d=t.charCodeAt(o)])if(f<0){for(var m=h-3;m>=0;m-=3)if(Qs[m+1]==-f){var v=Qs[m+2],y=2&v?i:4&v?1&v?r:i:0;y&&(sa[o]=sa[Qs[m]]=y),h=m;break}}else{if(189==Qs.length)break;Qs[h++]=o,Qs[h++]=d,Qs[h++]=p}else if(2==(g=sa[o])||1==g){var b=g==i;p=b?0:1;for(m=h-3;m>=0;m-=3){var w=Qs[m+2];if(2&w)break;if(b)Qs[m+2]|=2;else{if(4&w)break;Qs[m+2]|=4}}}for(o=0;o<n;o++)if(256==sa[o]){for(l=o+1;l<n&&256==sa[l];)l++;var k=1==(o?sa[o-1]:i);for(c=k==(1==(l<n?sa[l]:i))?k?1:2:i,u=o;u<l;u++)sa[u]=c;o=l-1}var C=[];if(1==i)for(o=0;o<n;){for(var x=o,S=1!=sa[o++];o<n&&S==(1!=sa[o]);)o++;if(S)for(u=o;u>x;){l=u;for(var E=2!=sa[--u];u>x&&E==(2!=sa[u-1]);)u--;C.push(new oa(u,l,E?2:1))}else C.push(new oa(x,o,0))}else for(o=0;o<n;){for(x=o,S=2==sa[o++];o<n&&S==(2==sa[o]);)o++;C.push(new oa(x,o,S?1:2))}return C}function la(t){return[new oa(0,t,0)]}var ca="";function ua(t,e,n,i,r){var o,s=i.head-t.from,a=-1;if(0==s){if(!r||!t.length)return null;e[0].level!=n&&(s=e[0].side(!1,n),a=0)}else if(s==t.length){if(r)return null;var l=e[e.length-1];l.level!=n&&(s=l.side(!0,n),a=e.length-1)}a<0&&(a=oa.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc));var c=e[a];s==c.side(r,n)&&(s=(c=e[a+=r?1:-1]).side(!r,n));var u=r==(c.dir==n),h=si(t.text,s,u);if(ca=t.text.slice(Math.min(s,h),Math.max(s,h)),h!=c.side(r,n))return Bi.cursor(h+t.from,u?-1:1,c.level);var p=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return p||c.level==n?p&&p.level<c.level?Bi.cursor(p.side(!r,n)+t.from,r?1:-1,p.level):Bi.cursor(h+t.from,r?-1:1,c.level):Bi.cursor(r?t.to:t.from,r?-1:1,n)}var ha=function(){function t(t,e){this.points=t,this.view=e,this.text="",this.lineBreak=e.state.lineBreak}return t.prototype.readRange=function(t,e){if(!t)return this;for(var n=t.parentNode,i=t;;){this.findPointBefore(n,i),this.readNode(i);var r=i.nextSibling;if(r==e)break;var o=Do.get(i),s=Do.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:pa(i))||pa(r)&&("BR"!=i.nodeName||i.cmIgnore))&&(this.text+=this.lineBreak),i=r}return this.findPointBefore(n,e),this},t.prototype.readNode=function(t){if(!t.cmIgnore){var e,n=Do.get(t),i=n&&n.overrideDOMText;null!=i?e=i.sliceString(0,void 0,this.lineBreak):3==t.nodeType?e=t.nodeValue:"BR"==t.nodeName?e=t.nextSibling?this.lineBreak:"":1==t.nodeType&&this.readRange(t.firstChild,null),null!=e&&(this.findPointIn(t,e.length),this.text+=e,Wo.chrome&&13==this.view.inputState.lastKeyCode&&!t.nextSibling&&/\n\n$/.test(this.text)&&(this.text=this.text.slice(0,-1)))}},t.prototype.findPointBefore=function(t,e){for(var n=0,i=this.points;n<i.length;n++){var r=i[n];r.node==t&&t.childNodes[r.offset]==e&&(r.pos=this.text.length)}},t.prototype.findPointIn=function(t,e){for(var n=0,i=this.points;n<i.length;n++){var r=i[n];r.node==t&&(r.pos=this.text.length+Math.min(r.offset,e))}},t}();function pa(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}var da=function(t,e){this.node=t,this.offset=e,this.pos=-1},fa=function(t){function e(e){var n=t.call(this)||this;return n.view=e,n.compositionDeco=as.none,n.decorations=[],n.pluginDecorationLength=0,n.minWidth=0,n.minWidthFrom=0,n.minWidthTo=0,n.impreciseAnchor=null,n.impreciseHead=null,n.forceSelection=!1,n.lastUpdate=Date.now(),n.setDOM(e.contentDOM),n.children=[new ds],n.children[0].setParent(n),n.updateDeco(),n.updateInner([new js(0,0,0,e.state.doc.length)],0),n}return M(e,t),Object.defineProperty(e.prototype,"root",{get:function(){return this.view.root},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editorView",{get:function(){return this.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.view.state.doc.length},enumerable:!1,configurable:!0}),e.prototype.update=function(t){var e=this,n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((function(t){var n=t.fromA;return t.toA<e.minWidthFrom||n>e.minWidthTo}))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=as.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=function(t,e){var n=t.observer.selectionRange,i=n.focusNode&&va(n.focusNode,n.focusOffset,0);if(!i)return as.none;var r=t.docView.nearest(i);if(!r)return as.none;var o,s,a=i;if(r instanceof ds){for(;a.parentNode!=r.dom;)a=a.parentNode;for(var l=a.previousSibling;l&&!Do.get(l);)l=l.previousSibling;o=s=l?Do.get(l).posAtEnd:r.posAtStart}else{for(;;){var c=r.parent;if(!c)return as.none;if(c instanceof ds)break;r=c}s=(o=r.posAtStart)+r.length,a=r.dom}var u=e.mapPos(o,1),h=Math.max(u,e.mapPos(s,-1)),p=t.state,d=3==a.nodeType?a.nodeValue:new ha([],t).readRange(a.firstChild,null).text;if(h-u<d.length)if(p.sliceDoc(u,Math.min(p.doc.length,u+d.length))==d)h=u+d.length;else{if(p.sliceDoc(Math.max(0,h-d.length),h)!=d)return as.none;u=h-d.length}else if(p.sliceDoc(u,h)!=d)return as.none;return as.set(as.replace({widget:new ma(a,i)}).range(u,h))}(this.view,t.changes)),(Wo.ie||Wo.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);var i,r,o,s,a=this.decorations,l=this.updateDeco(),c=(i=a,r=l,o=t.changes,s=new ya,Hr.compare(i,r,o,s),s.changes);return n=js.extendWithRanges(n,c),(0!=this.dirty||0!=n.length)&&(this.updateInner(n,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)},e.prototype.updateInner=function(t,e){var n=this;this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e);var i=this.view.observer;i.ignore((function(){n.dom.style.height=n.view.viewState.contentHeight+"px",n.dom.style.minWidth=n.minWidth?n.minWidth+"px":"";var t=Wo.chrome||Wo.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;n.sync(t),n.dirty=0,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(n.forceSelection=!0),n.dom.style.height=""}));var r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(var o=0,s=this.children;o<s.length;o++){var a=s[o];a instanceof fs&&a.widget instanceof ga&&r.push(a.dom)}i.updateGaps(r)},e.prototype.updateChildren=function(t,e){for(var n=this.childCursor(e),i=t.length-1;;i--){var r=i>=0?t[i]:null;if(!r)break;var o=r.fromA,s=r.toA,a=r.fromB,l=r.toB,c=gs.build(this.view.state.doc,a,l,this.decorations,this.pluginDecorationLength),u=c.content,h=c.breakAtStart,p=c.openStart,d=c.openEnd,f=n.findPos(s,1),g=f.i,m=f.off,v=n.findPos(o,-1);Po(this,v.i,v.off,g,m,u,h,p,d)}},e.prototype.updateSelection=function(t,e){var n=this;if(void 0===t&&(t=!1),void 0===e&&(e=!1),t&&this.view.observer.readSelectionRange(),!(!e&&!this.mayControlSelection()||Wo.ios&&this.view.inputState.rapidCompositionStart)){var i=this.forceSelection;this.forceSelection=!1;var r=this.view.state.selection.main,o=this.domAtPos(r.anchor),s=r.empty?o:this.domAtPos(r.head);if(Wo.gecko&&r.empty&&function(t){return 1==t.node.nodeType&&t.node.firstChild&&(0==t.offset||"false"==t.node.childNodes[t.offset-1].contentEditable)&&(t.offset==t.node.childNodes.length||"false"==t.node.childNodes[t.offset].contentEditable)}(o)){var a=document.createTextNode("");this.view.observer.ignore((function(){return o.node.insertBefore(a,o.node.childNodes[o.offset]||null)})),o=s=new Mo(a,0),i=!0}var l=this.view.observer.selectionRange;!i&&l.focusNode&&ho(o.node,o.offset,l.anchorNode,l.anchorOffset)&&ho(s.node,s.offset,l.focusNode,l.focusOffset)||(this.view.observer.ignore((function(){var t;Wo.android&&Wo.chrome&&n.dom.contains(l.focusNode)&&function(t,e){for(var n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(l.focusNode,n.dom)&&(n.dom.blur(),n.dom.focus({preventScroll:!0}));var e,i,a=ao(n.root);if(r.empty){if(Wo.gecko){var c=(e=o.node,i=o.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(c&&3!=c){var u=va(o.node,o.offset,1==c?1:-1);u&&(o=new Mo(u,1==c?0:u.nodeValue.length))}}a.collapse(o.node,o.offset),null!=r.bidiLevel&&null!=l.cursorBidiLevel&&(l.cursorBidiLevel=r.bidiLevel)}else if(a.extend)a.collapse(o.node,o.offset),a.extend(s.node,s.offset);else{var h=document.createRange();r.anchor>r.head&&(o=(t=[s,o])[0],s=t[1]),h.setEnd(s.node,s.offset),h.setStart(o.node,o.offset),a.removeAllRanges(),a.addRange(h)}})),this.view.observer.setSelectionRange(o,s)),this.impreciseAnchor=o.precise?null:new Mo(l.anchorNode,l.anchorOffset),this.impreciseHead=s.precise?null:new Mo(l.focusNode,l.focusOffset)}},e.prototype.enforceCursorAssoc=function(){if(!this.compositionDeco.size){var t=this.view.state.selection.main,e=ao(this.root);if(t.empty&&t.assoc&&e.modify){var n=ds.find(this,t.head);if(n){var i=n.posAtStart;if(t.head!=i&&t.head!=i+n.length){var r=this.coordsAt(t.head,-1),o=this.coordsAt(t.head,1);if(r&&o&&!(r.bottom>o.top)){var s=this.domAtPos(t.head+t.assoc);e.collapse(s.node,s.offset),e.modify("move",t.assoc<0?"forward":"backward","lineboundary")}}}}}},e.prototype.mayControlSelection=function(){return this.view.state.facet(Ts)?this.root.activeElement==this.dom:co(this.dom,this.view.observer.selectionRange)},e.prototype.nearest=function(t){for(var e=t;e;){var n=Do.get(e);if(n&&n.rootView==this)return n;e=e.parentNode}return null},e.prototype.posFromDOM=function(t,e){var n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart},e.prototype.domAtPos=function(t){for(var e=this.childCursor().findPos(t,-1),n=e.i,i=e.off;n<this.children.length-1;){var r=this.children[n];if(i<r.length||r instanceof ds)break;n++,i=0}return this.children[n].domAtPos(i)},e.prototype.coordsAt=function(t,e){for(var n=this.length,i=this.children.length-1;;i--){var r=this.children[i],o=n-r.breakAfter-r.length;if(t>o||t==o&&r.type!=ss.WidgetBefore&&r.type!=ss.WidgetAfter&&(!i||2==e||this.children[i-1].breakAfter||this.children[i-1].type==ss.WidgetBefore&&e>-2))return r.coordsAt(t-o,e);n=o}},e.prototype.measureVisibleLineHeights=function(){for(var t=[],e=this.view.viewState.viewport,n=e.from,i=e.to,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=0,l=0;l<this.children.length;l++){var c=this.children[l],u=a+c.length;if(u>i)break;if(a>=n){var h=c.dom.getBoundingClientRect();if(t.push(h.height),o){var p=c.dom.lastChild,d=p?uo(p):[];if(d.length){var f=d[d.length-1],g=this.view.textDirection==_s.LTR?f.right-h.left:h.right-f.left;g>s&&(s=g,this.minWidth=r,this.minWidthFrom=a,this.minWidthTo=u)}}}a=u+c.breakAfter}return t},e.prototype.measureTextSize=function(){for(var t=this,e=0,n=this.children;e<n.length;e++){var i=n[e];if(i instanceof ds){var r=i.measureTextSize();if(r)return r}}var o,s,a=document.createElement("div");return a.className="cm-line",a.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((function(){t.dom.appendChild(a);var e=uo(a.firstChild)[0];o=a.getBoundingClientRect().height,s=e?e.width/27:7,a.remove()})),{lineHeight:o,charWidth:s}},e.prototype.childCursor=function(t){void 0===t&&(t=this.length);var e=this.children.length;return e&&(t-=this.children[--e].length),new To(this.children,t,e)},e.prototype.computeBlockGapDeco=function(){for(var t=[],e=this.view.viewState,n=0,i=0;;i++){var r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){var s=e.lineBlockAt(o).bottom-e.lineBlockAt(n).top;t.push(as.replace({widget:new ga(s),block:!0,inclusive:!0}).range(n,o))}if(!r)break;n=r.to+1}return as.set(t)},e.prototype.updateDeco=function(){var t=this.view.pluginField(Os.decorations);return this.pluginDecorationLength=t.length,this.decorations=P(P(P([],t),this.view.state.facet(Vs)),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco])},e.prototype.scrollIntoView=function(t){var e,n=t.range,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(i){!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});for(var r=0,o=0,s=0,a=0,l=0,c=this.view.pluginField(Os.scrollMargins);l<c.length;l++){var u=c[l];if(u){var h=u.left,p=u.right,d=u.top,f=u.bottom;null!=h&&(r=Math.max(r,h)),null!=p&&(o=Math.max(o,p)),null!=d&&(s=Math.max(s,d)),null!=f&&(a=Math.max(a,f))}}var g={left:i.left-r,top:i.top-s,right:i.right+o,bottom:i.bottom+a};!function(t,e,n,i,r,o,s,a){for(var l=t.ownerDocument,c=l.defaultView,u=t;u;)if(1==u.nodeType){var h=void 0,p=u==l.body;if(p)h=yo(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}var d=u.getBoundingClientRect();h={left:d.left,right:d.left+u.clientWidth,top:d.top,bottom:d.top+u.clientHeight}}var f=0,g=0;if("nearest"==r)e.top<h.top?(g=-(h.top-e.top+s),n>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+g+s)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+s,n<0&&e.top-g<h.top&&(g=-(h.top+g-e.top+s)));else{var m=e.bottom-e.top,v=h.bottom-h.top;g=("center"==r&&m<=v?e.top+m/2-v/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-v+s)-h.top}if("nearest"==i?e.left<h.left?(f=-(h.left-e.left+o),n>0&&e.right>h.right+f&&(f=e.right-h.right+f+o)):e.right>h.right&&(f=e.right-h.right+o,n<0&&e.left<h.left+f&&(f=-(h.left+f-e.left+o))):f=("center"==i?e.left+(e.right-e.left)/2-(h.right-h.left)/2:"start"==i==a?e.left-o:e.right-(h.right-h.left)+o)-h.left,f||g)if(p)c.scrollBy(f,g);else{if(g){var y=u.scrollTop;u.scrollTop+=g,g=u.scrollTop-y}f&&(y=u.scrollLeft,u.scrollLeft+=f,f=u.scrollLeft-y),e={left:e.left-f,top:e.top-g,right:e.right-f,bottom:e.bottom-g}}if(p)break;u=u.assignedSlot||u.parentNode,i=r="nearest"}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,g,n.head<n.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==_s.LTR)}},e}(Do);var ga=function(t){function e(e){var n=t.call(this)||this;return n.height=e,n}return M(e,t),e.prototype.toDOM=function(){var t=document.createElement("div");return this.updateDOM(t),t},e.prototype.eq=function(t){return t.height==this.height},e.prototype.updateDOM=function(t){return t.style.height=this.height+"px",!0},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return this.height},enumerable:!1,configurable:!0}),e}(os);var ma=function(t){function e(e,n){var i=t.call(this)||this;return i.top=e,i.text=n,i}return M(e,t),e.prototype.eq=function(t){return this.top==t.top&&this.text==t.text},e.prototype.toDOM=function(){return this.top},e.prototype.ignoreEvent=function(){return!1},Object.defineProperty(e.prototype,"customView",{get:function(){return Jo},enumerable:!1,configurable:!0}),e}(os);function va(t,e,n){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0&&n<=0)e=go(t=t.childNodes[e-1]);else{if(!(1==t.nodeType&&e<t.childNodes.length&&n>=0))return null;t=t.childNodes[e],e=0}}}var ya=function(){function t(){this.changes=[]}return t.prototype.compareRange=function(t,e){ps(t,e,this.changes)},t.prototype.comparePoint=function(t,e){ps(t,e,this.changes)},t}();function ba(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function wa(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function ka(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Ca(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function xa(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Sa(t,e,n){for(var i,r,o,s,a,l,c,u,h=t.firstChild;h;h=h.nextSibling)for(var p=uo(h),d=0;d<p.length;d++){var f=p[d];r&&ka(r,f)&&(f=Ca(xa(f,r.bottom),r.top));var g=ba(e,f),m=wa(n,f);if(0==g&&0==m)return 3==h.nodeType?Ea(h,e,n):Sa(h,e,n);(!i||s>m||s==m&&o>g)&&(i=h,r=f,o=g,s=m),0==g?n>f.bottom&&(!c||c.bottom<f.bottom)?(a=h,c=f):n<f.top&&(!u||u.top>f.top)&&(l=h,u=f):c&&ka(c,f)?c=xa(c,f.bottom):u&&ka(u,f)&&(u=Ca(u,f.top))}if(c&&c.bottom>=n?(i=a,r=c):u&&u.top<=n&&(i=l,r=u),!i)return{node:t,offset:0};var v=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?Ea(i,v,n):o||"true"!=i.contentEditable?{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}:Sa(i,v,n)}function Ea(t,e,n){for(var i=t.nodeValue.length,r=-1,o=1e9,s=0,a=0;a<i;a++)for(var l=xo(t,a,a+1).getClientRects(),c=0;c<l.length;c++){var u=l[c];if(u.top!=u.bottom){s||(s=e-u.left);var h=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&h<o){var p=e>=(u.left+u.right)/2,d=p;if(Wo.chrome||Wo.gecko)xo(t,a).getBoundingClientRect().left==u.right&&(d=!p);if(h<=0)return{node:t,offset:a+(d?1:0)};r=a+(d?1:0),o=h}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function Ma(t,e,n,i){var r,o,s=e.x,a=e.y;void 0===i&&(i=-1);for(var l,c=t.contentDOM.getBoundingClientRect(),u=c.top+t.viewState.paddingTop,h=t.viewState.docHeight,p=Math.max(0,Math.min(a-u,h)),d=t.defaultLineHeight/2,f=!1;(l=t.elementAtHeight(p)).type!=ss.Text;)for(;!((p=i>0?l.bottom+d:l.top-d)>=0&&p<=h);){if(f)return n?null:0;f=!0,i=-i}a=u+p;var g=l.from;if(g<t.viewport.from)return 0==t.viewport.from?0:n?null:La(t,c,l,s,a);if(g>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:La(t,c,l,s,a);var m=t.dom.ownerDocument,v=t.root.elementFromPoint?t.root:m,y=v.elementFromPoint(s,a);y&&!t.contentDOM.contains(y)&&(y=null),y||(s=Math.max(c.left+1,Math.min(c.right-1,s)),(y=v.elementFromPoint(s,a))&&!t.contentDOM.contains(y)&&(y=null));var b,w=-1;if(y&&0!=(null===(o=t.docView.nearest(y))||void 0===o?void 0:o.isEditable))if(m.caretPositionFromPoint){var k=m.caretPositionFromPoint(s,a);k&&(b=k.offsetNode,w=k.offset)}else if(m.caretRangeFromPoint){var C=m.caretRangeFromPoint(s,a);C&&(b=C.startContainer,w=C.startOffset,Wo.safari&&function(t,e,n){var i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(var r=t.nextSibling;r;r=r.nextSibling)if(1!=r.nodeType||"BR"!=r.nodeName)return!1;return xo(t,i-1,i).getBoundingClientRect().left>n}(b,w,s)&&(b=void 0))}if(!b||!t.docView.dom.contains(b)){var x=ds.find(t.docView,g);if(!x)return p>l.top+l.height/2?l.to:l.from;b=(r=Sa(x.dom,s,a)).node,w=r.offset}return t.docView.posFromDOM(b,w)}function La(t,e,n,i,r){var o=Math.round((i-e.left)*t.defaultCharacterWidth);t.lineWrapping&&n.height>1.5*t.defaultLineHeight&&(o+=Math.floor((r-n.top)/t.defaultLineHeight)*t.viewState.heightOracle.lineLength);var s=t.state.sliceDoc(n.from,n.to);return n.from+gi(s,o,t.state.tabSize)}function Da(t,e,n,i){for(var r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=e,a=null;;){var l=ua(r,o,t.textDirection,s,n),c=ca;if(!l){if(r.number==(n?t.state.doc.lines:1))return s;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),l=Bi.cursor(n?r.from:r.to)}if(a){if(!a(c))return s}else{if(!i)return l;a=i(c)}s=l}}function Aa(t,e,n){for(var i=t.pluginField(Os.atomicRanges),r=function(){for(var t=!1,r=0,o=i;r<o.length;r++){o[r].between(n.from-1,n.from+1,(function(i,r,o){n.from>i&&n.from<r&&(n=e.from>n.from?Bi.cursor(i,1):Bi.cursor(r,-1),t=!0)}))}if(!t)return{value:n}};;){var o=r();if("object"==typeof o)return o.value}}var Ta=function(){function t(t){var e=this;this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;var n=function(n){var r=Na[n];t.contentDOM.addEventListener(n,(function(i){"keydown"==n&&e.keydown(t,i)||Ia(t,i)&&!e.ignoreDuringComposition(i)&&(e.mustFlushObserver(i)&&t.observer.forceFlush(),e.runCustomHandlers(n,t,i)?i.preventDefault():r(t,i))})),i.registeredEvents.push(n)},i=this;for(var r in Na)n(r);this.notifiedFocused=t.hasFocus,this.ensureHandlers(t),Wo.safari&&t.contentDOM.addEventListener("input",(function(){return null}))}return t.prototype.setSelectionOrigin=function(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()},t.prototype.ensureHandlers=function(t){for(var e=this,n=0,i=this.customHandlers=t.pluginField(Bs);n<i.length;n++){var r=i[n],o=function(n){s.registeredEvents.indexOf(n)<0&&"scroll"!=n&&(s.registeredEvents.push(n),t.contentDOM.addEventListener(n,(function(i){Ia(t,i)&&e.runCustomHandlers(n,t,i)&&i.preventDefault()})))},s=this;for(var a in r.handlers)o(a)}},t.prototype.runCustomHandlers=function(t,e,n){for(var i=0,r=this.customHandlers;i<r.length;i++){var o=r[i],s=o.handlers[t];if(s)try{if(s.call(o.plugin,n,e)||n.defaultPrevented)return!0}catch(t){As(e.state,t)}}return!1},t.prototype.runScrollHandlers=function(t,e){for(var n=0,i=this.customHandlers;n<i.length;n++){var r=i[n],o=r.handlers.scroll;if(o)try{o.call(r.plugin,e,t)}catch(e){As(t.state,e)}}},t.prototype.keydown=function(t,e){var n,i=this;return this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),!!this.screenKeyEvent(t,e)||(!Wo.android||!Wo.chrome||e.synthetic||13!=e.keyCode&&8!=e.keyCode?!(!Wo.ios||!(n=Pa.find((function(t){return t.keyCode==e.keyCode})))||e.ctrlKey||e.altKey||e.metaKey||e.synthetic)&&(this.pendingIOSKey=n,setTimeout((function(){return i.flushIOSKey(t)}),250),!0):(t.observer.delayAndroidKey(e.key,e.keyCode),!0))},t.prototype.flushIOSKey=function(t){var e=this.pendingIOSKey;return!!e&&(this.pendingIOSKey=void 0,So(t.contentDOM,e.key,e.keyCode))},t.prototype.ignoreDuringComposition=function(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(Wo.safari&&Date.now()-this.compositionEndedAt<500)&&(this.compositionEndedAt=0,!0))},t.prototype.screenKeyEvent=function(t,e){var n=9==e.keyCode&&Date.now()<this.lastEscPress+2e3;return 27==e.keyCode?this.lastEscPress=Date.now():Oa.indexOf(e.keyCode)<0&&(this.lastEscPress=0),n},t.prototype.mustFlushObserver=function(t){return"keydown"==t.type&&229!=t.keyCode||"compositionend"==t.type&&!Wo.ios},t.prototype.startMouseSelection=function(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t},t.prototype.update=function(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)},t.prototype.destroy=function(){this.mouseSelection&&this.mouseSelection.destroy()},t}(),Pa=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Oa=[16,17,18,20,91,92,224,225],Fa=function(){function t(t,e,n,i){this.view=t,this.style=n,this.mustSelect=i,this.lastEvent=e;var r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Lr.allowMultipleSelections)&&function(t,e){var n=t.state.facet(bs);return n.length?n[0](e):Wo.mac?e.metaKey:e.ctrlKey}(t,e),this.dragMove=function(t,e){var n=t.state.facet(ws);return n.length?n[0](e):Wo.mac?!e.altKey:!e.ctrlKey}(t,e),this.dragging=!(!function(t,e){if(t.state.selection.main.empty)return!1;var n=ao(t.root);if(0==n.rangeCount)return!0;for(var i=n.getRangeAt(0).getClientRects(),r=0;r<i.length;r++){var o=i[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}(t,e)||1!=$a(e))&&null,!1===this.dragging&&(e.preventDefault(),this.select(e))}return t.prototype.move=function(t){if(0==t.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=t)},t.prototype.up=function(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()},t.prototype.destroy=function(){var t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null},t.prototype.select=function(t){var e=this.style.get(t,this.extend,this.multiple);!this.mustSelect&&e.eq(this.view.state.selection)&&e.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:e,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1},t.prototype.update=function(t){var e=this;t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout((function(){return e.select(e.lastEvent)}),20)},t}();function Ia(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target,i=void 0;n!=t.contentDOM;n=n.parentNode)if(!n||11==n.nodeType||(i=Do.get(n))&&i.ignoreEvent(e))return!1;return!0}var Na=Object.create(null),Ba=Wo.ie&&Wo.ie_version<15||Wo.ios&&Wo.webkit_version<604;function Ra(t,e){var n,i=t.state,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length;if(null!=Ja&&i.selection.ranges.every((function(t){return t.empty}))&&Ja==o.toString()){var a=-1;n=i.changeByRange((function(t){var n=i.doc.lineAt(t.from);if(n.from==a)return{range:t};a=n.from;var l=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:n.from,insert:l},range:Bi.cursor(t.from+l.length)}}))}else n=s?i.changeByRange((function(t){var e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:Bi.cursor(t.from+e.length)}})):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Na.keydown=function(t,e){t.inputState.setSelectionOrigin("select")};var za=0;function Ha(t,e,n,i){if(1==i)return Bi.cursor(e,n);if(2==i)return function(t,e,n){void 0===n&&(n=1);var i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return Bi.cursor(e);0==o?n=1:o==r.length&&(n=-1);var s=o,a=o;n<0?s=si(r.text,o,!1):a=si(r.text,o);for(var l=i(r.text.slice(s,a));s>0;){var c=si(r.text,s,!1);if(i(r.text.slice(c,s))!=l)break;s=c}for(;a<r.length;){var u=si(r.text,a);if(i(r.text.slice(a,u))!=l)break;a=u}return Bi.range(s+r.from,a+r.from)}(t.state,e,n);var r=ds.find(t.docView,e),o=t.state.doc.lineAt(r?r.posAtEnd:e),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<t.state.doc.length&&a==o.to&&a++,Bi.range(s,a)}Na.touchstart=function(t,e){za=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},Na.touchmove=function(t){t.inputState.setSelectionOrigin("select.pointer")},Na.mousedown=function(t,e){if(t.observer.flush(),!(za>Date.now()-2e3&&1==$a(e))){for(var n=null,i=0,r=t.state.facet(ks);i<r.length;i++){if(n=(0,r[i])(t,e))break}if(n||0!=e.button||(n=function(t,e){var n=Ua(t,e),i=$a(e),r=t.state.selection,o=n,s=e;return{update:function(t){t.docChanged&&(n&&(n.pos=t.changes.mapPos(n.pos)),r=r.map(t.changes),s=null)},get:function(e,a,l){var c;if(s&&e.clientX==s.clientX&&e.clientY==s.clientY?c=o:(c=o=Ua(t,e),s=e),!c||!n)return r;var u=Ha(t,c.pos,c.bias,i);if(n.pos!=c.pos&&!a){var h=Ha(t,n.pos,n.bias,i),p=Math.min(h.from,u.from),d=Math.max(h.to,u.to);u=p<u.from?Bi.range(p,d):Bi.range(d,p)}return a?r.replaceRange(r.main.extend(u.from,u.to)):l?r.addRange(u):Bi.create([u])}}}(t,e)),n){var o=t.root.activeElement!=t.contentDOM;o&&t.observer.ignore((function(){return Co(t.contentDOM)})),t.inputState.startMouseSelection(new Fa(t,e,n,o))}}};var Va=function(t,e){return t>=e.top&&t<=e.bottom},qa=function(t,e,n){return Va(e,n)&&t>=n.left&&t<=n.right};function ja(t,e,n,i){var r=ds.find(t.docView,e);if(!r)return 1;var o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;var s=r.coordsAt(o,-1);if(s&&qa(n,i,s))return-1;var a=r.coordsAt(o,1);return a&&qa(n,i,a)?1:s&&Va(i,s)?-1:1}function Ua(t,e){var n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:ja(t,n,e.clientX,e.clientY)}}var _a=Wo.ie&&Wo.ie_version<=11,Wa=null,Ga=0,Ka=0;function $a(t){if(!_a)return t.detail;var e=Wa,n=Ka;return Wa=t,Ka=Date.now(),Ga=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Ga+1)%3:1}function Ya(t,e,n,i){if(n){var r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();var o=t.inputState.mouseSelection,s=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:r,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"})}}Na.dragstart=function(t,e){var n=t.state.selection.main,i=t.inputState.mouseSelection;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")},Na.drop=function(t,e){if(e.dataTransfer){if(t.state.readOnly)return e.preventDefault();var n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();for(var i=Array(n.length),r=0,o=function(){++r==n.length&&Ya(t,e,i.filter((function(t){return null!=t})).join(t.state.lineBreak),!1)},s=function(t){var e=new FileReader;e.onerror=o,e.onload=function(){/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])},a=0;a<n.length;a++)s(a)}else Ya(t,e,e.dataTransfer.getData("Text"),!0)}},Na.paste=function(t,e){if(t.state.readOnly)return e.preventDefault();t.observer.flush();var n=Ba?null:e.clipboardData;n?(Ra(t,n.getData("text/plain")),e.preventDefault()):function(t){var e=t.dom.parentNode;if(e){var n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){t.focus(),n.remove(),Ra(t,n.value)}),50)}}(t)};var Ja=null;function Qa(t,e){if(t.docView.compositionDeco.size){t.inputState.rapidCompositionStart=e;try{t.update([])}finally{t.inputState.rapidCompositionStart=!1}}}Na.copy=Na.cut=function(t,e){var n=function(t){for(var e=[],n=[],i=!1,r=0,o=t.selection.ranges;r<o.length;r++){var s=o[r];s.empty||(e.push(t.sliceDoc(s.from,s.to)),n.push(s))}if(!e.length){for(var a=-1,l=0,c=t.selection.ranges;l<c.length;l++){var u=c[l].from,h=t.doc.lineAt(u);h.number>a&&(e.push(h.text),n.push({from:h.from,to:Math.min(t.doc.length,h.to+1)})),a=h.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}(t.state),i=n.text,r=n.ranges,o=n.linewise;if(i||o){Ja=o?i:null;var s=Ba?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",i)):function(t,e){var n=t.dom.parentNode;if(n){var i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((function(){i.remove(),t.focus()}),50)}}(t,i),"cut"!=e.type||t.state.readOnly||t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}},Na.focus=Na.blur=function(t){setTimeout((function(){t.hasFocus!=t.inputState.notifiedFocused&&t.update([])}),10)},Na.beforeprint=function(t){t.viewState.printing=!0,t.requestMeasure(),setTimeout((function(){t.viewState.printing=!1,t.requestMeasure()}),2e3)},Na.compositionstart=Na.compositionupdate=function(t){null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0,t.docView.compositionDeco.size&&(t.observer.flush(),Qa(t,!0)))},Na.compositionend=function(t){t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionFirstChange=null,setTimeout((function(){t.inputState.composing<0&&Qa(t,!1)}),50)},Na.contextmenu=function(t){t.inputState.lastContextMenu=Date.now()},Na.beforeinput=function(t,e){var n,i;if(Wo.chrome&&Wo.android&&(i=Pa.find((function(t){return t.inputType==e.inputType})))&&(t.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){var r=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((function(){var e;((null===(e=window.visualViewport)||void 0===e?void 0:e.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}};var Xa=["pre-wrap","normal","pre-line","break-spaces"],Za=function(){function t(){this.doc=mi.empty,this.lineWrapping=!1,this.direction=_s.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}return t.prototype.heightForGap=function(t,e){var n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n},t.prototype.heightForLine=function(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight},t.prototype.setDoc=function(t){return this.doc=t,this},t.prototype.mustRefreshForStyle=function(t,e){return Xa.indexOf(t)>-1!=this.lineWrapping||this.direction!=e},t.prototype.mustRefreshForHeights=function(t){for(var e=!1,n=0;n<t.length;n++){var i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e},t.prototype.refresh=function(t,e,n,i,r,o){var s=Xa.indexOf(t)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=s||this.direction!=e;if(this.lineWrapping=s,this.direction=e,this.lineHeight=n,this.charWidth=i,this.lineLength=r,a){this.heightSamples={};for(var l=0;l<o.length;l++){var c=o[l];c<0?l++:this.heightSamples[Math.floor(10*c)]=!0}}return a},t}(),tl=function(){function t(t,e){this.from=t,this.heights=e,this.index=0}return Object.defineProperty(t.prototype,"more",{get:function(){return this.index<this.heights.length},enumerable:!1,configurable:!0}),t}(),el=function(){function t(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this.type=r}return Object.defineProperty(t.prototype,"to",{get:function(){return this.from+this.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!1,configurable:!0}),t.prototype.join=function(e){var n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new t(this.from,this.length+e.length,this.top,this.height+e.height,n)},t.prototype.moveY=function(e){return e?new t(this.from,this.length,this.top+e,this.height,Array.isArray(this.type)?this.type.map((function(t){return t.moveY(e)})):this.type):this},t}(),nl=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(nl||(nl={})),il=.001,rl=function(){function t(t,e,n){void 0===n&&(n=2),this.length=t,this.height=e,this.flags=n}return Object.defineProperty(t.prototype,"outdated",{get:function(){return(2&this.flags)>0},set:function(t){this.flags=(t?2:0)|-3&this.flags},enumerable:!1,configurable:!0}),t.prototype.setHeight=function(t,e){this.height!=e&&(Math.abs(this.height-e)>il&&(t.heightChanged=!0),this.height=e)},t.prototype.replace=function(e,n,i){return t.of(i)},t.prototype.decomposeLeft=function(t,e){e.push(this)},t.prototype.decomposeRight=function(t,e){e.push(this)},t.prototype.applyChanges=function(t,e,n,i){for(var r=this,o=i.length-1;o>=0;o--){var s=i[o],a=s.fromA,l=s.toA,c=s.fromB,u=s.toB,h=r.lineAt(a,nl.ByPosNoHeight,e,0,0),p=h.to>=l?h:r.lineAt(l,nl.ByPosNoHeight,e,0,0);for(u+=p.to-l,l=p.to;o>0&&h.from<=i[o-1].toA;)a=i[o-1].fromA,c=i[o-1].fromB,o--,a<h.from&&(h=r.lineAt(a,nl.ByPosNoHeight,e,0,0));c+=h.from-a,a=h.from;var d=ul.build(n,t,c,u);r=r.replace(a,l,d)}return r.updateHeight(n,0)},t.empty=function(){return new sl(0,0)},t.of=function(e){if(1==e.length)return e[0];for(var n=0,i=e.length,r=0,o=0;;)if(n==i)if(r>2*o){(s=e[n-1]).break?e.splice(--n,1,s.left,null,s.right):e.splice(--n,1,s.left,s.right),i+=1+s.break,r-=s.size}else{if(!(o>2*r))break;var s;(s=e[i]).break?e.splice(i,1,s.left,null,s.right):e.splice(i,1,s.left,s.right),i+=2+s.break,o-=s.size}else if(r<o){(a=e[n++])&&(r+=a.size)}else{var a;(a=e[--i])&&(o+=a.size)}var l=0;return null==e[n-1]?(l=1,n--):null==e[n]&&(l=1,i++),new ll(t.of(e.slice(0,n)),l,t.of(e.slice(i)))},t}();rl.prototype.size=1;var ol=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.type=i,r}return M(e,t),e.prototype.blockAt=function(t,e,n,i){return new el(i,this.length,n,this.height,this.type)},e.prototype.lineAt=function(t,e,n,i,r){return this.blockAt(0,n,i,r)},e.prototype.forEachLine=function(t,e,n,i,r,o){o(this.blockAt(0,n,i,r))},e.prototype.updateHeight=function(t,e,n,i){return void 0===e&&(e=0),void 0===n&&(n=!1),i&&i.from<=e&&i.more&&this.setHeight(t,i.heights[i.index++]),this.outdated=!1,this},e.prototype.toString=function(){return"block("+this.length+")"},e}(rl),sl=function(t){function e(e,n){var i=t.call(this,e,n,ss.Text)||this;return i.collapsed=0,i.widgetHeight=0,i}return M(e,t),e.prototype.replace=function(t,n,i){var r=i[0];return 1==i.length&&(r instanceof e||r instanceof al&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof al?r=new e(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):rl.of(i)},e.prototype.updateHeight=function(t,e,n,i){return void 0===e&&(e=0),void 0===n&&(n=!1),i&&i.from<=e&&i.more?this.setHeight(t,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this},e.prototype.toString=function(){return"line("+this.length+(this.collapsed?-this.collapsed:"")+(this.widgetHeight?":"+this.widgetHeight:"")+")"},e}(ol),al=function(t){function e(e){return t.call(this,e,0)||this}return M(e,t),e.prototype.lines=function(t,e){var n=t.lineAt(e).number,i=t.lineAt(e+this.length).number;return{firstLine:n,lastLine:i,lineHeight:this.height/(i-n+1)}},e.prototype.blockAt=function(t,e,n,i){var r=this.lines(e,i),o=r.firstLine,s=r.lastLine,a=r.lineHeight,l=Math.max(0,Math.min(s-o,Math.floor((t-n)/a))),c=e.line(o+l),u=c.from,h=c.length;return new el(u,h,n+a*l,a,ss.Text)},e.prototype.lineAt=function(t,e,n,i,r){if(e==nl.ByHeight)return this.blockAt(t,n,i,r);if(e==nl.ByPosNoHeight){var o=n.lineAt(t),s=o.from,a=o.to;return new el(s,a-s,0,0,ss.Text)}var l=this.lines(n,r),c=l.firstLine,u=l.lineHeight,h=n.lineAt(t),p=h.from,d=h.length,f=h.number;return new el(p,d,i+u*(f-c),u,ss.Text)},e.prototype.forEachLine=function(t,e,n,i,r,o){for(var s=this.lines(n,r),a=s.firstLine,l=s.lineHeight,c=Math.max(t,r),u=Math.min(r+this.length,e);c<=u;){var h=n.lineAt(c);c==t&&(i+=l*(h.number-a)),o(new el(h.from,h.length,i,l,ss.Text)),i+=l,c=h.to+1}},e.prototype.replace=function(t,n,i){var r=this.length-n;if(r>0){var o=i[i.length-1];o instanceof e?i[i.length-1]=new e(o.length+r):i.push(null,new e(r-1))}if(t>0){var s=i[0];s instanceof e?i[0]=new e(t+s.length):i.unshift(new e(t-1),null)}return rl.of(i)},e.prototype.decomposeLeft=function(t,n){n.push(new e(t-1),null)},e.prototype.decomposeRight=function(t,n){n.push(null,new e(this.length-t-1))},e.prototype.updateHeight=function(t,n,i,r){void 0===n&&(n=0),void 0===i&&(i=!1);var o=n+this.length;if(r&&r.from<=n+this.length&&r.more){var s=[],a=Math.max(n,r.from),l=-1,c=t.heightChanged;for(r.from>n&&s.push(new e(r.from-n-1).updateHeight(t,n));a<=o&&r.more;){var u=t.doc.lineAt(a).length;s.length&&s.push(null);var h=r.heights[r.index++];-1==l?l=h:Math.abs(h-l)>=il&&(l=-2);var p=new sl(u,h);p.outdated=!1,s.push(p),a+=u+1}a<=o&&s.push(null,new e(o-a).updateHeight(t,a));var d=rl.of(s);return t.heightChanged=c||l<0||Math.abs(d.height-this.height)>=il||Math.abs(l-this.lines(t.doc,n).lineHeight)>=il,d}return(i||this.outdated)&&(this.setHeight(t,t.heightForGap(n,n+this.length)),this.outdated=!1),this},e.prototype.toString=function(){return"gap("+this.length+")"},e}(rl),ll=function(t){function e(e,n,i){var r=t.call(this,e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0))||this;return r.left=e,r.right=i,r.size=e.size+i.size,r}return M(e,t),Object.defineProperty(e.prototype,"break",{get:function(){return 1&this.flags},enumerable:!1,configurable:!0}),e.prototype.blockAt=function(t,e,n,i){var r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)},e.prototype.lineAt=function(t,e,n,i,r){var o=i+this.left.height,s=r+this.left.length+this.break,a=e==nl.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;var c=e==nl.ByPosNoHeight?nl.ByPosNoHeight:nl.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,r).join(l)},e.prototype.forEachLine=function(t,e,n,i,r,o){var s=i+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,i,r,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{var l=this.lineAt(a,nl.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}},e.prototype.replace=function(t,e,n){var i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));var r=[];t>0&&this.decomposeLeft(t,r);for(var o=r.length,s=0,a=n;s<a.length;s++){var l=a[s];r.push(l)}if(t>0&&cl(r,o-1),e<this.length){var c=r.length;this.decomposeRight(e,r),cl(r,c)}return rl.of(r)},e.prototype.decomposeLeft=function(t,e){var n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&t>=++n&&e.push(null),t>n&&this.right.decomposeLeft(t-n,e)},e.prototype.decomposeRight=function(t,e){var n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)},e.prototype.balanced=function(t,e){return t.size>2*e.size||e.size>2*t.size?rl.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)},e.prototype.updateHeight=function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=!1);var r=this.left,o=this.right,s=e+r.length+this.break,a=null;return i&&i.from<=e+r.length&&i.more?a=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)},e.prototype.toString=function(){return this.left+(this.break?" ":"-")+this.right},e}(rl);function cl(t,e){var n,i;null==t[e]&&(n=t[e-1])instanceof al&&(i=t[e+1])instanceof al&&t.splice(e-1,3,new al(n.length+1+i.length))}var ul=function(){function t(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}return Object.defineProperty(t.prototype,"isCovered",{get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering},enumerable:!1,configurable:!0}),t.prototype.span=function(t,e){if(this.lineStart>-1){var n=Math.min(e,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof sl?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new sl(n-this.pos,-1)),this.writtenTo=n,e>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e},t.prototype.point=function(t,e,n){if(t<e||n.heightRelevant){var i=n.widget?n.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);var r=e-t;n.block?this.addBlock(new ol(r,i,n.type)):(r||i>=5)&&this.addLineDeco(i,r)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)},t.prototype.enterLine=function(){if(!(this.lineStart>-1)){var t=this.oracle.doc.lineAt(this.pos),e=t.from,n=t.to;this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new sl(this.pos-e,-1)),this.writtenTo=this.pos}},t.prototype.blankContent=function(t,e){var n=new al(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n},t.prototype.ensureLine=function(){this.enterLine();var t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof sl)return t;var e=new sl(0,-1);return this.nodes.push(e),e},t.prototype.addBlock=function(t){this.enterLine(),t.type!=ss.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=ss.WidgetBefore&&(this.covering=t)},t.prototype.addLineDeco=function(t,e){var n=this.ensureLine();n.length+=e,n.collapsed+=e,n.widgetHeight=Math.max(n.widgetHeight,t),this.writtenTo=this.pos=this.pos+e},t.prototype.finish=function(t){var e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof sl||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new sl(0,-1));for(var n=t,i=0,r=this.nodes;i<r.length;i++){var o=r[i];o instanceof sl&&o.updateHeight(this.oracle,n),n+=o?o.length:1}return this.nodes},t.build=function(e,n,i,r){var o=new t(i,e);return Hr.spans(n,i,r,o,0),o.finish(i)},t}();var hl=function(){function t(){this.changes=[]}return t.prototype.compareRange=function(){},t.prototype.comparePoint=function(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&ps(t,e,this.changes,5)},t}();var pl=function(){function t(t,e,n){this.from=t,this.to=e,this.size=n}return t.same=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++){var i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0},t.prototype.draw=function(t){return as.replace({widget:new dl(this.size,t)}).range(this.from,this.to)},t}(),dl=function(t){function e(e,n){var i=t.call(this)||this;return i.size=e,i.vertical=n,i}return M(e,t),e.prototype.eq=function(t){return t.size==this.size&&t.vertical==this.vertical},e.prototype.toDOM=function(){var t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return this.vertical?this.size:-1},enumerable:!1,configurable:!0}),e}(os),fl=function(){function t(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.heightOracle=new Za,this.scaler=bl,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=rl.empty().applyChanges(t.facet(Vs),mi.empty,this.heightOracle.setDoc(t.doc),[new js(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=as.set(this.lineGaps.map((function(t){return t.draw(!1)}))),this.computeVisibleRanges()}return t.prototype.updateForViewport=function(){for(var t=[this.viewport],e=this.state.selection.main,n=function(n){var r=n?e.head:e.anchor;if(!t.some((function(t){var e=t.from,n=t.to;return r>=e&&r<=n}))){var o=i.lineBlockAt(r),s=o.from,a=o.to;t.push(new gl(s,a))}},i=this,r=0;r<=1;r++)n(r);this.viewports=t.sort((function(t,e){return t.from-e.from})),this.scaler=this.heightMap.height<=7e6?bl:new wl(this.heightOracle.doc,this.heightMap,this.viewports)},t.prototype.updateViewportLines=function(){var t=this;this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(function(e){t.viewportLines.push(1==t.scaler.scale?e:kl(e,t.scaler))}))},t.prototype.update=function(t,e){void 0===e&&(e=null);var n=this.state;this.state=t.state;var i,r,o,s,a=this.state.facet(Vs),l=t.changedRanges,c=js.extendWithRanges(l,(i=t.startState.facet(Vs),r=a,o=t?t.changes:Di.empty(this.state.doc.length),s=new hl,Hr.compare(i,r,o,s,0),s.changes)),u=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(a,n.doc,this.heightOracle.setDoc(this.state.doc),c),this.heightMap.height!=u&&(t.flags|=2);var h=c.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<h.from||e.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,e));var p=!t.changes.empty||2&t.flags||h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,this.updateForViewport(),p&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)},t.prototype.measure=function(t){var e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace,o="rtl"==n.direction?_s.RTL:_s.LTR,s=this.heightOracle.mustRefreshForStyle(r,o),a=s||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight,l=0,c=0;if(a){this.mustMeasureContent=!1,this.contentDOMHeight=e.clientHeight;var u=parseInt(n.paddingTop)||0,h=parseInt(n.paddingBottom)||0;this.paddingTop==u&&this.paddingBottom==h||(l|=8,this.paddingTop=u,this.paddingBottom=h)}var p=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:function(t,e){for(var n=t.getBoundingClientRect(),i=Math.max(0,n.left),r=Math.min(innerWidth,n.right),o=Math.max(0,n.top),s=Math.min(innerHeight,n.bottom),a=t.ownerDocument.body,l=t.parentNode;l&&l!=a;)if(1==l.nodeType){var c=l,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&"visible"!=u.overflow){var h=c.getBoundingClientRect();i=Math.max(i,h.left),r=Math.min(r,h.right),o=Math.max(o,h.top),s=Math.min(s,h.bottom)}l="absolute"==u.position||"fixed"==u.position?c.offsetParent:c.parentNode}else{if(11!=l.nodeType)break;l=l.host}return{left:i-n.left,right:Math.max(i,r)-n.left,top:o-(n.top+e),bottom:Math.max(o,s)-(n.top+e)}}(e,this.paddingTop),d=p.top-this.pixelViewport.top,f=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;var g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(a=!0)),!this.inView)return 0;if(a){var m=t.docView.measureVisibleLineHeights();i.mustRefreshForHeights(m)&&(s=!0);var v=e.clientWidth;if(s||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){var y=t.docView.measureTextSize(),b=y.lineHeight,w=y.charWidth;(s=i.refresh(r,o,b,w,v/w,m))&&(t.docView.minWidth=0,l|=8)}this.contentDOMWidth!=v&&(this.contentDOMWidth=v,l|=8),this.editorHeight!=t.scrollDOM.clientHeight&&(this.editorHeight=t.scrollDOM.clientHeight,l|=8),d>0&&f>0?c=Math.max(d,f):d<0&&f<0&&(c=Math.min(d,f)),i.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(i,0,s,new tl(this.viewport.from,m)),i.heightChanged&&(l|=2)}var k=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return k&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||k)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l},Object.defineProperty(t.prototype,"visibleTop",{get:function(){return this.scaler.fromDOM(this.pixelViewport.top)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleBottom",{get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)},enumerable:!1,configurable:!0}),t.prototype.getViewport=function(t,e){var n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.state.doc,o=this.visibleTop,s=this.visibleBottom,a=new gl(i.lineAt(o-1e3*n,nl.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),nl.ByHeight,r,0,0).to);if(e){var l=e.range.head,c=this.editorHeight;if(l<a.from||l>a.to){var u=i.lineAt(l,nl.ByPos,r,0,0),h=void 0;h="center"==e.y?(u.top+u.bottom)/2-c/2:"start"==e.y||"nearest"==e.y&&l<a.from?u.top:u.bottom-c,a=new gl(i.lineAt(h-500,nl.ByHeight,r,0,0).from,i.lineAt(h+c+500,nl.ByHeight,r,0,0).to)}}return a},t.prototype.mapViewport=function(t,e){var n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new gl(this.heightMap.lineAt(n,nl.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,nl.ByPos,this.state.doc,0,0).to)},t.prototype.viewportIsAppropriate=function(t,e){var n=t.from,i=t.to;if(void 0===e&&(e=0),!this.inView)return!0;var r=this.heightMap.lineAt(n,nl.ByPos,this.state.doc,0,0).top,o=this.heightMap.lineAt(i,nl.ByPos,this.state.doc,0,0).bottom,s=this.visibleTop,a=this.visibleBottom;return(0==n||r<=s-Math.max(10,Math.min(-e,250)))&&(i==this.state.doc.length||o>=a+Math.max(10,Math.min(e,250)))&&r>s-2e3&&o<a+2e3},t.prototype.mapLineGaps=function(t,e){if(!t.length||e.empty)return t;for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i];e.touchesRange(o.from,o.to)||n.push(new pl(e.mapPos(o.from),e.mapPos(o.to),o.size))}return n},t.prototype.ensureLineGaps=function(t){var e=[];if(this.heightOracle.direction!=_s.LTR)return e;for(var n=function(n){if(n.length<4e3)return"continue";var r=function(t,e,n){var i=[],r=t,o=0;Hr.spans(n.facet(Vs),t,e,{span:function(){},point:function(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r);return{total:o,ranges:i}}(n.from,n.to,i.state);if(r.total<4e3)return"continue";var o=void 0,s=void 0;if(i.heightOracle.lineWrapping){var a=2e3/i.heightOracle.lineLength*i.heightOracle.lineHeight;o=ml(r,(i.visibleTop-n.top-a)/n.height),s=ml(r,(i.visibleBottom-n.top+a)/n.height)}else{var l=r.total*i.heightOracle.charWidth,c=2e3*i.heightOracle.charWidth;o=ml(r,(i.pixelViewport.left-c)/l),s=ml(r,(i.pixelViewport.right+c)/l)}var u=[];o>n.from&&u.push({from:n.from,to:o}),s<n.to&&u.push({from:s,to:n.to});var h=i.state.selection.main;h.from>=n.from&&h.from<=n.to&&yl(u,h.from-10,h.from+10),!h.empty&&h.to>=n.from&&h.to<=n.to&&yl(u,h.to-10,h.to+10);for(var p=function(o,s){s-o>1e3&&e.push(function(t,e){for(var n=0,i=t;n<i.length;n++){var r=i[n];if(e(r))return r}return}(t,(function(t){return t.from>=n.from&&t.to<=n.to&&Math.abs(t.from-o)<1e3&&Math.abs(t.to-s)<1e3}))||new pl(o,s,i.gapSize(n,o,s,r)))},d=0,f=u;d<f.length;d++){var g=f[d];p(g.from,g.to)}},i=this,r=0,o=this.viewportLines;r<o.length;r++){n(o[r])}return e},t.prototype.gapSize=function(t,e,n,i){var r=vl(i,n)-vl(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r},t.prototype.updateLineGaps=function(t){var e=this;pl.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=as.set(t.map((function(t){return t.draw(e.heightOracle.lineWrapping)}))))},t.prototype.computeVisibleRanges=function(){var t=this.state.facet(Vs);this.lineGaps.length&&(t=t.concat(this.lineGapDeco));var e=[];Hr.spans(t,this.viewport.from,this.viewport.to,{span:function(t,n){e.push({from:t,to:n})},point:function(){}},20);var n=e.length!=this.visibleRanges.length||this.visibleRanges.some((function(t,n){return t.from!=e[n].from||t.to!=e[n].to}));return this.visibleRanges=e,n?4:0},t.prototype.lineBlockAt=function(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((function(e){return e.from<=t&&e.to>=t}))||kl(this.heightMap.lineAt(t,nl.ByPos,this.state.doc,0,0),this.scaler)},t.prototype.lineBlockAtHeight=function(t){return kl(this.heightMap.lineAt(this.scaler.fromDOM(t),nl.ByHeight,this.state.doc,0,0),this.scaler)},t.prototype.elementAtHeight=function(t){return kl(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)},Object.defineProperty(t.prototype,"docHeight",{get:function(){return this.scaler.toDOM(this.heightMap.height)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentHeight",{get:function(){return this.docHeight+this.paddingTop+this.paddingBottom},enumerable:!1,configurable:!0}),t}(),gl=function(t,e){this.from=t,this.to=e};function ml(t,e){var n=t.total,i=t.ranges;if(e<=0)return i[0].from;if(e>=1)return i[i.length-1].to;for(var r=Math.floor(n*e),o=0;;o++){var s=i[o],a=s.from,l=s.to-a;if(r<=l)return a+r;r-=l}}function vl(t,e){for(var n=0,i=0,r=t.ranges;i<r.length;i++){var o=r[i],s=o.from,a=o.to;if(e<=a){n+=e-s;break}n+=a-s}return n/t.total}function yl(t,e,n){for(var i=0;i<t.length;i++){var r=t[i];if(r.from<n&&r.to>e){var o=[];r.from<e&&o.push({from:r.from,to:e}),r.to>n&&o.push({from:n,to:r.to}),t.splice.apply(t,P([i,1],o)),i+=o.length-1}}}var bl={toDOM:function(t){return t},fromDOM:function(t){return t},scale:1},wl=function(){function t(t,e,n){var i=0,r=0,o=0;this.viewports=n.map((function(n){var r=n.from,o=n.to,s=e.lineAt(r,nl.ByPos,t,0,0).top,a=e.lineAt(o,nl.ByPos,t,0,0).bottom;return i+=a-s,{from:r,to:o,top:s,bottom:a,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(var s=0,a=this.viewports;s<a.length;s++){var l=a[s];l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}}return t.prototype.toDOM=function(t){for(var e=0,n=0,i=0;;e++){var r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}},t.prototype.fromDOM=function(t){for(var e=0,n=0,i=0;;e++){var r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}},t}();function kl(t,e){if(1==e.scale)return t;var n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new el(t.from,t.length,n,i-n,Array.isArray(t.type)?t.type.map((function(t){return kl(t,e)})):t.type)}var Cl=Vi.define({combine:function(t){return t.join(" ")}}),xl=Vi.define({combine:function(t){return t.indexOf(!0)>-1}}),Sl=Or.newName(),El=Or.newName(),Ml=Or.newName(),Ll={"&light":"."+El,"&dark":"."+Ml};function Dl(t,e,n){return new Or(e,{finish:function(e){return/&/.test(e)?e.replace(/&\w*/,(function(e){if("&"==e)return t;if(!n||!n[e])throw new RangeError("Unsupported selector: "+e);return n[e]})):t+" "+e}})}var Al=Dl("."+Sl,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ll),Tl={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Pl=Wo.ie&&Wo.ie_version<=11,Ol=function(){function t(t,e,n){var i=this;this.view=t,this.onChange=e,this.onScrollChanged=n,this.active=!1,this.selectionRange=new wo,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((function(e){for(var n=0,r=e;n<r.length;n++){var o=r[n];i.queue.push(o)}(Wo.ie&&Wo.ie_version<=11||Wo.ios&&t.composing)&&e.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?i.flushSoon():i.flush()})),Pl&&(this.onCharData=function(t){i.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),i.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((function(){i.view.docView.lastUpdate<Date.now()-75&&i.resizeTimeout<0&&(i.resizeTimeout=setTimeout((function(){i.resizeTimeout=-1,i.view.requestMeasure()}),50))})),this.resize.observe(t.scrollDOM)),this.start(),this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((function(t){i.parentCheck<0&&(i.parentCheck=setTimeout(i.listenForScroll.bind(i),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=i.intersecting&&(i.intersecting=!i.intersecting,i.intersecting!=i.view.inView&&i.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((function(t){t.length>0&&t[t.length-1].intersectionRatio>0&&i.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}return t.prototype.onScroll=function(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)},t.prototype.updateGaps=function(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((function(e,n){return e!=t[n]})))){this.gapIntersection.disconnect();for(var e=0,n=t;e<n.length;e++){var i=n[e];this.gapIntersection.observe(i)}this.gaps=t}},t.prototype.onSelectionChange=function(t){if(this.readSelectionRange()&&!this.delayedAndroidKey){var e=this.view,n=this.selectionRange;if(e.state.facet(Ts)?e.root.activeElement==this.dom:co(e.dom,n)){var i=n.anchorNode&&e.docView.nearest(n.anchorNode);i&&i.ignoreEvent(t)||((Wo.ie&&Wo.ie_version<=11||Wo.android&&Wo.chrome)&&!e.state.selection.main.empty&&n.focusNode&&ho(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1))}}},t.prototype.readSelectionRange=function(){var t=this.view.root,e=ao(t),n=Wo.safari&&11==t.nodeType&&function(){for(var t=document.activeElement;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}()==this.view.contentDOM&&function(t){var e,n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",i,!0),document.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),!n)return null;var r=n.startContainer,o=n.startOffset,s=n.endContainer,a=n.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);ho(l.node,l.offset,s,a)&&(r=(e=[s,a,r,o])[0],o=e[1],s=e[2],a=e[3]);return{anchorNode:r,anchorOffset:o,focusNode:s,focusOffset:a}}(this.view)||e;return!this.selectionRange.eq(n)&&(this.selectionRange.setRange(n),this.selectionChanged=!0)},t.prototype.setSelectionRange=function(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1},t.prototype.listenForScroll=function(){this.parentCheck=-1;for(var t=0,e=null,n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(var i=0,r=this.scrollTargets;i<r.length;i++){(n=r[i]).removeEventListener("scroll",this.onScroll)}for(var o=0,s=this.scrollTargets=e;o<s.length;o++){(n=s[o]).addEventListener("scroll",this.onScroll)}}},t.prototype.ignore=function(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}},t.prototype.start=function(){this.active||(this.observer.observe(this.dom,Tl),Pl&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)},t.prototype.stop=function(){this.active&&(this.active=!1,this.observer.disconnect(),Pl&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))},t.prototype.clear=function(){this.observer.takeRecords(),this.queue.length=0,this.selectionChanged=!1},t.prototype.delayAndroidKey=function(t,e){var n=this;this.delayedAndroidKey||requestAnimationFrame((function(){var t=n.delayedAndroidKey;n.delayedAndroidKey=null;var e=n.view.state;So(n.view.contentDOM,t.key,t.keyCode)?n.processRecords():n.flush(),n.view.state==e&&n.view.update([])})),this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e})},t.prototype.flushSoon=function(){var t=this;this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((function(){t.delayedFlush=-1,t.flush()}),20))},t.prototype.forceFlush=function(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())},t.prototype.processRecords=function(){for(var t=this.queue,e=0,n=this.observer.takeRecords();e<n.length;e++){var i=n[e];t.push(i)}t.length&&(this.queue=[]);for(var r=-1,o=-1,s=!1,a=0,l=t;a<l.length;a++){var c=l[a],u=this.readMutation(c);u&&(u.typeOver&&(s=!0),-1==r?(r=u.from,o=u.to):(r=Math.min(u.from,r),o=Math.max(u.to,o)))}return{from:r,to:o,typeOver:s}},t.prototype.flush=function(t){if(void 0===t&&(t=!0),!(this.delayedFlush>=0||this.delayedAndroidKey)){t&&this.readSelectionRange();var e=this.processRecords(),n=e.from,i=e.to,r=e.typeOver,o=this.selectionChanged&&co(this.dom,this.selectionRange);if(!(n<0)||o){this.selectionChanged=!1;var s=this.view.state;this.onChange(n,i,r),this.view.state==s&&this.view.update([])}}},t.prototype.readMutation=function(t){var e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.dirty|=4),"childList"==t.type){var n=Fl(e,t.previousSibling||t.target.previousSibling,-1),i=Fl(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null},t.prototype.destroy=function(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();for(var i=0,r=this.scrollTargets;i<r.length;i++){r[i].removeEventListener("scroll",this.onScroll)}window.removeEventListener("scroll",this.onScroll),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)},t}();function Fl(t,e,n){for(;e;){var i=Do.get(e);if(i&&i.parent==t)return i;var r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function Il(t,e,n,i){var r,o,s=t.state.selection.main;if(e>-1){var a=t.docView.domBoundsAround(e,n,0);if(!a||t.state.readOnly)return;var l=a.from,c=a.to,u=t.docView.impreciseHead||t.docView.impreciseAnchor?[]:function(t){var e=[];if(t.root.activeElement!=t.contentDOM)return e;var n=t.observer.selectionRange,i=n.anchorNode,r=n.anchorOffset,o=n.focusNode,s=n.focusOffset;i&&(e.push(new da(i,r)),o==i&&s==r||e.push(new da(o,s)));return e}(t),h=new ha(u,t);h.readRange(a.startDOM,a.endDOM),o=function(t,e){if(0==t.length)return null;var n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?Bi.single(n+e,i+e):null}(u,l);var p=s.from,d=null;(8===t.inputState.lastKeyCode&&t.inputState.lastKeyTime>Date.now()-100||Wo.android&&h.text.length<c-l)&&(p=s.to,d="end");var f=function(t,e,n,i){var r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;var s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if("end"==i){n-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&t.length<e.length){a=(o-=n<=o&&n>=s?o-n:0)+(a-s),s=o}else if(a<o){s=(o-=n<=o&&n>=a?o-n:0)+(s-a),a=o}return{from:o,toA:s,toB:a}}(t.state.sliceDoc(l,c),h.text,p-l,d);f&&(r={from:l+f.from,to:l+f.toA,insert:t.state.toText(h.text.slice(f.from,f.toB))})}else if(t.hasFocus||!t.state.facet(Ts)){var g=t.observer.selectionRange,m=t.docView,v=m.impreciseHead,y=m.impreciseAnchor,b=v&&v.node==g.focusNode&&v.offset==g.focusOffset||!lo(t.contentDOM,g.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(g.focusNode,g.focusOffset),w=y&&y.node==g.anchorNode&&y.offset==g.anchorOffset||!lo(t.contentDOM,g.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(g.anchorNode,g.anchorOffset);b==s.head&&w==s.anchor||(o=Bi.single(w,b))}if(r||o)if(!r&&i&&!s.empty&&o&&o.main.empty?r={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:r&&r.from>=s.from&&r.to<=s.to&&(r.from!=s.from||r.to!=s.to)&&s.to-s.from-(r.to-r.from)<=4&&(r={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,r.from).append(r.insert).append(t.state.doc.slice(r.to,s.to))}),r){var k=t.state;if(Wo.ios&&t.inputState.flushIOSKey(t))return;if(Wo.android&&(r.from==s.from&&r.to==s.to&&1==r.insert.length&&2==r.insert.lines&&So(t.contentDOM,"Enter",13)||r.from==s.from-1&&r.to==s.to&&0==r.insert.length&&So(t.contentDOM,"Backspace",8)||r.from==s.from&&r.to==s.to+1&&0==r.insert.length&&So(t.contentDOM,"Delete",46)))return;var C=r.insert.toString();if(t.state.facet(Ss).some((function(e){return e(t,r.from,r.to,C)})))return;t.inputState.composing>=0&&t.inputState.composing++;var x=void 0;if(r.from>=s.from&&r.to<=s.to&&r.to-r.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==r.from+r.insert.length)){var S=s.from<r.from?k.sliceDoc(s.from,r.from):"",E=s.to>r.to?k.sliceDoc(r.to,s.to):"";x=k.replaceSelection(t.state.toText(S+r.insert.sliceString(0,void 0,t.state.lineBreak)+E))}else{var M=k.changes(r);x={changes:M,selection:o&&!k.selection.main.eq(o.main)&&o.main.to<=M.newLength?k.selection.replaceRange(o.main):void 0}}var L="input.type";t.composing&&(L+=".compose",t.inputState.compositionFirstChange&&(L+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(x,{scrollIntoView:!0,userEvent:L})}else if(o&&!o.main.eq(s)){var D=!1;L="select";t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(D=!0),L=t.inputState.lastSelectionOrigin),t.dispatch({selection:o,scrollIntoView:D,userEvent:L})}}var Nl=function(){function t(t){var e=this;void 0===t&&(t={}),this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||function(t){return e.update([t])},this.dispatch=this.dispatch.bind(this),this.root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new fl(t.state||Lr.create()),this.plugins=this.state.facet(Is).map((function(t){return new Rs(t)}));for(var n=0,i=this.plugins;n<i.length;n++){i[n].update(this)}this.observer=new Ol(this,(function(t,n,i){Il(e,t,n,i)}),(function(t){e.inputState.runScrollHandlers(e,t),e.observer.intersecting&&e.measure()})),this.inputState=new Ta(this),this.docView=new fa(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,window.addEventListener("resize",(function(){-1==zl&&(zl=setTimeout(Hl,50))})),this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}return Object.defineProperty(t.prototype,"state",{get:function(){return this.viewState.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewport",{get:function(){return this.viewState.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleRanges",{get:function(){return this.viewState.visibleRanges},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inView",{get:function(){return this.viewState.inView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"composing",{get:function(){return this.inputState.composing>0},enumerable:!1,configurable:!0}),t.prototype.dispatch=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._dispatch(1==e.length&&e[0]instanceof mr?e[0]:(t=this.state).update.apply(t,e))},t.prototype.update=function(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");for(var e,n=!1,i=this.state,r=0,o=t;r<o.length;r++){if((c=o[r]).startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=c.state}if(this.destroyed)this.viewState.state=i;else{if(i.facet(Lr.phrases)!=this.state.facet(Lr.phrases))return this.setState(i);e=new Us(this,i,t);var s=null;try{this.updateState=2;for(var a=0,l=t;a<l.length;a++){var c=l[a];if(s&&(s=s.map(c.changes)),c.scrollIntoView){var u=c.state.selection.main;s=new Ls(u.empty?u:Bi.cursor(u.head,u.head>u.anchor?-1:1))}for(var h=0,p=c.effects;h<p.length;h++){var d=p[h];d.is(Es)?s=new Ls(d.value):d.is(Ms)?s=new Ls(d.value,"center"):d.is(Ds)&&(s=d.value)}}this.viewState.update(e,s),this.bidiCache=ql.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(qs)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((function(t){return t.isUserEvent("select.pointer")})))}finally{this.updateState=0}if((n||s||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure(),!e.empty)for(var f=0,g=this.state.facet(xs);f<g.length;f++){(0,g[f])(e)}}},t.prototype.setState=function(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)this.viewState.state=t;else{this.updateState=2;try{for(var e=0,n=this.plugins;e<n.length;e++){n[e].destroy(this)}this.viewState=new fl(t),this.plugins=t.facet(Is).map((function(t){return new Rs(t)})),this.pluginMap.clear();for(var i=0,r=this.plugins;i<r.length;i++){r[i].update(this)}this.docView=new fa(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}this.requestMeasure()}},t.prototype.updatePlugins=function(t){var e=t.startState.facet(Is),n=t.state.facet(Is);if(e!=n){for(var i=[],r=0,o=n;r<o.length;r++){var s=o[r],a=e.indexOf(s);if(a<0)i.push(new Rs(s));else{var l=this.plugins[a];l.mustUpdate=t,i.push(l)}}for(var c=0,u=this.plugins;c<u.length;c++){var h=u[c];h.mustUpdate!=t&&h.destroy(this)}this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this)}else for(var p=0,d=this.plugins;p<d.length;p++){d[p].mustUpdate=t}for(var f=0;f<this.plugins.length;f++)this.plugins[f].update(this)},t.prototype.measure=function(t){var e,n=this;if(void 0===t&&(t=!0),!this.destroyed){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.flush();var i=null;try{for(var r=0;;r++){this.updateState=1;var o=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(r>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var a=[];4&s||(e=[a,this.measureRequests],this.measureRequests=e[0],a=e[1]);var l=a.map((function(t){try{return t.read(n)}catch(t){return As(n.state,t),Vl}})),c=new Us(this,this.state),u=!1;c.flags|=s,i?i.flags|=s:i=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),u=this.docView.update(c));for(var h=0;h<a.length;h++)if(l[h]!=Vl)try{var p=a[h];p.write&&p.write(l[h],this)}catch(t){As(this.state,t)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null),u&&this.docView.updateSelection(!0),this.viewport.from==o.from&&this.viewport.to==o.to&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(var d=0,f=this.state.facet(xs);d<f.length;d++){(0,f[d])(i)}}},Object.defineProperty(t.prototype,"themeClasses",{get:function(){return Sl+" "+(this.state.facet(xl)?Ml:El)+" "+this.state.facet(Cl)},enumerable:!1,configurable:!0}),t.prototype.updateAttrs=function(){var t=this,e=jl(this,zs,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ts)?"true":"false",class:"cm-content",style:Wo.tabSize+": "+this.state.tabSize,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),jl(this,Hs,n),this.observer.ignore((function(){rs(t.contentDOM,t.contentAttrs,n),rs(t.dom,t.editorAttrs,e)})),this.editorAttrs=e,this.contentAttrs=n},t.prototype.showAnnouncements=function(e){for(var n=!0,i=0,r=e;i<r.length;i++)for(var o=0,s=r[i].effects;o<s.length;o++){var a=s[o];if(a.is(t.announce))n&&(this.announceDOM.textContent=""),n=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=a.value}},t.prototype.mountStyles=function(){this.styleModules=this.state.facet(qs),Or.mount(this.root,this.styleModules.concat(Al).reverse())},t.prototype.readMeasured=function(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)},t.prototype.requestMeasure=function(t){var e=this;if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((function(){return e.measure()}))),t){if(null!=t.key)for(var n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===t.key)return void(this.measureRequests[n]=t);this.measureRequests.push(t)}},t.prototype.pluginField=function(t){for(var e=[],n=0,i=this.plugins;n<i.length;n++){i[n].update(this).takeField(t,e)}return e},t.prototype.plugin=function(t){var e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((function(e){return e.spec==t}))||null),e&&e.update(this).value},Object.defineProperty(t.prototype,"documentTop",{get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"documentPadding",{get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}},enumerable:!1,configurable:!0}),t.prototype.blockAtHeight=function(t,e){var n=Rl(e,this);return this.elementAtHeight(t-n).moveY(n)},t.prototype.elementAtHeight=function(t){return this.readMeasured(),this.viewState.elementAtHeight(t)},t.prototype.visualLineAtHeight=function(t,e){var n=Rl(e,this);return this.lineBlockAtHeight(t-n).moveY(n)},t.prototype.lineBlockAtHeight=function(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)},t.prototype.viewportLines=function(t,e){for(var n=Rl(e,this),i=0,r=this.viewportLineBlocks;i<r.length;i++){t(r[i].moveY(n))}},Object.defineProperty(t.prototype,"viewportLineBlocks",{get:function(){return this.viewState.viewportLines},enumerable:!1,configurable:!0}),t.prototype.visualLineAt=function(t,e){return void 0===e&&(e=0),this.lineBlockAt(t).moveY(e+this.viewState.paddingTop)},t.prototype.lineBlockAt=function(t){return this.viewState.lineBlockAt(t)},Object.defineProperty(t.prototype,"contentHeight",{get:function(){return this.viewState.contentHeight},enumerable:!1,configurable:!0}),t.prototype.moveByChar=function(t,e,n){return Aa(this,t,Da(this,t,e,n))},t.prototype.moveByGroup=function(t,e){var n=this;return Aa(this,t,Da(this,t,e,(function(e){return function(t,e,n){var i=t.state.charCategorizer(e),r=i(n);return function(t){var e=i(t);return r==Sr.Space&&(r=e),r==e}}(n,t.head,e)})))},t.prototype.moveToLineBoundary=function(t,e,n){return void 0===n&&(n=!0),function(t,e,n,i){var r=t.state.doc.lineAt(e.head),o=i&&t.lineWrapping?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){var s=t.dom.getBoundingClientRect(),a=t.posAtCoords({x:n==(t.textDirection==_s.LTR)?s.right-1:s.left+1,y:(o.top+o.bottom)/2});if(null!=a)return Bi.cursor(a,n?-1:1)}var l=ds.find(t.docView,e.head),c=l?n?l.posAtEnd:l.posAtStart:n?r.to:r.from;return Bi.cursor(c,n?-1:1)}(this,t,e,n)},t.prototype.moveVertically=function(t,e,n){return Aa(this,t,function(t,e,n,i){var r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return Bi.cursor(r);var s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r),u=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{var h=t.viewState.lineBlockAt(r-u);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-h.from))),s=(o<0?h.top:h.bottom)+u}for(var p=l.left+a,d=null!=i?i:t.defaultLineHeight>>1,f=0;;f+=10){var g=s+(d+f)*o,m=Ma(t,{x:p,y:g},!1,o);if(g<l.top||g>l.bottom||(o<0?m<r:m>r))return Bi.cursor(m,void 0,void 0,a)}}(this,t,e,n))},t.prototype.scrollPosIntoView=function(t){this.dispatch({effects:Es.of(Bi.cursor(t))})},t.prototype.domAtPos=function(t){return this.docView.domAtPos(t)},t.prototype.posAtDOM=function(t,e){return void 0===e&&(e=0),this.docView.posFromDOM(t,e)},t.prototype.posAtCoords=function(t,e){return void 0===e&&(e=!0),this.readMeasured(),Ma(this,t,e)},t.prototype.coordsAtPos=function(t,e){void 0===e&&(e=1),this.readMeasured();var n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;var i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return vo(n,r[oa.find(r,t-i.from,-1,e)].dir==_s.LTR==e>0)},Object.defineProperty(t.prototype,"defaultCharacterWidth",{get:function(){return this.viewState.heightOracle.charWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultLineHeight",{get:function(){return this.viewState.heightOracle.lineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textDirection",{get:function(){return this.viewState.heightOracle.direction},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWrapping",{get:function(){return this.viewState.heightOracle.lineWrapping},enumerable:!1,configurable:!0}),t.prototype.bidiSpans=function(t){if(t.length>Bl)return la(t.length);for(var e=this.textDirection,n=0,i=this.bidiCache;n<i.length;n++){var r=i[n];if(r.from==t.from&&r.dir==e)return r.order}var o=aa(t.text,this.textDirection);return this.bidiCache.push(new ql(t.from,t.to,e,o)),o},Object.defineProperty(t.prototype,"hasFocus",{get:function(){var t;return(document.hasFocus()||Wo.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM},enumerable:!1,configurable:!0}),t.prototype.focus=function(){var t=this;this.observer.ignore((function(){Co(t.contentDOM),t.docView.updateSelection()}))},t.prototype.destroy=function(){for(var t=0,e=this.plugins;t<e.length;t++){e[t].destroy(this)}this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0},t.scrollIntoView=function(t,e){return void 0===e&&(e={}),Ds.of(new Ls("number"==typeof t?Bi.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))},t.domEventHandlers=function(t){return Ns.define((function(){return{}}),{eventHandlers:t})},t.theme=function(t,e){var n=Or.newName(),i=[Cl.of(n),qs.of(Dl("."+n,t))];return e&&e.dark&&i.push(xl.of(!0)),i},t.baseTheme=function(t){return Qi.lowest(qs.of(Dl("."+Sl,t,Ll)))},t}();Nl.scrollTo=Es,Nl.centerOn=Ms,Nl.styleModule=qs,Nl.inputHandler=Ss,Nl.exceptionSink=Cs,Nl.updateListener=xs,Nl.editable=Ts,Nl.mouseSelectionStyle=ks,Nl.dragMovesSelection=ws,Nl.clickAddsSelectionRange=bs,Nl.decorations=Vs,Nl.contentAttributes=Hs,Nl.editorAttributes=zs,Nl.lineWrapping=Nl.contentAttributes.of({class:"cm-lineWrapping"}),Nl.announce=gr.define();var Bl=4096;function Rl(t,e){return(null==t?e.contentDOM.getBoundingClientRect().top:t)+e.viewState.paddingTop}var zl=-1;function Hl(){zl=-1;for(var t=document.querySelectorAll(".cm-content"),e=0;e<t.length;e++){var n=Do.get(t[e]);n&&n.editorView.requestMeasure()}}var Vl={},ql=function(){function t(t,e,n,i){this.from=t,this.to=e,this.dir=n,this.order=i}return t.update=function(e,n){if(n.empty)return e;for(var i=[],r=e.length?e[e.length-1].dir:_s.LTR,o=Math.max(0,e.length-10);o<e.length;o++){var s=e[o];s.dir!=r||n.touchesRange(s.from,s.to)||i.push(new t(n.mapPos(s.from,1),n.mapPos(s.to,-1),s.dir,s.order))}return i},t}();function jl(t,e,n){for(var i=t.state.facet(e),r=i.length-1;r>=0;r--){var o=i[r],s="function"==typeof o?o(t):o;s&&ns(s,n)}return n}var Ul=Wo.mac?"mac":Wo.windows?"win":Wo.linux?"linux":"key";function _l(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}var Wl=Nl.domEventHandlers({keydown:function(t,e){return Ql($l(e.state),t,e,"editor")}}),Gl=Vi.define({enables:Wl}),Kl=new WeakMap;function $l(t){var e=t.facet(Gl),n=Kl.get(e);return n||Kl.set(e,n=function(t,e){void 0===e&&(e=Ul);for(var n=Object.create(null),i=Object.create(null),r=function(t,e){var n=i[t];if(null==n)i[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},o=function(t,i,o,s){for(var a=n[t]||(n[t]=Object.create(null)),l=i.split(/ (?!$)/).map((function(t){return function(t,e){var n,i,r,o,s=t.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(var l=0;l<s.length-1;++l){var c=s[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);"mac"==e?o=!0:i=!0}}return n&&(a="Alt-"+a),i&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}(t,e)})),c=function(e){var n=l.slice(0,e).join(" ");r(n,!0),a[n]||(a[n]={preventDefault:!0,commands:[function(e){var i=Jl={view:e,prefix:n,scope:t};return setTimeout((function(){Jl==i&&(Jl=null)}),4e3),!0}]})},u=1;u<l.length;u++)c(u);var h=l.join(" ");r(h,!1);var p=a[h]||(a[h]={preventDefault:!1,commands:[]});p.commands.push(o),s&&(p.preventDefault=!0)},s=0,a=t;s<a.length;s++){var l=a[s],c=l[e]||l.key;if(c)for(var u=0,h=l.scope?l.scope.split(" "):["editor"];u<h.length;u++){var p=h[u];o(p,c,l.run,l.preventDefault),l.shift&&o(p,"Shift-"+c,l.shift,l.preventDefault)}}return n}(e.reduce((function(t,e){return t.concat(e)}),[]))),n}function Yl(t,e,n){return Ql($l(t.state),e,t,n)}var Jl=null;function Ql(t,e,n,i){var r=function(t){var e=!(ro&&(t.ctrlKey||t.altKey||t.metaKey)||(to||io)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?Xr:Qr)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),o=1==r.length&&" "!=r,s="",a=!1;Jl&&Jl.view==n&&Jl.scope==i&&(s=Jl.prefix+" ",(a=Oa.indexOf(e.keyCode)<0)&&(Jl=null));var l,c=function(t){if(t){for(var e=0,i=t.commands;e<i.length;e++){if((0,i[e])(n))return!0}t.preventDefault&&(a=!0)}return!1},u=t[i];if(u){if(c(u[s+_l(r,e,!o)]))return!0;if(o&&(e.shiftKey||e.altKey||e.metaKey)&&(l=Qr[e.keyCode])&&l!=r){if(c(u[s+_l(l,e,!0)]))return!0}else if(o&&e.shiftKey&&c(u[s+_l(r,e,!0)]))return!0}return a}var Xl=!Wo.ios,Zl=Vi.define({combine:function(t){return Dr(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:function(t,e){return Math.min(t,e)},drawRangeCursor:function(t,e){return t||e}})}});function tc(t){return void 0===t&&(t={}),[Zl.of(t),nc,rc]}var ec=function(){function t(t,e,n,i,r){this.left=t,this.top=e,this.width=n,this.height=i,this.className=r}return t.prototype.draw=function(){var t=document.createElement("div");return t.className=this.className,this.adjust(t),t},t.prototype.adjust=function(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width>=0&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"},t.prototype.eq=function(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className},t}(),nc=Ns.fromClass(function(){function t(t){this.view=t,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=t.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=t.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),t.requestMeasure(this.measureReq),this.setBlinkRate()}return t.prototype.setBlinkRate=function(){this.cursorLayer.style.animationDuration=this.view.state.facet(Zl).cursorBlinkRate+"ms"},t.prototype.update=function(t){var e=t.startState.facet(Zl)!=t.state.facet(Zl);(e||t.selectionSet||t.geometryChanged||t.viewportChanged)&&this.view.requestMeasure(this.measureReq),t.transactions.some((function(t){return t.scrollIntoView}))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()},t.prototype.readPos=function(){for(var t=this,e=this.view.state,n=e.facet(Zl),i=e.selection.ranges.map((function(e){return e.empty?[]:function(t,e){if(e.to<=t.viewport.from||e.from>=t.viewport.to)return[];var n=Math.max(e.from,t.viewport.from),i=Math.min(e.to,t.viewport.to),r=t.textDirection==_s.LTR,o=t.contentDOM,s=o.getBoundingClientRect(),a=oc(t),l=window.getComputedStyle(o.firstChild),c=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),u=s.right-parseInt(l.paddingRight),h=ac(t,n),p=ac(t,i),d=h.type==ss.Text?h:null,f=p.type==ss.Text?p:null;t.lineWrapping&&(d&&(d=sc(t,n,d)),f&&(f=sc(t,i,f)));if(d&&f&&d.from==f.from)return b(w(e.from,e.to,d));var g=d?w(e.from,null,d):k(h,!1),m=f?w(null,e.to,f):k(p,!0),v=[];return(d||h).to<(f||p).from-1?v.push(y(c,g.bottom,u,m.top)):g.bottom<m.top&&t.elementAtHeight((g.bottom+m.top)/2).type==ss.Text&&(g.bottom=m.top=(g.bottom+m.top)/2),b(g).concat(v).concat(b(m));function y(t,e,n,i){return new ec(t-a.left,e-a.top,n-t,i-e,"cm-selectionBackground")}function b(t){for(var e=t.top,n=t.bottom,i=t.horizontal,r=[],o=0;o<i.length;o+=2)r.push(y(i[o],e,i[o+1],n));return r}function w(e,n,i){var o=1e9,s=-1e9,a=[];function l(e,n,l,h,p){var d=t.coordsAtPos(e,e==i.to?-2:2),f=t.coordsAtPos(l,l==i.from?2:-2);o=Math.min(d.top,f.top,o),s=Math.max(d.bottom,f.bottom,s),p==_s.LTR?a.push(r&&n?c:d.left,r&&h?u:f.right):a.push(!r&&h?c:f.left,!r&&n?u:d.right)}for(var h=null!=e?e:i.from,p=null!=n?n:i.to,d=0,f=t.visibleRanges;d<f.length;d++){var g=f[d];if(g.to>h&&g.from<p)for(var m=Math.max(g.from,h),v=Math.min(g.to,p);;){for(var y=t.state.doc.lineAt(m),b=0,w=t.bidiSpans(y);b<w.length;b++){var k=w[b],C=k.from+y.from,x=k.to+y.from;if(C>=v)break;x>m&&l(Math.max(C,m),null==e&&C<=h,Math.min(x,v),null==n&&x>=p,k.dir)}if((m=y.to+1)>=v)break}}return 0==a.length&&l(h,null==e,p,null==n,t.textDirection),{top:o,bottom:s,horizontal:a}}function k(t,e){var n=s.top+(e?t.top:t.bottom);return{top:n,bottom:n,horizontal:[]}}}(t.view,e)})).reduce((function(t,e){return t.concat(e)})),r=[],o=0,s=e.selection.ranges;o<s.length;o++){var a=s[o],l=a==e.selection.main;if(a.empty?!l||Xl:n.drawRangeCursor){var c=lc(this.view,a,l);c&&r.push(c)}}return{rangePieces:i,cursors:r}},t.prototype.drawSel=function(t){var e=this,n=t.rangePieces,i=t.cursors;if(n.length!=this.rangePieces.length||n.some((function(t,n){return!t.eq(e.rangePieces[n])}))){this.selectionLayer.textContent="";for(var r=0,o=n;r<o.length;r++){var s=o[r];this.selectionLayer.appendChild(s.draw())}this.rangePieces=n}if(i.length!=this.cursors.length||i.some((function(t,n){return!t.eq(e.cursors[n])}))){var a=this.cursorLayer.children;if(a.length!==i.length){this.cursorLayer.textContent="";for(var l=0,c=i;l<c.length;l++){var u=c[l];this.cursorLayer.appendChild(u.draw())}}else i.forEach((function(t,e){return t.adjust(a[e])}));this.cursors=i}},t.prototype.destroy=function(){this.selectionLayer.remove(),this.cursorLayer.remove()},t}()),ic={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Xl&&(ic[".cm-line"].caretColor="transparent !important");var rc=Qi.highest(Nl.theme(ic));function oc(t){var e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==_s.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function sc(t,e,n){var i=Bi.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:ss.Text}}function ac(t,e){var n=t.lineBlockAt(e);if(Array.isArray(n.type))for(var i=0,r=n.type;i<r.length;i++){var o=r[i];if(o.to>e||o.to==e&&(o.to==n.to||o.type==ss.Text))return o}return n}function lc(t,e,n){var i=t.coordsAtPos(e.head,e.assoc||1);if(!i)return null;var r=oc(t);return new ec(i.left-r.left,i.top-r.top,-1,i.bottom-i.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}var cc=gr.define({map:function(t,e){return null==t?null:e.mapPos(t)}}),uc=_i.define({create:function(){return null},update:function(t,e){return null!=t&&(t=e.changes.mapPos(t)),e.effects.reduce((function(t,e){return e.is(cc)?e.value:t}),t)}}),hc=Ns.fromClass(function(){function t(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}return t.prototype.update=function(t){var e,n=t.state.field(uc);null==n?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(uc)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))},t.prototype.readPos=function(){var t=this.view.state.field(uc),e=null!=t&&this.view.coordsAtPos(t);if(!e)return null;var n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}},t.prototype.drawCursor=function(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")},t.prototype.destroy=function(){this.cursor&&this.cursor.remove()},t.prototype.setDropPos=function(t){this.view.state.field(uc)!=t&&this.view.dispatch({effects:cc.of(t)})},t}(),{eventHandlers:{dragover:function(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave:function(t){t.target!=this.view.contentDOM&&this.view.contentDOM.contains(t.relatedTarget)||this.setDropPos(null)},dragend:function(){this.setDropPos(null)},drop:function(){this.setDropPos(null)}}});function pc(){return[uc,hc]}function dc(t,e,n,i,r){e.lastIndex=0;for(var o=t.iterRange(n,i),s=n,a=void 0;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)r(s+a.index,s+a.index+a[0].length,a)}var fc=function(){function t(t){var e=t.regexp,n=t.decoration,i=t.boundary,r=t.maxLength,o=void 0===r?1e3:r;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=e,this.getDeco="function"==typeof n?n:function(){return n},this.boundary=i,this.maxLength=o}return t.prototype.createDeco=function(t){for(var e=this,n=new Vr,i=0,r=function(t,e){var n=t.visibleRanges;if(1==n.length&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;for(var i=[],r=0,o=n;r<o.length;r++){var s=o[r],a=s.from,l=s.to;a=Math.max(t.state.doc.lineAt(a).from,a-e),l=Math.min(t.state.doc.lineAt(l).to,l+e),i.length&&i[i.length-1].to>=a?i[i.length-1].to=l:i.push({from:a,to:l})}return i}(t,this.maxLength);i<r.length;i++){var o=r[i],s=o.from,a=o.to;dc(t.state.doc,this.regexp,s,a,(function(i,r,o){return n.add(i,r,e.getDeco(o,t,i))}))}return n.finish()},t.prototype.updateDeco=function(t,e){var n=1e9,i=-1;return t.docChanged&&t.changes.iterChanges((function(e,r,o,s){s>t.view.viewport.from&&o<t.view.viewport.to&&(n=Math.min(o,n),i=Math.max(s,i))})),t.viewportChanged||i-n>1e3?this.createDeco(t.view):i>-1?this.updateRange(t.view,e.map(t.changes),n,i):e},t.prototype.updateRange=function(t,e,n,i){for(var r=this,o=function(o){var a=Math.max(o.from,n),l=Math.min(o.to,i);if(l>a){var c=t.state.doc.lineAt(a),u=c.to<l?t.state.doc.lineAt(l):c,h=Math.max(o.from,c.from),p=Math.min(o.to,u.to);if(s.boundary){for(;a>c.from;a--)if(s.boundary.test(c.text[a-1-c.from])){h=a;break}for(;l<u.to;l++)if(s.boundary.test(u.text[l-u.from])){p=l;break}}var d=[],f=void 0;if(c==u)for(s.regexp.lastIndex=h-c.from;(f=s.regexp.exec(c.text))&&f.index<p-c.from;){var g=f.index+c.from;d.push(s.getDeco(f,t,g).range(g,g+f[0].length))}else dc(t.state.doc,s.regexp,h,p,(function(e,n,i){return d.push(r.getDeco(i,t,e).range(e,n))}));e=e.update({filterFrom:h,filterTo:p,filter:function(t,e){return t<h||e>p},add:d})}},s=this,a=0,l=t.visibleRanges;a<l.length;a++){o(l[a])}return e},t}(),gc=null!=/x/.unicode?"gu":"g",mc=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮\ufeff￹-￼]",gc),vc={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},yc=null;var bc=Vi.define({combine:function(t){var e=Dr(t,{render:null,specialChars:mc,addSpecialChars:null});return(e.replaceTabs=!function(){var t;if(null==yc&&"undefined"!=typeof document&&document.body){var e=document.body.style;yc=null!=(null!==(t=e.tabSize)&&void 0!==t?t:e.MozTabSize)}return yc||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,gc)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,gc)),e}});function wc(t){return void 0===t&&(t={}),[bc.of(t),kc||(kc=Ns.fromClass(function(){function t(t){this.view=t,this.decorations=as.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(bc)),this.decorations=this.decorator.createDeco(t)}return t.prototype.makeDecorator=function(t){var e=this;return new fc({regexp:t.specialChars,decoration:function(n,i,r){var o=i.state.doc,s=hi(n[0],0);if(9==s){var a=o.lineAt(r),l=i.state.tabSize,c=fi(a.text,l,r-a.from);return as.replace({widget:new xc((l-c%l)*e.view.defaultCharacterWidth)})}return e.decorationCache[s]||(e.decorationCache[s]=as.replace({widget:new Cc(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})},t.prototype.update=function(t){var e=t.state.facet(bc);t.startState.facet(bc)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)},t}(),{decorations:function(t){return t.decorations}}))]}var kc=null;var Cc=function(t){function e(e,n){var i=t.call(this)||this;return i.options=e,i.code=n,i}return M(e,t),e.prototype.eq=function(t){return t.code==this.code},e.prototype.toDOM=function(t){var e=function(t){return t>=32?"•":10==t?"␤":String.fromCharCode(9216+t)}(this.code),n=t.state.phrase("Control character")+" "+(vc[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,e);if(i)return i;var r=document.createElement("span");return r.textContent=e,r.title=n,r.setAttribute("aria-label",n),r.className="cm-specialChar",r},e.prototype.ignoreEvent=function(){return!1},e}(os),xc=function(t){function e(e){var n=t.call(this)||this;return n.width=e,n}return M(e,t),e.prototype.eq=function(t){return t.width==this.width},e.prototype.toDOM=function(){var t=document.createElement("span");return t.textContent="\t",t.className="cm-tab",t.style.width=this.width+"px",t},e.prototype.ignoreEvent=function(){return!1},e}(os),Sc=Ns.fromClass(function(){function t(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}return t.prototype.update=function(t){var e=t.view.viewState.editorHeight-t.view.defaultLineHeight;e!=this.height&&(this.height=e,this.attrs={style:"padding-bottom: "+e+"px"})},t}());function Ec(){return[Sc,Hs.of((function(t){var e;return(null===(e=t.plugin(Sc))||void 0===e?void 0:e.attrs)||null}))]}function Mc(){return Dc}var Lc=as.line({class:"cm-activeLine"}),Dc=Ns.fromClass(function(){function t(t){this.decorations=this.getDeco(t)}return t.prototype.update=function(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))},t.prototype.getDeco=function(t){for(var e=-1,n=[],i=0,r=t.state.selection.ranges;i<r.length;i++){var o=r[i];if(!o.empty)return as.none;var s=t.lineBlockAt(o.head);s.from>e&&(n.push(Lc.range(s.from)),e=s.from)}return as.set(n)},t}(),{decorations:function(t){return t.decorations}}),Ac=function(t){function e(e){var n=t.call(this)||this;return n.content=e,n}return M(e,t),e.prototype.toDOM=function(){var t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t},e.prototype.ignoreEvent=function(){return!1},e}(os);function Tc(t){return Ns.fromClass(function(){function e(e){this.view=e,this.placeholder=as.set([as.widget({widget:new Ac(t),side:1}).range(0)])}return Object.defineProperty(e.prototype,"decorations",{get:function(){return this.view.state.doc.length?as.none:this.placeholder},enumerable:!1,configurable:!0}),e}(),{decorations:function(t){return t.decorations}})}var Pc={HeightMap:rl,HeightOracle:Za,MeasuredHeights:tl,QueryType:nl,ChangedRange:js,computeOrder:aa,moveVisually:ua},Oc=new yn;function Fc(t){return Vi.define({combine:t?function(e){return e.concat(t)}:void 0})}var Ic=function(){function t(t,e,n,i){void 0===i&&(i=[]),this.data=t,this.topNode=n,Lr.prototype.hasOwnProperty("tree")||Object.defineProperty(Lr.prototype,"tree",{get:function(){return Rc(this)}}),this.parser=e,this.extension=[$c.of(this),Lr.languageData.of((function(t,e,n){return t.facet(Nc(t,e,n))}))].concat(i)}return t.prototype.isActiveAt=function(t,e,n){return void 0===n&&(n=-1),Nc(t,e,n)==this.data},t.prototype.findRegions=function(t){var e=this,n=t.facet($c);if((null==n?void 0:n.data)==this.data)return[{from:0,to:t.doc.length}];if(!n||!n.allowsNesting)return[];var i=[],r=function(t,n){if(t.prop(Oc)!=e.data){var o=t.prop(yn.mounted);if(o){if(o.tree.prop(Oc)==e.data){if(o.overlay)for(var s=0,a=o.overlay;s<a.length;s++){var l=a[s];i.push({from:l.from+n,to:l.to+n})}else i.push({from:n,to:n+t.length});return}if(o.overlay){var c=i.length;if(r(o.tree,o.overlay[0].from+n),i.length>c)return}}for(var u=0;u<t.children.length;u++){var h=t.children[u];h instanceof En&&r(h,t.positions[u]+n)}}else i.push({from:n,to:n+t.length})};return r(Rc(t),0),i},Object.defineProperty(t.prototype,"allowsNesting",{get:function(){return!0},enumerable:!1,configurable:!0}),t}();function Nc(t,e,n){var i=t.facet($c);if(!i)return null;var r=i.data;if(i.allowsNesting)for(var o=Rc(t).topNode;o;o=o.enter(e,n,!0,!1))r=o.type.prop(Oc)||r;return r}Ic.setState=gr.define();var Bc=function(t){function e(e,n){var i=t.call(this,e,n,n.topNode)||this;return i.parser=n,i}return M(e,t),e.define=function(t){var n=Fc(t.languageData);return new e(n,t.parser.configure({props:[Oc.add((function(t){return t.isTop?n:void 0}))]}))},e.prototype.configure=function(t){return new e(this.data,this.parser.configure(t))},Object.defineProperty(e.prototype,"allowsNesting",{get:function(){return this.parser.wrappers.length>0},enumerable:!1,configurable:!0}),e}(Ic);function Rc(t){var e=t.field(Ic.state,!1);return e?e.tree:En.empty}function zc(t,e,n){var i;void 0===n&&(n=50);var r=null===(i=t.field(Ic.state,!1))||void 0===i?void 0:i.context;return r&&(r.isDone(e)||r.work(n,e))?r.tree:null}function Hc(t,e){var n;return void 0===e&&(e=t.doc.length),(null===(n=t.field(Ic.state,!1))||void 0===n?void 0:n.context.isDone(e))||!1}function Vc(t){var e;return(null===(e=t.plugin(Kc))||void 0===e?void 0:e.isWorking())||!1}var qc=function(){function t(t,e){void 0===e&&(e=t.length),this.doc=t,this.length=e,this.cursorPos=0,this.string="",this.cursor=t.iter()}return t.prototype.syncTo=function(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length},t.prototype.chunk=function(t){return this.syncTo(t),this.string},Object.defineProperty(t.prototype,"lineChunks",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.read=function(t,e){var n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)},t}(),jc=null,Uc=function(){function t(t,e,n,i,r,o,s,a){void 0===n&&(n=[]),this.parser=t,this.state=e,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}return t.prototype.startParse=function(){return this.parser.startParse(new qc(this.state.doc),this.fragments)},t.prototype.work=function(t,e){var n=this;return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=En.empty&&this.isDone(null!=e?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext((function(){var i,r=Date.now()+t;for(n.parse||(n.parse=n.startParse()),null!=e&&(null==n.parse.stoppedAt||n.parse.stoppedAt>e)&&e<n.state.doc.length&&n.parse.stopAt(e);;){var o=n.parse.advance();if(o){if(n.fragments=n.withoutTempSkipped(qn.addTree(o,n.fragments,null!=n.parse.stoppedAt)),n.treeLen=null!==(i=n.parse.stoppedAt)&&void 0!==i?i:n.state.doc.length,n.tree=o,n.parse=null,!(n.treeLen<(null!=e?e:n.state.doc.length)))return!0;n.parse=n.startParse()}if(Date.now()>r)return!1}}))},t.prototype.takeTree=function(){var t,e,n=this;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext((function(){for(;!(e=n.parse.advance()););})),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(qn.addTree(this.tree,this.fragments,!0)),this.parse=null)},t.prototype.withContext=function(t){var e=jc;jc=this;try{return t()}finally{jc=e}},t.prototype.withoutTempSkipped=function(t){for(var e=void 0;e=this.tempSkipped.pop();)t=_c(t,e.from,e.to);return t},t.prototype.changes=function(e,n){var i=this,r=i.fragments,o=i.tree,s=i.treeLen,a=i.viewport,l=i.skipped;if(this.takeTree(),!e.empty){var c=[];if(e.iterChangedRanges((function(t,e,n,i){return c.push({fromA:t,toA:e,fromB:n,toB:i})})),r=qn.applyChanges(r,c),o=En.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(var u=0,h=this.skipped;u<h.length;u++){var p=h[u],d=e.mapPos(p.from,1),f=e.mapPos(p.to,-1);d<f&&l.push({from:d,to:f})}}}return new t(this.parser,n,r,o,s,a,l,this.scheduleOn)},t.prototype.updateViewport=function(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;for(var e=this.skipped.length,n=0;n<this.skipped.length;n++){var i=this.skipped[n],r=i.from,o=i.to;r<t.to&&o>t.from&&(this.fragments=_c(this.fragments,r,o),this.skipped.splice(n--,1))}return!(this.skipped.length>=e)&&(this.reset(),!0)},t.prototype.reset=function(){this.parse&&(this.takeTree(),this.parse=null)},t.prototype.skipUntilInView=function(t,e){this.skipped.push({from:t,to:e})},t.getSkippingParser=function(t){return new(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return M(n,e),n.prototype.createParse=function(e,n,i){var r=i[0].from,o=i[i.length-1].to;return{parsedPos:r,advance:function(){var e=jc;if(e){for(var n=0,s=i;n<s.length;n++){var a=s[n];e.tempSkipped.push(a)}t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=o,new En(kn.none,[],[],o-r)},stoppedAt:null,stopAt:function(){}}},n}(jn))},t.prototype.isDone=function(t){t=Math.min(t,this.state.doc.length);var e=this.fragments;return this.treeLen>=t&&e.length&&0==e[0].from&&e[0].to>=t},t.get=function(){return jc},t}();function _c(t,e,n){return qn.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}var Wc=function(){function t(t){this.context=t,this.tree=t.tree}return t.prototype.apply=function(e){if(!e.docChanged)return this;var n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new t(n)},t.init=function(e){var n=Math.min(3e3,e.doc.length),i=new Uc(e.facet($c).parser,e,[],En.empty,0,{from:0,to:n},[],null);return i.work(20,n)||i.takeTree(),new t(i)},t}();Ic.state=_i.define({create:Wc.init,update:function(t,e){for(var n=0,i=e.effects;n<i.length;n++){var r=i[n];if(r.is(Ic.setState))return r.value}return e.startState.facet($c)!=e.state.facet($c)?Wc.init(e.state):t.apply(e)}});var Gc=function(t){var e=setTimeout((function(){return t()}),500);return function(){return clearTimeout(e)}};"undefined"!=typeof requestIdleCallback&&(Gc=function(t){var e=-1,n=setTimeout((function(){e=requestIdleCallback(t,{timeout:400})}),100);return function(){return e<0?clearTimeout(n):cancelIdleCallback(e)}});var Kc=Ns.fromClass(function(){function t(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}return t.prototype.update=function(t){var e=this.view.state.field(Ic.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)},t.prototype.scheduleWork=function(){if(!this.working){var t=this.view.state,e=t.field(Ic.state);e.tree==e.context.tree&&e.context.isDone(t.doc.length)||(this.working=Gc(this.work))}},t.prototype.work=function(t){this.working=null;var e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),!(this.chunkBudget<=0)){var n=this.view,i=n.state,r=n.viewport.to,o=i.field(Ic.state);if(o.tree!=o.context.tree||!o.context.isDone(r+1e5)){var s=Math.min(this.chunkBudget,100,t?Math.max(25,t.timeRemaining()-5):1e9),a=o.context.treeLen<r&&i.doc.length>r+1e3,l=o.context.work(s,r+(a?0:1e5));this.chunkBudget-=Date.now()-e,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Ic.setState.of(new Wc(o.context))})),this.chunkBudget>0&&(!l||a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}}},t.prototype.checkAsyncSchedule=function(t){var e=this;t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then((function(){return e.scheduleWork()})).catch((function(t){return As(e.view.state,t)})).then((function(){return e.workScheduled--})),t.scheduleOn=null)},t.prototype.destroy=function(){this.working&&this.working()},t.prototype.isWorking=function(){return this.working||this.workScheduled>0},t}(),{eventHandlers:{focus:function(){this.scheduleWork()}}}),$c=Vi.define({combine:function(t){return t.length?t[0]:null},enables:[Ic.state,Kc]}),Yc=function(t,e){void 0===e&&(e=[]),this.language=t,this.support=e,this.extension=[t,e]},Jc=function(){function t(t,e,n,i,r,o){void 0===o&&(o=void 0),this.name=t,this.alias=e,this.extensions=n,this.filename=i,this.loadFunc=r,this.support=o,this.loading=null}return t.prototype.load=function(){var t=this;return this.loading||(this.loading=this.loadFunc().then((function(e){return t.support=e}),(function(e){throw t.loading=null,e})))},t.of=function(e){var n=e.load,i=e.support;if(!n){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=function(){return Promise.resolve(i)}}return new t(e.name,(e.alias||[]).concat(e.name).map((function(t){return t.toLowerCase()})),e.extensions||[],e.filename,n,i)},t.matchFilename=function(t,e){for(var n=0,i=t;n<i.length;n++){if((a=i[n]).filename&&a.filename.test(e))return a}var r=/\.([^.]+)$/.exec(e);if(r)for(var o=0,s=t;o<s.length;o++){var a;if((a=s[o]).extensions.indexOf(r[1])>-1)return a}return null},t.matchLanguageName=function(t,e,n){void 0===n&&(n=!0),e=e.toLowerCase();for(var i=0,r=t;i<r.length;i++){if((a=r[i]).alias.some((function(t){return t==e})))return a}if(n)for(var o=0,s=t;o<s.length;o++)for(var a,l=0,c=(a=s[o]).alias;l<c.length;l++){var u=c[l],h=e.indexOf(u);if(h>-1&&(u.length>2||!/\w/.test(e[h-1])&&!/\w/.test(e[h+u.length])))return a}return null},t}(),Qc=Vi.define(),Xc=Vi.define({combine:function(t){if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}});function Zc(t){var e=t.facet(Xc);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function tu(t,e){var n="",i=t.tabSize;if(9==t.facet(Xc).charCodeAt(0))for(;e>=i;)n+="\t",e-=i;for(var r=0;r<e;r++)n+=" ";return n}function eu(t,e){t instanceof Lr&&(t=new nu(t));for(var n=0,i=t.state.facet(Qc);n<i.length;n++){var r=(0,i[n])(t,e);if(null!=r)return r}var o=Rc(t.state);return o?function(t,e,n){return ou(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}(t,o,e):null}var nu=function(){function t(t,e){void 0===e&&(e={}),this.state=t,this.options=e,this.unit=Zc(t)}return t.prototype.lineAt=function(t,e){void 0===e&&(e=1);var n=this.state.doc.lineAt(t),i=this.options.simulateBreak;return null!=i&&i>=n.from&&i<=n.to?(e<0?i<t:i<=t)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n},t.prototype.textAfterPos=function(t,e){if(void 0===e&&(e=1),this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";var n=this.lineAt(t,e),i=n.text,r=n.from;return i.slice(t-r,Math.min(i.length,t+100-r))},t.prototype.column=function(t,e){void 0===e&&(e=1);var n=this.lineAt(t,e),i=n.text,r=n.from,o=this.countColumn(i,t-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(i,i.search(/\S|$/))),o},t.prototype.countColumn=function(t,e){return void 0===e&&(e=t.length),fi(t,this.state.tabSize,e)},t.prototype.lineIndent=function(t,e){void 0===e&&(e=1);var n=this.lineAt(t,e),i=n.text,r=n.from,o=this.options.overrideIndentation;if(o){var s=o(r);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))},Object.defineProperty(t.prototype,"simulatedBreak",{get:function(){return this.options.simulateBreak||null},enumerable:!1,configurable:!0}),t}(),iu=new yn;function ru(t){var e=t.type.prop(iu);if(e)return e;var n,i=t.firstChild;if(i&&(n=i.type.prop(yn.closedBy))){var r=t.lastChild,o=r&&n.indexOf(r.name)>-1;return function(t){return uu(t,!0,1,void 0,o&&!function(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}(t)?r.from:void 0)}}return null==t.parent?su:null}function ou(t,e,n){for(;t;t=t.parent){var i=ru(t);if(i)return i(new au(n,e,t))}return null}function su(){return 0}var au=function(t){function e(e,n,i){var r=t.call(this,e.state,e.options)||this;return r.base=e,r.pos=n,r.node=i,r}return M(e,t),Object.defineProperty(e.prototype,"textAfter",{get:function(){return this.textAfterPos(this.pos)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseIndent",{get:function(){for(var t=this.state.doc.lineAt(this.node.from);;){for(var e=this.node.resolve(t.from);e.parent&&e.parent.from==e.from;)e=e.parent;if(lu(e,this.node))break;t=this.state.doc.lineAt(e.from)}return this.lineIndent(t.from)},enumerable:!1,configurable:!0}),e.prototype.continue=function(){var t=this.node.parent;return t?ou(t,this.pos,this.base):0},e}(nu);function lu(t,e){for(var n=e;n;n=n.parent)if(t==n)return!0;return!1}function cu(t){var e=t.closing,n=t.align,i=void 0===n||n,r=t.units,o=void 0===r?1:r;return function(t){return uu(t,i,o,e)}}function uu(t,e,n,i,r){var o=t.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==t.pos+s,l=e?function(t){var e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;for(var r=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),s=null==r||r<=o.from?o.to:Math.min(o.to,r),a=n.to;;){var l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<s?n:null;a=l.to}}(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}var hu=function(t){return t.baseIndent};function pu(t){var e=void 0===t?{}:t,n=e.except,i=e.units,r=void 0===i?1:i;return function(t){var e=n&&n.test(t.textAfter);return t.baseIndent+(e?0:r*t.unit)}}function du(){return Lr.transactionFilter.of((function(t){if(!t.docChanged||!t.isUserEvent("input.type"))return t;var e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;var n=t.newDoc,i=t.newSelection.main.head,r=n.lineAt(i);if(i>r.from+200)return t;var o=n.sliceString(r.from,i);if(!e.some((function(t){return t.test(o)})))return t;for(var s=t.state,a=-1,l=[],c=0,u=s.selection.ranges;c<u.length;c++){var h=u[c].head,p=s.doc.lineAt(h);if(p.from!=a){a=p.from;var d=eu(s,p.from);if(null!=d){var f=/^\s*/.exec(p.text)[0],g=tu(s,d);f!=g&&l.push({from:p.from,to:p.from+f.length,insert:g})}}}return l.length?[t,{changes:l,sequential:!0}]:t}))}var fu=Vi.define(),gu=new yn;function mu(t){var e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function vu(t,e,n){for(var i=0,r=t.facet(fu);i<r.length;i++){var o=(0,r[i])(t,e,n);if(o)return o}return function(t,e,n){var i=Rc(t);if(0==i.length)return null;for(var r=null,o=i.resolveInner(n);o;o=o.parent)if(!(o.to<=n||o.from>n)){if(r&&o.from<e)break;var s=o.type.prop(gu);if(s){var a=s(o,t);a&&a.from<=n&&a.from>=e&&a.to>n&&(r=a)}}return r}(t,e,n)}function yu(t,e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=0),null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=r,s=i;s<e;s++)9==t.charCodeAt(s)?o+=n-o%n:o++;return o}var bu=function(){function t(t,e,n,i){this.string=t,this.tabSize=e,this.indentUnit=n,this.lookAhead=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}return t.prototype.eol=function(){return this.pos>=this.string.length},t.prototype.sol=function(){return 0==this.pos},t.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},t.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},t.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t instanceof RegExp?t.test(e):t(e)))return++this.pos,e},t.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},t.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},t.prototype.skipToEnd=function(){this.pos=this.string.length},t.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},t.prototype.backUp=function(t){this.pos-=t},t.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=yu(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},t.prototype.indentation=function(){return yu(this.string,null,this.tabSize)},t.prototype.match=function(t,e,n){if("string"==typeof t){var i=function(t){return n?t.toLowerCase():t};return i(this.string.substr(this.pos,t.length))==i(t)?(!1!==e&&(this.pos+=t.length),!0):null}var r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&!1!==e&&(this.pos+=r[0].length),r)},t.prototype.current=function(){return this.string.slice(this.start,this.pos)},t}();function wu(t){if("object"!=typeof t)return t;var e={};for(var n in t){var i=t[n];e[n]=i instanceof Array?i.slice():i}return e}var ku=function(t){function e(e){var n,i,r=this,o=Fc(e.languageData),s={token:(i=e).token,blankLine:i.blankLine||function(){return null},startState:i.startState||function(){return!0},copyState:i.copyState||wu,indent:i.indent||function(){return null},languageData:i.languageData||{}},a=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.createParse=function(t,e,i){return new Su(n,t,e,i)},e}(jn));return r=t.call(this,o,a,function(t){var e=kn.define({id:Lu.length,name:"Document",props:[Oc.add((function(){return t}))]});return Lu.push(e),e}(o),[Qc.of((function(t,e){return r.getIndent(t,e)}))])||this,n=r,r.streamParser=s,r.stateAfter=new yn({perNode:!0}),r}return M(e,t),e.define=function(t){return new e(t)},e.prototype.getIndent=function(t,e){for(var n=Rc(t.state),i=n.resolve(e);i&&i.type!=this.topNode;)i=i.parent;if(!i)return null;var r,o,s=Cu(this,n,0,i.from,e);if(s?(o=s.state,r=s.pos+1):(o=this.streamParser.startState(t.unit),r=0),e-r>1e4)return null;for(var a=function(){var n=t.state.doc.lineAt(r),i=Math.min(e,n.to);if(n.length)for(var s=new bu(n.text,t.state.tabSize,t.unit,(function(e){return e+n.number>t.state.doc.lines?"":t.state.doc.line(e+n.number).text}));s.pos<i-n.from;)Eu(l.streamParser.token,s,o);else l.streamParser.blankLine(o,t.unit);if(i==e)return"break";r=n.to+1},l=this;r<e;){if("break"===a())break}var c=t.state.doc.lineAt(e).text,u=this.streamParser.indent(o,/^\s*(.*)/.exec(c)[1],t);return u&&"CodeMirror.Pass"===u.toString()?null:u},Object.defineProperty(e.prototype,"allowsNesting",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(Ic);function Cu(t,e,n,i,r){var o=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(o)return{state:t.streamParser.copyState(o),pos:n+e.length};for(var s=e.children.length-1;s>=0;s--){var a=e.children[s],l=n+e.positions[s],c=a instanceof En&&l<r&&Cu(t,a,l,i,r);if(c)return c}return null}function xu(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;r||e.type!=t.topNode||(r=!0);for(var o=e.children.length-1;o>=0;o--){var s=e.positions[o]+n,a=e.children[o],l=void 0;if(s<i&&a instanceof En){if(!(l=xu(t,a,n-s,i-s,r)))break;return r?new En(e.type,e.children.slice(0,o).concat(l),e.positions.slice(0,o+1),s+l.length):l}}return null}var Su=function(){function t(t,e,n,i){this.lang=t,this.input=e,this.fragments=n,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;var r=Uc.get(),o=i[0].from,s=function(t,e,n,i){for(var r=0,o=e;r<o.length;r++){var s=o[r],a=s.from+(s.openStart?25:0),l=s.to-(s.openEnd?25:0),c=a<=n&&l>n&&Cu(t,s.tree,0-s.offset,n,l),u=void 0;if(c&&(u=xu(t,s.tree,n+s.offset,c.pos+s.offset,!1)))return{state:c.state,tree:u}}return{state:t.streamParser.startState(i?Zc(i):4),tree:En.empty}}(t,n,o,null==r?void 0:r.state),a=s.state,l=s.tree;this.state=a,this.parsedPos=this.chunkStart=o+l.length,l.length&&(this.chunks.push(l),this.chunkPos.push(0)),r&&this.parsedPos<r.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Zc(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from)}return t.prototype.advance=function(){var t=Uc.get(),e=null==this.stoppedAt?this.to:this.stoppedAt,n=Math.min(e,this.chunkStart+2048),i=t.viewport.to+5e3;for(t&&(n=Math.min(n,i));this.parsedPos<n;)this.parseLine(t);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=e?this.finish():t&&this.parsedPos>=i?(t.skipUntilInView(this.parsedPos,e),this.finish()):null},t.prototype.stopAt=function(t){this.stoppedAt=t},t.prototype.lineAfter=function(t){var e=this.input.chunk(t);if(this.input.lineChunks)"\n"==e&&(e="");else{var n=e.indexOf("\n");n>-1&&(e=e.slice(0,n))}return t+e.length<=this.to?e:e.slice(0,this.to-t)},t.prototype.nextLine=function(){for(var t=this.parsedPos,e=this.lineAfter(t),n=t+e.length,i=this.rangeIndex;;){var r=this.ranges[i].to;if(r>=n)break;if(e=e.slice(0,r-(n-e.length)),++i==this.ranges.length)break;var o=this.ranges[i].from,s=this.lineAfter(o);e+=s,n=o+s.length}return{line:e,end:n}},t.prototype.skipGapsTo=function(t,e,n){for(;;){var i=this.ranges[this.rangeIndex].to,r=t+e;if(n>0?i>r:i>=r)break;e+=this.ranges[++this.rangeIndex].from-i}return e},t.prototype.emitToken=function(t,e,n,i,r){if(this.ranges.length>1){e+=r=this.skipGapsTo(e,r,1);var o=this.chunk.length;n+=r=this.skipGapsTo(n,r,-1),i+=this.chunk.length-o}return this.chunk.push(t,e,n,i),r},t.prototype.parseLine=function(t){var e=this,n=this.nextLine(),i=n.line,r=n.end,o=0,s=this.lang.streamParser,a=new bu(i,t?t.state.tabSize:4,t?Zc(t.state):2,(function(t){for(var n=e.parsedPos,i=0;i<t;i++)(n+=e.lineAfter(n).length)<e.input.length&&n++;return e.lineAfter(n)})),l=[],c=[];if(a.eol()){(h=s.blankLine(this.state,a.indentUnit))&&h.split(" ").forEach((function(t){if(t){var e=t.match(/(?:^|\s+)line-(background-)?(\S+)/);e&&c.push(e[2])}}))}else{for(var u=null;!a.eol();){var h;if(h=Eu(s.token,a,this.state)){var p=h.split(" ").filter((function(t){if(!t)return!1;var e=t.match(/(?:^|\s+)line-(background-)?(\S+)/);return!e||(c.push(e[2]),!1)})).sort().join(" "),d=this.parsedPos+a.start,f=this.parsedPos+a.pos;u&&u.cls===p&&u.to===d?u.to=f:(u={cls:p,from:d,to:f},l.push(u))}}for(var g=0,m=l;g<m.length;g++){var v=m[g];o=this.emitToken(Au(v.cls),v.from,v.to,4,o)}}c.length>0&&(o=this.emitToken(Au(c.join(" "),!0),this.parsedPos,this.parsedPos+i.length,4*(l.length+1),o)),this.parsedPos=r,this.parsedPos<this.to&&this.parsedPos++},t.prototype.finishChunk=function(){var t=En.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Du,topID:0,maxBufferLength:2048,reused:this.chunkReused});t=new En(t.type,t.children,t.positions,t.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos},t.prototype.finish=function(){return new En(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()},t}();function Eu(t,e,n){e.start=e.pos;for(var i=0;i<10;i++){var r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}var Mu=Object.create(null),Lu=[kn.none],Du=new Cn(Lu);function Au(t,e){return t?Mu[t]||(Mu[t]=function(t,e){var n,i,r=t.replace(/ /g,"_"),o=kn.define({id:Lu.length,name:r,props:[e?Pu.add((n={},n[r]=t,n)):Tu.add((i={},i[r]=t,i))]});return Lu.push(o),o.id}(t,e)):0}var Tu=new yn,Pu=new yn,Ou=function(){function t(t){this.lineCache=Object.create(null),this.tokenCache=Object.create(null),this.tree=Rc(t.state),this.decorations=this.buildDeco(t)}return t.prototype.update=function(t){var e=Rc(t.state);e.length<t.view.viewport.to?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged)&&(this.tree=e,this.decorations=this.buildDeco(t.view))},t.prototype.buildDeco=function(t){var e=this;if(!this.tree.length)return as.none;for(var n=[],i=0,r=t.state.facet(Iu);i<r.length;i++){var o=r[i];n.push.apply(n,o.split(" "))}for(var s=new Set(n),a=s.size>0,l=new Vr,c=0,u=0,h=t.visibleRanges;u<h.length;u++){var p=h[u],d=p.from,f=p.to;this.tree.iterate({from:d,to:f,enter:function(n,i,r){var o=n.prop(Pu);if(o){var u=e.lineCache[o]||(e.lineCache[o]=as.line({attributes:{class:o}})),h=t.visualLineAt(i).from;if(c>h)return;l.add(h,h,u),c=h}var p=n.prop(Tu);if(p){if(c>i)return;if(!(u=e.tokenCache[p])){var d=p.split(" "),f={class:d.map((function(t){return"cm-"+t})).join(" ")};a&&d.some((function(t){return s.has(t)}))&&(f.attributes={spellcheck:"false"}),u=e.tokenCache[p]=as.mark(f)}l.add(i,r,u),c=r}}})}return l.finish()},t}(),Fu=Qi.fallback(Ns.define((function(t){return new Ou(t)}),{decorations:function(t){return t.decorations}})),Iu=Vi.define({}),Nu=gr.define(),Bu=gr.define(),Ru=new Map,zu=_i.define({create:function(){return as.none},update:function(t,e){t=t.map(e.changes);for(var n=0,i=e.effects;n<i.length;n++){var r=i[n];r.is(Nu)?t=t.update({add:r.value,sort:!0}):r.is(Bu)&&(t=t.update({filter:r.value}))}return t},provide:function(t){return Nl.decorations.from(t)}});function Hu(t,e){return isFinite(e.ch)?t.line(e.line+1).from+e.ch:t.line(e.line+1).to}function Vu(t,e){var n=t.lineAt(e);return{line:n.number-1,ch:e-n.from}}function qu(t,e,n){return t.from<=n&&t.to>=e}function ju(t,e,n){for(var i=0,r=t;i<r.length;i++){if(qu(r[i],e,n))return!0}return!1}function Uu(t,e,n){var i=!1;return t.between(e,n,(function(){return i=!0,!1})),i}var _u=gr.define();function Wu(t,e){return t.some((function(t){return t.effects.some((function(t){return t.is(e)}))}))}function Gu(t,e){return void 0===e&&(e=0),{line:t,ch:e}}function Ku(t,e){return{line:t.line,ch:t.ch+e}}function $u(t,e){return t.line===e.line?t.ch<=e.ch:t.line<=e.line}function Yu(t,e){return function(t,e){var n=t.from,i=e.from;return n.line===i.line?n.ch-i.ch:n.line-i.line}(e,t)}var Ju=/^([>\s]*)(([*+-] |(\d+)([.)] ))(?:\[(.)\] )?)?/,Qu=/^([>\s]*)(#{1,6} )?(.*)/,Xu=[{regex:/(！)?【【$/,replace:function(t){return t[1]?"![[":"[["}},{regex:/】】$/,replace:function(){return"]]"}},{regex:/【【$/,replace:function(){return"[["}}],Zu=function(){function t(){}return t.prototype.getDoc=function(){return this},t.prototype.setLine=function(t,e){this.replaceRange(e,Gu(t,0),Gu(t,this.getLine(t).length))},t.prototype.somethingSelected=function(){return!!this.getSelection()},t.prototype.setCursor=function(t,e){return Number.isNumber(t)?this.setSelection({line:t,ch:e}):this.setSelection(t)},t.prototype.posAtMouse=function(t){return this.posAtCoords(t.clientX,t.clientY)},t.prototype.getSpellcheckStatus=function(t,e){return null},t.prototype.toggleSurroundingMarkdown=function(t){var e=this,n=this.getSelection(),i=this.getCursor("from"),r=this.getCursor("to"),o=function(t){var n=t.length,o=e.getRange(Ku(i,-n),i),s=e.getRange(r,Ku(r,n));return o===t&&s===t},s=function(t){return n.length>=2*t.length&&n.startsWith(t)&&n.endsWith(t)},a=function(t,a){return o(t)?(function(t,o){var s=o.length,a=o+n+o;e.transaction({changes:[{from:Ku(i,-t),to:Ku(r,t),text:a}],selection:{from:Ku(i,s-t),to:Ku(r,r.line===i.line?s-t:0)}})}(t.length,a),!0):!!s(t)&&(function(t,o){var s=o+n.substring(t,n.length-t)+o;e.transaction({changes:[{from:i,to:r,text:s}],selection:{from:i,to:Gu(r.line,r.line===i.line?i.ch+s.length:r.ch)}})}(t.length,a),!0)};if("*"===t||"_"===t){if(a("***","**"))return;if(a("___","__"))return;if(!(o("**")||o("__")||s("**")||s("__"))){if(a("*",""))return;if(a("_",""))return}}else if("**"===t||"__"===t){if(a("**",""))return;if(a("__",""))return}else if(2===t.length&&t.charAt(0)===t.charAt(1)&&a(t,""))return;var l=n.match(/^(\s*)([\s\S]*?)(\s*)$/);if(l){n=l[2];var c=l[1].length,u=l[3].length;c&&(i.ch+=c),u&&(r.ch-=u)}var h=r;r.line===i.line&&(h=Ku(r,t.length)),this.transaction({changes:[{from:i,to:r,text:""+t+n+t}],selection:{from:Ku(i,t.length),to:h}})},t.prototype.insertMarkdownLink=function(){var t=this.getSelection(),e=this.getCursor("from"),n=this.getCursor("to");t?this.transaction({replaceSelection:"["+t+"]()",selection:{from:Ku(e,t.length+3)}}):e.line===n.line&&e.ch===n.ch&&this.transaction({replaceSelection:"[]()",selection:{from:Ku(e,1)}})},t.prototype.triggerWikilink=function(t){var e=this.getSelection(),n=this.getCursor("from"),i=this.getCursor("to");e?(this.replaceSelection(t?"![["+e+"]]":"[["+e+"]]"),this.setSelection(Ku(n,e.length+2))):n.line===i.line&&n.ch===i.ch&&(this.replaceSelection(t?"![[]]":"[[]]"),this.setSelection(Ku(n,t?3:2)))},t.prototype.insertText=function(t){var e=this.getSelection(),n=this.getCursor("from"),i=this.getCursor("to");e?(this.replaceSelection(""+t+e),this.setSelection(Ku(n,e.length+t.length))):n.line===i.line&&n.ch===i.ch&&(this.replaceSelection(t),this.setSelection(Ku(n,t.length)))},t.prototype.processLines=function(t,e,n){void 0===n&&(n=!0);for(var i=this.listSelections(),r=function(t){for(var e=[],n=0,i=t;n<i.length;n++)for(var r=i[n],o=Math.min(r.anchor.line,r.head.line),s=Math.max(r.anchor.line,r.head.line),a=o;a<=s;a++)e.push(a);return Array.from(new Set(e)).sort()}(i),o=[],s=0,a=r;s<a.length;s++){var l=a[s],c=this.getLine(l);if(n&&r.length>1&&!c.trim())o.push(null);else{var u=t(l,c);o.push(u)}}for(var h=[],p=0;p<r.length;p++){l=r[p],u=o[p];if(!n||null!==u)(d=e(l,c=this.getLine(l),u))&&h.push(d)}if(0!==h.length){if(1===i.length){var d=h[0],f=i[0],g=f.anchor;if(0===g.ch&&(v=g,y=f.head,v.line===y.line&&v.ch===y.ch)&&g.line===d.from.line){var m=d.text.length-(d.to?d.to.ch-d.from.ch:0);return g.ch+=m,g.ch<0&&(g.ch=0),void this.transaction({changes:h,selection:{from:g}})}}var v,y;this.transaction({changes:h})}},t.prototype.setHeading=function(t){this.processLines((function(t,e){return e.match(Qu)}),(function(e,n,i){var r=0===t?"":Array(t).fill("#").join("")+" ";return{from:Gu(e,i[1].length),to:Gu(e,n.length-i[3].length),text:r}}))},t.prototype.toggleBlockquote=function(){var t=/^\s*>\s*/,e=!1;this.processLines((function(n,i){var r=i.match(t);return r||(e=!0),r}),(function(t,n,i){var r=i;if(e&&!r)return{from:Gu(t,0),text:"> "};if(!e&&r){var o=r[0].length;return{from:Gu(t,0),to:Gu(t,o),text:""}}}),!1)},t.prototype.toggleBulletList=function(){var t=!1;this.processLines((function(e,n){var i=n.match(Ju);return i[3]&&!i[4]||(t=!0),i}),(function(e,n,i){return i?{from:Gu(e,0),to:Gu(e,i[0].length),text:i[1]+(t?"- ":"")}:null}))},t.prototype.toggleNumberList=function(){var t=!1;this.processLines((function(e,n){var i=n.match(Ju);return i[4]||(t=!0),i}),(function(e,n,i){return i?{from:Gu(e,0),to:Gu(e,i[0].length),text:i[1]+(t?"1. ":"")}:null}))},t.prototype.toggleCheckList=function(){var t=3;this.processLines((function(e,n){var i=n.match(Ju);return t>2&&" "===i[6]&&(t=2),t>1&&!i[6]&&(t=1),t>0&&!i[3]&&(t=0),i}),(function(e,n,i){if(!i)return null;var r={from:Gu(e,0),to:Gu(e,i[0].length),text:n.substr(0,i[0].length)};return 0===t?i[3]||(r.text=i[1]+"- "):1===t?i[6]||(r.text=i[1]+i[3]+"[ ] "):2===t?r.text=i[1]+i[3]+"[x] ":3===t&&(r.text=i[1]+i[3]+"[ ] "),r}))},t.prototype.indentList=function(){this.exec("indentMore"),this.afterIndent()},t.prototype.unindentList=function(){this.exec("indentLess"),this.afterIndent()},t.prototype.afterIndent=function(){for(var t=0,e=this.listSelections();t<e.length;t++){var n=e[t].head.line;this.fixMarkdownListNumbers(n),this.fixMarkdownListNumbers(n+1)}},t.prototype.fixMarkdownListNumbers=function(t){var e=this.getLine(t);if(e){var n=Ju.exec(e);if(n&&n[4]){for(var i=n[1],r=n[5],o=t-1,s=0,a=null;o>=0;){var l=this.getLine(o),c=Ju.exec(l);if(!c)break;var u=c[1];if(u===i){c[4]?s=parseInt(c[4],10):a=c;break}if(u.length<i.length)break;o--}var h=i.length+n[2].length;if(a)this.replaceRange(i+a[2],Gu(t),Gu(t,h));else{s++,this.replaceRange(i+s+r,Gu(t),Gu(t,h));for(var p=t+1,d=this.lineCount();p<d;){var f=this.getLine(p);if(f){var g=Ju.exec(f);if(!g||!g[2])break;var m=g[1];if(m===i&&g[4]&&(s++,this.replaceRange(i+s+g[5],Gu(p),Gu(p,m.length+g[2].length))),m.length<i.length)break;p++}else p++}}}}},t.prototype.newlineAndIndentContinueMarkdownList=function(){for(var t=this,e=this.listSelections(),n=[],i=function(e){var i=e.head;if(e.head.line!==e.anchor.line||e.head.ch!==e.anchor.ch)return!1;var r=t.getLine(i.line),o=Ju.exec(r);if(!o)return!1;var s=o[0],a=o[1],l=o[2],c=o[3],u=o[4],h=o[5],p=o[6];if(i.ch<s.length||!l&&!a.contains(">"))return!1;if(""===r.substr(s.length).trim()){if(!a)return n.push({text:"",from:Gu(i.line),to:i}),!0;if(a.endsWith("\t")||a.endsWith(">"))return n.push({text:"",from:Gu(i.line,a.length-1),to:Gu(i.line,a.length)}),!0;if(a.endsWith("> "))return n.push({text:"",from:Gu(i.line,a.length-2),to:Gu(i.line,a.length)}),!0;for(var d=0;d<4&&" "===a.charAt(a.length-d-1);d++);return d>0?(n.push({text:"",from:Gu(i.line,a.length-d),to:Gu(i.line,a.length)}),!0):(n.push({text:"",from:Gu(i.line),to:Gu(i.line,a.length)}),!0)}if(!l)return n.push({text:r.charAt(i.ch-1)+"\n"+a,from:Gu(i.line,i.ch-1),to:i}),!0;var f=c;if(u&&(f=parseInt(u,10)+1+h),p&&(f+="[ ] "),n.push({text:r.charAt(i.ch-1)+"\n"+a+f,from:Gu(i.line,i.ch-1),to:i}),u)for(var g=parseInt(u,10)+2,m=i.line+1,v=t.lineCount();m<v;m++){var y=Ju.exec(t.getLine(m));if(!y)break;var b=y[1];if(b===a){var w=y[4],k=parseInt(w,10);w&&!isNaN(k)&&(g=Math.max(g,k),n.push({text:String(g),from:Gu(m,a.length),to:Gu(m,a.length+w.length)})),g++}else if(!(b.length>a.length))break}return!0},r=0,o=e;r<o.length;r++){if(!i(o[r]))return this.exec("newlineAndIndent")}this.transaction({changes:n})},t.prototype.expandText=function(){var t=this.getCursor("anchor"),e=this.getCursor("head");if(t.line===e.line&&t.ch===e.ch)for(var n=this.getLine(t.line).substr(0,t.ch),i=0,r=Xu;i<r.length;i++){var o=r[i],s=n.match(o.regex);if(s){var a=s[0].length,l=o.replace(s);this.replaceRange(l,Ku(t,-a),t);break}}},t}();function th(t,e){for(var n=[],i=0,r=e;i<r.length;i++){var o=r[i];n.push(o[0],o[1])}for(var s=eh(t,n),a=[],l=0;l<e.length;l++)a.push({from:s[2*l],to:s[2*l+1]});return a}function eh(t,e){for(var n=0,i=0,r=t.indexOf("\n"),o=[],s=0,a=e;s<a.length;s++){for(var l=a[s];r<l;){if(-1===r){r=t.length;break}n++,i=r+1,r=t.indexOf("\n",i)}o.push({line:n,ch:l-i})}return o}function nh(t,e){t.focus();var n=document.createRange();n.selectNodeContents(t),isBoolean(e)&&n.collapse(e);var i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(n))}function ih(){var t=document.activeElement;t&&t instanceof HTMLElement&&t.blur();var e=window.getSelection();e&&e.removeAllRanges()}function rh(){var t=window.getSelection();if(!t)return null;var e=null;return t.rangeCount>0&&(e=t.getRangeAt(0)),{range:e,focusEl:document.activeElement}}function oh(t){if(t){var e=t.focusEl,n=t.range,i=document.body;if(n&&i.contains(n.startContainer)&&i.contains(n.endContainer)){var r=window.getSelection();r&&(r.removeAllRanges(),r.addRange(n))}e&&(e instanceof HTMLElement||e instanceof SVGElement)&&i.contains(e)&&e.focus()}}var sh=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){sh={passive:!1}}}))}catch(t){}function ah(t,e,n){n=n||{},e.show();var i=n.gap||0,r=n.preference||"bottom",o=n.offsetParent||e.offsetParent||document.documentElement,s=n.horizontalAlignment||"left",a=o.scrollTop+10,l=o.scrollTop+o.clientHeight-10,c=Math.min(t.top,l),u=Math.max(t.bottom,a),h=e.offsetHeight,p=t.top-a>=h+i,d=l-t.bottom>=h+i,f=0,g="";!p||"top"!==r&&d?!d||"bottom"!==r&&p?o.clientHeight<h+i?(f=a,g="overlap"):"top"===r?(f=a+i,g="overlap"):(f=l-h,g="overlap"):(f=u+i,g="bottom"):(f=c-i-h,g="top");var m=o.scrollLeft+10,v=o.scrollLeft+o.clientWidth-10,y=e.offsetWidth,b="left"===s?t.left:t.right-y;return b<m?b=m:b>v-y&&(b=v-y),e.style.top=f+"px",e.style.left=b+"px",{top:f,left:b,vresult:g}}function lh(t,e){var n=t.clientX,i=t.clientY,r=e.getBoundingClientRect();return n>=r.x&&n<=r.x+r.width&&i>=r.y&&i<=r.y+r.height}function ch(t,e){for(var n=0,i=0,r=e?e.offsetParent:null;t&&t!==e&&t!==r;){n+=t.offsetTop,i+=t.offsetLeft;for(var o=t.offsetParent,s=t.parentElement;s&&s!==o;)n-=s.scrollTop,i-=s.scrollLeft,s=s.parentElement;o&&(n-=o.scrollTop,i-=o.scrollLeft),t=o}return{top:n,left:i}}function uh(t,e){var n=ch(t,e);return{left:n.left,right:n.left+t.offsetWidth,top:n.top,bottom:n.top+t.offsetHeight}}function hh(t,e){var n=!1,i=null;return{get loaded(){return n},get promise(){if(n)return Promise.resolve();if(!i){e&&e.before&&e.before();var r=function(t){return new Promise((function(e,n){var i=document.createElement("script");i.type="text/javascript",i.src=t,i.addEventListener("load",(function(){return e(i)}),!1),i.addEventListener("error",(function(){return n(i)}),!1),document.body.appendChild(i)}))}(t);r.catch((function(t){t.detach(),i=null})),i=r.then((function(){n=!0,i=null,e&&e.after&&e.after()}))}return i},then:function(t){return n?t():this.promise.then(t)}}}function ph(t,e){if(3!==t.nodeType)for(var n=t.firstChild;n;)ph(n,e),n=n.nextSibling;else e.push(t)}function dh(t,e,n,i){for(var r=0,o=null,s=-1,a=null,l=-1,c=0;c<e.length;c++){var u=r+e[c].length;if(r<=n&&n<=u&&(o=t[c],s=n-r),r<=i&&i<=u){a=t[c],l=i-r;break}r=u}if(o&&a){var h=document.createRange();return h.setStart(o,s),h.setEnd(a,l),h}return null}function fh(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){switch(i.label){case 0:t.addClass("is-loading"),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,e()];case 2:return n=i.sent(),[3,4];case 3:return t.removeClass("is-loading"),[7];case 4:return[2,n]}}))}))}function gh(t,e){t.setData("text/plain",e)}function mh(t,e){t.setData("text/plain",e),t.setData("text/uri-list",e)}function vh(t){t.addEventListener("mousemove",(function(e){var n=t.clientHeight,i=t.scrollHeight;if(i>n){var r=(e.clientY-t.getBoundingClientRect().y-30)/(n-60);t.scrollTop=(i-n)*Math.clamp(r,0,1)}}))}for(var yh=new Map,bh=0,wh="a abbr acronym b bdi bdo big br button canvas cite code data del dfn em embed i iframe img input ins kbd label map mark meter noscript object outputpicture progress q ruby s samp select small span strong sub sup svg textarea time u tt var video wbr".split(" ");bh<wh.length;bh++){var kh=wh[bh];yh.set(kh,!0)}for(var Ch=0,xh="address article aside blockquote details dialog dd div dl dt fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr li main nav ol p pre ul".split(" ");Ch<xh.length;Ch++){kh=xh[Ch];yh.set(kh,!1)}function Sh(t){return new Promise((function(e){return setTimeout(e,t)}))}var Eh=function(){function t(){this.promise=Promise.resolve()}return t.prototype.queue=function(t){var e=this.promise.then(t,t);return this.promise=e,e},t}();function Mh(){var t={promise:null,resolve:null,reject:null};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}function Lh(t,e,n){var i=this;void 0===n&&(n=e);var r=null,o=0,s=null;return function(){return D(i,void 0,Promise,(function(){var i=this;return A(this,(function(a){return s?[2,s]:r&&o>Date.now()?[2,r]:[2,s=D(i,void 0,void 0,(function(){return A(this,(function(i){switch(i.label){case 0:return o=Date.now()+n,[4,t()];case 1:return r=i.sent(),o=Date.now()+e,s=null,setTimeout((function(){o>Date.now()&&(r=null)}),e),[2,r]}}))}))]}))}))}}var Dh=function(){function t(t){this.running=!1,this.cancelled=!1;var e=t||{},n=e.onStart,i=e.onStop,r=e.onCancel;this.onStart=n||null,this.onStop=i||null,this.onCancel=r||null}return t.prototype.start=function(){this.running||(this.running=!0,this.onStart&&this.onStart())},t.prototype.stop=function(){this.running&&(this.running=!1,this.onStop&&this.onStop())},t.prototype.cancel=function(){this.stop(),this.cancelled||(this.cancelled=!0,this.onCancel&&this.onCancel())},t.prototype.isRunning=function(){return this.running},t.prototype.isCancelled=function(){return this.cancelled},t}(),Ah=function(){function t(t){this.items=[],this.promise=null,this.debug=!1,this.runnable=new Dh(t)}return t.prototype.addList=function(t){this.items=this.items.concat(t),this.notify(),this.debug&&console.log("addlist")},t.prototype.add=function(t){this.items.push(t),this.notify(),this.debug&&console.log("add")},t.prototype.remove=function(t){this.items.remove(t)},t.prototype.notify=function(){var t=this.promise;t&&(this.promise=null,setTimeout((function(){t&&t.resolve()}),0))},t.prototype.cancel=function(){this.runnable.cancel()},t.prototype.generator=function(){return F(this,arguments,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:t=this.runnable,n.label=1;case 1:return t.isCancelled()?[4,O(void 0)]:[3,3];case 2:return[2,n.sent()];case 3:return 0!==(e=this.items).length?[3,5]:(t.stop(),[4,O((this.promise=Mh()).promise)]);case 4:return n.sent(),[3,8];case 5:return t.start(),[4,O(e.shift())];case 6:return[4,n.sent()];case 7:n.sent(),n.label=8;case 8:return[3,1];case 9:return[2]}}))}))},t}();function Th(t){return F(this,arguments,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:e=0,n=t,i.label=1;case 1:return e<n.length?[4,O(n[e])]:[3,5];case 2:return[4,i.sent()];case 3:i.sent(),i.label=4;case 4:return e++,[3,1];case 5:return[2]}}))}))}function Ph(t,e){return F(this,arguments,(function(){var n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v;return A(this,(function(y){switch(y.label){case 0:i=(n=e||{}).batchSize,r=void 0===i?10:i,o=n.duration,s=void 0===o?5:o,a=n.maxDelay,l=void 0===a?100:a,c=n.beforePause,u=0,h=performance.now(),y.label=1;case 1:y.trys.push([1,9,10,15]),p=I(t),y.label=2;case 2:return[4,O(p.next())];case 3:return(d=y.sent()).done?[3,8]:[4,O(d.value)];case 4:return[4,y.sent()];case 5:return y.sent(),++u%r!=0?[3,7]:(f=performance.now())-h>s?(c&&c(f),[4,O(new Promise((function(t){return Ie(t,l)})))]):[3,7];case 6:y.sent(),h=performance.now(),y.label=7;case 7:return[3,2];case 8:return[3,15];case 9:return g=y.sent(),m={error:g},[3,15];case 10:return y.trys.push([10,,13,14]),d&&!d.done&&(v=p.return)?[4,O(v.call(p))]:[3,12];case 11:y.sent(),y.label=12;case 12:return[3,14];case 13:if(m)throw m.error;return[7];case 14:return[7];case 15:return[2]}}))}))}var Oh=function(){function t(){this.promises=[]}return t.prototype.add=function(t){this.promises.push(t())},t.prototype.addPromise=function(t){this.promises.push(t)},t.prototype.isEmpty=function(){return 0===this.promises.length},t.prototype.promise=function(){return Promise.all(this.promises)},t}(),Fh=hh("/lib/pdf.min.js",{after:function(){window.pdfjsLib.GlobalWorkerOptions.workerSrc="/lib/pdf.worker.min.js"}});function Ih(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,Fh.promise];case 1:return t.sent(),[2,window.pdfjsLib]}}))}))}var Nh=hh("/lib/codemirror/modes.min.js"),Bh=hh("/lib/mermaid.min.js",{after:function(){mermaid.initialize({startOnLoad:!1,theme:"base",themeCSS:"foreignObject{overflow: visible}#arrowhead,#sequencenumber,.cluster text,.label text,text,text.actor{fill:var(--text-normal)}line{stroke:var(--text-normal)}g>g>circle,g>g>path{stroke:var(--background-accent);color:var(--text-normal)}.label rect{display:none}.cluster rect{stroke-width:1px}.node circle,.node ellipse,.node path,.node polygon,.node rect{fill:var(--background-secondary-alt);stroke:var(--background-modifier-border);stroke-width:1px}.node .label{text-align:center}.node.clickable{cursor:pointer}.arrowheadPath{fill:var(--text-muted)}.edgePath .path{stroke:var(--text-muted);stroke-width:1.5px}.edgeLabel{background-color:var(--background-primary);text-align:center}.cluster rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border)}div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:var(--background-secondary);border:1px solid var(--interactive-accent);border-radius:2px;pointer-events:none;z-index:100}.actor{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);font-family:inherit!important}text.actor{stroke:none}.actor-line{stroke:var(--text-muted)}.messageLine0,.messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:var(--text-normal)}.sequenceNumber{fill:#fff}#crosshead path{fill:var(--text-normal)!important;stroke:var(--text-normal)!important}.messageText{fill:var(--text-normal);stroke:none;font-family:inherit!important}.labelBox{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt)}.labelText,.loopText{fill:var(--text-normal);stroke:none}.loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:var(--background-modifier-border)}.note{stroke:#645c10;fill:#f3edb3}.noteText{fill:#000;stroke:none;font-size:14px}.activation0,.activation1,.activation2{fill:var(--background-secondary) stroke: var(--text-muted)}.section{stroke:none;opacity:.2}.section0,.section2{fill:var(--text-accent)}.section1,.section3{fill:#fff;opacity:.2}.sectionTitle0,.sectionTitle1,.sectionTitle2,.sectionTitle3{fill:var(--text-normal)}.sectionTitle{text-anchor:start;font-size:11px;text-height:14px}.grid .tick{stroke:var(--background-primary-alt);opacity:.8;shape-rendering:crispEdges}.grid path{stroke-width:0}.today{fill:none;stroke:#d42;stroke-width:2px}.task{stroke-width:2}.taskText{text-anchor:middle}.taskText:not([font-size]){font-size:11px}.taskTextOutsideRight{fill:var(--text-normal);text-anchor:start;font-size:11px}.taskTextOutsideLeft{fill:var(--text-normal);text-anchor:end;font-size:11px}.task.clickable,g.clickable{cursor:pointer}.taskText.clickable,.taskTextOutsideLeft.clickable,.taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:700}.taskText0,.taskText1,.taskText2,.taskText3{fill:#fff}.task0,.task1,.task2,.task3{fill:var(--interactive-accent);stroke:var(--interactive-accent)}.taskTextOutside0,.taskTextOutside1,.taskTextOutside2,.taskTextOutside3{fill:var(--text-normal)}.active0,.active1,.active2,.active3,g.classGroup rect,g.stateGroup rect{fill:var(--background-primary-alt); stroke: var(--background-modifier-border)}g.classGroup rect,g.stateGroup rect{stroke:var(--background-modifier-border)}.activeText0,.activeText1,.activeText2,.activeText3{fill:var(--text-normal)!important}.done0,.done1,.done2,.done3{stroke:var(--text-muted);fill:#bbb;stroke-width:2}.doneText0,.doneText1,.doneText2,.doneText3{fill:var(--text-normal)!important}.crit0,.crit1,.crit2,.crit3{stroke:#b1361b;fill:#d42;stroke-width:2}.activeCrit0,.activeCrit1,.activeCrit2,.activeCrit3,.classLabel .box{stroke:#b1361b;fill:var(--background-secondary-alt);stroke-width:2}.classLabel .box{stroke:none;stroke-width:0;opacity:.5}.doneCrit0,.doneCrit1,.doneCrit2,.doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}.milestone{transform:rotate(45deg) scale(.8,.8)}.milestoneText{font-style:italic}.activeCritText0,.activeCritText1,.activeCritText2,.activeCritText3,.doneCritText0,.doneCritText1,.doneCritText2,.doneCritText3{fill:var(--text-normal)!important}.titleText{text-anchor:middle;font-size:18px;fill:var(--text-normal)}g.classGroup text{fill:var(--text-normal);stroke:none;font-size:11px}g.classGroup text .title{font-weight:bolder}#aggregationEnd,#aggregationStart,#compositionEnd,#compositionStart,.relation,g.classGroup line,g.stateGroup line{stroke:var(--background-modifier-border);stroke-width:1}.classLabel .label{font-size:11px}.relation{fill:none}.dashed-line{stroke-dasharray:3}#compositionEnd,#compositionStart{fill:var(--background-modifier-border)}#aggregationEnd,#aggregationStart{fill:var(--background-secondary-alt)}#dependencyEnd,#dependencyStart,#extensionEnd,#extensionStart{fill:var(--background-modifier-border);stroke:var(--background-modifier-border);stroke-width:1}.branch-label,.commit-id,.commit-msg{fill:#d3d3d3;color:#d3d3d3}.pieTitleText{text-anchor:middle;font-size:25px;fill:var(--text-normal)}.state-note text,g.stateGroup text{stroke:none;font-size:10px}g.stateGroup .state-title{font-weight:bolder;fill:var(--text-normal)}.transition{stroke:var(--background-modifier-border);stroke-width:1;fill:none}.stateGroup .composit{fill:#fff;border-bottom:1px}.stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}.state-note{stroke:#645c10;fill:#f3edb3}.state-note text{fill:#000}.stateLabel .box{stroke:none;stroke-width:0;fill:var(--background-secondary-alt);opacity:.5}.stateLabel text{fill:var(--text-normal);font-size:10px;font-weight:700}.node circle.state-start{fill:var(--text-normal);stroke:var(--text-normal)}.node circle.state-end{stroke:var(--background-primary);stroke-width:2}#statediagram-barbEnd,g.stateGroup text{fill:var(--background-modifier-border)}.statediagram-cluster rect{stroke-width:1px}.statediagram-cluster rect,.statediagram-state .divider{stroke:var(--background-modifier-border)}.statediagram-cluster rect,.statediagram-cluster.statediagram-cluster .inner{fill:var(--background-secondary-alt)}.statediagram-cluster.statediagram-cluster-alt .inner{fill:var(--background-secondary)}.cluster-label text,.node circle.state-end{fill:var(--text-normal)}.statediagram-state rect.divider{stroke-dasharray:10,10;fill:var(--background-secondary)}.note-edge{stroke-dasharray:5}.statediagram-note rect{fill:#f3edb3;stroke:#645c10;stroke-width:1px}.error-icon{fill:var(--background-modifier-error)}.error-text{fill:var(--text-error);stroke:var(--text-error)}",themeVariables:{primaryColor:"var(--background-primary-alt)",fontFamily:"var(--mermaid-font)",secondaryColor:"var(--background-secondary)",tertiaryColor:"var(--background-secondary-alt)",primaryBorderColor:"var(--background-modifier-border)",primaryTextColor:"var(--text-normal)",secondaryBorderColor:"var(--background-modifier-border)",secondaryTextColor:"var(--text-normal)",tertiaryBorderColor:"var(--background-modifier-border)",tertiaryTextColor:"var(--text-normal)",noteBkgColor:"var(--background-primary-alt)",noteTextColor:"var(--text-normal)",noteBorderColor:"var(--background-modifier-border)",lineColor:"var(--text-normal)",textColor:"var(--text-normal)",mainBkg:"var(--background-primary)",errorBkgColor:"var(--background-primary)",errorTextColor:"var(--text-error)",taskTextDarkColor:"var(--text)",nodeBorder:"var(--text-muted)",edgeLabelBackground:"var(--background-secondary)",activationBorderColor:"var(--background-modifier-border)",sequenceNumberColor:"var(--text-muted)",activeTaskBkgColor:"var(--background-primary-alt)",fillType2:"var(--background-primary-alt)",fillType3:"var(--background-primary-alt)",fillType4:"var(--background-primary-alt)",fillType5:"var(--background-primary-alt)",fillType6:"var(--background-primary-alt)",fillType7:"var(--background-primary-alt)",pie1:"#8dd3c7",pie2:"#ffffb3",pie3:"#bebada",pie4:"#fb8072",pie5:"#80b1d3",pie6:"#fdb462",pie7:"#b3de69",pie8:"#fccde5",pie9:"#d9d9d9",pie10:"#bc80bd",pie11:"#ccebc5",pie12:"#ffed6f"},flowchart:{useMaxWidth:!1},sequence:{useMaxWidth:!1},gantt:{useMaxWidth:!1,axisFormatter:[["%Y-%m-%d",function(t){return 1===t.getDay()}]]},journey:{useMaxWidth:!1},class:{useMaxWidth:!1},git:{useMaxWidth:!1},state:{useMaxWidth:!1},er:{useMaxWidth:!1},pie:{useMaxWidth:!1}})}});function Rh(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,Bh.promise];case 1:return t.sent(),[2,mermaid]}}))}))}var zh=hh("/lib/prism.min.js");function Hh(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,zh.promise];case 1:return t.sent(),[2,Prism]}}))}))}var Vh=hh("/lib/mathjax/tex-chtml-full.js",{before:function(){window.MathJax={tex:{inlineMath:[],displayMath:[],processEscapes:!1,processEnvironments:!1,processRefs:!1},startup:{typeset:!1},options:{renderActions:{addMenu:[0,"",""]},menuOptions:{settings:{renderer:"CHTML"}}}},localStorage.removeItem("MathJax-Menu-Settings")}});function qh(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,Vh.promise];case 1:return t.sent(),[2]}}))}))}function jh(t,e){return MathJax.tex2chtml(t,{display:e})}var Uh=null,_h=0,Wh=null,Gh=function(){var t=MathJax.chtmlStylesheet();Wh&&t.textContent===Wh.textContent||(Wh&&Wh.detach(),Wh=t,document.head.appendChild(t)),Uh.resolve(),Uh=null};function Kh(){return Uh||(Uh=Mh()),clearTimeout(_h),_h=window.setTimeout(Gh,100),Uh.promise}var $h=n(773),Yh=n.n($h),Jh=n(6630),Qh=n.n(Jh),Xh=n(939),Zh=n.n(Xh);const tp=Symbol.for("yaml.alias"),ep=Symbol.for("yaml.document"),np=Symbol.for("yaml.map"),ip=Symbol.for("yaml.pair"),rp=Symbol.for("yaml.scalar"),op=Symbol.for("yaml.seq"),sp=Symbol.for("yaml.node.type"),ap=t=>!!t&&"object"==typeof t&&t[sp]===tp,lp=t=>!!t&&"object"==typeof t&&t[sp]===ep,cp=t=>!!t&&"object"==typeof t&&t[sp]===np,up=t=>!!t&&"object"==typeof t&&t[sp]===ip,hp=t=>!!t&&"object"==typeof t&&t[sp]===rp,pp=t=>!!t&&"object"==typeof t&&t[sp]===op;function dp(t){if(t&&"object"==typeof t)switch(t[sp]){case np:case op:return!0}return!1}function fp(t){if(t&&"object"==typeof t)switch(t[sp]){case tp:case np:case rp:case op:return!0}return!1}class gp{constructor(t){Object.defineProperty(this,sp,{value:t})}}const mp=Symbol("break visit"),vp=Symbol("skip children"),yp=Symbol("remove node");function bp(t,e){if(lp(t)){wp(null,t.contents,e,Object.freeze([t]))===yp&&(t.contents=null)}else wp(null,t,e,Object.freeze([]))}function wp(t,e,n,i){let r;if("function"==typeof n?r=n(t,e,i):cp(e)?n.Map&&(r=n.Map(t,e,i)):pp(e)?n.Seq&&(r=n.Seq(t,e,i)):up(e)?n.Pair&&(r=n.Pair(t,e,i)):hp(e)?n.Scalar&&(r=n.Scalar(t,e,i)):ap(e)&&n.Alias&&(r=n.Alias(t,e,i)),fp(r)||up(r)){const e=i[i.length-1];if(dp(e))e.items[t]=r;else if(up(e))"key"===t?e.key=r:e.value=r;else{if(!lp(e)){const t=ap(e)?"alias":"scalar";throw new Error(`Cannot replace node with ${t} parent`)}e.contents=r}return wp(t,r,n,i)}if("symbol"!=typeof r)if(dp(e)){i=Object.freeze(i.concat(e));for(let t=0;t<e.items.length;++t){const r=wp(t,e.items[t],n,i);if("number"==typeof r)t=r-1;else{if(r===mp)return mp;r===yp&&(e.items.splice(t,1),t-=1)}}}else if(up(e)){i=Object.freeze(i.concat(e));const t=wp("key",e.key,n,i);if(t===mp)return mp;t===yp&&(e.key=null);const r=wp("value",e.value,n,i);if(r===mp)return mp;r===yp&&(e.value=null)}return r}bp.BREAK=mp,bp.SKIP=vp,bp.REMOVE=yp;const kp={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class Cp{constructor(t,e){this.marker=null,this.yaml=Object.assign({},Cp.defaultYaml,t),this.tags=Object.assign({},Cp.defaultTags,e)}atDocument(){const t=new Cp(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Cp.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Cp.defaultTags)}return t}add(t,e){this.atNextDocument&&(this.yaml={explicit:Cp.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Cp.defaultTags),this.atNextDocument=!1);const n=t.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(2!==n.length&&(e(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[t,i]=n;return this.tags[t]=i,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return e(0,"%YAML directive should contain exactly one part"),!1;const[t]=n;return"1.1"===t||"1.2"===t?(this.yaml.version=t,!0):(e(6,`Unsupported YAML version ${t}`,!0),!1)}default:return e(0,`Unknown directive ${i}`,!0),!1}}tagName(t,e){if("!"===t)return"!";if("!"!==t[0])return e(`Not a valid tag: ${t}`),null;if("<"===t[1]){const n=t.slice(2,-1);return"!"===n||"!!"===n?(e(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(">"!==t[t.length-1]&&e("Verbatim tags must end with a >"),n)}const[,n,i]=t.match(/^(.*!)([^!]*)$/);i||e(`The ${t} tag has no suffix`);const r=this.tags[n];return r?r+decodeURIComponent(i):"!"===n?t:(e(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[e,n]of Object.entries(this.tags))if(t.startsWith(n))return e+t.substring(n.length).replace(/[!,[\]{}]/g,(t=>kp[t]));return"!"===t[0]?t:`!<${t}>`}toString(t){const e=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let i;if(t&&n.length>0&&fp(t.contents)){const e={};bp(t.contents,((t,n)=>{fp(n)&&n.tag&&(e[n.tag]=!0)})),i=Object.keys(e)}else i=[];for(const[r,o]of n)"!!"===r&&"tag:yaml.org,2002:"===o||t&&!i.some((t=>t.startsWith(o)))||e.push(`%TAG ${r} ${o}`);return e.join("\n")}}function xp(t,e,n){if(Array.isArray(t))return t.map(((t,e)=>xp(t,String(e),n)));if(t&&"function"==typeof t.toJSON){if(!n)return t.toJSON(e);const i=n.anchors&&n.anchors.get(t);i&&(n.onCreate=t=>{i.res=t,delete n.onCreate});const r=t.toJSON(e,n);return i&&n.onCreate&&n.onCreate(r),r}return n&&n.keep||"bigint"!=typeof t?t:Number(t)}Cp.defaultYaml={explicit:!1,version:"1.2"},Cp.defaultTags={"!!":"tag:yaml.org,2002:"};class Sp extends gp{constructor(t){super(tp),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}toJSON(t,e){if(!e)return xp(this.source,"string"==typeof t?t:null,e);const{anchors:n,maxAliasCount:i}=e,r=n&&n.get(this.source);if(!r||void 0===r.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(i>=0&&(r.count+=1,0===r.aliasCount&&(r.aliasCount=Ep(this.source,n)),r.count*r.aliasCount>i)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return r.res}toString({anchors:t,doc:e,implicitKey:n,inStringifyKey:i},r,o){let s=Object.keys(t).find((e=>t[e]===this.source));if(!s&&i&&(s=e.anchors.getName(this.source)||e.anchors.newName()),s)return`*${s}${n?" ":""}`;const a=e.anchors.getName(this.source)?"Alias node must be after source node":"Source node not found for alias node";throw new Error(`${a} [${this.range}]`)}}function Ep(t,e){if(ap(t)){const n=e&&e.get(t.source);return n?n.count*n.aliasCount:0}if(dp(t)){let n=0;for(const i of t.items){const t=Ep(i,e);t>n&&(n=t)}return n}if(up(t)){const n=Ep(t.key,e),i=Ep(t.value,e);return Math.max(n,i)}return 1}const Mp=t=>!t||"function"!=typeof t&&"object"!=typeof t;class Lp extends gp{constructor(t){super(rp),this.value=t}toJSON(t,e){return e&&e.keep?this.value:xp(this.value,t,e)}toString(){return String(this.value)}}Lp.BLOCK_FOLDED="BLOCK_FOLDED",Lp.BLOCK_LITERAL="BLOCK_LITERAL",Lp.PLAIN="PLAIN",Lp.QUOTE_DOUBLE="QUOTE_DOUBLE",Lp.QUOTE_SINGLE="QUOTE_SINGLE";function Dp(t,e,n){var i,r;if(fp(t))return t;if(up(t)){const e=null===(r=(i=n.schema.map).createNode)||void 0===r?void 0:r.call(i,n.schema,null,n);return e.items.push(t),e}(t instanceof String||t instanceof Number||t instanceof Boolean||"function"==typeof BigInt&&t instanceof BigInt)&&(t=t.valueOf());const{onAlias:o,onTagObj:s,prevObjects:a}=n,{map:l,seq:c,tags:u}=n.schema;e&&e.startsWith("!!")&&(e="tag:yaml.org,2002:"+e.slice(2));let h=function(t,e,n){if(e){const t=n.filter((t=>t.tag===e)),i=t.find((t=>!t.format))||t[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find((e=>e.identify&&e.identify(t)&&!e.format))}(t,e,u);if(!h){if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t||"object"!=typeof t)return new Lp(t);h=t instanceof Map?l:Symbol.iterator in Object(t)?c:l}s&&(s(h),delete n.onTagObj);const p={value:void 0,node:void 0};if(t&&"object"==typeof t){const e=a.get(t);if(e)return o(e);p.value=t,a.set(t,p)}const d=(null==h?void 0:h.createNode)?h.createNode(n.schema,t,n):new Lp(t);return e&&(d.tag=e),p.node=d,d}function Ap(t,e,n){return n?n.includes("\n")?`${t}\n`+n.replace(/^/gm,`${e||""}#`):t.endsWith(" ")?`${t}#${n}`:`${t} #${n}`:t}const Tp="flow",Pp="block",Op="quoted";function Fp(t,e,n="flow",{indentAtStart:i,lineWidth:r=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!r||r<0)return t;const l=Math.max(1+o,1+r-e.length);if(t.length<=l)return t;const c=[],u={};let h,p,d=r-e.length;"number"==typeof i&&(i>r-Math.max(2,o)?c.push(0):d=r-i);let f,g=!1,m=-1,v=-1,y=-1;for(n===Pp&&(m=Ip(t,m),-1!==m&&(d=m+l));f=t[m+=1];){if(n===Op&&"\\"===f){switch(v=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}y=m}if("\n"===f)n===Pp&&(m=Ip(t,m)),d=m+l,h=void 0;else{if(" "===f&&p&&" "!==p&&"\n"!==p&&"\t"!==p){const e=t[m+1];e&&" "!==e&&"\n"!==e&&"\t"!==e&&(h=m)}if(m>=d)if(h)c.push(h),d=h+l,h=void 0;else if(n===Op){for(;" "===p||"\t"===p;)p=f,f=t[m+=1],g=!0;const e=m>y+1?m-2:v-1;if(u[e])return t;c.push(e),u[e]=!0,d=e+l,h=void 0}else g=!0}p=f}if(g&&a&&a(),0===c.length)return t;s&&s();let b=t.slice(0,c[0]);for(let i=0;i<c.length;++i){const r=c[i],o=c[i+1]||t.length;0===r?b=`\n${e}${t.slice(0,o)}`:(n===Op&&u[r]&&(b+=`${t[r]}\\`),b+=`\n${e}${t.slice(r+1,o)}`)}return b}function Ip(t,e){let n=t[e+1];for(;" "===n||"\t"===n;){do{n=t[e+=1]}while(n&&"\n"!==n);n=t[e+1]}return e}const Np=t=>({indentAtStart:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Bp=t=>/^(%|---|\.\.\.)/m.test(t);function Rp(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:i}=e,r=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(Bp(t)?"  ":"");let s="",a=0;for(let t=0,e=n[t];e;e=n[++t])if(" "===e&&"\\"===n[t+1]&&"n"===n[t+2]&&(s+=n.slice(a,t)+"\\ ",t+=1,a=t,e="\\"),"\\"===e)switch(n[t+1]){case"u":{s+=n.slice(a,t);const e=n.substr(t+2,4);switch(e){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:"00"===e.substr(0,2)?s+="\\x"+e.substr(2):s+=n.substr(t,6)}t+=5,a=t+1}break;case"n":if(i||'"'===n[t+2]||n.length<r)t+=1;else{for(s+=n.slice(a,t)+"\n\n";"\\"===n[t+2]&&"n"===n[t+3]&&'"'!==n[t+4];)s+="\n",t+=2;s+=o," "===n[t+2]&&(s+="\\"),t+=1,a=t+1}break;default:t+=1}return s=a?s+n.slice(a):n,i?s:Fp(s,o,Op,Np(e))}function zp(t,e){if(e.implicitKey){if(/\n/.test(t))return Rp(t,e)}else if(/[ \t]\n|\n[ \t]/.test(t))return Rp(t,e);const n=e.indent||(Bp(t)?"  ":""),i="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return e.implicitKey?i:Fp(i,n,Tp,Np(e))}function Hp({comment:t,type:e,value:n},i,r,o){if(/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Rp(n,i);const s=i.indent||(i.forceBlockIndent||Bp(n)?"  ":""),a=s?"2":"1",l=e!==Lp.BLOCK_FOLDED&&(e===Lp.BLOCK_LITERAL||!function(t,e,n){if(!e||e<0)return!1;const i=e-n,r=t.length;if(r<=i)return!1;for(let e=0,n=0;e<r;++e)if("\n"===t[e]){if(e-n>i)return!0;if(n=e+1,r-n<=i)return!1}return!0}(n,i.options.lineWidth,s.length));let c=l?"|":">";if(!n)return c+"\n";let u="",h="";if(n=n.replace(/[\n\t ]*$/,(t=>{const e=t.indexOf("\n");return-1===e?c+="-":n!==t&&e===t.length-1||(c+="+",o&&o()),h=t.replace(/\n$/,""),""})).replace(/^[\n ]*/,(t=>{-1!==t.indexOf(" ")&&(c+=a);const e=t.match(/ +$/);return e?(u=t.slice(0,-e[0].length),e[0]):(u=t,"")})),h&&(h=h.replace(/\n+(?!\n|$)/g,`$&${s}`)),u&&(u=u.replace(/\n+/g,`$&${s}`)),t&&(c+=" #"+t.replace(/ ?[\r\n]+/g," "),r&&r()),!n)return`${c}${a}\n${s}${h}`;if(l)return n=n.replace(/\n+/g,`$&${s}`),`${c}\n${s}${u}${n}${h}`;n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${s}`);const p=Fp(`${u}${n}${h}`,s,Pp,Np(i));return`${c}\n${s}${p}`}function Vp(t,e,n,i){const{implicitKey:r,inFlow:o}=e,s="string"==typeof t.value?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==Lp.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=Lp.QUOTE_DOUBLE);const l=t=>{switch(t){case Lp.BLOCK_FOLDED:case Lp.BLOCK_LITERAL:return r||o?Rp(s.value,e):Hp(s,e,n,i);case Lp.QUOTE_DOUBLE:return Rp(s.value,e);case Lp.QUOTE_SINGLE:return zp(s.value,e);case Lp.PLAIN:return function(t,e,n,i){var r;const{comment:o,type:s,value:a}=t,{actualString:l,implicitKey:c,indent:u,inFlow:h}=e;if(c&&/[\n[\]{},]/.test(a)||h&&/[[\]{},]/.test(a))return Rp(a,e);if(!a||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a)){const r=-1!==a.indexOf('"'),o=-1!==a.indexOf("'");let s;return s=r&&!o?zp:o&&!r?Rp:e.options.singleQuote?zp:Rp,c||h||-1===a.indexOf("\n")?s(a,e):Hp(t,e,n,i)}if(!c&&!h&&s!==Lp.PLAIN&&-1!==a.indexOf("\n"))return Hp(t,e,n,i);if(""===u&&Bp(a))return e.forceBlockIndent=!0,Hp(t,e,n,i);const p=a.replace(/\n+/g,`$&\n${u}`);if(l)for(const t of e.doc.schema.tags)if(t.default&&"tag:yaml.org,2002:str"!==t.tag&&(null===(r=t.test)||void 0===r?void 0:r.test(p)))return Rp(a,e);const d=c?p:Fp(p,u,Tp,Np(e));return!o||h||-1===d.indexOf("\n")&&-1===o.indexOf("\n")?d:(n&&n(),function(t,e,n){return n?`#${n.replace(/[\s\S]^/gm,`$&${e}#`)}\n${e}${t}`:t}(d,u,o))}(s,e,n,i);default:return null}};let c=l(a);if(null===c){const{defaultKeyType:t,defaultStringType:n}=e.options,i=r&&t||n;if(c=l(i),null===c)throw new Error(`Unsupported default string type ${i}`)}return c}const qp=(t,e)=>({anchors:Object.create(null),doc:t,indent:"",indentStep:"number"==typeof e.indent?" ".repeat(e.indent):"  ",options:Object.assign({defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:!1,trueStr:"true"},e)});function jp(t,e,n,i){if(up(t))return t.toString(e,n,i);if(ap(t))return t.toString(e);let r;const o=fp(t)?t:e.doc.createNode(t,{onTagObj:t=>r=t});r||(r=function(t,e){if(e.tag){const n=t.filter((t=>t.tag===e.tag));if(n.length>0)return n.find((t=>t.format===e.format))||n[0]}let n,i;if(hp(e)){i=e.value;const r=t.filter((t=>t.identify&&t.identify(i)));n=r.find((t=>t.format===e.format))||r.find((t=>!t.format))}else i=e,n=t.find((t=>t.nodeClass&&i instanceof t.nodeClass));if(!n){const t=i&&i.constructor?i.constructor.name:typeof i;throw new Error(`Tag not resolved for ${t} value`)}return n}(e.doc.schema.tags,o));const s=function(t,e,{anchors:n,doc:i}){const r=[],o=i.anchors.getName(t);return o&&(n[o]=t,r.push(`&${o}`)),t.tag?r.push(i.directives.tagString(t.tag)):e.default||r.push(i.directives.tagString(e.tag)),r.join(" ")}(o,r,e);s.length>0&&(e.indentAtStart=(e.indentAtStart||0)+s.length+1);const a="function"==typeof r.stringify?r.stringify(o,e,n,i):hp(o)?Vp(o,e,n,i):o.toString(e,n,i);return s?hp(o)||"{"===a[0]||"["===a[0]?`${s} ${a}`:`${s}\n${e.indent}${a}`:a}function Up(t,e,n){let i=n;for(let t=e.length-1;t>=0;--t){const n=e[t];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const t=[];t[n]=i,i=t}else{const t={};Object.defineProperty(t,"symbol"==typeof n?n:String(n),{value:i,writable:!0,enumerable:!0,configurable:!0}),i=t}}return Dp(i,void 0,{onAlias(){throw new Error("Repeated objects are not supported here")},prevObjects:new Map,schema:t})}const _p=t=>null==t||"object"==typeof t&&!!t[Symbol.iterator]().next().done;class Wp extends gp{constructor(t,e){super(t),Object.defineProperty(this,"schema",{value:e,configurable:!0,enumerable:!1,writable:!0})}addIn(t,e){if(_p(t))this.add(e);else{const[n,...i]=t,r=this.get(n,!0);if(dp(r))r.addIn(i,e);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`);this.set(n,Up(this.schema,i,e))}}}deleteIn([t,...e]){if(0===e.length)return this.delete(t);const n=this.get(t,!0);if(dp(n))return n.deleteIn(e);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${e}`)}getIn([t,...e],n){const i=this.get(t,!0);return 0===e.length?!n&&hp(i)?i.value:i:dp(i)?i.getIn(e,n):void 0}hasAllNullValues(t){return this.items.every((e=>{if(!e||fp(e))return!1;const n=e.value;return null==n||t&&hp(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn([t,...e]){if(0===e.length)return this.has(t);const n=this.get(t,!0);return!!dp(n)&&n.hasIn(e)}setIn([t,...e],n){if(0===e.length)this.set(t,n);else{const i=this.get(t,!0);if(dp(i))i.setIn(e,n);else{if(void 0!==i||!this.schema)throw new Error(`Expected YAML collection at ${t}. Remaining path: ${e}`);this.set(t,Up(this.schema,e,n))}}}_toString(t,{blockItem:e,flowChars:n,itemIndent:i},r,o){const{indent:s,indentStep:a}=t,l=this.flow||t.inFlow;l&&(i+=a),t=Object.assign({},t,{indent:i,inFlow:l,type:null});let c=!1,u=!1;const h=this.items.reduce(((e,n,r)=>{let o=null;if(fp(n)||up(n)){if(!c&&n.spaceBefore&&e.push({type:"comment",str:""}),n.commentBefore)for(const t of n.commentBefore.match(/^.*$/gm))e.push({type:"comment",str:`#${t}`});n.comment&&(o=n.comment);const t=n;l&&(!c&&n.spaceBefore||n.commentBefore||n.comment||t.key&&(t.key.commentBefore||t.key.comment)||t.value&&(t.value.commentBefore||t.value.comment))&&(u=!0)}c=!1;let s=jp(n,t,(()=>o=null),(()=>c=!0));return l&&!u&&s.includes("\n")&&(u=!0),l&&r<this.items.length-1&&(s+=","),s=Ap(s,i,o),c&&(o||l)&&(c=!1),e.push({type:"item",str:s}),e}),[]);let p;if(0===h.length)p=n.start+n.end;else if(l){const{start:t,end:e}=n,i=h.map((t=>t.str));if(u||i.reduce(((t,e)=>t+e.length+2),2)>Wp.maxFlowStringSingleLineLength){p=t;for(const t of i)p+=t?`\n${a}${s}${t}`:"\n";p+=`\n${s}${e}`}else p=`${t} ${i.join(" ")} ${e}`}else{const t=h.map(e);p=t.shift()||"";for(const e of t)p+=e?`\n${s}${e}`:"\n"}return this.comment?(p+="\n"+this.comment.replace(/^/gm,`${s}#`),r&&r()):c&&o&&o(),p}}function Gp(t,e){"debug"!==t&&"warn"!==t||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(e):console.warn(e))}function Kp(t,e,n){const i=Dp(t,void 0,n),r=Dp(e,void 0,n);return new Yp(i,r)}Wp.maxFlowStringSingleLineLength=60;function $p(t,e,n){if(!ap(n)||!cp(n.source))throw new Error("Merge sources must be map aliases");const i=n.source.toJSON(null,t,Map);for(const[t,n]of i)e instanceof Map?e.has(t)||e.set(t,n):e instanceof Set?e.add(t):Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0});return e}class Yp extends gp{constructor(t,e=null){super(ip),this.key=t,this.value=e}get commentBefore(){return fp(this.key)?this.key.commentBefore:void 0}set commentBefore(t){if(null==this.key&&(this.key=new Lp(null)),!fp(this.key)){throw new Error("Pair.commentBefore is an alias for Pair.key.commentBefore. To set it, the key must be a Node.")}this.key.commentBefore=t}get spaceBefore(){return fp(this.key)?this.key.spaceBefore:void 0}set spaceBefore(t){if(null==this.key&&(this.key=new Lp(null)),!fp(this.key)){throw new Error("Pair.spaceBefore is an alias for Pair.key.spaceBefore. To set it, the key must be a Node.")}this.key.spaceBefore=t}addToJSMap(t,e){if(t&&t.doc.schema.merge&&(t=>t===Yp.MERGE_KEY||hp(t)&&t.value===Yp.MERGE_KEY&&(!t.type||t.type===Lp.PLAIN))(this.key))if(pp(this.value))for(const n of this.value.items)$p(t,e,n);else if(Array.isArray(this.value))for(const n of this.value)$p(t,e,n);else $p(t,e,this.value);else{const n=xp(this.key,"",t);if(e instanceof Map){const i=xp(this.value,n,t);e.set(n,i)}else if(e instanceof Set)e.add(n);else{const i=function(t,e,n){if(null===e)return"";if("object"!=typeof e)return String(e);if(fp(t)&&n&&n.doc){const e=qp(n.doc,{});e.inFlow=!0,e.inStringifyKey=!0;const i=t.toString(e);if(!n.mapKeyWarned){let t=JSON.stringify(i);t.length>40&&(t=t.substring(0,36)+'..."'),Gp(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${t}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}(this.key,n,t),r=xp(this.value,i,t);i in e?Object.defineProperty(e,i,{value:r,writable:!0,enumerable:!0,configurable:!0}):e[i]=r}}return e}toJSON(t,e){const n=e&&e.mapAsMap?new Map:{};return this.addToJSMap(e,n)}toString(t,e,n){if(!t||!t.doc)return JSON.stringify(this);const{allNullValues:i,doc:r,indent:o,indentStep:s,options:{indentSeq:a,simpleKeys:l}}=t;let{key:c,value:u}=this,h=fp(c)&&c.comment||null;if(l){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(dp(c)){throw new Error("With simple keys, collection cannot be used as a key value")}}let p=!l&&(!c||h&&null==u||dp(c)||(hp(c)?c.type===Lp.BLOCK_FOLDED||c.type===Lp.BLOCK_LITERAL:"object"==typeof c));t=Object.assign({},t,{allNullValues:!1,implicitKey:!p&&(l||!i),indent:o+s});let d=!1,f=jp(c,t,(()=>h=null),(()=>d=!0));if(!p&&!t.inFlow&&f.length>1024){if(l)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(i&&(!l||t.inFlow)||null==u&&(p||t.inFlow))return f=Ap(f,t.indent,h),this.comment?(h&&!this.comment.includes("\n")?f+=`\n${t.indent||""}#${this.comment}`:f=Ap(f,t.indent,this.comment),e&&e()):d&&!h&&n&&n(),t.inFlow&&!p?f:`? ${f}`;f=p?`? ${Ap(f,t.indent,h)}\n${o}:`:Ap(`${f}:`,t.indent,h),this.comment&&(!h||p||this.comment.includes("\n")?f=Ap(f,t.indent,this.comment):f+=`\n${t.indent||""}#${this.comment}`,e&&e());let g="",m=null;if(fp(u)){if(u.spaceBefore&&(g="\n"),u.commentBefore){g+=`\n${u.commentBefore.replace(/^/gm,`${t.indent}#`)}`}m=u.comment}else u&&"object"==typeof u&&(u=r.createNode(u));t.implicitKey=!1,p||h||this.comment||!hp(u)||(t.indentAtStart=f.length+1),d=!1,a||!(s.length>=2)||t.inFlow||p||!pp(u)||u.flow||u.tag||r.anchors.getName(u)||(t.indent=t.indent.substr(2));const v=jp(u,t,(()=>m=null),(()=>d=!0));let y=" ";if(g||h||this.comment)y=`${g}\n${t.indent}`;else if(!p&&dp(u)){("["===v[0]||"{"===v[0])&&!v.includes("\n")||(y=`\n${t.indent}`)}else"\n"===v[0]&&(y="");return d&&!m&&n&&n(),Ap(f+y+v,t.indent,m)}}Yp.MERGE_KEY="<<";const Jp={anchorPrefix:"a",intAsBigInt:!1,keepUndefined:!1,logLevel:"warn",prettyErrors:!0,strict:!0,version:"1.2"};class Qp extends Wp{constructor(t){super(op,t),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(t){this.items.push(t)}delete(t){const e=Xp(t);if("number"!=typeof e)return!1;return this.items.splice(e,1).length>0}get(t,e){const n=Xp(t);if("number"!=typeof n)return;const i=this.items[n];return!e&&hp(i)?i.value:i}has(t){const e=Xp(t);return"number"==typeof e&&e<this.items.length}set(t,e){const n=Xp(t);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${t}.`);const i=this.items[n];hp(i)&&Mp(e)?i.value=e:this.items[n]=e}toJSON(t,e){const n=[];e&&e.onCreate&&e.onCreate(n);let i=0;for(const t of this.items)n.push(xp(t,String(i++),e));return n}toString(t,e,n){return t?super._toString(t,{blockItem:t=>"comment"===t.type?t.str:`- ${t.str}`,flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  "},e,n):JSON.stringify(this)}}function Xp(t){let e=hp(t)?t.value:t;return e&&"string"==typeof e&&(e=Number(e)),"number"==typeof e&&Number.isInteger(e)&&e>=0?e:null}class Zp{constructor(t){this.map=Object.create(null),this.prefix=t}createAlias(t,e){return this.setAnchor(t,e),new Sp(t)}createMergePair(...t){const e=new Lp(Yp.MERGE_KEY),n=t.map((t=>{if(ap(t)){if(cp(t.source))return t}else if(cp(t))return this.createAlias(t);throw new Error("Merge sources must be Map nodes or their Aliases")}));if(1===n.length)return new Yp(e,n[0]);const i=new Qp;return i.items=n,new Yp(e,i)}getName(t){return Object.keys(this.map).find((e=>this.map[e]===t))}getNames(){return Object.keys(this.map)}getNode(t){return this.map[t]}newName(t){t||(t=this.prefix);const e=Object.keys(this.map);for(let n=1;;++n){const i=`${t}${n}`;if(!e.includes(i))return i}}setAnchor(t,e){const{map:n}=this;if(!t)return e?(delete n[e],e):null;if(!hp(t)&&!dp(t))throw new Error("Anchors may only be set for Scalar, Seq and Map nodes");if(e){if(/[\x00-\x19\s,[\]{}]/.test(e))throw new Error("Anchor names must not contain whitespace or control characters");const i=n[e];i&&i!==t&&(n[this.newName(e)]=i)}const i=Object.keys(n).find((e=>n[e]===t));if(i){if(!e||i===e)return i;delete n[i]}else e||(e=this.newName());return n[e]=t,e}}function td({format:t,minFractionDigits:e,tag:n,value:i}){if("bigint"==typeof i)return String(i);const r="number"==typeof i?i:Number(i);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let o=JSON.stringify(i);if(!t&&e&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(o)){let t=o.indexOf(".");t<0&&(t=o.length,o+=".");let n=e-(o.length-t-1);for(;n-- >0;)o+="0"}return o}function ed(t,e){const n=hp(e)?e.value:e;for(const i of t)if(up(i)){if(i.key===e||i.key===n)return i;if(hp(i.key)&&i.key.value===n)return i}}class nd extends Wp{constructor(t){super(np,t),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(t,e){let n;n=up(t)?t:new Yp(t&&"object"==typeof t&&"key"in t?t.key:t,t.value);const i=ed(this.items,n.key),r=this.schema&&this.schema.sortMapEntries;if(i){if(!e)throw new Error(`Key ${n.key} already set`);hp(i.value)&&Mp(n.value)?i.value.value=n.value:i.value=n.value}else if(r){const t=this.items.findIndex((t=>r(n,t)<0));-1===t?this.items.push(n):this.items.splice(t,0,n)}else this.items.push(n)}delete(t){const e=ed(this.items,t);if(!e)return!1;return this.items.splice(this.items.indexOf(e),1).length>0}get(t,e){const n=ed(this.items,t),i=n&&n.value;return!e&&hp(i)?i.value:i}has(t){return!!ed(this.items,t)}set(t,e){this.add(new Yp(t,e),!0)}toJSON(t,e,n){const i=n?new n:e&&e.mapAsMap?new Map:{};e&&e.onCreate&&e.onCreate(i);for(const t of this.items)t.addToJSMap(e,i);return i}toString(t,e,n){if(!t)return JSON.stringify(this);for(const t of this.items)if(!up(t))throw new Error(`Map items must all be pairs; found ${JSON.stringify(t)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),super._toString(t,{blockItem:t=>t.str,flowChars:{start:"{",end:"}"},itemIndent:t.indent||""},e,n)}}const id={collection:"map",createNode:function(t,e,n){const{keepUndefined:i,replacer:r}=n,o=new nd(t),s=(t,s)=>{if("function"==typeof r)s=r.call(e,t,s);else if(Array.isArray(r)&&!r.includes(t))return;(void 0!==s||i)&&o.items.push(Kp(t,s,n))};if(e instanceof Map)for(const[t,n]of e)s(t,n);else if(e&&"object"==typeof e)for(const t of Object.keys(e))s(t,e[t]);return"function"==typeof t.sortMapEntries&&o.items.sort(t.sortMapEntries),o},default:!0,nodeClass:nd,tag:"tag:yaml.org,2002:map",resolve:(t,e)=>(cp(t)||e("Expected a mapping for this tag"),t)};const rd={collection:"seq",createNode:function(t,e,n){const{replacer:i}=n,r=new Qp(t);if(e&&Symbol.iterator in Object(e)){let t=0;for(let o of e){if("function"==typeof i){const n=e instanceof Set?o:String(t++);o=i.call(e,n,o)}r.items.push(Dp(o,void 0,n))}}return r},default:!0,nodeClass:Qp,tag:"tag:yaml.org,2002:seq",resolve:(t,e)=>(pp(t)||e("Expected a sequence for this tag"),t)},od=[id,rd,{identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:(t,e,n,i)=>Vp(t,e=Object.assign({actualString:!0},e),n,i)}],sd=t=>"bigint"==typeof t||Number.isInteger(t),ad=(t,e,n,{intAsBigInt:i})=>i?BigInt(t):parseInt(t.substring(e),n);function ld(t,e,n){const{value:i}=t;return sd(i)&&i>=0?n+i.toString(e):td(t)}const cd={identify:t=>null==t,createNode:()=>new Lp(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Lp(null),stringify:({source:t},e)=>t&&cd.test.test(t)?t:e.options.nullStr},ud={identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Lp("t"===t[0]||"T"===t[0]),stringify({source:t,value:e},n){if(t&&ud.test.test(t)){if(e===("t"===t[0]||"T"===t[0]))return t}return e?n.options.trueStr:n.options.falseStr}},hd={identify:t=>sd(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>ad(t,2,8,n),stringify:t=>ld(t,8,"0o")},pd={identify:sd,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>ad(t,0,10,n),stringify:td},dd={identify:t=>sd(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>ad(t,2,16,n),stringify:t=>ld(t,16,"0x")},fd={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:td},gd={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify:({value:t})=>Number(t).toExponential()},md={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new Lp(parseFloat(t)),n=t.indexOf(".");return-1!==n&&"0"===t[t.length-1]&&(e.minFractionDigits=t.length-n-1),e},stringify:td},vd=od.concat([cd,ud,hd,pd,dd,fd,gd,md]);function yd(t){return"bigint"==typeof t||Number.isInteger(t)}const bd=({value:t})=>JSON.stringify(t),wd=[id,rd].concat([{identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:bd},{identify:t=>null==t,createNode:()=>new Lp(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:bd},{identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>"true"===t,stringify:bd},{identify:yd,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>yd(t)?t.toString():JSON.stringify(t)},{identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:bd}],{default:!0,tag:"",test:/^/,resolve:(t,e)=>(e(`Unresolved plain scalar ${JSON.stringify(t)}`),t)}),kd={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if("function"==typeof Buffer)return Buffer.from(t,"base64");if("function"==typeof atob){const e=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(e.length);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t);return n}return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},i,r,o){const s=n;let a;if("function"==typeof Buffer)a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let t="";for(let e=0;e<s.length;++e)t+=String.fromCharCode(s[e]);a=btoa(t)}}if(e||(e=Lp.BLOCK_LITERAL),e!==Lp.QUOTE_DOUBLE){const t=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),n=Math.ceil(a.length/t),r=new Array(n);for(let e=0,i=0;e<n;++e,i+=t)r[e]=a.substr(i,t);a=r.join(e===Lp.BLOCK_LITERAL?"\n":" ")}return Vp({comment:t,type:e,value:a},i,r,o)}};function Cd(t,e){if(pp(t))for(let n=0;n<t.items.length;++n){let i=t.items[n];if(!up(i)){if(cp(i)){i.items.length>1&&e("Each pair must have its own sequence indicator");const t=i.items[0]||new Yp(null);i.commentBefore&&(t.commentBefore=t.commentBefore?`${i.commentBefore}\n${t.commentBefore}`:i.commentBefore),i.comment&&(t.comment=t.comment?`${i.comment}\n${t.comment}`:i.comment),i=t}t.items[n]=up(i)?i:new Yp(i)}}else e("Expected a sequence for this tag");return t}function xd(t,e,n){const{replacer:i}=n,r=new Qp(t);r.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let t of e){let s,a;if("function"==typeof i&&(t=i.call(e,String(o++),t)),Array.isArray(t)){if(2!==t.length)throw new TypeError(`Expected [key, value] tuple: ${t}`);s=t[0],a=t[1]}else if(t&&t instanceof Object){const e=Object.keys(t);if(1!==e.length)throw new TypeError(`Expected { key: value } tuple: ${t}`);s=e[0],a=t[s]}else s=t;r.items.push(Kp(s,a,n))}return r}const Sd={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Cd,createNode:xd};class Ed extends Qp{constructor(){super(),this.add=nd.prototype.add.bind(this),this.delete=nd.prototype.delete.bind(this),this.get=nd.prototype.get.bind(this),this.has=nd.prototype.has.bind(this),this.set=nd.prototype.set.bind(this),this.tag=Ed.tag}toJSON(t,e){if(!e)return super.toJSON(t);const n=new Map;e&&e.onCreate&&e.onCreate(n);for(const t of this.items){let i,r;if(up(t)?(i=xp(t.key,"",e),r=xp(t.value,i,e)):i=xp(t,"",e),n.has(i))throw new Error("Ordered maps must not include duplicate keys");n.set(i,r)}return n}}Ed.tag="tag:yaml.org,2002:omap";const Md={collection:"seq",identify:t=>t instanceof Map,nodeClass:Ed,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=Cd(t,e),i=[];for(const{key:t}of n.items)hp(t)&&(i.includes(t.value)?e(`Ordered maps must not include duplicate keys: ${t.value}`):i.push(t.value));return Object.assign(new Ed,n)},createNode(t,e,n){const i=xd(t,e,n),r=new Ed;return r.items=i.items,r}};class Ld extends nd{constructor(t){super(t),this.tag=Ld.tag}add(t){let e;e=up(t)?t:"object"==typeof t&&"key"in t&&"value"in t&&null===t.value?new Yp(t.key,null):new Yp(t,null);ed(this.items,e.key)||this.items.push(e)}get(t,e){const n=ed(this.items,t);return!e&&up(n)?hp(n.key)?n.key.value:n.key:n}set(t,e){if("boolean"!=typeof e)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof e);const n=ed(this.items,t);n&&!e?this.items.splice(this.items.indexOf(n),1):!n&&e&&this.items.push(new Yp(t))}toJSON(t,e){return super.toJSON(t,e,Set)}toString(t,e,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),e,n);throw new Error("Set items must all have null values")}}Ld.tag="tag:yaml.org,2002:set";const Dd={collection:"map",identify:t=>t instanceof Set,nodeClass:Ld,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(cp(t)){if(t.hasAllNullValues(!0))return Object.assign(new Ld,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,n){const{replacer:i}=n,r=new Ld(t);if(e&&Symbol.iterator in Object(e))for(let t of e)"function"==typeof i&&(t=i.call(e,t,t)),r.items.push(Kp(t,null,n));return r}};function Ad(t,e){const n=t[0],i="-"===n||"+"===n?t.substring(1):t,r=t=>e?BigInt(t):Number(t),o=i.replace(/_/g,"").split(":").reduce(((t,e)=>t*r(60)+r(e)),r(0));return"-"===n?r(-1)*o:o}function Td(t){let{value:e}=t,n=t=>t;if("bigint"==typeof e)n=t=>BigInt(t);else if(isNaN(e)||!isFinite(e))return td(t);let i="";e<0&&(i="-",e*=n(-1));const r=n(60),o=[e%r];return e<60?o.unshift(0):(e=(e-o[0])/r,o.unshift(e%r),e>=60&&(e=(e-o[0])/r,o.unshift(e))),i+o.map((t=>t<10?"0"+String(t):String(t))).join(":").replace(/000000\d*$/,"")}const Pd={identify:t=>"bigint"==typeof t||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>Ad(t,n),stringify:Td},Od={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>Ad(t,!1),stringify:Td},Fd={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Fd.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,i,r,o,s,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let c=Date.UTC(n,i-1,r,o||0,s||0,a||0,l);const u=e[8];if(u&&"Z"!==u){let t=Ad(u,!1);Math.abs(t)<30&&(t*=60),c-=6e4*t}return new Date(c)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Id={identify:t=>null==t,createNode:()=>new Lp(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Lp(null),stringify:({source:t},e)=>t&&Id.test.test(t)?t:e.options.nullStr};function Nd({value:t,source:e},n){return e&&(t?Bd:Rd).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const Bd={identify:t=>!0===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Lp(!0),stringify:Nd},Rd={identify:t=>!1===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Lp(!1),stringify:Nd},zd=t=>"bigint"==typeof t||Number.isInteger(t);function Hd(t,e,n,{intAsBigInt:i}){const r=t[0];if("-"!==r&&"+"!==r||(e+=1),t=t.substring(e).replace(/_/g,""),i){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`}const e=BigInt(t);return"-"===r?BigInt(-1)*e:e}const o=parseInt(t,n);return"-"===r?-1*o:o}function Vd(t,e,n){const{value:i}=t;if(zd(i)){const t=i.toString(e);return i<0?"-"+n+t.substr(1):n+t}return td(t)}const qd=od.concat([Id,Bd,Rd,{identify:zd,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Hd(t,2,2,n),stringify:t=>Vd(t,2,"0b")},{identify:zd,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Hd(t,1,8,n),stringify:t=>Vd(t,8,"0")},{identify:zd,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Hd(t,0,10,n),stringify:td},{identify:zd,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Hd(t,2,16,n),stringify:t=>Vd(t,16,"0x")},{identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:td},{identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify:({value:t})=>Number(t).toExponential()},{identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new Lp(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(-1!==n){const i=t.substring(n+1).replace(/_/g,"");"0"===i[i.length-1]&&(e.minFractionDigits=i.length)}return e},stringify:td}],kd,Md,Sd,Dd,Pd,Od,Fd),jd={core:vd,failsafe:od,json:wd,yaml11:qd},Ud={binary:kd,bool:ud,float:md,floatExp:gd,floatNaN:fd,floatTime:Od,int:pd,intHex:dd,intOct:hd,intTime:Pd,map:id,null:cd,omap:Md,pairs:Sd,seq:rd,set:Dd,timestamp:Fd};const _d=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,Wd={"tag:yaml.org,2002:binary":Ud.binary,"tag:yaml.org,2002:omap":Ud.omap,"tag:yaml.org,2002:pairs":Ud.pairs,"tag:yaml.org,2002:set":Ud.set,"tag:yaml.org,2002:timestamp":Ud.timestamp};class Gd{constructor({customTags:t,merge:e,resolveKnownTags:n,schema:i,sortMapEntries:r}){this.map=Ud.map,this.seq=Ud.seq,this.merge=!!e,this.name=i||"core",this.knownTags=n?Wd:{},this.tags=function(t,e,n,i){let r=t[i.replace(/\W/g,"")];if(!r){const e=Object.keys(t).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown schema "${i}"; use one of ${e}`)}if(Array.isArray(n))for(const t of n)r=r.concat(t);else"function"==typeof n&&(r=n(r.slice()));return r.map((t=>{if("string"!=typeof t)return t;const n=e[t];if(n)return n;const i=Object.keys(e).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown custom tag "${t}"; use one of ${i}`)}))}(jd,Ud,t,this.name),this.sortMapEntries=!0===r?_d:r||null}}function Kd(t,e,n,i){if(i&&"object"==typeof i)if(Array.isArray(i))for(let e=0,n=i.length;e<n;++e){const n=i[e],r=Kd(t,i,String(e),n);void 0===r?delete i[e]:r!==n&&(i[e]=r)}else if(i instanceof Map)for(const e of Array.from(i.keys())){const n=i.get(e),r=Kd(t,i,e,n);void 0===r?i.delete(e):r!==n&&i.set(e,r)}else if(i instanceof Set)for(const e of Array.from(i)){const n=Kd(t,i,e,e);void 0===n?i.delete(e):n!==e&&(i.delete(e),i.add(n))}else for(const[e,n]of Object.entries(i)){const r=Kd(t,i,e,n);void 0===r?delete i[e]:r!==n&&(i[e]=r)}return t.call(e,n,i)}class $d{constructor(t,e,n){let i;this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,sp,{value:ep}),"function"==typeof e||Array.isArray(e)?i=e:void 0===n&&e&&(n=e,e=void 0);const r=Object.assign({},Jp,n);this.options=r,this.anchors=new Zp(this.options.anchorPrefix);let{version:o}=r;(null==n?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Cp({version:o}),this.setSchema(o,n),this.contents=void 0===t?null:this.createNode(t,{replacer:i})}add(t){Yd(this.contents)&&this.contents.add(t)}addIn(t,e){Yd(this.contents)&&this.contents.addIn(t,e)}createNode(t,{flow:e,keepUndefined:n,onTagObj:i,replacer:r,tag:o}={}){if("function"==typeof r)t=r.call({"":t},"",t);else if(Array.isArray(r)){const t=t=>"number"==typeof t||t instanceof String||t instanceof Number,e=r.filter(t).map(String);e.length>0&&(r=r.concat(e))}"boolean"!=typeof n&&(n=!!this.options.keepUndefined);const s=[],a=Dp(t,o,{keepUndefined:n,onAlias(t){const e=new Sp(t);return s.push(e),e},onTagObj:i,prevObjects:new Map,replacer:r,schema:this.schema});for(const t of s){t.source=t.source.node;let e=this.anchors.getName(t.source);e||(e=this.anchors.newName(),this.anchors.map[e]=t.source)}return e&&dp(a)&&(a.flow=!0),a}createPair(t,e,n={}){const i=this.createNode(t,n),r=this.createNode(e,n);return new Yp(i,r)}delete(t){return!!Yd(this.contents)&&this.contents.delete(t)}deleteIn(t){return _p(t)?null!=this.contents&&(this.contents=null,!0):!!Yd(this.contents)&&this.contents.deleteIn(t)}get(t,e){return dp(this.contents)?this.contents.get(t,e):void 0}getIn(t,e){return _p(t)?!e&&hp(this.contents)?this.contents.value:this.contents:dp(this.contents)?this.contents.getIn(t,e):void 0}has(t){return!!dp(this.contents)&&this.contents.has(t)}hasIn(t){return _p(t)?void 0!==this.contents:!!dp(this.contents)&&this.contents.hasIn(t)}set(t,e){null==this.contents?this.contents=Up(this.schema,[t],e):Yd(this.contents)&&this.contents.set(t,e)}setIn(t,e){_p(t)?this.contents=e:null==this.contents?this.contents=Up(this.schema,Array.from(t),e):Yd(this.contents)&&this.contents.setIn(t,e)}setSchema(t,e){let n;switch(String(t)){case"1.1":this.directives.yaml.version="1.1",n=Object.assign({merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"},e);break;case"1.2":this.directives.yaml.version="1.2",n=Object.assign({merge:!1,resolveKnownTags:!0,schema:"core"},e);break;default:{const e=JSON.stringify(t);throw new Error(`Expected '1.1' or '1.2' as version, but found: ${e}`)}}this.schema=new Gd(n)}toJS({json:t,jsonArg:e,mapAsMap:n,maxAliasCount:i,onAnchor:r,reviver:o}={}){const s=Object.values(this.anchors.map).map((t=>[t,{alias:[],aliasCount:0,count:1}])),a=s.length>0?new Map(s):null,l={anchors:a,doc:this,keep:!t,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof i?i:100,stringify:jp},c=xp(this.contents,e||"",l);if("function"==typeof r&&a)for(const{count:t,res:e}of a.values())r(e,t);return"function"==typeof o?Kd(o,{"":c},"",c):c}toJSON(t,e){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:e})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const e=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${e}`)}const e=[];let n=!0===t.directives;if(!1!==t.directives){const t=this.directives.toString(this);t?(e.push(t),n=!0):this.directives.marker&&(n=!0)}n&&e.push("---"),this.commentBefore&&(1!==e.length&&e.unshift(""),e.unshift(this.commentBefore.replace(/^/gm,"#")));const i=qp(this,t);let r=!1,o=null;if(this.contents){fp(this.contents)&&(this.contents.spaceBefore&&n&&e.push(""),this.contents.commentBefore&&e.push(this.contents.commentBefore.replace(/^/gm,"#")),i.forceBlockIndent=!!this.comment,o=this.contents.comment);const t=o?void 0:()=>r=!0;let s=jp(this.contents,i,(()=>o=null),t);o&&(s=Ap(s,"",o)),"|"!==s[0]&&">"!==s[0]||"---"!==e[e.length-1]?e.push(s):e[e.length-1]=`--- ${s}`}else e.push(jp(this.contents,i));return this.comment&&(r&&!o||""===e[e.length-1]||e.push(""),e.push(this.comment.replace(/^/gm,"#"))),e.join("\n")+"\n"}}function Yd(t){if(dp(t))return!0;throw new Error("Expected a YAML collection as document contents")}class Jd extends Error{constructor(t,e,n){if(!n)throw new Error(`Invalid arguments for new ${t}`);super(),this.name=t,this.message=n,this.offset=e}}class Qd extends Jd{constructor(t,e){super("YAMLParseError",t,e)}}class Xd extends Jd{constructor(t,e){super("YAMLWarning",t,e)}}const Zd=(t,e)=>n=>{if(-1===n.offset)return;n.linePos=e.linePos(n.offset);const{line:i,col:r}=n.linePos;n.message+=` at line ${i}, column ${r}`;let o=r-1,s=t.substring(e.lineStarts[i-1],e.lineStarts[i]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){const t=Math.min(o-39,s.length-79);s="…"+s.substring(t),o-=t-1}if(s.length>80&&(s=s.substring(0,79)+"…"),i>1&&/^ *$/.test(s.substring(0,o))){let n=t.substring(e.lineStarts[i-2],e.lineStarts[i-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),s=n+s}if(/[^ ]/.test(s)){const t=" ".repeat(o)+"^";n.message+=`:\n\n${s}\n${t}\n`}};function tf(t,e,n,i,r,o){let s=0,a=!1,l=n,c=n,u="",h=!1,p=!1,d="",f="",g="",m=null,v=null;for(const n of e){switch(n.type){case"space":l&&"doc-start"!==i&&"\t"===n.source[0]&&o(r+s,"Tabs are not allowed as indentation"),c=!0;break;case"comment":{t.options.strict&&!c&&o(r+s,"Comments must be separated from other tokens by white space characters");const e=n.source.substring(1);h?u+=d+e:u=e,h=!0,d="";break}case"newline":l&&!h&&(a=!0),l=!0,p=!0,c=!0,d+=n.source;break;case"anchor":f&&o(r+s,"A node can have at most one anchor"),f=n.source.substring(1),null===v&&(v=r+s),l=!1,c=!1;break;case"tag":{g&&o(r+s,"A node can have at most one tag");const e=t.directives.tagName(n.source,(t=>o(r,t)));e&&(g=e),null===v&&(v=r+s),l=!1,c=!1;break}case i:m={indent:n.indent,offset:r+s},l=!1,c=!1;break;default:o(r+s,`Unexpected ${n.type} token`),l=!1,c=!1}n.source&&(s+=n.source.length)}return{found:m,spaceBefore:a,comment:u,hasNewline:p,anchor:f,tagName:g,length:s,start:null!=v?v:r+s}}function ef(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":return t.source.includes("\n");case"flow-collection":for(const e of t.items)switch(e.type){case"newline":return!0;case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":case"flow-collection":if(ef(e))return!0}return!1;default:return!0}}const nf="All mapping items must start at the same column";function rf(t,e,n,i){let r="";if(t){let o=!1,s=!1,a="";for(const{source:l,type:c}of t){switch(c){case"space":o=!0;break;case"comment":{n&&!o&&i(e,"Comments must be separated from other tokens by white space characters");const t=l.substring(1);s?r+=a+t:r=t,s=!0,a="";break}case"newline":s&&(a+=l),o=!0;break;default:i(e,`Unexpected ${c} at node end`)}e+=l.length}}return{comment:r,offset:e}}function of(t,e,n,i,r,o){let s;switch(n.type){case"block-map":s=function({composeNode:t,composeEmptyNode:e},n,{indent:i,items:r,offset:o},s,a){var l;const c=o,u=new nd(n.schema);s&&n.anchors.setAnchor(u,s);for(const{start:s,key:c,sep:h,value:p}of r){const r=tf(n,s,!0,"explicit-key-ind",o,a),d=!r.found;if(d){if(c&&("block-seq"===c.type?a(o,"A block sequence may not be used as an implicit map key"):"indent"in c&&c.indent!==i&&a(o,nf)),!r.anchor&&!r.tagName&&!h){r.comment&&(u.comment?u.comment+="\n"+r.comment:u.comment=r.comment);continue}}else(null===(l=r.found)||void 0===l?void 0:l.indent)!==i&&a(o,nf);o+=r.length,d&&ef(c)&&a(o,"Implicit keys need to be on a single line");const f=o,g=c?t(n,c,r,a):e(n,o,s,null,r,a);o=g.range[1];const m=tf(n,h||[],!c||"block-scalar"===c.type,"map-value-ind",o,a);if(o+=m.length,m.found){d&&("block-map"!==(null==p?void 0:p.type)||m.hasNewline||a(o,"Nested mappings are not allowed in compact mappings"),n.options.strict&&r.start<m.found.offset-1024&&a(o,"The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const i=p?t(n,p,m,a):e(n,o,h,null,m,a);o=i.range[1],u.items.push(new Yp(g,i))}else d&&a(f,"Implicit map keys need to be followed by map values"),m.comment&&(g.comment?g.comment+="\n"+m.comment:g.comment=m.comment),u.items.push(new Yp(g))}return u.range=[c,o],u}(t,e,n,i,o);break;case"block-seq":s=function({composeNode:t,composeEmptyNode:e},n,{items:i,offset:r},o,s){const a=r,l=new Qp(n.schema);o&&n.anchors.setAnchor(l,o);for(const{start:o,value:a}of i){const i=tf(n,o,!0,"seq-item-ind",r,s);if(r+=i.length,!i.found){if(!(i.anchor||i.tagName||a)){i.comment&&(l.comment=i.comment);continue}s(r,a&&"block-seq"===a.type?"All sequence items must start at the same column":"Sequence item without - indicator")}const c=a?t(n,a,i,s):e(n,r,o,null,i,s);r=c.range[1],l.items.push(c)}return l.range=[a,r],l}(t,e,n,i,o);break;case"flow-collection":s=function({composeNode:t,composeEmptyNode:e},n,i,r,o){const s="{"===i.start.source,a=s?new nd(n.schema):new Qp(n.schema);a.flow=!0,r&&n.anchors.setAnchor(a,r);let l=null,c=null,u=!1,h="",p=!1,d=!1,f="",g="",m="",v=i.offset+1,y=!1,b=!1,w=!1,k=!1,C=null;function x(){const t={spaceBefore:u,comment:h,anchor:g,tagName:m};return u=!1,h="",d=!1,f="",g="",m="",t}function S(t){if(c?d&&(c.comment=h):c=e(n,v,i.items,t,x(),o),s||b)a.items.push(l?new Yp(l,c):new Yp(c));else{const t=a;if(l){const e=new nd(n.schema);e.flow=!0,e.items.push(new Yp(l,c)),t.items.push(e)}else t.items.push(c)}}for(let r=0;r<i.items.length;++r){const E=i.items[r];let M=!0;switch(E.type){case"space":p=!0;break;case"comment":{n.options.strict&&!p&&o(v,"Comments must be separated from other tokens by white space characters");const t=E.source.substring(1);d?h+=f+t:h=t,y=!1,d=!0,f="";break}case"newline":if(y&&!d&&(u=!0),w){if(d){let t=a.items[a.items.length-1];up(t)&&(t=t.value||t.key),fp(t)?t.comment=h:o(v,"Error adding trailing comment to node"),h="",d=!1}w=!1}else f+=E.source,s||l||!c||(k=!0);y=!0,p=!0;break;case"anchor":g&&o(v,"A node can have at most one anchor"),g=E.source.substring(1),y=!1,w=!1,p=!1;break;case"tag":{m&&o(v,"A node can have at most one tag");const t=n.directives.tagName(E.source,(t=>o(v,t)));t&&(m=t),y=!1,w=!1,p=!1;break}case"explicit-key-ind":(g||m)&&o(v,"Anchors and tags must be after the ? indicator"),b=!0,y=!1,w=!1,p=!1;break;case"map-value-ind":if(l){if(c){o(v,"Missing {} around pair used as mapping key");const t=new nd(n.schema);t.flow=!0,t.items.push(new Yp(l,c)),t.range=[l.range[0],c.range[1]],l=t,c=null}}else if(c){if(n.options.strict){const t="Implicit keys of flow sequence pairs need to be on a single line";if(k)o(v,t);else if(C){ef(C)&&o(v,t);const e="offset"in C&&C.offset;"number"==typeof e&&e<v-1024&&o(v,"The : indicator must be at most 1024 chars after the start of an implicit flow sequence key"),C=null}}l=c,c=null}else l=e(n,v,i.items,r,x(),o);d&&(l.comment=h,h="",d=!1),b=!1,w=!1,p=!1;break;case"comma":l||c||g||m||b?S(r):o(v,"Unexpected , in flow "+(s?"map":"sequence")),l=null,c=null,b=!1,w=!0,p=!1,k=!1,C=null;break;case"block-map":case"block-seq":o(v,"Block collections are not allowed within flow collections");default:c&&o(v,"Missing , between flow collection items"),s||l||b||(C=E),c=t(n,E,x(),o),v=c.range[1],y=!1,M=!1,w=!1,p=!1}M&&(v+=E.source.length)}(l||c||g||m||b)&&S(i.items.length);const E=s?"}":"]",[M,...L]=i.end;M&&M.source===E||o(v,`Expected flow ${s?"map":"sequence"} to end with ${E}`);if(M&&(v+=M.source.length),L.length>0){const t=rf(L,v,n.options.strict,o);t.comment&&(a.comment=h),v=t.offset}return a.range=[i.offset,v],a}(t,e,n,i,o)}if(!r)return s;const a=s.constructor;if("!"===r||r===a.tagName)return s.tag=a.tagName,s;const l=cp(s)?"map":"seq";let c=e.schema.tags.find((t=>t.collection===l&&t.tag===r));if(!c){const t=e.schema.knownTags[r];if(!t||t.collection!==l)return o(s.range[0],`Unresolved tag: ${r}`,!0),s.tag=r,s;e.schema.tags.push(Object.assign({},t,{default:!1})),c=t}const u=c.resolve(s,(t=>o(s.range[0],t)),e.options),h=fp(u)?u:new Lp(u);return h.range=s.range,h.tag=r,(null==c?void 0:c.format)&&(h.format=c.format),h}function sf(t,e,n){const i=function({offset:t,props:e},n,i){if("block-scalar-header"!==e[0].type)return i(t,"Block scalar header not found"),null;const{source:r}=e[0],o=r[0];let s=0,a="",l=-1;for(let e=1;e<r.length;++e){const n=r[e];if(a||"-"!==n&&"+"!==n){const i=Number(n);!s&&i?s=i:-1===l&&(l=t+e)}else a=n}-1!==l&&i(l,`Block scalar header includes extra characters: ${r}`);let c=!1,u="",h=r.length;for(let r=1;r<e.length;++r){const o=e[r];switch(o.type){case"space":c=!0;case"newline":h+=o.source.length;break;case"comment":if(n&&!c){i(t+h,"Comments must be separated from other tokens by white space characters")}h+=o.source.length,u=o.source.substring(1);break;case"error":i(t+h,o.message),h+=o.source.length;break;default:{i(t+h,`Unexpected token in block scalar header: ${o.type}`);const e=o.source;e&&"string"==typeof e&&(h+=e.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:h}}(t,e,n);if(!i)return{value:"",type:null,comment:"",length:0};const r=">"===i.mode?Lp.BLOCK_FOLDED:Lp.BLOCK_LITERAL,o=t.source?function(t){const e=t.split(/\n( *)/),n=e[0],i=n.match(/^( *)/),r=[i&&i[1]?[i[1],n.slice(i[1].length)]:["",n]];for(let t=1;t<e.length;t+=2)r.push([e[t],e[t+1]]);return r}(t.source):[];let s=o.length;for(let t=o.length-1;t>=0;--t){const e=o[t][1];if(""!==e&&"\r"!==e)break;s=t}if(!t.source||0===s){const e="+"===i.chomp?o.map((t=>t[0])).join("\n"):"";let n=i.length;return t.source&&(n+=t.source.length),{value:e,type:r,comment:i.comment,length:n}}let a=t.indent+i.indent,l=t.offset+i.length,c=0;for(let t=0;t<s;++t){const[e,r]=o[t];if(""!==r&&"\r"!==r){if(e.length<a){const t="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+e.length,t)}0===i.indent&&(a=e.length),c=t;break}0===i.indent&&e.length>a&&(a=e.length),l+=e.length+r.length+1}let u="",h="",p=!1;for(let t=0;t<c;++t)u+=o[t][0].slice(a)+"\n";for(let t=c;t<s;++t){let[e,s]=o[t];l+=e.length+s.length+1;const c="\r"===s[s.length-1];if(c&&(s=s.slice(0,-1)),s&&e.length<a){const t=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(l-s.length-(c?2:1),t),e=""}r===Lp.BLOCK_LITERAL?(u+=h+e.slice(a)+s,h="\n"):e.length>a||"\t"===s[0]?(" "===h?h="\n":p||"\n"!==h||(h="\n\n"),u+=h+e.slice(a)+s,h="\n",p=!0):""===s?"\n"===h?u+="\n":h="\n":(u+=h+s,h=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let t=s;t<o.length;++t)u+="\n"+o[t][0].slice(a);"\n"!==u[u.length-1]&&(u+="\n");break;default:u+="\n"}return{value:u,type:r,comment:i.comment,length:i.length+t.source.length}}function af({offset:t,type:e,source:n,end:i},r,o){let s,a;const l=(e,n)=>o(t+e,n);switch(e){case"scalar":s=Lp.PLAIN,a=function(t,e){switch(t[0]){case"\t":e(0,"Plain value cannot start with a tab character");break;case"|":case">":e(0,`Plain value cannot start with block scalar indicator ${t[0]}`);break;case"@":case"`":e(0,`Plain value cannot start with reserved character ${t[0]}`);break}return lf(t.trim())}(n,l);break;case"single-quoted-scalar":s=Lp.QUOTE_SINGLE,a=function(t,e){"'"===t[t.length-1]&&1!==t.length||e(t.length,"Missing closing 'quote");return lf(t.slice(1,-1)).replace(/''/g,"'")}(n,l);break;case"double-quoted-scalar":s=Lp.QUOTE_DOUBLE,a=function(t,e){let n="";for(let i=1;i<t.length-1;++i){const r=t[i];if("\r"!==r||"\n"!==t[i+1])if("\n"===r){const{fold:e,offset:r}=cf(t,i);n+=e,i=r}else if("\\"===r){let r=t[++i];const o=uf[r];if(o)n+=o;else if("\n"===r)for(r=t[i+1];" "===r||"\t"===r;)r=t[1+ ++i];else if("x"===r||"u"===r||"U"===r){const o={x:2,u:4,U:8}[r];n+=hf(t,i+1,o,e),i+=o}else{const r=t.substr(i-1,2);e(i-1,`Invalid escape sequence ${r}`),n+=r}}else if(" "===r||"\t"===r){const e=i;let o=t[i+1];for(;" "===o||"\t"===o;)o=t[1+ ++i];"\n"!==o&&(n+=i>e?t.slice(e,i+1):r)}else n+=r}'"'===t[t.length-1]&&1!==t.length||e(t.length,'Missing closing "quote');return n}(n,l);break;default:return o(t,`Expected a flow scalar value, but found: ${e}`),{value:"",type:null,comment:"",length:n.length}}const c=rf(i,0,r,l);return{value:a,type:s,comment:c.comment,length:n.length+c.offset}}function lf(t){const e=t.split(/[ \t]*\r?\n[ \t]*/);let n=e[0],i=" ";for(let t=1;t<e.length-1;++t){const r=e[t];""===r?"\n"===i?n+=i:i="\n":(n+=i+r,i=" ")}return e.length>1&&(n+=i+e[e.length-1]),n}function cf(t,e){let n="",i=t[e+1];for(;!(" "!==i&&"\t"!==i&&"\n"!==i&&"\r"!==i||"\r"===i&&"\n"!==t[e+2]);)"\n"===i&&(n+="\n"),i=t[(e+=1)+1];return n||(n=" "),{fold:n,offset:e}}const uf={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function hf(t,e,n,i){const r=t.substr(e,n),o=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){const r=t.substr(e-2,n+2);return i(e-2,`Invalid escape sequence ${r}`),r}return String.fromCodePoint(o)}function pf(t,e,n,i,r){const{offset:o}=e,{value:s,type:a,comment:l,length:c}="block-scalar"===e.type?sf(e,t.options.strict,r):af(e,t.options.strict,r),u=i?function(t,e,n,i){var r;if("!"===n)return df(t);const o=[];for(const e of t.tags)if(!e.collection&&e.tag===n){if(!e.default||!e.test)return e;o.push(e)}for(const t of o)if(null===(r=t.test)||void 0===r?void 0:r.test(e))return t;const s=t.knownTags[n];if(s&&!s.collection)return t.tags.push(Object.assign({},s,{default:!1,test:void 0})),s;return i(0,`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),df(t)}(t.schema,s,i,r):function(t,e,n){var i;if(n)for(const n of t.tags)if(n.default&&(null===(i=n.test)||void 0===i?void 0:i.test(e)))return n;return df(t)}(t.schema,s,"scalar"===e.type);let h;try{const e=u?u.resolve(s,(t=>r(o,t)),t.options):s;h=hp(e)?e:new Lp(e)}catch(t){r(o,t.message),h=new Lp(s)}return h.range=[o,o+c],h.source=s,a&&(h.type=a),i&&(h.tag=i),(null==u?void 0:u.format)&&(h.format=u.format),l&&(h.comment=l),n&&t.anchors.setAnchor(h,n),h}const df=t=>t.tags.find((t=>!t.collection&&"tag:yaml.org,2002:str"===t.tag));function ff(t,e,n){if(e){null===n&&(n=e.length);for(let i=n-1;i>=0;--i){let n=e[i];switch(n.type){case"space":case"comment":case"newline":t-=n.source.length;continue}for(n=e[++i];"space"===(null==n?void 0:n.type);)t+=n.source.length,n=e[++i];break}}return t}const gf={composeNode:mf,composeEmptyNode:vf};function mf(t,e,n,i){const{spaceBefore:r,comment:o,anchor:s,tagName:a}=n;let l;switch(e.type){case"alias":l=function(t,{offset:e,source:n,end:i},r){const o=n.substring(1),s=t.anchors.getNode(o);s||r(e,`Aliased anchor not found: ${o}`);const a=new Sp(s),l=rf(i,e+n.length,t.options.strict,r);a.range=[e,l.offset],l.comment&&(a.comment=l.comment);return a}(t,e,i),(s||a)&&i(e.offset,"An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=pf(t,e,s,a,i);break;case"block-map":case"block-seq":case"flow-collection":l=of(gf,t,e,s,a,i);break;default:throw console.log(e),new Error(`Unsupporten token type: ${e.type}`)}return r&&(l.spaceBefore=!0),o&&("scalar"===e.type&&""===e.source?l.comment=o:l.commentBefore=o),l}function vf(t,e,n,i,{spaceBefore:r,comment:o,anchor:s,tagName:a},l){const c=pf(t,{type:"scalar",offset:ff(e,n,i),indent:-1,source:""},s,a,l);return r&&(c.spaceBefore=!0),o&&(c.comment=o),c}function yf(t){let e="",n=!1,i=!1;for(let r=0;r<t.length;++r){const o=t[r];switch(o[0]){case"#":e+=(""===e?"":i?"\n\n":"\n")+o.substring(1),n=!0,i=!1;break;case"%":"#"!==t[r+1][0]&&(r+=1),n=!1;break;default:n||(i=!0),n=!1}}return{comment:e,afterEmptyLine:i}}class bf{constructor(t,e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,e,n)=>{n?this.warnings.push(new Xd(t,e)):this.errors.push(new Qd(t,e))},this.next=t=>{switch(t.type){case"directive":this.directives.add(t.source,this.onError),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const e=function(t,e,{offset:n,start:i,value:r,end:o},s){const a=Object.assign({directives:e},t),l=new $d(void 0,a),c=tf(l,i,!0,"doc-start",n,s);c.found&&(l.directives.marker=!0),l.contents=r?mf(l,r,c,s):vf(l,n+c.length,i,null,c,s);const u=rf(o,l.contents.range[1],!1,s);return u.comment&&(l.comment=u.comment),l.range=[n,u.offset],l}(this.options,this.directives,t,this.onError);this.decorate(e,!1),this.doc&&this.onDocument(this.doc),this.doc=e,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const e=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new Qd(-1,e);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const e="Unexpected doc-end without preceding document";this.errors.push(new Qd(t.offset,e));break}const e=rf(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),e.comment){const t=this.doc.comment;this.doc.comment=t?`${t}\n${e.comment}`:e.comment}this.doc.range[1]=e.offset;break}default:this.errors.push(new Qd(-1,`Unsupported token ${t.type}`))}},this.directives=new Cp({version:(null==e?void 0:e.version)||Jp.version}),this.onDocument=t,this.options=e}decorate(t,e){const{comment:n,afterEmptyLine:i}=yf(this.prelude);if(n){const r=t.contents;if(e)t.comment=t.comment?`${t.comment}\n${n}`:n;else if(i||t.directives.marker||!r)t.commentBefore=n;else if(dp(r)&&!r.flow&&r.items.length>0){const t=r.items[0],e=t.commentBefore;t.commentBefore=e?`${n}\n${e}`:n}else{const t=r.commentBefore;r.commentBefore=t?`${n}\n${t}`:n}}e?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:yf(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}end(t=!1,e=-1){if(this.doc)this.decorate(this.doc,!0),this.onDocument(this.doc),this.doc=null;else if(t){const t=Object.assign({directives:this.directives},this.options),n=new $d(void 0,t);this.atDirectives&&this.onError(e,"Missing directives-end indicator line"),n.range=[0,e],this.decorate(n,!1),this.onDocument(n)}}}class wf{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let e=0,n=this.lineStarts.length;for(;e<n;){const i=e+n>>1;this.lineStarts[i]<t?e=i+1:n=i}if(this.lineStarts[e]===t)return{line:e+1,col:1};if(0===e)return{line:0,col:t};return{line:e,col:t-this.lineStarts[e-1]+1}}}}const kf="";function Cf(t){switch(t){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const xf=[",","[","]","{","}"],Sf=[" ",",","[","]","{","}","\n","\r","\t"],Ef=t=>!t||Sf.includes(t);class Mf{constructor(t){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.next=null,this.pos=0,this.push=t}lex(t,e){t&&(this.buffer=this.buffer?this.buffer+t:t),this.atEnd=!e;let n=this.next||"stream";for(;n&&(e||this.hasChars(1));)n=this.parseNext(n)}atLineEnd(){let t=this.pos,e=this.buffer[t];for(;" "===e||"\t"===e;)e=this.buffer[++t];return!e||"#"===e||"\n"===e||"\r"===e&&"\n"===this.buffer[t+1]}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let e=this.buffer[t];if(this.indentNext>0){let n=0;for(;" "===e;)e=this.buffer[++n+t];if("\r"===e){const e=this.buffer[n+t+1];if("\n"===e||!e&&!this.atEnd)return t+n+1}return"\n"===e||n>=this.indentNext||!e&&!this.atEnd?t+n:-1}if("-"===e||"."===e){const e=this.buffer.substr(t,3);if(("---"===e||"..."===e)&&Cf(this.buffer[t+3]))return-1}return t}getLine(){let t=this.buffer.indexOf("\n",this.pos);return-1===t?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[t-1]&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}parseNext(t){switch(t){case"stream":return this.parseStream();case"line-start":return this.parseLineStart();case"block-start":return this.parseBlockStart();case"doc":return this.parseDocument();case"flow":return this.parseFlowCollection();case"quoted-scalar":return this.parseQuotedScalar();case"block-scalar":return this.parseBlockScalar();case"plain-scalar":return this.parsePlainScalar()}}parseStream(){let t=this.getLine();if(null===t)return this.setNext("stream");if("\ufeff"===t[0]&&(this.pushCount(1),t=t.substring(1)),"%"===t[0]){let e=t.length;const n=t.indexOf("#");if(-1!==n){const i=t[n-1];" "!==i&&"\t"!==i||(e=n-1)}for(;;){const n=t[e-1];if(" "!==n&&"\t"!==n)break;e-=1}const i=this.pushCount(e)+this.pushSpaces(!0);return this.pushCount(t.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const e=this.pushSpaces(!0);return this.pushCount(t.length-e),this.pushNewline(),"stream"}return this.push(""),this.parseLineStart()}parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if("-"===t||"."===t){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if("---"===t&&Cf(this.charAt(3)))return this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===t&&Cf(this.charAt(3)))return this.pushCount(3),"stream"}return this.indentValue=this.pushSpaces(!1),this.indentNext>this.indentValue&&!Cf(this.charAt(1))&&(this.indentNext=this.indentValue),this.parseBlockStart()}parseBlockStart(){const[t,e]=this.peek(2);if(!e&&!this.atEnd)return this.setNext("block-start");if(("-"===t||"?"===t||":"===t)&&Cf(e)){const t=this.pushCount(1)+this.pushSpaces(!0);return this.indentNext=this.indentValue+1,this.indentValue+=t,this.parseBlockStart()}return"doc"}parseDocument(){this.pushSpaces(!0);const t=this.getLine();if(null===t)return this.setNext("doc");let e=this.pushIndicators();switch(t[e]){case"#":this.pushCount(t.length-e);case void 0:return this.pushNewline(),this.parseLineStart();case"{":case"[":return this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return this.pushCount(1),"doc";case"*":return this.pushUntil(Ef),"doc";case'"':case"'":return this.parseQuotedScalar();case"|":case">":return e+=this.parseBlockScalarHeader(),e+=this.pushSpaces(!0),this.pushCount(t.length-e),this.pushNewline(),this.parseBlockScalar();default:return this.parsePlainScalar()}}parseFlowCollection(){let t,e,n=-1;do{t=this.pushNewline(),e=this.pushSpaces(!0),t>0&&(this.indentValue=n=e)}while(t+e>0);const i=this.getLine();if(null===i)return this.setNext("flow");if(-1!==n&&n<this.indentNext||0===n&&(i.startsWith("---")||i.startsWith("..."))&&Cf(i[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&("]"===i[0]||"}"===i[0])))return this.flowLevel=0,this.push(""),this.parseLineStart()}let r=0;for(;","===i[r];)r+=this.pushCount(1)+this.pushSpaces(!0);switch(r+=this.pushIndicators(),i[r]){case void 0:return"flow";case"#":return this.pushCount(i.length-r),"flow";case"{":case"[":return this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return this.pushUntil(Ef),"flow";case'"':case"'":return this.flowKey=!0,this.parseQuotedScalar();case":":{const t=this.charAt(1);if(this.flowKey||Cf(t)||","===t)return this.pushCount(1),this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,this.parsePlainScalar()}}parseQuotedScalar(){const t=this.charAt(0);let e=this.buffer.indexOf(t,this.pos+1);if("'"===t)for(;-1!==e&&"'"===this.buffer[e+1];)e=this.buffer.indexOf("'",e+2);else for(;-1!==e;){let t=0;for(;"\\"===this.buffer[e-1-t];)t+=1;if(t%2==0)break;e=this.buffer.indexOf('"',e+1)}let n=this.buffer.indexOf("\n",this.pos);if(-1!==n&&n<e){for(;-1!==n&&n<e;){const t=this.continueScalar(n+1);if(-1===t)break;n=this.buffer.indexOf("\n",t)}-1!==n&&n<e&&(e=n-1)}if(-1===e){if(!this.atEnd)return this.setNext("quoted-scalar");e=this.buffer.length}return this.pushToIndex(e+1,!1),this.flowLevel?"flow":"doc"}parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const e=this.buffer[++t];if("+"===e)this.blockScalarKeep=!0;else if(e>"0"&&e<="9")this.blockScalarIndent=Number(e)-1;else if("-"!==e)break}return this.pushUntil((t=>Cf(t)||"#"===t))}parseBlockScalar(){let t,e=this.pos-1,n=0;t:for(let i=this.pos;t=this.buffer[i];++i)switch(t){case" ":n+=1;break;case"\n":e=i,n=0;break;case"\r":{const t=this.buffer[i+1];if(!t&&!this.atEnd)return this.setNext("block-scalar");if("\n"===t)break}default:break t}if(!t&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const t=this.continueScalar(e+1);if(-1===t)break;e=this.buffer.indexOf("\n",t)}while(-1!==e);if(-1===e){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let t=e-1,n=this.buffer[t];for("\r"===n&&(n=this.buffer[--t]);" "===n||"\t"===n;)n=this.buffer[--t];if(!("\n"===n&&t>=this.pos))break;e=t}return this.push(kf),this.pushToIndex(e+1,!0),this.parseLineStart()}parsePlainScalar(){const t=this.flowLevel>0;let e,n=this.pos-1,i=this.pos-1;for(;e=this.buffer[++i];)if(":"===e){const e=this.buffer[i+1];if(Cf(e)||t&&","===e)break;n=i}else if(Cf(e)){const r=this.buffer[i+1];if("#"===r||t&&xf.includes(r))break;if("\r"===e&&("\n"===r?(i+=1,e="\n"):n=i),"\n"===e){const t=this.continueScalar(i+1);if(-1===t)break;i=Math.max(i,t-2)}}else{if(t&&xf.includes(e))break;n=i}return e||this.atEnd?(this.push(kf),this.pushToIndex(n+1,!0),t?"flow":"doc"):this.setNext("plain-scalar")}pushCount(t){return t>0?(this.push(this.buffer.substr(this.pos,t)),this.pos+=t,t):0}pushToIndex(t,e){const n=this.buffer.slice(this.pos,t);return n?(this.push(n),this.pos+=n.length,n.length):(e&&this.push(""),0)}pushIndicators(){switch(this.charAt(0)){case"!":if("<"===this.charAt(1))return this.pushVerbatimTag()+this.pushSpaces(!0)+this.pushIndicators();case"&":return this.pushUntil(Ef)+this.pushSpaces(!0)+this.pushIndicators();case":":case"?":case"-":if(Cf(this.charAt(1)))return 0===this.flowLevel&&(this.indentNext=this.indentValue+1),this.pushCount(1)+this.pushSpaces(!0)+this.pushIndicators()}return 0}pushVerbatimTag(){let t=this.pos+2,e=this.buffer[t];for(;!Cf(e)&&">"!==e;)e=this.buffer[++t];return this.pushToIndex(">"===e?t+1:t,!1)}pushNewline(){const t=this.buffer[this.pos];return"\n"===t?this.pushCount(1):"\r"===t&&"\n"===this.charAt(1)?this.pushCount(2):0}pushSpaces(t){let e,n=this.pos-1;do{e=this.buffer[++n]}while(" "===e||t&&"\t"===e);const i=n-this.pos;return i>0&&(this.push(this.buffer.substr(this.pos,i)),this.pos=n),i}pushUntil(t){let e=this.pos,n=this.buffer[e];for(;!t(n);)n=this.buffer[++e];return this.pushToIndex(e,!1)}}function Lf(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function Df(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function Af(t){let e=!1;for(let n=0;n<t.length;++n)switch(t[n].type){case"space":break;case"comment":e=!0;break;case"newline":if(!e)return!1;break;default:return!1}if(e)for(let e=t.length-1;e>=0;--e)switch(t[e].type){case"space":break;case"newline":return!0;default:return!1}return!1}function Tf(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep||e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Pf(t){var e;if(0===t.length)return[];let n=t.length;t:for(;--n>=0;)switch(t[n].type){case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break t}for(;"space"===(null===(e=t[++n])||void 0===e?void 0:e.type););return t.splice(n,t.length)}class Of{constructor(t,e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.next=t=>{if(this.source=t,this.atScalar)return this.atScalar=!1,this.step(),void(this.offset+=t.length);const e=function(t){switch(t){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case kf:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(t);if(e)if("scalar"===e)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=e,this.step(),e){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&" "===t[0]&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":return;default:this.atNewLine=!1}this.offset+=t.length}else{const e=`Not a YAML token: ${t}`;this.pop({type:"error",offset:this.offset,message:e,source:t}),this.offset+=t.length}},this.lexer=new Mf(this.next),this.push=t,this.onNewLine=e}parse(t,e=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0),this.lexer.lex(t,e),e||this.end()}end(){for(;this.stack.length>0;)this.pop()}get sourceToken(){return{type:this.type,indent:this.indent,source:this.source}}step(){const t=this.peek(1);if("doc-end"!==this.type||t&&"doc-end"===t.type){if(!t)return this.stream();switch(t.type){case"document":return this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.scalar(t);case"block-scalar":return this.blockScalar(t);case"block-map":return this.blockMap(t);case"block-seq":return this.blockSequence(t);case"flow-collection":return this.flowCollection(t);case"doc-end":return this.documentEnd(t)}this.pop()}else{for(;this.stack.length>0;)this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(t){return this.stack[this.stack.length-t]}pop(t){const e=t||this.stack.pop();if(e)if(0===this.stack.length)this.push(e);else{const t=this.peek(1);switch("block-scalar"!==e.type&&"flow-collection"!==e.type||(e.indent="indent"in t?t.indent:-1),t.type){case"document":t.value=e;break;case"block-scalar":t.props.push(e);break;case"block-map":{const n=t.items[t.items.length-1];if(n.value)return t.items.push({start:[],key:e,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:e,sep:[]}),void(this.onKeyLine=!Lf(n.start,"explicit-key-ind"));n.value=e;break}case"block-seq":{const n=t.items[t.items.length-1];n.value?t.items.push({start:[],value:e}):n.value=e;break}case"flow-collection":t.items.push(e);break;default:this.pop(),this.pop(e)}if(!("document"!==t.type&&"block-map"!==t.type&&"block-seq"!==t.type||"block-map"!==e.type&&"block-seq"!==e.type)){const n=e.items[e.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&!Df(n.start)&&(0===e.indent||n.start.every((t=>"comment"!==t.type||t.indent<e.indent)))&&("document"===t.type?t.end=n.start:t.items.push({start:n.start}),e.items.splice(-1,1))}}else{const t="Tried to pop an empty stack";this.push({type:"error",source:"",message:t})}}stream(){switch(this.type){case"directive-line":return void this.push({type:"directive",source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void this.push(this.sourceToken);case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&t.start.push(this.sourceToken),void this.stack.push(t)}}this.push({type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source})}document(t){if(t.value)return this.lineEnd(t);switch(this.type){case"doc-start":return void(Df(t.start)?(this.pop(),this.step()):t.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void t.start.push(this.sourceToken)}const e=this.startBlockValue(t);e?this.stack.push(e):this.push({type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source})}scalar(t){if("map-value-ind"===this.type){const e=Pf(Tf(this.peek(2)));let n;t.end?(n=t.end,n.push(this.sourceToken),delete t.end):n=[this.sourceToken];const i={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:e,key:t,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else this.lineEnd(t)}blockScalar(t){switch(this.type){case"space":case"comment":case"newline":return void t.props.push(this.sourceToken);case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}this.pop();break;default:this.pop(),this.step()}}blockMap(t){var e;const n=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,!n.sep&&Af(n.start)){const i=t.items[t.items.length-2],r=null===(e=null==i?void 0:i.value)||void 0===e?void 0:e.end;if(Array.isArray(r))return Array.prototype.push.apply(r,n.start),void(n.start=[this.sourceToken])}case"space":case"comment":return void(n.value?t.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken))}if(this.indent>=t.indent){const e=!this.onKeyLine&&this.indent===t.indent&&(n.sep||Df(n.start));switch(this.type){case"anchor":case"tag":return void(e||n.value?(t.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken));case"explicit-key-ind":return n.sep||Lf(n.start,"explicit-key-ind")?e||n.value?t.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):n.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(n.sep)if(n.value||e&&!Lf(n.start,"explicit-key-ind"))t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Lf(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(Lf(n.start,"explicit-key-ind")&&function(t){switch(null==t?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}(n.key)&&!Lf(n.sep,"newline")){const t=Pf(n.start),e=n.key,i=n.sep;i.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:e,sep:i}]})}else n.sep.push(this.sourceToken);else Object.assign(n,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);return void(e||n.value?(t.items.push({start:[],key:i,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(i):(Object.assign(n,{key:i,sep:[]}),this.onKeyLine=!0))}default:{const i=this.startBlockValue(t);if(i)return e&&"block-seq"!==i.type&&Lf(n.start,"explicit-key-ind")&&t.items.push({start:[]}),void this.stack.push(i)}}}this.pop(),this.step()}blockSequence(t){var e;const n=t.items[t.items.length-1];switch(this.type){case"newline":if(!n.value&&Af(n.start)){const i=t.items[t.items.length-2],r=null===(e=null==i?void 0:i.value)||void 0===e?void 0:e.end;if(Array.isArray(r))return Array.prototype.push.apply(r,n.start),void(n.start=[this.sourceToken])}case"space":case"comment":return void(n.value?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken));case"anchor":case"tag":if(n.value||this.indent<=t.indent)break;return void n.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==t.indent)break;return void(n.value||Lf(n.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken))}if(this.indent>t.indent){const e=this.startBlockValue(t);if(e)return this.stack.push(e)}this.pop(),this.step()}flowCollection(t){if("flow-error-end"===this.type){let t;do{this.pop(),t=this.peek(1)}while(t&&"flow-collection"===t.type)}else if(0===t.end.length){switch(this.type){case"space":case"comment":case"newline":case"comma":case"explicit-key-ind":case"map-value-ind":case"anchor":case"tag":return void t.items.push(this.sourceToken);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return void t.items.push(this.flowScalar(this.type));case"flow-map-end":case"flow-seq-end":return void t.end.push(this.sourceToken)}const e=this.startBlockValue(t);if(e)return this.stack.push(e);this.pop(),this.step()}else{const e=this.peek(2);if("block-map"!==e.type||"map-value-ind"!==this.type&&("newline"!==this.type||e.items[e.items.length-1].sep))if("map-value-ind"===this.type&&"flow-collection"!==e.type){const n=Pf(Tf(e)),i=t.end.splice(1,t.end.length);i.push(this.sourceToken);const r={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else this.lineEnd(t);else this.pop(),this.step()}}flowScalar(t){if(this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken]};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":return this.onKeyLine=!0,{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"map-value-ind":{this.onKeyLine=!0;const e=Pf(Tf(t));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]}}}return null}documentEnd(t){"doc-mode"!==this.type&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&this.pop())}lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":this.pop(),this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&this.pop()}}}function Ff(t){const e=!t||!1!==t.prettyErrors;return{lineCounter:t&&t.lineCounter||e&&new wf||null,prettyErrors:e}}function If(t,e,n){let i;"function"==typeof e?i=e:void 0===n&&e&&"object"==typeof e&&(n=e);const r=function(t,e){const{lineCounter:n,prettyErrors:i}=Ff(e);let r=null;const o=new bf((t=>{if(r){if("silent"!==r.options.logLevel){const e="Source contains multiple documents; please use YAML.parseAllDocuments()";r.errors.push(new Qd(t.range[0],e))}}else r=t}),e);return new Of(o.next,null==n?void 0:n.addNewLine).parse(t),o.end(!0,t.length),i&&n&&(r.errors.forEach(Zd(t,n)),r.warnings.forEach(Zd(t,n))),r}(t,n);if(!r)return null;if(r.warnings.forEach((t=>Gp(r.options.logLevel,t))),r.errors.length>0){if("silent"!==r.options.logLevel)throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:i},n))}var Nf=n(5572),Bf=n(914),Rf=n.n(Bf),zf=n(2854),Hf=n.n(zf),Vf=Rf(),qf=Nf.Parser,jf=function(){function t(){this.transformers=[]}return t.prototype.addTransformer=function(t){this.transformers.push(t)},t.prototype.removeTransformer=function(t){for(var e=this.transformers,n=0;n<e.length;)e[n]===t?e.splice(n,1):n++},t}();function Uf(t,e,n,i,r){i.locator=r;var o=t.prototype.inlineTokenizers,s=t.prototype.inlineMethods;o[e]=i,s.splice(s.indexOf(n),0,e)}function _f(t,e,n,i,r){i.locator=r;var o=t.prototype.blockTokenizers,s=t.prototype.blockMethods;o[e]=i,s.splice(s.indexOf(n),0,e)}function Wf(t,e,n){for(var i=0;i<t.length&&t[i][0]!==e;i++);t.splice(i+1,0,[n])}var Gf=Hf();var Kf=32,$f=91;function Yf(t,e,n,i){for(var r=t.length,o=-1;++o<r;)if(e[t[o][0]].apply(n,i))return!0;return!1}function Jf(t){if(!t)return"";var e=t.indexOf("|");return-1!==e&&("\\"===t.charAt(e-1)&&e--,t=t.slice(0,e)),t=t.trim()}function Qf(t){return!(!t.startsWith("./")&&!t.startsWith("../"))||-1===t.indexOf(":")}var Xf=/(.*?)\s+".*?"\s*$/,Zf=/^\s*<(.*?)>\s*$/;function tg(t){var e=t.match(Xf);return e&&(t=e[1]),(e=t.match(Zf))&&(t=e[1]),t}var eg=/\u00A0/g;function ng(t){return t.replace(eg," ")}var ig=/[!"#$%&()*+,.:;<=>?@^`{|}~\/\[\]\\]/g;function rg(t){return t.replace(/[\\\x00\x08\x0B\x0C\x0E-\x1F ]/g,(function(t){return encodeURIComponent(t)}))}function og(t){var e=t.match(/^#{1,6} (.*)/m);return null!==e?e[1]:null}function sg(t){return t.split("#").filter((function(t){return!!t})).join(" > ").trim()}function ag(t){var e="",n=t.indexOf("|"),i=n>0;return i?(e=t.substr(n+1).trim(),t=t.substr(0,n).trim()):e=sg(t=t.trim()),t.endsWith("\\")&&(t=t.substr(0,t.length-1)),{href:t=ng(t).trim(),title:e,isAlias:i}}function lg(t){var e=t.match(/^\s*([0-9]+)\s*(?:x\s*([0-9]+)\s*)?$/);return e?{x:parseInt(e[1]),y:e[2]?parseInt(e[2]):0}:null}function cg(t,e){var n=lg(t);if(!n)return!1;var i=n.x,r=n.y,o=e.data=e.data||{},s=o.hProperties=o.hProperties||{};return s.width=String(i),0!==r&&(s.height=String(r)),!0}var ug=n(914),hg=n(2854),pg=n(7361),dg=n(1744),fg=n(6630),gg=n(719),mg=n(1696),vg=n(4617),yg={}.hasOwnProperty,bg=!1;function wg(t,e){var n=function(t,e){var n=e||{};void 0===n.allowDangerousHTML||bg||(bg=!0,console.warn("mdast-util-to-hast: deprecation: `allowDangerousHTML` is nonstandard, use `allowDangerousHtml` instead"));var i=n.allowDangerousHtml||n.allowDangerousHTML,r={};return s.dangerous=i,s.definition=n.definitions||fg(t),s.footnoteById=r,s.footnoteOrder=[],s.augment=o,s.handlers=Object.assign({},vg,n.handlers),s.unknownHandler=n.unknownHandler,s.passThrough=n.passThrough,hg(t,"footnoteDefinition",(function(t){var e=String(t.identifier).toUpperCase();yg.call(r,e)||(r[e]=t)})),s;function o(t,e){var n,i;return t&&t.data&&((n=t.data).hName&&("element"!==e.type&&(e={type:"element",tagName:"",properties:{},children:[]}),e.tagName=n.hName),"element"===e.type&&n.hProperties&&(e.properties=Object.assign({},e.properties,n.hProperties)),e.children&&n.hChildren&&(e.children=n.hChildren)),i=t&&t.position?t:{position:t},dg(i)||(e.position={start:pg.start(i),end:pg.end(i)}),e}function s(t,e,n,i){return null==i&&"object"==typeof n&&"length"in n&&(i=n,n={}),o(t,{type:"element",tagName:e,properties:n||{},children:i||[]})}}(t,e),i=gg(n,t),r=mg(n);return r&&(i.children=i.children.concat(ug("text","\n"),r)),i}var kg=qf;kg.globalOptions={breaks:!0,commonmark:!0};var Cg=new jf,xg=new jf,Sg={};function Eg(t){var e=Zh()(t),n=new kg(String(e),e);n.setOptions(kg.globalOptions);for(var i=n.parse(),r=0,o=Cg.transformers;r<o.length;r++){(0,o[r])(i,t)}return i}function Mg(t){var e=t.children[0];if(e&&"yaml"===e.type)try{var n=If(e.value,void 0,{});if("object"==typeof n)return n||void 0}catch(t){return null}}function Lg(t,e){(e=e||{}).allowDangerousHtml=!0,e.handlers=Sg;for(var n=wg(t,e),i=0,r=xg.transformers;i<r.length;i++){(0,r[i])(n,"")}return Yh()(n,{allowDangerousHtml:!0})}!function(t){var e=/\s/,n=function(t){return e.test(t)},i="==";Uf(t,"mark","text",(function(t,e,r){if(this.options.gfm&&e.substr(0,2)===i&&"===="!==e.substr(0,4)&&!n(e.charAt(2))){var o="",s="",a="",l="",c=1,u=e.length,h=t.now();for(h.column+=2,h.offset+=2;++c<u;){if(!("="!==(o=e.charAt(c))||"="!==s||a&&n(a)))return!!r||t(i+l+i)({type:"mark",children:this.tokenizeInline(l,h),data:{hName:"mark"}});l+=s,a=s,s=o}}}),(function(t,e){return t.indexOf(i,e)}))}(kg),function(t){var e=/!?\[\[/g,n=/^(!?)\[\[(.+?)]]/;Uf(t,"ilink","link",(function(t,e,i){var r=n.exec(e);if(r){var o=r[2].trim();if(-1!==o.indexOf("[["))return!1;if(i)return!0;var s="!"===r[1],a=ag(o),l=a.href,c=a.title,u=a.isAlias;if(s)return t(r[0])({type:"iembed",href:l,title:c,data:{hName:"span",hProperties:{className:"internal-embed",src:l,alt:c},hChildren:[{type:"text",value:c}]}});var h={className:"internal-link",href:l,dataHref:l};return u&&(h["aria-label"]=sg(l),h["aria-label-position"]="top"),t(r[0])({type:"ilink",href:l,title:c,data:{hName:"a",hProperties:h,hChildren:[{type:"text",value:c}]}})}}),(function(t,n){e.lastIndex=n;var i=e.exec(t);return i?i.index:-1}))}(kg),function(t){var e=/^#[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]+/,n=/^#\d+$/,i=/\s/;Uf(t,"tag","image",(function(t,i,r){var o=e.exec(i);if(o){var s=o[0];return!n.test(s)&&(!!r||t(s)({type:"tag",tag:s,data:{hName:"a",hProperties:{className:"tag",href:s},hChildren:[{type:"text",value:s}]}}))}}),(function(t,e){for(var n=e;-1!==(n=t.indexOf("#",n));){if(n<=0)return n;var r=t.charAt(n-1);if(i.test(r))return n;n++}}))}(kg),function(t){function e(t){if("boolean"==typeof t.checked){var e=t,n=e.data=e.data||{},i=n.hProperties=n.hProperties||{};i.className="task-list-item",t.checked&&(i.className+=" is-checked"),t.checklist&&(i.dataTask=t.checklist);var r=e.children[0];r&&"paragraph"===r.type&&(e=r),e.children.unshift({type:"checklist",data:{hName:"input",hProperties:{className:"task-list-item-checkbox",type:"checkbox",checked:t.checked}},position:t.position}),delete t.checked}}t.addTransformer((function(t){Gf(t,"listItem",e)}))}(Cg),function(t){Uf(t,"math","text",(function(t,e,n){var i,r,o,s,a,l,c,u=e.length,h=!1,p=!1,d=0;if(92===e.charCodeAt(d)&&(p=!0,d++),36===e.charCodeAt(d)){if(d++,p)return!!n||t(e.slice(0,d))({type:"text",value:"$"});if(36===e.charCodeAt(d)&&(h=!0,d++),o=e.charCodeAt(d),h||32!==o&&9!==o){for(s=d;d<u;){if(r=o,o=e.charCodeAt(d+1),36===r){if(i=e.charCodeAt(d-1),!h&&(32!==i&&9!==i&&(o!=o||o<48||o>57))||h&&36===o){if(a=d-1,d++,h)for(var f=++d;f<u;){var g=e.charAt(f);if("\n"===g){d=f+1;break}if(!/\s/.test(g))break;f++}l=d;break}}else 92===r&&(d++,o=e.charCodeAt(d+1));d++}if(void 0!==l)return!!n||(c=e.slice(s,a+1),t(e.slice(0,l))({type:"inlineMath",value:c,data:{hName:"span",hProperties:{className:h?"math math-block":"math math-inline"},hChildren:[{type:"text",value:c}]}}))}}}),(function(t,e){return t.indexOf("$",e)}))}(kg),function(t){_f(t,"math","fencedCode",(function(t,e,n){for(var i,r,o,s,a,l,c,u,h,p,d,f=e.length,g=0;g<f&&32===e.charCodeAt(g);)g++;for(a=g;g<f&&36===e.charCodeAt(g);)g++;if(!((l=g-a)<2)){for(;g<f&&32===e.charCodeAt(g);)g++;for(c=g;g<f;){if(36===(i=e.charCodeAt(g)))return;if(10===i)break;g++}if(10===e.charCodeAt(g)){if(n)return!0;for(r=[],c!==g&&r.push(e.slice(c,g)),g++,o=-1===(o=e.indexOf("\n",g+1))?f:o;g<f;){for(u=!1,p=g,d=o,s=o,h=0;s>p&&32===e.charCodeAt(s-1);)s--;for(;s>p&&36===e.charCodeAt(s-1);)h++,s--;for(l<=h&&e.indexOf("$",p)===s&&(u=!0,d=s);p<=d&&p-g<a&&32===e.charCodeAt(p);)p++;if(u)for(;d>p&&32===e.charCodeAt(d-1);)d--;if(u&&p===d||r.push(e.slice(p,d)),u)break;g=o+1,o=-1===(o=e.indexOf("\n",g+1))?f:o}return r=r.join("\n"),t(e.slice(0,o))({type:"math",value:r,data:{hName:"div",hProperties:{className:"math math-block"},hChildren:[{type:"text",value:r}]}})}}}));var e=t.prototype;Wf(e.interruptParagraph,"fencedCode","math"),Wf(e.interruptList,"fencedCode","math"),Wf(e.interruptBlockquote,"fencedCode","math")}(kg),function(t){for(var e=t.prototype,n=e.blockMethods,i=[],r=0;r<n.length;r++){var o=n[r];"newline"!==o&&"indentedCode"!==o&&"paragraph"!==o&&"footnoteDefinition"!==o&&i.push([o])}i.push(["footnoteDefinition"]),e.interruptFootnoteDefinition=i,Uf(t,"inlineNote","reference",(function(t,e,n){var i,r,o,s,a,l,c,u=e.length+1,h=0,p=0;if(94===e.charCodeAt(h++)&&e.charCodeAt(h++)===$f){for(o=h;h<u;){if((r=e.charCodeAt(h))!=r)return;if(void 0===l)if(92===r)h+=2;else if(r===$f)p++,h++;else if(93===r){if(0===p){s=h,h++;break}p--,h++}else if(96===r){for(a=h,l=1;96===e.charCodeAt(a+l);)l++;h+=l}else h++;else if(96===r){for(a=h,c=1;96===e.charCodeAt(a+c);)c++;h+=c,l===c&&(l=void 0),c=void 0}else h++}if(void 0!==s)return!!n||((i=t.now()).column+=2,i.offset+=2,t(e.slice(0,h))({type:"footnote",children:this.tokenizeInline(e.slice(o,s),i)}))}}),(function(t,e){return t.indexOf("^[",e)})),_f(t,"footnoteDefinition","definition",(function(t,e,n){for(var i,r,o,a,l,c,u,h,p,d,f,g,m,v=this,y=v.interruptFootnoteDefinition,b=v.offset,w=e.length+1,k=0,C=[];k<w&&(9===(a=e.charCodeAt(k))||a===Kf);)k++;if(e.charCodeAt(k++)===$f&&94===e.charCodeAt(k++)){for(r=k;k<w;){if((a=e.charCodeAt(k))!=a||10===a||9===a||a===Kf)return;if(93===a){o=k,k++;break}k++}if(void 0!==o&&r!==o&&58===e.charCodeAt(k++)){if(n)return!0;for(i=e.slice(r,o),l=t.now(),p=0,d=0,f=k,g=[];k<w;){if((a=e.charCodeAt(k))!=a||10===a)m={start:p,contentStart:f||k,contentEnd:k,end:k},g.push(m),10===a&&(p=k+1,d=0,f=void 0,m.end=p);else if(void 0!==d)if(a===Kf||9===a)(d+=a===Kf?1:4-d%4)>4&&(d=void 0,f=k);else{if(d<4&&m&&(m.contentStart===m.contentEnd||Yf(y,s,v,[t,e.slice(k,1024),!0])))break;d=void 0,f=k}k++}for(k=-1,w=g.length;w>0&&(m=g[w-1]).contentStart===m.contentEnd;)w--;for(c=t(e.slice(0,m.contentEnd));++k<w;)m=g[k],b[l.line+k]=(b[l.line+k]||0)+(m.contentStart-m.start),C.push(e.slice(m.contentStart,m.end));return u=v.enterBlock(),h=v.tokenizeBlock(C.join(""),l),u(),c({type:"footnoteDefinition",identifier:i.toLowerCase(),label:i,children:h})}}})),Uf(t,"footnoteCall","reference",(function(t,e,n){var i,r,o,s,a=e.length+1,l=0;if(e.charCodeAt(l++)===$f&&94===e.charCodeAt(l++)){for(r=l;l<a;){if((s=e.charCodeAt(l))!=s||10===s||9===s||s===Kf)return;if(93===s){o=l,l++;break}l++}if(void 0!==o&&r!==o)return!!n||(i=e.slice(r,o),t(e.slice(0,l))({type:"footnoteReference",identifier:i.toLowerCase(),label:i}))}}),(function(t,e){return t.indexOf("[",e)}));var s=e.blockTokenizers,a=e.inlineTokenizers,l=s.definition,c=a.reference;function u(t,e,n){var i=0;if(33===e.charCodeAt(i)&&i++,e.charCodeAt(i)===$f&&94!==e.charCodeAt(i+1))return c.call(this,t,e,n)}s.definition=function(t,e,n){for(var i=0,r=e.charCodeAt(i);r===Kf||9===r;)r=e.charCodeAt(++i);if(r===$f&&94!==e.charCodeAt(i+1))return l.call(this,t,e,n)},a.reference=u,u.locator=c.locator}(kg),function(t){var e=t.prototype.inlineTokenizers,n=e.break,i=function(t,e,i){if(!this.options.breaks)return n.call(this,t,e,i);for(var r,o=e.length,s=-1;++s<o;){if(10===(r=e.charCodeAt(s)))return!!i||t(e.slice(0,s+1))({type:"break"});if(32!==r)return}};i.locator=n.locator,e.break=i}(kg),function(t){var e="---",n=e.length,i=function(t,i,r){if(i.slice(0,n)===e&&"\n"===i.charAt(n)){for(var o=i.indexOf(e,n);-1!==o&&"\n"!==i.charAt(o-1);)o=i.indexOf(e,o+n);return-1!==o?!!r||t(i.slice(0,o+e.length))({type:"yaml",value:i.slice(e.length+1,o-1)}):void 0}};i.onlyAtStart=!0;var r=t.prototype;r.blockMethods.unshift("frontmatter"),r.blockTokenizers.frontmatter=i}(kg),function(t){var e=/^\^([a-zA-Z0-9\-]+)$/,n=/\s/;Uf(t,"blockid","text",(function(t,n,i){var r=e.exec(n);if(r){var o=r[1];return!!i||t(r[0])({type:"blockid",id:o})}}),(function(t,e){for(var i=e;-1!==(i=t.indexOf("^",i));){if(i<=0)return-1;var r=t.charAt(i-1);if(n.test(r))return i;i++}}));var i=/^\^([a-zA-Z0-9\-]+)(?=$|\n$|\n\n)/;_f(t,"blockid","paragraph",(function(t,e,n){var r=i.exec(e);if(r){var o=r[1];return!!n||t(r[0])({type:"blockid",id:o})}}))}(kg),function(t){t.addTransformer((function(t){Gf(t,"link",(function(t,e,n){var i=t.url;if(i&&Qf(i)){var r=void 0;try{r=decodeURI(i)}catch(t){return}var o=ng(r).trim();n.children[e]={type:"ilink",href:o,title:"",data:{url:i,hName:"a",hProperties:{href:o,dataHref:o,className:"internal-link",title:t.title}},children:t.children,position:t.position}}}))}))}(Cg),function(t){t.addTransformer((function(t){Gf(t,"image",(function(t,e,n){var i=t.url;if(i&&Qf(i)){var r=void 0;try{r=decodeURI(i)}catch(t){return}var o=ng(r).trim();n.children[e]={type:"iembed",href:o,title:t.alt,data:{hName:"div",hProperties:{className:"internal-embed",src:o,alt:t.alt}},children:t.children,position:t.position}}}))}))}(Cg),function(t){t.addTransformer((function(t){var e=[],n={},i={};function r(t,e,n){var i=String(e+1),r=i;n>0&&(r+="-"+n),t.type="fnRef",t.data={hName:"sup",hProperties:{className:"footnote-ref","data-footnote-id":"fnref-"+r}},t.children=[{type:"element",data:{hName:"a",hProperties:{className:"footnote-link",href:"#fn-"+i},hChildren:[{type:"text",value:"["+r+"]"}]}}]}Gf(t,"footnoteDefinition",(function(t){var e=String(t.identifier);i[":"+e]=-1,n[":"+e]={children:t.children,position:t.position}})),Gf(t,["footnote","footnoteReference"],(function(t){if("footnote"===t.type){var o=e.length,s=String(o);e.push({count:1,identifier:s}),n[s]={children:t.children,position:t.position},r(t,o,0)}else{s=String(t.identifier);if(!i.hasOwnProperty(":"+s))return t.type="text",void(t.value=s);-1===(o=i[":"+s])&&(o=e.length,i[":"+s]=o,e.push({count:0,identifier:":"+s}));var a=e[o],l=a.count;a.count++,r(t,o,l)}}));for(var o=[],s=0;s<e.length;s++){var a=e[s],l=n[a.identifier];if(l){var c=l.children,u=c[c.length-1];u&&"paragraph"===u.type&&(c=u.children);for(var h=String(s+1),p=0;p<a.count;p++){var d=h;p>0&&(d+="-"+p),c.push({type:"element",data:{hName:"a",hProperties:{className:"footnote-backref footnote-link",href:"#fnref-"+d},hChildren:[{type:"text",value:"↩︎"}]}})}o.push({type:"listItem",synthetic:!0,data:{hProperties:{"data-footnote-id":"fn-"+h}},children:l.children,position:l.position})}}if(0!==o.length){var f,g=t.children[t.children.length-1],m={start:f=g?g.position.end:{line:1,column:1,offset:0},end:f};t.children=t.children.concat({type:"text",value:"\n",position:m},{type:"element",position:m,data:{hName:"section",hProperties:{className:"footnotes"}},children:[{type:"thematicBreak",position:m},{type:"list",position:m,ordered:!0,start:1,spread:!1,children:o}]})}}))}(Cg),function(t){t.addTransformer((function(t){Gf(t,"image",(function(t){var e=t.alt;if(e){var n=e.lastIndexOf("|");if(-1!==n)cg(e.substr(n+1),t)&&(t.alt=e.substr(0,n))}}))}))}(Cg),function(t){t.addTransformer((function(t){Gf(t,"iembed",(function(t){var e=t.title;if(e){var n=e.lastIndexOf("|");if(-1!==n)cg(e.substr(n+1),t)&&(e=e.substr(0,n));else cg(e,t)&&(e="");t.data.hProperties.alt=e}}))}))}(Cg),function(t,e){e.blockid=function(){return null},t.addTransformer((function(t){for(var e,n=t.children,i=function(t){var i=n[t];if("blockid"===i.type){if(t>0)n[t-1].id=i.id;return n.splice(t,1),t--,e=t,"continue"}if("list"===i.type)return Gf(i,"listItem",(function(t){for(var e=null,n=0,i=t.children;n<i.length;n++){var r=i[n];"paragraph"===r.type&&Gf(r,"blockid",(function(t){e=t.id})),"blockid"===r.type&&(e=t.id)}e&&(t.id=e)})),e=t,"continue";var r=null;Gf(i,"blockid",(function(t){r=t.id})),r&&(i.id=r),e=t},r=0;r<n.length;r++)i(r),r=e}))}(Cg,Sg),function(t){t.addTransformer((function(t,e){Gf(t,"heading",(function(t,n,i){var r=function(t,e){var n=e.position.end,i=e.position.end,r=e.children;return r.length>0&&(n=r[0].position.start,i=r[r.length-1].position.end),t.substring(n.offset,i.offset).trim()}(e,t);t.data={hProperties:{dataHeading:r}}}))}))}(Cg),function(t){function e(t){var e=t.properties;if(e&&!e.className){e.className="external-link",e.target="_blank",e.rel="noopener";var n="",i=t.children;i&&i.length>0&&(n=i[0].value),e.href!==n&&(e["aria-label"]=e.href,e["aria-label-position"]="top")}}t.addTransformer((function(t){Gf(t,{type:"element",tagName:"a"},e)}))}(xg),function(t,e){e.yaml=function(t,e){var n=e.value||"";return t(e.position,"pre",{className:"frontmatter"},[t(e,"code",{className:"language-yaml"},[Vf("text",n)])])}}(0,Sg),function(t,e){var n=/^%%(.+?)%%/;Uf(t,"comment","text",(function(t,e,i){var r=n.exec(e);if(r){if(i)return!0;var o=t.now();return o.column+=2,o.offset+=2,t(r[0])({type:"comment",children:this.tokenizeInline(r[1],o)})}}),(function(t,e){return t.indexOf("%%",e)})),e.comment=function(){return null},_f(t,"comment","fencedCode",(function(t,e,n){for(var i=e.length,r=0;r<i&&32===e.charCodeAt(r);)r++;for(var o=r;r<i&&37===e.charCodeAt(r);)r++;var s=r-o;if(!(s<2)){for(var a=r;r<i;){var l=e.charCodeAt(r);if(37===l)return;if(10===l)break;r++}if(n)return!0;for(var c=i,u=0;r<i;){if(37===e.charCodeAt(r)){if(s===++u){c=r+1;break}}else u=0;r++}var h=e.substring(a,c-s),p=t.now();return t(e.slice(0,c))({type:"comment",value:h,children:this.tokenizeInline(h,p)})}}));var i=t.prototype;Wf(i.interruptParagraph,"fencedCode","comment"),Wf(i.interruptList,"fencedCode","comment"),Wf(i.interruptBlockquote,"fencedCode","comment")}(kg,Sg);var Dg=Object.prototype.hasOwnProperty;function Ag(t,e){if(!t)return null;if("string"==typeof e)return Dg.call(t,e)?t[e]:null;for(var n in t)if(Dg.call(t,n)&&e.test(n))return t[n];return null}function Tg(t,e,n){if(!t)return null;var i=Ag(t,e);if(!i)return null;var r=[];if("string"==typeof i&&(i=i.split(",")),Array.isArray(i)){for(var o=0,s=i;o<s.length;o++){var a=s[o];if("string"==typeof a)if(n)for(var l=0,c=a.split(" ");l<c.length;l++){var u=c[l];u&&r.push(u)}else(a=a.trim())&&r.push(a)}return 0===r.length?null:r}return null}function Pg(t){return t?Tg(t,/^alias(es)?$/i):null}function Og(t){if(!t)return null;var e=Tg(t,/^tag(s)?$/i,!0);if(e)for(var n=0;n<e.length;n++){var i=e[n];"#"!==i.charAt(0)&&(e[n]="#"+i)}return e}function Fg(t){return Qh()(t)}function Ig(t){var e=[];if(!t)return e;for(var n=0,i=t;n<i.length;n++){var r=i[n];e.push(Ng(r))}return e}function Ng(t){if(!t)return"";var e=t.type;if("iembed"===e)return t.href;if("listItem"===e){var n=Ig(t.children);return 1===n.length?n[0]+"\n":n.join("\n")}if("tag"===e)return t.tag;var i=t.value||t.alt||t.title||t.hasOwnProperty("children")&&Ig(t.children).join("")||"";return"tableCell"===e?i+=" ":"tableRow"===e&&(i+="\n"),i}var Bg={"encrypted-media":!0,fullscreen:!0,"oversized-images":!0,"picture-in-picture":!0,"sync-xhr":!0};DOMPurify.addHook("afterSanitizeAttributes",(function(t){if(t instanceof HTMLAnchorElement&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noopener")),t instanceof HTMLIFrameElement&&(t.setAttribute("sandbox","allow-forms allow-presentation allow-same-origin allow-scripts allow-modals"),t.hasAttribute("allow"))){for(var e=[],n=0,i=t.getAttribute("allow").split(";");n<i.length;n++){var r=i[n];r=r.trim().toLowerCase(),Bg.hasOwnProperty(r)&&Bg[r]&&e.push(r)}t.setAttribute("allow",e.join("; "))}}));var Rg={ALLOW_UNKNOWN_PROTOCOLS:!0,RETURN_DOM_FRAGMENT:!0,RETURN_DOM_IMPORT:!0,FORBID_TAGS:["style"],ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","allowfullscreen","allow","aria-label-position"]};function zg(t){return DOMPurify.sanitize(t,Rg)}var Hg,Vg=function(){function t(){this._loaded=!1,this._events=[],this._children=[]}return t.prototype.load=function(){if(!this._loaded){this._loaded=!0,this.onload();for(var t=0,e=this._children;t<e.length;t++){e[t].load()}}},t.prototype.onload=function(){},t.prototype.unload=function(){if(this._loaded){this._loaded=!1;for(var t=0,e=this._children;t<e.length;t++){e[t].unload()}for(var n=0,i=this._events;n<i.length;n++){(0,i[n])()}this._events=[],this.onunload()}},t.prototype.onunload=function(){},t.prototype.addChild=function(t){return this._children.push(t),this._loaded&&t.load(),t},t.prototype.removeChild=function(t){var e=this._children,n=e.indexOf(t);return-1===n||(e.splice(n,1),t.unload()),t},t.prototype.register=function(t){this._events.push(t)},t.prototype.registerEvent=function(t){this.register((function(){return t.e.offref(t)}))},t.prototype.registerDomEvent=function(t,e,n){t.addEventListener(e,n),this.register((function(){return t.removeEventListener(e,n)}))},t.prototype.registerScopeEvent=function(t){this.register((function(){return t.scope.unregister(t)}))},t.prototype.registerInterval=function(t){return this.register((function(){return clearInterval(t)})),t},t}(),qg="logo-crystal",jg="create-new",Ug="trash",_g="search",Wg="right-triangle",Gg="document",Kg="folder",$g="pencil",Yg="left-arrow",Jg="right-arrow",Qg="three-horizontal-bars",Xg="dot-network",Zg="audio-file",tm="image-file",em="pdf-file",nm="gear",im="documents",rm="blocks",om="go-to-file",sm="presentation",am="cross-in-box",lm="microphone",cm="microphone-filled",um="link",hm="popup-open",pm="checkmark",dm="hashtag",fm="left-arrow-with-tail",gm="right-arrow-with-tail",mm="up-arrow-with-tail",vm="down-arrow-with-tail",ym="lines-of-text",bm="vertical-three-dots",wm="pin",km="magnifying-glass",Cm="info",xm="horizontal-split",Sm="vertical-split",Em="calendar-with-checkmark",Mm="sheets-in-box",Lm="up-and-down-arrows",Dm="broken-link",Am="cross",Tm="any-key",Pm="reset",Om="star",Fm="crossed-star",Im="dice",Nm="filled-pin",Bm="enter",Rm="help",zm="vault",Hm="open-vault",Vm="paper-plane",qm="bullet-list",jm="uppercase-lowercase-a",Um="star-list",_m="expand-vertically",Wm="languages",Gm="switch",Km="pane-layout",$m="install",Ym="sync",Jm="check-in-circle",Qm="sync-small",Xm="check-small",Zm="paused",tv="forward-arrow",ev="stacked-levels",nv="bracket-glyph",iv="note-glyph",rv="tag-glyph",ov="price-tag-glyph",sv="heading-glyph",av="bold-glyph",lv="italic-glyph",cv="strikethrough-glyph",uv="highlight-glyph",hv="code-glyph",pv="quote-glyph",dv="link-glyph",fv="bullet-list-glyph",gv="number-list-glyph",mv="checkbox-glyph",vv="undo-glyph",yv="redo-glyph",bv="up-chevron-glyph",wv="down-chevron-glyph",kv="left-chevron-glyph",Cv="right-chevron-glyph",xv="percent-sign-glyph",Sv="keyboard-glyph",Ev="double-up-arrow-glyph",Mv="double-down-arrow-glyph",Lv="image-glyph",Dv="wrench-screwdriver-glyph",Av="clock",Tv="plus-with-circle",Pv="minus-with-circle",Ov="indent-glyph",Fv="unindent-glyph",Iv="fullscreen",Nv="exit-fullscreen",Bv="cloud",Rv="run-command",zv="compress-glyph",Hv="enlarge-glyph",Vv="scissors-glyph",qv="up-curly-arrow-glyph",jv="down-curly-arrow-glyph",Uv="plus-minus-glyph",_v="links-going-out",Wv="links-coming-in",Gv="add-note-glyph",Kv="duplicate-glyph",$v="clock-glyph",Yv="calendar-glyph",Jv="command-glyph",Qv="dice-glyph",Xv="file-explorer-glyph",Zv="graph-glyph",ty="import-glyph",ey="navigate-glyph",ny="open-elsewhere-glyph",iy="bullet-list-glyph",ry="presentation-glyph",oy="paper-plane-glyph",sy="question-mark-glyph",ay="restore-file-glyph",ly="search-glyph",cy="star-glyph",uy="play-audio-glyph",hy="stop-audio-glyph",py="tomorrow-glyph",dy="wand-glyph",fy="workspace-glyph",gy="yesterday-glyph",my="box-glyph",vy="merge-files-glyph",yy="merge-files",by="two-blank-pages",wy="scissors",ky="paste",Cy="paste-text",xy="split",Sy="select-all-text",Ey="wand",My="github-glyph",Ly="reading-glasses",Dy=((Hg={})[jg]='<path fill="currentColor" stroke="currentColor" stroke-width="2" d="M12,0v96h56c3.3,2.5,7.5,4,12,4c11,0,20-9,20-20c0-8.2-5-15.2-12-18.3V29.2l-0.6-0.6l-28-28L58.8,0L12,0z M16,4h40v28h28 v28.4c-1.3-0.3-2.6-0.4-4-0.4c-11,0-20,9-20,20c0,4.5,1.5,8.6,4.1,12H16L16,4z M60,6.9L81.1,28H60L60,6.9z M80,64 c8.9,0,16,7.1,16,16c0,8.9-7.1,16-16,16c-8.9,0-16-7.1-16-16C64,71.1,71.1,64,80,64z M78,70v8h-8v4h8v8h4v-8h8v-4h-8v-8H78z"/>',Hg[Ug]='<path fill="currentColor" stroke="currentColor" stroke-width="2" d="M42,4c-3.3,0-6,2.7-6,6v4H20.3c-0.1,0-0.2,0-0.3,0c-0.1,0-0.2,0-0.3,0H16c-0.7,0-1.4,0.4-1.8,1c-0.4,0.6-0.4,1.4,0,2 c0.4,0.6,1,1,1.8,1h2v72c0,3.3,2.7,6,6,6h52c3.3,0,6-2.7,6-6V18h2c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1 h-3.7c-0.2,0-0.4,0-0.7,0H64v-4c0-3.3-2.7-6-6-6L42,4z M42,8h16c1.1,0,2,0.9,2,2v4H40v-4C40,8.9,40.9,8,42,8z M22,18h15.7 c0.2,0,0.4,0,0.7,0h23.3c0.2,0,0.4,0,0.7,0H78v72c0,1.1-0.9,2-2,2H24c-1.1,0-2-0.9-2-2V18z M38,28c-1.1,0-2,0.9-2,2v50 c0,0.7,0.4,1.4,1,1.8s1.4,0.4,2,0s1-1,1-1.8V30c0-0.5-0.2-1.1-0.6-1.4C39,28.2,38.5,28,38,28z M50,28c-1.1,0-2,0.9-2,2v50 c0,0.7,0.4,1.4,1,1.8c0.6,0.4,1.4,0.4,2,0s1-1,1-1.8V30c0-0.5-0.2-1.1-0.6-1.4C51,28.2,50.5,28,50,28z M62,28c-1.1,0-2,0.9-2,2v50 c0,0.7,0.4,1.4,1,1.8c0.6,0.4,1.4,0.4,2,0s1-1,1-1.8V30c0-0.5-0.2-1.1-0.6-1.4C63,28.2,62.5,28,62,28z"/>',Hg[qg]='<defs><linearGradient id="a" x1="82.85" y1="30.41" x2="51.26" y2="105.9" gradientTransform="matrix(1, 0, 0, -1, -22.41, 110.97)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#6c56cc"/><stop offset="1" stop-color="#9785e5"/></linearGradient></defs><polygon points="62.61,0 30.91,17.52 18,45.45 37.57,90.47 65.35,100 70.44,89.8 81,26.39 62.61,0" fill="#34208c"/><polygon points="81,26.39 61.44,14.41 34.43,35.7 65.35,100 70.44,89.8 81,26.39" fill="url(#a)"/><polygon points="81,26.39 81,26.39 62.61,0 61.44,14.41 81,26.39" fill="#af9ff4"/><polygon points="61.44,14.41 62.61,0 30.91,17.52 34.43,35.7 61.44,14.41" fill="#4a37a0"/><polygon points="34.43,35.7 37.57,90.47 65.35,100 34.43,35.7" fill="#4a37a0"/>',Hg[_g]='<path fill="currentColor" stroke="currentColor" stroke-width="2" d="M42,6C23.2,6,8,21.2,8,40s15.2,34,34,34c7.4,0,14.3-2.4,19.9-6.4l26.3,26.3l5.6-5.6l-26-26.1c5.1-6,8.2-13.7,8.2-22.1 C76,21.2,60.8,6,42,6z M42,10c16.6,0,30,13.4,30,30S58.6,70,42,70S12,56.6,12,40S25.4,10,42,10z"/>',Hg[Wg]='<path fill="currentColor" stroke="currentColor" d="M94.9,20.8c-1.4-2.5-4.1-4.1-7.1-4.1H12.2c-3,0-5.7,1.6-7.1,4.1c-1.3,2.4-1.2,5.2,0.2,7.6L43.1,88c1.5,2.3,4,3.7,6.9,3.7 s5.4-1.4,6.9-3.7l37.8-59.6C96.1,26,96.2,23.2,94.9,20.8L94.9,20.8z"/>',Hg[Gg]='<path fill="currentColor" stroke="currentColor" d="M14,4v92h72V29.2l-0.6-0.6l-24-24L60.8,4L14,4z M18,8h40v24h24v60H18L18,8z M62,10.9L79.1,28H62V10.9z"/>',Hg[Kg]='<path fill="currentColor" stroke="currentColor" d="M6.1,8c-3.3,0-6,2.7-6,6v73.8c-0.1,0.5-0.1,0.9,0.1,1.4c0.6,2.7,3,4.8,5.9,4.8h78c3,0,5.4-2.2,5.9-5.1 c0-0.1,0.1-0.2,0.1-0.4c0,0,0-0.1,0-0.1l0.1-0.3c0,0,0,0,0-0.1l9.9-53.6l0.1-0.2V34c0-3.3-2.7-6-6-6v-6c0-3.3-2.7-6-6-6H36.1 c0,0,0,0-0.1,0c-0.1,0-0.2-0.2-0.6-0.6c-0.5-0.6-1.1-1.5-1.7-2.5c-0.6-1-1.3-2.1-2.1-3C30.9,9,29.7,8,28.1,8L6.1,8z M6.1,12h22 c-0.1,0,0.1,0,0.6,0.6c0.5,0.6,1.1,1.5,1.7,2.5c0.6,1,1.3,2.1,2.1,3c0.8,0.9,1.9,1.9,3.6,1.9h52c1.1,0,2,0.9,2,2v6h-74 c-3.1,0-5.7,2.5-5.9,5.6h-0.1L10.1,34l-6,32.4V14C4.1,12.9,4.9,12,6.1,12z M16.1,32h78c1.1,0,2,0.9,2,2l-9.8,53.1l-0.1,0.1 c0,0.1,0,0.2-0.1,0.2c0,0.1,0,0.2-0.1,0.2c0,0,0,0.1,0,0.1c0,0,0,0,0,0.1c0,0.1,0,0.2-0.1,0.3c0,0.1,0,0.1,0,0.2 c0,0.1,0,0.2,0,0.2c-0.3,0.8-1,1.4-1.9,1.4h-78c-1.1,0-2-0.9-2-2L14,34.4l0.1-0.2V34C14.1,32.9,14.9,32,16.1,32L16.1,32z"/>',Hg[$g]='<path fill="currentColor" stroke="currentColor" d="M86.3,4c-2.5,0-5,1-6.9,2.9l-1.6,1.6l13.7,13.7c0,0,1.6-1.6,1.6-1.6c3.8-3.8,3.8-10,0-13.8C91.2,5,88.7,4,86.3,4z M74.7,12.1c-0.5,0.1-0.9,0.3-1.2,0.6L8.6,77.6c-0.3,0.2-0.5,0.5-0.6,0.9l-4,15c-0.2,0.7,0,1.4,0.5,1.9s1.2,0.7,1.9,0.5l15-4 c0.3-0.1,0.6-0.3,0.9-0.6l64.9-64.9c0.8-0.8,0.8-2,0-2.8c-0.8-0.8-2-0.8-2.8,0L19.9,88.2l-8.1-8.1l64.6-64.6 c0.6-0.6,0.8-1.5,0.4-2.2c-0.3-0.8-1.1-1.2-1.9-1.2C74.8,12.1,74.7,12.1,74.7,12.1z"/>',Hg[Yg]='<path fill="currentColor" stroke="currentColor" d="M70,8c-0.5,0-1,0.2-1.4,0.6l-40,40c-0.8,0.8-0.8,2,0,2.8l40,40c0.5,0.5,1.3,0.7,1.9,0.5c0.7-0.2,1.3-0.7,1.4-1.4 c0.2-0.7,0-1.4-0.5-1.9L32.8,50l38.6-38.6c0.6-0.6,0.8-1.5,0.4-2.2C71.5,8.4,70.8,8,70,8L70,8z"/>',Hg[Jg]='<path fill="currentColor" stroke="currentColor" d="M30,8c-0.8,0-1.5,0.5-1.9,1.2c-0.3,0.8-0.1,1.6,0.5,2.2L67.2,50L28.6,88.6c-0.5,0.5-0.7,1.3-0.5,1.9 c0.2,0.7,0.7,1.2,1.4,1.4c0.7,0.2,1.4,0,1.9-0.5l40-40c0.8-0.8,0.8-2,0-2.8l-40-40C31,8.2,30.5,8,30,8z"/>',Hg[Qg]='<path fill="currentColor" stroke="currentColor" d="M6,18c-0.7,0-1.4,0.4-1.8,1c-0.4,0.6-0.4,1.4,0,2c0.4,0.6,1,1,1.8,1h88c0.7,0,1.4-0.4,1.8-1s0.4-1.4,0-2 c-0.4-0.6-1-1-1.8-1H6z M6,48c-0.7,0-1.4,0.4-1.8,1c-0.4,0.6-0.4,1.4,0,2c0.4,0.6,1,1,1.8,1h88c0.7,0,1.4-0.4,1.8-1 c0.4-0.6,0.4-1.4,0-2s-1-1-1.8-1H6z M6,78c-0.7,0-1.4,0.4-1.8,1c-0.4,0.6-0.4,1.4,0,2c0.4,0.6,1,1,1.8,1h88c0.7,0,1.4-0.4,1.8-1 s0.4-1.4,0-2s-1-1-1.8-1H6z"/>',Hg[Xg]='<path fill="currentColor" stroke="currentColor" d="M12,0C5.4,0,0,5.4,0,12s5.4,12,12,12c2.6,0,5-0.8,6.9-2.2l15.6,15.6C31.7,40.8,30,45.2,30,50c0,4,1.2,7.6,3.2,10.7 L20.1,71.1c-2.1-1.9-5-3.1-8.1-3.1C5.4,68,0,73.4,0,80s5.4,12,12,12s12-5.4,12-12c0-2.1-0.5-4-1.5-5.8l13.2-10.4 C39.3,67.6,44.4,70,50,70c2.7,0,5.2-0.5,7.5-1.4l5.3,9.9C59.9,80.7,58,84.1,58,88c0,6.6,5.4,12,12,12s12-5.4,12-12s-5.4-12-12-12 c-1.3,0-2.6,0.2-3.8,0.6L61,66.7c3.8-2.5,6.7-6.2,8.1-10.6l6.9,1.4c0,0.2,0,0.3,0,0.5c0,6.6,5.4,12,12,12s12-5.4,12-12 c0-6.6-5.4-12-12-12c-5.1,0-9.4,3.2-11.2,7.6l-6.9-1.5c0.1-0.7,0.1-1.4,0.1-2.1c0-7.9-4.6-14.7-11.3-17.9l3.1-8.2 c0.7,0.1,1.5,0.2,2.2,0.2c6.6,0,12-5.4,12-12S70.6,0,64,0S52,5.4,52,12c0,4.4,2.5,8.3,6.1,10.4L55,30.7c-1.6-0.4-3.3-0.7-5-0.7 c-4.8,0-9.2,1.7-12.6,4.5L21.8,18.9c1.4-2,2.2-4.4,2.2-6.9C24,5.4,18.6,0,12,0L12,0z M12,4c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8 S7.6,4,12,4z M64,4c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S59.6,4,64,4z M50,34c8.9,0,16,7.1,16,16c0,8.9-7.1,16-16,16 c-8.9,0-16-7.1-16-16c0-4.3,1.7-8.2,4.4-11.1c0.2-0.1,0.3-0.3,0.4-0.4C41.8,35.7,45.7,34,50,34z M88,50c4.4,0,8,3.6,8,8 s-3.6,8-8,8s-8-3.6-8-8S83.6,50,88,50z M12,72c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S7.6,72,12,72z M70,80c4.4,0,8,3.6,8,8 s-3.6,8-8,8c-4.4,0-8-3.6-8-8c0-3,1.7-5.6,4.1-7c0.1,0,0.1,0,0.2-0.1c0,0,0,0,0.1-0.1c0,0,0.1,0,0.1-0.1C67.6,80.3,68.7,80,70,80z "/>',Hg[Zg]='<path fill="currentColor" stroke="currentColor" d="M48.4,6c-0.6,0-1.2,0.1-1.8,0.3c-1.2,0.4-2.4,1.1-3.4,2.1L19.7,31.9H6.1C2.7,31.9,0,34.7,0,38v24c0,3.3,2.7,6.1,6.1,6.1 h13.6l23.4,23.3c2.2,2.2,5.1,3.2,7.4,2.1c2.4-1.1,3.5-3.8,3.5-6.9v-74c0-3-1.5-5.5-3.9-6.3C49.6,6.1,49,6,48.4,6z M48.4,10 c0.2,0,0.4,0,0.5,0.1c0.6,0.2,1.1,0.7,1.1,2.6v74c0,2.1-0.7,3.1-1.2,3.3c-0.5,0.2-1.5,0.3-3-1.3L20.7,63.4c0,0-0.1,0-0.1-0.1 c0.1,0.1-0.5-1.1-0.5-1.9v-23c0-0.7,0.7-2,0.5-1.9c0,0,0.1-0.1,0.1-0.1L46,11.2C46.9,10.3,47.8,10,48.4,10L48.4,10z M76.6,13.6 c-0.9,0.1-1.5,0.9-1.6,1.7c-0.1,0.9,0.4,1.7,1.2,2.1c11.9,6,20,18.3,20,32.6s-8.1,26.6-20,32.6c-0.7,0.2-1.2,0.9-1.3,1.7 c-0.1,0.8,0.3,1.5,0.9,1.9c0.7,0.4,1.5,0.4,2.1,0c13.2-6.7,22.3-20.3,22.3-36.1s-9-29.5-22.3-36.1c-0.3-0.2-0.7-0.3-1.1-0.3 C76.8,13.6,76.7,13.6,76.6,13.6L76.6,13.6z M69.5,24.3c-0.9,0.1-1.6,0.8-1.7,1.7c-0.1,0.9,0.3,1.8,1.2,2.1 c7.8,4.2,13.1,12.4,13.1,21.9c0,9.5-5.3,17.7-13.1,21.9c-1,0.5-1.3,1.8-0.8,2.7c0.5,1,1.8,1.3,2.7,0.8C80,70.5,86.1,61,86.1,50 c0-11-6.1-20.6-15.2-25.5c-0.4-0.2-0.8-0.3-1.2-0.3C69.6,24.3,69.6,24.3,69.5,24.3z M6.1,36.1h10.4c-0.3,0.8-0.4,1.6-0.4,2.4v23 c0,0.8,0.1,1.7,0.4,2.4H6.1c-1.1,0-1.9-0.9-1.9-1.9V38C4.1,36.9,5,36.1,6.1,36.1z M61.1,36.8c-1,0.1-1.7,0.9-1.8,1.9 c0,1,0.6,1.8,1.6,2c4.1,1.1,7.1,4.8,7.1,9.2s-3,8.2-7.1,9.3c-1.1,0.3-1.7,1.4-1.4,2.4c0.3,1.1,1.4,1.7,2.4,1.4 c5.8-1.5,10.1-6.9,10.1-13.1s-4.3-11.6-10.1-13.1C61.7,36.8,61.4,36.8,61.1,36.8z"/>',Hg[tm]='<path fill="currentColor" stroke="currentColor" d="M0,10v80h100V10L0,10z M4,14h92v52H74.6l-14-10H48.8l-8.2-8.2l-9.7,2l-8.6-12.9L4,55.2L4,14z M75,26c-4.9,0-9,4.1-9,9 s4.1,9,9,9s9-4.1,9-9S79.9,26,75,26z M75,30c2.8,0,5,2.2,5,5s-2.2,5-5,5s-5-2.2-5-5C70,32.2,72.2,30,75,30z M21.7,43.1l7.4,11.1 l10.3-2l7.8,7.8h12.2l14,10H96v16H4V60.8L21.7,43.1z"/>',Hg[em]='<path fill="currentColor" stroke="currentColor" d="M97.3,57.2c-5.4-5.4-21-3.9-28.7-2.9c-7.7-4.7-12.8-11.2-16.4-20.7c1.7-7.2,4.5-18.1,2.4-25C52.7-3,37.7-1.9,35.6,6 c-2,7.2-0.2,17.2,3.1,30c-4.5,10.7-11.1,25-15.8,33.2C14,73.8,1.9,80.9,0.1,89.8c-1.5,7.1,11.6,24.6,34-13.9c10-3.3,20.9-7.4,30.5-9 c8.4,4.6,18.3,7.6,24.9,7.6C100.9,74.5,102,61.9,97.3,57.2z M43.9,6.9c6.8,0,6.2,16.4,1.6,20.9C41.6,20.7,41.6,6.9,43.9,6.9z M30.7,71.3c6-10.5,11.2-23.1,15.4-34.2c5.2,9.4,11.8,17,18.8,22.1C52,62,40.6,67.4,30.7,71.3z M95.7,67.5c0,0-2.6,6.6-25.2-5.7 C93.2,57,97.8,64.9,95.7,67.5z M24.5,76.5C12.2,98.6,6.6,94.1,6.6,94.1C3.6,92.9,3.2,83.5,24.5,76.5z"/>',Hg[nm]='<path fill="currentColor" stroke="currentColor" d="M44.4,4c-1,0-1.8,0.7-2,1.7l-1.9,11.9c-2.3,0.7-4.6,1.6-6.7,2.7l-9.8-7c-0.8-0.6-1.9-0.5-2.6,0.2l-7.8,7.8 c-0.7,0.7-0.8,1.8-0.2,2.6l6.9,9.9c-1.2,2.1-2.1,4.4-2.8,6.7l-11.9,2c-1,0.2-1.7,1-1.7,2v11c0,1,0.7,1.8,1.6,2l11.9,2.1 c0.7,2.4,1.6,4.6,2.8,6.7l-7,9.8c-0.6,0.8-0.5,1.9,0.2,2.6l7.8,7.8c0.7,0.7,1.8,0.8,2.6,0.2l9.9-6.9c2.1,1.2,4.3,2.1,6.7,2.8 l2,11.9c0.2,1,1,1.7,2,1.7h11c1,0,1.8-0.7,2-1.7l2.1-12c2.3-0.7,4.6-1.6,6.7-2.8l10,7c0.8,0.6,1.9,0.5,2.6-0.2l7.8-7.8 c0.7-0.7,0.8-1.8,0.2-2.6l-7.1-9.9c1.1-2.1,2.1-4.3,2.7-6.6l12-2.1c1-0.2,1.7-1,1.7-2v-11c0-1-0.7-1.8-1.7-2l-12-2 c-0.7-2.3-1.6-4.5-2.7-6.6l7-10c0.6-0.8,0.5-1.9-0.2-2.6l-7.8-7.8c-0.7-0.7-1.8-0.8-2.6-0.2l-9.8,7.1c-2.1-1.2-4.3-2.1-6.7-2.8 l-2.1-12c-0.2-1-1-1.7-2-1.7L44.4,4z M46.1,8h7.6l2,11.4c0.1,0.8,0.7,1.4,1.5,1.6c2.9,0.7,5.7,1.9,8.2,3.4 c0.7,0.4,1.6,0.4,2.2-0.1l9.4-6.7l5.4,5.4l-6.7,9.5c-0.5,0.6-0.5,1.5-0.1,2.2c1.5,2.5,2.6,5.2,3.4,8.1c0.2,0.8,0.8,1.4,1.6,1.5 L92,46.1v7.6l-11.4,2c-0.8,0.1-1.4,0.7-1.6,1.5c-0.7,2.9-1.9,5.6-3.4,8.1c-0.4,0.7-0.4,1.6,0.1,2.2l6.8,9.4l-5.4,5.4l-9.5-6.7 c-0.7-0.5-1.5-0.5-2.2-0.1c-2.5,1.5-5.2,2.7-8.2,3.4c-0.8,0.2-1.3,0.8-1.5,1.6l-2,11.4h-7.6l-1.9-11.3c-0.1-0.8-0.7-1.4-1.5-1.6 c-2.9-0.7-5.7-1.9-8.2-3.4c-0.7-0.4-1.5-0.4-2.2,0.1l-9.4,6.6l-5.4-5.4l6.6-9.3c0.5-0.7,0.5-1.5,0.1-2.2c-1.5-2.5-2.7-5.3-3.4-8.2 c-0.2-0.8-0.8-1.3-1.6-1.5L8,53.7v-7.6l11.3-1.9c0.8-0.1,1.4-0.7,1.6-1.5c0.7-2.9,1.9-5.7,3.4-8.2c0.4-0.7,0.4-1.5-0.1-2.2 l-6.6-9.4l5.4-5.4l9.3,6.7c0.6,0.5,1.5,0.5,2.2,0.1c2.5-1.5,5.3-2.7,8.2-3.4c0.8-0.2,1.4-0.8,1.5-1.6L46.1,8z M50,34 c-8.8,0-16,7.2-16,16s7.2,16,16,16s16-7.2,16-16S58.8,34,50,34z M50,38c6.7,0,12,5.3,12,12s-5.3,12-12,12s-12-5.3-12-12 S43.3,38,50,38z"/>',Hg[im]='<path fill="currentColor" stroke="currentColor" d="M74,4c-0.1,0-0.2,0-0.3,0H40v11.5l4,4V8h28v20h20v48H64v4h32V26.3c0-0.2,0-0.4,0-0.6v-0.5l-0.4-0.4 c-0.1-0.1-0.2-0.3-0.4-0.4c0,0,0,0,0,0L75.6,4.8c-0.1-0.1-0.2-0.3-0.4-0.4L74.8,4h-0.5C74.2,4,74.1,4,74,4L74,4z M76,10.8L89.2,24 H76V10.8z M38,20c-0.1,0-0.2,0-0.3,0H4v76h56V42.3c0-0.2,0-0.4,0-0.6v-0.5l-0.4-0.4c-0.1-0.1-0.2-0.3-0.4-0.4L39.6,20.7 c-0.1-0.1-0.2-0.3-0.4-0.4L38.8,20h-0.5C38.2,20,38.1,20,38,20z M8,24h28v20h20v48H8L8,24z M40,26.8L53.2,40H40V26.8z M60.5,36 l4,4H84v-4L60.5,36z M64,48v4h12v-4H64z M16,52v4h32v-4H16z M64,60v4h20v-4H64z M16,64v4h24v-4H16z M16,76v4h32v-4H16z"/>',Hg[rm]='<path fill="currentColor" stroke="currentColor" d="M47.7,0c-0.5,0.1-1,0.4-1.3,0.8L32.3,20.3c-0.6,0.9-0.4,2.1,0.4,2.7l19.4,14.1c0,0,0.1,0.1,0.1,0.1c0.9,0.5,2,0.3,2.6-0.6 l14.2-19.4c0.3-0.4,0.5-1,0.4-1.5c-0.1-0.5-0.4-1-0.8-1.3L49.2,0.4C48.8,0.1,48.3,0,47.9,0C47.8,0,47.8,0,47.7,0z M73.6,0 c-1,0.2-1.6,1-1.6,2v24c0,1.1,0.9,2,2,2h24c1.1,0,2-0.9,2-2V2c0-1.1-0.9-2-2-2H74c-0.1,0-0.1,0-0.2,0S73.7,0,73.6,0z M76,4h20v20 H76V4z M48.5,4.8l16.1,11.7L52.9,32.8L36.7,20.9L48.5,4.8z M1.6,24c-1,0.2-1.6,1-1.6,2v23.8c0,0.1,0,0.1,0,0.2c0,0.1,0,0.1,0,0.2 v23.6c0,0.1,0,0.1,0,0.2c0,0.1,0,0.1,0,0.2V98c0,1.1,0.9,2,2,2h72c1.1,0,2-0.9,2-2V74c0-1.1-0.9-2-2-2H52V50c0-1.1-0.9-2-2-2H28 V26c0-1.1-0.9-2-2-2H2c-0.1,0-0.1,0-0.2,0S1.7,24,1.6,24L1.6,24z M4,28h20v20H4L4,28z M87.3,30.9c-0.1,0-0.2,0-0.3,0.1l-22.7,7.6 c-0.5,0.2-0.9,0.5-1.2,1c-0.2,0.5-0.3,1-0.1,1.5l7.6,22.7c0,0,0,0.1,0.1,0.1c0.4,1,1.5,1.5,2.5,1.1l22.7-7.6 c1-0.4,1.6-1.5,1.3-2.5l-7.6-22.7C89.1,31.3,88.2,30.7,87.3,30.9L87.3,30.9z M86.3,35.4l6.3,19l-18.9,6.3l-6.3-18.9L86.3,35.4z M4,52h20v20H4L4,52z M28,52h20v20H28L28,52z M4,76h20v20H4L4,76z M28,76h20v20H28L28,76z M52,76h20v20H52V76z"/>',Hg[om]='<path fill="currentColor" stroke="currentColor" d="M16,4c-1.1,0-2,0.9-2,2v26h4V8h64v84H18V78h-4v16c0,1.1,0.9,2,2,2h68c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2L16,4z M32,20v4 h36v-4H32z M32,32v4h36v-4H32z M22,36v12H6v2v12h16v12l25.3-19L22,36z M26,44l14.7,11L26,66v-8H10v-6h16V44z M54,46 c-1.1,0-2,0.9-2,2v14c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V48c0-1.1-0.9-2-2-2H54z M56,50h8v10h-8V50z M32,74v4h36v-4H32z"/>',Hg[sm]='<path fill="currentColor" stroke="currentColor" d="M5.6,4C4.7,4.2,4,5,4,6v8c0,1.1,0.9,2,2,2h2v62c0,1.1,0.9,2,2,2h38v4.4c-2.3,0.8-4,3-4,5.6c0,3.3,2.7,6,6,6s6-2.7,6-6 c0-2.6-1.7-4.8-4-5.6V80h38c1.1,0,2-0.9,2-2V16h2c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2H6C5.9,4,5.9,4,5.8,4S5.7,4,5.6,4L5.6,4z M8,8 h84v4H8L8,8z M12,16h76v60H50.4c-0.3-0.1-0.5-0.1-0.8,0H12L12,16z M37.6,28c-1,0.2-1.6,1-1.6,2v10c0,1.1,0.9,2,2,2h10 c1.1,0,2-0.9,2-2c0-6.6-5.4-12-12-12c-0.1,0-0.1,0-0.2,0C37.8,28,37.7,28,37.6,28z M40,32.4c2.8,0.7,4.9,2.8,5.6,5.6H40V32.4z M32,34c-6.6,0-12,5.4-12,12c0,6.6,5.4,12,12,12s12-5.4,12-12c0-1.1-0.9-2-2-2h-8v-8C34,34.9,33.1,34,32,34z M55.4,34 c-1.1,0.2-1.9,1.2-1.7,2.3s1.2,1.9,2.3,1.7h22c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H56c-0.1,0-0.1,0-0.2,0 c-0.1,0-0.1,0-0.2,0C55.6,34,55.5,34,55.4,34L55.4,34z M30,38.4V46c0,1.1,0.9,2,2,2h7.6c-0.9,3.4-3.9,6-7.6,6c-4.4,0-8-3.6-8-8 C24,42.3,26.6,39.3,30,38.4z M55.4,44c-1.1,0.2-1.9,1.2-1.7,2.3c0.2,1.1,1.2,1.9,2.3,1.7h22c0.7,0,1.4-0.4,1.8-1 c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H56c-0.1,0-0.1,0-0.2,0c-0.1,0-0.1,0-0.2,0C55.6,44,55.5,44,55.4,44L55.4,44z M55.4,54 c-1.1,0.2-1.9,1.2-1.7,2.3c0.2,1.1,1.2,1.9,2.3,1.7h22c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H56 c-0.1,0-0.1,0-0.2,0c-0.1,0-0.1,0-0.2,0C55.6,54,55.5,54,55.4,54L55.4,54z M49.8,88c0.1,0,0.1,0,0.2,0c1.1,0,2,0.9,2,2s-0.9,2-2,2 c-1.1,0-2-0.9-2-2C48,88.9,48.8,88.1,49.8,88z"/>',Hg[am]='<path fill="currentColor" stroke="currentColor" d="M18,8C12.5,8,8,12.5,8,18v64c0,5.5,4.5,10,10,10h64c5.5,0,10-4.5,10-10V18c0-5.5-4.5-10-10-10L18,8z M18,12h64 c3.3,0,6,2.7,6,6v64c0,3.3-2.7,6-6,6H18c-3.3,0-6-2.7-6-6V18C12,14.7,14.7,12,18,12z M33.4,30.6l-2.8,2.8L47.2,50L30.6,66.6 l2.8,2.8L50,52.8l16.6,16.6l2.8-2.8L52.8,50l16.6-16.6l-2.8-2.8L50,47.2L33.4,30.6z"/>',Hg[lm]='<path fill="currentColor" stroke="currentColor" d="M50,0c-12.1,0-22,9.6-22,21.5v25.1c0,11.9,9.9,21.5,22,21.5s22-9.6,22-21.5V21.5C72,9.6,62.1,0,50,0z M50,4.1 c10,0,17.9,7.8,17.9,17.4V22H57c-0.1,0-0.1,0-0.2,0c-1.1,0.1-2,1-1.9,2.1c0.1,1.1,1,2,2.1,1.9h10.9v4H57c-0.1,0-0.1,0-0.2,0 c-1.1,0.1-2,1-1.9,2.1s1,2,2.1,1.9h10.9v4H57c-0.1,0-0.1,0-0.2,0c-1.1,0.1-2,1-1.9,2.1s1,2,2.1,1.9h10.9v4.6 c0,9.6-8,17.4-17.9,17.4S32,56.2,32,46.6V42H43c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H32v-4H43 c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H32v-4H43c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2 c-0.4-0.6-1-1-1.8-1H32v-0.6C32,11.9,40,4.1,50,4.1L50,4.1z M19.6,34.3c-0.8,0.2-1.4,0.9-1.4,1.7v10c0,15.4,11.1,28.3,25.7,31.2 V90h-13c-3.8,0-6.9,3.1-6.9,6.9v2.9h51.7v-2.9c0-3.8-3.1-6.9-6.9-6.9H56V77.2C70.6,74.4,81.7,61.4,81.7,46V36c0-1-0.8-1.7-1.7-1.7 s-1.7,0.8-1.7,1.7v10c0,15.6-12.6,28.2-28.2,28.2S21.7,61.6,21.7,46V36c0-0.5-0.2-1-0.6-1.3c-0.4-0.3-0.9-0.5-1.4-0.4 C19.7,34.3,19.7,34.3,19.6,34.3L19.6,34.3z M48,77.6c0.6,0,1.3,0.1,1.9,0.1c0.6,0,1.3-0.1,1.9-0.1v12.3H48L48,77.6z M30.9,94h14.6 c0.2,0,0.3,0.1,0.5,0.1h8c0.1,0,0.3,0,0.4-0.1h14.4c1.3,0,2.1,0.8,2.6,1.9h-43C28.8,94.8,29.6,94,30.9,94z"/>',Hg[um]='<path fill="currentColor" stroke="currentColor" d="M74,8c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-2.9,2.9-4.7,6.6-5.1,10.6C46,34.6,46,35.3,46,36c0,2.7,0.6,5.4,1.8,7.8l3.1-3.1 C50.3,39.2,50,37.6,50,36c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1s7.3,1.5,9.9,4.1c2.6,2.6,4.1,6.2,4.1,9.9 s-1.5,7.3-4.1,9.9l-10,10C71.3,48.5,67.7,50,64,50c-1.6,0-3.2-0.3-4.7-0.8l-3.1,3.1c2.4,1.1,5,1.8,7.8,1.8c4.8,0,9.3-1.9,12.7-5.3 l10-10C90.1,35.3,92,30.8,92,26s-1.9-9.3-5.3-12.7C83.3,9.9,78.8,8,74,8L74,8z M62,36c-0.5,0-1,0.2-1.4,0.6l-24,24 c-0.5,0.5-0.7,1.2-0.6,1.9c0.2,0.7,0.7,1.2,1.4,1.4c0.7,0.2,1.4,0,1.9-0.6l24-24c0.6-0.6,0.8-1.5,0.4-2.2C63.5,36.4,62.8,36,62,36 z M36,46c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-3.1,3.1-5,7.2-5.2,11.6c0,0.4,0,0.8,0,1.2c0,4.8,1.9,9.3,5.3,12.7 C16.7,90.1,21.2,92,26,92s9.3-1.9,12.7-5.3l10-10C52.1,73.3,54,68.8,54,64c0-2.7-0.6-5.4-1.8-7.8l-3.1,3.1 c0.5,1.5,0.8,3.1,0.8,4.7c0,3.7-1.5,7.3-4.1,9.9l-10,10C33.3,86.5,29.7,88,26,88s-7.3-1.5-9.9-4.1S12,77.7,12,74 c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1c1.6,0,3.2,0.3,4.7,0.8l3.1-3.1C41.4,46.6,38.7,46,36,46L36,46z"/>',Hg[hm]='<path fill="currentColor" stroke="currentColor" d="M21.5,8.3c-3.7,0-6.6,2.9-6.6,6.6v65.8l4.4-4.4V14.9c0-1.3,0.9-2.2,2.2-2.2h57c1.3,0,2.2,0.9,2.2,2.2v70.2 c0,1.3-0.9,2.2-2.2,2.2H30.3l-4.4,4.4h52.6c3.7,0,6.6-2.9,6.6-6.6V14.9c0-3.7-2.9-6.6-6.6-6.6H21.5z M30.3,50v4.4h18.9l-34,34 l3.1,3.1l34-34v18.9h4.4V50H30.3z"/>',Hg[pm]='<path fill="currentColor" stroke="currentColor" d="M85.8,17.3c-0.1,0-0.1,0-0.2,0.1c-0.5,0.1-1,0.5-1.3,0.9L43.4,81.6L15.3,56.2c-0.5-0.6-1.3-0.9-2.1-0.7 c-0.8,0.2-1.3,0.9-1.5,1.6c-0.1,0.8,0.2,1.6,0.9,2l29.8,27c0.4,0.4,1,0.6,1.6,0.5c0.6-0.1,1.1-0.4,1.4-0.9l42.2-65.4 c0.5-0.7,0.5-1.5,0.1-2.2S86.5,17.1,85.8,17.3L85.8,17.3z"/>',Hg[dm]='<path fill="currentColor" stroke="currentColor" d="M36,18l-1.5,16H20l-0.4,4h14.5l-2.4,26H17.2l-0.4,4h14.5L30,82h4l1.3-14h26L60,82h4l1.3-14h15.5l0.4-4H65.7l2.4-26h15.5 l0.4-4H68.5L70,18h-4l-1.5,16h-26L40,18L36,18z M38.1,38h26l-2.4,26h-26L38.1,38z"/>',Hg[fm]='<path fill="currentColor" stroke="currentColor" d="M39.6,26.2c-0.4,0.1-0.8,0.3-1.1,0.6L16.7,48.6L15.3,50l1.4,1.4l21.8,21.8c0.5,0.6,1.3,0.9,2,0.7c0.7-0.2,1.3-0.8,1.5-1.5 c0.2-0.8-0.1-1.5-0.7-2L22.9,52H82c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H22.9l18.4-18.4 c0.6-0.6,0.8-1.6,0.4-2.3C41.4,26.5,40.5,26,39.6,26.2L39.6,26.2z"/>',Hg[gm]='<path fill="currentColor" stroke="currentColor" d="M59.7,26.2c-0.8,0.1-1.4,0.7-1.6,1.4c-0.2,0.7,0,1.5,0.6,2L77.1,48H18c-0.1,0-0.1,0-0.2,0c-1.1,0.1-2,1-1.9,2.1 c0.1,1.1,1,2,2.1,1.9h59.1L58.7,70.4c-0.6,0.5-0.9,1.3-0.7,2c0.2,0.7,0.8,1.3,1.5,1.5c0.8,0.2,1.5-0.1,2-0.7l21.8-21.7l1.4-1.4 l-1.4-1.4L61.5,26.8c-0.4-0.4-1-0.7-1.6-0.6C59.8,26.2,59.8,26.2,59.7,26.2L59.7,26.2z"/>',Hg[mm]='<path fill="currentColor" stroke="currentColor" d="M50,15.3l-1.4,1.4L26.8,38.5c-0.6,0.5-0.9,1.3-0.7,2c0.2,0.7,0.8,1.3,1.5,1.5c0.8,0.2,1.5-0.1,2-0.7L48,22.9V82 c0,0.7,0.4,1.4,1,1.8c0.6,0.4,1.4,0.4,2,0c0.6-0.4,1-1,1-1.8V22.9l18.4,18.4c0.5,0.6,1.3,0.9,2,0.7c0.7-0.2,1.3-0.8,1.5-1.5 c0.2-0.8-0.1-1.5-0.7-2L51.4,16.7L50,15.3z"/>',Hg[vm]='<path fill="currentColor" stroke="currentColor" d="M49.8,15.9c-0.1,0-0.2,0-0.3,0.1c-0.9,0.2-1.6,1-1.6,2v59.1L29.6,58.7c-0.4-0.4-0.9-0.6-1.4-0.6c-0.8,0-1.5,0.5-1.8,1.3 c-0.3,0.8-0.1,1.6,0.5,2.2l21.7,21.8l1.4,1.4l1.4-1.4l21.8-21.8c0.6-0.5,0.9-1.3,0.7-2c-0.2-0.7-0.8-1.3-1.5-1.5 c-0.8-0.2-1.5,0.1-2,0.7L52,77.1V18c0-0.6-0.2-1.1-0.6-1.5C51,16.1,50.4,15.9,49.8,15.9L49.8,15.9z"/>',Hg[ym]='<path fill="currentColor" stroke="currentColor" d="M16,10c-3.3,0-6,2.7-6,6v68c0,3.3,2.7,6,6,6h68c3.3,0,6-2.7,6-6V16c0-3.3-2.7-6-6-6L16,10z M16,14h68c1.1,0,2,0.9,2,2v68 c0,1.1-0.9,2-2,2H16c-1.1,0-2-0.9-2-2V16C14,14.9,14.9,14,16,14z M22,24v4h52v-4H22z M22,36v4h34v-4L22,36z M22,48v4h52v-4H22z M22,60v4h34v-4H22z M22,72v4h52v-4H22z"/>',Hg[bm]='<path fill="currentColor" stroke="currentColor" d="M50,6c-6.6,0-12,5.4-12,12s5.4,12,12,12s12-5.4,12-12S56.6,6,50,6z M50,10c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8 S45.6,10,50,10z M50,38c-6.6,0-12,5.4-12,12s5.4,12,12,12s12-5.4,12-12S56.6,38,50,38z M50,42c4.4,0,8,3.6,8,8s-3.6,8-8,8 s-8-3.6-8-8S45.6,42,50,42z M50,70c-6.6,0-12,5.4-12,12c0,6.6,5.4,12,12,12s12-5.4,12-12C62,75.4,56.6,70,50,70z M50,74 c4.4,0,8,3.6,8,8c0,4.4-3.6,8-8,8s-8-3.6-8-8C42,77.6,45.6,74,50,74z"/>',Hg[wm]='<path fill="currentColor" stroke="currentColor" d="M71.9,0c-0.4,0-0.7,0.1-1.1,0.2c-1.5,0.4-2.8,1.4-3.9,2.7c0,0,0,0-0.1,0.1L50.1,26.4c-10.3-2.4-21.5,0.3-29.4,8.3 c-0.8,0.8-0.8,2,0,2.8l14.9,14.8L0.4,96.7c-0.6,0.8-0.6,1.9,0.1,2.7c0.7,0.7,1.9,0.8,2.7,0.1l44.4-35.1l14.9,14.8 c0.8,0.8,2,0.8,2.8,0c8.1-8.1,10.7-19.5,8.2-29.9l23.4-15.9c0,0,0,0,0.1-0.1c1.4-1,2.3-2.3,2.7-3.7c0.4-1.5,0.2-3.3-1-4.6 L75.3,1.3c-0.6-0.6-1.4-1-2.2-1.1C72.7,0,72.3,0,71.9,0z M72.3,4c0.1,0,0.1,0,0.1,0.1l23.6,23.8c0.1,0.1,0.1,0.1,0,0.6 c-0.1,0.4-0.6,1.1-1.3,1.7l-0.1,0.1L70.3,46.7c0,0,0,0-0.1,0.1l-0.1,0.1c-0.7,0.5-0.9,1.4-0.7,2.2c2.6,8.8,0.6,18.4-5.7,25.7 L25.1,36.3c7.2-6.2,16.8-8.3,25.4-5.8c0.8,0.2,1.7-0.1,2.2-0.8L70,5.4l0.1-0.1c0.6-0.7,1.3-1.1,1.7-1.2C72,4,72.2,4,72.3,4L72.3,4 z M38.4,55.2l6.4,6.4L14.3,85.7L38.4,55.2z"/>',Hg[km]='<path fill="currentColor" stroke="currentColor" d="M42,6C23.2,6,8,21.2,8,40s15.2,34,34,34c7.4,0,14.3-2.4,19.9-6.4l26.3,26.3l5.6-5.6l-26-26.1c5.1-6,8.2-13.7,8.2-22.1 C76,21.2,60.8,6,42,6z M42,10c16.6,0,30,13.4,30,30S58.6,70,42,70S12,56.6,12,40S25.4,10,42,10z"/>',Hg[Cm]='<path fill="currentColor" stroke="currentColor" d="M50,4C24.6,4,4,24.6,4,50s20.6,46,46,46s46-20.6,46-46S75.4,4,50,4L50,4z M50,8c23.2,0,42,18.8,42,42S73.2,92,50,92 S8,73.2,8,50S26.8,8,50,8z M50,22c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6S53.3,22,50,22z M42,42v4h2h2v26h-2h-2v4h2h2h8h2h2v-4h-2 h-2V42h-2h-8L42,42z"/>',Hg[xm]='<path fill="currentColor" stroke="currentColor" d="M50,0.2l-1.4,1.4l-17,17c-0.8,0.8-0.8,2.1,0,2.9c0.8,0.8,2.1,0.8,2.9,0L48,7.9V40H0v4h100v-4H52V7.9l13.6,13.6 c0.8,0.8,2.1,0.8,2.9,0c0.8-0.8,0.8-2.1,0-2.9l-17-17L50,0.2z M49.8,55.9c-0.1,0-0.1,0-0.2,0.1H0v4h48v32.1L34.4,78.6 c-0.5-0.5-1.2-0.7-1.9-0.6c-0.8,0.1-1.4,0.7-1.6,1.4c-0.2,0.7,0,1.5,0.6,2l17,17l1.4,1.4l1.4-1.4l17-17c0.8-0.8,0.8-2.1,0-2.9 s-2.1-0.8-2.9,0L52,92.1V60h48v-4H50.4C50.2,55.9,50,55.9,49.8,55.9L49.8,55.9z"/>',Hg[Sm]='<path fill="currentColor" stroke="currentColor" d="M40,0v48H7.9l13.6-13.6c0.6-0.6,0.8-1.6,0.4-2.3c-0.4-0.8-1.3-1.2-2.1-1.1c-0.4,0-0.9,0.3-1.2,0.6l-17,17L0.2,50l1.4,1.4 l17,17c0.8,0.8,2.1,0.8,2.9,0c0.8-0.8,0.8-2.1,0-2.9L7.9,52H40v48h4V50.4c0.1-0.3,0.1-0.5,0-0.8V0H40z M56,0v49.4 c-0.1,0.4-0.1,0.8,0,1.2V100h4V52h32.1L78.6,65.6c-0.8,0.8-0.8,2.1,0,2.9c0.8,0.8,2.1,0.8,2.9,0l17-17l1.4-1.4l-1.4-1.4l-17-17 c-0.4-0.4-1-0.7-1.6-0.6c-0.1,0-0.2,0-0.3,0.1c-0.7,0.1-1.4,0.7-1.6,1.4c-0.2,0.7,0,1.5,0.6,2L92.1,48H60V0H56z"/>',Hg[Em]='<path fill="currentColor" stroke="currentColor" d="M24,0c-2.2,0-4,1.8-4,4v4H8c-2.1,0-4,1.6-4,3.9v80.5c0,1.1,0.7,2.3,1.5,2.8C6.3,95.8,7.1,96,8,96h84 c0.9,0,1.7-0.2,2.5-0.8c0.8-0.6,1.5-1.7,1.5-2.8V11.9C96,9.8,94.3,8,92.2,8H80V4c0-2.2-1.8-4-4-4h-4c-2.2,0-4,1.8-4,4v4H32V4 c0-2.2-1.8-4-4-4L24,0z M24,4h4v12h-4V4z M72,4h4v12h-4V4z M8,12h12v4c0,2.2,1.8,4,4,4h4c2.2,0,4-1.8,4-4v-4h36v4c0,2.2,1.8,4,4,4 h4c2.2,0,4-1.8,4-4v-4h12v14H8L8,12z M8,30h84v62H8L8,30z M65.4,41.2l-1.1,1.7L48,68.2l-10.7-9.7l-1.5-1.3l-2.7,3l1.5,1.3 l14.2,12.8l18.8-29.2l1.1-1.7L65.4,41.2z"/>',Hg[Mm]='<path fill="currentColor" stroke="currentColor" d="M22,6c-1.1,0-2,0.9-2,2v8h-2c-1.1,0-2,0.9-2,2v8h-2c-1.1,0-2,0.9-2,2v30H8c-1.1,0-2,0.9-2,2v32c0,1.1,0.9,2,2,2h84 c1.1,0,2-0.9,2-2V60c0-1.1-0.9-2-2-2h-4V28c0-1.1-0.9-2-2-2h-2v-8c0-1.1-0.9-2-2-2h-2V8c0-1.1-0.9-2-2-2L22,6z M24,10h52v6H24V10z M20,20h1.7c0.2,0,0.4,0,0.7,0h55.3c0.2,0,0.4,0,0.7,0H80v6H20L20,20z M16,30h1.7c0.2,0,0.4,0,0.7,0h63.3c0.2,0,0.4,0,0.7,0H84v28 H62c-1.1,0-2,0.9-2,2c0,5.5-4.5,10-10,10s-10-4.5-10-10c0-1.1-0.9-2-2-2H16V30z M10,62h26.4c1,6.7,6.6,12,13.6,12 s12.6-5.3,13.6-12H90v28H10L10,62z"/>',Hg[Lm]='<path fill="currentColor" stroke="currentColor" d="M25.8,5.9c-0.1,0-0.2,0-0.3,0.1c-0.1,0-0.1,0-0.2,0.1c-0.1,0-0.1,0-0.2,0.1c-0.1,0.1-0.3,0.2-0.4,0.3 c-0.1,0.1-0.2,0.1-0.3,0.2c-0.1,0.1-0.2,0.2-0.3,0.3L8.6,22.6c-0.8,0.8-0.8,2.1,0,2.9c0.8,0.8,2.1,0.8,2.9,0L24,12.9V76 c0,0.7,0.4,1.4,1,1.8c0.6,0.4,1.4,0.4,2,0c0.6-0.4,1-1,1-1.8V12.9l12.6,12.6c0.8,0.8,2.1,0.8,2.9,0c0.8-0.8,0.8-2.1,0-2.9 L27.7,6.9c-0.1-0.2-0.3-0.4-0.6-0.6c-0.2-0.2-0.5-0.3-0.8-0.3C26.2,6,26,5.9,25.8,5.9L25.8,5.9z M74,6c-1.1,0-2,0.9-2,2s0.9,2,2,2 s2-0.9,2-2S75.1,6,74,6z M74,14c-1.1,0-2,0.9-2,2s0.9,2,2,2s2-0.9,2-2S75.1,14,74,14z M73.8,21.9c-0.1,0-0.2,0-0.3,0.1 c-0.9,0.2-1.6,1-1.6,2v63.1L59.4,74.6c-0.5-0.5-1.2-0.7-1.9-0.6c-0.8,0.1-1.4,0.7-1.6,1.4c-0.2,0.7,0,1.5,0.6,2l15.8,15.7 c0,0.1,0.1,0.1,0.1,0.2l0.1,0.1c0,0,0.1,0.1,0.1,0.1c0,0,0,0,0.1,0c0.1,0.1,0.3,0.2,0.4,0.3c0,0,0,0,0.1,0c0,0,0.1,0,0.1,0.1 c0,0,0,0,0.1,0c0.1,0,0.1,0,0.2,0.1c0.2,0,0.4,0,0.6,0c0,0,0.1,0,0.1,0c0.2,0,0.3-0.1,0.5-0.2c0.3-0.1,0.5-0.3,0.7-0.6l15.9-15.8 c0.8-0.8,0.8-2.1,0-2.9c-0.8-0.8-2.1-0.8-2.9,0L76,87.1V24c0-0.6-0.2-1.1-0.6-1.5C75,22.1,74.4,21.9,73.8,21.9L73.8,21.9z M26,82 c-1.1,0-2,0.9-2,2c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2C28,82.9,27.1,82,26,82z M26,90c-1.1,0-2,0.9-2,2s0.9,2,2,2c1.1,0,2-0.9,2-2 C28,90.9,27.1,90,26,90z"/>',Hg[Dm]='<path fill="currentColor" stroke="currentColor" d="M74,8c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-2.9,2.9-4.7,6.6-5.1,10.6C46,34.6,46,35.3,46,36c0,2.7,0.6,5.4,1.8,7.8l3.1-3.1 C50.3,39.2,50,37.6,50,36c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1s7.3,1.5,9.9,4.1c2.6,2.6,4.1,6.2,4.1,9.9 s-1.5,7.3-4.1,9.9l-10,10C71.3,48.5,67.7,50,64,50c-1.6,0-3.2-0.3-4.7-0.8l-3.1,3.1c2.4,1.1,5,1.8,7.8,1.8c4.8,0,9.3-1.9,12.7-5.3 l10-10C90.1,35.3,92,30.8,92,26s-1.9-9.3-5.3-12.7C83.3,9.9,78.8,8,74,8L74,8z M62,36c-0.5,0-1,0.2-1.4,0.6l-24,24 c-0.5,0.5-0.7,1.2-0.6,1.9c0.2,0.7,0.7,1.2,1.4,1.4c0.7,0.2,1.4,0,1.9-0.6l24-24c0.6-0.6,0.8-1.5,0.4-2.2C63.5,36.4,62.8,36,62,36 z M36,46c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-3.1,3.1-5,7.2-5.2,11.6c0,0.4,0,0.8,0,1.2c0,4.8,1.9,9.3,5.3,12.7 C16.7,90.1,21.2,92,26,92s9.3-1.9,12.7-5.3l10-10C52.1,73.3,54,68.8,54,64c0-2.7-0.6-5.4-1.8-7.8l-3.1,3.1 c0.5,1.5,0.8,3.1,0.8,4.7c0,3.7-1.5,7.3-4.1,9.9l-10,10C33.3,86.5,29.7,88,26,88s-7.3-1.5-9.9-4.1S12,77.7,12,74 c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1c1.6,0,3.2,0.3,4.7,0.8l3.1-3.1C41.4,46.6,38.7,46,36,46L36,46z M80,60 c-10.3,0-18.8,7.9-19.9,17.9C60,78.6,60,79.3,60,80c0,11,9,20,20,20s20-9,20-20S91,60,80,60z M80,64c8.8,0,16,7.2,16,16 s-7.2,16-16,16s-16-7.2-16-16S71.2,64,80,64z M73.2,71c-0.1,0-0.3,0-0.4,0h-0.2c-1,0.2-1.8,1.2-1.6,2.4c0,0.4,0.2,0.8,0.6,1.2 l5.6,5.6l-5.6,5.6c-0.8,0.8-0.8,2,0,2.8c0.8,0.8,2,0.8,2.8,0L80,83l5.6,5.6c0.8,0.8,2,0.8,2.8,0c0.8-0.8,0.8-2,0-2.8L82.8,80 l5.6-5.6c0.8-0.8,0.8-2,0.2-2.8c-0.4-0.4-1.2-0.8-1.8-0.6c-0.4,0-0.8,0.2-1.2,0.6L80,77.2l-5.6-5.6C74.1,71.3,73.7,71,73.2,71z"/>',Hg[Am]='<path fill="currentColor" stroke="currentColor" d="M15.4,12.6l-2.9,2.9L47.1,50L12.6,84.6l2.9,2.9L50,52.9l34.6,34.6l2.9-2.9L52.9,50l34.6-34.6l-2.9-2.9L50,47.1L15.4,12.6z "/>',Hg[Tm]='<path fill="currentColor" stroke="currentColor" d="M27.2,8C17.7,8,10,15.7,10,25.2v37.6v14C10,86.3,17.7,94,27.2,94h45.6C82.3,94,90,86.3,90,76.8V61.2v-36 C90,15.7,82.3,8,72.8,8L27.2,8z M27.2,12h45.6C80.1,12,86,17.9,86,25.2v36v1.6C86,70.1,80.1,76,72.8,76H27.2 C19.9,76,14,70.1,14,62.8v-1.6v-36C14,17.9,19.9,12,27.2,12z M48,26v14.5L35.6,33l-2.1,3.4L46.1,44l-12.6,7.6l2.1,3.4L48,47.5V62 h4V47.5L64.4,55l2.1-3.4L53.9,44l12.6-7.6L64.4,33L52,40.5V26H48z M14,73.8c3.2,3.8,7.9,6.2,13.2,6.2h45.6c5.3,0,10-2.4,13.2-6.2 v3C86,84.1,80.1,90,72.8,90H27.2C19.9,90,14,84.1,14,76.8L14,73.8z"/>',Hg[Pm]='<path fill="currentColor" stroke="currentColor" d="M50,4c-14.6,0-27.6,6.8-36,17.4V8c0-0.5-0.2-1.1-0.6-1.4C13,6.2,12.5,6,12,6c-1.1,0-2,0.9-2,2v20h20c0.7,0,1.4-0.4,1.8-1 s0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H17c7.7-9.7,19.6-16,33-16c23.2,0,42,18.8,42,42S73.2,92,50,92S8,73.2,8,50c0-0.7-0.4-1.4-1-1.8 s-1.4-0.4-2,0c-0.6,0.4-1,1-1,1.8c0,25.4,20.6,46,46,46s46-20.6,46-46S75.4,4,50,4L50,4z M50,38c-6.6,0-12,5.4-12,12s5.4,12,12,12 s12-5.4,12-12S56.6,38,50,38z M50,42c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S45.6,42,50,42z"/>',Hg[Om]='<path fill="currentColor" stroke="currentColor" d="M50,2c-0.8,0-1.6,0.5-1.9,1.3L35.8,35.1L1.9,36.8c-0.8,0-1.5,0.6-1.8,1.4c-0.3,0.8,0,1.6,0.6,2.2l26.4,21.6l-8.7,32.8 c-0.2,0.8,0.1,1.6,0.8,2.1s1.6,0.5,2.3,0.1L50,78.6l28.5,18.3c0.7,0.4,1.6,0.4,2.3-0.1s1-1.3,0.8-2.1l-8.7-32.8l26.4-21.6 c0.6-0.5,0.9-1.4,0.6-2.2c-0.3-0.8-1-1.3-1.8-1.4l-33.9-1.7L51.9,3.3C51.6,2.5,50.8,2,50,2L50,2z M50,9.5l10.9,28.2 c0.3,0.7,1,1.2,1.8,1.3l30,1.5L69.3,59.7c-0.6,0.5-0.9,1.3-0.7,2.1l7.7,29L51.1,74.5c-0.7-0.4-1.5-0.4-2.2,0L23.6,90.7l7.7-29 c0.2-0.8-0.1-1.6-0.7-2.1L7.3,40.5l30-1.5c0.8,0,1.5-0.5,1.8-1.3L50,9.5z"/>',Hg[Fm]='<path fill="currentColor" stroke="currentColor" d="M50.1,2c-0.8,0-1.6,0.6-1.8,1.2L36.6,33.7L7.5,4.6C7.1,4.2,6.6,4,6.1,4C5.2,4,4.5,4.5,4.2,5.2C3.9,6,4.1,6.8,4.7,7.4 l88,88c0.5,0.5,1.2,0.7,1.9,0.6s1.2-0.7,1.4-1.4c0.2-0.7,0-1.4-0.6-1.9L76.2,73.3l-3.1-11.4l26.4-21.4c0.6-0.4,0.8-1.4,0.6-2.2 c-0.2-0.8-1-1.4-1.8-1.4l-34-1.8L51.9,3.2C51.7,2.6,50.9,2,50.1,2L50.1,2z M50.1,9.6l10.8,28.2c0.2,0.8,1,1.2,1.8,1.2l30.2,1.6 l-23.4,19c-0.6,0.4-0.8,1.4-0.6,2l1.6,6L39.7,36.8L50.1,9.6z M27.1,35.6L1.9,36.8c-0.8,0-1.6,0.6-1.8,1.4c-0.2,0.8,0,1.6,0.6,2.2 l26.4,21.4l-8.6,33c-0.2,0.8,0,1.6,0.8,2.2c0.4,0.2,0.8,0.4,1.2,0.4s0.8-0.2,1-0.4l28.6-18.6l28.6,18.4c0.6,0.4,1.6,0.4,2.2,0 s1-1.4,0.8-2.2l-1.8-6.4l-5.6-5.6l2.2,8.2L51.1,74.4c-0.2-0.2-0.6-0.4-1-0.4s-0.8,0.2-1,0.4L23.7,90.8l7.8-29.2 c0.2-0.8,0-1.6-0.6-2l-23.6-19l23.6-1.2L27.1,35.6z"/>',Hg[Im]='<path fill="currentColor" stroke="currentColor" d="M27,4c-4.5,0-8.6,2.4-10.6,6.5c0,0,0,0-0.1,0.1L9.8,23.1c0,0.1,0,0.2-0.1,0.3c0,0,0,0-0.1,0.1c0,0,0,0,0,0.1 C8.6,25.4,8,27.6,8,30v52c0,7.7,6.3,14,14,14h56c7.7,0,14-6.3,14-14V30c0-2.4-0.6-4.5-1.6-6.5c0-0.2-0.1-0.4-0.2-0.6l-6.6-12.6 c0,0,0,0,0-0.1h-0.1C81.5,6.4,77.5,4,73,4L27,4z M27,8h46c3.1,0,5.8,1.6,7,4.1l2.4,4.6C81,16.3,79.6,16,78,16H22 c-1.5,0-2.9,0.2-4.3,0.7l2.3-4.4c0,0,0,0,0-0.1C21.3,9.6,23.9,8,27,8z M51.2,9.9c-1.5,0-2.9,0.1-4,0.4c-1.8,0.6-2,1.2-2,1.6 c0,0.4,0.2,1.2,2,1.6c1.2,0.2,2.6,0.4,4,0.4c1.6,0,3-0.2,4-0.4c1.8-0.6,2-1.2,2-1.6c0-0.4-0.2-1.2-2-1.6 C54.1,10.1,52.6,9.9,51.2,9.9z M22,20h56c5.5,0,10,4.5,10,10v52c0,5.5-4.5,10-10,10H22c-5.5,0-10-4.5-10-10V30 C12,24.5,16.5,20,22,20z M68,32c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6S71.3,32,68,32z M50,50c-3.3,0-6,2.7-6,6s2.7,6,6,6 s6-2.7,6-6S53.3,50,50,50z M32,68c-3.3,0-6,2.7-6,6c0,3.3,2.7,6,6,6s6-2.7,6-6C38,70.7,35.3,68,32,68z"/>',Hg[Nm]='<path fill="currentColor" stroke="currentColor" d="M72.1,0c-1.9,0-3.8,1.1-5.3,3L50.3,26.3c-2.4-0.6-4.8-0.8-7.3-0.8c-8.4,0-16.4,3.3-22.3,9.2c-0.4,0.4-0.6,0.8-0.6,1.4 c0,0.5,0.2,1.1,0.6,1.4l41.8,41.8c0.4,0.4,0.9,0.6,1.4,0.6s1-0.2,1.4-0.6c7.9-7.9,11-19.2,8.3-29.9L97,33.4c1.8-1.3,2.9-3.1,3-4.9 c0.1-1.3-0.4-2.6-1.2-3.4L75.3,1.3C74.5,0.4,73.3,0,72.1,0L72.1,0z M33.1,55.5L0.4,96.8c-0.6,0.8-0.6,2,0.1,2.7 C1,99.8,1.5,100,2,100c0.4,0,0.9-0.1,1.3-0.4l41.2-32.6L33.1,55.5z"/>',Hg[Bm]='<path fill="currentColor" stroke="currentColor" d="M96.3,0c1,0.2,1.6,1.1,1.6,2.1V98c0,1.1-0.9,2.1-2.1,2.1H35.9c-1.1,0-2.1-0.9-2.1-2.1V78h4.1v17.9h55.9V4.1H38V22h-4.1V2 c0-1.1,1-2,2.1-2h59.9C96.1,0,96.2,0,96.3,0L96.3,0z M50.4,30.2c0.5,0.1,0.9,0.3,1.2,0.6l17.8,17.8l1.4,1.4l-1.4,1.4L51.6,69.1 c-0.5,0.6-1.3,0.9-2,0.7c-0.7-0.2-1.3-0.8-1.5-1.5s0.1-1.5,0.7-2L63.1,52h-59c-0.7,0-1.4-0.4-1.8-1s-0.4-1.4,0-2s1-1,1.8-1h59 L48.8,33.6c-0.6-0.6-0.8-1.5-0.4-2.3C48.7,30.6,49.5,30.1,50.4,30.2L50.4,30.2z"/>',Hg[Rm]='<path fill="currentColor" stroke="currentColor" d="M50,4C24.6,4,4,24.6,4,50s20.6,46,46,46s46-20.6,46-46S75.4,4,50,4L50,4z M50,8c23.2,0,42,18.8,42,42S73.2,92,50,92 S8,73.2,8,50S26.8,8,50,8z M50.6,25c-7.5,0-12.4,4.5-13.5,11.4c-0.1,0.4,0.1,0.7,0.6,0.8l4.5,0.8c0.4,0.1,0.7-0.1,0.8-0.6 c0.9-4.4,3.4-6.8,7.5-6.8c4.1,0,7,2.6,7,6.7c0,2.4-0.9,4.1-3.4,7.5l-4.8,6.6c-1.5,2.1-2.1,3.6-2.1,6.5v2.9c0,0.4,0.3,0.7,0.7,0.7 h4.7c0.4,0,0.7-0.3,0.7-0.7v-2.3c0-2.4,0.4-3.4,1.9-5.4l4.8-6.6c2.4-3.4,3.7-5.9,3.7-9.3C63.6,30.1,58.3,25,50.6,25L50.6,25z M47.4,67c-0.4,0-0.7,0.3-0.7,0.7v6.2c0,0.4,0.3,0.7,0.7,0.7h5.5c0.4,0,0.7-0.3,0.7-0.7v-6.2c0-0.4-0.3-0.7-0.7-0.7H47.4z"/>',Hg[cm]='<path fill="currentColor" stroke="currentColor" d="M50,0C37.8,0,28,9.6,28,21.4V22h15c1.1,0,2,0.9,2,2c0,1.1-0.9,2-2,2H28v4h15c1.1,0,2,0.9,2,2c0,1.1-0.9,2-2,2H28v4h15 c1.1,0,2,0.9,2,2s-0.9,2-2,2H28v4.6C28,58.4,37.8,68,50,68s22-9.6,22-21.4V42H57c-1.1,0-2-0.9-2-2c0-1.1,0.9-2,2-2h15v-4H57 c-1.1,0-2-0.9-2-2s0.9-2,2-2h15v-4H57c-1.1,0-2-0.9-2-2c0-1.1,0.9-2,2-2h15v-0.6C72,9.6,62.2,0,50,0L50,0z M19.6,34.3 c-0.8,0.2-1.4,0.9-1.4,1.7v10c0,15.4,11.1,28.4,25.8,31.2V88h12V77.2C70.6,74.4,81.8,61.4,81.8,46V36c0-1-0.8-1.8-1.8-1.8 c-1,0-1.7,0.8-1.7,1.8v10c0,15.6-12.6,28.2-28.3,28.2S21.8,61.6,21.8,46V36c0-0.5-0.2-1-0.6-1.3c-0.4-0.3-0.9-0.5-1.4-0.4 C19.8,34.3,19.7,34.3,19.6,34.3L19.6,34.3z M31,92c-3.8,0-6.9,3.1-6.9,6.9L24,100l51.8-0.1l0.1-0.9c0-3.8-3.1-6.9-6.9-6.9H31z"/>',Hg[zm]='<path fill="currentColor" stroke="currentColor" d="M10,10c-4.4,0-8,3.6-8,8v64c0,4.4,3.6,8,8,8h2v2h10v-2h56v2h10v-2h2c4.4,0,8-3.6,8-8V18c0-4.4-3.6-8-8-8L10,10z M10,14h80 c2.2,0,4,1.8,4,4v64c0,2.2-1.8,4-4,4H10c-2.2,0-4-1.8-4-4V18C6,15.8,7.8,14,10,14z M13.6,20c-1,0.2-1.6,1-1.6,2v23.4 c-0.1,0.4-0.1,0.8,0,1.2v7.1c0,0.1,0,0.1,0,0.2c0,0.1,0,0.3,0,0.4c0,0.1,0,0.1,0,0.2V78c0,1.1,0.9,2,2,2h72c1.1,0,2-0.9,2-2V22 c0-1.1-0.9-2-2-2H14c-0.1,0-0.1,0-0.2,0S13.7,20,13.6,20z M16,24h68v52H16V54.9l3.4-3.4c0.4-0.4,0.6-0.9,0.6-1.4s-0.2-1.1-0.6-1.4 L16,45.1L16,24z M49.8,27.9c-0.1,0-0.2,0-0.3,0.1c-0.1,0-0.1,0-0.2,0.1c-5.5,0.2-10.5,2.4-14.3,5.9c-0.5,0.2-0.9,0.6-1.1,1.1 c-3.4,3.7-5.6,8.6-5.9,13.9c-0.4,0.6-0.4,1.4,0,2c0.2,5.3,2.3,10.1,5.7,13.8c0.2,0.7,0.7,1.3,1.4,1.4c3.8,3.4,8.8,5.5,14.3,5.7 c0.1,0,0.1,0,0.2,0.1c0.1,0,0.3,0,0.4,0c0.1,0,0.3,0,0.4,0c0.1,0,0.1,0,0.2-0.1c5.4-0.2,10.4-2.3,14.2-5.7 c0.7-0.2,1.3-0.8,1.4-1.5c3.4-3.8,5.5-8.7,5.7-14.2c0,0,0-0.1,0.1-0.1c0,0,0,0,0-0.1c0-0.1,0-0.3,0-0.4c0-0.1,0-0.2,0-0.3 c0-0.1,0-0.3-0.1-0.4c-0.2-5.6-2.4-10.7-6-14.5c0,0,0,0-0.1-0.1c0,0,0-0.1-0.1-0.1c-0.2-0.2-0.4-0.4-0.6-0.6 c-3.8-3.6-8.9-5.9-14.4-6.1C50.5,27.9,50.1,27.9,49.8,27.9z M48,32.1c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2c3.5,0.4,6.6,1.8,9.3,3.9 c-0.6,0.5-0.9,1.3-0.7,2c0.2,0.7,0.8,1.3,1.5,1.5c0.8,0.2,1.5-0.1,2-0.7c2.1,2.6,3.5,5.8,3.9,9.3c0,0-0.1,0-0.1,0 c-0.1,0-0.1,0-0.2,0c-1.1,0.1-1.8,1.1-1.7,2.1s1,1.9,2.1,1.9c-0.4,3.5-1.8,6.6-3.9,9.3c-0.4-0.4-1-0.6-1.6-0.6c-0.1,0-0.1,0-0.2,0 c-0.7,0.1-1.3,0.7-1.5,1.4c-0.2,0.7,0,1.5,0.5,2c-2.6,2.1-5.8,3.5-9.3,3.9c0-0.6-0.2-1.1-0.6-1.5c-0.4-0.4-1-0.6-1.5-0.5 c-0.1,0-0.2,0-0.3,0.1c-0.9,0.2-1.6,1-1.6,1.9c-3.5-0.4-6.6-1.8-9.3-3.9c0.6-0.6,0.7-1.5,0.4-2.2c-0.3-0.7-1.1-1.2-1.9-1.2 c-0.1,0-0.1,0-0.2,0c-0.4,0.1-0.8,0.3-1.1,0.6c-2.1-2.6-3.5-5.8-3.9-9.3c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2c0.4-3.5,1.8-6.6,3.9-9.3 c0.5,0.6,1.3,0.9,2,0.7c0.7-0.2,1.3-0.8,1.5-1.5c0.2-0.8-0.1-1.5-0.7-2C41.4,33.9,44.5,32.4,48,32.1L48,32.1z M50,40 c-5.5,0-10,4.5-10,10s4.5,10,10,10s10-4.5,10-10S55.5,40,50,40z M50,44c3.3,0,6,2.7,6,6s-2.7,6-6,6s-6-2.7-6-6S46.7,44,50,44z"/>',Hg[Hm]='<path fill="currentColor" stroke="currentColor" d="M58,10c-0.1,0-0.2,0-0.3,0H10c-4.4,0-8,3.6-8,8v64c0,4.4,3.6,8,8,8h2v2h10v-2h35.7c0.2,0,0.4,0,0.7,0H78v2h10v-2h2 c4.4,0,8-3.6,8-8V18c0-4.4-3.6-8-8-8H58.3C58.2,10,58.1,10,58,10z M10,14h46v6H14c-1.1,0-2,0.9-2,2v56c0,1.1,0.9,2,2,2h42v6H22H12 h-2c-2.2,0-4-1.8-4-4V18C6,15.8,7.8,14,10,14z M60,14h6v72h-6V58v-8v-8V14z M60,42c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2 c0-1.1-0.9-2-2-2C60.9,40,60,40.9,60,42z M60,50c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2C60.9,48,60,48.9,60,50z M60,58 c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2C60.9,56,60,56.9,60,58z M75.7,14H90c2.2,0,4,1.8,4,4v64c0,2.2-1.8,4-4,4h-2H78 h-2.3L87,79.8c0.6-0.4,1-1,1-1.8V62.9c0.7-1.6,1.4-3.1,1.5-3.4c0.4-0.3,0.8-0.7,1-1.1c0.4-0.7,0.6-1.4,0.9-2.3 c0.4-1.7,0.6-3.8,0.6-6.1c0-2.3-0.2-4.5-0.6-6.1c-0.2-0.8-0.5-1.6-0.9-2.3c-0.2-0.4-0.5-0.8-0.9-1.1c-0.3-0.6-0.8-1.9-1.6-3.7V22 c0-0.7-0.4-1.4-1-1.8L75.7,14z M70,15.4l14,7.8v5.9c-0.1-0.2-0.2-0.3-0.4-0.5C83.3,28.4,82.9,28,82,28c-1,0-1.7,0.5-2.2,1 c-0.5,0.5-0.8,1.1-1.1,1.7c-0.6,1.3-1,2.8-1.4,4.8C76.4,39.3,76,44.4,76,50s0.4,10.7,1.2,14.5c0.4,1.9,0.8,3.5,1.4,4.8 c0.3,0.6,0.6,1.2,1.1,1.7c0.5,0.5,1.3,1,2.2,1c1.1,0,1.4-0.5,1.6-0.7c0.2-0.2,0.3-0.3,0.4-0.4v6l-14,7.8V15.4z M16,24h40v52H16 L16,24z M82,33.4c0.5,1,1.1,2.2,1.7,3.4c0.9,1.9,1.5,3.5,2,4.6c0,0.1-0.1,0.1-0.1,0.2c-0.4,0.7-0.6,1.4-0.9,2.3 C84.2,45.5,84,47.7,84,50s0.2,4.5,0.6,6.1c0.2,0.8,0.5,1.6,0.9,2.3c0,0,0.1,0.1,0.1,0.1c-0.4,0.9-1,2.3-2.1,4.6 c-0.6,1.2-1.1,2.3-1.6,3.3c-0.3-0.8-0.5-1.5-0.8-2.7C80.4,60.3,80,55.4,80,50s0.4-10.3,1.1-13.8C81.4,35,81.7,34.2,82,33.4 L82,33.4z"/>',Hg[Vm]='<path fill="currentColor" stroke="currentColor" d="M97.8,0c-0.3,0-0.5,0.1-0.7,0.2l-96,52c-0.7,0.4-1.1,1.1-1,1.9c0.1,0.8,0.6,1.5,1.4,1.7l27.2,8.9l-2.6,27 c-0.1,0.9,0.4,1.7,1.2,2.1c0.8,0.4,1.8,0.1,2.3-0.6l17.2-19.4l25.9,25.6c0.5,0.5,1.2,0.7,1.9,0.5c0.7-0.2,1.2-0.7,1.4-1.4l24-96 c0.2-0.6,0-1.3-0.4-1.8C99.1,0.2,98.5-0.1,97.8,0z M94.9,5.9L72.9,94.1L49.2,70.7l34.4-47.6c0.8-0.8,0.7-2.1-0.1-2.8 s-2.1-0.7-2.8,0.1L30.4,61.2L7,53.6L94.9,5.9z M71.6,33L45.3,69.4c-0.1,0.1-0.1,0.2-0.2,0.2L45,69.8c0,0.1-0.1,0.1-0.1,0.2 L30.6,86.1l2.1-21.6L71.6,33z"/>',Hg[qm]='<path fill="currentColor" stroke="currentColor" d="M16.4,16.4c-3.5,0-6.4,2.9-6.4,6.4s2.9,6.4,6.4,6.4s6.4-2.9,6.4-6.4S19.9,16.4,16.4,16.4z M16.4,19.6 c1.8,0,3.2,1.4,3.2,3.2c0,1.8-1.4,3.2-3.2,3.2s-3.2-1.4-3.2-3.2C13.2,21,14.6,19.6,16.4,19.6z M29.2,21.2v3.2H90v-3.2H29.2z M16.4,43.6c-3.5,0-6.4,2.9-6.4,6.4s2.9,6.4,6.4,6.4s6.4-2.9,6.4-6.4S19.9,43.6,16.4,43.6z M16.4,46.8c1.8,0,3.2,1.4,3.2,3.2 s-1.4,3.2-3.2,3.2s-3.2-1.4-3.2-3.2S14.6,46.8,16.4,46.8z M29.2,48.4v3.2H90v-3.2H29.2z M16.4,70.8c-3.5,0-6.4,2.9-6.4,6.4 c0,3.5,2.9,6.4,6.4,6.4s6.4-2.9,6.4-6.4C22.8,73.7,19.9,70.8,16.4,70.8z M16.4,74c1.8,0,3.2,1.4,3.2,3.2c0,1.8-1.4,3.2-3.2,3.2 s-3.2-1.4-3.2-3.2C13.2,75.4,14.6,74,16.4,74z M29.2,75.6v3.2H90v-3.2H29.2z"/>',Hg[jm]='<path fill="currentColor" stroke="currentColor" d="M30.1,20c-1.4,0-2.8,0.9-3.2,2.2L8.7,73.3H6.7c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h10 c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7h-0.9l3.5-10h21.3l3.5,10h-0.9c-1.2,0-2.3,0.6-2.9,1.7 c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h10c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7h-2.1 L33.1,22.2C32.7,20.9,31.5,20,30.1,20L30.1,20z M30,33.3l8.3,23.4H21.7L30,33.3z M76.7,40c-0.5,0-0.9,0.1-1.4,0.3 c-6,0.5-10.6,3.7-10.6,3.7c-1,0.7-1.5,1.9-1.3,3.1c0.1,1.2,0.9,2.2,2,2.7c1.1,0.5,2.4,0.3,3.3-0.4c0,0,3.8-2.7,8-2.7 c3.5,0,6.3,2.7,6.6,6.1c-0.2,0.1-0.5,0.3-1.2,0.5c-1.8,0.5-4.7,0.9-7.8,1.6c-3.1,0.7-6.4,1.5-9.3,3.6c-2.9,2-5.1,5.6-5.1,10 c0,3.4,1.8,6.5,4.5,8.6c2.7,2,6.3,3.1,10.5,3.1c5.1,0,8.6-1.5,11-3.3c1.8,2,4.5,3.3,7.4,3.3c1.2,0,2.3-0.6,2.9-1.7 c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7c-1.9,0-3.3-1.4-3.3-3.3c0,0,0-0.1,0-0.1V53.3c0-0.2,0-0.5-0.1-0.7 C89.5,45.6,83.7,40,76.7,40L76.7,40z M83.3,59.8v9.8c0,0.1-0.1,0.6-0.9,1.4c-1,1-2.8,2.3-7.4,2.3c-3,0-5.2-0.8-6.5-1.8 c-1.3-1-1.8-2-1.8-3.2c0-2.5,0.7-3.4,2.2-4.5c1.5-1.1,4-1.9,6.8-2.5C78.2,60.8,80.9,60.4,83.3,59.8L83.3,59.8z"/>',Hg[Um]='<path fill="currentColor" stroke="currentColor" d="M8,18v4h84v-4H8z M8,48v4h84v-4H8z M78.2,57.9c-0.8,0-1.6,0.6-2,1l-4.8,12.6L58,72.3c-0.8,0-1.6,0.6-1.8,1.4 c-0.2,0.8,0,1.8,0.8,2.2l10.2,8.4l-3.4,13C63.6,98,64,99,64.6,99.4c0.4,0.2,0.8,0.4,1.2,0.4c0.4,0,0.8-0.2,1.2-0.4l11.2-7.2 l11.2,7.4c0.6,0.6,1.6,0.4,2.2,0c0.8-0.6,1-1.4,0.8-2.2l-3.4-13l10.4-8.4c0.6-0.6,0.8-1.4,0.6-2.2c-0.2-0.8-1-1.4-1.8-1.4 l-13.4-0.8L80,59.1C79.8,58.5,79,57.9,78.2,57.9L78.2,57.9z M78.2,65.5l3.2,9c0.4,0.6,1,1.2,1.8,1.2l9.6,0.6l-7.4,6 c-0.6,0.4-0.8,1.2-0.6,2l2.4,9.2l-8-5.2c-0.2-0.2-0.6-0.4-1-0.4c-0.4,0-0.8,0.2-1.2,0.2l-8,5.2l2.4-9.2c0.2-0.6,0-1.6-0.6-2 l-7.4-6l9.6-0.4c0.8-0.2,1.4-0.6,1.8-1.4L78.2,65.5z M8,78v4h49.3l-3.5-2.8c-0.4-0.3-0.8-0.7-1.1-1.2H8z"/>',Hg[_m]='<path fill="currentColor" stroke="currentColor" d="M92,92H8v-4h84V92z M50,86.8L34.6,71.4l2.8-2.8L48,79.2V20.8L37.4,31.4l-2.8-2.8L50,13.2l15.4,15.4l-2.8,2.8L52,20.8v58.3 l10.6-10.6l2.8,2.8L50,86.8z M92,12H8V8h84V12z"/>',Hg[Wm]='<path fill="currentColor" stroke="currentColor" d="M50,4C24.7,4,4,22.7,4,46c0,9.9,3.8,19,10.1,26.1H14c0.8,1.3,0.9,2.9,0.4,4.8c-0.4,1.9-1.4,4.1-2.6,6.1 c-1.2,2-2.5,3.8-3.6,5.3c-0.5,0.7-1,1.3-1.4,1.8c-0.2,0.2-0.3,0.5-0.4,0.7C6.3,91.1,6,91.1,6,92.2C6,93,6.3,94,7.1,94.8 c0.8,0.8,1.9,1.2,3.3,1.2c9.2,0,17.6-6.9,24-10.6C39.3,87,44.5,88,50,88c25.3,0,46-18.7,46-42S75.3,4,50,4L50,4z M50,8 c23.3,0,42,17.1,42,38S73.3,84,50,84c-5.4,0-10.6-0.9-15.3-2.6l-0.9-0.3l-0.8,0.5c-6.9,4-15.3,10.4-22.6,10.4 c0.3-0.4,0.5-0.7,0.9-1.2c1.1-1.5,2.5-3.5,3.8-5.7s2.5-4.7,3.1-7.3c0.6-2.6,0.5-5.3-0.9-7.8l-0.1-0.2l-0.1-0.1 C11.5,63.2,8,55,8,46C8,25.1,26.7,8,50,8L50,8z M32.7,24c-0.7,0.1-1.3,0.7-1.6,1.4l-6.1,17.5c-0.2,0.3-0.4,0.7-0.4,1.1l-2.6,7.4 c-0.4,0.7-0.3,1.5,0.2,2.2c0.5,0.6,1.3,0.9,2.1,0.7c0.8-0.2,1.3-0.8,1.5-1.6l2.3-6.6h9.6l2.3,6.6c0.1,0.8,0.7,1.4,1.5,1.6 c0.8,0.2,1.6-0.1,2.1-0.7c0.5-0.6,0.6-1.5,0.2-2.2l-9-26C34.6,24.4,33.7,23.9,32.7,24z M33,32.1l3.4,9.9h-6.9L33,32.1z M65.8,37.9 c-0.1,0-0.2,0-0.3,0.1c-0.9,0.2-1.6,1-1.6,2v4H54c-0.1,0-0.1,0-0.2,0c-0.1,0-0.1,0-0.2,0c-1.1,0.1-1.9,1.1-1.8,2.2 s1.1,1.9,2.2,1.8h17.4c-0.8,2.6-2.6,7.1-6.6,11.1c-3.4-3.4-4.9-6.2-4.9-6.2c-0.4-0.7-1.2-1.2-2-1.1c-0.7,0.1-1.3,0.5-1.6,1.1 c-0.3,0.6-0.3,1.3,0.1,1.9c0,0,1.7,3.1,5.4,6.8c-2.3,1.7-5,3.3-8.4,4.4c-0.8,0.1-1.4,0.7-1.6,1.5c-0.2,0.8,0.1,1.6,0.7,2.1 c0.6,0.5,1.5,0.6,2.2,0.2c4.1-1.4,7.4-3.4,10.1-5.5c2.3,1.9,5.1,3.8,8.4,5.4c1,0.5,2.2,0.1,2.7-0.9c0.5-1,0.1-2.2-0.9-2.7 c-2.8-1.4-5.2-2.9-7.2-4.5c5.1-5.3,7.1-11,7.9-13.7H78c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H68v-4 c0-0.6-0.2-1.1-0.6-1.5C67,38.1,66.4,37.9,65.8,37.9z"/>',Hg[Gm]='<path fill="currentColor" stroke="currentColor" d="M8,60c0,9.9,8.1,18,18,18l45.1,0L60.6,88.6l2.9,2.9l14-14l1.4-1.4l-1.4-1.4l-14-14l-2.9,2.9L71.1,74L26,74 c-7.7,0-14-6.3-14-14l0-22H8L8,60z M21.2,24l1.4,1.4l14,14l2.9-2.9L28.9,26L74,26c7.7,0,14,6.3,14,14l0,22h4l0-22 c0-9.9-8.1-18-18-18l-45.1,0l10.6-10.6l-2.9-2.9l-14,14L21.2,24z">',Hg[Km]='<path fill="currentColor" stroke="currentColor" d="M11.9,9.9c-1.1,0-2,0.9-2,2v75.6c0,1.1,0.9,2,2,2h39.8V65.6v-4V39.8h33.8v13.9h4V11.9c0-1.1-0.9-2-2-2L11.9,9.9z M13.9,13.9h33.8v21.9H13.9L13.9,13.9z M51.7,13.9h33.8v21.9H51.7V13.9z M13.9,39.8h33.8v21.9H13.9L13.9,39.8z M73.6,55.7L72.4,62 c-0.6,0.2-1.4,0.4-2,0.8L65,59.1l-6,6l3.6,5c-0.2,0.8-0.6,1.4-0.8,2.2l-6.2,1v8.3l6.2,1c0.2,0.6,0.4,1.4,0.8,2l-3.6,5.4l6,6 l5.4-3.6c0.8,0.4,1.4,0.6,2.2,0.8l1,6.4h8.2l1.2-6.2c0.6-0.2,1.2-0.4,2-0.8l5.4,3.6l6-6l-3.8-5.2c0.4-0.8,0.6-1.6,0.8-2.2l6.2-1.2 v-8.3l-6.4-1c-0.2-0.6-0.4-1.4-0.8-2l3.6-5.4l-5.8-5.8l-5.2,3.8c-0.6-0.4-1.4-0.6-2-0.8l-1-6.4L73.6,55.7z M77,59.7h1.6l0.8,5.4 l1.2,0.4c1.2,0.4,2.4,0.8,3.4,1.4l1.2,0.8l4.6-3.4l1,1l-3.2,4.6l0.6,1c0.6,1.2,1,2.4,1.4,3.6l0.4,1.2l5.6,0.8v1.6l-5.4,1.2 l-0.4,1.2c-0.4,1.2-0.8,2.4-1.4,3.4l-0.8,1.2l3.4,4.6l-1.2,1.2l-4.6-3.2l-1,0.6c-1.2,0.6-2.4,1-3.6,1.4l-1.2,0.4l-1,5.6h-1.6 L76,90.1l-1.2-0.4c-1.2-0.4-2.4-0.8-3.4-1.4l-1.2-0.8l-4.8,3.2l-1.2-1.2l3.2-4.6l-0.6-1c-0.6-1.2-1-2.6-1.4-3.6L65,79.1l-5.4-1 v-1.6l5.6-1l0.2-1.4c0.2-1,0.6-2.2,1.2-3.2l0.8-1l-3.2-4.6l1.2-1.2l4.6,3.2l1-0.4c1.4-0.6,2.6-1.2,3.8-1.6l1.2-0.2L77,59.7z M13.9,65.6h33.8v19.9H13.9L13.9,65.6z M77.5,69.4c-4.4,0-8,3.6-8,8s3.6,8,8,8c4.4,0,8-3.4,8-8C85.5,73,81.9,69.4,77.5,69.4z M77.5,73.6c2.2,0,4,1.6,4,4c0,2.2-1.8,4-4,4c-2.2,0-4-1.8-4-4C73.6,75.4,75.4,73.6,77.5,73.6z"/>',Hg[$m]='<path fill="currentColor" stroke="currentColor" d="M49.5,5.9c-0.1,0-0.2,0-0.2,0.1c-0.9,0.2-1.6,1-1.6,2v56.8L35.2,52.3c-0.3-0.3-0.7-0.5-1.1-0.6c-0.3-0.1-0.5-0.1-0.8,0 c-0.7,0.1-1.3,0.7-1.6,1.4c-0.2,0.7,0,1.5,0.6,2L48,70.7c0.1,0.2,0.3,0.4,0.6,0.6l1.1,1.1l1.1-1.1c0.1,0,0.1-0.1,0.2-0.1l0.1-0.1 c0,0,0,0,0-0.1c0,0,0.1-0.1,0.1-0.1L67,55.1c0.8-0.8,0.8-2.1,0-2.9c-0.8-0.8-2.1-0.8-2.9,0L51.7,64.7V8c0-0.1,0-0.1,0-0.2 c0-0.1,0-0.1,0-0.2c0-0.1-0.1-0.3-0.1-0.4c0,0-0.1-0.1-0.1-0.1c0-0.1-0.1-0.3-0.2-0.4c0,0-0.1-0.1-0.1-0.1c-0.1,0-0.1-0.1-0.2-0.1 C50.6,6.1,50,5.9,49.5,5.9L49.5,5.9z M4,71.6v11.9c0,5.5,4.5,9.9,9.9,9.9h71.6c5.5,0,9.9-4.5,9.9-9.9V71.6h-4v11.9 c0,3.3-2.7,6-6,6H13.9c-3.3,0-6-2.7-6-6V71.6H4z"/>',Hg[Ym]='<path fill="currentColor" stroke="currentColor" d="m50,4.36896c-25.16372,0 -45.63104,20.46732 -45.63104,45.63104c0,25.16372 20.46732,45.63104 45.63104,45.63104c25.16372,0 45.63104,-20.46732 45.63104,-45.63104c0,-25.16372 -20.46732,-45.63104 -45.63104,-45.63104zm0,17.85562c7.94358,0 15.35242,3.38668 20.58356,9.17581l5.20789,-5.20789l0,13.88771l-13.88771,0l5.88212,-5.88212c-4.49491,-5.05289 -10.91177,-8.00558 -17.78587,-8.00558c-13.12822,0 -23.8075,10.67927 -23.8075,23.8075l-3.96792,0c0,-15.31368 12.46174,-27.77541 27.77541,-27.77541zm0,55.55083c-7.92033,0 -15.36018,-3.37893 -20.59132,-9.16805l-5.20014,5.20014l0,-13.88771l13.88771,0l-5.88212,5.88212c4.48716,5.0529 10.92727,8.00558 17.78587,8.00558c13.12822,0 23.8075,-10.67927 23.8075,-23.8075l3.96792,0c0,15.31368 -12.46174,27.77541 -27.77541,27.77541z"/>',Hg[Jm]='<path fill="currentColor" stroke="currentColor" d="m49.89841,3.99187c-25.31246,0 -45.90654,20.59407 -45.90654,45.90654c0,25.31446 20.59407,45.90654 45.90654,45.90654c25.31446,0 45.90654,-20.59207 45.90654,-45.90654c0,-25.31246 -20.59207,-45.90654 -45.90654,-45.90654zm21.61,29.06482l-22.97522,33.85707l-17.95744,-16.66407c-0.80835,-0.74848 -0.85626,-2.0119 -0.10578,-2.82026c0.74848,-0.81035 2.0139,-0.85426 2.82026,-0.10578l14.55038,13.50051l20.36454,-30.0109c0.62074,-0.91214 1.86221,-1.14766 2.77236,-0.53092c0.91414,0.61874 1.15166,1.86021 0.53092,2.77435z"/>',Hg[Qm]='<path fill="currentColor" stroke="currentColor" d="m49.5,12.375c-20.47192,0 -37.125,16.65308 -37.125,37.125c0,20.47193 16.65308,37.125 37.125,37.125c20.47193,0 37.125,-16.65307 37.125,-37.125c0,-20.47192 -16.65307,-37.125 -37.125,-37.125zm0,6.1875c17.12439,0 30.9375,13.81311 30.9375,30.9375c0,17.12439 -13.81311,30.9375 -30.9375,30.9375c-17.12439,0 -30.9375,-13.81311 -30.9375,-30.9375c0,-17.12439 13.81311,-30.9375 30.9375,-30.9375zm0,12.375c-9.18457,0 -16.78601,6.70715 -18.27246,15.46875l6.38086,0c1.37769,-5.32947 6.13916,-9.28125 11.8916,-9.28125c3.42005,0 6.47754,1.41394 8.70117,3.67383l-5.60742,5.60742l15.46875,0l0,-15.46875l-5.51074,5.51074c-3.35962,-3.35962 -7.93982,-5.51074 -13.05176,-5.51074l-0.00001,0zm-18.5625,21.65625l0,15.46875l5.51074,-5.51074c3.35962,3.35962 7.93982,5.51074 13.05176,5.51074c9.18457,0 16.78601,-6.70715 18.27246,-15.46875l-6.38086,0c-1.37768,5.32947 -6.13916,9.28125 -11.8916,9.28125c-3.42005,0 -6.47754,-1.41394 -8.70117,-3.67383l5.60742,-5.60742l-15.46874,0z"/>',Hg[Xm]='<path fill="currentColor" stroke="currentColor" d="m49.68421,12.42105c-20.5431,0 -37.26316,16.72007 -37.26316,37.26316c0,20.54309 16.72005,37.26316 37.26316,37.26316c20.5431,0 37.26316,-16.72007 37.26316,-37.26316c0,-20.54309 -16.72005,-37.26316 -37.26316,-37.26316zm0,6.21053c17.18669,0 31.05263,13.86596 31.05263,31.05263c0,17.18668 -13.86594,31.05263 -31.05263,31.05263c-17.18669,0 -31.05263,-13.86596 -31.05263,-31.05263c0,-17.18668 13.86594,-31.05263 31.05263,-31.05263zm15.36863,18.63158l-19.40789,19.40789l-10.09211,-10.09211l-4.34252,4.34858l14.43462,14.44069l23.75648,-23.75648l-4.34858,-4.34858z"/>',Hg[Zm]='<path fill="currentColor" stroke="currentColor" d="m49.86139,12.46535c-20.62138,0 -37.39604,16.77466 -37.39604,37.39604c0,20.62139 16.77466,37.39604 37.39604,37.39604c20.62139,0 37.39604,-16.77465 37.39604,-37.39604c0,-20.62138 -16.77465,-37.39604 -37.39604,-37.39604zm0,6.23267c17.24941,0 31.16337,13.91396 31.16337,31.16337c0,17.24941 -13.91396,31.16337 -31.16337,31.16337c-17.24941,0 -31.16337,-13.91396 -31.16337,-31.16337c0,-17.24941 13.91396,-31.16337 31.16337,-31.16337zm-12.46535,15.58168l0,31.16337l6.23267,0l0,-31.16337l-6.23267,0zm18.69802,0l0,31.16337l6.23267,0l0,-31.16337l-6.23267,0z"/>',Hg[tv]='<path fill="currentColor" stroke="currentColor" d="m9.9,89.09226c-0.03094,0 -0.05414,0 -0.08508,0c-1.06734,-0.04641 -1.91039,-0.92812 -1.89492,-1.99547c0.00774,-0.48726 1.14469,-48.13101 47.52,-49.44586l0,-13.89094c0,-0.7657 0.44086,-1.4618 1.12922,-1.78664c0.68062,-0.33258 1.5082,-0.23203 2.09601,0.2475l31.68,25.74c0.46406,0.37899 0.73476,0.9436 0.73476,1.53914c0,0.59555 -0.2707,1.16016 -0.72703,1.53914l-31.68,25.74c-0.59555,0.47953 -1.41539,0.57234 -2.10375,0.2475c-0.68836,-0.32485 -1.12922,-1.02094 -1.12922,-1.78664l0,-13.84453c-41.26289,0.75024 -43.49039,24.81961 -43.56773,25.85601c-0.06961,1.04414 -0.93586,1.84078 -1.97226,1.84078z"/>',Hg[ev]='<path fill="currentColor" stroke="currentColor" d="M12,4c-1.1,0-2,0.9-2,2v20c0,1.1,0.9,2,2,2h14v21.7c0,0.2,0,0.4,0,0.7V84c0,1.1,0.9,2,2,2h26v8c0,1.1,0.9,2,2,2h32 c1.1,0,2-0.9,2-2V74c0-1.1-0.9-2-2-2H56c-1.1,0-2,0.9-2,2v8H30V52h24v8c0,1.1,0.9,2,2,2h32c1.1,0,2-0.9,2-2V40c0-1.1-0.9-2-2-2 H56c-1.1,0-2,0.9-2,2v8H30V28h14c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2L12,4z M14,8h28v16H28.3c-0.1,0-0.2,0-0.3,0 c-0.1,0-0.2,0-0.3,0H14L14,8z M58,42h28v16H58v-7.7c0-0.2,0-0.4,0-0.7V42z M58,76h28v16H58v-7.7c0-0.2,0-0.4,0-0.7V76z"/>',Hg[nv]='<path fill="currentColor" stroke="currentColor" d="M16.7,13.3c-1.8,0-3.3,1.5-3.3,3.3v66.7c0,1.8,1.5,3.3,3.3,3.3h16.7c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4 c-0.6-1-1.7-1.7-2.9-1.7H20V20h13.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7L16.7,13.3z M66.7,13.3 c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7H80v60H66.7c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4 c0.6,1,1.7,1.7,2.9,1.7h16.7c1.8,0,3.3-1.5,3.3-3.3V16.7c0-1.8-1.5-3.3-3.3-3.3L66.7,13.3z"/>',Hg[iv]='<path fill="currentColor" stroke="currentColor" d="M23.3,13.3c-5.5,0-10,4.5-10,10v53.3c0,5.5,4.5,10,10,10H65c0.9,0,1.7-0.4,2.4-1l18.3-18.3c0.6-0.6,1-1.5,1-2.4V23.3 c0-5.5-4.5-10-10-10H23.3z M23.3,20h53.3c1.9,0,3.3,1.4,3.3,3.3v40H70c-3.7,0-6.7,3-6.7,6.7v10h-40c-1.9,0-3.3-1.4-3.3-3.3V23.3 C20,21.4,21.4,20,23.3,20z M33.3,36.7c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h13.3 c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H33.3z M60,36.7c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4 c0.6,1,1.7,1.7,2.9,1.7h6.7c1.2,0,2.3-0.6,2.9-1.7s0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H60z M33.3,50c-1.2,0-2.3,0.6-2.9,1.7 c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7H60c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4S61.2,50,60,50H33.3z"/>',Hg[rv]='<path fill="currentColor" stroke="currentColor" d="M36.6,13.3c-1.6,0-2.9,1.2-3.2,2.7l-2.1,10.7H20c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4s1.7,1.7,2.9,1.7h9.9 l-6.7,33.3h-9.9c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h8.6l-1.9,9.3c-0.3,1.2,0.1,2.4,1,3.2 c0.9,0.8,2.2,1.1,3.3,0.7s2-1.4,2.2-2.6l2.1-10.7h33.2l-1.9,9.3c-0.3,1.2,0.1,2.4,1,3.2c0.9,0.8,2.2,1.1,3.3,0.7 c1.1-0.4,2-1.4,2.2-2.6l2.1-10.7H80c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7h-9.9l6.7-33.3h9.9 c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7h-8.6l1.9-9.3c0.2-1,0-2-0.7-2.8s-1.6-1.2-2.6-1.2 c-1.6,0-2.9,1.2-3.2,2.7l-2.1,10.7H38.1l1.9-9.3c0.2-1,0-2-0.7-2.8S37.6,13.3,36.6,13.3L36.6,13.3z M36.7,33.3h33.2l-6.7,33.3 H30.1L36.7,33.3z"/>',Hg[ov]='<path fill="currentColor" stroke="currentColor" d="M76.7,10h-20c-1.7,0-3.4,0.7-4.7,2L12,52c-2.6,2.6-2.6,6.8,0,9.4L38.6,88c2.6,2.6,6.8,2.6,9.4,0c1.3-1.3,38.7-38.7,40-40 c1.3-1.3,2-3,2-4.7v-20C90,16,84,10,76.7,10z M76.7,30C73,30,70,27,70,23.3c0-3.7,3-6.7,6.7-6.7c3.7,0,6.7,3,6.7,6.7 C83.3,27,80.4,30,76.7,30z"/>',Hg[sv]='<path fill="currentColor" stroke="currentColor" d="M26.6,13.2c-0.3,0-0.6,0-1,0.1h-9c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7H20v60h-3.3 c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h8.9c0.7,0.1,1.4,0.1,2.2,0h8.9c1.2,0,2.3-0.6,2.9-1.7 c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7h-3.3V53.3h33.3V80h-3.3c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4 s1.7,1.7,2.9,1.7h8.9c0.7,0.1,1.4,0.1,2.2,0h8.9c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H80V20h3.3 c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7h-8.9c-0.4-0.1-0.8-0.1-1.2-0.1c-0.3,0-0.6,0-1,0.1h-9 c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4s1.7,1.7,2.9,1.7h3.3v26.7H33.3V20h3.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4 s-1.7-1.7-2.9-1.7h-8.9C27.3,13.3,27,13.2,26.6,13.2L26.6,13.2z"/>',Hg[av]='<path fill="currentColor" stroke="currentColor" d="M23.3,13.3c-1.8,0-3.3,1.5-3.3,3.3c0,1.8,1.5,3.3,3.3,3.3h3.3v60h-3.3c-1.8,0-3.3,1.5-3.3,3.3s1.5,3.3,3.3,3.3h38.3 c11.9,0,21.7-9.7,21.7-21.7c0-8.8-5.2-16.3-12.8-19.7c3.7-3.4,6.1-8.2,6.1-13.6c0-10.1-8.2-18.3-18.3-18.3L23.3,13.3z M43.3,20 h8.3c6.4,0,11.7,5.2,11.7,11.7c0,6.4-5.2,11.7-11.7,11.7h-8.3L43.3,20z M43.3,50h5h3.3c8.3,0,15,6.7,15,15s-6.7,15-15,15h-8.3 L43.3,50z"/>',Hg[lv]='<path fill="currentColor" stroke="currentColor" d="M53.3,13.3c-0.3,0-0.5,0-0.7,0.1h-9.2c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4s1.7,1.7,2.9,1.7h4.8l-6.3,60h-5.1 c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h20c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4 c-0.6-1-1.7-1.7-2.9-1.7h-4.8l6.3-60h5.1c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7h-9.2 C53.9,13.3,53.6,13.3,53.3,13.3L53.3,13.3z"/>',Hg[cv]='<path fill="currentColor" stroke="currentColor" d="M20,13.3c-1.8,0-3.3,1.5-3.3,3.3v6.7c0,1.2,0.6,2.3,1.7,2.9c1,0.6,2.3,0.6,3.4,0c1-0.6,1.7-1.7,1.7-2.9V20h20v30h-20 c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h53.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4 c-0.6-1-1.7-1.7-2.9-1.7h-20V20h20v3.3c0,1.2,0.6,2.3,1.7,2.9c1,0.6,2.3,0.6,3.4,0c1-0.6,1.7-1.7,1.7-2.9v-6.7 c0-1.8-1.5-3.3-3.3-3.3H20z M43.3,63.3V80H40c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4s1.7,1.7,2.9,1.7h20 c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7h-3.3V63.3L43.3,63.3z"/>',Hg[uv]='<path fill="currentColor" stroke="currentColor" d="M59.9,10c-0.9,0-1.7,0.4-2.3,1L34.3,34.3c-0.3,0.3-0.6,0.7-0.7,1.1l-6.4,16l-3.8,3.8c-3.6,3.6-4.2,9.1-2,13.4L6.7,83.3 l20,6.7l8.1-8.1c4.3,2.2,9.8,1.6,13.4-2l3.8-3.8l16-6.4c0.4-0.2,0.8-0.4,1.1-0.7l23.3-23.3c0.9-0.8,1.2-2.1,0.9-3.2 c-0.3-1.2-1.2-2.1-2.4-2.4s-2.4,0-3.2,0.9l-11,11L51.4,26.7l11-11c1-1,1.3-2.4,0.7-3.7C62.6,10.7,61.3,9.9,59.9,10L59.9,10z M46.7,31.4L72,56.7L66.7,62L41.4,36.7L46.7,31.4z M37.9,42.6l22.9,22.9l-12,4.8c-0.4,0.2-0.8,0.4-1.1,0.7l-4.3,4.3 c-1.9,1.9-4.9,1.9-6.8,0l-8.5-8.5c-1.9-1.9-1.9-4.9,0-6.8l4.3-4.3c0.3-0.3,0.6-0.7,0.7-1.1L37.9,42.6z"/>',Hg[hv]='<path fill="currentColor" stroke="currentColor" d="M56.6,13.3c-1.6,0-2.9,1.2-3.2,2.7L40.1,82.7c-0.3,1.2,0.1,2.4,1,3.2c0.9,0.8,2.2,1.1,3.3,0.7c1.1-0.4,2-1.4,2.2-2.6 l13.3-66.7c0.2-1,0-2-0.7-2.8S57.6,13.3,56.6,13.3z M24.2,26.6c-1.1,0-2.1,0.5-2.8,1.4l-14.1,20c-0.8,1.2-0.8,2.7,0,3.9l14.1,20 c1.1,1.5,3.1,1.9,4.6,0.8c1.5-1.1,1.9-3.1,0.8-4.6L14.1,50l12.8-18.1c0.7-1,0.8-2.4,0.3-3.5C26.6,27.3,25.4,26.6,24.2,26.6 L24.2,26.6z M76.5,26.6c-1.2,0-2.4,0.8-2.9,1.9c-0.5,1.1-0.4,2.4,0.3,3.4L86.7,50L73.9,68.1c-0.7,1-0.8,2.2-0.3,3.3 s1.5,1.8,2.7,1.9c1.2,0.1,2.3-0.4,3-1.4l14.1-20c0.8-1.2,0.8-2.7,0-3.9l-14.1-20C78.7,27.1,77.7,26.6,76.5,26.6L76.5,26.6z"/>',Hg[pv]='<path fill="currentColor" stroke="currentColor" d="M16.7,13.3c-3.7,0-6.7,3-6.7,6.7v26.7c0,3.7,3,6.7,6.7,6.7h13.5c0.1,6-0.5,18.7-6.3,28.2c0,0,0,0,0,0 c-0.9,1.4-0.7,3.1,0.5,4.2c1.2,1.1,3,1.2,4.3,0.2c0,0,14.7-11.2,14.7-32.7V20c0-3.7-3-6.7-6.7-6.7L16.7,13.3z M63.3,13.3 c-3.7,0-6.7,3-6.7,6.7v26.7c0,3.7,3,6.7,6.7,6.7h13.5c0.1,6-0.5,18.7-6.3,28.2h0c-0.9,1.4-0.7,3.1,0.5,4.2c1.2,1.1,3,1.2,4.3,0.2 c0,0,14.7-11.2,14.7-32.7V20c0-3.7-3-6.7-6.7-6.7L63.3,13.3z"/>',Hg[dv]='<path fill="currentColor" stroke="currentColor" d="M73.3,6.7C68,6.7,63,8.7,59.2,12.5l-6.7,6.7c-3.8,3.8-5.9,8.8-5.9,14.1c0,4.2,1.3,8.2,3.7,11.6l-5.5,5.5 c-3.4-2.4-7.4-3.7-11.6-3.7c-5.3,0-10.4,2.1-14.1,5.9l-6.7,6.7C8.7,63,6.7,68,6.7,73.3c0,5.3,2.1,10.4,5.9,14.1s8.8,5.9,14.1,5.9 c5.3,0,10.4-2.1,14.1-5.9l6.7-6.7c3.8-3.8,5.9-8.8,5.9-14.1c0-1.8-0.3-3.6-0.7-5.4l-6,6c-0.2,3.2-1.4,6.3-3.8,8.8l-6.7,6.7 c-5.2,5.2-13.7,5.2-18.9,0c-5.2-5.2-5.2-13.7,0-18.9l6.7-6.7c2.6-2.6,6-3.9,9.4-3.9c2.3,0,4.7,0.7,6.7,1.9L31,64.3 c-0.9,0.8-1.2,2.1-0.9,3.2c0.3,1.2,1.2,2.1,2.4,2.4c1.2,0.3,2.4,0,3.2-0.9L69,35.7c1-1,1.3-2.4,0.7-3.7c-0.5-1.3-1.8-2.1-3.2-2 c-0.9,0-1.7,0.4-2.3,1l-9.1,9.1c-3-5.1-2.4-11.8,2-16.2l6.7-6.7c2.6-2.6,6-3.9,9.4-3.9c3.4,0,6.8,1.3,9.4,3.9 c5.2,5.2,5.2,13.7,0,18.9l-6.7,6.7c-2.4,2.4-5.6,3.7-8.8,3.8l-6,6c1.7,0.5,3.5,0.7,5.4,0.7c5.3,0,10.4-2.1,14.1-5.9l6.7-6.7 c3.8-3.8,5.9-8.8,5.9-14.1c0-5.3-2.1-10.4-5.9-14.1C83.7,8.7,78.7,6.7,73.3,6.7z"/>',Hg[gv]='<path fill="currentColor" stroke="currentColor" d="M18.2,10.1l-5.1,3.5V18l4.8-3.3h0.3v15.4h5.1v-20L18.2,10.1z M36.7,20c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4 c0.6,1,1.7,1.7,2.9,1.7h46.7c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H36.7z M20,40 c-4.5,0-7.5,2.6-7.5,6.5v0.1H17v-0.1c0-1.6,1.2-2.7,2.8-2.7c1.6,0,2.7,1,2.7,2.4c0,1.1-0.7,2.1-3.6,4.8l-6.2,5.8V60h14.8v-3.9 h-8.2v-0.3l3.2-3c3.5-3.1,4.7-5,4.7-7.2C27.3,42.3,24.4,40,20,40z M36.7,46.7c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4 s1.7,1.7,2.9,1.7h46.7c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H36.7z M19.9,66.7 c-4.4,0-7.2,2.4-7.3,6.1H17c0.1-1.5,1.2-2.5,2.8-2.5c1.7,0,2.7,0.9,2.7,2.2c0,1.4-1.1,2.3-2.7,2.3h-2.3v3.3h2.3c1.8,0,3,0.9,3,2.4 c0,1.4-1.2,2.4-2.9,2.4c-1.8,0-3-0.9-3.1-2.3h-4.6c0.2,3.7,3.2,6.1,7.6,6.1c4.6,0,7.9-2.4,7.9-5.8c0-2.4-1.7-4.2-4.3-4.4v-0.3 c2.1-0.4,3.6-2.1,3.6-4.3C27,68.8,24.1,66.7,19.9,66.7L19.9,66.7z M36.7,73.3c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4 c0.6,1,1.7,1.7,2.9,1.7h46.7c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H36.7z"/>',Hg[fv]='<path fill="currentColor" stroke="currentColor" d="M20,16.7c-3.7,0-6.7,3-6.7,6.7s3,6.7,6.7,6.7s6.7-3,6.7-6.7S23.7,16.7,20,16.7z M40,20c-1.2,0-2.3,0.6-2.9,1.7 c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h43.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H40z M20,43.3c-3.7,0-6.7,3-6.7,6.7s3,6.7,6.7,6.7s6.7-3,6.7-6.7S23.7,43.3,20,43.3z M40,46.7c-1.2,0-2.3,0.6-2.9,1.7 c-0.6,1-0.6,2.3,0,3.4s1.7,1.7,2.9,1.7h43.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H40z M20,70 c-3.7,0-6.7,3-6.7,6.7c0,3.7,3,6.7,6.7,6.7s6.7-3,6.7-6.7C26.7,73,23.7,70,20,70z M40,73.3c-1.2,0-2.3,0.6-2.9,1.7 c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h43.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H40z"/>',Hg[mv]='<path fill="currentColor" stroke="currentColor" d="M89.9,20c-0.9,0-1.7,0.4-2.3,1l-51,51l-21-21c-0.8-0.9-2.1-1.2-3.2-0.9s-2.1,1.2-2.4,2.4c-0.3,1.2,0,2.4,0.9,3.2L34.3,79 c1.3,1.3,3.4,1.3,4.7,0l53.3-53.3c1-1,1.3-2.4,0.7-3.7C92.6,20.7,91.3,19.9,89.9,20z"/>',Hg[vv]='<path fill="currentColor" stroke="currentColor" d="M33.3,10l-20,20l20,20V36.7h23.3c9.3,0,16.7,7.4,16.7,16.7S66,70,56.7,70h-10c-2.4,0-4.6,1.2-5.9,3.3 c-1.2,2.1-1.2,4.6,0,6.7c1.2,2.1,3.4,3.3,5.9,3.3h10c15.6,0,28.1-12.2,29.5-27.4c0.3-0.8,0.5-1.7,0.5-2.6c0-16.5-13.5-30-30-30 H33.3L33.3,10z"/>',Hg[yv]='<path fill="currentColor" stroke="currentColor" d="M66.7,10v13.3H43.3c-16.5,0-30,13.5-30,30c0,0.9,0.2,1.8,0.5,2.6c0,0,0,0,0,0c1.4,15.2,13.9,27.4,29.5,27.4h10 c2.4,0,4.6-1.2,5.9-3.3c1.2-2.1,1.2-4.6,0-6.7C58,71.2,55.7,70,53.3,70h-10c-9.3,0-16.7-7.4-16.7-16.7S34,36.7,43.3,36.7h23.3V50 l20-20L66.7,10z"/>',Hg[bv]='<path fill="currentColor" stroke="currentColor" d="M49.9,30c-0.9,0-1.7,0.4-2.3,1L14.3,64.3c-0.9,0.8-1.2,2.1-0.9,3.2c0.3,1.2,1.2,2.1,2.4,2.4c1.2,0.3,2.4,0,3.2-0.9l31-31 l31,31c0.8,0.9,2.1,1.2,3.2,0.9c1.2-0.3,2.1-1.2,2.4-2.4c0.3-1.2,0-2.4-0.9-3.2L52.4,31C51.7,30.3,50.8,30,49.9,30L49.9,30z"/>',Hg[wv]='<path fill="currentColor" stroke="currentColor" d="M83.3,30c-0.9,0-1.7,0.4-2.3,1L50,62L19,31c-0.6-0.6-1.5-1-2.4-1c-1.4,0-2.6,0.8-3.1,2.1c-0.5,1.3-0.2,2.7,0.8,3.6 L47.6,69c1.3,1.3,3.4,1.3,4.7,0l33.3-33.3c1-1,1.3-2.4,0.8-3.7C85.9,30.7,84.7,29.9,83.3,30z"/>',Hg[Ev]='<path fill="currentColor" stroke="currentColor" d="M49.9,16.7c-0.9,0-1.7,0.4-2.3,1L14.3,51c-0.9,0.8-1.2,2.1-0.9,3.2c0.3,1.2,1.2,2.1,2.4,2.4s2.4,0,3.2-0.9l31-31l31,31 c0.8,0.9,2.1,1.2,3.2,0.9c1.2-0.3,2.1-1.2,2.4-2.4s0-2.4-0.9-3.2L52.4,17.6C51.7,17,50.8,16.7,49.9,16.7L49.9,16.7z M49.9,40 c-0.9,0-1.7,0.4-2.3,1L14.3,74.3c-0.9,0.8-1.2,2.1-0.9,3.2c0.3,1.2,1.2,2.1,2.4,2.4s2.4,0,3.2-0.9l31-31l31,31 c0.8,0.9,2.1,1.2,3.2,0.9c1.2-0.3,2.1-1.2,2.4-2.4c0.3-1.2,0-2.4-0.9-3.2L52.4,41C51.7,40.3,50.8,40,49.9,40L49.9,40z"/>',Hg[Mv]='<path fill="currentColor" stroke="currentColor" d="M83.3,20c-0.9,0-1.7,0.4-2.3,1L50,52L19,21c-0.6-0.6-1.5-1-2.4-1c-1.4,0-2.6,0.8-3.1,2.1c-0.5,1.3-0.2,2.7,0.8,3.6 L47.6,59c1.3,1.3,3.4,1.3,4.7,0l33.3-33.3c1-1,1.3-2.4,0.8-3.7C85.9,20.7,84.7,19.9,83.3,20z M83.3,43.3c-0.9,0-1.7,0.4-2.3,1 l-31,31l-31-31c-0.6-0.6-1.5-1-2.4-1c-1.4,0-2.6,0.8-3.1,2.1s-0.2,2.7,0.8,3.6l33.3,33.3c1.3,1.3,3.4,1.3,4.7,0L85.7,49 c1-1,1.3-2.4,0.8-3.7C85.9,44.1,84.7,43.3,83.3,43.3L83.3,43.3z"/>',Hg[Sv]='<path fill="currentColor" stroke="currentColor" d="M90,20H10c-3.7,0-6.7,3-6.7,6.7v46.7c0,3.7,3,6.7,6.7,6.7h80c3.7,0,6.7-3,6.7-6.7V26.7C96.7,23,93.7,20,90,20L90,20z M66.7,33.3h6.7V40h-6.7V33.3z M53.3,33.3H60V40h-6.7V33.3z M66.7,46.7v6.7H60v-6.7H66.7z M40,33.3h6.7V40H40V33.3z M53.3,46.7 v6.7h-6.7v-6.7H53.3z M26.7,33.3h6.7V40h-6.7V33.3z M40,46.7v6.7h-6.7v-6.7H40z M13.3,33.3H20V40h-6.7V33.3z M13.3,46.7h13.3v6.7 H13.3V46.7z M20,66.7h-6.7V60H20V66.7z M73.3,66.7H26.7V60h46.7V66.7z M86.7,66.7H80V60h6.7V66.7z M86.7,53.3H73.3v-6.7h13.3V53.3 z M86.7,40H80v-6.7h6.7V40z"/>',Hg[Lv]='<path fill="currentColor" stroke="currentColor" d="M13.3,16.7c-3.7,0-6.7,3-6.7,6.7v53.3c0,3.7,3,6.7,6.7,6.7h73.3c3.7,0,6.7-3,6.7-6.7V23.3c0-3.7-3-6.7-6.7-6.7H13.3z M76.7,26.7c3.7,0,6.7,3,6.7,6.7c0,3.7-3,6.7-6.7,6.7C73,40,70,37,70,33.3C70,29.7,73,26.7,76.7,26.7z M16.7,33.3l16.6,16.6 l3.4,3.4l3.9,3.9c1.4,1.4,3.7,1.4,5.1,0c1.4-1.4,1.4-3.7,0-5.1l-3.8-3.8l4.9-4.9l9.9,9.9l7.3,7.3c1.4,1.4,3.7,1.4,5.1,0 c1.4-1.4,1.4-3.7,0-5.1l-0.5-0.5l4.9-4.9l10,10v13.3H16.7L16.7,33.3z"/>',Hg[Av]='<path fill="currentColor" stroke="currentColor" d="M50,4C24.6,4,4,24.6,4,50s20.6,46,46,46s46-20.6,46-46S75.4,4,50,4L50,4z M50,8c23.2,0,42,18.8,42,42S73.2,92,50,92 S8,73.2,8,50S26.8,8,50,8z M50,14c-1.1,0-2,0.9-2,2v28.3c-2.4,0.8-4,3.1-4,5.7c0,0.9,0.2,1.8,0.6,2.6l-12,12 c-0.5,0.5-0.7,1.2-0.6,1.9c0.2,0.7,0.7,1.2,1.4,1.4c0.7,0.2,1.4,0,1.9-0.6l12-12c0.8,0.4,1.7,0.6,2.6,0.6c3.3,0,6-2.7,6-6 c0-2.5-1.6-4.8-4-5.6V16c0-0.5-0.2-1.1-0.6-1.4C51,14.2,50.5,14,50,14z"/>',Hg[kv]='<path fill="currentColor" stroke="currentColor" d="M66.6,13.3c-0.9,0-1.7,0.4-2.3,1L31,47.6c-1.3,1.3-1.3,3.4,0,4.7l33.3,33.3c0.8,0.9,2.1,1.2,3.2,0.9 c1.2-0.3,2.1-1.2,2.4-2.4c0.3-1.2,0-2.4-0.9-3.2L38,50l31-31c1-1,1.3-2.4,0.7-3.7S68,13.3,66.6,13.3L66.6,13.3z"/>',Hg[Cv]='<path fill="currentColor" stroke="currentColor" d="M33.3,13.3c-1.4,0-2.6,0.8-3.1,2.1C29.7,16.6,30,18.1,31,19l31,31L31,81c-0.9,0.8-1.2,2.1-0.9,3.2 c0.3,1.2,1.2,2.1,2.4,2.4c1.2,0.3,2.4,0,3.2-0.9L69,52.4c1.3-1.3,1.3-3.4,0-4.7L35.7,14.3C35.1,13.7,34.2,13.3,33.3,13.3 L33.3,13.3z"/>',Hg[xv]='<path fill="currentColor" stroke="currentColor" d="M70.1,13.3c-1.2,0-2.4,0.6-3,1.7l-40,66.7c-0.7,1-0.7,2.3-0.1,3.4c0.6,1.1,1.7,1.7,2.9,1.7c1.2,0,2.3-0.7,2.9-1.7l40-66.7 c0.6-1,0.7-2.3,0.1-3.3C72.4,14,71.3,13.3,70.1,13.3L70.1,13.3z M30,16.7c-7.3,0-13.3,6-13.3,13.3v6.7C16.7,44,22.7,50,30,50 c0.4,0,0.8-0.1,1.2-0.2c6.7-0.6,12.1-6.2,12.1-13.1V30c0-6.9-5.4-12.5-12.1-13.1C30.8,16.8,30.4,16.7,30,16.7z M30,23.3 c3.7,0,6.7,2.9,6.7,6.7v6.7c0,3.7-2.9,6.7-6.7,6.7s-6.7-2.9-6.7-6.7V30C23.3,26.3,26.3,23.3,30,23.3z M70,50 c-7.3,0-13.3,6-13.3,13.3V70c0,6.9,5.4,12.5,12.1,13.1c0.4,0.2,0.8,0.2,1.2,0.2c0.4,0,0.8-0.1,1.2-0.2c6.7-0.6,12.1-6.2,12.1-13.1 v-6.7C83.3,56,77.3,50,70,50z M70,56.7c3.7,0,6.7,2.9,6.7,6.7V70c0,3.7-2.9,6.7-6.7,6.7s-6.7-2.9-6.7-6.7v-6.7 C63.3,59.6,66.3,56.7,70,56.7z"/>',Hg[Dv]='<path fill="currentColor" stroke="currentColor" d="M13.3,10l-6.7,6.7L13.3,30l10,3.3L35,45l6.7-6.7L30,26.7l-3.3-10L13.3,10z M73.6,10c-5.5-0.2-11.1,1.8-15.3,6 c-5.5,5.5-5.9,12-3.2,18.2L16.3,72.9c-3.9,3.9-3.9,10.2,0,14.1c3.9,3.9,10.2,3.9,14.1,0l38.7-38.7c6.2,2.7,12.7,2.2,18.2-3.2 c5.6-5.6,7.3-13.7,5-20.8L80,36.7L69.3,34l-2.7-10.7L79,11C77.2,10.4,75.4,10.1,73.6,10z M68.4,58.8L55.9,71.3l16.1,16.1 c3.5,3.5,9.1,3.5,12.6,0c3.5-3.5,3.5-9.1,0-12.6L68.4,58.8z M23.3,76.7c1.8,0,3.3,1.5,3.3,3.3s-1.5,3.3-3.3,3.3 c-1.8,0-3.3-1.5-3.3-3.3C20,78.2,21.5,76.7,23.3,76.7z"/>',Hg[Tv]='<path fill="currentColor" stroke="currentColor" d="M50,4C24.6,4,4,24.6,4,50s20.6,46,46,46s46-20.6,46-46S75.4,4,50,4L50,4z M50,8c23.2,0,42,18.8,42,42S73.2,92,50,92 S8,73.2,8,50S26.8,8,50,8z M48,26v22H26v4h22v22h4V52h22v-4H52V26L48,26z"/>',Hg[Pv]='<path fill="currentColor" stroke="currentColor" d="M50,4C24.6,4,4,24.6,4,50s20.6,46,46,46s46-20.6,46-46S75.4,4,50,4L50,4z M50,8c23.2,0,42,18.8,42,42S73.2,92,50,92 S8,73.2,8,50S26.8,8,50,8z M26,48v4h48v-4H26z"/>',Hg[Ov]='<path fill="currentColor" stroke="currentColor" d="M83.3,13.3c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4c-0.6,1-1.7,1.7-2.9,1.7H16.7c-1.2,0-2.3-0.6-2.9-1.7 c-0.6-1-0.6-2.3,0-3.4c0.6-1,1.7-1.7,2.9-1.7L83.3,13.3z M83.3,30c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4 c-0.6,1-1.7,1.7-2.9,1.7h-40c-1.2,0-2.3-0.6-2.9-1.7c-0.6-1-0.6-2.3,0-3.4c0.6-1,1.7-1.7,2.9-1.7H83.3z M13.3,30l20,20l-20,20V30z M83.3,46.7c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4c-0.6,1-1.7,1.7-2.9,1.7h-40c-1.2,0-2.3-0.6-2.9-1.7c-0.6-1-0.6-2.3,0-3.4 c0.6-1,1.7-1.7,2.9-1.7H83.3z M83.3,63.3c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4c-0.6,1-1.7,1.7-2.9,1.7h-40 c-1.2,0-2.3-0.6-2.9-1.7c-0.6-1-0.6-2.3,0-3.4c0.6-1,1.7-1.7,2.9-1.7H83.3z M83.3,80c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4 c-0.6,1-1.7,1.7-2.9,1.7H16.7c-1.2,0-2.3-0.6-2.9-1.7c-0.6-1-0.6-2.3,0-3.4c0.6-1,1.7-1.7,2.9-1.7H83.3z"/>',Hg[Fv]='<path fill="currentColor" stroke="currentColor" d="M83.3,13.3c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4c-0.6,1-1.7,1.7-2.9,1.7H50c-1.2,0-2.3-0.6-2.9-1.7 c-0.6-1-0.6-2.3,0-3.4c0.6-1,1.7-1.7,2.9-1.7L83.3,13.3z M83.3,30c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4 c-0.6,1-1.7,1.7-2.9,1.7h-50c-1.2,0-2.3-0.6-2.9-1.7c-0.6-1-0.6-2.3,0-3.4c0.6-1,1.7-1.7,2.9-1.7H83.3z M23.3,30v40l-20-20 L23.3,30z M83.3,46.7c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4c-0.6,1-1.7,1.7-2.9,1.7h-50c-1.2,0-2.3-0.6-2.9-1.7 c-0.6-1-0.6-2.3,0-3.4s1.7-1.7,2.9-1.7H83.3z M83.3,63.3c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4c-0.6,1-1.7,1.7-2.9,1.7h-50 c-1.2,0-2.3-0.6-2.9-1.7c-0.6-1-0.6-2.3,0-3.4c0.6-1,1.7-1.7,2.9-1.7H83.3z M83.3,80c1.2,0,2.3,0.6,2.9,1.7c0.6,1,0.6,2.3,0,3.4 c-0.6,1-1.7,1.7-2.9,1.7H50c-1.2,0-2.3-0.6-2.9-1.7s-0.6-2.3,0-3.4c0.6-1,1.7-1.7,2.9-1.7H83.3z"/>',Hg[Iv]='<path fill="currentColor" stroke="currentColor" d="M12,12v24c0,0.7,0.4,1.4,1,1.8c0.6,0.4,1.4,0.4,2,0c0.6-0.4,1-1,1-1.8V16h20c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2 c-0.4-0.6-1-1-1.8-1L12,12z M64,12c-1.1,0-2,0.9-2,1.9s0.8,2,1.9,2.1c0,0,0.1,0,0.1,0h20v20c0,1,0.8,1.9,1.8,2c0.1,0,0.1,0,0.2,0 c1.1,0,2-0.9,2-2V12H64z M14,64c-1.1,0-2,0.9-2,2v24h24c0.1,0,0.1,0,0.2,0c1.1-0.1,1.9-1,1.8-2.1C38,86.8,37.1,86,36,86H16V66 c0-0.5-0.2-1.1-0.6-1.4C15,64.2,14.5,64,14,64z M86,64c-1.1,0-2,0.9-2,2v20H64c-0.7,0-1.4,0.4-1.8,1c-0.4,0.6-0.4,1.4,0,2 c0.4,0.6,1,1,1.8,1h24V66c0-0.5-0.2-1.1-0.6-1.4S86.5,64,86,64z"/>',Hg[Nv]='<path fill="currentColor" stroke="currentColor" d="M34,10c-1.1,0-2,0.9-2,2v20H12c-0.7,0-1.4,0.4-1.8,1c-0.4,0.6-0.4,1.4,0,2c0.4,0.6,1,1,1.8,1h24V12c0-0.5-0.2-1.1-0.6-1.4 C35,10.2,34.5,10,34,10L34,10z M66,10c-1,0-1.9,0.8-2,1.9c0,0,0,0.1,0,0.1v24h24c0.1,0,0.1,0,0.2,0c1.1-0.1,1.9-1,1.8-2.1 C90,32.8,89.1,32,88,32H68V12c0-0.5-0.2-1.1-0.6-1.4C67,10.2,66.5,10,66,10L66,10z M12,64c-0.7,0-1.4,0.4-1.8,1 c-0.4,0.6-0.4,1.4,0,2c0.4,0.6,1,1,1.8,1h20v20c0,0.7,0.4,1.4,1,1.8c0.6,0.4,1.4,0.4,2,0c0.6-0.4,1-1,1-1.8V64L12,64z M64,64v24 c0,0.7,0.4,1.4,1,1.8c0.6,0.4,1.4,0.4,2,0c0.6-0.4,1-1,1-1.8V68h20c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1 L64,64z"/>',Hg[Bv]='<path fill="currentColor" stroke="currentColor" d="M57,22c-8.6,0-16,4.4-20.5,11c-1.4-0.5-2.9-1-4.5-1c-6.7,0-12.1,4.8-13.5,11C11.3,45.4,6,52,6,60c0,9.9,8.1,18,18,18h54 c8.8,0,16-7.2,16-16c0-7.4-5.2-13.4-12-15.2C81.8,33.1,70.7,22,57,22z M57,26c11.6,0,21,9.4,21,21c0,0.3,0,0.6-0.1,1.1 c-0.1,1,0.7,1.9,1.7,2.1C85.5,50.9,90,55.9,90,62c0,6.7-5.3,12-12,12H24c-7.8,0-14-6.2-14-14c0-6.6,4.5-12,10.6-13.6 c0.8-0.2,1.4-0.9,1.5-1.7c0.6-4.9,4.8-8.7,9.9-8.7c1.6,0,3.1,0.4,4.4,1c0.9,0.5,2.1,0.1,2.6-0.8C42.7,30.1,49.3,26,57,26L57,26z"/>',Hg[Rv]='<path fill="currentColor" stroke="currentColor" d="M37,16c-4.4,0-8.3,3.3-9.2,7.6l-11.6,52c-0.5,2.2,0,4.3,1.2,5.9c1.2,1.6,3.2,2.6,5.4,2.6H79c4.4,0,8.3-3.3,9.2-7.6 l11.6-52c0.5-2.2,0-4.3-1.2-5.9C97.4,17,95.4,16,93.2,16L37,16z M37,20h56.2c1.1,0,1.8,0.4,2.2,1c0.5,0.6,0.7,1.4,0.4,2.6l-1,4.4 H30.8l0.8-3.6C32.1,22.2,34.8,20,37,20z M29.9,32H94l-9.6,43.6C83.9,77.8,81.2,80,79,80H22.8c-1.1,0-1.8-0.4-2.2-1 c-0.5-0.6-0.7-1.4-0.4-2.6L29.9,32z M0,36v4h19.6l0.9-4L0,36z M36.7,38c-0.8,0.1-1.4,0.7-1.6,1.5l-3.5,14c-0.2,0.6,0,1.2,0.4,1.7 c0.4,0.5,1,0.8,1.6,0.8H81c0.9,0,1.7-0.6,1.9-1.5l3.5-14c0.2-0.6,0-1.3-0.4-1.8c-0.4-0.5-1-0.8-1.6-0.8H37.1c-0.1,0-0.1,0-0.2,0 C36.9,38,36.8,38,36.7,38L36.7,38z M38.7,42h43.2l-2.4,10H36.2L38.7,42z M0,52v4h16l0.9-4H0z M0,68v4h12.4l0.9-4H0z"/>',Hg[zv]='<path fill="currentColor" stroke="currentColor" d="M83.3,13.3c-0.9,0-1.7,0.4-2.3,1l-21,21V20c0-0.9-0.3-1.8-1-2.4c-0.6-0.6-1.5-1-2.4-1c-1.8,0-3.3,1.5-3.3,3.4v22.8 c-0.2,1.1,0.2,2.1,0.9,2.9c0.8,0.8,1.8,1.1,2.9,0.9H80c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H64.7 l21-21c1-1,1.3-2.4,0.7-3.7C85.9,14.1,84.6,13.3,83.3,13.3L83.3,13.3z M43.3,53.3c-0.1,0-0.2,0-0.4,0H20c-1.2,0-2.3,0.6-2.9,1.7 c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h15.3l-21,21c-0.9,0.8-1.2,2.1-0.9,3.2c0.3,1.2,1.2,2.1,2.4,2.4 c1.2,0.3,2.4,0,3.2-0.9l21-21V80c0,1.2,0.6,2.3,1.7,2.9c1,0.6,2.3,0.6,3.4,0c1-0.6,1.7-1.7,1.7-2.9V57.1c0.1-1-0.2-2-0.8-2.7 C45.2,53.7,44.2,53.3,43.3,53.3L43.3,53.3z"/>',Hg[Hv]='<path fill="currentColor" stroke="currentColor" d="M83.3,13.3c-0.1,0-0.2,0-0.4,0H60c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h15.3L20,75.3V60 c0-0.9-0.3-1.8-1-2.4c-0.6-0.6-1.5-1-2.4-1c-1.8,0-3.3,1.5-3.3,3.4v22.8c-0.2,1.1,0.2,2.1,0.9,2.9c0.8,0.8,1.8,1.1,2.9,0.9H40 c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H24.7L80,24.7V40c0,1.2,0.6,2.3,1.7,2.9c1,0.6,2.3,0.6,3.4,0 c1-0.6,1.7-1.7,1.7-2.9V17.1c0.1-1-0.2-2-0.8-2.7S84.2,13.3,83.3,13.3L83.3,13.3z"/>',Hg[Vv]='<path fill="currentColor" stroke="currentColor" d="M26.7,13.3c-7.2,0-13.3,6.1-13.3,13.3S19.4,40,26.7,40c1,0,2-0.1,3-0.4L40,50L29.6,60.4c-1-0.2-1.9-0.4-3-0.4 c-7.2,0-13.3,6.1-13.3,13.3c0,7.2,6.1,13.3,13.3,13.3c7.2,0,13.3-6.1,13.3-13.3c0-1-0.1-2-0.4-3L50,60l18.5,18.5 c3.1,3.1,7.4,4.9,11.8,4.9h7.4c2.1,0,3.2-2.6,1.7-4.1L39.6,29.6c0.2-1,0.4-1.9,0.4-3C40,19.4,33.9,13.3,26.7,13.3L26.7,13.3z M80.2,16.7c-4.4,0-8.7,1.8-11.8,4.9L54.7,35.3l10,10l24.6-24.6c1.5-1.5,0.4-4.1-1.7-4.1L80.2,16.7z M26.7,20 c3.6,0,6.7,3.1,6.7,6.7s-3.1,6.7-6.7,6.7S20,30.2,20,26.7S23.1,20,26.7,20z M50,46.7c1.8,0,3.3,1.5,3.3,3.3s-1.5,3.3-3.3,3.3 s-3.3-1.5-3.3-3.3S48.2,46.7,50,46.7z M26.7,66.7c3.6,0,6.7,3.1,6.7,6.7S30.2,80,26.7,80S20,76.9,20,73.3S23.1,66.7,26.7,66.7z"/>',Hg[qv]='<path fill="currentColor" stroke="currentColor" d="M16.7,86.7c0.1,0,8.1-0.1,16.3-6.4c10.6-8.2,16.4-23.2,17-43.6H36.7c-1.3,0-2.6-0.8-3.1-2.1c-0.5-1.2-0.2-2.7,0.7-3.6 L57.6,7.6c1.3-1.3,3.4-1.3,4.7,0L85.7,31c1,1,1.2,2.4,0.7,3.6c-0.5,1.2-1.7,2.1-3.1,2.1H69.9c-1.8,55-47.9,56.7-53.3,56.7 c-1.8,0-3.3-1.5-3.3-3.3C13.3,88.2,14.8,86.7,16.7,86.7L16.7,86.7z"/>',Hg[jv]='<path fill="currentColor" stroke="currentColor" d="M16.7,13.3c0.1,0,8.1,0.1,16.3,6.4c10.6,8.2,16.4,23.2,17,43.6H36.7c-1.3,0-2.6,0.8-3.1,2.1c-0.5,1.2-0.2,2.7,0.7,3.6 l23.3,23.3c1.3,1.3,3.4,1.3,4.7,0L85.7,69c1-1,1.2-2.4,0.7-3.6c-0.5-1.2-1.7-2.1-3.1-2.1H69.9C68.2,8.3,22,6.7,16.7,6.7 c-1.8,0-3.3,1.5-3.3,3.3C13.3,11.8,14.8,13.3,16.7,13.3L16.7,13.3z"/>',Hg[Uv]='<path fill="currentColor" stroke="currentColor" d="M49.9,9.9c-3.7,0.1-6.6,3.1-6.6,6.8V30H30c-2.4,0-4.6,1.2-5.9,3.3c-1.2,2.1-1.2,4.6,0,6.7c1.2,2.1,3.4,3.3,5.9,3.3h13.3 v13.3c0,2.4,1.2,4.6,3.3,5.9c2.1,1.2,4.6,1.2,6.7,0s3.3-3.4,3.3-5.9V43.3H70c2.4,0,4.6-1.2,5.9-3.3c1.2-2.1,1.2-4.6,0-6.7 C74.6,31.2,72.4,30,70,30H56.7V16.7c0-1.8-0.7-3.5-2-4.8C53.4,10.6,51.7,9.9,49.9,9.9z M30,73.3c-2.4,0-4.6,1.2-5.9,3.3 c-1.2,2.1-1.2,4.6,0,6.7c1.2,2.1,3.4,3.3,5.9,3.3h40c2.4,0,4.6-1.2,5.9-3.3c1.2-2.1,1.2-4.6,0-6.7c-1.2-2.1-3.4-3.3-5.9-3.3 L30,73.3z"/>',Hg[_v]='<path fill="currentColor" stroke="currentColor" d="M76.4,11.7c3.7,3.8,5.6,8.9,5,14.3c-0.5,4-2.4,7.6-5.2,10.5c-2.6,2.6-6.7,6.7-9.2,9.2c-2,2-4.4,3.6-7.1,4.5 c-4.5,1.4-9,1-12.8-0.9l2.9-2.9c1.4,0.5,3,0.8,4.5,0.8c3.6,0,7-1.4,9.5-3.9l9.6-9.6c3.3-3.3,4.7-8.1,3.5-13 c-0.3-1.2-0.8-2.4-1.5-3.5C73,13,68.7,10.6,64,10.6c-3.6,0-7,1.4-9.5,3.9L45,24c-2.5,2.5-3.9,5.9-3.9,9.5c0,1.6,0.3,3.1,0.8,4.5 l-3,3c-1.1-2.3-1.7-4.8-1.7-7.5c0-0.7,0-1.4,0.1-2.1c0.5-3.8,2.2-7.4,5-10.2l9.4-9.4C54.5,9,58.2,7,62.1,6.6 C67.5,6.1,72.6,7.9,76.4,11.7L76.4,11.7z M54.4,34.7c0.3,0.7,0.1,1.6-0.4,2.1L30.9,59.9c-0.5,0.5-1.2,0.7-1.9,0.5 s-1.2-0.7-1.4-1.4s0-1.4,0.5-1.9L51.2,34c0.3-0.4,0.8-0.6,1.3-0.6C53.4,33.5,54.1,34,54.4,34.7z M35.1,44.9l-2.9,2.9 c-1.4-0.5-3-0.8-4.5-0.8c-3.6,0-7,1.4-9.5,3.9l-9.6,9.6c-3.3,3.4-4.7,8.1-3.5,13c0.3,1.2,0.8,2.4,1.5,3.5 c2.6,4.2,6.9,6.6,11.6,6.6c3.6,0,7-1.4,9.5-3.9l9.6-9.6c2.5-2.5,3.9-5.9,3.9-9.5c0-1.6-0.3-3.1-0.8-4.5l2.9-2.9 c1.1,2.3,1.7,4.8,1.7,7.5c0,3-0.8,5.9-2.2,8.5c-0.8,1-1.5,1.9-2.1,2.9c-0.3,0.3-0.5,0.6-0.8,0.8l-9.4,9.4 c-2.9,2.9-6.6,4.8-10.6,5.2c-6.2,0.6-12-1.9-15.8-6.9c-2.4-3.2-3.6-7.2-3.4-11.2c0-0.1,0-0.2,0-0.3c0.3-4.2,2-8.1,5-11.1l9.4-9.4 c2-2,4.4-3.6,7.1-4.5C26.8,42.6,31.3,43,35.1,44.9L35.1,44.9z"/><path fill="currentColor" stroke="currentColor" d="M99.2,69.3c0-0.2,0-0.2,0-0.4c0-0.2,0-0.2,0-0.4s0-0.2-0.2-0.4c0-0.2,0-0.2-0.2-0.4l0,0l-0.2-0.2l-0.2-0.2L79.2,53 c-0.6-0.4-1.3-0.6-1.9-0.2c-0.8,0.4-1.2,1-1.2,1.7V62c-8.1,0.4-14.6,3.1-19.2,8.1c-8.5,9-7.7,22.5-7.7,23.1c0,0.2,0,0.2,0,0.4 c0,0.2,0,0.2,0,0.4s0.2,0.2,0.2,0.4l0.2,0.2c0.2,0.2,0.2,0.2,0.4,0.2l0.2,0.2c0.2,0,0.4,0,0.6,0.2H51l0,0l0,0c0,0,0,0,0.2,0 s0.2,0,0.4,0s0.2,0,0.4-0.2c0.2,0,0.2-0.2,0.4-0.2s0.2-0.2,0.4-0.2c0,0,0.2-0.2,0.2-0.4c0-0.2,0.2-0.2,0.2-0.4s0-0.2,0-0.4 c0-0.2,0-0.2,0-0.4c0-0.8,0.6-16.6,23.1-17.5v7.3c0,0.8,0.4,1.3,1,1.7c0.6,0.4,1.3,0.2,1.9-0.2l19.2-14l0.2-0.2l0.2-0.2l0,0 c0-0.2,0.2-0.2,0.2-0.4L99.2,69.3L99.2,69.3z"/>',Hg[Wv]='<path fill="currentColor" stroke="currentColor" d="M49.4,68.5c0,0.2,0,0.2,0.2,0.4l0,0l0.2,0.2l0.2,0.2l19.3,14.1c0.6,0.4,1.3,0.6,1.9,0.2c0.6-0.4,1-1,1-1.7v-7.3 c22.5,0.8,23.1,16.8,23.1,17.6c0,0.2,0,0.2,0,0.4s0,0.2,0,0.4s0.2,0.2,0.2,0.4s0.2,0.2,0.2,0.4c0,0,0.2,0.2,0.4,0.2 c0.2,0,0.2,0.2,0.4,0.2s0.2,0,0.4,0.2c0.2,0,0.2,0,0.4,0c0,0,0,0,0.2,0l0,0l0,0h0.2c0.2,0,0.4,0,0.6-0.2l0.2-0.2 c0.2,0,0.2-0.2,0.4-0.2l0.2-0.2c0-0.2,0.2-0.2,0.2-0.4s0-0.2,0-0.4s0-0.2,0-0.4c0-0.6,0.8-14.1-7.7-23.2c-4.6-5-11.2-7.7-19.3-8.1 v-7.5c0-0.8-0.4-1.4-1.2-1.7c-0.6-0.4-1.3-0.2-1.9,0.2L49.8,66.4l-0.2,0.2l-0.2,0.2l0,0c0,0.2,0,0.2,0,0.4 c-0.2,0.2-0.2,0.2-0.2,0.4s0,0.2,0,0.4s0,0.2,0,0.4C49.2,68.4,49.2,68.5,49.4,68.5L49.4,68.5z"/><path fill="currentColor" stroke="currentColor" d="M76.4,11.7c3.7,3.8,5.6,8.9,5,14.3c-0.5,4-2.4,7.6-5.2,10.5c-2.6,2.6-6.7,6.7-9.2,9.2c-2,2-4.4,3.6-7.1,4.5 c-4.5,1.4-9,1-12.8-0.9l2.9-2.9c1.4,0.5,3,0.8,4.5,0.8c3.6,0,7-1.4,9.5-3.9l9.6-9.6c3.3-3.3,4.7-8.1,3.5-13 c-0.3-1.2-0.8-2.4-1.5-3.5C73,13,68.7,10.6,64,10.6c-3.6,0-7,1.4-9.5,3.9L45,24c-2.5,2.5-3.9,5.9-3.9,9.5c0,1.6,0.3,3.1,0.8,4.5 l-3,3c-1.1-2.3-1.7-4.8-1.7-7.5c0-0.7,0-1.4,0.1-2.1c0.5-3.8,2.2-7.4,5-10.2l9.4-9.4C54.5,9,58.2,7,62.1,6.6 C67.5,6.1,72.6,7.9,76.4,11.7L76.4,11.7z M54.4,34.7c0.3,0.7,0.1,1.6-0.4,2.1L30.9,59.9c-0.5,0.5-1.2,0.7-1.9,0.5s-1.2-0.7-1.4-1.4 s0-1.4,0.5-1.9L51.2,34c0.3-0.4,0.8-0.6,1.3-0.6C53.4,33.5,54.1,34,54.4,34.7z M35.1,44.9l-2.9,2.9c-1.4-0.5-3-0.8-4.5-0.8 c-3.6,0-7,1.4-9.5,3.9l-9.6,9.6c-3.3,3.4-4.7,8.1-3.5,13c0.3,1.2,0.8,2.4,1.5,3.5c2.6,4.2,6.9,6.6,11.6,6.6c3.6,0,7-1.4,9.5-3.9 l9.6-9.6c2.5-2.5,3.9-5.9,3.9-9.5c0-1.6-0.3-3.1-0.8-4.5l2.9-2.9c1.1,2.3,1.7,4.8,1.7,7.5c0,3-0.8,5.9-2.2,8.5 c-0.8,1-1.5,1.9-2.1,2.9c-0.3,0.3-0.5,0.6-0.8,0.8l-9.4,9.4c-2.9,2.9-6.6,4.8-10.6,5.2c-6.2,0.6-12-1.9-15.8-6.9 c-2.4-3.2-3.6-7.2-3.4-11.2c0-0.1,0-0.2,0-0.3c0.3-4.2,2-8.1,5-11.1l9.4-9.4c2-2,4.4-3.6,7.1-4.5C26.8,42.6,31.3,43,35.1,44.9 L35.1,44.9z"/>',Hg[Gv]='<path fill="currentColor" stroke="currentColor" d="M23.3,6.7c-3.7,0-6.7,3-6.7,6.7v73.3c0,3.7,3,6.7,6.7,6.7h28.4c-3.2-4.8-5.1-10.5-5.1-16.7c0-16.6,13.4-30,30-30 c2.3,0,4.5,0.3,6.7,0.8V31.7c0-0.9-0.3-1.7-1-2.4L60.7,7.6c-0.6-0.6-1.5-1-2.4-1L23.3,6.7z M56.7,13L77,33.3H60 c-1.8,0-3.3-1.5-3.3-3.3L56.7,13z M76.7,53.3c-12.9,0-23.3,10.4-23.3,23.3S63.8,100,76.7,100S100,89.6,100,76.7 S89.6,53.3,76.7,53.3z M76.7,63.3c1.8,0,3.3,1.5,3.3,3.3v6.7h6.7c1.8,0,3.3,1.5,3.3,3.3c0,1.8-1.5,3.3-3.3,3.3H80v6.7 c0,1.8-1.5,3.3-3.3,3.3c-1.8,0-3.3-1.5-3.3-3.3V80h-6.7c-1.8,0-3.3-1.5-3.3-3.3s1.5-3.3,3.3-3.3h6.7v-6.7 C73.3,64.8,74.8,63.3,76.7,63.3L76.7,63.3z"/>',Hg[Yv]='<path fill="currentColor" stroke="currentColor" d="M80,13.3H20c-3.7,0-6.7,3-6.7,6.7v60c0,3.7,3,6.7,6.7,6.7h60c3.7,0,6.7-3,6.7-6.7V20C86.7,16.3,83.7,13.3,80,13.3z M47,71.8H29.1v-4l7.4-7c3.5-3.2,4.3-4.4,4.3-5.8c0-1.7-1.3-2.9-3.2-2.9c-2,0-3.4,1.4-3.4,3.3v0.1h-5.5v-0.1 c0-4.7,3.6-7.8,9.1-7.8c5.3,0,8.8,2.8,8.8,7c0,2.6-1.5,4.9-5.7,8.6l-3.9,3.6v0.3H47L47,71.8z M71.4,52.9l-9.5,18.9h-6.3l9.8-18.6 v-0.3H54v-4.6h17.3V52.9z M80,33.3H20V20h60V33.3z"/>',Hg[$v]='<path fill="currentColor" stroke="currentColor" d="M50,3.3c-1.8,0-3.3,1.5-3.3,3.3c0,0.3,0.1,0.6,0.2,0.8c-2.1,1.1-3.5,3.3-3.5,5.8c0,1.4,0.4,2.7,1.2,3.8 C26.9,19.8,13.3,35,13.3,53.3C13.3,73.5,29.8,90,50,90s36.7-16.5,36.7-36.7c0-18.3-13.6-33.6-31.2-36.2c0.7-1.1,1.2-2.4,1.2-3.8 c0-2.5-1.4-4.7-3.5-5.8c0.1-0.3,0.2-0.5,0.2-0.8C53.3,4.8,51.8,3.3,50,3.3L50,3.3z M50,23.3c16.6,0,30,13.4,30,30s-13.4,30-30,30 s-30-13.4-30-30S33.4,23.3,50,23.3z M49.9,30c-1.8,0-3.3,1.5-3.3,3.4v20c0,0.9,0.4,1.7,1,2.4l10,10c0.8,0.9,2.1,1.2,3.2,0.9 c1.2-0.3,2.1-1.2,2.4-2.4c0.3-1.2,0-2.4-0.9-3.2l-9-9V33.3c0-0.9-0.3-1.8-1-2.4C51.7,30.3,50.8,29.9,49.9,30z"/>',Hg[Kv]='<path fill="currentColor" stroke="currentColor" d="M26.7,13.3c-3.7,0-6.7,3-6.7,6.7v3.3h60c3.7,0,6.7,3,6.7,6.7v43.3H90c3.7,0,6.7-3,6.7-6.7V20c0-3.7-3-6.7-6.7-6.7 L26.7,13.3z M10,30c-3.7,0-6.7,3-6.7,6.7V80c0,3.7,3,6.7,6.7,6.7h63.3c3.7,0,6.7-3,6.7-6.7V36.7c0-3.7-3-6.7-6.7-6.7H10z M40,43.3 c1.8,0,3.3,1.5,3.3,3.3v10h10c1.8,0,3.3,1.5,3.3,3.3s-1.5,3.3-3.3,3.3h-10v10c0,1.8-1.5,3.3-3.3,3.3s-3.3-1.5-3.3-3.3v-10h-10 c-1.8,0-3.3-1.5-3.3-3.3s1.5-3.3,3.3-3.3h10v-10C36.7,44.8,38.2,43.3,40,43.3z"/>',Hg[Jv]='<path fill="currentColor" stroke="currentColor" d="M33.5,16.7c-4.9,0-9.1,3.6-9.9,8.4l-9.1,54.4c-0.2,1,0.1,2,0.7,2.7c0.6,0.7,1.6,1.2,2.5,1.2h70c1.6,0,3-1.2,3.3-2.8 l8.7-52.2c1-6-3.7-11.6-9.9-11.6H33.5z M3.4,36.7c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h7.7 c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H3.4z M28.5,36.7h63.2l-6.7,40H21.8L28.5,36.7z M39.7,46.7 c-1.6,0-3,1.1-3.3,2.7l-2.7,13.3c-0.2,1,0.1,2,0.7,2.8c0.6,0.8,1.6,1.2,2.6,1.2h36.6c1.6,0,3-1.1,3.3-2.7l2.7-13.3 c0.2-1-0.1-2-0.7-2.8c-0.6-0.8-1.6-1.2-2.6-1.2L39.7,46.7z M3.4,50c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4 c0.6,1,1.7,1.7,2.9,1.7H9c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H3.4z M3.4,63.3 c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7H7c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4 c-0.6-1-1.7-1.7-2.9-1.7H3.4z"/>',Hg[my]='<path fill="currentColor" stroke="currentColor" d="M25.4,13.3c-2.5,0-4.8,1.4-6,3.7l-6.1,12.2V30v10v40c0,3.7,3,6.7,6.7,6.7h60c3.7,0,6.7-3,6.7-6.7V40V30v-0.8L80.6,17 c-1.1-2.2-3.4-3.7-6-3.7L25.4,13.3z M25.4,20h49.2l5,10H20.4L25.4,20z M40,36.7h20c1.8,0,3.3,1.5,3.3,3.3c0,1.8-1.5,3.3-3.3,3.3 H40c-1.8,0-3.3-1.5-3.3-3.3C36.7,38.2,38.2,36.7,40,36.7z"/>',Hg[Qv]='<path fill="currentColor" stroke="currentColor" d="M50,10c-1.2,0-2.5,0.2-3.7,0.7l-28.1,11c-2,0.8-2.1,3.6-0.1,4.5L48,38.9c0.6,0.3,1.3,0.4,2,0.4s1.3-0.1,2-0.4l29.8-12.6 c2-0.8,2-3.7-0.1-4.5l-28.1-11C52.5,10.2,51.2,10,50,10L50,10z M50,20c3.7,0,6.7,1.5,6.7,3.3c0,1.8-3,3.3-6.7,3.3 c-3.7,0-6.7-1.5-6.7-3.3C43.3,21.5,46.3,20,50,20z M12.9,31.7C11.4,31.9,10,33.2,10,35v33.5c0,3.8,2.1,7.3,5.6,9 c0,0,15.4,7.6,24.6,12.1c3,1.5,6.5-0.7,6.5-4.1V50.2c0-2.8-1.7-5.3-4.3-6.4L14.6,31.9C14,31.7,13.5,31.6,12.9,31.7L12.9,31.7z M87.1,31.7c-0.5-0.1-1.1,0-1.6,0.2L57.6,43.7c-2.6,1.1-4.3,3.6-4.3,6.4v35.2c0,3.4,3.5,5.6,6.5,4.1C69,85,84.4,77.4,84.4,77.4 c3.4-1.7,5.6-5.1,5.6-9V35C90,33.2,88.6,31.9,87.1,31.7L87.1,31.7z M19.3,41c0.2,0,0.4,0,0.7,0.1c1.8,0.6,3.3,3.3,3.3,6 c0,2.8-1.5,4.5-3.3,4c-1.8-0.6-3.3-3.3-3.3-6C16.7,42.6,17.8,40.9,19.3,41z M80.7,42.2c1.5,0,2.7,1.6,2.7,4.1c0,2.8-1.5,5.5-3.3,6 c-1.8,0.6-3.3-1.2-3.3-4c0-2.8,1.5-5.5,3.3-6C80.2,42.2,80.5,42.2,80.7,42.2L80.7,42.2z M67.3,47.6c1.5,0,2.7,1.6,2.7,4.1 c0,2.8-1.5,5.5-3.3,6c-1.8,0.6-3.3-1.2-3.3-4c0-2.8,1.5-5.5,3.3-6C66.9,47.7,67.1,47.6,67.3,47.6z M80.7,61c1.5,0,2.7,1.6,2.7,4.1 c0,2.8-1.5,5.5-3.3,6c-1.8,0.6-3.3-1.2-3.3-4s1.5-5.5,3.3-6C80.2,61,80.5,61,80.7,61L80.7,61z M32.7,67.6c0.2,0,0.4,0,0.7,0.1 c1.8,0.6,3.3,3.3,3.3,6c0,2.8-1.5,4.5-3.3,4c-1.8-0.6-3.3-3.3-3.3-6C30,69.3,31.1,67.6,32.7,67.6z M67.3,67.6 c1.5,0,2.7,1.6,2.7,4.1c0,2.8-1.5,5.5-3.3,6c-1.8,0.6-3.3-1.2-3.3-4c0-2.8,1.5-5.5,3.3-6C66.9,67.7,67.1,67.6,67.3,67.6z"/>',Hg[Xv]='<path fill="currentColor" stroke="currentColor" d="M13.3,10c-3.7,0-6.7,3-6.7,6.7v10v50c0,3.7,3,6.7,6.7,6.7h4.3c1.2,2,3.3,3.3,5.7,3.3h10c2.4,0,4.6-1.4,5.7-3.3h21.9 c1.2,2,3.3,3.3,5.7,3.3h10c2.4,0,4.6-1.4,5.7-3.3h4.3c3.7,0,6.7-3,6.7-6.7V23.3c0-3.7-3-6.7-6.7-6.7H37.3l-2.1-3.4 c-1.2-2-3.4-3.2-5.7-3.2L13.3,10z M26.7,53.3h46.7c1.9,0,3.3,1.4,3.3,3.3V80h-10V66.7c0-1.8-1.5-3.3-3.3-3.3H36.7 c-1.8,0-3.3,1.5-3.3,3.3V80h-10V56.7C23.3,54.8,24.8,53.3,26.7,53.3L26.7,53.3z"/>',Hg[Zv]='<path fill="currentColor" stroke="currentColor" d="M56.7,6.7c-5.5,0-10,4.5-10,10c0,3.3,1.6,6.3,4.3,8.2L46.8,40c-0.1,0-0.1,0-0.2,0c-2.9,0-5.8,1-8.1,2.8l-12.4-9.6 c0.3-1,0.5-2.1,0.5-3.2c0-5.5-4.5-10-10-10s-10,4.5-10,10s4.5,10,10,10c1.9,0,3.8-0.6,5.4-1.6L34.4,48c-0.7,1.7-1.1,3.5-1.1,5.3 c0,2.6,0.8,5.2,2.3,7.4L23.8,74.1c-1.2-0.5-2.5-0.7-3.8-0.7c-5.5,0-10,4.5-10,10s4.5,10,10,10s10-4.5,10-10c0-1.7-0.4-3.3-1.2-4.8 l11.8-13.3c1.9,1,4,1.5,6.1,1.5c2.1,0,4.2-0.5,6.1-1.5l11.8,13.3c-0.8,1.5-1.2,3.1-1.2,4.8c0,5.5,4.5,10,10,10s10-4.5,10-10 s-4.5-10-10-10c-1.3,0-2.6,0.3-3.8,0.7L57.7,60.8c1.5-2.2,2.3-4.8,2.3-7.4c0-0.1,0-0.1,0-0.2L75.1,49c1.9,2.7,4.9,4.3,8.2,4.3 c5.5,0,10-4.5,10-10s-4.5-10-10-10c-5.2,0-9.6,4-10,9.3l-15.1,4.1c-1.2-2.1-2.9-3.8-5-5l4.1-15.1c5.2-0.4,9.3-4.7,9.3-10 C66.7,11.1,62.2,6.7,56.7,6.7L56.7,6.7z"/>',Hg[ty]='<path fill="currentColor" stroke="currentColor" d="M20,13.3c-3.7,0-6.7,3-6.7,6.7v10c0,1.8,1.5,3.3,3.3,3.3h66.7c1.8,0,3.3-1.5,3.3-3.3V20c0-3.7-3-6.7-6.7-6.7H20z M16.7,40 c-1.8,0-3.3,1.5-3.3,3.3v13.3c0,1.8,1.5,3.3,3.3,3.3h66.7c1.8,0,3.3-1.5,3.3-3.3V43.3c0-1.8-1.5-3.3-3.3-3.3L16.7,40z M16.7,66.7 c-1.8,0-3.3,1.5-3.3,3.3v10c0,3.7,3,6.7,6.7,6.7h27.3c-0.8-2.3-0.8-4.9,0.1-7.2c0.5-1.2,1.2-2.3,2.2-3.2l9.6-9.6L16.7,66.7z M70,66.7c-0.9,0-1.7,0.3-2.4,1L54.3,81c-0.3,0.3-0.6,0.7-0.7,1.1c-0.3,0.8-0.3,1.7,0,2.6c0.2,0.4,0.4,0.8,0.7,1.1L67.6,99 c0.6,0.7,1.5,1,2.4,1s1.7-0.3,2.4-1c1.3-1.3,1.3-3.4,0-4.7l-7.6-7.6h32c1.8,0,3.3-1.5,3.3-3.3c0-1.8-1.5-3.3-3.3-3.3h-32l7.6-7.6 c1.3-1.3,1.3-3.4,0-4.7C71.7,67,70.9,66.7,70,66.7z"/>',Hg[ey]='<path fill="currentColor" stroke="currentColor" d="M50,10c-22.1,0-40,17.9-40,40s17.9,40,40,40s40-17.9,40-40S72.1,10,50,10z M50,16.7c18.4,0,33.3,14.9,33.3,33.3 S68.4,83.3,50,83.3S16.7,68.4,16.7,50S31.6,16.7,50,16.7z M63.3,33.3c-0.4,0-0.7,0.1-1,0.2l-30,10C31,44,30,45.2,30,46.7 c0,1.6,1.1,2.9,2.6,3.2l14,3.5l3.5,14c0.3,1.5,1.6,2.6,3.2,2.6c1.5,0,2.7-1,3.1-2.3l10-30c0.1-0.3,0.2-0.7,0.2-1 C66.7,34.8,65.2,33.3,63.3,33.3L63.3,33.3z"/>',Hg[ny]='<path fill="currentColor" stroke="currentColor" d="M16.7,13.3c-3.7,0-6.7,3-6.7,6.7v10v45.9l6.7-6.7V30h66.7v53.3H30.8L24.1,90H90V30v-3.3V20c0-3.7-3-6.7-6.7-6.7L16.7,13.3 z M34,50c-1.5,0-2.2,1.8-1.2,2.8l4.8,4.8L12.4,82.9c-1.3,1.3-1.3,3.4,0,4.7c1.3,1.3,3.4,1.3,4.7,0l25.3-25.3l4.8,4.8 c1,1,2.8,0.3,2.8-1.2V51.7c0-0.9-0.7-1.7-1.7-1.7H34z"/>',Hg[iy]='<path fill="currentColor" stroke="currentColor" d="M20,16.7c-3.7,0-6.7,3-6.7,6.7s3,6.7,6.7,6.7s6.7-3,6.7-6.7S23.7,16.7,20,16.7z M40,20c-1.2,0-2.3,0.6-2.9,1.7 c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h43.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H40z M20,43.3c-3.7,0-6.7,3-6.7,6.7s3,6.7,6.7,6.7s6.7-3,6.7-6.7S23.7,43.3,20,43.3z M40,46.7c-1.2,0-2.3,0.6-2.9,1.7 c-0.6,1-0.6,2.3,0,3.4s1.7,1.7,2.9,1.7h43.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H40z M20,70 c-3.7,0-6.7,3-6.7,6.7c0,3.7,3,6.7,6.7,6.7s6.7-3,6.7-6.7C26.7,73,23.7,70,20,70z M40,73.3c-1.2,0-2.3,0.6-2.9,1.7 c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h43.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H40z"/>',Hg[oy]='<path fill="currentColor" stroke="currentColor" d="M86.7,10c-0.3,0-0.6,0.1-0.9,0.1c-0.1,0-0.2,0.1-0.3,0.1L12.2,33.5v0C10.9,34,10,35.3,10,36.7c0,1.2,0.6,2.2,1.6,2.8 l22.3,17.7l44-35.1l-35.1,44l17.7,22.3c0.6,1,1.7,1.6,2.9,1.6c1.4,0,2.6-0.9,3.1-2.2h0l23.3-73.4c0-0.1,0-0.1,0.1-0.2 c0.1-0.3,0.1-0.6,0.1-0.9C90,11.5,88.5,10,86.7,10L86.7,10z"/>',Hg[ry]='<path fill="currentColor" stroke="currentColor" d="M6.7,10c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7h86.7c1.2,0,2.3-0.6,2.9-1.7 c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7L6.7,10z M6.7,23.3v50c0,3.7,3,6.7,6.7,6.7h33.3v4.2c-2.1,1.2-3.3,3.4-3.3,5.8 c0,3.7,3,6.7,6.7,6.7c3.7,0,6.7-3,6.7-6.7c0-2.4-1.3-4.6-3.3-5.8V80h33.3c3.7,0,6.7-3,6.7-6.7v-50L6.7,23.3z M36.7,33.3 c7.4,0,13.3,6,13.3,13.3H36.7V33.3z M30,40v13.3h13.3c0,7.4-6,13.3-13.3,13.3s-13.3-6-13.3-13.3S22.6,40,30,40z M63.3,40H80 c1.8,0,3.3,1.5,3.3,3.3c0,1.8-1.5,3.3-3.3,3.3H63.3c-1.8,0-3.3-1.5-3.3-3.3C60,41.5,61.5,40,63.3,40z M63.3,53.3H80 c1.8,0,3.3,1.5,3.3,3.3c0,1.8-1.5,3.3-3.3,3.3H63.3c-1.8,0-3.3-1.5-3.3-3.3C60,54.8,61.5,53.3,63.3,53.3z"/>',Hg[sy]='<path fill="currentColor" stroke="currentColor" d="M50,10c-22.1,0-40,17.9-40,40s17.9,40,40,40s40-17.9,40-40S72.1,10,50,10z M50,75c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5 C55,72.8,52.8,75,50,75z M56.9,51.7c-2.2,2-3.6,3.4-3.6,5h-6.7c0-4.6,3.2-7.6,5.7-9.9c2.7-2.5,4.3-4.1,4.3-6.8 c0-3.7-3-6.7-6.7-6.7c-3.7,0-6.7,3-6.7,6.7h-6.7c0-7.4,6-13.3,13.3-13.3s13.3,6,13.3,13.3C63.3,45.7,59.8,49,56.9,51.7L56.9,51.7z "/>',Hg[ay]='<path fill="currentColor" stroke="currentColor" d="M82.4,29.3L60.7,7.6c-0.6-0.6-1.5-1-2.4-1h-35c-3.7,0-6.7,3-6.7,6.7v73.3c0,3.7,3,6.7,6.7,6.7h53.3c3.7,0,6.7-3,6.7-6.7 v-55C83.3,30.8,83,29.9,82.4,29.3L82.4,29.3z M50,80c-1.8,0-3.3-1.5-3.3-3.3s1.5-3.3,3.3-3.3c7.4,0,13.3-6,13.3-13.3 s-6-13.3-13.3-13.3s-13.3,6-13.3,13.3h6.7l-10,13.3L23.3,60H30c0-11,9-20,20-20s20,9,20,20S61,80,50,80L50,80z M60,33.3 c-1.8,0-3.3-1.5-3.3-3.3V13L77,33.3H60z"/>',Hg[ly]='<path fill="currentColor" stroke="currentColor" d="M43.3,10C25,10,10,25,10,43.3s15,33.3,33.3,33.3c8,0,15.3-2.8,21.1-7.5L84.3,89c0.8,0.9,2.1,1.2,3.2,0.9 c1.2-0.3,2.1-1.2,2.4-2.4c0.3-1.2,0-2.4-0.9-3.2L69.1,64.4c4.7-5.7,7.5-13.1,7.5-21.1C76.7,25,61.7,10,43.3,10L43.3,10z M43.3,16.7C58.1,16.7,70,28.6,70,43.3S58.1,70,43.3,70S16.7,58.1,16.7,43.3S28.6,16.7,43.3,16.7z"/>',Hg[cy]='<path fill="currentColor" stroke="currentColor" d="M52.5,8.1l9.6,28.4l29.9,0.3c2.6,0,3.6,3.3,1.6,4.8l-24,17.9l8.9,28.6c0.8,2.5-2,4.5-4.1,3L50,73.8L25.6,91.1 c-2.1,1.5-4.9-0.5-4.1-3l8.9-28.6l-24-17.9c-2.1-1.5-1-4.8,1.6-4.8l29.9-0.3l9.6-28.4C48.3,5.7,51.7,5.7,52.5,8.1z"/>',Hg[uy]='<path fill="currentColor" stroke="currentColor" d="M50,10c-22.1,0-40,17.9-40,40s17.9,40,40,40s40-17.9,40-40S72.1,10,50,10z M67.7,51.3L42.3,66C41,66.7,40,66.1,40,64.6 V35.4c0-1.5,1-2.1,2.3-1.3l25.4,14.6C69,49.4,69,50.6,67.7,51.3z"/>',Hg[hy]='<path fill="currentColor" stroke="currentColor" d="M50,10c-22.1,0-40,17.9-40,40s17.9,40,40,40s40-17.9,40-40S72.1,10,50,10z M66.7,63.3c0,1.8-1.5,3.3-3.3,3.3H36.7 c-1.8,0-3.3-1.5-3.3-3.3V36.7c0-1.8,1.5-3.3,3.3-3.3h26.7c1.8,0,3.3,1.5,3.3,3.3V63.3z"/>',Hg[py]='<path fill="currentColor" stroke="currentColor" d="M20,13.3c-3.7,0-6.7,3-6.7,6.7v60c0,3.7,3,6.7,6.7,6.7h60c3.7,0,6.7-3,6.7-6.7V20c0-3.7-3-6.7-6.7-6.7L20,13.3z M20,20h60 v13.3H20L20,20z M66.6,46.3h4.6v25h-4.2l-0.2-1.8c-0.4,0.7-1,1.2-1.6,1.5c-0.6,0.4-1.3,0.6-2.1,0.6c-1.9,0-3.3-0.7-4.3-2.2 c-1-1.4-1.5-3.6-1.5-6.3V62c0-2.9,0.5-5,1.5-6.5c1-1.4,2.4-2.1,4.3-2.1c0.7,0,1.3,0.2,1.9,0.5c0.6,0.3,1.1,0.7,1.5,1.3V46.3z M50.8,47.6h0.5v23.7h-4.6V53.2L42.1,55v-3.8L50.8,47.6z M29.5,51.7h4.4V58h4.6v4.3h0h-4.6v6.6h-4.4v-6.6h-4.7V58h4.7L29.5,51.7z M64.5,57.2c-0.5,0-0.8,0.1-1.1,0.3c-0.3,0.2-0.6,0.5-0.8,0.8c-0.2,0.4-0.3,0.9-0.4,1.5c-0.1,0.6-0.1,1.3-0.1,2.1v1.2 c0,0.8,0,1.5,0.1,2.1s0.2,1.1,0.4,1.5c0.2,0.4,0.4,0.7,0.8,0.8c0.3,0.2,0.7,0.3,1.2,0.3c0.5,0,0.9-0.1,1.2-0.3s0.6-0.5,0.8-0.9v-8 c-0.2-0.4-0.5-0.7-0.8-1C65.4,57.4,65,57.2,64.5,57.2L64.5,57.2z"/>',Hg[gy]='<path fill="currentColor" stroke="currentColor" d="M20,13.3c-3.7,0-6.7,3-6.7,6.7v60c0,3.7,3,6.7,6.7,6.7h60c3.7,0,6.7-3,6.7-6.7V20c0-3.7-3-6.7-6.7-6.7L20,13.3z M20,20h60 v13.3H20L20,20z M64.7,46.3h4.6v25h-4.2L65,69.5c-0.4,0.7-1,1.2-1.6,1.5c-0.6,0.4-1.3,0.6-2.1,0.6c-1.9,0-3.3-0.7-4.3-2.2 s-1.5-3.6-1.5-6.3V62c0-2.9,0.5-5,1.5-6.5c1-1.4,2.4-2.1,4.3-2.1c0.7,0,1.4,0.2,1.9,0.5c0.6,0.3,1.1,0.7,1.5,1.3L64.7,46.3z M48.9,47.6h0.5v23.7h-4.6V53.2L40.2,55v-3.8L48.9,47.6z M62.7,57.2c-0.5,0-0.8,0.1-1.1,0.3c-0.3,0.2-0.6,0.5-0.8,0.8 c-0.2,0.4-0.3,0.9-0.4,1.5c-0.1,0.6-0.1,1.3-0.1,2.1v1.2c0,0.8,0,1.5,0.1,2.1c0.1,0.6,0.2,1.1,0.4,1.5c0.2,0.4,0.4,0.7,0.7,0.8 c0.3,0.2,0.7,0.3,1.2,0.3c0.5,0,0.9-0.1,1.2-0.3c0.3-0.2,0.6-0.5,0.8-0.9v-8c-0.2-0.4-0.5-0.7-0.8-1 C63.5,57.4,63.1,57.2,62.7,57.2L62.7,57.2z M27.6,59.2h8v3.8h-8V59.2z"/>',Hg[dy]='<path fill="currentColor" stroke="currentColor" d="M66.7,6.7c-1,0-2,0.5-2.5,1.5l-4.6,8l-8.9-2.5c-2.2-0.6-4.2,1.4-3.6,3.6l2.5,8.9l-8,4.6c-2,1.1-2,4,0,5.1l8,4.6l0,0 l11.7-11.7c2.8-2.8,7.2-2.8,10,0c2.8,2.8,2.8,7.2,0,10L59.6,50.4l0,0l4.6,8c1.1,2,4,2,5.1,0l4.6-8l8.9,2.5 c2.2,0.6,4.2-1.4,3.6-3.6l-2.5-8.9l8-4.6c2-1.1,2-4,0-5.1l-8-4.6l2.5-8.9c0.6-2.2-1.4-4.2-3.6-3.6l-8.9,2.5l-4.6-8 C68.7,7.2,67.7,6.7,66.7,6.7L66.7,6.7z M49.5,40.5L12.1,77.9c-2.8,2.8-2.8,7.2,0,10s7.2,2.8,10,0l37.5-37.5L49.5,40.5z M63.3,66.6 c-1.8,0-3.3,1.5-3.3,3.4v3.3h-3.3c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4c0.6,1,1.7,1.7,2.9,1.7H60v3.3 c0,1.2,0.6,2.3,1.7,2.9c1,0.6,2.3,0.6,3.4,0c1-0.6,1.7-1.7,1.7-2.9V80H70c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4 c-0.6-1-1.7-1.7-2.9-1.7h-3.3V70c0-0.9-0.3-1.8-1-2.4C65.1,67,64.2,66.6,63.3,66.6L63.3,66.6z M86.6,76.6c-1.8,0-3.3,1.5-3.3,3.4 v3.3H80c-1.2,0-2.3,0.6-2.9,1.7c-0.6,1-0.6,2.3,0,3.4S78.8,90,80,90h3.3v3.3c0,1.2,0.6,2.3,1.7,2.9c1,0.6,2.3,0.6,3.4,0 c1-0.6,1.7-1.7,1.7-2.9V90h3.3c1.2,0,2.3-0.6,2.9-1.7c0.6-1,0.6-2.3,0-3.4c-0.6-1-1.7-1.7-2.9-1.7H90V80c0-0.9-0.3-1.8-1-2.4 C88.4,77,87.5,76.6,86.6,76.6L86.6,76.6z"/>',Hg[fy]='<path fill="currentColor" stroke="currentColor" d="M16.7,13.3c-3.7,0-6.7,3-6.7,6.7v46.7c0,3.7,3,6.7,6.7,6.7h6.6c3.3-2.4,7.2-3.6,9.9-4.4c1-0.3,2.4-0.7,3.5-1.1v-1.2 c-1.8-2.2-2.9-4-3.5-5.4c-0.4-0.4-0.7-0.8-1-1.2H16.7V20h66.7v40H67.6c-0.2,0.3-0.4,0.6-0.6,0.8c-0.6,1.5-1.6,3.4-3.6,5.8v1.2 c1,0.4,2.4,0.8,3.5,1.1c2.8,0.8,6.6,2,9.9,4.4h6.6c3.7,0,6.7-3,6.7-6.7V20c0-3.7-3-6.7-6.7-6.7L16.7,13.3z M50,30 c-8.1,0-14.6,4.9-14.6,13.6c0,3.7,2.1,6.5,2.1,6.5s-0.9,0.5-0.9,2.4c0,3.8,2.5,4.7,2.5,4.7c0.3,2.3,3.1,5.5,4.4,6.8v7 c-4.1,5.8-20,3.1-20,15.6h53.3c0-12.5-15.9-9.7-20-15.6v-7c1.3-1.3,4.1-4.5,4.4-6.8c0,0,2.5-1.7,2.5-4.7c0-2.1-0.9-2.4-0.9-2.4 s1.7-3.2,1.7-6.3c0-6.1-3.1-10.9-8.2-10.9C56,33,53.8,30,50,30z"/>',Hg[vy]='<path fill="currentColor" stroke="currentColor" d="M40,13.3c-3.6,0-6.7,3-6.7,6.7v6.7H20c-3.6,0-6.7,3-6.7,6.7V80c0,3.6,3,6.7,6.7,6.7h40c3.6,0,6.7-3,6.7-6.7v-6.7H80 c3.6,0,6.7-3,6.7-6.7V20c0-3.6-3-6.7-6.7-6.7H40z M40,20h40v46.7H63.3c-1.8,0-3.3,1.5-3.3,3.3v10H20V33.3h16.7 c1.8,0,3.3-1.5,3.3-3.3V20z M70,30L60,40l10,10V30z M43.3,36.7c-1.8,0-3.3,1.5-3.3,3.3c0,1.8,1.5,3.3,3.3,3.3s3.3-1.5,3.3-3.3 S45.2,36.7,43.3,36.7z M50,46.7c-1.8,0-3.3,1.5-3.3,3.3s1.5,3.3,3.3,3.3s3.3-1.5,3.3-3.3S51.8,46.7,50,46.7z M30,50v20l10-10 L30,50z M56.7,56.7c-1.8,0-3.3,1.5-3.3,3.3s1.5,3.3,3.3,3.3S60,61.8,60,60S58.5,56.7,56.7,56.7z"/>',Hg[yy]='<path fill="currentColor" stroke="currentColor" d="M68,4c-0.1,0-0.2,0-0.3,0H40v36H14v56h46V60h26V22.3c0-0.2,0-0.4,0-0.7v-0.5l-0.4-0.4c-0.1-0.1-0.2-0.3-0.4-0.4 c0,0,0,0,0,0L69.6,4.8c-0.1-0.1-0.2-0.3-0.4-0.4L68.8,4h-0.5C68.2,4,68.1,4,68,4L68,4z M44,8h22v16h16v32H58.8l-3.4-3.4l-2.8,2.8 l3.4,3.4V92H18V44h23.3l3.3,3.3l2.8-2.8L44,41L44,8z M70,10.8l9.2,9.2H70V10.8z M66.6,30.6l-8,8L54,34v12h12l-4.6-4.6l8-8 L66.6,30.6z M34,54l4.6,4.6l-8,8l2.8,2.8l8-8L46,66V54L34,54z"/>',Hg[by]='<path fill="currentColor" stroke="currentColor" d="M38,0v12l4,4V4h30v24h24v52H66v4h34V25.2L74.8,0L38,0z M76,6.8L93.2,24H76V6.8z M0,16v84h62V41.2l-0.6-0.6l-24-24L36.8,16 L0,16z M4,20h30v24h24v52H4L4,20z M38,22.9L55.1,40H38V22.9z"/>',Hg[wy]='<path fill="currentColor" stroke="currentColor" d="M15.2,4C9.4,4,5.4,6.5,3.1,9.5S0,16,0,18.4c0,4.2,1.8,10.7,9.9,14.3c8,3.6,16.8,5.3,24.3,16.3 C26.7,60.1,17.9,61.7,9.9,65.3C1.8,68.9,0,75.4,0,79.6c0,2.4,0.7,5.8,3.1,8.9S9.4,94,15.2,94c6.1,0,10.2-2.8,12.6-6.1 c2.3-3.2,3.1-6.6,3.1-8.7c0-3.1-1.1-7.1-3.9-9.6c0.2-0.2,0.6-0.6,1.2-0.9c0,0,0.1,0,0.1,0c3.4-1.8,15.4-9.2,16.7-9.9l4.3,3.1 l27.3,19.6h0.1c0.1,0,3,2.3,7.2,3.5c4.3,1.3,10.2,1.5,15.4-2.8c0.5-0.4,0.8-1,0.8-1.6c0-0.6-0.3-1.2-0.8-1.6L61.8,51.5L58.4,49 l40.7-30.1c0.5-0.4,0.8-1,0.8-1.6c0-0.6-0.3-1.2-0.8-1.6c-2.6-2.1-5.4-3.2-8.1-3.5c-2.7-0.3-5.2,0.1-7.4,0.7 c-4.2,1.2-7.2,3.5-7.2,3.5h-0.1L44.9,39.1c-1.3-0.8-13.3-8.1-16.7-9.9c-0.6-0.3-1-0.7-1.2-0.9c2.8-2.5,3.9-6.4,3.9-9.6 c0-2.1-0.7-5.5-3.1-8.7S21.3,4,15.2,4L15.2,4z M15.2,8c4.9,0,7.6,2,9.3,4.4s2.3,5.4,2.3,6.3c0,2-1.2,5.5-2.7,6.8 c-0.7,0.6-1.3,1.4-1.5,2.4c-0.2,1,0.2,1.9,0.6,2.6c0.9,1.2,2,1.8,2.9,2.3c2.5,1.4,11.9,7.1,15.1,9l-4.4,3.1 c-0.2,0.1-0.4,0.3-0.5,0.5c-8-10.8-17.8-13.1-24.9-16.2C4.8,26.1,4,21.6,4,18.4c0-1.5,0.6-4.3,2.2-6.4S10.5,8,15.2,8z M14.7,11.5 c-4.2,0-7.6,3.6-7.1,7.9c0.5,4.2,4.3,7.4,8.5,7.4c4.4,0,7.3-4.2,6.8-8.4C22.4,14.3,18.7,11.5,14.7,11.5z M14.7,15.5 c2.2,0,4,1.4,4.2,3.4c0.2,2.1-1.1,3.9-2.9,3.9c-2,0-4.3-1.9-4.5-3.9S12.6,15.5,14.7,15.5z M89.1,16.1c0.5,0,1,0,1.5,0.1 c1.2,0.1,2.5,0.6,3.8,1.3L44.2,54.5c-0.5,0.1-0.9,0.4-1.1,0.8c-0.8,0.5-14,8.4-16.9,10c-0.9,0.5-2.1,1-2.9,2.3 c-0.4,0.6-0.8,1.6-0.6,2.6c0.2,1,0.8,1.8,1.5,2.4c1.4,1.2,2.7,4.8,2.7,6.8c0,0.9-0.6,3.9-2.3,6.3S20.2,90,15.2,90 c-4.8,0-7.4-1.8-9-3.9C4.6,83.9,4,81.1,4,79.6c0-3.3,0.8-7.7,7.5-10.7c8.1-3.6,19.5-6.1,28-21.1l39.4-28.2c0,0,0,0,0.1-0.1 c0,0,2.5-1.9,6-2.9C86.3,16.4,87.6,16.1,89.1,16.1z M46,45.8c-1.2,0-2.2,1-2.2,2.2c0,1.2,1,2.2,2.2,2.2s2.2-1,2.2-2.2 C48.2,46.8,47.2,45.8,46,45.8z M55.1,51.5l4.4,3.2l35,25.9c-3.3,1.7-6.6,1.5-9.5,0.7c-3.5-1-6-2.9-6-2.9c0,0,0,0-0.1-0.1 L51.5,58.7l-3.2-2.3L55.1,51.5z M16.1,71.2c-4.2,0-8,3.2-8.5,7.4c-0.5,4.2,2.9,7.9,7.1,7.9c4,0,7.7-2.8,8.2-6.9 C23.4,75.4,20.5,71.2,16.1,71.2L16.1,71.2z M16.1,75.2c1.8,0,3.1,1.8,2.9,3.9c-0.2,2.1-2,3.4-4.2,3.4c-2,0-3.4-1.4-3.1-3.4 C11.8,77.1,14.1,75.2,16.1,75.2L16.1,75.2z"/>',Hg[ky]='<path fill="currentColor" stroke="currentColor" d="M29.6,0c-1,0.2-1.6,1-1.6,2v2H11.8C8.6,4,6,6.6,6,9.8V86c0,3.3,2.6,6,5.8,6H32v-4H11.8C11,88,10,87.1,10,86V9.8 C10,9,11,8,11.8,8H28v4H14v72h18v-4H18V16h10v2c0,1.1,0.9,2,2,2h28c1.1,0,2-0.9,2-2v-2h10v12h4V12H60V8h16.2C77,8,78,9,78,9.8V28 h4V9.8C82,6.6,79.4,4,76.2,4H60V2c0-1.1-0.9-2-2-2H30c-0.1,0-0.1,0-0.2,0C29.8,0,29.7,0,29.6,0L29.6,0z M32,4h24v12H32V4z M35.6,30c-1,0.2-1.6,1-1.6,2v66c0,1.1,0.9,2,2,2h56c1.1,0,2-0.9,2-2V32c0-1.1-0.9-2-2-2H36c-0.1,0-0.1,0-0.2,0S35.7,30,35.6,30z M38,34h52v62H38V34z M47.4,46c-1.1,0.2-1.9,1.2-1.7,2.3c0.2,1.1,1.2,1.9,2.3,1.7h34c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2 c-0.4-0.6-1-1-1.8-1H48c-0.1,0-0.1,0-0.2,0c-0.1,0-0.1,0-0.2,0C47.6,46,47.5,46,47.4,46L47.4,46z M47.4,58 c-1.1,0.2-1.9,1.2-1.7,2.3c0.2,1.1,1.2,1.9,2.3,1.7h24c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H48 c-0.1,0-0.1,0-0.2,0c-0.1,0-0.1,0-0.2,0C47.6,58,47.5,58,47.4,58L47.4,58z M47.4,70c-1.1,0.2-1.9,1.2-1.7,2.3 c0.2,1.1,1.2,1.9,2.3,1.7h34c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H48c-0.1,0-0.1,0-0.2,0 c-0.1,0-0.1,0-0.2,0C47.6,70,47.5,70,47.4,70L47.4,70z M47.4,82c-1.1,0.2-1.9,1.2-1.7,2.3c0.2,1.1,1.2,1.9,2.3,1.7h24 c0.7,0,1.4-0.4,1.8-1c0.4-0.6,0.4-1.4,0-2c-0.4-0.6-1-1-1.8-1H48c-0.1,0-0.1,0-0.2,0c-0.1,0-0.1,0-0.2,0C47.6,82,47.5,82,47.4,82 L47.4,82z"/>',Hg[Cy]='<path fill="currentColor" stroke="currentColor" d="M38,2c-1,0-2.1,0.4-2.9,1.1C34.4,3.9,34,5,34,6H18c-3.3,0-6,2.7-6,6v76c0,3.3,2.7,6,6,6h64c3.3,0,6-2.7,6-6V12 c0-3.3-2.7-6-6-6H66c0-1-0.4-2.1-1.1-2.9C64.1,2.4,63,2,62,2L38,2z M38,6h24v12H38V6z M18,10h16v4H20v72h60V14H66v-4h16 c1.1,0,2,0.9,2,2v76c0,1.1-0.9,2-2,2H18c-1.1,0-2-0.9-2-2V12C16,10.9,16.9,10,18,10z M24,18h10c0,1,0.4,2.1,1.1,2.9 C35.9,21.6,37,22,38,22h24c1,0,2.1-0.4,2.9-1.1C65.6,20.1,66,19,66,18h10v64H24V18z M38,38v4h10v22h4V42h10v-4L38,38z"/>',Hg[xy]='<path fill="currentColor" stroke="currentColor" d="M98.8,20l-1.4-1.4l-14-14c-0.8-0.8-2.1-0.8-2.9,0c-0.8,0.8-0.8,2.1,0,2.9L91.1,18H70c-17,0-30.8,13.3-31.9,30H0v4h38.2 C39.2,68.7,53,82,70,82h21.1L80.6,92.6c-0.8,0.8-0.8,2.1,0,2.9c0.8,0.8,2.1,0.8,2.9,0l14-14l1.4-1.4l-1.4-1.4l-14-14 c-0.8-0.8-2.1-0.8-2.9,0s-0.8,2.1,0,2.9L91.1,78H70c-15.5,0-28-12.5-28-28s12.5-28,28-28h21.1L80.6,32.6c-0.8,0.8-0.8,2.1,0,2.9 s2.1,0.8,2.9,0l14-14L98.8,20z"/>',Hg[Sy]='<path fill="currentColor" stroke="currentColor" d="M0,0v18h4V4h14V0L0,0z M26,0v4h20V0H26z M54,0v4h20V0H54z M82,0v4h14v14h4V0H82z M22,24v4h56v-4H22z M0,26v20h4V26H0z M96,26v20h4V26H96z M22,40v4h48v-4H22z M0,54v20h4V54H0z M96,54v20h4V54H96z M22,56v4h56v-4H22z M22,72v4h48v-4H22z M0,82v18h18 v-4H4V82H0z M96,82v14H82v4h18V82L96,82z M26,96v4h20v-4H26z M54,96v4h20v-4H54z"/>',Hg[Ey]='<path fill="currentColor" stroke="currentColor" d="M67.1,0.1l-2,5.3L60.3,18l-12.2-6.2L43,9.3l2.4,5.2l5.7,12.4L38,31.1l-5.4,1.8l5.3,2l11,4.3L35.6,52.6 c-0.1,0.1-0.3,0.3-0.4,0.5L4,84.2l-0.1,0.1c-2.5,2.7-2.5,7,0.1,9.6l2.3,2.2c2.7,2.5,7,2.5,9.6-0.1l31.6-31.6l3.2-3.3l9.6-9.6 l3.5,10.4l1.8,5.2l2-5.1l5-12.8l12.1,6l5,2.5l-7.8-17.4l12.9-4.1l5.3-1.7l-5.2-2l-12.7-5l6.2-12.1l2.6-5.1l-5.2,2.3l-12.4,5.6 L68.9,5.4L67.1,0.1z M66.9,11.9l3.3,9.7l0.7,2.1l2-0.9l9.3-4.1l-4.6,8.9l-1,1.9l2.1,0.8l9.6,3.8l-9.7,3.1L76.3,38l0.9,2l4.1,9.3 l-11-5.5l-0.8,2.1l-3.8,9.7l-2.4-7.1l6.4-6.4c2.6-2.6,2.5-6.8,0.1-9.6l-0.1-0.1l-2.3-2.1c0,0,0,0-0.1-0.1 c-1.4-1.3-3.1-1.9-4.7-1.9c-1.6,0-3.4,0.6-4.8,2h-0.1L52,36l-7.4-2.9l9.9-3.3l2.1-0.7l-0.9-2l-4.2-9.3l9.1,4.6l2,1l0.8-2.1 L66.9,11.9z M62.6,32.2c0.8,0,1.3,0.2,1.9,0.8l0.1,0.1l2.3,2.1c1.1,1.3,1.1,3,0.1,4.1L49.2,56.9l-6.1-6.1L60.6,33 C61.2,32.4,61.9,32.2,62.6,32.2z M40.3,53.6l6.1,6.1l-1.8,1.8c-0.1,0.1-0.2,0.2-0.3,0.3L13,93.2c-1,1-2.7,1.1-4,0l-0.1-0.1 l-1.8-1.9L6.8,91c-1-1-1.1-2.7,0-4l31.3-31.3c0.1,0,0.1-0.1,0.2-0.1L40.3,53.6z M82,66.5l-1.9,4.8l-2.5,6.4l-6.4,2.5L66.5,82 l4.8,1.9l6.4,2.5l2.5,6.4l1.9,4.8l1.9-4.8l2.5-6.4l6.4-2.5l4.8-1.9l-4.8-1.9l-6.4-2.5l-2.5-6.4L82,66.5z M56.4,68l-2,5l-5,2l5,2 l2,5l2-5l5-2l-5-2L56.4,68z M82,77.6l0.9,2.4l0.3,0.8l0.8,0.3l2.4,0.9l-2.4,0.9l-0.8,0.3l-0.3,0.8L82,86.4l-0.9-2.4l-0.3-0.8 l-0.8-0.3L77.6,82l2.4-0.9l0.8-0.3l0.3-0.8L82,77.6z"/>',Hg[My]='<path fill="currentColor" stroke="currentColor" d="M50,10c-22.1,0-40,17.9-40,40c0,18.7,12.9,34.4,30.3,38.8c-0.2-0.5-0.3-1.2-0.3-1.9V80c-1.6,0-4.3,0-5,0 c-2.7,0-5.2-1.2-6.4-3.4c-1.3-2.4-1.5-6.1-4.8-8.4c-1-0.8-0.2-1.6,0.9-1.5c2,0.6,3.8,2,5.3,4.1c1.6,2.1,2.3,2.6,5.3,2.6 c1.4,0,3.6-0.1,5.6-0.4c1.1-2.8,3-5.3,5.3-6.5c-13.3-1.4-19.7-8-19.7-17c0-3.9,1.6-7.6,4.5-10.8c-0.9-3.1-2.1-9.5,0.4-12 c6,0,9.6,3.9,10.5,4.9c3-1,6.3-1.6,9.7-1.6c3.5,0,6.7,0.6,9.7,1.6c0.9-1,4.5-4.9,10.5-4.9c2.4,2.4,1.3,8.9,0.3,12 c2.8,3.1,4.4,6.9,4.4,10.8c0,9-6.3,15.6-19.6,17c3.7,1.9,6.3,7.3,6.3,11.3v9.1c0,0.3-0.1,0.6-0.1,0.9C78.8,82.3,90,67.5,90,50 C90,27.9,72.1,10,50,10L50,10z">',Hg[Ly]='<path fill="currentColor" stroke="currentColor" d="M21.1,18c-0.7,0-1.8,0.3-2.6,1s-1.4,1.5-2.3,2.9c-0.6,1.1-1.7,3.3-3.3,6.6S9.5,36,7.6,40.1c-3.7,8.2-7.3,16.1-7.3,16.1 c-0.4,0.6-0.4,1.3-0.1,1.9c0,0,0,0.1,0.1,0.1c0.1,0.4,0.2,0.7,0.4,0.9c0.4,0.4,0.8,0.7,1.1,0.8c0.6,0.3,1,0.5,1.3,0.6 c0.6,0.4,1,0.4,1,2.8c0,4.7,1.3,9.8,4.9,13.9c3.6,4,9.5,6.8,17.9,6.8c6.8,0,11.9-2.2,15-6.3c3.1-4,4.2-9.5,4.2-15.8v-4.9 c0.7-0.4,1.9-1.1,4-1.1s3.3,0.7,4,1.1V62c0,6.2,1.1,11.7,4.2,15.8c3.1,4,8.2,6.3,15,6.3c8.4,0,14.3-2.7,17.9-6.7 c3.6-4,4.9-9.1,4.9-13.7c0-2.4,0.5-2.6,1-2.9c0.3-0.2,0.6-0.3,1.3-0.6c0.3-0.1,0.7-0.4,1.1-0.8c0.3-0.3,0.5-0.8,0.6-1.3 c0.3-0.6,0.2-1.3-0.1-1.9c0,0-3.6-7.9-7.3-16.1c-1.9-4.1-3.8-8.2-5.4-11.6S84.6,23,84,21.9c-0.9-1.4-1.5-2.3-2.3-2.9 c-0.8-0.7-1.9-1-2.6-1c-0.9,0-1.9,0.4-2.6,1.1c-0.7,0.6-1.3,1.5-2.1,2.7c-1.2,2-2,3.1-2,3.1c-0.6,0.9-0.4,2.2,0.6,2.8 c0.9,0.6,2.2,0.4,2.8-0.6c0,0,0.8-1.3,2-3.3c0,0,0,0,0-0.1c0.6-0.9,1.1-1.5,1.3-1.7c0.2,0.2,0.8,0.8,1.5,1.9 c0.1,0.2,1.5,2.9,3.1,6.2c1.6,3.3,3.4,7.5,5.3,11.6c2.8,6,4.2,9.2,5.4,11.8c-0.6-0.1-1.1-0.3-1.8-0.4C88.4,52.5,82,52,72.9,52 C67,52,61,53.3,56.5,53.9c-0.9-0.7-3-1.9-6.4-1.9c-3.4,0-5.4,1.3-6.4,1.9C39.1,53.3,33.2,52,27.3,52c-9.1,0-15.5,0.5-19.7,1.2 c-0.7,0.1-1.2,0.3-1.8,0.4c1.2-2.7,2.6-5.8,5.4-11.8c1.9-4.1,3.8-8.3,5.3-11.6c1.6-3.3,2.9-5.9,3.1-6.2V24 c0.7-1.1,1.3-1.7,1.5-1.9c0.2,0.2,0.7,0.7,1.3,1.7c0,0,0,0,0,0.1c1.2,2,2,3.3,2,3.3c0.6,0.9,1.9,1.2,2.8,0.6s1.2-1.9,0.6-2.8 c0,0-0.8-1.2-2-3.1c-0.8-1.2-1.3-2-2.1-2.7C23,18.4,22,18,21.1,18L21.1,18z M27.3,56c4.9,0,10.2,1.1,14.8,1.8V62 c0,5.8-1.1,10.3-3.4,13.2c-2.3,3-5.8,4.8-11.8,4.8c-7.6,0-12.1-2.3-14.9-5.4c-2.8-3.1-3.9-7.3-3.9-11.2c0-2.8-1.2-4.6-2.4-5.6 c0.8-0.2,1.4-0.4,2.6-0.6C12.2,56.5,18.4,56,27.3,56z M72.9,56c8.9,0,15.1,0.5,19,1.2c1.3,0.2,1.9,0.5,2.7,0.7 c-1.3,1-2.5,2.8-2.5,5.8c0,3.8-1.1,7.9-3.9,11c-2.8,3.1-7.4,5.4-14.9,5.4c-6,0-9.5-1.8-11.8-4.7c-2.3-3-3.4-7.5-3.4-13.3v-4.2 C62.7,57.1,68,56,72.9,56L72.9,56z"/>',Hg),Ay={};function Ty(t,e,n){void 0===n&&(n=16);var i=String(n),r=t.firstChild;if(r&&r instanceof SVGSVGElement&&r.classList.contains(e))return r.setAttribute("width",i),void r.setAttribute("height",i);r&&t.removeChild(r);var o=function(t){if(!Dy.hasOwnProperty(t))return null;if(!Ay.hasOwnProperty(t)){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 100 100"),e.innerHTML=Dy[t],e.classList.add(t),Ay[t]=e}return Ay[t].cloneNode(!0)}(e);o&&(o.setAttribute("width",i),o.setAttribute("height",i),t.appendChild(o))}function Py(t,e){Dy[t]=e,delete Ay[t]}var Oy=function(){function t(){this.map=new WeakMap}return t.prototype.get=function(t){return this.map.get(t)},t.prototype.set=function(t,e){return this.map.set(t,e),this},t.prototype.has=function(t){return this.map.has(t)},t.prototype.delete=function(t){return this.map.delete(t)},t}(),Fy=0,Iy=function(){function t(){this._="_weakmap_"+Fy++}return t.prototype.get=function(t){return this.has(t)?t[this._]:void 0},t.prototype.set=function(t,e){return Object.defineProperty(t,this._,{configurable:!0,value:e}),this},t.prototype.has=function(t){return Object.hasOwnProperty.call(t,this._)},t.prototype.delete=function(t){return this.has(t)&&delete t[this._]},t}();function Ny(){return window.WeakMap?new Oy:new Iy}var By={isDesktop:!1,isMobile:!1,isDesktopApp:!1,isMobileApp:!1,isIosApp:!1,isAndroidApp:!1,isMacOS:dt,isSafari:vt},Ry=function(){function t(t){this.promise=null,this.worker=t,this.worker.onmessage=this.onReceiveMessageFromWorker.bind(this)}return t.prototype.onReceiveMessageFromWorker=function(t){if(this.promise){var e=this.promise;this.promise=null,e.resolve(t.data)}},t.prototype.submit=function(t,e){return this.promise?null:(this.promise=Mh(),this.worker.postMessage(t,e),this.promise.promise)},t}();function zy(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return[4,ajaxPromise({url:t})];case 1:return n=i.sent(),[2,new Worker(window.URL.createObjectURL(new Blob([n])),e)]}}))}))}function Hy(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(n){if(mt)return[2,zy(t,e)];try{return[2,new Worker(t,e)]}catch(e){return[2,zy(t)]}return[2]}))}))}var Vy=function(t){function e(e){var n=t.call(this)||this;return n.containerEl=e,n}return M(e,t),e}(Vg),qy=function(){function t(t){this.rendered=!1,this.height=0,this.computed=!1,this.lines=0,this.lineStart=0,this.lineEnd=0,this.used=!0,this.highlightRanges=null,this.level=0,this.headingCollapsed=!1,this.shown=!0,this.usesFrontMatter=!1,this.html=t||"",this.el=createDiv(),null===t&&(this.rendered=!0)}return t.prototype.render=function(){if(!this.rendered){var t=zg(this.html);this.el.appendChild(t),this.rendered=!0,this.computed=!1}},t.prototype.resetCompute=function(){this.computed=!1;var t=this.highlightRanges;if(t)for(var e=0,n=t;e<n.length;e++){n[e].rects=null}},t.prototype.setCollapsed=function(t){this.headingCollapsed=t,this.el.toggleClass("is-collapsed",t)},t}();function jy(t,e){var n=t.firstChild;n instanceof HTMLHeadingElement&&e(n)}function Uy(t,e){for(var n=0,i=t.findAll("li");n<i.length;n++){var r=i[n],o=r.findAll("ul, ol");o&&o.length>0&&e(r)}}var _y=null,Wy=function(){function t(e,n,i,r){var o=this;this.previewEl=null,this.sizerEl=null,this.pusherEl=null,this.header=null,this.footer=null,this.cssClasses=null,this.sections=[],this.asyncSections=[],this.recycledSections=[],this.lastText=null,this.text="",this.frontmatter=null,this.queued=null,this.rendered=null,this.lastRender=0,this.lastScroll=0,this.viewportHeight=0,this.renderedWidth=0,this.showAll=!1,this.renderExtra=1,this.renderExtraMinPx=500,this.parsing=!1,this.scrolling=!1,this.owner=e,this.workerPath=r;var s=this.previewEl=i.createDiv("markdown-preview-view"),a=this.sizerEl=s.createDiv("markdown-preview-sizer markdown-preview-section"),l=this.pusherEl=createDiv("markdown-preview-pusher");l.style.width="1px",l.style.height="0.1px",t.registerDomEvents(a,n,(function(t){return o.belongsToMe(t)})),a.on("click","a.footnote-link",this.onFootnoteLinkClick.bind(this)),a.on("click",".task-list-item-checkbox",this.onCheckboxClick.bind(this)),a.on("click",".heading-collapse-indicator",this.onHeadingCollapseClick.bind(this)),a.on("click","li > .list-collapse-indicator",this.onListCollapseClick.bind(this)),s.addEventListener("scroll",this.onScroll.bind(this),sh),this.onResize()}return t.prototype.set=function(t){this.text=t,this.queueRender()},t.prototype.rerender=function(t){if(this.lastText=null,t)for(var e=0,n=this.sections;e<n.length;e++){var i=n[e];i.rendered=!1,i.el.empty()}this.queueRender()},t.prototype.clear=function(){this.sections=[],this.asyncSections=[],this.recycledSections=[],this.rendered=[],this.sizerEl.empty(),this.text="",this.lastText=null,this.lastScroll=0,this.previewEl.scrollTop=0,this.renderedWidth=0,this.owner.onRenderComplete(),this.cleanupParentComponents()},t.prototype.belongsToMe=function(t){for(;t;){if(t===this.previewEl)return!0;if(t.classList.contains("markdown-preview-view"))return!1;var e=t.parentElement;if(!e)return this.sections.some((function(e){return e.el===t}));t=e}return!1},t.prototype.getSectionForElement=function(t){for(var e=0,n=this.sections;e<n.length;e++){var i=n[e];if(i.el.contains(t))return i}return null},t.prototype.getSectionInfo=function(t){if(!this.belongsToMe(t))return null;var e=this.getSectionForElement(t);return e?{text:this.lastText||"",lineStart:e.lineStart,lineEnd:e.lineEnd}:null},t.prototype.getInternalLinkHref=function(t){var e=t.getAttr("data-href")||t.getAttr("href");return e&&this.belongsToMe(t)?e:null},t.prototype.onFootnoteLinkClick=function(t,e){if(0===t.button&&this.belongsToMe(e)){t.preventDefault();var n=e.getAttr("href");if(n&&n.startsWith("#")){for(var i="[data-footnote-id="+(n=n.substr(1))+"]",r=null,o=null,s=0,a=this.sections;s<a.length;s++){var l=a[s];if(o=l.el.find(i)){r=l;break}}if(!o||!r)return;this.showSection(r),this.applyScrollSection(r),this.highlightEl(o),this.updateVirtualDisplay(),o.scrollIntoView({block:"center"}),this.owner.onScroll()}}},t.prototype.onCheckboxClick=function(t,e){if(this.belongsToMe(e)){t.preventDefault();var n=parseInt(e.getAttribute("data-line"));if(!(n<0||isNaN(n))){var i=this.getSectionContainer(e);if(i){var r=i.lineStart+n;this.owner.onCheckboxClick(t,e,r)}}}},t.prototype.onHeadingCollapseClick=function(t,e){if(0===t.button&&!t.defaultPrevented){var n=e.parentNode;if(n&&n instanceof HTMLHeadingElement&&this.belongsToMe(n)){var i=this.getSectionContainer(n);i&&(i.setCollapsed(!i.headingCollapsed),window.getSelection().removeAllRanges(),this.queueRender(),this.owner.onFoldChange())}}},t.prototype.onListCollapseClick=function(t,e){if(0===t.button&&!t.defaultPrevented){var n=e.parentNode;if(n&&n instanceof HTMLLIElement)if(this.belongsToMe(n))if(n.findAll("ul, ol")){t.preventDefault(),n.toggleClass("is-collapsed",!n.hasClass("is-collapsed")),window.getSelection().removeAllRanges();var i=this.getSectionContainer(e);i&&(i.resetCompute(),this.queueRender()),this.owner.onFoldChange()}}},t.prototype.queueRender=function(){this.rendered||(this.rendered=[]);var t=this.queued,e=!this.parsing;if(t)e&&!t.high&&(t.cancel(),this.queued=Ie(this.onRender.bind(this),0));else{var n=e?0:200;this.queued=Ie(this.onRender.bind(this),n)}},t.prototype.parseAsync=function(){var t=this;this.parsing||(this.parsing=!0,D(t,void 0,Promise,(function(){var t,e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),_y?[3,2]:[4,Hy(this.workerPath)];case 1:t=s.sent(),_y=new Ry(t),s.label=2;case 2:return _y.promise?[4,_y.promise.promise]:[3,4];case 3:return s.sent(),[3,2];case 4:return e=this.text,[4,_y.submit({parseSections:e,options:kg.globalOptions})];case 5:return n=s.sent(),i=this.previewEl,r=i.scrollTop,this.parseFinish(e,n),i.scrollTop=r,this.onRender(),this.parsing=!1,[3,7];case 6:return o=s.sent(),this.parsing=!1,console.error(o),this.parseSync(),this.queueRender(),[3,7];case 7:return[2]}}))})))},t.prototype.parseSync=function(){var t=this.text,e=function(t){var e=Eg(t),n={definitions:Fg(e)},i=[],r=[],o=[],s=e.children,a=Mg(e);e.children=[null];for(var l=function(t){var a=s[t],l=7;"heading"===a.type&&(l=a.depth||1);var c=a.position.start.line-1,u=a.position.end.line-1;Gf(a,"checklist",(function(t){var e=t.position.start.line-1;t.data.hProperties["data-line"]=String(e-c)})),Gf(a,"listItem",(function(t){var e=t.position.start.line-1,n=t.data=t.data||{};(n.hProperties=n.hProperties||{})["data-line"]=String(e-c)})),e.children[0]=a;var h=Lg(e,n);i.push(h),r.push([c,u]),o.push(l)},c=0;c<s.length;c++)l(c);return{sectionHtml:i,lineNumbers:r,levels:o,frontmatter:a}}(t);this.parseFinish(t,e)},t.prototype.parseFinish=function(t,e){for(var n=e.sectionHtml,i=e.lineNumbers,r=e.levels,o=e.frontmatter,s=this,a=s.recycledSections,l=s.header,c=s.footer,u=this.sections,h=new At,p=0,d=u;p<d.length;p++){var f=d[p];f!==l&&f!==c&&(f.used=!1,h.add(f.html,f))}for(var g=[],m=0;m<n.length;m++){var v=n[m],y=null,b=h.get(v);if(b&&b.length>0)for(var w=0,k=b;w<k.length;w++){var C=k[w];if(!C.used){C.used=!0,y=C;break}}var x=i[m],S=x[0],E=x[1];y?0:y=new qy(v);var M=0===m?0:S,L=m===n.length-1?E+1:i[m+1][0];y.lines=L-M,y.lineStart=S,y.lineEnd=E,y.level=r[m],g.push(y)}var D=JSON.stringify(this.frontmatter)===JSON.stringify(o);if(this.frontmatter=o,D)for(var A=0,T=g;A<T.length;A++){(R=T[A]).usesFrontMatter&&(R.rendered=!1,R.el.empty())}var P=this.cssClasses,O=this.previewEl;P&&(O.removeClasses(P),this.cssClasses=null);var F=function(t){return t&&Tg(t,/^cssclass(es)?$/i,!0)||[]}(o);F&&F.length>0&&(this.cssClasses=F,O.addClasses(F)),l&&g.unshift(l),c&&g.push(c),this.sections=g;var I=this.asyncSections;this.asyncSections=[];for(var N=0,B=I;N<B.length;N++){var R=B[N];g.contains(R)&&this.asyncSections.push(R)}for(var z=0,H=u;z<H.length;z++){(R=H[z]).rendered&&!R.used&&a.push(R)}this.lastText=t,this.lastRender=Date.now()},t.prototype.onRender=function(){var e=this;this.queued=null;var n=this.previewEl;if(!!n.offsetParent){var i=n.scrollTop;this.lastText!==this.text&&(this.text.length<10240?this.parseSync():this.parseAsync());for(var r=this,o=r.sections,s=r.sizerEl,a=r.pusherEl,l=0,c=performance.now(),u=!1,h=function(n){if(n.rendered)return"continue";l++;var i=n.el;n.render();for(var r=0,o=t.recyclers;r<o.length;r++){(0,o[r])(i,p.recycledSections)}jy(i,(function(t){Ty(t.createDiv({cls:"heading-collapse-indicator collapse-indicator collapse-icon",prepend:!0}),Wg,8)})),Uy(i,(function(t){Ty(t.createDiv({cls:"list-collapse-indicator collapse-indicator collapse-icon",prepend:!0}),Wg,8)}));var s=[];if((p.owner.postProcess(n,s,p.frontmatter),s.length>0&&(p.asyncSections.push(n),Promise.all(s).then((function(){e.asyncSections.remove(n),n.resetCompute(),e.queueRender()}))),l%10==0)&&performance.now()-c>5)return u=!0,"break"},p=this,d=0,f=o;d<f.length;d++){if("break"===h(E=f[d]))break}for(var g=[],m=!1,v=[a],y=0,b=0,w=o;b<w.length;b++){var k=(E=w[b]).el,C=k.parentElement===s;if(!E.computed&&E.rendered?(C=!0,g.push(E),m=!0,y++):m&&(C=!0,m=!1),C&&v.push(k),y>100){u=!0;break}}s.setChildrenInPlace(v);for(var x=0,S=g;x<S.length;x++){var E=S[x];this.measureSection(E)}if(this.updateShownSections(),this.updateVirtualDisplay(i),u)this.queueRender();else if(this.lastText===this.text){if(this.recycledSections=[],this.asyncSections.length>0)return;if(this.rendered)for(var M=0,L=this.rendered;M<L.length;M++){(0,L[M])()}this.rendered=null,this.owner.onRenderComplete(),this.cleanupParentComponents()}}else setTimeout((function(){return e.queueRender()}),200)},t.prototype.updateShownSections=function(){for(var t=7,e=0,n=this.sections;e<n.length;e++){var i=n[e];i.level>t?i.shown=!1:(i.shown=!0,t=7,i.headingCollapsed&&(t=i.level))}},t.prototype.updateVirtualDisplay=function(t){var e=this,n=e.showAll,i=e.previewEl,r=e.sizerEl,o=e.pusherEl,s=e.sections,a=i.scrollTop;if("number"==typeof t&&(a=t),n){var l=[];l.push(o);for(var c=0,u=s;c<u.length;c++){var h=u[c];l.push(h.el)}return r.setChildrenInPlace(l),r.style.minHeight="",o.style.marginBottom="0",void(i.scrollTop=a)}this.lastScroll=a;for(var p=i.clientHeight,d=a+p,f=o.offsetTop,g=Math.min(a,i.scrollHeight-p),m=Math.max(p*this.renderExtra,this.renderExtraMinPx),v=g-m,y=d+m,b=0,w=0,k=0;k<s.length;k++){(N=(h=s[k]).height)>0&&(b+=N,w++)}var C=0;w>0&&(C=b/w);var x=0,S=0,E=[];E.push(o);var M=-1,L=-1,D=-1,A=-1,T=null,P=null,O=window.getSelection();if(O.rangeCount>0){var F=O.getRangeAt(0);!F.collapsed&&i.contains(F.startContainer)&&i.contains(F.endContainer)&&(T=F.startContainer,P=F.endContainer,(T===o||T===r&&F.startOffset<=1)&&(D=0),P===r&&F.endOffset>1&&(A=s.length-1))}for(k=0;k<s.length;k++){var I=(h=s[k]).el;if(T&&(I===T||I.contains(T))&&(D=k),P&&(I===P||I.contains(P))&&(A=k),h.shown){var N=h.height;if(h.computed)(z=S+N)>=v&&S<=y&&(-1===M&&(M=k),L=k),S=z;else S+=N,0===N&&(S+=C)}}var B=M,R=L;-1!==D&&-1!==A&&(B=Math.min(B,D),R=Math.max(R,A)),B<0&&(B=0),++R>s.length-1&&(R=s.length-1),S=0;for(k=0;k<s.length;k++){I=(h=s[k]).el;h.shown&&B<=k&&k<=R?(E.push(I)):(I.parentNode===r&&I.detach());var z;N=h.height;h.computed||0!==N||(N=C),h.shown||(N=0),k===B&&(x=S),S=z=S+N}x>0&&(x-=f)<0&&(x=0),S-=f,S=Math.max(0,S),o.style.marginBottom=x+"px",r.style.minHeight=S-1+"px",r.setChildrenInPlace(E),R!==s.length-1&&R--;for(k=B;k<=R;k++){(h=s[k]).shown&&this.measureSection(h)}i.scrollTop!==a&&(i.scrollTop=a),this.renderHighlights(M,L)},t.prototype.renderHighlights=function(t,e){var n=this.sections,i=this.sizerEl,r=i.offsetParent;if(r){for(var o=r.getBoundingClientRect(),s=[],a=t;a<=e;a++)if(!(a<0||a>=n.length)){var l=n[a];if(l.shown){var c=l.highlightRanges;if(c&&0!==c.length){var u=[];ph(l.el,u);for(var h=u.map((function(t){return t.textContent})),p=0,d=c;p<d.length;p++){var f=d[p],g=f.rects;if(!g){g=f.rects=[];var m=dh(u,h,f.start,f.end);if(!m)continue;for(var v=m.getClientRects(),y=0;y<v.length;y++){var b=v[y];g.push({x:b.x-o.x+r.scrollLeft,y:b.y-o.y+r.scrollTop,w:b.width,h:b.height})}}for(var w=0,k=g;w<k.length;w++){var C=k[w],x=createDiv();f.active&&x.addClass("is-active"),x.style.left=C.x+"px",x.style.top=C.y+"px",x.style.width=C.w+"px",x.style.height=C.h+"px",s.push(x)}}}}}if(s.length>0){var S=createDiv("search-highlight");S.setChildrenInPlace(s),i.appendChild(S)}}},t.prototype.measureSection=function(t){if(t.rendered){var e=t===this.sections[0],n=t.el,i=n.nextSibling,r=e?0:n.offsetTop,o=i?i.offsetTop:n.offsetTop+n.offsetHeight;t.height=o-r,t.computed=!0}},t.prototype.onRendered=function(t){this.rendered?this.rendered.push(t):t()},t.prototype.onResize=function(){this.updateEndPadding();var t=this.sections,e=this.previewEl;this.viewportHeight=e.clientHeight;var n=e.offsetWidth;if(n!==this.renderedWidth){this.renderedWidth=n;for(var i=0,r=t;i<r.length;i++){r[i].resetCompute()}this.queueRender()}else this.updateVirtualDisplay()},t.prototype.updateEndPadding=function(){var t=this.previewEl,e=this.sizerEl,n=t.clientHeight;e.style.paddingBottom=Math.round(n/2)+"px"},t.prototype.foldAllHeadings=function(){for(var t=function(t){jy(t.el,(function(){t.setCollapsed(!0)}))},e=0,n=this.sections;e<n.length;e++){t(n[e])}this.updateShownSections(),this.updateVirtualDisplay(),this.owner.onFoldChange()},t.prototype.unfoldAllHeadings=function(){for(var t=0,e=this.sections;t<e.length;t++){var n=e[t];n.setCollapsed(!1),n.shown=!0}this.updateVirtualDisplay(),this.owner.onFoldChange()},t.prototype.foldAllLists=function(){for(var t=function(t){Uy(t.el,(function(e){e.addClass("is-collapsed"),t.resetCompute()}))},e=0,n=this.sections;e<n.length;e++){t(n[e])}this.queueRender(),this.owner.onFoldChange()},t.prototype.unfoldAllLists=function(){for(var t=function(t){Uy(t.el,(function(e){e.removeClass("is-collapsed"),t.resetCompute()}))},e=0,n=this.sections;e<n.length;e++){t(n[e])}this.queueRender(),this.owner.onFoldChange()},t.prototype.getFoldInfo=function(){var t=[];if(this.frontmatter)for(var e=0,n=this.sections;e<n.length;e++){var i=(u=n[e]).el.find(".frontmatter-container");if(i){i.hasClass("is-collapsed")&&t.push({from:u.lineStart,to:u.lineEnd});break}}for(var r=function(e){jy(e.el,(function(){e.headingCollapsed&&t.push({from:e.lineStart,to:e.lineEnd})}))},o=0,s=this.sections;o<s.length;o++){r(u=s[o])}for(var a=function(e){Uy(e.el,(function(n){if(n.hasClass("is-collapsed")){var i=parseInt(n.getAttribute("data-line"));if(i<0||isNaN(i))return;var r=e.lineStart+i;t.push({from:r,to:r})}}))},l=0,c=this.sections;l<c.length;l++){var u;a(u=c[l])}return t.length>0?{folds:t,lines:this.text.match(/^/gm).length}:null},t.prototype.applyFoldInfo=function(t){var e=this;t&&t.lines!==this.text.match(/^/gm).length||this.onRendered((function(){var n=new Set;if(t)for(var i=0,r=t.folds;i<r.length;i++){var o=r[i];n.add(o.from)}if(e.frontmatter)for(var s=0,a=e.sections;s<a.length;s++){var l=(g=a[s]).el.find(".frontmatter-container");if(l){l.toggleClass("is-collapsed",n.has(g.lineStart));break}}for(var c=function(t){jy(t.el,(function(){t.setCollapsed(n.has(t.lineStart))}))},u=0,h=e.sections;u<h.length;u++){c(g=h[u])}for(var p=function(t){Uy(t.el,(function(e){var i=parseInt(e.getAttribute("data-line"));if(!(i<0||isNaN(i))){var r=t.lineStart+i,o=n.has(r);e.hasClass("is-collapsed")!==o&&(e.toggleClass("is-collapsed",o),t.resetCompute())}}))},d=0,f=e.sections;d<f.length;d++){var g;p(g=f[d])}e.queueRender()}))},t.prototype.onScroll=function(){var t=this,e=t.previewEl,n=t.lastScroll,i=t.viewportHeight,r=e.scrollTop;Math.abs(n-r)>Math.max(i*this.renderExtra,this.renderExtraMinPx)/2&&this.updateVirtualDisplay(r),this.scrolling?this.scrolling=!1:this.owner.onScroll()},t.prototype.getScroll=function(){var t=this.previewEl,e=this.sections;if(0===e.length)return null;for(var n=t.scrollTop,i=0,r=0,o=0;o<e.length;o++){var s=e[o];if(!s.computed)return null;if(!(n>r+s.height)){var a=s.height/s.lines,l=n-r,c=Math.floor(l/a);return(i+=c)+(l/a-c)}i+=s.lines,s.shown&&(r+=s.height)}},t.prototype.applyScroll=function(t,e){if(!Number.isNumber(t)||isNaN(t))return!1;if(this.text!==this.lastText)return!1;var n=Math.floor(t),i=t-n;this.scrolling=!0;for(var r=this.sections,o=e||{},s=o.highlight,a=o.center,l=0,c=0,u=0;u<r.length;u++){var h=r[u];if(!h.computed)return!1;if(!(l+h.lines<=n)){if(!h.shown&&(this.showSection(h),h.shown))return this.applyScroll(t,e);var p=h.height/h.lines,d=n-l,f=0;a&&(f-=(this.previewEl.clientHeight-p)/2);var g=Math.max(0,c+p*(d+i)+f);this.updateVirtualDisplay(g);for(var m=null,v=0,y=0,b=h.el.findAll("li");y<b.length;y++){var w=b[y];if(this.belongsToMe(w)){var k=parseInt(w.getAttribute("data-line"));if(!(k<0||isNaN(k))){if(!(k<=d)){var C=k-v;if(C>0){var x=m?m.offsetTop:h.el.offsetTop;p=(w.offsetTop-x)/C}break}v=k,m=w,p=0}}}if(m){0===p&&(p=(h.el.offsetTop+h.height-m.offsetTop)/(h.lines-v));var S=m.offsetTop-h.el.offsetTop;g=Math.max(0,c+S+p*(d-v+i)+f),this.previewEl.scrollTop=g}return s&&this.highlightEl(m||h.el),!0}l+=h.lines,h.shown&&(c+=h.height)}return!0},t.prototype.getSectionTop=function(t){for(var e=this.sections,n=0,i=0;i<e.length;i++){var r=e[i];if(r===t)return n;var o=r.height;!r.computed&&0===o&&i>0&&(o=n/i),r.shown||(o=0),n+=o}return-1},t.prototype.showSection=function(t){if(!t.shown){var e=this.sections,n=e.indexOf(t);if(-1!==n){for(var i=t.level;n>=0;){var r=e[n];r.headingCollapsed&&r.level<i&&(r.setCollapsed(!1),i=r.level),n--}this.updateShownSections(),this.updateVirtualDisplay()}}},t.prototype.applyScrollSection=function(t){var e=this.previewEl,n=this.getSectionTop(t);if(-1!==n)return this.scrolling=!0,e.scrollTop=n,!0},t.prototype.applyScrollDelayed=function(t,e,n){var i=this;this.applyScroll(t,e)?n&&n():this.onRendered((function(){i.applyScroll(t,e),n&&n()}))},t.prototype.highlightEl=function(t){for(var e=0,n=this.sections;e<n.length;e++)for(var i=0,r=n[e].el.findAllSelf(".is-flashing");i<r.length;i++){r[i].removeClass("is-flashing")}t.addClass("is-flashing"),setTimeout((function(){t.removeClass("is-flashing")}),3e3)},t.prototype.getSectionContainer=function(t){for(var e=null,n=0,i=this.sections;n<i.length;n++){var r=i[n];if(r.el.contains(t)){e=r;break}}return e},t.prototype.selectRange=function(t){var e=this.sizerEl,n=this.previewEl,i=t.section,r=t.start,o=t.end;this.showSection(i);var s=this.getSectionTop(i);e.contains(i.el)||(n.scrollTop=s,this.updateVirtualDisplay());var a=function(t,e,n){var i=[];ph(t,i);var r=i.map((function(t){return t.textContent||""}));return dh(i,r,e,n)}(i.el,r,o);if(a){var l=function(t){for(;t;){if(t instanceof HTMLElement)return t;t=t.parentNode}return null}(a.startContainer);if(l){var c=n.scrollTop+40,u=c+n.clientHeight-40;(l.offsetTop<c||l.offsetTop+l.offsetHeight>u)&&l.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})}this.updateVirtualDisplay()}},t.prototype.addHeader=function(){this.header=new qy(null),this.sections.unshift(this.header),this.queueRender()},t.prototype.removeHeader=function(){this.sections.remove(this.header),this.header=null,this.queueRender()},t.prototype.addFooter=function(){this.footer=new qy(null),this.sections.push(this.footer),this.queueRender()},t.prototype.removeFooter=function(){this.sections.remove(this.footer),this.footer=null,this.queueRender()},t.prototype.updateHeader=function(){var t=this.header;t&&(t.resetCompute(),this.queueRender())},t.prototype.updateFooter=function(){var t=this.footer;t&&(t.resetCompute(),this.queueRender())},t.prototype.cleanupParentComponents=function(){for(var t=[],e=0,n=this.owner._children;e<n.length;e++){(o=n[e])instanceof Vy&&(this.belongsToMe(o.containerEl)||t.push(o))}for(var i=0,r=t;i<r.length;i++){var o=r[i];this.owner.removeChild(o)}},t.registerPostProcessor=function(t,e){t.sortOrder=e;var n=this.postProcessors;n.push(t),n.sort((function(t,e){return(t.sortOrder||0)-(e.sortOrder||0)}))},t.unregisterPostProcessor=function(t){this.postProcessors.remove(t)},t.registerRecycler=function(t){this.recyclers.push(t)},t.unregisterRecycler=function(t){this.recyclers.remove(t)},t.registerCodeBlockPostProcessor=function(t,e){var n=this.codeBlockPostProcessors;if(n.hasOwnProperty(t))throw new Error("Code block postprocessor for language "+t+" is already registered");n[t]=e},t.unregisterCodeBlockPostProcessor=function(t){delete this.codeBlockPostProcessors[t]},t.createCodeBlockPostProcessor=function(t,e){return function(n,i){var r=n.findAll("code.language-"+t);if(0!==r.length)for(var o=0,s=r;o<s.length;o++){var a=s[o],l=Jy(a),c=a.parentElement,u=createDiv("block-language-"+t);c.replaceWith(u);var h=e(l,u,i);h&&i.promises.push(h)}}},t.registerDomEvents=function(t,e,n){function i(t){var e=t.getAttr("data-href")||t.getAttr("href");return e&&n(t)?e:null}function r(t,n){if(0===t.button||1===t.button){var r=i(n);r&&e.onInternalLinkClick(t,n,r)}}t.on("click","a.internal-link",r),t.on("auxclick","a.internal-link",r),t.on("dragstart","a.internal-link",(function(t,n){var r=i(n);r&&e.onInternalLinkDrag(t,n,r)})),t.on("contextmenu","a.internal-link",(function(t,n){var r=i(n);r&&e.onInternalLinkRightClick(t,n,r)})),t.on("mouseover","a.internal-link",(function(t,n){var r=i(n);r&&e.onInternalLinkMouseover(t,n,r)})),t.on("click","a.external-link",(function(t,i){if(0===t.button||1===t.button){var r=i.getAttr("href");r&&n(i)&&e.onExternalLinkClick(t,i,r)}})),t.on("click","a.tag",(function(t,i){if(0===t.button&&n(i)){t.preventDefault();var r=i.getText();e.onTagClick(t,i,r)}})),t.on("click","img",(function(t,e){!t.defaultPrevented&&By.isMobile&&e instanceof HTMLImageElement&&function(t){var e=t.cloneNode(),n=document.body.createDiv("mobile-image-viewer");n.appendChild(e);var i=e.width,r=e.height,o=e.naturalWidth,s=e.naturalHeight,a=5,l=0,c=0,u=1,h=function(){var t=(u-1)/u/2,n=Math.max(0,i*t),o=Math.max(0,r*t);l=Math.clamp(l,-n,n),c=Math.clamp(c,-o,o),u=Math.clamp(u,1,a),e.style.transform="scale("+u+") translate("+l+"px, "+c+"px)"},p=0,d=0,f=0,g=0,m=function(){cancelAnimationFrame(g);var t=Date.now(),e=t-f;l+=Math.cos(d)*p*e,c+=Math.sin(d)*p*e,h(),(p-=Math.min(.003*e,p))>.01&&(f=t,g=requestAnimationFrame(m))};e.addEventListener("load",(function(){i=e.width,r=e.height,o=e.naturalWidth,s=e.naturalHeight,(a=2*Math.max(o/i,s/r))<1&&(a=1),h()}));var v=null,y=null,b=function(t){cancelAnimationFrame(g);for(var e=Date.now(),n=e-f,i=Array.prototype.slice.call(t.touches),r=null,o=null,s=0,a=i;s<a.length;s++){var b=a[s];v&&b.identifier===v.identifier&&(r=b),y&&b.identifier===y.identifier&&(o=b)}if(o&&!r&&(v=y,r=o,y=null,o=null),r?i.remove(r):i.length>0&&(r=i.first(),i.splice(0,1)),o?i.remove(o):i.length>0&&(o=i.first(),i.splice(0,1)),v&&r&&v.identifier===r.identifier){var w=window.innerWidth/2,k=window.innerHeight/2;if(y&&o&&y.identifier===o.identifier){var C=-l+((v.clientX+y.clientX)/2-w)/u,x=-c+((v.clientY+y.clientY)/2-k)/u,S=(r.clientX+o.clientX)/2,E=(r.clientY+o.clientY)/2,M=v.clientX-y.clientX,L=v.clientY-y.clientY,D=r.clientX-o.clientX,A=r.clientY-o.clientY,T=M*M+L*L,P=D*D+A*A;if(0!==T&&0!==P){var O=Math.sqrt(P/T),F=u*O;l=(S-w)/F-C,c=(E-k)/F-x,u=F,h()}}else{var I=(r.clientX-v.clientX)/u,N=(r.clientY-v.clientY)/u;l+=I,c+=N,p=Math.sqrt(I*I+N*N)/n,d=Math.atan2(N,I),h()}}y=o,(v=r)||y||(g=requestAnimationFrame(m)),f=e};n.addEventListener("touchstart",b),n.addEventListener("touchend",b),n.addEventListener("touchmove",b),n.addEventListener("touchcancel",b),n.addEventListener("click",(function(t){n.remove(),t.preventDefault(),cancelAnimationFrame(g)}))}(e)}))},t.postProcessors=[],t.codeBlockPostProcessors={},t.recyclers=[],t}();function Gy(t,e){return Bh.then((function(){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 100 100"),n.innerHTML='<g><foreignObject height="100" width="100"></foreignObject></g>';var i=n.firstChild,r=i.firstChild;t.appendChild(n);var o=r.clientWidth/i.getBBox().width;t.removeChild(n),o>0&&(Ky.textContent=".mermaid svg g>foreignObject{transform:scale("+o+");}");for(var s=function(e){var n=Jy(e),i=e.parentElement,r=t.clientWidth;mermaid.mermaidAPI.updateSiteConfig({pie:{useWidth:r},gantt:{useWidth:r},git:{useWidth:r}});var o=t.createDiv("mermaid"),s="m"+Tt(16);try{var a=null;if(mermaid.render(s,n,(function(t,e){a=o.firstChild.firstChild,e&&e(o)}),o),o.appendChild(a),i.replaceWith(o),Yy.set(o,n),a instanceof Element)for(var l=a.findAll('[*|class*="internal-link"] > g.label foreignObject > div').slice(),c=0,u=l;c<u.length;c++){var h=u[c],p=h.textContent;p&&(h.empty(),h.createEl("a",{cls:"internal-link",href:p,text:p}))}}catch(t){var d=document.getElementById("d"+s);d&&d.detach(),o.detach(),console.error(t),e.empty(),e.appendText("Error parsing Mermaid diagram!\n\n"+(t.str||t.message))}},a=0,l=e;a<l.length;a++){s(l[a])}Ky.textContent=""}))}Wy.registerPostProcessor((function(t,e){var n=t.find(".frontmatter"),i=e.frontmatter;if(n){var r=createDiv("frontmatter-container");n.parentNode.insertBefore(r,n.nextSibling);var o=r.createDiv({cls:"frontmatter-container-header",text:"Metadata"});if(null===i)return n.addClass("mod-failed"),n.createDiv({cls:"mod-error",prepend:!0,text:"Invalid YAML"}),void o.appendText(" (Invalid YAML)");if(!i)return;Ty(o.createDiv({cls:"frontmatter-collapse-indicator collapse-indicator collapse-icon",prepend:!0}),Wg,6),o.addEventListener("click",(function(){r.toggleClass("is-collapsed",!r.hasClass("is-collapsed"))}));var s=Pg(i);if(s&&s.length>0){var a=r.createDiv({cls:"frontmatter-section mod-aliases"});a.createSpan({cls:"frontmatter-section-label",text:"Aliases"});for(var l=a.createDiv("frontmatter-section-aliases"),c=0,u=s;c<u.length;c++){var h=u[c];l.createSpan({cls:"frontmatter-alias",text:h},(function(t){t.createSpan({cls:"frontmatter-alias-icon",prepend:!0},(function(t){Ty(t,tv,11)}))}))}}var p=Og(i);if(p&&p.length>0){var d=r.createDiv("frontmatter-section mod-tags");d.createSpan({cls:"frontmatter-section-label",text:"Tags"});for(var f=d.createDiv("frontmatter-section-tags"),g=0,m=p;g<m.length;g++){var v=m[g];f.createEl("a",{cls:"tag",href:v,attr:{target:"_blank",rel:"noopener"},text:v})}}s||p||r.hide()}})),Wy.registerPostProcessor((function(t,e){for(var n=0,i=t.findAll("[data-footnote-id]");n<i.length;n++){var r=i[n],o=r.getAttr("data-footnote-id");r.setAttr("data-footnote-id",o+"-"+e.docId),r.id=o+"-"+e.docId}for(var s=0,a=t.findAll("a.footnote-link");s<a.length;s++){var l=a[s],c=l.getAttr("href");l.setAttr("href",c+"-"+e.docId)}}));var Ky=document.head.createEl("style",{type:"text/css"});Wy.registerPostProcessor((function(t,e){var n=t.findAll("code.language-mermaid");if(0!==n.length)return Gy(e.containerEl,n)}));var $y=function(t,e){for(var n=0,i=t;n<i.length;n++)for(var r=0,o=i[n].el.findAll(".mermaid");r<o.length;r++){var s=o[r];if(e===Jy(s))return s}return null};Wy.registerRecycler((function(t,e){for(var n=0,i=t.findAll("code.language-mermaid");n<i.length;n++){var r=i[n],o=Jy(r),s=$y(e,o);s&&(s.detach(),r.parentElement.replaceWith(s))}}));var Yy=Ny();function Jy(t){if(Yy.has(t))return Yy.get(t);var e=St(t.innerHTML);return Yy.set(t,e),e}Wy.registerPostProcessor((function(t){var e=t.findAll('code[class*="language-"]:not(.is-loaded)');if(0!==e.length)return zh.then((function(){for(var t=0,n=e;t<n.length;t++){var i=n[t];Jy(i),Prism.highlightElement(i),i.addClass("is-loaded")}}))}),100);var Qy=function(t){return t.className.split(" ").filter((function(t){return t.startsWith("language-")})).first()},Xy=function(t,e,n){for(var i=0,r=t;i<r.length;i++)for(var o=0,s=r[i].el.findAll('code[class*="language-"].is-loaded');o<s.length;o++){var a=s[o];if(n===Yy.get(a)&&e===Qy(a))return a}return null};Wy.registerRecycler((function(t,e){for(var n=0,i=t.findAll('code[class*="language-"]:not(.is-loaded)');n<i.length;n++){var r=i[n],o=Jy(r),s=Qy(r),a=Xy(e,s,o);a&&(a.detach(),r.replaceWith(a))}}));var Zy=Ny();Wy.registerPostProcessor((function(t){var e=t.findAll(".math:not(.is-loaded)");if(0!==e.length)return Vh.then((function(){for(var t=0,n=e;t<n.length;t++){var i=n[t],r=St(i.innerHTML);i.empty();try{var o=jh(r,i.classList.contains("math-block"));i.appendChild(o)}catch(t){i.appendText(r)}i.addClass("is-loaded"),Zy.set(i,r)}return Kh()}))}));var tb=function(t,e,n){for(var i=0,r=t;i<r.length;i++)for(var o=0,s=r[i].el.findAll(".math.is-loaded");o<s.length;o++){var a=s[o];if(e===Zy.get(a)&&a.classList.contains("math-block")===n)return a}return null};function eb(t,e,n){for(var i=0,r=n;i<r.length;i++){var o=r[i];if(t.getAttr(o)!==e.getAttr(o))return!1}return!0}Wy.registerRecycler((function(t,e){for(var n=0,i=t.findAll(".math:not(.is-loaded)");n<i.length;n++){var r=i[n],o=St(r.innerHTML),s=tb(e,o,r.classList.contains("math-block"));s&&(s.detach(),r.replaceWith(s))}}));var nb=function(t,e){for(var n=0,i=t;n<i.length;n++)for(var r=0,o=i[n].el.findAll(".internal-embed.is-loaded");r<o.length;r++){var s=o[r];if(eb(e,s,["src","width","height","alt"]))return s}return null};Wy.registerRecycler((function(t,e){for(var n=0,i=t.findAll(".internal-embed:not(.is-loaded)");n<i.length;n++){var r=i[n],o=nb(e,r);o&&(o.detach(),r.replaceWith(o))}})),Wy.registerPostProcessor((function(t){var e=t.findAll("img");if(0!==e.length){for(var n=[],i=function(t){t.referrerPolicy="no-referrer",t.complete||n.push(new Promise((function(e){t.addEventListener("load",e),t.addEventListener("error",e)})))},r=0,o=e;r<o.length;r++){i(o[r])}return Promise.all(n)}}));var ib=function(t,e,n){for(var i=0,r=t;i<r.length;i++)for(var o=0,s=r[i].el.findAll("img");o<s.length;o++){var a=s[o];if(a instanceof HTMLImageElement&&(a.complete&&e===a.src))return a.setAttr("width",n.getAttr("width")),a.setAttr("height",n.getAttr("height")),a.setAttr("alt",n.getAttr("alt")),a}return null};Wy.registerRecycler((function(t,e){for(var n=0,i=t.findAll("img");n<i.length;n++){var r=i[n];if(r instanceof HTMLImageElement){var o=r.src,s=ib(e,o,r);s&&(s.detach(),r.replaceWith(s))}}}));var rb=["theme","cssTheme","enabledCssSnippets","translucency","baseFontSize","baseFontSizeAction"],ob={alwaysUpdateLinks:!1,spellcheck:!1,spellcheckLanguages:null,readableLineLength:!0,strictLineBreaks:!1,showFrontmatter:!1,useMarkdownLinks:!1,showUnsupportedFiles:!1,autoPairBrackets:!0,autoPairMarkdown:!0,smartIndentList:!0,foldHeading:!1,foldIndent:!1,showLineNumber:!1,useTab:!0,tabSize:4,lineWrap:!0,rightToLeft:!1,autoConvertHtml:!0,vimMode:!1,emacsyKeys:!0,legacyEditor:!0,livePreview:!0,attachmentFolderPath:"/",newFileLocation:"root",newFileFolderPath:"/",newLinkFormat:"shortest",fileSortOrder:"alphabetical",defaultViewMode:"source",promptDelete:!0,trashOption:"system",spellcheckDictionary:[],pdfExportSettings:{pageSize:"Letter",landscape:!1,margin:"0",downscalePercent:100},mobilePullAction:"command-palette:open",mobileToolbarCommands:["editor:insert-wikilink","editor:insert-embed","editor:insert-tag","editor:attach-file","editor:set-heading","editor:toggle-bold","editor:toggle-italics","editor:toggle-strikethrough","editor:toggle-highlight","editor:toggle-code","editor:toggle-blockquote","editor:toggle-comment","editor:insert-link","editor:toggle-bullet-list","editor:toggle-numbered-list","editor:toggle-checklist-status","editor:indent-list","editor:unindent-list","editor:undo","editor:redo","editor:toggle-keyboard","editor:configure-toolbar"],communityPluginSortOrder:"download",communityThemeSortOrder:"download",hotkeys:{},theme:"obsidian",cssTheme:"",enabledCssSnippets:[],translucency:!1,baseFontSize:16,baseFontSizeAction:!0},sb=function(){function t(){this._={}}return t.prototype.on=function(t,e,n){var i=this._,r=i[t];r||(i[t]=r=[]);var o={e:this,name:t,fn:e,ctx:n};return r.push(o),o},t.prototype.off=function(t,e){var n=this._,i=n[t],r=[];if(i&&e)for(var o=0;o<i.length;o++)i[o].fn!==e&&r.push(i[o]);r.length>0?n[t]=r:delete n[t]},t.prototype.offref=function(t){if(t){var e=t.name,n=this._,i=n[e],r=[];if(i&&t)for(var o=0;o<i.length;o++)i[o]!==t&&r.push(i[o]);r.length?n[e]=r:delete n[e]}},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this._,r=i[t];if(r){r=r.slice();for(var o=0;o<r.length;o++)this.tryTrigger(r[o],e)}},t.prototype.tryTrigger=function(t,e){try{t.fn.apply(t.ctx,e)}catch(t){setTimeout((function(){throw t}),0)}},t}(),ab=".obsidian",lb=function(){function t(t,e){this.deleted=!1,this.vault=t,this.setPath(e)}return t.prototype.setPath=function(t){this.path=t,this.name=Kt(t)},t.prototype.getNewPathAfterRename=function(t){return t=t.replace(/[\x00-\x1F]/g," ").trim(),this.parent?this.parent.isRoot()?t:this.parent.path+"/"+t:""},t}(),cb=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.saving=!1,i.unsafeCachedData=null,i.stat=null,i}return M(e,t),e.prototype.setPath=function(e){t.prototype.setPath.call(this,e),this.basename=Jt(this.name),this.extension=Xt(this.name)},e.prototype.getNewPathAfterRename=function(e){return t.prototype.getNewPathAfterRename.call(this,Zt(e,this.extension))},e.prototype.cache=function(t){if(null!=t){var e=this.vault.cacheLimit;t.length<=e?this.unsafeCachedData=t:this.unsafeCachedData=null}else this.unsafeCachedData=null},e.prototype.updateCacheLimit=function(){var t=this.vault.cacheLimit;this.unsafeCachedData&&this.unsafeCachedData.length>t&&(this.unsafeCachedData=null)},e}(lb),ub=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.children=[],i}return M(e,t),e.prototype.isRoot=function(){return"/"===this.path},e.prototype.getParentPrefix=function(){return this.isRoot()?"":this.path+"/"},e.prototype.getFileCount=function(){for(var t=0,n=0,i=this.children;n<i.length;n++){var r=i[n];t+=r instanceof e?r.getFileCount():1}return t},e.prototype.getFolderCount=function(){for(var t=0,n=0,i=this.children;n<i.length;n++){var r=i[n];r instanceof e&&(t+=1+r.getFolderCount())}return t},e}(lb),hb=function(t){function e(e){var n=t.call(this)||this;return n.fileMap={},n.config={},n.configTs=0,n.configDir=ab,n.requestSaveConfig=De(n.saveConfig.bind(n),1e3,!0),n.cacheLimit=65536,n.reloadConfig=De((function(){return D(n,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:t=this.getConfigFile("app"),e=this.getConfigFile("appearance"),n=!1,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.adapter.stat(t)];case 2:return c.sent().mtime>this.configTs&&(n=!0),[3,4];case 3:return c.sent(),n=!0,[3,4];case 4:return c.trys.push([4,6,,7]),[4,this.adapter.stat(e)];case 5:return c.sent().mtime>this.configTs&&(n=!0),[3,7];case 6:return c.sent(),n=!0,[3,7];case 7:return n?(this.configTs=Date.now(),[4,this.readConfigJson("app")]):[2];case 8:return i=c.sent(),[4,this.readConfigJson("appearance")];case 9:for(l in r=c.sent(),o=Object.assign({},r,i),s=this.config,a=!1,o)o.hasOwnProperty(l)&&(s.hasOwnProperty(l)&&JSON.stringify(s[l])===JSON.stringify(o[l])||(s[l]=o[l],a=!0));for(l in s)s.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(delete s[l],a=!0);return a&&this.trigger("config-changed"),[2]}}))}))}),500,!0),n.adapter=e,n.root=new ub(n,""),n.onChange("folder-created","/"),n.root=n.fileMap["/"],n}return M(e,t),e.prototype.getName=function(){return this.adapter.getName()},e.prototype.setFileCacheLimit=function(t){this.cacheLimit=t;var e=this.fileMap;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i instanceof cb&&i.updateCacheLimit()}},e.validateConfigDir=function(t){return"."!==t&&t.startsWith(".")&&!Bt.test(t)},e.prototype.setConfigDir=function(t){e.validateConfigDir(t)||(t=ab),this.configDir=t},e.prototype.setupConfig=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return e=(t=this).adapter,n=t.configDir,[4,e.exists(n)];case 1:return s.sent()?[3,3]:[4,e.mkdir(n)];case 2:s.sent(),s.label=3;case 3:return this.configTs=Date.now(),i=null,[4,this.readConfigJson("app")];case 4:return r=s.sent(),[4,this.readConfigJson("appearance")];case 5:return o=s.sent(),r?[3,7]:[4,this.readJson(n+"/config")];case 6:i=s.sent(),s.label=7;case 7:return this.config=Object.assign({},i,o,r),i?[4,this.saveConfig()]:[3,12];case 8:s.sent(),s.label=9;case 9:return s.trys.push([9,11,,12]),[4,this.adapter.remove(n+"/config")];case 10:return s.sent(),[3,12];case 11:return s.sent(),[3,12];case 12:return this.requestSaveConfig(),[2]}}))}))},e.prototype.saveConfig=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a;return A(this,(function(l){switch(l.label){case 0:return e=(t=this).adapter,n=t.configDir,[4,e.exists(n)];case 1:return l.sent()?[3,3]:[4,e.mkdir(n)];case 2:l.sent(),l.label=3;case 3:for(s in i=this.config,r={},o={},i)a=s,i.hasOwnProperty(a)&&(rb.contains(a)?o[a]=i[a]:r[a]=i[a]);return[4,this.writeConfigJson("app",r)];case 4:return l.sent(),[4,this.writeConfigJson("appearance",o)];case 5:return l.sent(),this.configTs=Date.now(),[2]}}))}))},e.prototype.getConfig=function(t){var e=this.config[t];return void 0===e?ob[t]:e},e.prototype.setConfig=function(t,e){void 0!==e?this.config[t]=e:delete this.config[t],this.requestSaveConfig(),this.trigger("config-changed")},e.prototype.readPluginData=function(t){var e=ne(t+"/data.json");return this.readJson(e)},e.prototype.writePluginData=function(t,e){var n=ne(t+"/data.json");return this.writeJson(n,e,!0)},e.prototype.getConfigFile=function(t){return this.configDir+"/"+t+".json"},e.prototype.readConfigJson=function(t){return this.readJson(this.getConfigFile(t))},e.prototype.writeConfigJson=function(t,e){return this.writeJson(this.getConfigFile(t),e,!0)},e.prototype.deleteConfigJson=function(t){var e=ne(this.configDir+"/"+t+".json");return this.adapter.remove(e)},e.prototype.readJson=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:e=ne(t),o.label=1;case 1:return o.trys.push([1,3,,4]),i=(n=JSON).parse,[4,this.adapter.read(e)];case 2:return[2,i.apply(n,[o.sent()])];case 3:return"ENOENT"===(r=o.sent()).code||console.error(r),[3,4];case 4:return[2,null]}}))}))},e.prototype.writeJson=function(t,e,n){return D(this,void 0,Promise,(function(){var i;return A(this,(function(r){switch(r.label){case 0:i=ne(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.adapter.write(i,JSON.stringify(e,void 0,n?2:void 0))];case 2:return r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.load=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.adapter.watch(this.onChange.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype.getAbstractFileByPath=function(t){return this.fileMap.hasOwnProperty(t)?this.fileMap[t]:null},e.prototype.getAbstractFileByPathInsensitive=function(t){var e=this.fileMap;if(e.hasOwnProperty(t))return e[t];var n=t.toLowerCase();for(var i in e)if(e.hasOwnProperty(i)&&i.toLowerCase()===n)return e[i];return null},e.prototype.isEmpty=function(){return 1===Object.keys(this.fileMap).length},e.prototype.getRoot=function(){return this.root},e.prototype.checkForDuplicate=function(t,e){var n=t.getNewPathAfterRename(e),i=this.fileMap[n];return i&&i!==t},e.prototype.checkPath=function(t){if(!zt(t))throw new Error("File name cannot contain any of the following characters: "+It)},e.prototype.onChange=function(t,e,n,i){if("folder-created"===t){var r=new ub(this,e);this.fileMap[e]=r,this.addChild(r),this.trigger("create",this.fileMap[e])}else if("file-created"===t){var o=new cb(this,e);o.stat=i,this.fileMap[e]=o,this.addChild(o),this.trigger("create",this.fileMap[e])}else if("modified"===t){if(!this.fileMap.hasOwnProperty(e))return;(s=this.fileMap[e])instanceof cb&&(s.stat=i,s.saving||s.cache(null)),this.trigger("modify",s)}else if("file-removed"===t||"folder-removed"===t){if(this.fileMap.hasOwnProperty(e)){var s=this.fileMap[e];this.removeChild(s),delete this.fileMap[e],s.deleted=!0,this.trigger("delete",s)}}else if("renamed"===t){if(this.fileMap.hasOwnProperty(n)){var a=this.fileMap[n];this.removeChild(a),a.setPath(e),this.addChild(a),this.fileMap[e]=a,delete this.fileMap[n],this.trigger("rename",a,n)}}else"closed"===t?this.trigger("closed"):"raw"===t&&(this.trigger("raw",e),e!==this.getConfigFile("app")&&e!==this.getConfigFile("appearance")||this.reloadConfig())},e.prototype.getDirectParent=function(t){var e=t.path,n=e.lastIndexOf("/");if(-1===n)return this.fileMap["/"];var i=e.slice(0,n),r=this.fileMap[i];return r&&r instanceof ub?r:null},e.prototype.addChild=function(t){var e=t.parent,n=this.getDirectParent(t);n&&n!==e&&(e&&e.children.remove(t),n.children.push(t),t.parent=n)},e.prototype.removeChild=function(t){var e=t.parent;e&&(e.children.remove(t),t.parent=null)},e.prototype.exists=function(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return n=ne(t),[4,this.adapter.exists(n,e)];case 1:return[2,i.sent()]}}))}))},e.prototype.create=function(t,e,n){return D(this,void 0,Promise,(function(){var i,r;return A(this,(function(o){switch(o.label){case 0:return i=ne(t),this.checkPath(i),[4,this.adapter.exists(i)];case 1:if(o.sent())throw new Error("File already exists.");return[4,this.adapter.write(i,e,n)];case 2:return o.sent(),(r=this.getAbstractFileByPath(i))instanceof cb?[2,r]:[2,null]}}))}))},e.prototype.createBinary=function(t,e,n){return D(this,void 0,Promise,(function(){var i,r;return A(this,(function(o){switch(o.label){case 0:return i=ne(t),this.checkPath(i),[4,this.adapter.exists(i)];case 1:if(o.sent())throw new Error("File already exists.");return[4,this.adapter.writeBinary(i,e,n)];case 2:return o.sent(),(r=this.getAbstractFileByPath(i))instanceof cb?[2,r]:[2,null]}}))}))},e.prototype.createFolder=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=ne(t),this.checkPath(e),[4,this.adapter.exists(e)];case 1:if(n.sent())throw new Error("Folder already exists.");return[2,this.adapter.mkdir(e)]}}))}))},e.prototype.read=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return[4,this.adapter.read(t.path)];case 1:return e=n.sent(),t.cache(e),[2,e]}}))}))},e.prototype.cachedRead=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){return null!==t.unsafeCachedData?[2,t.unsafeCachedData]:[2,this.read(t)]}))}))},e.prototype.readBinary=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return[4,this.adapter.readBinary(t.path)];case 1:e=n.sent();try{"md"===t.extension&&e.byteLength<=this.cacheLimit&&t.cache((new TextDecoder).decode(e))}catch(t){}return[2,e]}}))}))},e.prototype.readRaw=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){return e=ne(t),[2,this.adapter.read(e)]}))}))},e.prototype.getResourcePath=function(t){return this.adapter.getResourcePath(t.path)},e.prototype.delete=function(t,e){return void 0===e&&(e=!1),D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return t?t instanceof cb?[4,this.adapter.remove(t.path)]:[3,2]:[3,4];case 1:return n.sent(),[3,4];case 2:return t instanceof ub?[4,this.adapter.rmdir(t.path,e)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},e.prototype.trash=function(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return t?e?[4,this.adapter.trashSystem(t.path)]:[3,2]:[2];case 1:if(n.sent())return[2];n.label=2;case 2:return[4,this.adapter.trashLocal(t.path)];case 3:return n.sent(),[2]}}))}))},e.prototype.rename=function(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return n=ne(e),t.path===n?[2]:(this.checkPath(n),[4,this.adapter.rename(t.path,n)]);case 1:return i.sent(),[2]}}))}))},e.prototype.modify=function(t,e,n){return D(this,void 0,Promise,(function(){var i,r;return A(this,(function(o){switch(o.label){case 0:i=t.saving,t.saving=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),(n=n||{}).immediate=function(){return t.cache(e)},[4,this.adapter.write(t.path,e,n)];case 2:return o.sent(),[3,5];case 3:throw r=o.sent(),t.cache(null),r;case 4:return t.saving=i,[7];case 5:return[2]}}))}))},e.prototype.modifyBinary=function(t,e,n){return D(this,void 0,Promise,(function(){var i;return A(this,(function(r){switch(r.label){case 0:i=t.saving,t.saving=!0,r.label=1;case 1:return r.trys.push([1,,3,4]),(n=n||{}).immediate=function(){return t.cache(null)},[4,this.adapter.writeBinary(t.path,e,n)];case 2:return r.sent(),[3,4];case 3:return t.saving=i,[7];case 4:return[2]}}))}))},e.prototype.append=function(t,e,n){return D(this,void 0,Promise,(function(){var i;return A(this,(function(r){switch(r.label){case 0:i=t.saving,t.saving=!0,r.label=1;case 1:return r.trys.push([1,,3,4]),(n=n||{}).immediate=function(){return t.cache(null)},[4,this.adapter.append(t.path,e,n)];case 2:return r.sent(),[3,4];case 3:return t.saving=i,[7];case 4:return[2]}}))}))},e.prototype.copy=function(t,e){return D(this,void 0,Promise,(function(){var n,i;return A(this,(function(r){switch(r.label){case 0:return n=(n=ne(e)).normalize("NFC"),this.checkPath(n),[4,this.adapter.copy(t.path,n)];case 1:return r.sent(),(i=this.getAbstractFileByPath(n))instanceof cb?[2,i]:[2,null]}}))}))},e.prototype.getAllLoadedFiles=function(){var t=[];for(var e in this.fileMap)if(this.fileMap.hasOwnProperty(e)){var n=this.fileMap[e];t.push(n)}return t},e.prototype.getAvailablePath=function(t,e){for(var n=1,i=Zt(t,e);this.getAbstractFileByPathInsensitive(i);)i=Zt(t+" "+n,e),n++;return i},e.prototype.getAvailablePathForAttachments=function(t,e,n){return D(this,void 0,Promise,(function(){var i,r,o,s;return A(this,(function(a){switch(a.label){case 0:return i=this.getConfig("attachmentFolderPath"),r="."===i||"./"===i,o=null,i.startsWith("./")&&(o=i.slice(2)),r?i=n.parent.path:o&&(i=n.parent.getParentPrefix()+o),(s=this.getAbstractFileByPathInsensitive(i))||!o?[3,2]:[4,this.createFolder(i)];case 1:a.sent(),s=this.getAbstractFileByPathInsensitive(i),a.label=2;case 2:return s instanceof ub?[2,this.getAvailablePath(s.getParentPrefix()+t,e)]:[2,this.getAvailablePath(t,e)]}}))}))},e.recurseChildren=function(t,e){for(var n=[t];n.length>0;){var i=n.pop();if(i&&(e(i),i instanceof ub)){var r=i.children;n=n.concat(r)}}},e.prototype.getMarkdownFiles=function(){var t=[],n=this.getRoot();return e.recurseChildren(n,(function(e){e instanceof cb&&"md"===e.extension&&t.push(e)})),t},e.prototype.getFiles=function(){var t=[],n=this.getRoot();return e.recurseChildren(n,(function(e){e instanceof cb&&t.push(e)})),t},e.prototype.iterateFiles=function(t,e){return F(this,arguments,(function(){var n,i,r,o;return A(this,(function(s){switch(s.label){case 0:n=0,s.label=1;case 1:return n<t.length?(i=t[n],r="","md"!==i.extension?[3,6]:e?[4,O(this.cachedRead(i))]:[3,3]):[3,10];case 2:return o=s.sent(),[3,5];case 3:return[4,O(this.read(i))];case 4:o=s.sent(),s.label=5;case 5:r=o,s.label=6;case 6:return[4,O({file:i,content:r})];case 7:return[4,s.sent()];case 8:s.sent(),s.label=9;case 9:return n++,[3,1];case 10:return[2]}}))}))},e.prototype.generateFiles=function(t,e){return F(this,arguments,(function(){var n,i,r,o,s,a,l,c;return A(this,(function(u){switch(u.label){case 0:u.trys.push([0,12,13,18]),n=I(t),u.label=1;case 1:return[4,O(n.next())];case 2:return(i=u.sent()).done?[3,11]:(r=i.value,o="","md"!==r.extension?[3,7]:e?[4,O(this.cachedRead(r))]:[3,4]);case 3:return s=u.sent(),[3,6];case 4:return[4,O(this.read(r))];case 5:s=u.sent(),u.label=6;case 6:o=s,u.label=7;case 7:return[4,O({file:r,content:o})];case 8:return[4,u.sent()];case 9:u.sent(),u.label=10;case 10:return[3,1];case 11:return[3,18];case 12:return a=u.sent(),l={error:a},[3,18];case 13:return u.trys.push([13,,16,17]),i&&!i.done&&(c=n.return)?[4,O(c.call(n))]:[3,15];case 14:u.sent(),u.label=15;case 15:return[3,17];case 16:if(l)throw l.error;return[7];case 17:return[7];case 18:return[2]}}))}))},e.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.prototype.trigger.apply(this,P([e],n))},e.prototype.on=function(e,n,i){return t.prototype.on.call(this,e,n,i)},e}(sb),pb={height:"",paddingTop:"",paddingBottom:"",marginTop:"",marginBottom:""},db=new WeakMap,fb=[],gb=[],mb=function(){function t(t){this.from={},this.to={},this.end={};var e=t||{},n=e.duration,i=void 0===n?100:n,r=e.fn,o=void 0===r?"ease-in-out":r;this.duration=i,this.fn=o}return t.prototype.addProp=function(t,e,n,i){return void 0===i&&(i=null),null!==e&&(this.from[t]=e),null!==n&&(this.to[t]=n),null!==i&&(this.end[t]=i),this},t}();function vb(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n])}function yb(t){var e=window.getComputedStyle(t),n={};for(var i in pb)if(pb.hasOwnProperty(i)){var r=e[i];if(r&&r.endsWith("px")){var o=parseFloat(r.substr(0,r.length-2));0!==o&&(n[i]=o)}}return n}function bb(t,e){var n=db.get(t);if(db.delete(t),n&&(t.style.transition="",vb(t,n.props.end),clearTimeout(n.timer),t.removeEventListener("transitionend",n.fn),fb.remove(n),e||n.complete&&n.complete(),0===fb.length)){var i=gb;gb=[],i.forEach((function(t){return t()}))}}var wb=null;function kb(t,e,n){bb(t),vb(t,e.from);var i={props:e,fn:function(){return bb(t)},timer:0,complete:n};db.set(t,i),fb.push(i);null===wb&&(wb=[],setTimeout((function(){document.body.offsetHeight;var t=wb;wb=null;for(var e=0,n=t;e<n.length;e++){(0,n[e])()}}),0)),wb.push((function(){t.style.transition="all "+e.duration+"ms "+e.fn,vb(t,e.to),t.addEventListener("transitionend",i.fn),i.timer=window.setTimeout(i.fn,e.duration+50)}))}function Cb(t){return new Promise((function(e){return function(t,e){bb(t);var n=yb(t),i=new mb({duration:100,fn:"cubic-bezier(.02, .01, .47, 1)"});for(var r in i.addProp("overflow","hidden","hidden",""),n)n.hasOwnProperty(r)&&i.addProp(r,"0px",n[r]+"px","");kb(t,i,e)}(t,e)}))}function xb(t){return new Promise((function(e){return function(t,e){bb(t);var n=yb(t),i=new mb({duration:100,fn:"cubic-bezier(.02, .01, .47, 1)"});for(var r in i.addProp("overflow","hidden","hidden",""),n)n.hasOwnProperty(r)&&i.addProp(r,n[r]+"px","0px","");kb(t,i,e)}(t,e)}))}function Sb(t,e,n){return D(this,void 0,Promise,(function(){return A(this,(function(i){switch(i.label){case 0:return bb(t),e?n?[4,xb(t)]:[3,2]:[3,3];case 1:i.sent(),i.label=2;case 2:return t.hide(),[3,5];case 3:return t.show(),n?[4,Cb(t)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))}function Eb(t,e,n,i){return D(this,void 0,Promise,(function(){return A(this,(function(r){switch(r.label){case 0:return n?i?[4,xb(t)]:[3,2]:[3,3];case 1:r.sent(),r.label=2;case 2:return t.detach(),[3,5];case 3:return e.appendChild(t),i?[4,Cb(t)]:[3,5];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}var Mb=function(){};function Lb(t,e,n,i){i=i||Mb;for(var r=0,o=Array.prototype.slice.call(t.childNodes);r<o.length;r++){bb(o[r])}var s=t.firstChild;if(!s)return t.appendChild(e),void i();s!==e||s.nextSibling?"left"===n?(t.setChildrenInPlace([e,s]),kb(e,new mb({duration:300}).addProp("transform","translateX(-100%)","translateX(0)","")),kb(s,new mb({duration:300}).addProp("transform","translateX(0)","translateX(100%)"),(function(){s.detach(),i&&i()}))):(t.setChildrenInPlace([s,e]),kb(s,new mb({duration:300}).addProp("transform","translateX(0)","translateX(-100%)"),(function(){s.detach(),i&&i()})),kb(e,new mb({duration:300}).addProp("transform","translateX(100%)","translateX(0)",""))):i()}for(var Db={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",91:"OS",93:"ContextMenu",95:"Sleep",106:"*",107:"+",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},Ab=1;Ab<25;Ab++)Db[111+Ab]="F"+Ab;for(Ab=65;Ab<91;Ab++){var Tb=String.fromCharCode(Ab);Db[Ab]=Tb.toUpperCase()}for(Ab=96;Ab<106;Ab++)Db[Ab]="Numpad"+String.fromCharCode(Ab-48);var Pb={ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓"};function Ob(t){var e=t.key;if(!e){var n=t.which||t.keyCode;e=Db[n]}return e}var Fb=dt?{Mod:"⌘",Ctrl:"⌃",Meta:"⌘",Alt:"⌥",Shift:"⇧"}:{Mod:"Ctrl",Ctrl:"Ctrl",Meta:"Win",Alt:"Alt",Shift:"Shift"},Ib=["Mod","Ctrl","Meta","Alt","Shift"];var Nb=function(){function t(t){this.keys=[],this.parent=t}return t.prototype.registerKey=function(t,e,n){return this.register(t,e,n)},t.prototype.register=function(t,e,n){var i={scope:this,modifiers:t?Bb.compileModifiers(t):null,key:e,func:n};return this.keys.push(i),i},t.prototype.unregister=function(t){this.keys.remove(t)},t.prototype.handleKey=function(t,e){for(var n=0,i=this.keys;n<i.length;n++){var r=i[n];if(Bb.isMatch(r,e)){var o=r.func(t,e);if(void 0!==o)return o}}if(this.parent)return this.parent.handleKey(t,e)},t}(),Bb=function(){function t(){this.rootScope=new Nb,this.scope=this.rootScope,this.prevScopes=[],window.addEventListener("keydown",this.onKeyEvent.bind(this),!0)}return t.prototype.getRootScope=function(){return this.rootScope},t.prototype.pushScope=function(t){this.scope!==t&&(this.prevScopes.push(this.scope),this.scope=t)},t.prototype.popScope=function(t){t!==this.rootScope&&(this.scope===t?this.scope=this.prevScopes.pop()||this.rootScope:this.prevScopes.remove(t))},t.prototype.onKeyEvent=function(e){this.updateModifiers(e);var n=this.scope;if(n){var i=Ob(e);if(!t.isModifierKey(i)){var r=function(t){var e=t.which||t.keyCode;return Db[e]||"Key"+e}(e);54===e.which&&"^"==e.key&&"KeyI"===e.code&&(r="KeyI");var o={modifiers:this.modifiers,key:i,vkey:r};return!1===n.handleKey(e,o)?(e.preventDefault(),e.stopPropagation(),!1):void 0}}},t.prototype.updateModifiers=function(e){this.modifiers=t.getModifiers(e)},t.getModifiers=function(e){var n=[];return e.ctrlKey&&n.push("Ctrl"),e.metaKey&&n.push("Meta"),e.altKey&&n.push("Alt"),e.shiftKey&&n.push("Shift"),t.compileModifiers(n)},t.compileModifiers=function(t){return t.map((function(t){return"Mod"===t?"MacOS"===ht?"Meta":"Ctrl":t})).sort().join(",")},t.decompileModifiers=function(t){return t.split(",").map((function(t){return"MacOS"===ht&&"Meta"===t||"MacOS"!==ht&&"Ctrl"===t?"Mod":t})).filter((function(t){return t}))},t.isModifierKey=function(t){return"Control"===t||"Alt"===t||"Shift"===t||"OS"===t||"Meta"===t},t.prototype.matchModifiers=function(t){return this.modifiers===t},t.isModifier=function(t,e){return"Ctrl"===e?t.ctrlKey:"Meta"===e?t.metaKey:"Alt"===e?t.altKey:"Shift"===e?t.shiftKey:"Mod"===e&&("MacOS"===ht?t.metaKey:t.ctrlKey)},t.isMatch=function(t,e){var n=t.modifiers,i=t.key;return(null===n||n===e.modifiers)&&(!i||(i===e.vkey||!(!e.key||i.toLowerCase()!==e.key.toLowerCase())))},t.isModEvent=function(e){return!!e&&(t.isModifier(e,"Mod")||e instanceof MouseEvent&&1===e.button)},t}(),Rb=function(){function t(t){this.disabled=!1,this.menu=t;var e=this.dom=t.dom.createDiv("menu-item");this.iconEl=e.createDiv("menu-item-icon"),this.titleEl=e.createDiv("menu-item-title"),e.addEventListener("mousedown",(function(){var t=rh();t&&requestAnimationFrame((function(){oh(t)}))})),e.addEventListener("click",this.handleEvent.bind(this))}return t.prototype.setTitle=function(t){return"string"==typeof t?this.titleEl.setText(t):(this.titleEl.empty(),this.titleEl.appendChild(t)),this},t.prototype.setIcon=function(t,e){return void 0===e&&(e=16),t?Ty(this.iconEl,t,e):this.iconEl.empty(),this},t.prototype.removeIcon=function(){return this.iconEl.detach(),this},t.prototype.setActive=function(t){return this.setIcon(t?pm:null),this},t.prototype.setDisabled=function(t){return this.disabled=t,this.dom.toggleClass("is-disabled",t),this},t.prototype.setIsLabel=function(t){return this.dom.toggleClass("is-label",t),this},t.prototype.onClick=function(t){return this.callback=t,this},t.prototype.handleEvent=function(t){if(this.disabled)t.preventDefault();else{var e=this.callback;e&&e(t)}},t}(),zb=function(t){function e(e){var n=t.call(this)||this;n.unloading=!1,n.items=[],n.selected=-1,n.app=e,n.scope=new Nb(e.scope),n.dom=createDiv("menu");var i=n.bgEl=createDiv("suggestion-bg");return i.addEventListener("mousedown",(function(t){return t.preventDefault()})),i.onClickEvent((function(){return n.hide()})),n.scope.register([],"ArrowUp",n.onArrowUp.bind(n)),n.scope.register([],"ArrowDown",n.onArrowDown.bind(n)),n.scope.register([],"Enter",n.onEnter.bind(n)),n.scope.register([],"Escape",n.hide.bind(n)),n}return M(e,t),e.prototype.onload=function(){var t=this;this.registerDomEvent(document,"click",this.hide.bind(this)),this.registerDomEvent(document,"mousedown",(function(e){var n=t.dom;n===e.target||n.contains(e.target)||t.hide()})),this.registerDomEvent(document,"contextmenu",this.hide.bind(this)),this.app.keymap.pushScope(this.scope)},e.prototype.onunload=function(){this.app.keymap.popScope(this.scope)},e.prototype.setNoIcon=function(){return this.dom.addClass("mod-no-icon"),this},e.prototype.addItem=function(t){var e=this,n=new Rb(this);return this.items.push(n),n.dom.addEventListener("mouseover",(function(){e.select(e.items.indexOf(n))})),t(n),this},e.prototype.addSeparator=function(){return this.dom.createDiv("menu-separator"),this},e.prototype.showAtMouseEvent=function(t){return this.showAtPosition({x:t.clientX,y:t.clientY})},e.prototype.showAtPosition=function(t){if(this.unload(),0===this.items.length)return this;setTimeout(this.load.bind(this),0);var e=this.dom,n=this.bgEl;if(document.body.appendChild(e),By.isMobile){document.body.appendChild(n);var i=e.offsetHeight-1;kb(e,new mb({duration:300}).addProp("transform","translateY("+i+"px)","")),kb(n,new mb({duration:200}).addProp("opacity","0","0.85"))}else{var r=e.offsetWidth,o=e.offsetHeight,s=window.innerWidth,a=window.innerHeight,l=parseFloat(getComputedStyle(document.body).paddingTop);l&&!isNaN(l)||(l=0);var c=e.style;t.x+r>s?c.left=Math.max(0,t.x-r+2)+"px":c.left=t.x+2+"px",t.y+o>a?c.top=Math.max(l,t.y-o+2)+"px":c.top=t.y+2+"px",vh(e)}return this},e.prototype.hide=function(){var t=this;if(this.unload(),this.unloading)return this;this.unloading=!0;var e=this,n=e.dom,i=e.bgEl,r=e.hideCallback;if(By.isMobile){var o=n.offsetHeight-1;kb(n,new mb({duration:300}).addProp("transform","","translateY("+o+"px)"),(function(){n.detach(),r&&r(),t.unloading=!1})),kb(i,new mb({duration:200}).addProp("opacity",null,"0"),(function(){i.detach()}))}else n.detach(),r&&r(),this.unloading=!1;return this},e.prototype.onHide=function(t){this.hideCallback=t},e.prototype.onArrowUp=function(t){t.preventDefault();for(var e=this.items,n=this.selected-1,i=0;i<e.length;){var r=e[n];if(r&&!r.disabled)return this.select(n),!1;--n<0&&(n=e.length-1),i++}return!1},e.prototype.onArrowDown=function(t){t.preventDefault();for(var e=this.items,n=this.selected+1,i=0;i<e.length;){var r=e[n];if(r&&!r.disabled)return this.select(n),!1;++n>=e.length&&(n=0),i++}return!1},e.prototype.onEnter=function(t){var e=this.items[this.selected];return e&&(e.handleEvent(t),this.hide()),!1},e.prototype.select=function(t){var e=this.items,n=this.selected;if(0!==e.length){t<0&&(t=e.length-1),t>=e.length&&(t=0);var i=e[n];i&&i.dom.removeClass("selected"),this.selected=t;var r=e[t];r.dom.addClass("selected"),r.dom.scrollIntoView({block:"nearest"})}},e}(Vg),Hb=function(t){function e(e){var n=t.call(this)||this;return n.icon=Gg,n.navigation=!0,n.app=e.app,n.leaf=e,n.containerEl=createDiv("workspace-leaf-content"),n.containerEl.setAttribute("data-type",n.getViewType()),n}return M(e,t),e.prototype.open=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return t.appendChild(this.containerEl),this.load(),[4,this.onOpen()];case 1:return e.sent(),[2]}}))}))},e.prototype.close=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return this.containerEl.detach(),this.unload(),[4,this.onClose()];case 1:return t.sent(),[2]}}))}))},e.prototype.onOpen=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){return[2]}))}))},e.prototype.onClose=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){return[2]}))}))},e.prototype.getState=function(){return{}},e.prototype.setState=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(t){return[2]}))}))},e.prototype.getEphemeralState=function(){return{}},e.prototype.setEphemeralState=function(t){},e.prototype.getIcon=function(){return this.icon?this.icon:Gg},e.prototype.onResize=function(){},e.prototype.onHeaderMenu=function(t){},e.prototype.getSideTooltipPlacement=function(){var t=this.leaf.getRoot();return"left"===t.side?"right":"right"===t.side?"left":void 0},e}(Vg),Vb=function(t){function e(e){var n=t.call(this,e)||this;n.canDropAnywhere=!1;var i=n.app,r=i.workspace,o=n.headerEl=n.containerEl.createDiv("view-header");n.contentEl=n.containerEl.createDiv("view-content");var s=n.iconEl=o.createDiv("view-header-icon");(By.isMobile||$e(s,Ee("interface.drag-to-rearrange")),n.titleContainerEl=o.createDiv("view-header-title-container"),n.titleEl=n.titleContainerEl.createDiv({cls:"view-header-title"}),n.actionsEl=o.createDiv("view-actions"),By.isMobile?(n.moreOptionsButtonEl=n.addAction(bm,Ee("interface.menu.more-options"),(function(){r.rightSplit.expand()}),24),n.moreOptionsButtonEl.addEventListener("contextmenu",n.onMoreOptions.bind(n))):n.moreOptionsButtonEl=n.addAction(bm,Ee("interface.menu.more-options"),n.onMoreOptions.bind(n)),By.isMobile)||n.addAction(Am,Ee("interface.menu.close"),(function(){e.detach()}),16).addClass("mod-close-leaf");var a=n.pinButtonEl=n.addAction(wm,Ee("interface.menu.pin"),(function(){e.togglePinned()}));a.addClass("mod-pin-leaf"),a.hide(),s.addEventListener("mousedown",(function(t){r.onDragLeaf(t,n.leaf)})),i.dragManager.handleDrop(n.containerEl,n.handleDrop.bind(n));var l=n.groupButtonEl=n.addAction(um,Ee("interface.menu.unlink-pane"),(function(){for(var t=0,n=r.getGroupLeaves(e.group);t<n.length;t++){n[t].unhighlight()}e.setGroup(null)}));return l.addEventListener("mouseover",(function(){Ty(l,Dm,18);for(var t=0,n=r.getGroupLeaves(e.group);t<n.length;t++){n[t].highlight()}})),l.addEventListener("mouseout",(function(){Ty(l,um,18);for(var t=0,n=r.getGroupLeaves(e.group);t<n.length;t++){n[t].unhighlight()}})),n}return M(e,t),e.prototype.load=function(){t.prototype.load.call(this),this.onGroupChange();var e=this.app,n=this.leaf;By.isMobile?(Ty(this.iconEl,Qg,24),this.iconEl.addEventListener("click",(function(){e.workspace.leftSplit.expand()}))):Ty(this.iconEl,this.getIcon(),18),this.titleEl.setText(this.getDisplayText()),this.registerEvent(n.on("pinned-change",this.onPinnedChange,this)),this.registerEvent(n.on("group-change",this.onGroupChange,this))},e.prototype.handleDrop=function(t,e,n){if(this.canDropAnywhere||(dt?t.shiftKey:t.altKey)||this.headerEl.contains(t.target)){var i=this.leaf.handleDrop(t,e,n);if(i)return i.hoverEl=this.headerEl,i.hoverClass="is-highlighted",i}},e.prototype.onPinnedChange=function(t){this.pinButtonEl.toggleClass("is-active",t),t?(Ty(this.pinButtonEl,Nm,20),this.pinButtonEl.show()):(Ty(this.pinButtonEl,wm,20),this.pinButtonEl.hide())},e.prototype.onMoreOptionsMenu=function(t){var e=this.app,n=this.leaf;By.isMobile?t.addItem((function(t){return t.setTitle(Ee("interface.menu.close-current-pane")).setIcon(am).onClick((function(){return n&&n.detach()}))})):(n.group||t.addItem((function(t){return t.setTitle(Ee("interface.menu.link-pane")).setIcon(um).onClick((function(){return e.workspace.onStartLink(n)}))})),n.pinned||t.addItem((function(t){return t.setTitle(Ee("interface.menu.pin")).setIcon(wm).onClick((function(){return n.togglePinned()}))})),t.addItem((function(t){return t.setTitle(Ee("commands.split-vertically")).setIcon(Sm).onClick((function(){return e.workspace.duplicateLeaf(n,"vertical")}))})).addItem((function(t){return t.setTitle(Ee("commands.split-horizontally")).setIcon(xm).onClick((function(){return e.workspace.duplicateLeaf(n,"horizontal")}))})))},e.prototype.onGroupChange=function(){this.groupButtonEl.toggle(!!this.leaf.group)},e.prototype.addAction=function(t,e,n,i){void 0===i&&(i=18);var r=createEl("a","view-action");return this.actionsEl.prepend(r),Ty(r,t,i),$e(r,e),r.onClickEvent((function(t){if(0===t.button||1===t.button)return n(t)})),r},e.prototype.onMoreOptions=function(t){t.preventDefault();var e=new zb(this.app);this.onMoreOptionsMenu(e),e.showAtMouseEvent(t)},e.prototype.onHeaderMenu=function(e){var n=this;t.prototype.onHeaderMenu.call(this,e),e.addItem((function(t){return t.setTitle(Ee("interface.menu.close")).setIcon(Am).onClick((function(){return n.leaf.detach()}))}))},e}(Hb),qb=createDiv("notice-container"),jb=function(){function t(t,e){var n=this;void 0===e&&(e=4e3),document.body.appendChild(qb);var i=this.noticeEl=qb.createDiv({cls:"notice",text:t});By.isMobile?kb(i,(new mb).addProp("marginBottom",-i.offsetHeight+"px","0","")):kb(i,(new mb).addProp("transform","translateX(350px)","","")),e&&setTimeout((function(){return n.hide()}),e),i.addEventListener("click",(function(){return n.hide()}))}return t.prototype.setMessage=function(t){return this.noticeEl.setText(t),this},t.prototype.hide=function(){var t=this;setTimeout((function(){var e=t.noticeEl;if(By.isMobile)kb(e,(new mb).addProp("opacity",null,"0",""),(function(){e.detach(),0===qb.childElementCount&&qb.detach()}));else{var n=getComputedStyle(e),i=-(e.offsetHeight+parseInt(n.marginBottom))+"px";kb(e,(new mb).addProp("marginTop","0",i,""),(function(){e.detach(),0===qb.childElementCount&&qb.detach()}))}}))},t}();window.Notice=jb;var Ub=function(t){function e(e){var n=t.call(this,e)||this;return n.allowNoFile=!1,n}return M(e,t),e.prototype.getDisplayText=function(){return this.file?this.file.basename:Ee("interface.no-file")},e.prototype.onload=function(){t.prototype.onload.call(this);var e=this.app.vault;this.registerEvent(e.on("rename",this.onRename.bind(this))),this.registerEvent(e.on("delete",this.onDelete.bind(this)))},e.prototype.getState=function(){var e=t.prototype.getState.call(this),n=this.file;return n&&(e.file=n.path),e},e.prototype.getSyncViewState=function(){var t=this.getState();return t.sync=!0,{state:t,eState:this.getEphemeralState()}},e.prototype.syncState=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r,o,s,a,l,c;return A(this,(function(u){switch(u.label){case 0:if(e=this.leaf,n=e.workspace,i=e.group,r=!0,!i)return[3,5];o=this.getSyncViewState(),s=n.getGroupLeaves(i),a=0,l=s,u.label=1;case 1:return a<l.length?(c=l[a])===e?[3,4]:t||c.view.getViewType()===this.getViewType()?c.working?(r=!1,[3,4]):[3,2]:[3,4]:[3,5];case 2:return[4,c.openFile(this.file,o)];case 3:u.sent(),u.label=4;case 4:return a++,[3,1];case 5:return[2,r]}}))}))},e.prototype.setState=function(e,n){return D(this,void 0,Promise,(function(){var i,r,o=this;return A(this,(function(s){switch(s.label){case 0:return(i=this.app.vault.getAbstractFileByPath(e.file))instanceof cb?[4,this.loadFile(i)]:[3,2];case 1:return r=s.sent(),[3,4];case 2:return[4,this.loadFile(null)];case 3:r=s.sent(),s.label=4;case 4:return this.file||this.allowNoFile||(n.close=!0),r&&(n.layout=!0,n.history=!0),[4,t.prototype.setState.call(this,e,n)];case 5:return s.sent(),e.sync||!n.layout&&!n.history||(n.done=function(){return o.syncState(!0)}),[2]}}))}))},e.prototype.onClose=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){return this.contentEl.empty(),this.loadFile(null),[2]}))}))},e.prototype.loadFile=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:return(e=this.file)===t?[2,!1]:e?[4,this.onUnloadFile(e)]:[3,2];case 1:o.sent(),o.label=2;case 2:if(this.file=null,!t)return[3,6];o.label=3;case 3:return o.trys.push([3,5,,6]),this.file=t,[4,this.onLoadFile(t)];case 4:return o.sent(),[3,6];case 5:return n=o.sent(),this.file=null,new jb('Failed to load "'+t.path+'". '+n.message),console.error(n),[3,6];case 6:return this.titleEl.setText(this.getDisplayText()),i=this.leaf,(r=i.workspace).activeLeaf===i&&r.requestActiveLeafEvents(),this.leaf.updateHeader(),[2,!0]}}))}))},e.prototype.onLoadFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(t){return[2]}))}))},e.prototype.onUnloadFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(t){return[2]}))}))},e.prototype.onMoreOptionsMenu=function(e){var n=this;t.prototype.onMoreOptionsMenu.call(this,e);var i=this.file;By.isMobile||e.addSeparator(),e.addItem((function(t){return t.setTitle(Ee("interface.menu.delete-file")).setIcon(Ug).onClick((function(){return n.app.fileManager.promptForFileDeletion(i)}))})),i&&this.app.workspace.trigger("file-menu",e,i,"pane-more-options",this.leaf)},e.prototype.onHeaderMenu=function(e){t.prototype.onHeaderMenu.call(this,e);var n=this.file;n&&this.app.workspace.trigger("file-menu",e,n,"sidebar-context-menu",this.leaf)},e.prototype.onRename=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){return t===this.file&&(this.titleEl.setText(t.basename),this.leaf.updateStateResult({history:!1,layout:!0})),[2]}))}))},e.prototype.onDelete=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return t!==this.file?[3,4]:this.allowNoFile?(this.loadFile(null),[3,3]):[3,1];case 1:return[4,this.leaf.open(null)];case 2:e.sent(),e.label=3;case 3:this.app.workspace.requestSaveLayout(),e.label=4;case 4:return[2]}}))}))},e.prototype.canAcceptExtension=function(t){return!1},e}(Vb),_b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.setEphemeralState=function(e){t.prototype.setEphemeralState.call(this,e);var n=e.rename;if(n){var i=void 0;"start"===n?i=!0:"end"===n&&(i=!1),nh(this.titleEl,i)}},e.prototype.onOpen=function(){return D(this,void 0,Promise,(function(){var t;return A(this,(function(e){return(t=this.titleEl).contentEditable="true",t.spellcheck=!1,t.tabIndex=-1,t.addEventListener("blur",this.saveTitle.bind(this)),t.addEventListener("input",this.onTitleChange.bind(this)),[2]}))}))},e.prototype.onTitleChange=function(){this.clearTitleErrorTooltip();var t=this,e=t.file,n=t.app,i=t.titleEl,r=i.getText();(1===i.childNodes.length&&i.firstChild.nodeType===Node.TEXT_NODE||(i.setText(r),nh(i,!1)),r=r.trim(),Bt.test(r))?this.displayError(Ee("plugins.file-explorer.msg-invalid-characters")+It,!1):n.vault.checkForDuplicate(e,r)?this.displayError(Ee("plugins.file-explorer.msg-file-already-exists"),!1):Rt.test(r)&&this.displayError(Ee("plugins.file-explorer.msg-unsafe-characters")+Nt,!1)},e.prototype.saveTitle=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:if(this.clearTitleErrorTooltip(),e=(t=this).file,n=t.titleEl,""===(i=n.getText().trim()))return n.setText(e.basename),this.displayError(Ee("plugins.file-explorer.msg-empty-file-name"),!0),[2];if(r=e.getNewPathAfterRename(i),e.path===r)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.app.fileManager.renameFile(e,r)];case 2:return a.sent(),[3,4];case 3:return(o=a.sent())&&(s=o.message||o.code||o.toString(),this.displayError(s,!0)),[3,4];case 4:return n.setText(e.basename),[2]}}))}))},e.prototype.displayError=function(t,e){Ge(this.titleContainerEl,t,{classes:["mod-wide","mod-error"]}),e&&setTimeout(this.clearTitleErrorTooltip.bind(this),2e3)},e.prototype.clearTitleErrorTooltip=function(){Ke()},e}(Ub),Wb="audio",Gb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=Zg,e}return M(e,t),e.prototype.getViewType=function(){return Wb},e.prototype.canAcceptExtension=function(t){return qt.contains(t)},e.prototype.onLoadFile=function(t){return D(this,void 0,void 0,(function(){var n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return i=(n=this).app,(r=n.contentEl).empty(),o=r.createDiv("audio-container"),[4,e.displayInEl(t,i,o)];case 1:return s.sent(),[2]}}))}))},e.displayInEl=function(t,e,n){return D(this,void 0,Promise,(function(){var i;return A(this,(function(r){return i=e.vault.getResourcePath(t),[2,Pe(n,i)]}))}))},e.VIEW_TYPE=Wb,e}(_b),Kb="image",$b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=tm,e}return M(e,t),e.prototype.getViewType=function(){return Kb},e.prototype.canAcceptExtension=function(t){return Vt.contains(t)},e.prototype.onLoadFile=function(t){return D(this,void 0,void 0,(function(){var n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return i=(n=this).app,(r=n.contentEl).empty(),o=r.createDiv("image-container"),[4,e.displayInEl(t,i,o)];case 1:return s.sent(),[2]}}))}))},e.displayInEl=function(t,e,n){return D(this,void 0,Promise,(function(){var i;return A(this,(function(r){return i=e.vault.getResourcePath(t),[2,Te(n,i)]}))}))},e.VIEW_TYPE=Kb,e}(_b),Yb="undefined"!=typeof navigator&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),Jb="-10000px",Qb=function(){function t(t,e,n){this.facet=e,this.createTooltipView=n,this.input=t.state.facet(e),this.tooltips=this.input.filter((function(t){return t})),this.tooltipViews=this.tooltips.map(n)}return t.prototype.update=function(t){var e=t.state.facet(this.facet),n=e.filter((function(t){return t}));if(e===this.input){for(var i=0,r=this.tooltipViews;i<r.length;i++){(f=r[i]).update&&f.update(t)}return!1}for(var o=[],s=0;s<n.length;s++){var a=n[s],l=-1;if(a){for(var c=0;c<this.tooltips.length;c++){var u=this.tooltips[c];u&&u.create==a.create&&(l=c)}if(l<0)o[s]=this.createTooltipView(a);else{var h=o[s]=this.tooltipViews[l];h.update&&h.update(t)}}}for(var p=0,d=this.tooltipViews;p<d.length;p++){var f=d[p];o.indexOf(f)<0&&f.dom.remove()}return this.input=e,this.tooltips=n,this.tooltipViews=o,!0},t}();function Xb(t){return void 0===t&&(t={}),tw.of(t)}function Zb(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}var tw=Vi.define({combine:function(t){var e,n,i;return{position:Yb?"absolute":(null===(e=t.find((function(t){return t.position})))||void 0===e?void 0:e.position)||"fixed",parent:(null===(n=t.find((function(t){return t.parent})))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=t.find((function(t){return t.tooltipSpace})))||void 0===i?void 0:i.tooltipSpace)||Zb}}}),ew=Ns.fromClass(function(){function t(t){var e=this;this.view=t,this.inView=!0,this.lastTransaction=0,this.intersectionTimeout=-1;var n=t.state.facet(tw);this.position=n.position,this.parent=n.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Qb(t,rw,(function(t){return e.createTooltip(t)})),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((function(t){e.intersectionTimeout<0&&Date.now()>e.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&(e.intersectionTimeout=setTimeout((function(){e.intersectionTimeout=-1,e.maybeMeasure()}),50))}),{threshold:[1]}):null,this.observeIntersection(),this.maybeMeasure()}return t.prototype.createContainer=function(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom},t.prototype.observeIntersection=function(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(var t=0,e=this.manager.tooltipViews;t<e.length;t++){var n=e[t];this.intersectionObserver.observe(n.dom)}}},t.prototype.update=function(t){t.transactions.length&&(this.lastTransaction=Date.now());var e=this.manager.update(t);e&&this.observeIntersection();var n=e||t.geometryChanged,i=t.state.facet(tw);if(i.position!=this.position){this.position=i.position;for(var r=0,o=this.manager.tooltipViews;r<o.length;r++){(l=o[r]).dom.style.position=this.position}n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(var s=0,a=this.manager.tooltipViews;s<a.length;s++){var l=a[s];this.container.appendChild(l.dom)}n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()},t.prototype.createTooltip=function(t){var e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector("cm-tooltip > cm-tooltip-arrow")){var n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Jb,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e},t.prototype.destroy=function(){for(var t,e=0,n=this.manager.tooltipViews;e<n.length;e++){n[e].dom.remove()}null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.intersectionTimeout)},t.prototype.readMeasure=function(){var t=this,e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map((function(e){return t.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((function(t){return t.dom.getBoundingClientRect()})),space:this.view.state.facet(tw).tooltipSpace(this.view)}},t.prototype.writeMeasure=function(t){for(var e=t.editor,n=t.space,i=[],r=0;r<this.manager.tooltips.length;r++){var o=this.manager.tooltips[r],s=this.manager.tooltipViews[r],a=s.dom,l=t.pos[r],c=t.size[r];if(!l||l.bottom<=Math.max(e.top,n.top)||l.top>=Math.min(e.bottom,n.bottom)||l.right<=Math.max(e.left,n.left)||l.left>=Math.min(e.right,n.right))a.style.top=Jb;else{var u=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,h=u?7:0,p=c.right-c.left,d=c.bottom-c.top,f=s.offset||iw,g=this.view.textDirection==_s.LTR,m=c.width>n.right-n.left?g?n.left:n.right-c.width:g?Math.min(l.left-(u?14:0)+f.x,n.right-p):Math.max(n.left,l.left-p+(u?14:0)-f.x),v=!!o.above;!o.strictSide&&(v?l.top-(c.bottom-c.top)-f.y<n.top:l.bottom+(c.bottom-c.top)+f.y>n.bottom)&&v==n.bottom-l.bottom>l.top-n.top&&(v=!v);for(var y=v?l.top-d-h-f.y:l.bottom+h+f.y,b=m+p,w=0,k=i;w<k.length;w++){var C=k[w];C.left<b&&C.right>m&&C.top<y+d&&C.bottom>y&&(y=v?C.top-d-2-h:C.bottom+h+2)}"absolute"==this.position?(a.style.top=y-t.parent.top+"px",a.style.left=m-t.parent.left+"px"):(a.style.top=y+"px",a.style.left=m+"px"),u&&(u.style.left=l.left+(g?f.x:-f.x)-(m+14-7)+"px"),i.push({left:m,top:y,right:b,bottom:y+d}),a.classList.toggle("cm-tooltip-above",v),a.classList.toggle("cm-tooltip-below",!v),s.positioned&&s.positioned()}}},t.prototype.maybeMeasure=function(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(var t=0,e=this.manager.tooltipViews;t<e.length;t++){e[t].dom.style.top=Jb}},t}(),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),nw=Nl.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),iw={x:0,y:0},rw=Vi.define({enables:[ew,nw]}),ow=Vi.define(),sw=function(){function t(t){var e=this;this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Qb(t,ow,(function(t){return e.createHostedView(t)}))}return t.create=function(e){return new t(e)},t.prototype.createHostedView=function(t){var e=t.create(this.view);return e.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(e.dom),this.mounted&&e.mount&&e.mount(this.view),e},t.prototype.mount=function(t){for(var e=0,n=this.manager.tooltipViews;e<n.length;e++){var i=n[e];i.mount&&i.mount(t)}this.mounted=!0},t.prototype.positioned=function(){for(var t=0,e=this.manager.tooltipViews;t<e.length;t++){var n=e[t];n.positioned&&n.positioned()}},t.prototype.update=function(t){this.manager.update(t)},t}(),aw=rw.compute([ow],(function(t){var e=t.facet(ow).filter((function(t){return t}));return 0===e.length?null:{pos:Math.min.apply(Math,e.map((function(t){return t.pos}))),end:Math.max.apply(Math,e.filter((function(t){return null!=t.end})).map((function(t){return t.end}))),create:sw.create,above:e[0].above,arrow:e.some((function(t){return t.arrow}))}})),lw=function(){function t(t,e,n,i,r){this.view=t,this.source=e,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}return t.prototype.update=function(){var t=this;this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((function(){return t.startHover()}),20))},Object.defineProperty(t.prototype,"active",{get:function(){return this.view.state.field(this.field)},enumerable:!1,configurable:!0}),t.prototype.checkHover=function(){if(this.hoverTimeout=-1,!this.active){var t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}},t.prototype.startHover=function(){var t,e=this;clearTimeout(this.restartTimeout);var n=this.lastMove,i=this.view.contentDOM.contains(n.target)?this.view.posAtCoords(n):null;if(null!=i){var r=this.view.coordsAtPos(i);if(!(null==r||n.y<r.top||n.y>r.bottom||n.x<r.left-this.view.defaultCharacterWidth||n.x>r.right+this.view.defaultCharacterWidth)){var o=this.view.bidiSpans(this.view.state.doc.lineAt(i)).find((function(t){return t.from<=i&&t.to>=i})),s=o&&o.dir==_s.RTL?-1:1,a=this.source(this.view,i,n.x<r.left?-s:s);if(null===(t=a)||void 0===t?void 0:t.then){var l=this.pending={pos:i};a.then((function(t){e.pending==l&&(e.pending=null,t&&e.view.dispatch({effects:e.setHover.of(t)}))}),(function(t){return As(e.view.state,t,"hover tooltip")}))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}}},t.prototype.mousemove=function(t){var e;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));var n=this.active;if(n&&!function(t){for(var e=t;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){var i=(n||this.pending).pos,r=null!==(e=null==n?void 0:n.end)&&void 0!==e?e:i;(i==r?this.view.posAtCoords(this.lastMove)==i:function(t,e,n,i,r,o){var s=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);var c=s.getClientRects();s.detach();for(var u=0;u<c.length;u++){var h=c[u];if(Math.max(h.top-r,r-h.bottom,h.left-i,i-h.right)<=o)return!0}return!1}(this.view,i,r,t.clientX,t.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}},t.prototype.mouseleave=function(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})},t.prototype.destroy=function(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)},t}();function cw(t,e){void 0===e&&(e={});var n=gr.define(),i=_i.define({create:function(){return null},update:function(t,i){if(t&&e.hideOnChange&&(i.docChanged||i.selection))return null;for(var r=0,o=i.effects;r<o.length;r++){var s=o[r];if(s.is(n))return s.value;if(s.is(hw))return null}if(t&&i.docChanged){var a=i.changes.mapPos(t.pos,-1,Mi.TrackDel);if(null==a)return null;var l=Object.assign(Object.create(null),t);return l.pos=a,null!=t.end&&(l.end=i.changes.mapPos(t.end)),l}return t},provide:function(t){return ow.from(t)}}),r=e.hoverTime||600;return[i,Ns.define((function(e){return new lw(e,t,i,n,r)})),aw]}function uw(t){return t.facet(ow).some((function(t){return t}))}var hw=gr.define(),pw=hw.of(null);function dw(t){var e;null===(e=t.plugin(ew))||void 0===e||e.maybeMeasure()}var fw=function(){function t(t,e,n){this.state=t,this.pos=e,this.explicit=n,this.abortListeners=[]}return t.prototype.tokenBefore=function(t){for(var e=Rc(this.state).resolveInner(this.pos,-1);e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null},t.prototype.matchBefore=function(t){var e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),i=e.text.slice(n-e.from,this.pos-e.from),r=i.search(kw(t,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}},Object.defineProperty(t.prototype,"aborted",{get:function(){return null==this.abortListeners},enumerable:!1,configurable:!0}),t.prototype.addEventListener=function(t,e){"abort"==t&&this.abortListeners&&this.abortListeners.push(e)},t}();function gw(t){var e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),"["+(n?"\\w":"")+e.replace(/[^\w\s]/g,"\\$&")+"]"}function mw(t){var e=t.map((function(t){return"string"==typeof t?{label:t}:t})),n=e.every((function(t){return/^\w+$/.test(t.label)}))?[/\w*$/,/\w+$/]:function(t){for(var e=Object.create(null),n=Object.create(null),i=0,r=t;i<r.length;i++){var o=r[i].label;e[o[0]]=!0;for(var s=1;s<o.length;s++)n[o[s]]=!0}var a=gw(e)+gw(n)+"*$";return[new RegExp("^"+a),new RegExp(a)]}(e),i=n[0],r=n[1];return function(t){var n=t.matchBefore(r);return n||t.explicit?{from:n?n.from:t.pos,options:e,span:i}:null}}function vw(t,e){return function(n){for(var i=Rc(n.state).resolveInner(n.pos,-1);i;i=i.parent)if(t.indexOf(i.name)>-1)return e(n);return null}}function yw(t,e){return function(n){for(var i=Rc(n.state).resolveInner(n.pos,-1);i;i=i.parent)if(t.indexOf(i.name)>-1)return null;return e(n)}}var bw=function(t,e,n){this.completion=t,this.source=e,this.match=n};function ww(t){return t.selection.main.head}function kw(t,e){var n,i=t.source,r=e&&"^"!=i[0],o="$"!=i[i.length-1];return r||o?new RegExp((r?"^":"")+"(?:"+i+")"+(o?"$":""),null!==(n=t.flags)&&void 0!==n?n:t.ignoreCase?"i":""):t}var Cw=pr.define();function xw(t,e){var n=e.completion.apply||e.completion.label,i=e.source;"string"==typeof n?t.dispatch({changes:{from:i.from,to:i.to,insert:n},selection:{anchor:i.from+n.length},userEvent:"input.complete",annotations:Cw.of(e.completion)}):n(t,e.completion,i.from,i.to)}var Sw=new WeakMap;function Ew(t){if(!Array.isArray(t))return t;var e=Sw.get(t);return e||Sw.set(t,e=mw(t)),e}var Mw=function(){function t(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(var e=0;e<t.length;){var n=hi(t,e),i=di(n);this.chars.push(n);var r=t.slice(e,e+i),o=r.toUpperCase();this.folded.push(hi(o==r?r.toLowerCase():o,0)),e+=i}this.astral=t.length!=this.chars.length}return t.prototype.match=function(t){if(0==this.pattern.length)return[0];if(t.length<this.pattern.length)return null;var e=this,n=e.chars,i=e.folded,r=e.any,o=e.precise,s=e.byWord;if(1==n.length){var a=hi(t,0);return a==n[0]?[0,0,di(a)]:a==i[0]?[-200,0,di(a)]:null}var l=t.indexOf(this.pattern);if(0==l)return[0,0,this.pattern.length];var c=n.length,u=0;if(l<0){for(var h=0,p=Math.min(t.length,200);h<p&&u<c;){(k=hi(t,h))!=n[u]&&k!=i[u]||(r[u++]=h),h+=di(k)}if(u<c)return null}for(var d=0,f=0,g=!1,m=0,v=-1,y=-1,b=/[a-z]/.test(t),w=(h=0,p=Math.min(t.length,200),0);h<p&&f<c;){var k=hi(t,h);l<0&&(d<c&&k==n[d]&&(o[d++]=h),m<c&&(k==n[m]||k==i[m]?(0==m&&(v=h),y=h+1,m++):m=0));var C=void 0,x=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(C=pi(k))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(1==x&&b||0==w&&0!=x)&&(n[f]==k||i[f]==k&&(g=!0))&&(s[f++]=h),w=x,h+=di(k)}return f==c&&0==s[0]?this.result((g?-200:0)-100,s,t):m==c&&0==v?[-200,0,y]:l>-1?[-700,l,l+this.pattern.length]:m==c?[-900,v,y]:f==c?this.result((g?-200:0)-100-700,s,t):2==n.length?null:this.result((r[0]?-700:0)-200-1100,r,t)},t.prototype.result=function(t,e,n){for(var i=[t],r=1,o=0,s=e;o<s.length;o++){var a=s[o],l=a+(this.astral?di(hi(n,a)):1);r>1&&i[r-1]==a?i[r-1]=l:(i[r++]=a,i[r++]=l)}return i},t}(),Lw=Vi.define({combine:function(t){return Dr(t,{activateOnTyping:!0,override:null,maxRenderedOptions:100,defaultKeymap:!0,optionClass:function(){return""},aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:function(t,e){return t&&e},icons:function(t,e){return t&&e},optionClass:function(t,e){return function(n){return function(t,e){return t?e?t+" "+e:t:e}(t(n),e(n))}},addToOptions:function(t,e){return t.concat(e)}})}});function Dw(t,e,n){if(t<=n)return{from:0,to:t};if(e<=t>>1){var i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}var r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}var Aw=function(){function t(t,e){var n=this;this.view=t,this.stateField=e,this.info=null,this.placeInfo={read:function(){return n.measureInfo()},write:function(t){return n.positionInfo(t)},key:this};var i=t.state.field(e),r=i.open,o=r.options,s=r.selected,a=t.state.facet(Lw);this.optionContent=function(t){var e=t.addToOptions.slice();return t.icons&&e.push({render:function(t){var e,n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&(e=n.classList).add.apply(e,t.type.split(/\s+/g).map((function(t){return"cm-completionIcon-"+t}))),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render:function(t,e,n){var i=document.createElement("span");i.className="cm-completionLabel";for(var r=t.label,o=0,s=1;s<n.length;){var a=n[s++],l=n[s++];a>o&&i.appendChild(document.createTextNode(r.slice(o,a)));var c=i.appendChild(document.createElement("span"));c.appendChild(document.createTextNode(r.slice(a,l))),c.className="cm-completionMatchedText",o=l}return o<r.length&&i.appendChild(document.createTextNode(r.slice(o))),i},position:50},{render:function(t){if(!t.detail)return null;var e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),e.sort((function(t,e){return t.position-e.position})).map((function(t){return t.render}))}(a),this.optionClass=a.optionClass,this.range=Dw(o.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(function(e){for(var i=e.target,r=void 0;i&&i!=n.dom;i=i.parentNode)if("LI"==i.nodeName&&(r=/-(\d+)$/.exec(i.id))&&+r[1]<o.length)return xw(t,o[+r[1]]),void e.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(o,i.id,this.range)),this.list.addEventListener("scroll",(function(){n.info&&n.view.requestMeasure(n.placeInfo)}))}return t.prototype.mount=function(){this.updateSel()},t.prototype.update=function(t){t.state.field(this.stateField)!=t.startState.field(this.stateField)&&this.updateSel()},t.prototype.positioned=function(){this.info&&this.view.requestMeasure(this.placeInfo)},t.prototype.updateSel=function(){var t=this,e=this.view.state.field(this.stateField),n=e.open;if((n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=Dw(n.options.length,n.selected,this.view.state.facet(Lw).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",(function(){t.info&&t.view.requestMeasure(t.placeInfo)}))),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);var i=n.options[n.selected];i.completion.info&&(this.info=this.dom.appendChild(function(t,e){var n=document.createElement("div");n.className="cm-tooltip cm-completionInfo";var i=t.completion.info;if("string"==typeof i)n.textContent=i;else{var r=i(t.completion);r.then?r.then((function(t){return n.appendChild(t)}),(function(t){return As(e.state,t,"completion info")})):n.appendChild(r)}return n}(i,this.view)),this.view.requestMeasure(this.placeInfo))}},t.prototype.updateSelectedOption=function(t){for(var e=null,n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)i==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return e&&function(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<n.top?t.scrollTop-=n.top-i.top:i.bottom>n.bottom&&(t.scrollTop+=i.bottom-n.bottom)}(this.list,e),e},t.prototype.measureInfo=function(){var t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;var e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect();if(e.top>innerHeight-10||e.bottom<10)return null;var i=Math.max(0,Math.min(t.getBoundingClientRect().top,innerHeight-n.height))-e.top,r=this.view.textDirection==_s.RTL,o=e.left,s=innerWidth-e.right;return r&&o<Math.min(n.width,s)?r=!1:!r&&s<Math.min(n.width,o)&&(r=!0),{top:i,left:r}},t.prototype.positionInfo=function(t){this.info&&(this.info.style.top=(t?t.top:-1e6)+"px",t&&(this.info.classList.toggle("cm-completionInfo-left",t.left),this.info.classList.toggle("cm-completionInfo-right",!t.left)))},t.prototype.createListBox=function(t,e,n){var i=document.createElement("ul");i.id=e,i.setAttribute("role","listbox");for(var r=n.from;r<n.to;r++){var o=t[r],s=o.completion,a=o.match,l=i.appendChild(document.createElement("li"));l.id=e+"-"+r,l.setAttribute("role","option");var c=this.optionClass(s);c&&(l.className=c);for(var u=0,h=this.optionContent;u<h.length;u++){var p=(0,h[u])(s,this.view.state,a);p&&l.appendChild(p)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&i.classList.add("cm-completionListIncompleteBottom"),i},t}();function Tw(t){return 100*(t.boost||0)+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}var Pw=function(){function t(t,e,n,i,r){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=i,this.selected=r}return t.prototype.setSelected=function(e,n){return e==this.selected||e>=this.options.length?this:new t(this.options,Iw(n,e),this.tooltip,this.timestamp,e)},t.build=function(e,n,i,r,o){var s=function(t,e){for(var n=[],i=0,r=0,o=t;r<o.length;r++){var s=o[r];if(s.hasResult())if(!1===s.result.filter)for(var a=0,l=s.result.options;a<l.length;a++){var c=l[a];n.push(new bw(c,s,[1e9-i++]))}else for(var u=new Mw(e.sliceDoc(s.from,s.to)),h=void 0,p=0,d=s.result.options;p<d.length;p++)c=d[p],(h=u.match(c.label))&&(null!=c.boost&&(h[0]+=c.boost),n.push(new bw(c,s,h)))}n.sort(Bw);for(var f=[],g=null,m=0,v=n.sort(Bw);m<v.length;m++){var y=v[m];if(300==f.length)break;g&&g.label==y.completion.label&&g.detail==y.completion.detail&&g.type==y.completion.type&&g.apply==y.completion.apply?Tw(y.completion)>Tw(g)&&(f[f.length-1]=y):f.push(y),g=y.completion}return f}(e,n);if(!s.length)return null;var a,l=0;if(r&&r.selected)for(var c=r.options[r.selected].completion,u=0;u<s.length&&!l;u++)s[u].completion==c&&(l=u);return new t(s,Iw(i,l),{pos:e.reduce((function(t,e){return e.hasResult()?Math.min(t,e.from):t}),1e8),create:(a=_w,function(t){return new Aw(t,a)}),above:o.aboveCursor},r?r.timestamp:Date.now(),l)},t.prototype.map=function(e){return new t(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)},t}(),Ow=function(){function t(t,e,n){this.active=t,this.id=e,this.open=n}return t.start=function(){return new t(Nw,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)},t.prototype.update=function(e){var n=this,i=e.state,r=i.facet(Lw),o=(r.override||i.languageDataAt("autocomplete",ww(i)).map(Ew)).map((function(t){return(n.active.find((function(e){return e.source==t}))||new zw(t,n.active.some((function(t){return 0!=t.state}))?1:0)).update(e,r)}));o.length==this.active.length&&o.every((function(t,e){return t==n.active[e]}))&&(o=this.active);var s=e.selection||o.some((function(t){return t.hasResult()&&e.changes.touchesRange(t.from,t.to)}))||!function(t,e){if(t==e)return!0;for(var n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;var r=n==t.length,o=i==e.length;if(r||o)return r==o;if(t[n++].result!=e[i++].result)return!1}}(o,this.active)?Pw.build(o,i,this.id,this.open,r):this.open&&e.docChanged?this.open.map(e.changes):this.open;!s&&o.every((function(t){return 1!=t.state}))&&o.some((function(t){return t.hasResult()}))&&(o=o.map((function(t){return t.hasResult()?new zw(t.source,0):t})));for(var a=0,l=e.effects;a<l.length;a++){var c=l[a];c.is(Uw)&&(s=s&&s.setSelected(c.value,this.id))}return o==this.active&&s==this.open?this:new t(o,this.id,s)},Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.open?this.open.tooltip:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attrs",{get:function(){return this.open?this.open.attrs:Fw},enumerable:!1,configurable:!0}),t}();var Fw={"aria-autocomplete":"list","aria-expanded":"false"};function Iw(t,e){return{"aria-autocomplete":"list","aria-expanded":"true","aria-activedescendant":t+"-"+e,"aria-controls":t}}var Nw=[];function Bw(t,e){var n=e.match[0]-t.match[0];return n||t.completion.label.localeCompare(e.completion.label)}function Rw(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}var zw=function(){function t(t,e,n){void 0===n&&(n=-1),this.source=t,this.state=e,this.explicitPos=n}return t.prototype.hasResult=function(){return!1},t.prototype.update=function(e,n){var i=Rw(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new t(r.source,0));for(var o=0,s=e.effects;o<s.length;o++){var a=s[o];if(a.is(Vw))r=new t(r.source,1,a.value?ww(e.state):-1);else if(a.is(qw))r=new t(r.source,0);else if(a.is(jw))for(var l=0,c=a.value;l<c.length;l++){var u=c[l];u.source==r.source&&(r=u)}}return r},t.prototype.handleUserEvent=function(e,n,i){return"delete"!=n&&i.activateOnTyping?new t(this.source,1):this.map(e.changes)},t.prototype.handleChange=function(e){return e.changes.touchesRange(ww(e.startState))?new t(this.source,0):this.map(e.changes)},t.prototype.map=function(e){return e.empty||this.explicitPos<0?this:new t(this.source,this.state,e.mapPos(this.explicitPos))},t}(),Hw=function(t){function e(e,n,i,r,o,s){var a=t.call(this,e,2,n)||this;return a.result=i,a.from=r,a.to=o,a.span=s,a}return M(e,t),e.prototype.hasResult=function(){return!0},e.prototype.handleUserEvent=function(t,n,i){var r=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),s=ww(t.state);if((this.explicitPos>-1?s<r:s<=r)||s>o)return new zw(this.source,"input"==n&&i.activateOnTyping?1:0);var a=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);return this.span&&(r==o||this.span.test(t.state.sliceDoc(r,o)))?new e(this.source,a,this.result,r,o,this.span):new zw(this.source,1,a)},e.prototype.handleChange=function(t){return t.changes.touchesRange(this.from,this.to)?new zw(this.source,0):this.map(t.changes)},e.prototype.map=function(t){return t.empty?this:new e(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1),this.span)},e}(zw),Vw=gr.define(),qw=gr.define(),jw=gr.define({map:function(t,e){return t.map((function(t){return t.map(e)}))}}),Uw=gr.define(),_w=_i.define({create:function(){return Ow.start()},update:function(t,e){return t.update(e)},provide:function(t){return[rw.from(t,(function(t){return t.tooltip})),Nl.contentAttributes.from(t,(function(t){return t.attrs}))]}});function Ww(t,e){return void 0===e&&(e="option"),function(n){var i=n.state.field(_w,!1);if(!i||!i.open||Date.now()-i.open.timestamp<75)return!1;var r,o=1;"page"==e&&(r=n.dom.querySelector(".cm-tooltip-autocomplete"))&&(o=Math.max(2,Math.floor(r.offsetHeight/r.firstChild.offsetHeight)));var s=i.open.selected+o*(t?1:-1),a=i.open.options.length;return s<0?s="page"==e?0:a-1:s>=a&&(s="page"==e?a-1:0),n.dispatch({effects:Uw.of(s)}),!0}}var Gw=function(t){var e=t.state.field(_w,!1);return!(t.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<75)&&(xw(t,e.open.options[e.open.selected]),!0)},Kw=function(t){return!!t.state.field(_w,!1)&&(t.dispatch({effects:Vw.of(!0)}),!0)},$w=function(t){var e=t.state.field(_w,!1);return!(!e||!e.active.some((function(t){return 0!=t.state})))&&(t.dispatch({effects:qw.of(null)}),!0)},Yw=function(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0},Jw=Ns.fromClass(function(){function t(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(var e=0,n=t.state.field(_w).active;e<n.length;e++){var i=n[e];1==i.state&&this.startQuery(i)}}return t.prototype.update=function(t){var e,n=this,i=t.state.field(_w);if(t.selectionSet||t.docChanged||t.startState.field(_w)!=i){for(var r=t.transactions.some((function(t){return(t.selection||t.docChanged)&&!Rw(t)})),o=0;o<this.running.length;o++){var s=this.running[o];if(r||s.updates.length+t.transactions.length>50&&s.time-Date.now()>1e3){for(var a=0,l=s.context.abortListeners;a<l.length;a++){var c=l[a];try{c()}catch(t){As(this.view.state,t)}}s.context.abortListeners=null,this.running.splice(o--,1)}else(e=s.updates).push.apply(e,t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=i.active.some((function(t){return 1==t.state&&!n.running.some((function(e){return e.active.source==t.source}))}))?setTimeout((function(){return n.startUpdate()}),50):-1,0!=this.composing)for(var u=0,h=t.transactions;u<h.length;u++){var p=h[u];"input"==Rw(p)?this.composing=2:2==this.composing&&p.selection&&(this.composing=3)}}},t.prototype.startUpdate=function(){this.debounceUpdate=-1;for(var t=this.view.state.field(_w),e=function(t){1!=t.state||n.running.some((function(e){return e.active.source==t.source}))||n.startQuery(t)},n=this,i=0,r=t.active;i<r.length;i++){e(r[i])}},t.prototype.startQuery=function(t){var e=this,n=this.view.state,i=ww(n),r=new fw(n,i,t.explicitPos==i),o=new Yw(t,r);this.running.push(o),Promise.resolve(t.source(r)).then((function(t){o.context.aborted||(o.done=t||null,e.scheduleAccept())}),(function(t){e.view.dispatch({effects:qw.of(null)}),As(e.view.state,t)}))},t.prototype.scheduleAccept=function(){var t=this;this.running.every((function(t){return void 0!==t.done}))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((function(){return t.accept()}),50))},t.prototype.accept=function(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;for(var e,n=[],i=this.view.state.facet(Lw),r=function(r){var s=o.running[r];if(void 0===s.done)return e=r,"continue";if(o.running.splice(r--,1),s.done){for(var a=new Hw(s.active.source,s.active.explicitPos,s.done,s.done.from,null!==(t=s.done.to)&&void 0!==t?t:ww(s.updates.length?s.updates[0].startState:o.view.state),s.done.span&&!1!==s.done.filter?kw(s.done.span,!0):null),l=0,c=s.updates;l<c.length;l++){var u=c[l];a=a.update(u,i)}if(a.hasResult())return n.push(a),e=r,"continue"}var h=o.view.state.field(_w).active.find((function(t){return t.source==s.active.source}));if(h&&1==h.state)if(null==s.done){a=new zw(s.active.source,0);for(var p=0,d=s.updates;p<d.length;p++){u=d[p];a=a.update(u,i)}1!=a.state&&n.push(a)}else o.startQuery(h);e=r},o=this,s=0;s<this.running.length;s++)r(s),s=e;n.length&&this.view.dispatch({effects:jw.of(n)})},t}(),{eventHandlers:{compositionstart:function(){this.composing=1},compositionend:function(){var t=this;3==this.composing&&setTimeout((function(){return t.view.dispatch({effects:Vw.of(!1)})}),20),this.composing=0}}}),Qw=Nl.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#39e",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Xw=function(t,e,n,i){this.field=t,this.line=e,this.from=n,this.to=i},Zw=function(){function t(t,e,n){this.field=t,this.from=e,this.to=n}return t.prototype.map=function(e){return new t(this.field,e.mapPos(this.from,-1),e.mapPos(this.to,1))},t}(),tk=function(){function t(t,e){this.lines=t,this.fieldPositions=e}return t.prototype.instantiate=function(t,e){for(var n=[],i=[e],r=t.doc.lineAt(e),o=/^\s*/.exec(r.text)[0],s=0,a=this.lines;s<a.length;s++){var l=a[s];if(n.length){for(var c=o,u=/^\t*/.exec(l)[0].length,h=0;h<u;h++)c+=t.facet(Xc);i.push(e+c.length-u),l=c+l.slice(u)}n.push(l),e+=l.length+1}return{text:n,ranges:this.fieldPositions.map((function(t){return new Zw(t.field,i[t.line]+t.from,i[t.line]+t.to)}))}},t.parse=function(e){for(var n,i=[],r=[],o=[],s=0,a=e.split(/\r\n?|\n/);s<a.length;s++){for(var l=a[s];n=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(l);){for(var c=n[1]?+n[1]:null,u=n[2]||n[3]||"",h=-1,p=0;p<i.length;p++)(null!=c?i[p].seq==c:u&&i[p].name==u)&&(h=p);if(h<0){for(p=0;p<i.length&&(null==c||null!=i[p].seq&&i[p].seq<c);)p++;i.splice(p,0,{seq:c,name:u}),h=p;for(var d=0,f=o;d<f.length;d++){var g=f[d];g.field>=h&&g.field++}}o.push(new Xw(h,r.length,n.index,n.index+u.length)),l=l.slice(0,n.index)+u+l.slice(n.index+n[0].length)}r.push(l)}return new t(r,o)},t}(),ek=as.widget({widget:new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.toDOM=function(){var t=document.createElement("span");return t.className="cm-snippetFieldPosition",t},e.prototype.ignoreEvent=function(){return!1},e}(os))}),nk=as.mark({class:"cm-snippetField"}),ik=function(){function t(t,e){this.ranges=t,this.active=e,this.deco=as.set(t.map((function(t){return(t.from==t.to?ek:nk).range(t.from,t.to)})))}return t.prototype.map=function(e){return new t(this.ranges.map((function(t){return t.map(e)})),this.active)},t.prototype.selectionInsideField=function(t){var e=this;return t.ranges.every((function(t){return e.ranges.some((function(n){return n.field==e.active&&n.from<=t.from&&n.to>=t.to}))}))},t}(),rk=gr.define({map:function(t,e){return t&&t.map(e)}}),ok=gr.define(),sk=_i.define({create:function(){return null},update:function(t,e){for(var n=0,i=e.effects;n<i.length;n++){var r=i[n];if(r.is(rk))return r.value;if(r.is(ok)&&t)return new ik(t.ranges,r.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:function(t){return Nl.decorations.from(t,(function(t){return t?t.deco:as.none}))}});function ak(t,e){return Bi.create(t.filter((function(t){return t.field==e})).map((function(t){return Bi.range(t.from,t.to)})))}function lk(t){var e=tk.parse(t);return function(t,n,i,r){var o=e.instantiate(t.state,i),s=o.text,a=o.ranges,l={changes:{from:i,to:r,insert:mi.of(s)}};if(a.length&&(l.selection=ak(a,0)),a.length>1){var c=new ik(a,0),u=l.effects=[rk.of(c)];void 0===t.state.field(sk,!1)&&u.push(gr.appendConfig.of([sk,gk,vk,Qw]))}t.dispatch(t.state.update(l))}}function ck(t){return function(e){var n=e.state,i=e.dispatch,r=n.field(sk,!1);if(!r||t<0&&0==r.active)return!1;var o=r.active+t,s=t>0&&!r.ranges.some((function(e){return e.field==o+t}));return i(n.update({selection:ak(r.ranges,o),effects:rk.of(s?null:new ik(r.ranges,o))})),!0}}var uk=function(t){var e=t.state,n=t.dispatch;return!!e.field(sk,!1)&&(n(e.update({effects:rk.of(null)})),!0)},hk=ck(1),pk=ck(-1),dk=[{key:"Tab",run:hk,shift:pk},{key:"Escape",run:uk}],fk=Vi.define({combine:function(t){return t.length?t[0]:dk}}),gk=Qi.highest(Gl.compute([fk],(function(t){return t.facet(fk)})));function mk(t,e){return Object.assign(Object.assign({},e),{apply:lk(t)})}var vk=Nl.domEventHandlers({mousedown:function(t,e){var n,i=e.state.field(sk,!1);if(!i||null==(n=e.posAtCoords({x:t.clientX,y:t.clientY})))return!1;var r=i.ranges.find((function(t){return t.from<=n&&t.to>=n}));return!(!r||r.field==i.active)&&(e.dispatch({selection:ak(i.ranges,r.field),effects:rk.of(i.ranges.some((function(t){return t.field>r.field}))?new ik(i.ranges,r.field):null)}),!0)}});function yk(t,e){return new RegExp(e(t.source),t.unicode?"u":"")}var bk=Object.create(null);function wk(t,e,n,i,r){for(var o=t.iterLines(),s=0;!o.next().done;){var a=o.value,l=void 0;for(e.lastIndex=0;l=e.exec(a);)if(!i[l[0]]&&s+l.index!=r&&(n.push({type:"text",label:l[0]}),i[l[0]]=!0,n.length>=2e3))return;s+=a.length+1}}function kk(t,e,n,i,r){var o=t.length>=1e3,s=o&&e.get(t);if(s)return s;var a=[],l=Object.create(null);if(t.children)for(var c=0,u=0,h=t.children;u<h.length;u++){var p=h[u];if(p.length>=1e3)for(var d=0,f=kk(p,e,n,i-c,r-c);d<f.length;d++){var g=f[d];l[g.label]||(l[g.label]=!0,a.push(g))}else wk(p,n,a,l,r-c);c+=p.length+1}else wk(t,n,a,l,r);return o&&a.length<2e3&&e.set(t,a),a}var Ck=function(t){var e=t.state.languageDataAt("wordChars",t.pos).join(""),n=function(t){var e=t.replace(/[\\[.+*?(){|^$]/g,"\\$&");try{return new RegExp("[\\p{Alphabetic}\\p{Number}_"+e+"]+","ug")}catch(t){return new RegExp("[w"+e+"]","g")}}(e),i=t.matchBefore(yk(n,(function(t){return t+"$"})));if(!i&&!t.explicit)return null;var r=i?i.from:t.pos;return{from:r,options:kk(t.state.doc,function(t){return bk[t]||(bk[t]=new WeakMap)}(e),n,5e4,r),span:yk(n,(function(t){return"^"+t}))}};function xk(t){return void 0===t&&(t={}),[_w,Lw.of(t),Jw,Ek,Qw]}var Sk=[{key:"Ctrl-Space",run:Kw},{key:"Escape",run:$w},{key:"ArrowDown",run:Ww(!0)},{key:"ArrowUp",run:Ww(!1)},{key:"PageDown",run:Ww(!0,"page")},{key:"PageUp",run:Ww(!1,"page")},{key:"Enter",run:Gw}],Ek=Qi.highest(Gl.computeN([Lw],(function(t){return t.facet(Lw).defaultKeymap?[Sk]:[]})));function Mk(t){var e=t.field(_w,!1);return e&&e.active.some((function(t){return 1==t.state}))?"pending":e&&e.active.some((function(t){return 0!=t.state}))?"active":null}function Lk(t){var e,n=null===(e=t.field(_w,!1))||void 0===e?void 0:e.open;return n?n.options.map((function(t){return t.completion})):[]}function Dk(t){var e,n=null===(e=t.field(_w,!1))||void 0===e?void 0:e.open;return n?n.options[n.selected].completion:null}var Ak={brackets:["(","[","{","'",'"'],before:")]}'\":;>"},Tk=gr.define({map:function(t,e){var n=e.mapPos(t,-1,Mi.TrackAfter);return null==n?void 0:n}}),Pk=gr.define({map:function(t,e){return e.mapPos(t)}}),Ok=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e}(Nr));Ok.startSide=1,Ok.endSide=-1;var Fk=_i.define({create:function(){return Hr.empty},update:function(t,e){if(e.selection){var n=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(i,-1)&&(t=Hr.empty)}t=t.map(e.changes);for(var r=function(e){e.is(Tk)?t=t.update({add:[Ok.range(e.value,e.value+1)]}):e.is(Pk)&&(t=t.update({filter:function(t){return t!=e.value}}))},o=0,s=e.effects;o<s.length;o++){r(s[o])}return t}});function Ik(){return[Nl.inputHandler.of(zk),Fk]}var Nk="()[]{}<>";function Bk(t){for(var e=0;e<Nk.length;e+=2)if(Nk.charCodeAt(e)==t)return Nk.charAt(e+1);return pi(t<128?t:t+1)}function Rk(t,e){return t.languageDataAt("closeBrackets",e)[0]||Ak}function zk(t,e,n,i){if(t.composing)return!1;var r=t.state.selection.main;if(i.length>2||2==i.length&&1==di(hi(i,0))||e!=r.from||n!=r.to)return!1;var o=qk(t.state,i);return!!o&&(t.dispatch(o),!0)}var Hk=function(t){var e=t.state,n=t.dispatch,i=Rk(e,e.selection.main.head).brackets||Ak.brackets,r=null,o=e.changeByRange((function(t){if(t.empty)for(var n=function(t,e){var n=t.sliceString(e-2,e);return di(hi(n,0))==n.length?n:n.slice(1)}(e.doc,t.head),o=0,s=i;o<s.length;o++){var a=s[o];if(a==n&&Uk(e.doc,t.head)==Bk(hi(a,0)))return{changes:{from:t.head-a.length,to:t.head+a.length},range:Bi.cursor(t.head-a.length),userEvent:"delete.backward"}}return{range:r=t}}));return r||n(e.update(o,{scrollIntoView:!0})),!r},Vk=[{key:"Backspace",run:Hk}];function qk(t,e){for(var n=Rk(t,t.selection.main.head),i=n.brackets||Ak.brackets,r=0,o=i;r<o.length;r++){var s=o[r],a=Bk(hi(s,0));if(e==s)return a==s?Gk(t,s,i.indexOf(s+s+s)>-1):_k(t,s,a,n.before||Ak.before);if(e==a&&jk(t,t.selection.main.from))return Wk(t,s,a)}return null}function jk(t,e){var n=!1;return t.field(Fk).between(0,t.doc.length,(function(t){t==e&&(n=!0)})),n}function Uk(t,e){var n=t.sliceString(e,e+2);return n.slice(0,di(hi(n,0)))}function _k(t,e,n,i){var r=null,o=t.changeByRange((function(o){if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Tk.of(o.to+e.length),range:Bi.range(o.anchor+e.length,o.head+e.length)};var s=Uk(t.doc,o.head);return!s||/\s/.test(s)||i.indexOf(s)>-1?{changes:{insert:e+n,from:o.head},effects:Tk.of(o.head+e.length),range:Bi.cursor(o.head+e.length)}:{range:r=o}}));return r?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Wk(t,e,n){var i=null,r=t.selection.ranges.map((function(e){return e.empty&&Uk(t.doc,e.head)==n?Bi.cursor(e.head+n.length):i=e}));return i?null:t.update({selection:Bi.create(r,t.selection.mainIndex),scrollIntoView:!0,effects:t.selection.ranges.map((function(t){var e=t.from;return Pk.of(e)}))})}function Gk(t,e,n){var i=null,r=t.changeByRange((function(r){if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:e,from:r.to}],effects:Tk.of(r.to+e.length),range:Bi.range(r.anchor+e.length,r.head+e.length)};var o=r.head,s=Uk(t.doc,o);if(s==e){if(Kk(t,o))return{changes:{insert:e+e,from:o},effects:Tk.of(o+e.length),range:Bi.cursor(o+e.length)};if(jk(t,o)){var a=n&&t.sliceDoc(o,o+3*e.length)==e+e+e;return{range:Bi.cursor(o+e.length*(a?3:1)),effects:Pk.of(o)}}}else{if(n&&t.sliceDoc(o-2*e.length,o)==e+e&&Kk(t,o-2*e.length))return{changes:{insert:e+e+e+e,from:o},effects:Tk.of(o+e.length),range:Bi.cursor(o+e.length)};if(t.charCategorizer(o)(s)!=Sr.Word){var l=t.sliceDoc(o-1,o);if(l!=e&&t.charCategorizer(o)(l)!=Sr.Word)return{changes:{insert:e+e,from:o},effects:Tk.of(o+e.length),range:Bi.cursor(o+e.length)}}}return{range:i=r}}));return i?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function Kk(t,e){var n=Rc(t).resolveInner(e+1);return n.parent&&n.from==e}var $k=function(t,e,n,i){this.origin=t,this.changes=e,this.effects=n,this.clientID=i},Yk=function(t,e){this.version=t,this.unconfirmed=e},Jk=Vi.define({combine:function(t){var e=Dr(t,{startVersion:0,clientID:null,sharedEffects:function(){return[]}});return null==e.clientID&&(e.clientID=t.length&&t[0].generatedID||""),e}}),Qk=pr.define(),Xk=_i.define({create:function(t){return new Yk(t.facet(Jk).startVersion,[])},update:function(t,e){var n=e.annotation(Qk);if(n)return n;var i=e.startState.facet(Jk),r=i.sharedEffects,o=i.clientID,s=r(e);return s.length||!e.changes.empty?new Yk(t.version,t.unconfirmed.concat(new $k(e,e.changes,s,o))):t}});function Zk(t){return void 0===t&&(t={}),[Xk,Jk.of(Object.assign({generatedID:Math.floor(1e9*Math.random()).toString(36)},t))]}function tC(t,e){var n=t.field(Xk),i=n.version,r=n.unconfirmed,o=t.facet(Jk).clientID;i+=e.length;for(var s=0;s<e.length&&e[s].clientID==o;)s++;if(s&&(r=r.slice(s),e=e.slice(s)),!e.length)return t.update({annotations:[Qk.of(new Yk(i,r))]});for(var a=e[0].changes,l=e[0].effects||[],c=1;c<e.length;c++){var u=e[c];l=gr.mapEffects(l,u.changes),u.effects&&(l=l.concat(u.effects)),a=a.compose(u.changes)}return r.length&&(r=r.map((function(t){var e=t.changes.map(a);return a=a.map(t.changes,!0),new $k(t.origin,e,gr.mapEffects(t.effects,a),o)})),l=gr.mapEffects(l,r.reduce((function(t,e){return t.compose(e.changes)}),Di.empty(r[0].changes.length)))),t.update({changes:a,effects:l,annotations:[mr.addToHistory.of(!1),mr.remote.of(!0),Qk.of(new Yk(i,r))],filter:!1})}function eC(t){return t.field(Xk).unconfirmed}function nC(t){return t.field(Xk).version}function iC(t){return t.facet(Jk).clientID}var rC=Nl.baseTheme({".cm-matchingBracket":{backgroundColor:"#328c8252"},".cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),oC="()[]{}",sC=Vi.define({combine:function(t){return Dr(t,{afterCursor:!0,brackets:oC,maxScanDistance:1e4})}}),aC=as.mark({class:"cm-matchingBracket"}),lC=as.mark({class:"cm-nonmatchingBracket"}),cC=[_i.define({create:function(){return as.none},update:function(t,e){if(!e.docChanged&&!e.selection)return t;for(var n=[],i=e.state.facet(sC),r=0,o=e.state.selection.ranges;r<o.length;r++){var s=o[r];if(s.empty){var a=pC(e.state,s.head,-1,i)||s.head>0&&pC(e.state,s.head-1,1,i)||i.afterCursor&&(pC(e.state,s.head,1,i)||s.head<e.state.doc.length&&pC(e.state,s.head+1,-1,i));if(a){var l=a.matched?aC:lC;n.push(l.range(a.start.from,a.start.to)),a.end&&n.push(l.range(a.end.from,a.end.to))}}}return as.set(n,!0)},provide:function(t){return Nl.decorations.from(t)}}),rC];function uC(t){return void 0===t&&(t={}),[sC.of(t),cC]}function hC(t,e,n){var i=t.prop(e<0?yn.openedBy:yn.closedBy);if(i)return i;if(1==t.name.length){var r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function pC(t,e,n,i){void 0===i&&(i={});for(var r=i.maxScanDistance||1e4,o=i.brackets||oC,s=Rc(t),a=s.resolveInner(e,n),l=a;l;l=l.parent){var c=hC(l.type,n,o);if(c&&l.from<l.to)return dC(t,e,n,l,c,o)}return function(t,e,n,i,r,o,s){var a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;for(var c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),h=0,p=0;!u.next().done&&p<=o;){var d=u.value;n<0&&(p+=d.length);for(var f=e+p*n,g=n>0?0:d.length-1,m=n>0?d.length:-1;g!=m;g+=n){var v=s.indexOf(d[g]);if(!(v<0||i.resolve(f+g,1).type!=r))if(v%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:f+g,to:f+g+1},matched:v>>1==l>>1};h--}}n>0&&(p+=d.length)}return u.done?{start:c,matched:!1}:null}(t,e,n,s,a.type,r,o)}function dC(t,e,n,i,r,o){var s=i.parent,a={from:i.from,to:i.to},l=0,c=null==s?void 0:s.cursor;if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do{if(n<0?c.to<=i.from:c.from>=i.to){if(0==l&&r.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(hC(c.type,n,o))l++;else if(hC(c.type,-n,o)&&0==--l)return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1}}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function fC(t,e){return Bi.create(t.ranges.map(e),t.mainIndex)}function gC(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function mC(t,e){var n=t.state,i=t.dispatch,r=fC(n.selection,e);return!r.eq(n.selection)&&(i(gC(n,r)),!0)}function vC(t,e){return Bi.cursor(e?t.to:t.from)}function yC(t,e){return mC(t,(function(n){return n.empty?t.moveByChar(n,e):vC(n,e)}))}var bC=function(t){return yC(t,t.textDirection!=_s.LTR)},wC=function(t){return yC(t,t.textDirection==_s.LTR)},kC=function(t){return yC(t,!0)},CC=function(t){return yC(t,!1)};function xC(t,e){return mC(t,(function(n){return n.empty?t.moveByGroup(n,e):vC(n,e)}))}var SC=function(t){return xC(t,t.textDirection!=_s.LTR)},EC=function(t){return xC(t,t.textDirection==_s.LTR)},MC=function(t){return xC(t,!0)},LC=function(t){return xC(t,!1)};function DC(t,e,n){var i=t.state.charCategorizer(e.from);return t.moveByChar(e,n,(function(r){var o=Sr.Space,s=e.from,a=!1,l=!1,c=!1,u=function(e){if(a)return!1;s+=n?e.length:-e.length;var r,u=i(e);if(o==Sr.Space&&(o=u),o!=u)return!1;if(o==Sr.Word)if(e.toLowerCase()==e){if(!n&&l)return!1;c=!0}else if(c){if(n)return!1;a=!0}else{if(l&&n&&i(r=t.state.sliceDoc(s,s+1))==Sr.Word&&r.toLowerCase()==r)return!1;l=!0}return!0};return u(r),u}))}function AC(t,e){return mC(t,(function(n){return n.empty?DC(t,n,e):vC(n,e)}))}var TC=function(t){return AC(t,!0)},PC=function(t){return AC(t,!1)};function OC(t,e,n){if(e.type.prop(n))return!0;var i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function FC(t,e,n){for(var i=Rc(t).resolveInner(e.head),r=n?yn.closedBy:yn.openedBy,o=e.head;;){var s=n?i.childAfter(o):i.childBefore(o);if(!s)break;OC(t,s,r)?i=s:o=n?s.to:s.from}var a,l;return l=i.type.prop(r)&&(a=n?pC(t,i.from,1):pC(t,i.to,-1))&&a.matched?n?a.end.to:a.end.from:n?i.to:i.from,Bi.cursor(l,n?-1:1)}var IC=function(t){return mC(t,(function(e){return FC(t.state,e,t.textDirection!=_s.LTR)}))},NC=function(t){return mC(t,(function(e){return FC(t.state,e,t.textDirection==_s.LTR)}))};function BC(t,e){return mC(t,(function(n){if(!n.empty)return vC(n,e);var i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)}))}var RC=function(t){return BC(t,!1)},zC=function(t){return BC(t,!0)};function HC(t,e){return mC(t,(function(n){return n.empty?t.moveVertically(n,e,t.dom.clientHeight):vC(n,e)}))}var VC=function(t){return HC(t,!1)},qC=function(t){return HC(t,!0)};function jC(t,e,n){var i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){var o=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(r=Bi.cursor(i.from+o))}return r}var UC=function(t){return mC(t,(function(e){return jC(t,e,!0)}))},_C=function(t){return mC(t,(function(e){return jC(t,e,!1)}))},WC=function(t){return mC(t,(function(e){return Bi.cursor(t.lineBlockAt(e.head).from,1)}))},GC=function(t){return mC(t,(function(e){return Bi.cursor(t.lineBlockAt(e.head).to,-1)}))};function KC(t,e,n){var i=!1,r=fC(t.selection,(function(e){var r=pC(t,e.head,-1)||pC(t,e.head,1)||e.head>0&&pC(t,e.head-1,1)||e.head<t.doc.length&&pC(t,e.head+1,-1);if(!r||!r.end)return e;i=!0;var o=r.start.from==e.head?r.end.to:r.end.from;return n?Bi.range(e.anchor,o):Bi.cursor(o)}));return!!i&&(e(gC(t,r)),!0)}var $C=function(t){return KC(t.state,t.dispatch,!1)},YC=function(t){return KC(t.state,t.dispatch,!0)};function JC(t,e){var n=fC(t.state.selection,(function(t){var n=e(t);return Bi.range(t.anchor,n.head,n.goalColumn)}));return!n.eq(t.state.selection)&&(t.dispatch(gC(t.state,n)),!0)}function QC(t,e){return JC(t,(function(n){return t.moveByChar(n,e)}))}var XC=function(t){return QC(t,t.textDirection!=_s.LTR)},ZC=function(t){return QC(t,t.textDirection==_s.LTR)},tx=function(t){return QC(t,!0)},ex=function(t){return QC(t,!1)};function nx(t,e){return JC(t,(function(n){return t.moveByGroup(n,e)}))}var ix=function(t){return nx(t,t.textDirection!=_s.LTR)},rx=function(t){return nx(t,t.textDirection==_s.LTR)},ox=function(t){return nx(t,!0)},sx=function(t){return nx(t,!1)};function ax(t,e){return JC(t,(function(n){return DC(t,n,e)}))}var lx=function(t){return ax(t,!0)},cx=function(t){return ax(t,!1)},ux=function(t){return JC(t,(function(e){return FC(t.state,e,t.textDirection!=_s.LTR)}))},hx=function(t){return JC(t,(function(e){return FC(t.state,e,t.textDirection==_s.LTR)}))};function px(t,e){return JC(t,(function(n){return t.moveVertically(n,e)}))}var dx=function(t){return px(t,!1)},fx=function(t){return px(t,!0)};function gx(t,e){return JC(t,(function(n){return t.moveVertically(n,e,t.dom.clientHeight)}))}var mx=function(t){return gx(t,!1)},vx=function(t){return gx(t,!0)},yx=function(t){return JC(t,(function(e){return jC(t,e,!0)}))},bx=function(t){return JC(t,(function(e){return jC(t,e,!1)}))},wx=function(t){return JC(t,(function(e){return Bi.cursor(t.lineBlockAt(e.head).from)}))},kx=function(t){return JC(t,(function(e){return Bi.cursor(t.lineBlockAt(e.head).to)}))},Cx=function(t){var e=t.state;return(0,t.dispatch)(gC(e,{anchor:0})),!0},xx=function(t){var e=t.state;return(0,t.dispatch)(gC(e,{anchor:e.doc.length})),!0},Sx=function(t){var e=t.state;return(0,t.dispatch)(gC(e,{anchor:e.selection.main.anchor,head:0})),!0},Ex=function(t){var e=t.state;return(0,t.dispatch)(gC(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0},Mx=function(t){var e=t.state;return(0,t.dispatch)(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0},Lx=function(t){var e=t.state,n=t.dispatch,i=Ux(e).map((function(t){var n=t.from,i=t.to;return Bi.range(n,Math.min(i+1,e.doc.length))}));return n(e.update({selection:Bi.create(i),userEvent:"select"})),!0},Dx=function(t){var e=t.state,n=t.dispatch,i=fC(e.selection,(function(t){for(var n,i=Rc(e).resolveInner(t.head,1);!(i.from<t.from&&i.to>=t.to||i.to>t.to&&i.from<=t.from)&&(null===(n=i.parent)||void 0===n?void 0:n.parent);)i=i.parent;return Bi.range(i.to,i.from)}));return n(gC(e,i)),!0},Ax=function(t){var e=t.state,n=t.dispatch,i=e.selection,r=null;return i.ranges.length>1?r=Bi.create([i.main]):i.main.empty||(r=Bi.create([Bi.cursor(i.main.head)])),!!r&&(n(gC(e,r)),!0)};function Tx(t,e){var n=t.state,i=t.dispatch;if(n.readOnly)return!1;var r="delete.selection",o=n.changeByRange((function(t){var n=t.from,i=t.to;if(n==i){var o=e(n);o<n?r="delete.backward":o>n&&(r="delete.forward"),n=Math.min(n,o),i=Math.max(i,o)}return n==i?{range:t}:{changes:{from:n,to:i},range:Bi.cursor(n)}}));return!o.changes.empty&&(i(n.update(o,{scrollIntoView:!0,userEvent:r})),!0)}function Px(t,e,n){if(t instanceof Nl)for(var i=0,r=t.pluginField(Os.atomicRanges);i<r.length;i++){r[i].between(e,e,(function(t,i){t<e&&i>e&&(e=n?i:t)}))}return e}var Ox=function(t,e){return Tx(t,(function(n){var i,r,o=t.state,s=o.doc.lineAt(n);if(!e&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(i=s.text.slice(0,n-s.from))){if("\t"==i[i.length-1])return n-1;for(var a=fi(i,o.tabSize)%Zc(o)||Zc(o),l=0;l<a&&" "==i[i.length-1-l];l++)n--;r=n}else(r=si(s.text,n-s.from,e)+s.from)==n&&s.number!=(e?o.doc.lines:1)&&(r+=e?1:-1);return Px(t,r,e)}))},Fx=function(t){return Ox(t,!1)},Ix=function(t){return Ox(t,!0)},Nx=function(t,e){return Tx(t,(function(n){for(var i=n,r=t.state,o=r.doc.lineAt(i),s=r.charCategorizer(i),a=null;;){if(i==(e?o.to:o.from)){i==n&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}var l=si(o.text,i-o.from,e)+o.from,c=o.text.slice(Math.min(i,l)-o.from,Math.max(i,l)-o.from),u=s(c);if(null!=a&&u!=a)break;" "==c&&i==n||(a=u),i=l}return Px(t,i,e)}))},Bx=function(t){return Nx(t,!1)},Rx=function(t){return Nx(t,!0)},zx=function(t){return Tx(t,(function(e){var n=t.lineBlockAt(e).to;return Px(t,e<n?n:Math.min(t.state.doc.length,e+1),!0)}))},Hx=function(t){return Tx(t,(function(e){var n=t.lineBlockAt(e).from;return Px(t,e>n?n:Math.max(0,e-1),!1)}))},Vx=function(t){var e=t.state,n=t.dispatch;if(e.readOnly)return!1;for(var i=[],r=0,o="",s=e.doc.iter();;){if(s.next(),s.lineBreak||s.done){var a=o.search(/\s+$/);if(a>-1&&i.push({from:r-(o.length-a),to:r}),s.done)break;o=""}else o=s.value;r+=s.value.length}return!!i.length&&(n(e.update({changes:i,userEvent:"delete"})),!0)},qx=function(t){var e=t.state,n=t.dispatch;if(e.readOnly)return!1;var i=e.changeByRange((function(t){return{changes:{from:t.from,to:t.to,insert:mi.of(["",""])},range:Bi.cursor(t.from)}}));return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},jx=function(t){var e=t.state,n=t.dispatch;if(e.readOnly)return!1;var i=e.changeByRange((function(t){if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};var n=t.from,i=e.doc.lineAt(n),r=n==i.from?n-1:si(i.text,n-i.from,!1)+i.from,o=n==i.to?n+1:si(i.text,n-i.from,!0)+i.from;return{changes:{from:r,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(r,n))},range:Bi.cursor(o)}}));return!i.changes.empty&&(n(e.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ux(t){for(var e=[],n=-1,i=0,r=t.selection.ranges;i<r.length;i++){var o=r[i],s=t.doc.lineAt(o.from),a=t.doc.lineAt(o.to);if(o.empty||o.to!=a.from||(a=t.doc.lineAt(o.to-1)),n>=s.number){var l=e[e.length-1];l.to=a.to,l.ranges.push(o)}else e.push({from:s.from,to:a.to,ranges:[o]});n=a.number+1}return e}function _x(t,e,n){if(t.readOnly)return!1;for(var i=[],r=[],o=0,s=Ux(t);o<s.length;o++){var a=s[o];if(n?a.to!=t.doc.length:0!=a.from){var l=t.doc.lineAt(n?a.to+1:a.from-1),c=l.length+1;if(n){i.push({from:a.to,to:l.to},{from:a.from,insert:l.text+t.lineBreak});for(var u=0,h=a.ranges;u<h.length;u++){var p=h[u];r.push(Bi.range(Math.min(t.doc.length,p.anchor+c),Math.min(t.doc.length,p.head+c)))}}else{i.push({from:l.from,to:a.from},{from:a.to,insert:t.lineBreak+l.text});for(var d=0,f=a.ranges;d<f.length;d++){p=f[d];r.push(Bi.range(p.anchor-c,p.head-c))}}}}return!!i.length&&(e(t.update({changes:i,scrollIntoView:!0,selection:Bi.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0)}var Wx=function(t){return _x(t.state,t.dispatch,!1)},Gx=function(t){return _x(t.state,t.dispatch,!0)};function Kx(t,e,n){if(t.readOnly)return!1;for(var i=[],r=0,o=Ux(t);r<o.length;r++){var s=o[r];n?i.push({from:s.from,insert:t.doc.slice(s.from,s.to)+t.lineBreak}):i.push({from:s.to,insert:t.lineBreak+t.doc.slice(s.from,s.to)})}return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var $x=function(t){return Kx(t.state,t.dispatch,!1)},Yx=function(t){return Kx(t.state,t.dispatch,!0)},Jx=function(t){if(t.state.readOnly)return!1;var e=t.state,n=e.changes(Ux(e).map((function(t){var n=t.from,i=t.to;return n>0?n--:i<e.doc.length&&i++,{from:n,to:i}}))),i=fC(e.selection,(function(e){return t.moveVertically(e,!0)})).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0},Qx=function(t){var e=t.state;return(0,t.dispatch)(e.update(e.replaceSelection(e.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0};var Xx=tS(!1),Zx=tS(!0);function tS(t){return function(e){var n=e.state,i=e.dispatch;if(n.readOnly)return!1;var r=n.changeByRange((function(e){var i=e.from,r=e.to,o=n.doc.lineAt(i),s=!t&&i==r&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};var n,i=Rc(t).resolveInner(e),r=i.childBefore(e),o=i.childAfter(e);return r&&o&&r.to<=e&&o.from>=e&&(n=r.type.prop(yn.closedBy))&&n.indexOf(o.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(o.from).from?{from:r.to,to:o.from}:null}(n,i);t&&(i=r=(r<=o.to?o:n.doc.lineAt(r)).to);var a=new nu(n,{simulateBreak:i,simulateDoubleBreak:!!s}),l=eu(a,i);for(null==l&&(l=/^\s*/.exec(n.doc.lineAt(i).text)[0].length);r<o.to&&/\s/.test(o.text[r-o.from]);)r++;s?(i=s.from,r=s.to):i>o.from&&i<o.from+100&&!/\S/.test(o.text.slice(0,i))&&(i=o.from);var c=["",tu(n,l)];return s&&c.push(tu(n,a.lineIndent(o.from,-1))),{changes:{from:i,to:r,insert:mi.of(c)},range:Bi.cursor(i+1+c[1].length)}}));return i(n.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function eS(t,e){var n=-1;return t.changeByRange((function(i){for(var r=[],o=i.from;o<=i.to;){var s=t.doc.lineAt(o);s.number>n&&(i.empty||i.to>s.from)&&(e(s,r,i),n=s.number),o=s.to+1}var a=t.changes(r);return{changes:r,range:Bi.range(a.mapPos(i.anchor,1),a.mapPos(i.head,1))}}))}var nS=function(t){var e=t.state,n=t.dispatch;if(e.readOnly)return!1;var i=Object.create(null),r=new nu(e,{overrideIndentation:function(t){var e=i[t];return null==e?-1:e}}),o=eS(e,(function(t,n,o){var s=eu(r,t.from);if(null!=s){/\S/.test(t.text)||(s=0);var a=/^\s*/.exec(t.text)[0],l=tu(e,s);(a!=l||o.from<t.from+a.length)&&(i[t.from]=s,n.push({from:t.from,to:t.from+a.length,insert:l}))}}));return o.changes.empty||n(e.update(o,{userEvent:"indent"})),!0},iS=function(t){var e=t.state,n=t.dispatch;return!e.readOnly&&(n(e.update(eS(e,(function(t,n){n.push({from:t.from,insert:e.facet(Xc)})})),{userEvent:"input.indent"})),!0)},rS=function(t){var e=t.state,n=t.dispatch;return!e.readOnly&&(n(e.update(eS(e,(function(t,n){var i=/^\s*/.exec(t.text)[0];if(i){for(var r=fi(i,e.tabSize),o=0,s=tu(e,Math.max(0,r-Zc(e)));o<i.length&&o<s.length&&i.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+i.length,insert:s.slice(o)})}})),{userEvent:"delete.dedent"})),!0)},oS=function(t){var e=t.state,n=t.dispatch;return e.selection.ranges.some((function(t){return!t.empty}))?iS({state:e,dispatch:n}):(n(e.update(e.replaceSelection("\t"),{scrollIntoView:!0,userEvent:"input"})),!0)},sS=[{key:"Ctrl-b",run:bC,shift:XC,preventDefault:!0},{key:"Ctrl-f",run:wC,shift:ZC},{key:"Ctrl-p",run:RC,shift:dx},{key:"Ctrl-n",run:zC,shift:fx},{key:"Ctrl-a",run:WC,shift:wx},{key:"Ctrl-e",run:GC,shift:kx},{key:"Ctrl-d",run:Ix},{key:"Ctrl-h",run:Fx},{key:"Ctrl-k",run:zx},{key:"Ctrl-Alt-h",run:Bx},{key:"Ctrl-o",run:qx},{key:"Ctrl-t",run:jx},{key:"Ctrl-v",run:qC},{key:"Alt-v",run:VC}],aS=[{key:"ArrowLeft",run:bC,shift:XC,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:SC,shift:ix},{mac:"Cmd-ArrowLeft",run:_C,shift:bx},{key:"ArrowRight",run:wC,shift:ZC,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:EC,shift:rx},{mac:"Cmd-ArrowRight",run:UC,shift:yx},{key:"ArrowUp",run:RC,shift:dx,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Cx,shift:Sx},{mac:"Ctrl-ArrowUp",run:VC,shift:mx},{key:"ArrowDown",run:zC,shift:fx,preventDefault:!0},{mac:"Cmd-ArrowDown",run:xx,shift:Ex},{mac:"Ctrl-ArrowDown",run:qC,shift:vx},{key:"PageUp",run:VC,shift:mx},{key:"PageDown",run:qC,shift:vx},{key:"Home",run:_C,shift:bx},{key:"Mod-Home",run:Cx,shift:Sx},{key:"End",run:UC,shift:yx},{key:"Mod-End",run:xx,shift:Ex},{key:"Enter",run:Xx},{key:"Mod-a",run:Mx},{key:"Backspace",run:Fx,shift:Fx},{key:"Delete",run:Ix},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Bx},{key:"Mod-Delete",mac:"Alt-Delete",run:Rx},{mac:"Mod-Backspace",run:Hx},{mac:"Mod-Delete",run:zx}].concat(sS.map((function(t){return{mac:t.key,run:t.run,shift:t.shift}}))),lS=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:IC,shift:ux},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:NC,shift:hx},{key:"Alt-ArrowUp",run:Wx},{key:"Shift-Alt-ArrowUp",run:$x},{key:"Alt-ArrowDown",run:Gx},{key:"Shift-Alt-ArrowDown",run:Yx},{key:"Escape",run:Ax},{key:"Mod-Enter",run:Zx},{key:"Alt-l",mac:"Ctrl-l",run:Lx},{key:"Mod-i",run:Dx,preventDefault:!0},{key:"Mod-[",run:rS},{key:"Mod-]",run:iS},{key:"Mod-Alt-\\",run:nS},{key:"Shift-Mod-k",run:Jx},{key:"Shift-Mod-\\",run:$C}].concat(aS),cS={key:"Tab",run:iS,shift:rS},uS=function(t){var e=bS(t.state);return e.line?pS(t):!!e.block&&gS(t)};function hS(t,e){return function(n){var i=n.state,r=n.dispatch,o=t(e,i.selection.ranges,i);return!!o&&(r(i.update(o)),!0)}}var pS=hS(kS,0),dS=hS(kS,1),fS=hS(kS,2),gS=hS(wS,0),mS=hS(wS,1),vS=hS(wS,2),yS=[{key:"Mod-/",run:uS},{key:"Alt-A",run:gS}];function bS(t,e){void 0===e&&(e=t.selection.main.head);var n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}function wS(t,e,n){var i=e.map((function(t){return bS(n,t.from).block}));if(!i.every((function(t){return t})))return null;var r=e.map((function(t,e){return function(t,e,n,i){var r,o,s=e.open,a=e.close,l=t.sliceDoc(n-50,n),c=t.sliceDoc(i,i+50),u=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(c)[0].length,p=l.length-u;if(l.slice(p-s.length,p)==s&&c.slice(h,h+a.length)==a)return{open:{pos:n-u,margin:u&&1},close:{pos:i+h,margin:h&&1}};i-n<=100?r=o=t.sliceDoc(n,i):(r=t.sliceDoc(n,n+50),o=t.sliceDoc(i-50,i));var d=/^\s*/.exec(r)[0].length,f=/\s*$/.exec(o)[0].length,g=o.length-f-a.length;return r.slice(d,d+s.length)==s&&o.slice(g,g+a.length)==a?{open:{pos:n+d+s.length,margin:/\s/.test(r.charAt(d+s.length))?1:0},close:{pos:i-f-a.length,margin:/\s/.test(o.charAt(g-1))?1:0}}:null}(n,i[e],t.from,t.to)}));if(2!=t&&!r.every((function(t){return t}))){var o=0;return n.changeByRange((function(t){var e=i[o++],n=e.open,s=e.close;if(r[o])return{range:t};var a=n.length+1;return{changes:[{from:t.from,insert:n+" "},{from:t.to,insert:" "+s}],range:Bi.range(t.anchor+a,t.head+a)}}))}if(1!=t&&r.some((function(t){return t}))){for(var s=[],a=0,l=void 0;a<r.length;a++)if(l=r[a]){var c=i[a],u=l.open,h=l.close;s.push({from:u.pos-c.open.length,to:u.pos+u.margin},{from:h.pos-h.margin,to:h.pos+c.close.length})}return{changes:s}}return null}function kS(t,e,n){for(var i=[],r=-1,o=0,s=e;o<s.length;o++){for(var a=s[o],l=a.from,c=a.to,u=i.length,h=1e9,p=l;p<=c;){if((w=n.doc.lineAt(p)).from>r&&(l==c||c>w.from)){if(r=w.from,!(k=bS(n,p).line))continue;var d=(C=/^\s*/.exec(w.text)[0].length)==w.length,f=w.text.slice(C,C+k.length)==k?C:-1;C<w.text.length&&C<h&&(h=C),i.push({line:w,comment:f,token:k,indent:C,empty:d,single:!1})}p=w.to+1}if(h<1e9)for(var g=u;g<i.length;g++)i[g].indent<i[g].line.text.length&&(i[g].indent=h);i.length==u+1&&(i[u].single=!0)}if(2!=t&&i.some((function(t){return t.comment<0&&(!t.empty||t.single)}))){for(var m=[],v=0,y=i;v<y.length;v++){var b=y[v],w=b.line,k=b.token,C=b.indent;d=b.empty;!b.single&&d||m.push({from:w.from+C,insert:k+" "})}var x=n.changes(m);return{changes:x,selection:n.selection.map(x,1)}}if(1!=t&&i.some((function(t){return t.comment>=0}))){m=[];for(var S=0,E=i;S<E.length;S++){var M=E[S];w=M.line,f=M.comment,k=M.token;if(f>=0){c=(l=w.from+f)+k.length;" "==w.text[c-w.from]&&c++,m.push({from:l,to:c})}}return{changes:m}}return null}var CS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.compare=function(t){return this==t||this.constructor==t.constructor&&this.eq(t)},e.prototype.eq=function(t){return!1},e.prototype.destroy=function(t){},e}(Nr);CS.prototype.elementClass="",CS.prototype.toDOM=void 0,CS.prototype.mapMode=Mi.TrackBefore,CS.prototype.startSide=CS.prototype.endSide=-1,CS.prototype.point=!0;var xS=Vi.define(),SS={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return Hr.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ES=Vi.define();function MS(t){return[AS(),ES.of(Object.assign(Object.assign({},SS),t))]}var LS=Nl.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}}),DS=Vi.define({combine:function(t){return t.some((function(t){return t}))}});function AS(t){var e=[TS,LS];return t&&!1===t.fixed&&e.push(DS.of(!0)),e}var TS=Ns.fromClass(function(){function t(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(ES).map((function(e){return new NS(t,e)}));for(var e=0,n=this.gutters;e<n.length;e++){var i=n[e];this.dom.appendChild(i.dom)}this.fixed=!t.state.facet(DS),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}return t.prototype.update=function(t){if(this.updateGutters(t)){var e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(DS)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport},t.prototype.syncGutters=function(t){var e=this,n=this.dom.nextSibling;t&&this.dom.remove();for(var i=Hr.iter(this.view.state.facet(xS),this.view.viewport.from),r=[],o=this.gutters.map((function(t){return new IS(t,e.view.viewport,-e.view.documentPadding.top)})),s=0,a=this.view.viewportLineBlocks;s<a.length;s++){var l=a[s],c=void 0;if(Array.isArray(l.type))for(var u=0,h=l.type;u<h.length;u++){var p=h[u];if(p.type==ss.Text){c=p;break}}else c=l.type==ss.Text?l:void 0;if(c){r.length&&(r=[]),OS(i,r,l.from);for(var d=0,f=o;d<f.length;d++){f[d].line(this.view,c,r)}}}for(var g=0,m=o;g<m.length;g++){m[g].finish()}t&&this.view.scrollDOM.insertBefore(this.dom,n)},t.prototype.updateGutters=function(t){var e=t.startState.facet(ES),n=t.state.facet(ES),i=t.docChanged||t.heightChanged||t.viewportChanged||!Hr.eq(t.startState.facet(xS),t.state.facet(xS),t.view.viewport.from,t.view.viewport.to);if(e==n)for(var r=0,o=this.gutters;r<o.length;r++){o[r].update(t)&&(i=!0)}else{i=!0;for(var s=[],a=0,l=n;a<l.length;a++){var c=l[a],u=e.indexOf(c);u<0?s.push(new NS(this.view,c)):(this.gutters[u].update(t),s.push(this.gutters[u]))}for(var h=0,p=this.gutters;h<p.length;h++){(g=p[h]).dom.remove(),s.indexOf(g)<0&&g.destroy()}for(var d=0,f=s;d<f.length;d++){var g=f[d];this.dom.appendChild(g.dom)}this.gutters=s}return i},t.prototype.destroy=function(){for(var t=0,e=this.gutters;t<e.length;t++){e[t].destroy()}this.dom.remove()},t}(),{provide:Os.scrollMargins.from((function(t){return 0!=t.gutters.length&&t.fixed?t.view.textDirection==_s.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null}))});function PS(t){return Array.isArray(t)?t:[t]}function OS(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}function FS(t){if(t instanceof HTMLElement&&t.classList.contains("cm-line"))return t;if(t.nodeType===Node.TEXT_NODE&&"​"!==t.textContent)return t.parentNode;if(t.firstChild)return FS(t.firstChild);if(t.nextSibling)return FS(t.nextSibling);for(var e=t.parentNode;e;){if(e.classList.contains("cm-line"))return e;if(e.nextSibling)return FS(e.nextSibling);e=e.parentNode}return null}var IS=function(){function t(t,e,n){this.gutter=t,this.height=n,this.localMarkers=[],this.i=0,this.cursor=Hr.iter(t.markers,e.from)}return t.prototype.line=function(t,e,n){this.localMarkers.length&&(this.localMarkers=[]),OS(this.cursor,this.localMarkers,e.from);var i=n.length?this.localMarkers.concat(n):this.localMarkers,r=this.gutter.config.lineMarker(t,e,i);r&&i.unshift(r);var o=this.gutter;if(0!=i.length||o.config.renderEmptyElements){var s,a=e.top-this.height;if(this.i==o.elements.length){var l=new BS(t,e.height,a,i);o.elements.push(l),o.dom.appendChild(l.dom),s=l.dom}else{var c=o.elements[this.i];c.update(t,e.height,a,i),s=c.dom}t.requestMeasure({read:function(t){var n="",i="";try{for(var r=t.domAtPos(e.from),o=r.node.childNodes[r.offset],s=o;s.parentNode&&s.parentNode!==t.contentDOM;)s=s.parentNode;n=getComputedStyle(s).paddingTop;var a=FS(o);i=getComputedStyle(a).lineHeight}catch(t){}return{paddingTop:n,lineHeight:i}},write:function(t){var e=t.paddingTop,n=t.lineHeight;s.style.paddingTop=e,s.style.lineHeight=n}}),this.height=e.bottom,this.i++}},t.prototype.finish=function(){for(var t=this.gutter;t.elements.length>this.i;){var e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}},t}(),NS=function(){function t(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");var n=function(n){i.dom.addEventListener(n,(function(i){var r=t.lineBlockAtHeight(i.clientY-t.documentTop);e.domEventHandlers[n](t,r,i)&&i.preventDefault()}))},i=this;for(var r in e.domEventHandlers)n(r);this.markers=PS(e.markers(t)),e.initialSpacer&&(this.spacer=new BS(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}return t.prototype.update=function(t){var e=this.markers;if(this.markers=PS(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],t);n!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[n])}var i=t.view.viewport;return!Hr.eq(this.markers,e,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)},t.prototype.destroy=function(){for(var t=0,e=this.elements;t<e.length;t++){e[t].destroy()}},t}(),BS=function(){function t(t,e,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.update(t,e,n,i)}return t.prototype.update=function(t,e,n,i){this.height!=e&&(this.dom.style.height=(this.height=e)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}(this.markers,i)||this.setMarkers(t,i)},t.prototype.setMarkers=function(t,e){for(var n="cm-gutterElement",i=this.dom.firstChild,r=0,o=0;;){var s=o,a=r<e.length?e[r++]:null,l=!1;if(a){var c=a.elementClass;c&&(n+=" "+c);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){s=u,l=!0;break}}else s=this.markers.length;for(;o<s;){var h=this.markers[o++];if(h.toDOM){h.destroy(i);var p=i.nextSibling;i.remove(),i=p}}if(!a)break;a.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(a.toDOM(t),i)),l&&o++}this.dom.className=n,this.markers=e},t.prototype.destroy=function(){this.setMarkers(null,[])},t}();var RS=Vi.define(),zS=Vi.define({combine:function(t){return Dr(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(t,e){var n=Object.assign({},t),i=function(t){var i=n[t],r=e[t];n[t]=i?function(t,e,n){return i(t,e,n)||r(t,e,n)}:r};for(var r in e)i(r);return n}})}}),HS=function(t){function e(e){var n=t.call(this)||this;return n.number=e,n}return M(e,t),e.prototype.eq=function(t){return this.number==t.number},e.prototype.toDOM=function(){return document.createTextNode(this.number)},e}(CS);function VS(t,e){return t.state.facet(zS).formatNumber(e,t.state)}var qS=ES.compute([zS],(function(t){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(t){return t.state.facet(RS)},lineMarker:function(t,e,n){return n.some((function(t){return t.toDOM}))?null:new HS(VS(t,t.state.doc.lineAt(e.from).number))},lineMarkerChange:function(t){return t.startState.facet(zS)!=t.state.facet(zS)},initialSpacer:function(t){return new HS(VS(t,US(t.state.doc.lines)))},updateSpacer:function(t,e){var n=VS(e.view,US(e.view.state.doc.lines));return n==t.number?t:new HS(n)},domEventHandlers:t.facet(zS).domEventHandlers}}));function jS(t){return void 0===t&&(t={}),[zS.of(t),AS(),qS]}function US(t){for(var e=9;e<t;)e=10*e+9;return e}var _S=new(function(t){function e(){var e=t.apply(this,arguments)||this;return e.elementClass="cm-activeLineGutter",e}return M(e,t),e}(CS)),WS=xS.compute(["selection"],(function(t){for(var e=[],n=-1,i=0,r=t.selection.ranges;i<r.length;i++){var o=r[i];if(o.empty){var s=t.doc.lineAt(o.head).from;s>n&&(n=s,e.push(_S.range(s)))}}return Hr.of(e)}));function GS(){return WS}function KS(t,e){var n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}var $S=gr.define({map:KS}),YS=gr.define({map:KS});function JS(t){for(var e=[],n=function(n){if(e.some((function(t){return t.from<=n&&t.to>=n})))return"continue";e.push(t.lineBlockAt(n))},i=0,r=t.state.selection.ranges;i<r.length;i++){n(r[i].head)}return e}var QS=_i.define({create:function(){return as.none},update:function(t,e){t=t.map(e.changes);for(var n=function(e){e.is($S)&&!function(t,e,n){var i=!1;return t.between(e,e,(function(t,r){t==e&&r==n&&(i=!0)})),i}(t,e.value.from,e.value.to)?t=t.update({add:[uE.range(e.value.from,e.value.to)]}):e.is(YS)&&(t=t.update({filter:function(t,n){return e.value.from!=t||e.value.to!=n},filterFrom:e.value.from,filterTo:e.value.to}))},i=0,r=e.effects;i<r.length;i++){n(r[i])}if(e.selection){var o=!1,s=e.selection.main.head;t.between(s,s,(function(t,e){t<s&&e>s&&(o=!0)})),o&&(t=t.update({filterFrom:s,filterTo:s,filter:function(t,e){return e<=s||t>=s}}))}return t},provide:function(t){return Nl.decorations.from(t)}});function XS(t){return t.field(QS,!1)||Hr.empty}function ZS(t,e,n){var i,r=null;return null===(i=t.field(QS,!1))||void 0===i||i.between(e,n,(function(t,e){(!r||r.from>t)&&(r={from:t,to:e})})),r}function tE(t,e){return t.field(QS,!1)?e:e.concat(gr.appendConfig.of(cE()))}var eE=function(t){for(var e=0,n=JS(t);e<n.length;e++){var i=n[e],r=vu(t.state,i.from,i.to);if(r)return t.dispatch({effects:tE(t.state,[$S.of(r),iE(t,r)])}),!0}return!1},nE=function(t){if(!t.state.field(QS,!1))return!1;for(var e=[],n=0,i=JS(t);n<i.length;n++){var r=i[n],o=ZS(t.state,r.from,r.to);o&&e.push(YS.of(o),iE(t,o,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function iE(t,e,n){void 0===n&&(n=!0);var i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Nl.announce.of(t.state.phrase(n?"Folded lines":"Unfolded lines")+" "+i+" "+t.state.phrase("to")+" "+r+".")}var rE=function(t){for(var e=t.state,n=[],i=0;i<e.doc.length;){var r=t.lineBlockAt(i),o=vu(e,r.from,r.to);o&&n.push($S.of(o)),i=(o?t.lineBlockAt(o.to):r).to+1}return n.length&&t.dispatch({effects:tE(t.state,n)}),!!n.length},oE=function(t){var e=t.state.field(QS,!1);if(!e||!e.size)return!1;var n=[];return e.between(0,t.state.doc.length,(function(t,e){n.push(YS.of({from:t,to:e}))})),t.dispatch({effects:n}),!0},sE=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:eE},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:nE},{key:"Ctrl-Alt-[",run:rE},{key:"Ctrl-Alt-]",run:oE}],aE={placeholderDOM:null,placeholderText:"…"},lE=Vi.define({combine:function(t){return Dr(t,aE)}});function cE(t){var e=[QS,fE];return t&&e.push(lE.of(t)),e}var uE=as.replace({widget:new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.ignoreEvents=function(){return!1},e.prototype.toDOM=function(t){var e=t.state,n=e.facet(lE),i=function(e){var n=t.lineBlockAt(t.posAtDOM(e.target)),i=ZS(t.state,n.from,n.to);i&&t.dispatch({effects:YS.of(i)}),e.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,i);var r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r},e}(os))}),hE={openText:"⌄",closedText:"›",markerDOM:null},pE=function(t){function e(e,n){var i=t.call(this)||this;return i.config=e,i.open=n,i}return M(e,t),e.prototype.eq=function(t){return this.config==t.config&&this.open==t.open},e.prototype.toDOM=function(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);var e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e},e}(CS);function dE(t){void 0===t&&(t={});var e=Object.assign(Object.assign({},hE),t),n=new pE(e,!0),i=new pE(e,!1),r=Ns.fromClass(function(){function t(t){this.from=t.viewport.from,this.markers=this.buildMarkers(t)}return t.prototype.update=function(t){(t.docChanged||t.viewportChanged||t.startState.facet($c)!=t.state.facet($c)||t.startState.field(QS,!1)!=t.state.field(QS,!1))&&(this.markers=this.buildMarkers(t.view))},t.prototype.buildMarkers=function(t){for(var e=new Vr,r=0,o=t.viewportLineBlocks;r<o.length;r++){var s=o[r],a=ZS(t.state,s.from,s.to)?i:vu(t.state,s.from,s.to)?n:null;a&&e.add(s.from,s.from,a)}return e.finish()},t}());return[r,MS({class:"cm-foldGutter",markers:function(t){var e;return(null===(e=t.plugin(r))||void 0===e?void 0:e.markers)||Hr.empty},initialSpacer:function(){return new pE(e,!1)},domEventHandlers:{click:function(t,e){var n=ZS(t.state,e.from,e.to);if(n)return t.dispatch({effects:YS.of(n)}),!0;var i=vu(t.state,e.from,e.to);return!!i&&(t.dispatch({effects:$S.of(i)}),!0)}}}),cE()]}var fE=Nl.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),gE=0,mE=function(){function t(t,e,n){this.set=t,this.base=e,this.modified=n,this.id=gE++}return t.define=function(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");var n=new t([],null,[]);if(n.set.push(n),e)for(var i=0,r=e.set;i<r.length;i++){var o=r[i];n.set.push(o)}return n},t.defineModifier=function(){var t=new yE;return function(e){return e.modified.indexOf(t)>-1?e:yE.get(e.base||e,e.modified.concat(t).sort((function(t,e){return t.id-e.id})))}},t}(),vE=0,yE=function(){function t(){this.instances=[],this.id=vE++}return t.get=function(e,n){if(!n.length)return e;var i=n[0].instances.find((function(t){return t.base==e&&(i=n,r=t.modified,i.length==r.length&&i.every((function(t,e){return t==r[e]})));var i,r}));if(i)return i;for(var r=[],o=new mE(r,e,n),s=0,a=n;s<a.length;s++){a[s].instances.push(o)}for(var l=bE(n),c=0,u=e.set;c<u.length;c++)for(var h=u[c],p=0,d=l;p<d.length;p++){var f=d[p];r.push(t.get(h,f))}return o},t}();function bE(t){for(var e=[t],n=0;n<t.length;n++)for(var i=0,r=bE(t.slice(0,n).concat(t.slice(n+1)));i<r.length;i++){var o=r[i];e.push(o)}return e}function wE(t){var e=Object.create(null);for(var n in t){var i=t[n];Array.isArray(i)||(i=[i]);for(var r=0,o=n.split(" ");r<o.length;r++){var s=o[r];if(s){for(var a=[],l=2,c=s,u=0;;){if("..."==c&&u>0&&u+3==s.length){l=1;break}var h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!h)throw new RangeError("Invalid path: "+s);if(a.push("*"==h[0]?null:'"'==h[0][0]?JSON.parse(h[0]):h[0]),(u+=h[0].length)==s.length)break;var p=s[u++];if(u==s.length&&"!"==p){l=0;break}if("/"!=p)throw new RangeError("Invalid path: "+s);c=s.slice(u)}var d=a.length-1,f=a[d];if(!f)throw new RangeError("Invalid path: "+s);var g=new EE(i,l,d>0?a.slice(0,d):null);e[f]=g.sort(e[f])}}}return kE.add(e)}var kE=new yn,CE=Vi.define({combine:function(t){return t.length?ME.combinedMatch(t):null}}),xE=Vi.define({combine:function(t){return t.length?t[0].match:null}});function SE(t){return t.facet(CE)||t.facet(xE)}var EE=function(){function t(t,e,n,i){this.tags=t,this.mode=e,this.context=n,this.next=i}return t.prototype.sort=function(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)},Object.defineProperty(t.prototype,"depth",{get:function(){return this.context?this.context.length:0},enumerable:!1,configurable:!0}),t}(),ME=function(){function t(t,e){var n;function i(t){var e=Or.newName();return(n||(n=Object.create(null)))["."+e]=t,e}this.map=Object.create(null),this.all="string"==typeof e.all?e.all:e.all?i(e.all):null;for(var r=0,o=t;r<o.length;r++){var s=o[r],a=(s.class||i(Object.assign({},s,{tag:null})))+(this.all?" "+this.all:""),l=s.tag;if(Array.isArray(l))for(var c=0,u=l;c<u.length;c++){var h=u[c];this.map[h.id]=a}else this.map[l.id]=a}this.module=n?new Or(n):null,this.scope=e.scope||null,this.match=this.match.bind(this);var p=[AE];this.module&&p.push(Nl.styleModule.of(this.module)),this.extension=p.concat(CE.of(this)),this.fallback=p.concat(xE.of(this))}return t.prototype.match=function(t,e){if(this.scope&&e!=this.scope)return null;for(var n=0,i=t.set;n<i.length;n++){var r=i[n],o=this.map[r.id];if(void 0!==o)return r!=t&&(this.map[t.id]=o),o}return this.map[t.id]=this.all},t.combinedMatch=function(t){if(1==t.length)return t[0].match;var e=t.some((function(t){return t.scope}))?void 0:Object.create(null);return function(n,i){var r=e&&e[n.id];if(void 0!==r)return r;for(var o=null,s=0,a=t;s<a.length;s++){var l=a[s].match(n,i);l&&(o=o?o+" "+l:l)}return e&&(e[n.id]=o),o}},t.define=function(e,n){return new t(e,n||{})},t.get=function(t,e,n){var i=SE(t);return i&&i(e,n||kn.none)},t}();function LE(t,e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length),OE(t,i,r,e,n)}var DE=function(){function t(t){this.markCache=Object.create(null),this.tree=Rc(t.state),this.decorations=this.buildDeco(t,SE(t.state))}return t.prototype.update=function(t){var e=Rc(t.state),n=SE(t.state),i=n!=t.startState.facet(CE);e.length<t.view.viewport.to&&!i&&e.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||i)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n))},t.prototype.buildDeco=function(t,e){var n=this;if(!e||!this.tree.length)return as.none;for(var i=new Vr,r=0,o=t.visibleRanges;r<o.length;r++){var s=o[r],a=s.from,l=s.to;OE(this.tree,a,l,e,(function(t,e,r){i.add(t,e,n.markCache[r]||(n.markCache[r]=as.mark({class:r})))}))}return i.finish()},t}(),AE=Qi.extend(Ns.fromClass(DE,{decorations:function(t){return t.decorations}})),TE=[""],PE=function(){function t(t,e,n){this.at=t,this.style=e,this.span=n,this.class=""}return t.prototype.startSpan=function(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)},t.prototype.flush=function(t){t>this.at&&this.class&&this.span(this.at,t,this.class)},t.prototype.highlightRange=function(t,e,n,i,r,o){var s=t.type,a=t.from,l=t.to;if(!(a>=n||l<=e)){TE[r]=s.name,s.isTop&&(o=s);for(var c=i,u=s.prop(kE),h=!1;u;){if(!u.context||FE(u.context,TE,r)){for(var p=0,d=u.tags;p<d.length;p++){var f=d[p],g=this.style(f,o);g&&(c&&(c+=" "),c+=g,1==u.mode?i+=(i?" ":"")+g:0==u.mode&&(h=!0))}break}u=u.next}if(this.startSpan(t.from,c),!h){var m=t.tree&&t.tree.prop(yn.mounted);if(m&&m.overlay){for(var v=t.node.enter(m.overlay[0].from+a,1),y=t.firstChild(),b=0,w=a;;b++){var k=b<m.overlay.length?m.overlay[b]:null,C=k?k.from+a:l,x=Math.max(e,w),S=Math.min(n,C);if(x<S&&y)for(;t.from<S&&(this.highlightRange(t,x,S,i,r+1,o),this.startSpan(Math.min(n,t.to),c),!(t.to>=C)&&t.nextSibling()););if(!k||C>n)break;(w=k.to+a)>e&&(this.highlightRange(v.cursor,Math.max(e,k.from+a),Math.min(n,w),i,r,m.tree.type),this.startSpan(w,c))}y&&t.parent()}else if(t.firstChild()){do{if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,i,r+1,o),this.startSpan(Math.min(n,t.to),c)}}while(t.nextSibling());t.parent()}}}},t}();function OE(t,e,n,i,r){var o=new PE(e,i,r);o.highlightRange(t.cursor(),e,n,"",0,t.type),o.flush(n)}function FE(t,e,n){if(t.length>n-1)return!1;for(var i=n-1,r=t.length-1;r>=0;r--,i--){var o=t[r];if(o&&o!=e[i])return!1}return!0}var IE=mE.define,NE=IE(),BE=IE(),RE=IE(BE),zE=IE(BE),HE=IE(),VE=IE(HE),qE=IE(HE),jE=IE(),UE=IE(jE),_E=IE(),WE=IE(),GE=IE(),KE=IE(GE),$E=IE(),YE={comment:NE,lineComment:IE(NE),blockComment:IE(NE),docComment:IE(NE),name:BE,variableName:IE(BE),typeName:RE,tagName:IE(RE),propertyName:zE,attributeName:IE(zE),className:IE(BE),labelName:IE(BE),namespace:IE(BE),macroName:IE(BE),literal:HE,string:VE,docString:IE(VE),character:IE(VE),attributeValue:IE(VE),number:qE,integer:IE(qE),float:IE(qE),bool:IE(HE),regexp:IE(HE),escape:IE(HE),color:IE(HE),url:IE(HE),keyword:_E,self:IE(_E),null:IE(_E),atom:IE(_E),unit:IE(_E),modifier:IE(_E),operatorKeyword:IE(_E),controlKeyword:IE(_E),definitionKeyword:IE(_E),operator:WE,derefOperator:IE(WE),arithmeticOperator:IE(WE),logicOperator:IE(WE),bitwiseOperator:IE(WE),compareOperator:IE(WE),updateOperator:IE(WE),definitionOperator:IE(WE),typeOperator:IE(WE),controlOperator:IE(WE),punctuation:GE,separator:IE(GE),bracket:KE,angleBracket:IE(KE),squareBracket:IE(KE),paren:IE(KE),brace:IE(KE),content:jE,heading:UE,heading1:IE(UE),heading2:IE(UE),heading3:IE(UE),heading4:IE(UE),heading5:IE(UE),heading6:IE(UE),contentSeparator:IE(jE),list:IE(jE),quote:IE(jE),emphasis:IE(jE),strong:IE(jE),link:IE(jE),monospace:IE(jE),strikethrough:IE(jE),inserted:IE(),deleted:IE(),changed:IE(),invalid:IE(),meta:$E,documentMeta:IE($E),annotation:IE($E),processingInstruction:IE($E),definition:mE.defineModifier(),constant:mE.defineModifier(),function:mE.defineModifier(),standard:mE.defineModifier(),local:mE.defineModifier(),special:mE.defineModifier()},JE=ME.define([{tag:YE.link,textDecoration:"underline"},{tag:YE.heading,textDecoration:"underline",fontWeight:"bold"},{tag:YE.emphasis,fontStyle:"italic"},{tag:YE.strong,fontWeight:"bold"},{tag:YE.strikethrough,textDecoration:"line-through"},{tag:YE.keyword,color:"#708"},{tag:[YE.atom,YE.bool,YE.url,YE.contentSeparator,YE.labelName],color:"#219"},{tag:[YE.literal,YE.inserted],color:"#164"},{tag:[YE.string,YE.deleted],color:"#a11"},{tag:[YE.regexp,YE.escape,YE.special(YE.string)],color:"#e40"},{tag:YE.definition(YE.variableName),color:"#00f"},{tag:YE.local(YE.variableName),color:"#30a"},{tag:[YE.typeName,YE.namespace],color:"#085"},{tag:YE.className,color:"#167"},{tag:[YE.special(YE.variableName),YE.macroName],color:"#256"},{tag:YE.definition(YE.propertyName),color:"#00c"},{tag:YE.comment,color:"#940"},{tag:YE.meta,color:"#7a757a"},{tag:YE.invalid,color:"#f00"}]),QE=ME.define([{tag:YE.link,class:"cmt-link"},{tag:YE.heading,class:"cmt-heading"},{tag:YE.emphasis,class:"cmt-emphasis"},{tag:YE.strong,class:"cmt-strong"},{tag:YE.keyword,class:"cmt-keyword"},{tag:YE.atom,class:"cmt-atom"},{tag:YE.bool,class:"cmt-bool"},{tag:YE.url,class:"cmt-url"},{tag:YE.labelName,class:"cmt-labelName"},{tag:YE.inserted,class:"cmt-inserted"},{tag:YE.deleted,class:"cmt-deleted"},{tag:YE.literal,class:"cmt-literal"},{tag:YE.string,class:"cmt-string"},{tag:YE.number,class:"cmt-number"},{tag:[YE.regexp,YE.escape,YE.special(YE.string)],class:"cmt-string2"},{tag:YE.variableName,class:"cmt-variableName"},{tag:YE.local(YE.variableName),class:"cmt-variableName cmt-local"},{tag:YE.definition(YE.variableName),class:"cmt-variableName cmt-definition"},{tag:YE.special(YE.variableName),class:"cmt-variableName2"},{tag:YE.typeName,class:"cmt-typeName"},{tag:YE.namespace,class:"cmt-namespace"},{tag:YE.macroName,class:"cmt-macroName"},{tag:YE.propertyName,class:"cmt-propertyName"},{tag:YE.operator,class:"cmt-operator"},{tag:YE.comment,class:"cmt-comment"},{tag:YE.meta,class:"cmt-meta"},{tag:YE.invalid,class:"cmt-invalid"},{tag:YE.punctuation,class:"cmt-punctuation"}]),XE=pr.define(),ZE=pr.define(),tM=Vi.define(),eM=Vi.define({combine:function(t){return Dr(t,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}}),nM=_i.define({create:function(){return kM.empty},update:function(t,e){var n=e.state.facet(eM),i=e.annotation(XE);if(i){var r=dM.fromTransaction(e),o=i.side,s=0==o?t.undone:t.done;return s=r?fM(s,s.length,n.minDepth,r):vM(s,e.startState.selection),new kM(0==o?i.rest:s,0==o?s:i.rest)}var a=e.annotation(ZE);if("full"!=a&&"before"!=a||(t=t.isolate()),!1===e.annotation(mr.addToHistory))return e.changes.empty?t:t.addMapping(e.changes.desc);var l=dM.fromTransaction(e),c=e.annotation(mr.time),u=e.annotation(mr.userEvent);return l?t=t.addChanges(l,c,u,n.newGroupDelay,n.minDepth):e.selection&&(t=t.addSelection(e.startState.selection,c,u,n.newGroupDelay)),"full"!=a&&"after"!=a||(t=t.isolate()),t},toJSON:function(t){return{done:t.done.map((function(t){return t.toJSON()})),undone:t.undone.map((function(t){return t.toJSON()}))}},fromJSON:function(t){return new kM(t.done.map(dM.fromJSON),t.undone.map(dM.fromJSON))}});function iM(t){return void 0===t&&(t={}),[nM,eM.of(t),Nl.domEventHandlers({beforeinput:function(t,e){var n="historyUndo"==t.inputType?sM:"historyRedo"==t.inputType?aM:null;return!!n&&(t.preventDefault(),n(e))}})]}var rM=nM;function oM(t,e){return function(n){var i=n.state,r=n.dispatch;if(!e&&i.readOnly)return!1;var o=i.field(nM,!1);if(!o)return!1;var s=o.pop(t,i,e);return!!s&&(r(s),!0)}}var sM=oM(0,!1),aM=oM(1,!1),lM=oM(0,!0),cM=oM(1,!0);function uM(t){return function(e){var n=e.field(nM,!1);if(!n)return 0;var i=0==t?n.done:n.undone;return i.length-(i.length&&!i[0].changes?1:0)}}var hM=uM(0),pM=uM(1),dM=function(){function t(t,e,n,i,r){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}return t.prototype.setSelAfter=function(e){return new t(this.changes,this.effects,this.mapped,this.startSelection,e)},t.prototype.toJSON=function(){var t,e,n;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((function(t){return t.toJSON()}))}},t.fromJSON=function(e){return new t(e.changes&&Di.fromJSON(e.changes),[],e.mapped&&Li.fromJSON(e.mapped),e.startSelection&&Bi.fromJSON(e.startSelection),e.selectionsAfter.map(Bi.fromJSON))},t.fromTransaction=function(e){for(var n=mM,i=0,r=e.startState.facet(tM);i<r.length;i++){var o=(0,r[i])(e);o.length&&(n=n.concat(o))}return!n.length&&e.changes.empty?null:new t(e.changes.invert(e.startState.doc),n,void 0,e.startState.selection,mM)},t.selection=function(e){return new t(void 0,mM,void 0,void 0,e)},t}();function fM(t,e,n,i){var r=e+1>n+20?e-n-1:0,o=t.slice(r,e);return o.push(i),o}function gM(t,e){return t.length?e.length?t.concat(e):t:e}var mM=[];function vM(t,e){if(t.length){var n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),fM(t,t.length-1,1e9,n.setSelAfter(i)))}return[dM.selection([e])]}function yM(t){var e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function bM(t,e){if(!t.length)return t;for(var n=t.length,i=mM;n;){var r=wM(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){var o=t.slice(0,n);return o[n-1]=r,o}e=r.mapped,n--,i=r.selectionsAfter}return i.length?[dM.selection(i)]:mM}function wM(t,e,n){var i=gM(t.selectionsAfter.length?t.selectionsAfter.map((function(t){return t.map(e)})):mM,n);if(!t.changes)return dM.selection(i);var r=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new dM(r,gr.mapEffects(t.effects,e),s,t.startSelection.map(o),i)}var kM=function(){function t(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=void 0),this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=i}return t.prototype.isolate=function(){return this.prevTime?new t(this.done,this.undone):this},t.prototype.addChanges=function(e,n,i,r,o){var s=this.done,a=s[s.length-1];return new t(s=a&&a.changes&&!a.changes.empty&&e.changes&&(!a.selectionsAfter.length&&n-this.prevTime<r&&function(t,e){var n=[],i=!1;return t.iterChangedRanges((function(t,e){return n.push(t,e)})),e.iterChangedRanges((function(t,e,r,o){for(var s=0;s<n.length;){var a=n[s++],l=n[s++];o>=a&&r<=l&&(i=!0)}})),i}(a.changes,e.changes)||"input.type.compose"==i)?fM(s,s.length-1,o,new dM(e.changes.compose(a.changes),gM(e.effects,a.effects),a.mapped,a.startSelection,mM)):fM(s,s.length,o,e),mM,n,i)},t.prototype.addSelection=function(e,n,i,r){var o,s,a=this.done.length?this.done[this.done.length-1].selectionsAfter:mM;return a.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&(o=a[a.length-1],s=e,o.ranges.length==s.ranges.length&&0===o.ranges.filter((function(t,e){return t.empty!=s.ranges[e].empty})).length)?this:new t(vM(this.done,e),this.undone,n,i)},t.prototype.addMapping=function(e){return new t(bM(this.done,e),bM(this.undone,e),this.prevTime,this.prevUserEvent)},t.prototype.pop=function(t,e,n){var i=0==t?this.done:this.undone;if(0==i.length)return null;var r=i[i.length-1];if(n&&r.selectionsAfter.length)return e.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:XE.of({side:t,rest:yM(i)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){var o=1==i.length?mM:i.slice(0,i.length-1);return r.mapped&&(o=bM(o,r.mapped)),e.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:XE.of({side:t,rest:o}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null},t}();kM.empty=new kM(mM,mM);var CM=[{key:"Mod-z",run:sM,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:aM,preventDefault:!0},{key:"Mod-u",run:lM,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:cM,preventDefault:!0}],xM=Vi.define({combine:function(t){for(var e,n,i=0,r=t;i<r.length;i++){var o=r[i];e=e||o.topContainer,n=n||o.bottomContainer}return{topContainer:e,bottomContainer:n}}});function SM(t){return t?[xM.of(t)]:[]}function EM(t,e){var n=t.plugin(MM),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}var MM=Ns.fromClass(function(){function t(t){this.input=t.state.facet(TM),this.specs=this.input.filter((function(t){return t})),this.panels=this.specs.map((function(e){return e(t)}));var e=t.state.facet(xM);this.top=new LM(t,!0,e.topContainer),this.bottom=new LM(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((function(t){return t.top}))),this.bottom.sync(this.panels.filter((function(t){return!t.top})));for(var n=0,i=this.panels;n<i.length;n++){var r=i[n];r.dom.classList.add("cm-panel"),r.mount&&r.mount()}}return t.prototype.update=function(t){var e=t.state.facet(xM);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new LM(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new LM(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();var n=t.state.facet(TM);if(n!=this.input){for(var i=n.filter((function(t){return t})),r=[],o=[],s=[],a=[],l=0,c=i;l<c.length;l++){var u=c[l],h=this.specs.indexOf(u),p=void 0;h<0?(p=u(t.view),a.push(p)):(p=this.panels[h]).update&&p.update(t),r.push(p),(p.top?o:s).push(p)}this.specs=i,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(var d=0,f=a;d<f.length;d++){(v=f[d]).dom.classList.add("cm-panel"),v.mount&&v.mount()}}else for(var g=0,m=this.panels;g<m.length;g++){var v;(v=m[g]).update&&v.update(t)}},t.prototype.destroy=function(){this.top.sync([]),this.bottom.sync([])},t}(),{provide:Os.scrollMargins.from((function(t){return{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}}))}),LM=function(){function t(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}return t.prototype.sync=function(t){for(var e=0,n=this.panels;e<n.length;e++){var i=n[e];i.destroy&&t.indexOf(i)<0&&i.destroy()}this.panels=t,this.syncDOM()},t.prototype.syncDOM=function(){if(0!=this.panels.length){if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";var t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}for(var e=this.dom.firstChild,n=0,i=this.panels;n<i.length;n++){var r=i[n];if(r.dom.parentNode==this.dom){for(;e!=r.dom;)e=DM(e);e=e.nextSibling}else this.dom.insertBefore(r.dom,e)}for(;e;)e=DM(e)}else this.dom&&(this.dom.remove(),this.dom=void 0)},t.prototype.scrollMargin=function(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)},t.prototype.syncClasses=function(){if(this.container&&this.classes!=this.view.themeClasses){for(var t=0,e=this.classes.split(" ");t<e.length;t++){(r=e[t])&&this.container.classList.remove(r)}for(var n=0,i=(this.classes=this.view.themeClasses).split(" ");n<i.length;n++){var r;(r=i[n])&&this.container.classList.add(r)}}},t}();function DM(t){var e=t.nextSibling;return t.remove(),e}var AM=Nl.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),TM=Vi.define({enables:[MM,AM]});function PM(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];"string"==typeof r?t.setAttribute(i,r):null!=r&&(t[i]=r)}e++}for(;e<arguments.length;e++)OM(t,arguments[e]);return t}function OM(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)OM(t,e[n])}}var FM=function(t,e,n){this.from=t,this.to=e,this.diagnostic=n},IM=function(){function t(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}return t.init=function(e,n,i){var r=as.set(e.map((function(t){return t.from==t.to||t.from==t.to-1&&i.doc.lineAt(t.from).to==t.from?as.widget({widget:new nL(t),diagnostic:t}).range(t.from):as.mark({attributes:{class:"cm-lintRange cm-lintRange-"+t.severity},diagnostic:t}).range(t.from,t.to)})),!0);return new t(r,n,NM(r))},t}();function NM(t,e,n){void 0===e&&(e=null),void 0===n&&(n=0);var i=null;return t.between(n,1e9,(function(t,n,r){var o=r.spec;if(!e||o.diagnostic==e)return i=new FM(t,n,o.diagnostic),!1})),i}function BM(t,e){return t.field(qM,!1)?e:e.concat(gr.appendConfig.of([qM,Nl.decorations.compute([qM],(function(t){var e=t.field(qM),n=e.selected,i=e.panel;return n&&i&&n.from!=n.to?as.set([UM.range(n.from,n.to)]):as.none})),cw(_M),aL]))}function RM(t,e){return{effects:BM(t,[zM.of(e)])}}var zM=gr.define(),HM=gr.define(),VM=gr.define(),qM=_i.define({create:function(){return new IM(as.none,null,null)},update:function(t,e){if(e.docChanged){var n=t.diagnostics.map(e.changes),i=null;if(t.selected){var r=e.changes.mapPos(t.selected.from,1);i=NM(n,t.selected.diagnostic,r)||NM(n,null,r)}t=new IM(n,t.panel,i)}for(var o=0,s=e.effects;o<s.length;o++){var a=s[o];a.is(zM)?t=IM.init(a.value,t.panel,e.state):a.is(HM)?t=new IM(t.diagnostics,a.value?rL.open:null,t.selected):a.is(VM)&&(t=new IM(t.diagnostics,t.panel,a.value))}return t},provide:function(t){return[TM.from(t,(function(t){return t.panel})),Nl.decorations.from(t,(function(t){return t.diagnostics}))]}});function jM(t){var e=t.field(qM,!1);return e?e.diagnostics.size:0}var UM=as.mark({class:"cm-lintRange cm-lintRange-active"});function _M(t,e,n){var i=t.state.field(qM).diagnostics,r=[],o=2e8,s=0;return i.between(e-(n<0?1:0),e+(n>0?1:0),(function(t,i,a){var l=a.spec;e>=t&&e<=i&&(t==i||(e>t||n>0)&&(e<i||n<0))&&(r.push(l.diagnostic),o=Math.min(t,o),s=Math.max(i,s))})),r.length?{pos:o,end:s,above:t.state.doc.lineAt(o).to<s,create:function(){return{dom:WM(t,r)}}}:null}function WM(t,e){return PM("ul",{class:"cm-tooltip-lint"},e.map((function(e){return eL(t,e,!1)})))}var GM=function(t){var e=t.state.field(qM,!1);e&&e.panel||t.dispatch({effects:BM(t.state,[HM.of(!0)])});var n=EM(t,rL.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},KM=function(t){var e=t.state.field(qM,!1);return!(!e||!e.panel)&&(t.dispatch({effects:HM.of(!1)}),!0)},$M=function(t){var e=t.state.field(qM,!1);if(!e)return!1;var n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!(!i.value&&(!(i=e.diagnostics.iter(0)).value||i.from==n.from&&i.to==n.to))&&(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},YM=[{key:"Mod-Shift-m",run:GM},{key:"F8",run:$M}],JM=Ns.fromClass(function(){function t(t){this.view=t,this.timeout=-1,this.set=!0;var e=t.state.facet(QM).delay;this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}return t.prototype.run=function(){var t=this,e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;var n=this.view.state,i=n.facet(QM).sources;Promise.all(i.map((function(e){return Promise.resolve(e(t.view))}))).then((function(e){var i,r,o=e.reduce((function(t,e){return t.concat(e)}));t.view.state.doc==n.doc&&(o.length||(null===(r=null===(i=t.view.state.field(qM,!1))||void 0===i?void 0:i.diagnostics)||void 0===r?void 0:r.size))&&t.view.dispatch(RM(t.view.state,o))}),(function(e){As(t.view.state,e)}))}},t.prototype.update=function(t){var e=t.state.facet(QM);(t.docChanged||e!=t.startState.facet(QM))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))},t.prototype.force=function(){this.set&&(this.lintTime=Date.now(),this.run())},t.prototype.destroy=function(){clearTimeout(this.timeout)},t}()),QM=Vi.define({combine:function(t){return{sources:t.map((function(t){return t.source})),delay:t.length?Math.max.apply(Math,t.map((function(t){return t.delay}))):750}},enables:JM});function XM(t,e){var n;return void 0===e&&(e={}),QM.of({source:t,delay:null!==(n=e.delay)&&void 0!==n?n:750})}function ZM(t){var e=t.plugin(JM);e&&e.force()}function tL(t){var e=[];if(t)t:for(var n=0,i=t;n<i.length;n++){for(var r=i[n].name,o=function(t){var n=r[t];if(/[a-zA-Z]/.test(n)&&!e.some((function(t){return t.toLowerCase()==n.toLowerCase()})))return e.push(n),"continue-actions"},s=0;s<r.length;s++){switch(o(s)){case"continue-actions":continue t}}e.push("")}return e}function eL(t,e,n){var i,r=n?tL(e.actions):[];return PM("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},PM("span",{class:"cm-diagnosticText"},e.message),null===(i=e.actions)||void 0===i?void 0:i.map((function(n,i){var o=function(i){i.preventDefault();var r=NM(t.state.field(qM).diagnostics,e);r&&n.apply(t,r.from,r.to)},s=n.name,a=r[i]?s.indexOf(r[i]):-1,l=a<0?s:[s.slice(0,a),PM("u",s.slice(a,a+1)),s.slice(a+1)];return PM("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":" Action: "+s+(a<0?"":' (access key "'+r[i]+')"')+"."},l)})),e.source&&PM("div",{class:"cm-diagnosticSource"},e.source))}var nL=function(t){function e(e){var n=t.call(this)||this;return n.diagnostic=e,n}return M(e,t),e.prototype.eq=function(t){return t.diagnostic==this.diagnostic},e.prototype.toDOM=function(){return PM("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})},e}(os),iL=function(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=eL(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")},rL=function(){function t(t){var e=this;this.view=t,this.items=[];this.list=PM("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:function(n){if(27==n.keyCode)KM(e.view),e.view.focus();else if(38==n.keyCode||33==n.keyCode)e.moveSelection((e.selectedIndex-1+e.items.length)%e.items.length);else if(40==n.keyCode||34==n.keyCode)e.moveSelection((e.selectedIndex+1)%e.items.length);else if(36==n.keyCode)e.moveSelection(0);else if(35==n.keyCode)e.moveSelection(e.items.length-1);else if(13==n.keyCode)e.view.focus();else{if(!(n.keyCode>=65&&n.keyCode<=90&&e.selectedIndex>=0))return;for(var i=e.items[e.selectedIndex].diagnostic,r=tL(i.actions),o=0;o<r.length;o++)if(r[o].toUpperCase().charCodeAt(0)==n.keyCode){var s=NM(e.view.state.field(qM).diagnostics,i);s&&i.actions[o].apply(t,s.from,s.to)}}n.preventDefault()},onclick:function(t){for(var n=0;n<e.items.length;n++)e.items[n].dom.contains(t.target)&&e.moveSelection(n)}}),this.dom=PM("div",{class:"cm-panel-lint"},this.list,PM("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:function(){return KM(e.view)}},"×")),this.update()}return Object.defineProperty(t.prototype,"selectedIndex",{get:function(){var t=this.view.state.field(qM).selected;if(!t)return-1;for(var e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1},enumerable:!1,configurable:!0}),t.prototype.update=function(){var t=this,e=this.view.state.field(qM),n=e.diagnostics,i=e.selected,r=0,o=!1,s=null;for(n.between(0,this.view.state.doc.length,(function(e,n,a){for(var l,c=a.spec,u=-1,h=r;h<t.items.length;h++)if(t.items[h].diagnostic==c.diagnostic){u=h;break}u<0?(l=new iL(t.view,c.diagnostic),t.items.splice(r,0,l),o=!0):(l=t.items[u],u>r&&(t.items.splice(r,u-r),o=!0)),i&&l.diagnostic==i.diagnostic?l.dom.hasAttribute("aria-selected")||(l.dom.setAttribute("aria-selected","true"),s=l):l.dom.hasAttribute("aria-selected")&&l.dom.removeAttribute("aria-selected"),r++}));r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();0==this.items.length&&(this.items.push(new iL(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:function(){return{sel:s.dom.getBoundingClientRect(),panel:t.list.getBoundingClientRect()}},write:function(e){var n=e.sel,i=e.panel;n.top<i.top?t.list.scrollTop-=i.top-n.top:n.bottom>i.bottom&&(t.list.scrollTop+=n.bottom-i.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()},t.prototype.sync=function(){var t=this.list.firstChild;function e(){var e=t;t=e.nextSibling,e.remove()}for(var n=0,i=this.items;n<i.length;n++){var r=i[n];if(r.dom.parentNode==this.list){for(;t!=r.dom;)e();t=r.dom.nextSibling}else this.list.insertBefore(r.dom,t)}for(;t;)e()},t.prototype.moveSelection=function(t){if(!(this.selectedIndex<0)){var e=NM(this.view.state.field(qM).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:VM.of(e)})}},t.open=function(e){return new t(e)},t}();function oL(t,e){return void 0===e&&(e='viewBox="0 0 40 40"'),'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '+e+">"+encodeURIComponent(t)+"</svg>')"}function sL(t){return oL('<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="'+t+'" fill="none" stroke-width=".7"/>','width="6" height="3"')}var aL=Nl.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:sL("#d11")},".cm-lintRange-warning":{backgroundImage:sL("orange")},".cm-lintRange-info":{backgroundImage:sL("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),lL=function(t){function e(e){var n=t.call(this)||this;return n.diagnostics=e,n.severity=e.reduce((function(t,e){var n=e.severity;return"error"==n||"warning"==n&&"info"==t?n:t}),"info"),n}return M(e,t),e.prototype.toDOM=function(t){var e=this,n=document.createElement("div");return n.className="cm-lint-marker cm-lint-marker-"+this.severity,n.onmouseover=function(){return function(t,e,n){function i(){var i=t.visualLineAtHeight(e.getBoundingClientRect().top+5),r=t.coordsAtPos(i.from),o=e.getBoundingClientRect();r&&t.dispatch({effects:pL.of({pos:i.from,above:!1,create:function(){return{dom:WM(t,n),offset:{x:o.left-r.left,y:0}}}})}),e.onmouseout=e.onmousemove=null,function(t,e){var n=function(i){var r=e.getBoundingClientRect();if(!(i.clientX>r.left-10&&i.clientX<r.right+10&&i.clientY>r.top-10&&i.clientY<r.bottom+10)){for(var o=i.target;o;o=o.parentNode)if(1==o.nodeType&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),t.state.field(dL)&&t.dispatch({effects:pL.of(null)})}};window.addEventListener("mousemove",n)}(t,e)}var r=setTimeout(i,600);e.onmouseout=function(){clearTimeout(r),e.onmouseout=e.onmousemove=null},e.onmousemove=function(){clearTimeout(r),r=setTimeout(i,600)}}(t,n,e.diagnostics)},n},e}(CS);function cL(t,e){for(var n=Object.create(null),i=0,r=e;i<r.length;i++){var o=r[i];(n[(a=t.lineAt(o.from)).from]||(n[a.from]=[])).push(o)}var s=[];for(var a in n)s.push(new lL(n[a]).range(+a));return Hr.of(s,!0)}var uL=MS({class:"cm-gutter-lint",markers:function(t){return t.state.field(hL)}}),hL=_i.define({create:function(){return Hr.empty},update:function(t,e){t=t.map(e.changes);for(var n=0,i=e.effects;n<i.length;n++){var r=i[n];r.is(zM)&&(t=cL(e.state.doc,r.value))}return t}}),pL=gr.define(),dL=_i.define({create:function(){return null},update:function(t,e){return t&&e.docChanged&&(t=Object.assign(Object.assign({},t),{pos:e.changes.mapPos(t.pos)})),e.effects.reduce((function(t,e){return e.is(pL)?e.value:t}),t)},provide:function(t){return rw.from(t)}}),fL=Nl.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:"0 .2em",display:"flex",flexDirection:"column",justifyContent:"center"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:oL('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:oL('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:oL('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}});function gL(){return[hL,uL,fL,dL]}var mL=2e3;function vL(t,e){var n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),r=n-i.from,o=r>mL?-1:r==i.length?function(t,e){var n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):fi(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:o,off:r}}function yL(t,e){var n=vL(t,e),i=t.state.selection;return n?{update:function(t){if(t.docChanged){var e=t.changes.mapPos(t.startState.doc.line(n.line).from),r=t.state.doc.lineAt(e);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},i=i.map(t.changes)}},get:function(e,r,o){var s=vL(t,e);if(!s)return i;var a=function(t,e,n){var i=Math.min(e.line,n.line),r=Math.max(e.line,n.line),o=[];if(e.off>mL||n.off>mL||e.col<0||n.col<0)for(var s=Math.min(e.off,n.off),a=Math.max(e.off,n.off),l=i;l<=r;l++)(h=t.doc.line(l)).length<=a&&o.push(Bi.range(h.from+s,h.to+a));else{var c=Math.min(e.col,n.col),u=Math.max(e.col,n.col);for(l=i;l<=r;l++){var h,p=gi((h=t.doc.line(l)).text,c,t.tabSize,!0);if(p>-1){var d=gi(h.text,u,t.tabSize);o.push(Bi.range(h.from+p,h.from+d))}}}return o}(t.state,n,s);return a.length?o?Bi.create(a.concat(i.ranges)):Bi.create(a):i}}:null}function bL(t){var e=(null==t?void 0:t.eventFilter)||function(t){return t.altKey&&0==t.button};return Nl.mouseSelectionStyle.of((function(t,n){return e(n)?yL(t,n):null}))}var wL="function"==typeof String.prototype.normalize?function(t){return t.normalize("NFKD")}:function(t){return t},kL=function(){function t(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=t.length),this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,i),this.bufferStart=n,this.normalize=r?function(t){return r(wL(t))}:wL,this.query=this.normalize(e)}return t.prototype.peek=function(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return hi(this.buffer,this.bufferPos)},t.prototype.next=function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()},t.prototype.nextOverlapping=function(){for(;;){var t=this.peek();if(t<0)return this.done=!0,this;var e=pi(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=di(t);for(var i=this.normalize(e),r=0,o=n;;r++){var s=i.charCodeAt(r),a=this.match(s,o);if(a)return this.value=a,this;if(r==i.length-1)break;o==n&&r<e.length&&e.charCodeAt(r)==s&&o++}}},t.prototype.match=function(t,e){for(var n=null,i=0;i<this.matches.length;i+=2){var r=this.matches[i],o=!1;this.query.charCodeAt(r)==t&&(r==this.query.length-1?n={from:this.matches[i+1],to:e+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?n={from:e,to:e+1}:this.matches.push(1,e)),n},t}();"undefined"!=typeof Symbol&&(kL.prototype[Symbol.iterator]=function(){return this});var CL={from:-1,to:-1,match:/.*/.exec("")},xL="gm"+(null==/x/.unicode?"":"u"),SL=function(){function t(t,e,n,i,r){if(void 0===i&&(i=0),void 0===r&&(r=t.length),this.to=r,this.curLine="",this.done=!1,this.value=CL,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new LL(t,e,n,i,r);this.re=new RegExp(e,xL+((null==n?void 0:n.ignoreCase)?"i":"")),this.iter=t.iter();var o=t.lineAt(i);this.curLineStart=o.from,this.matchPos=i,this.getLine(this.curLineStart)}return t.prototype.getLine=function(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())},t.prototype.nextLine=function(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)},t.prototype.next=function(){for(var t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;var e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){var n=this.curLineStart+e.index,i=n+e[0].length;if(this.matchPos=i+(n==i?1:0),n==this.curLine.length&&this.nextLine(),n<i||n>this.value.to)return this.value={from:n,to:i,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}},t}(),EL=new WeakMap,ML=function(){function t(t,e){this.from=t,this.text=e}return Object.defineProperty(t.prototype,"to",{get:function(){return this.from+this.text.length},enumerable:!1,configurable:!0}),t.get=function(e,n,i){var r=EL.get(e);if(!r||r.from>=i||r.to<=n){var o=new t(n,e.sliceString(n,i));return EL.set(e,o),o}if(r.from==n&&r.to==i)return r;var s=r.text,a=r.from;return a>n&&(s=e.sliceString(n,a)+s,a=n),r.to<i&&(s+=e.sliceString(r.to,i)),EL.set(e,new t(a,s)),new t(n,s.slice(n-a,i-a))},t}(),LL=function(){function t(t,e,n,i,r){this.text=t,this.to=r,this.done=!1,this.value=CL,this.matchPos=i,this.re=new RegExp(e,xL+((null==n?void 0:n.ignoreCase)?"i":"")),this.flat=ML.get(t,i,this.chunkEnd(i+5e3))}return t.prototype.chunkEnd=function(t){return t>=this.to?this.to:this.text.lineAt(t).to},t.prototype.next=function(){for(;;){var t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e&&this.flat.to<this.to&&e.index+e[0].length>this.flat.text.length-10&&(e=null),e){var n=this.flat.from+e.index,i=n+e[0].length;return this.value={from:n,to:i,match:e},this.matchPos=i+(n==i?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ML.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}},t}();function DL(t){var e=PM("input",{class:"cm-textfield",name:"line"});function n(){var n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(n){var i=t.state,r=i.doc.lineAt(i.selection.main.head),o=n[1],s=n[2],a=n[3],l=n[4],c=a?+a.slice(1):0,u=s?+s:r.number;if(s&&l){var h=u/100;o&&(h=h*("-"==o?-1:1)+r.number/i.doc.lines),u=Math.round(i.doc.lines*h)}else s&&o&&(u=u*("-"==o?-1:1)+r.number);var p=i.doc.line(Math.max(1,Math.min(i.doc.lines,u)));t.dispatch({effects:AL.of(!1),selection:Bi.cursor(p.from+Math.max(0,Math.min(c,p.length))),scrollIntoView:!0}),t.focus()}}return{dom:PM("form",{class:"cm-gotoLine",onkeydown:function(e){27==e.keyCode?(e.preventDefault(),t.dispatch({effects:AL.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),n())},onsubmit:function(t){t.preventDefault(),n()}},PM("label",t.state.phrase("Go to line"),": ",e)," ",PM("button",{class:"cm-button",type:"submit"},t.state.phrase("go"))),pos:-10}}"undefined"!=typeof Symbol&&(SL.prototype[Symbol.iterator]=LL.prototype[Symbol.iterator]=function(){return this});var AL=gr.define(),TL=_i.define({create:function(){return!0},update:function(t,e){for(var n=0,i=e.effects;n<i.length;n++){var r=i[n];r.is(AL)&&(t=r.value)}return t},provide:function(t){return TM.from(t,(function(t){return t?DL:null}))}}),PL=function(t){var e=EM(t,DL);if(!e){var n=[AL.of(!0)];null==t.state.field(TL,!1)&&n.push(gr.appendConfig.of([TL,OL])),t.dispatch({effects:n}),e=EM(t,DL)}return e&&e.dom.querySelector("input").focus(),!0},OL=Nl.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),FL={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100},IL=Vi.define({combine:function(t){return Dr(t,FL,{highlightWordAroundCursor:function(t,e){return t||e},minSelectionLength:Math.min,maxMatches:Math.min})}});function NL(t){var e=[HL,zL];return t&&e.push(IL.of(t)),e}var BL=as.mark({class:"cm-selectionMatch"}),RL=as.mark({class:"cm-selectionMatch cm-selectionMatch-main"}),zL=Ns.fromClass(function(){function t(t){this.decorations=this.getDeco(t)}return t.prototype.update=function(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))},t.prototype.getDeco=function(t){var e=t.state.facet(IL),n=t.state,i=n.selection;if(i.ranges.length>1)return as.none;var r,o=i.main,s=null;if(o.empty){if(!e.highlightWordAroundCursor)return as.none;var a=n.wordAt(o.head);if(!a)return as.none;s=n.charCategorizer(o.head),r=n.sliceDoc(a.from,a.to)}else{var l=o.to-o.from;if(l<e.minSelectionLength||l>200)return as.none;if(!(r=n.sliceDoc(o.from,o.to).trim()))return as.none}for(var c=[],u=0,h=t.visibleRanges;u<h.length;u++)for(var p=h[u],d=new kL(n.doc,r,p.from,p.to);!d.next().done;){var f=d.value,g=f.from,m=f.to;if((!s||(0==g||s(n.sliceDoc(g-1,g))!=Sr.Word)&&(m==n.doc.length||s(n.sliceDoc(m,m+1))!=Sr.Word))&&(s&&g<=o.from&&m>=o.to?c.push(RL.range(g,m)):(g>=o.to||m<=o.from)&&c.push(BL.range(g,m)),c.length>e.maxMatches))return as.none}return as.set(c)},t}(),{decorations:function(t){return t.decorations}}),HL=Nl.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});var VL=function(t){var e=t.state,n=t.dispatch,i=e.selection.ranges;if(i.some((function(t){return t.from===t.to})))return function(t){var e=t.state,n=t.dispatch,i=e.selection,r=Bi.create(i.ranges.map((function(t){return e.wordAt(t.head)||Bi.cursor(t.head)})),i.mainIndex);return!r.eq(i)&&(n(e.update({selection:r})),!0)}({state:e,dispatch:n});var r=e.sliceDoc(i[0].from,i[0].to);if(e.selection.ranges.some((function(t){return e.sliceDoc(t.from,t.to)!=r})))return!1;var o=function(t,e){for(var n,i,r=t.selection,o=r.main,s=r.ranges,a=t.wordAt(o.head),l=a&&a.from==o.from&&a.to==o.to,c=function(r,o){if(o.next(),!o.done){if(r&&s.some((function(t){return t.from==o.value.from})))return n=r,i=o,"continue";if(l){var a=t.wordAt(o.value.from);if(!a||a.from!=o.value.from||a.to!=o.value.to)return n=r,i=o,"continue"}return{value:o.value}}if(r)return{value:null};o=new kL(t.doc,e,0,Math.max(0,s[s.length-1].from-1)),n=r=!0,i=o},u=!1,h=new kL(t.doc,e,s[s.length-1].to);;){var p=c(u,h);if(u=n,h=i,"object"==typeof p)return p.value}}(e,r);return!!o&&(n(e.update({selection:e.selection.addRange(Bi.range(o.from,o.to),!1),scrollIntoView:!0})),!0)},qL=Vi.define({combine:function(t){var e;return{top:t.reduce((function(t,e){return null!=t?t:e.top}),void 0)||!1,caseSensitive:t.reduce((function(t,e){return null!=t?t:e.caseSensitive||e.matchCase}),void 0)||!1,createPanel:(null===(e=t.find((function(t){return t.createPanel})))||void 0===e?void 0:e.createPanel)||function(t){return new dD(t)}}}});function jL(t){return qL.of(t)}var UL=function(){function t(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(t){try{return new RegExp(t,xL),!0}catch(t){return!1}}(this.search))}return t.prototype.eq=function(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp},t.prototype.create=function(){return this.regexp?new GL(this):new WL(this)},t}(),_L=function(t){this.spec=t},WL=function(t){function e(e){var n=t.call(this,e)||this;return n.unquoted=e.search.replace(/\\([nrt\\])/g,(function(t,e){return"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"})),n}return M(e,t),e.prototype.cursor=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=t.length),new kL(t,this.unquoted,e,n,this.spec.caseSensitive?void 0:function(t){return t.toLowerCase()})},e.prototype.nextMatch=function(t,e,n){var i=this.cursor(t,n).nextOverlapping();return i.done&&(i=this.cursor(t,0,e).nextOverlapping()),i.done?null:i.value},e.prototype.prevMatchInRange=function(t,e,n){for(var i=n;;){for(var r=Math.max(e,i-1e4-this.unquoted.length),o=this.cursor(t,r,i),s=null;!o.nextOverlapping().done;)s=o.value;if(s)return s;if(r==e)return null;i-=1e4}},e.prototype.prevMatch=function(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.length)},e.prototype.getReplacement=function(t){return this.spec.replace},e.prototype.matchAll=function(t,e){for(var n=this.cursor(t),i=[];!n.next().done;){if(i.length>=e)return null;i.push(n.value)}return i},e.prototype.highlight=function(t,e,n,i){for(var r=this.cursor(t,Math.max(0,e-this.unquoted.length),Math.min(n+this.unquoted.length,t.length));!r.next().done;)i(r.value.from,r.value.to)},e}(_L),GL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.cursor=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=t.length),new SL(t,this.spec.search,this.spec.caseSensitive?void 0:{ignoreCase:!0},e,n)},e.prototype.nextMatch=function(t,e,n){var i=this.cursor(t,n).next();return i.done&&(i=this.cursor(t,0,e).next()),i.done?null:i.value},e.prototype.prevMatchInRange=function(t,e,n){for(var i=1;;i++){for(var r=Math.max(e,n-1e4*i),o=this.cursor(t,r,n),s=null;!o.next().done;)s=o.value;if(s&&(r==e||s.from>r+10))return s;if(r==e)return null}},e.prototype.prevMatch=function(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.length)},e.prototype.getReplacement=function(t){return this.spec.replace.replace(/\$([$&\d+])/g,(function(e,n){return"$"==n?"$":"&"==n?t.match[0]:"0"!=n&&+n<t.match.length?t.match[n]:e}))},e.prototype.matchAll=function(t,e){for(var n=this.cursor(t),i=[];!n.next().done;){if(i.length>=e)return null;i.push(n.value)}return i},e.prototype.highlight=function(t,e,n,i){for(var r=this.cursor(t,Math.max(0,e-250),Math.min(n+250,t.length));!r.next().done;)i(r.value.from,r.value.to)},e}(_L),KL=gr.define(),$L=gr.define(),YL=_i.define({create:function(t){return new QL(cD(t).create(),lD)},update:function(t,e){for(var n=0,i=e.effects;n<i.length;n++){var r=i[n];r.is(KL)?t=new QL(r.value.create(),t.panel):r.is($L)&&(t=new QL(t.query,r.value?lD:null))}return t},provide:function(t){return TM.from(t,(function(t){return t.panel}))}});function JL(t){var e=t.field(YL,!1);return e?e.query.spec:cD(t)}var QL=function(t,e){this.query=t,this.panel=e},XL=as.mark({class:"cm-searchMatch"}),ZL=as.mark({class:"cm-searchMatch cm-searchMatch-selected"}),tD=Ns.fromClass(function(){function t(t){this.view=t,this.decorations=this.highlight(t.state.field(YL))}return t.prototype.update=function(t){var e=t.state.field(YL);(e!=t.startState.field(YL)||t.docChanged||t.selectionSet)&&(this.decorations=this.highlight(e))},t.prototype.highlight=function(t){var e=t.query;if(!t.panel||!e.spec.valid)return as.none;for(var n=this.view,i=new Vr,r=0,o=n.visibleRanges,s=o.length;r<s;r++){for(var a=o[r],l=a.from,c=a.to;r<s-1&&c>o[r+1].from-500;)c=o[++r].to;e.highlight(n.state.doc,l,c,(function(t,e){var r=n.state.selection.ranges.some((function(n){return n.from==t&&n.to==e}));i.add(t,e,r?ZL:XL)}))}return i.finish()},t}(),{decorations:function(t){return t.decorations}});function eD(t){return function(e){var n=e.state.field(YL,!1);return n&&n.query.spec.valid?t(e,n):uD(e)}}var nD=eD((function(t,e){var n=e.query,i=t.state.selection.main,r=i.from,o=i.to,s=n.nextMatch(t.state.doc,r,o);return!(!s||s.from==r&&s.to==o)&&(t.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:mD(t,s),userEvent:"select.search"}),!0)})),iD=eD((function(t,e){var n=e.query,i=t.state,r=i.selection.main,o=r.from,s=r.to,a=n.prevMatch(i.doc,o,s);return!!a&&(t.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:!0,effects:mD(t,a),userEvent:"select.search"}),!0)})),rD=eD((function(t,e){var n=e.query.matchAll(t.state.doc,1e3);return!(!n||!n.length)&&(t.dispatch({selection:Bi.create(n.map((function(t){return Bi.range(t.from,t.to)}))),userEvent:"select.search.matches"}),!0)})),oD=function(t){var e=t.state,n=t.dispatch,i=e.selection;if(i.ranges.length>1||i.main.empty)return!1;for(var r=i.main,o=r.from,s=r.to,a=[],l=0,c=new kL(e.doc,e.sliceDoc(o,s));!c.next().done;){if(a.length>1e3)return!1;c.value.from==o&&(l=a.length),a.push(Bi.range(c.value.from,c.value.to))}return n(e.update({selection:Bi.create(a,l),userEvent:"select.search.matches"})),!0},sD=eD((function(t,e){var n=e.query,i=t.state,r=i.selection.main,o=r.from,s=r.to;if(i.readOnly)return!1;var a=n.nextMatch(i.doc,o,o);if(!a)return!1;var l,c,u=[];if(a.from==o&&a.to==s&&(c=i.toText(n.getReplacement(a)),u.push({from:a.from,to:a.to,insert:c}),a=n.nextMatch(i.doc,a.from,a.to)),a){var h=0==u.length||u[0].from>=a.to?0:a.to-a.from-c.length;l={anchor:a.from-h,head:a.to-h}}return t.dispatch({changes:u,selection:l,scrollIntoView:!!l,effects:a?mD(t,a):void 0,userEvent:"input.replace"}),!0})),aD=eD((function(t,e){var n=e.query;if(t.state.readOnly)return!1;var i=n.matchAll(t.state.doc,1e9).map((function(t){return{from:t.from,to:t.to,insert:n.getReplacement(t)}}));return!!i.length&&(t.dispatch({changes:i,userEvent:"input.replace.all"}),!0)}));function lD(t){return t.state.facet(qL).createPanel(t)}function cD(t,e){var n,i=t.selection.main,r=i.empty||i.to>i.from+100?"":t.sliceDoc(i.from,i.to),o=null!==(n=null==e?void 0:e.caseSensitive)&&void 0!==n?n:t.facet(qL).caseSensitive;return e&&!r?e:new UL({search:r.replace(/\n/g,"\\n"),caseSensitive:o})}var uD=function(t){var e=t.state.field(YL,!1);if(e&&e.panel){var n=EM(t,lD);if(!n)return!1;var i=n.dom.querySelector("[name=search]");if(i!=t.root.activeElement){var r=cD(t.state,e.query.spec);r.valid&&t.dispatch({effects:KL.of(r)}),i.focus(),i.select()}}else t.dispatch({effects:[$L.of(!0),e?KL.of(cD(t.state,e.query.spec)):gr.appendConfig.of(bD)]});return!0},hD=function(t){var e=t.state.field(YL,!1);if(!e||!e.panel)return!1;var n=EM(t,lD);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:$L.of(!1)}),!0},pD=[{key:"Mod-f",run:uD,scope:"editor search-panel"},{key:"F3",run:nD,shift:iD,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:nD,shift:iD,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:hD,scope:"editor search-panel"},{key:"Mod-Shift-l",run:oD},{key:"Alt-g",run:PL},{key:"Mod-d",run:VL,preventDefault:!0}],dD=function(){function t(t){var e=this;this.view=t;var n=this.query=t.state.field(YL).query.spec;function i(t,e,n){return PM("button",{class:"cm-button",name:t,onclick:e,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=PM("input",{value:n.search,placeholder:fD(t,"Find"),"aria-label":fD(t,"Find"),class:"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit}),this.replaceField=PM("input",{value:n.replace,placeholder:fD(t,"Replace"),"aria-label":fD(t,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=PM("input",{type:"checkbox",name:"case",checked:n.caseSensitive,onchange:this.commit}),this.reField=PM("input",{type:"checkbox",name:"re",checked:n.regexp,onchange:this.commit}),this.dom=PM("div",{onkeydown:function(t){return e.keydown(t)},class:"cm-search"},P([this.searchField,i("next",(function(){return nD(t)}),[fD(t,"next")]),i("prev",(function(){return iD(t)}),[fD(t,"previous")]),i("select",(function(){return rD(t)}),[fD(t,"all")]),PM("label",null,[this.caseField,fD(t,"match case")]),PM("label",null,[this.reField,fD(t,"regexp")])],t.state.readOnly?[]:[PM("br"),this.replaceField,i("replace",(function(){return sD(t)}),[fD(t,"replace")]),i("replaceAll",(function(){return aD(t)}),[fD(t,"replace all")]),PM("button",{name:"close",onclick:function(){return hD(t)},"aria-label":fD(t,"close"),type:"button"},["×"])]))}return t.prototype.commit=function(){var t=new UL({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:KL.of(t)}))},t.prototype.keydown=function(t){Yl(this.view,t,"search-panel")?t.preventDefault():13==t.keyCode&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?iD:nD)(this.view)):13==t.keyCode&&t.target==this.replaceField&&(t.preventDefault(),sD(this.view))},t.prototype.update=function(t){for(var e=0,n=t.transactions;e<n.length;e++)for(var i=0,r=n[e].effects;i<r.length;i++){var o=r[i];o.is(KL)&&!o.value.eq(this.query)&&this.setQuery(o.value)}},t.prototype.setQuery=function(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp},t.prototype.mount=function(){this.searchField.select()},Object.defineProperty(t.prototype,"pos",{get:function(){return 80},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.view.state.facet(qL).top},enumerable:!1,configurable:!0}),t}();function fD(t,e){return t.state.phrase(e)}var gD=/[\s\.,:;?!]/;function mD(t,e){var n=e.from,i=e.to,r=t.state.doc.lineAt(n).from,o=t.state.doc.lineAt(i).to,s=Math.max(r,n-30),a=Math.min(o,i+30),l=t.state.sliceDoc(s,a);if(s!=r)for(var c=0;c<30;c++)if(!gD.test(l[c+1])&&gD.test(l[c])){l=l.slice(c);break}if(a!=o)for(c=l.length-1;c>l.length-30;c--)if(!gD.test(l[c-1])&&gD.test(l[c])){l=l.slice(0,c);break}return Nl.announce.of(t.state.phrase("current match")+". "+l+" "+t.state.phrase("on line")+" "+t.state.doc.lineAt(n).number)}var vD,yD=Nl.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),bD=[YL,Qi.lowest(tD),yD],wD=function(){function t(t,e,n,i,r,o,s,a,l,c,u){void 0===c&&(c=0),this.p=t,this.stack=e,this.state=n,this.reducePos=i,this.pos=r,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}return t.prototype.toString=function(){return"["+this.stack.filter((function(t,e){return e%3==0})).concat(this.state)+"]@"+this.pos+(this.score?"!"+this.score:"")},t.start=function(e,n,i){void 0===i&&(i=0);var r=e.parser.context;return new t(e,[],n,i,i,0,[],0,r?new kD(r,r.start):null,0,null)},Object.defineProperty(t.prototype,"context",{get:function(){return this.curContext?this.curContext.context:null},enumerable:!1,configurable:!0}),t.prototype.pushState=function(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t},t.prototype.reduce=function(t){var e=t>>19,n=65535&t,i=this.p.parser,r=i.dynamicPrecedence(n);if(r&&(this.score+=r),0==e)return n<i.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),this.pushState(i.getGoto(this.state,n,!0),this.reducePos),void this.reduceContext(n,this.reducePos);var o=this.stack.length-3*(e-1)-(262144&t?6:0),s=this.stack[o-2],a=this.stack[o-1],l=this.bufferBase+this.buffer.length-a;if(n<i.minRepeatTerm||131072&t){var c=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,s,c,l+4,!0)}if(262144&t)this.state=this.stack[o];else{var u=this.stack[o-3];this.state=i.getGoto(u,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,s)},t.prototype.storeNode=function(t,e,n,i,r){if(void 0===i&&(i=4),void 0===r&&(r=!1),0==t){var o=this,s=this.buffer.length;if(0==s&&o.parent&&(s=o.bufferBase-o.parent.bufferBase,o=o.parent),s>0&&0==o.buffer[s-4]&&o.buffer[s-1]>-1){if(e==n)return;if(o.buffer[s-2]>=e)return void(o.buffer[s-2]=n)}}if(r&&this.pos!=n){var a=this.buffer.length;if(a>0&&0!=this.buffer[a-4])for(;a>0&&this.buffer[a-2]>n;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4);this.buffer[a]=t,this.buffer[a+1]=e,this.buffer[a+2]=n,this.buffer[a+3]=i}else this.buffer.push(t,e,n,i)},t.prototype.shift=function(t,e,n){var i=this.pos;if(131072&t)this.pushState(65535&t,this.pos);else if(0==(262144&t)){var r=t,o=this.p.parser;(n>this.pos||e<=o.maxNode)&&(this.pos=n,o.stateFlag(r,1)||(this.reducePos=n)),this.pushState(r,i),this.shiftContext(e,i),e<=o.maxNode&&this.buffer.push(e,i,n,4)}else this.pos=n,this.shiftContext(e,i),e<=this.p.parser.maxNode&&this.buffer.push(e,i,n,4)},t.prototype.apply=function(t,e,n){65536&t?this.reduce(t):this.shift(t,e,n)},t.prototype.useNode=function(t,e){var n=this.p.reused.length-1;(n<0||this.p.reused[n]!=t)&&(this.p.reused.push(t),n++);var i=this.pos;this.reducePos=this.pos=i+t.length,this.pushState(e,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))},t.prototype.split=function(){for(var e=this,n=e.buffer.length;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;for(var i=e.buffer.slice(n),r=e.bufferBase+n;e&&r==e.bufferBase;)e=e.parent;return new t(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)},t.prototype.recoverByDelete=function(t,e){var n=t<=this.p.parser.maxNode;n&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,n?8:4),this.pos=this.reducePos=e,this.score-=190},t.prototype.canShift=function(t){for(var e=new CD(this);;){var n=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(0==(65536&n))return!0;if(0==n)return!1;e.reduce(n)}},t.prototype.recoverByInsert=function(t){if(this.stack.length>=300)return[];var e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){for(var n=[],i=0,r=void 0;i<e.length;i+=2)(r=e[i+1])!=this.state&&this.p.parser.hasAction(r,t)&&n.push(e[i],r);if(this.stack.length<120){var o=function(t){var i=e[t+1];n.some((function(t,e){return 1&e&&t==i}))||n.push(e[t],i)};for(i=0;n.length<8&&i<e.length;i+=2)o(i)}e=n}var s=[];for(i=0;i<e.length&&s.length<4;i+=2){if((r=e[i+1])!=this.state){var a=this.split();a.storeNode(0,a.pos,a.pos,4,!0),a.pushState(r,this.pos),a.shiftContext(e[i],this.pos),a.score-=200,s.push(a)}}return s},t.prototype.forceReduce=function(){var t=this.p.parser.stateSlot(this.state,5);if(0==(65536&t))return!1;var e=this.p.parser;if(!e.validAction(this.state,t)){var n=t>>19,i=65535&t,r=this.stack.length-3*n;if(r<0||e.getGoto(this.stack[r],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reduce(t),!0},t.prototype.forceAll=function(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this},Object.defineProperty(t.prototype,"deadEnd",{get:function(){if(3!=this.stack.length)return!1;var t=this.p.parser;return 65535==t.data[t.stateSlot(this.state,1)]&&!t.stateSlot(this.state,4)},enumerable:!1,configurable:!0}),t.prototype.restart=function(){this.state=this.stack[0],this.stack.length=0},t.prototype.sameState=function(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(var e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0},Object.defineProperty(t.prototype,"parser",{get:function(){return this.p.parser},enumerable:!1,configurable:!0}),t.prototype.dialectEnabled=function(t){return this.p.parser.dialect.flags[t]},t.prototype.shiftContext=function(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))},t.prototype.reduceContext=function(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))},t.prototype.emitContext=function(){var t=this.buffer.length-1;(t<0||-3!=this.buffer[t])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)},t.prototype.emitLookAhead=function(){var t=this.buffer.length-1;(t<0||-4!=this.buffer[t])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)},t.prototype.updateContext=function(t){if(t!=this.curContext.context){var e=new kD(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}},t.prototype.setLookAhead=function(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)},t.prototype.close=function(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()},t}(),kD=function(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0};!function(t){t[t.Insert=200]="Insert",t[t.Delete=190]="Delete",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(vD||(vD={}));var CD=function(){function t(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}return t.prototype.reduce=function(t){var e=65535&t,n=t>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);var i=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=i},t}(),xD=function(){function t(t,e,n){this.stack=t,this.pos=e,this.index=n,this.buffer=t.buffer,0==this.index&&this.maybeNext()}return t.create=function(e,n){return void 0===n&&(n=e.bufferBase+e.buffer.length),new t(e,n,n-e.bufferBase)},t.prototype.maybeNext=function(){var t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)},Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!1,configurable:!0}),t.prototype.next=function(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()},t.prototype.fork=function(){return new t(this.stack,this.pos,this.index)},t}(),SD=function(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0},ED=new SD,MD=function(){function t(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ED,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}return t.prototype.resolveOffset=function(t,e){for(var n=this.range,i=this.rangeIndex,r=this.pos+t;r<n.from;){if(!i)return null;var o=this.ranges[--i];r-=n.from-o.to,n=o}for(;e<0?r>n.to:r>=n.to;){if(i==this.ranges.length-1)return null;r+=(o=this.ranges[++i]).from-n.to,n=o}return r},t.prototype.peek=function(t){var e,n,i=this.chunkOff+t;if(i>=0&&i<this.chunk.length)e=this.pos+t,n=this.chunk.charCodeAt(i);else{var r=this.resolveOffset(t,1);if(null==r)return-1;if((e=r)>=this.chunk2Pos&&e<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(e-this.chunk2Pos);else{for(var o=this.rangeIndex,s=this.range;s.to<=e;)s=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=e),e+this.chunk2.length>s.to&&(this.chunk2=this.chunk2.slice(0,s.to-e)),n=this.chunk2.charCodeAt(0)}}return e>=this.token.lookAhead&&(this.token.lookAhead=e+1),n},t.prototype.acceptToken=function(t,e){void 0===e&&(e=0);var n=e?this.resolveOffset(e,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=n},t.prototype.getChunk=function(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){var t=this.chunk,e=this.chunkPos;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;var n=this.input.chunk(this.pos),i=this.pos+n.length;this.chunk=i>this.range.to?n.slice(0,this.range.to-this.pos):n,this.chunkPos=this.pos,this.chunkOff=0}},t.prototype.readNext=function(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)},t.prototype.advance=function(t){for(void 0===t&&(t=1),this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()},t.prototype.setDone=function(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1},t.prototype.reset=function(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=ED,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this},t.prototype.read=function(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);for(var n="",i=0,r=this.ranges;i<r.length;i++){var o=r[i];if(o.from>=e)break;o.to>t&&(n+=this.input.read(Math.max(o.from,t),Math.min(o.to,e)))}return n},t}(),LD=function(){function t(t,e){this.data=t,this.id=e}return t.prototype.token=function(t,e){!function(t,e,n,i){var r=0,o=1<<i,s=n.p.parser,a=s.dialect;t:for(;0!=(o&t[r]);){for(var l=t[r+1],c=r+3;c<l;c+=2)if((t[c+1]&o)>0){var u=t[c];if(a.allows(u)&&(-1==e.token.value||e.token.value==u||s.overrides(u,e.token.value))){e.acceptToken(u);break}}for(var h=e.next,p=0,d=t[r+2];p<d;){var f=p+d>>1,g=l+f+(f<<1),m=t[g],v=t[g+1];if(h<m)d=f;else{if(!(h>=v)){r=t[g+2],e.advance();continue t}p=f+1}}break}}(this.data,t,e,this.id)},t}();LD.prototype.contextual=LD.prototype.fallback=LD.prototype.extend=!1;var DD=function(t,e){void 0===e&&(e={}),this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend};function AD(t,e){if(void 0===e&&(e=Uint16Array),"string"!=typeof t)return t;for(var n=null,i=0,r=0;i<t.length;){for(var o=0;;){var s=t.charCodeAt(i++),a=!1;if(126==s){o=65535;break}s>=92&&s--,s>=34&&s--;var l=s-32;if(l>=46&&(l-=46,a=!0),o+=l,a)break;o*=46}n?n[r++]=o:n=new e(o)}return n}var TD,PD="undefined"!=typeof process&&/\bparse\b/.test(process.env.LOG),OD=null;function FD(t,e,n){var i=t.fullCursor();for(i.moveTo(e);;)if(!(n<0?i.childBefore(e):i.childAfter(e)))for(;;){if((n<0?i.to<e:i.from>e)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:t.length}}!function(t){t[t.Margin=25]="Margin"}(TD||(TD={}));var ID,ND=function(){function t(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}return t.prototype.nextFragment=function(){var t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?FD(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?FD(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9},t.prototype.nodeAt=function(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){var e=this.trees.length-1;if(e<0)return this.nextFragment(),null;var n=this.trees[e],i=this.index[e];if(i!=n.children.length){var r=n.children[i],o=this.start[e]+n.positions[i];if(o>t)return this.nextStart=o,null;if(r instanceof En){if(o==t){if(o<this.safeFrom)return null;var s=o+r.length;if(s<=this.safeTo){var a=r.prop(yn.lookAhead);if(!a||s+a<this.fragment.to)return r}}this.index[e]++,o+r.length>=Math.max(this.safeFrom,t)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[e]++,this.nextStart=o+r.length}else this.trees.pop(),this.start.pop(),this.index.pop()}},t}(),BD=function(){function t(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map((function(t){return new SD}))}return t.prototype.getActions=function(t){for(var e=0,n=null,i=t.p.parser,r=i.tokenizers,o=i.stateSlot(t.state,3),s=t.curContext?t.curContext.hash:0,a=0,l=0;l<r.length;l++)if(0!=(1<<l&o)){var c=r[l],u=this.tokens[l];if((!n||c.fallback)&&((c.contextual||u.start!=t.pos||u.mask!=o||u.context!=s)&&(this.updateCachedToken(u,c,t),u.mask=o,u.context=s),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),0!=u.value)){var h=e;if(u.extended>-1&&(e=this.addActions(t,u.extended,u.end,e)),e=this.addActions(t,u.value,u.end,e),!c.extend&&(n=u,e>h))break}}for(;this.actions.length>e;)this.actions.pop();return a&&t.setLookAhead(a),n||t.pos!=this.stream.end||((n=new SD).value=t.p.parser.eofTerm,n.start=n.end=t.pos,e=this.addActions(t,n.value,n.end,e)),this.mainToken=n,this.actions},t.prototype.getMainToken=function(t){if(this.mainToken)return this.mainToken;var e=new SD,n=t.pos,i=t.p;return e.start=n,e.end=Math.min(n+1,i.stream.end),e.value=n==i.stream.end?i.parser.eofTerm:0,e},t.prototype.updateCachedToken=function(t,e,n){if(e.token(this.stream.reset(n.pos,t),n),t.value>-1){for(var i=n.p.parser,r=0;r<i.specialized.length;r++)if(i.specialized[r]==t.value){var o=i.specializers[r](this.stream.read(t.start,t.end),n);if(o>=0&&n.p.parser.dialect.allows(o>>1)){0==(1&o)?t.value=o>>1:t.extended=o>>1;break}}}else t.value=0,t.end=Math.min(n.p.stream.end,n.pos+1)},t.prototype.putAction=function(t,e,n,i){for(var r=0;r<i;r+=3)if(this.actions[r]==t)return i;return this.actions[i++]=t,this.actions[i++]=e,this.actions[i++]=n,i},t.prototype.addActions=function(t,e,n,i){for(var r=t.state,o=t.p.parser,s=o.data,a=0;a<2;a++)for(var l=o.stateSlot(r,a?2:1);;l+=3){if(65535==s[l]){if(1!=s[l+1]){0==i&&2==s[l+1]&&(i=this.putAction(UD(s,l+1),e,n,i));break}l=UD(s,l+2)}s[l]==e&&(i=this.putAction(UD(s,l+1),e,n,i))}return i},t}();!function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=200]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit"}(ID||(ID={}));var RD=function(){function t(t,e,n,i){this.parser=t,this.input=e,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new MD(e,i),this.tokens=new BD(t,this.stream),this.topTerm=t.top[1];var r=i[0].from;this.stacks=[wD.start(this,t.top[0],r)],this.fragments=n.length&&this.stream.end-r>4*t.bufferLength?new ND(n,t.nodeSet):null}return Object.defineProperty(t.prototype,"parsedPos",{get:function(){return this.minStackPos},enumerable:!1,configurable:!0}),t.prototype.advance=function(){for(var t,e,n=this.stacks,i=this.minStackPos,r=this.stacks=[],o=0;o<n.length;o++)for(var s=n[o];;){if(this.tokens.mainToken=null,s.pos>i)r.push(s);else{if(this.advanceStack(s,r,n))continue;t||(t=[],e=[]),t.push(s);var a=this.tokens.getMainToken(s);e.push(a.value,a.end)}break}if(!r.length){var l;if(l=t&&function(t){for(var e=null,n=0,i=t;n<i.length;n++){var r=i[n],o=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=o&&r.pos>o)&&r.p.parser.stateFlag(r.state,2)&&(!e||e.score<r.score)&&(e=r)}return e}(t))return this.stackToTree(l);if(this.parser.strict)throw PD&&t&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&t&&(l=null!=this.stoppedAt&&t[0].pos>this.stoppedAt?t[0]:this.runRecovery(t,e,r)))return this.stackToTree(l.forceAll());if(this.recovering){var c=1==this.recovering?1:3*this.recovering;if(r.length>c)for(r.sort((function(t,e){return e.score-t.score}));r.length>c;)r.pop();r.some((function(t){return t.reducePos>i}))&&this.recovering--}else if(r.length>1)t:for(o=0;o<r.length-1;o++){s=r[o];for(var u=o+1;u<r.length;u++){var h=r[u];if(s.sameState(h)||s.buffer.length>200&&h.buffer.length>200){if(!((s.score-h.score||s.buffer.length-h.buffer.length)>0)){r.splice(o--,1);continue t}r.splice(u--,1)}}}this.minStackPos=r[0].pos;for(o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null},t.prototype.stopAt=function(t){if(null!=this.stoppedAt&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t},t.prototype.advanceStack=function(t,e,n){var i=t.pos,r=this.parser,o=PD?this.stackID(t)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments)for(var s=t.curContext&&t.curContext.tracker.strict,a=s?t.curContext.hash:0,l=this.fragments.nodeAt(i);l;){var c=this.parser.nodeSet.types[l.type.id]==l.type?r.getGoto(t.state,l.type.id):-1;if(c>-1&&l.length&&(!s||(l.prop(yn.contextHash)||0)==a))return t.useNode(l,c),PD&&console.log(o+this.stackID(t)+" (via reuse of "+r.getName(l.type.id)+")"),!0;if(!(l instanceof En)||0==l.children.length||l.positions[0]>0)break;var u=l.children[0];if(!(u instanceof En&&0==l.positions[0]))break;l=u}var h=r.stateSlot(t.state,4);if(h>0)return t.reduce(h),PD&&console.log(o+this.stackID(t)+" (via always-reduce "+r.getName(65535&h)+")"),!0;for(var p=this.tokens.getActions(t),d=0;d<p.length;){var f=p[d++],g=p[d++],m=p[d++],v=d==p.length||!n,y=v?t:t.split();if(y.apply(f,g,m),PD&&console.log(o+this.stackID(y)+" (via "+(0==(65536&f)?"shift":"reduce of "+r.getName(65535&f))+" for "+r.getName(g)+" @ "+i+(y==t?"":", split")+")"),v)return!0;y.pos>i?e.push(y):n.push(y)}return!1},t.prototype.advanceFully=function(t,e){for(var n=t.pos;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>n)return zD(t,e),!0}},t.prototype.runRecovery=function(t,e,n){for(var i=null,r=!1,o=0;o<t.length;o++){var s=t[o],a=e[o<<1],l=e[1+(o<<1)],c=PD?this.stackID(s)+" -> ":"";if(s.deadEnd){if(r)continue;if(r=!0,s.restart(),PD&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}for(var u=s.split(),h=c,p=0;u.forceReduce()&&p<10;p++){if(PD&&console.log(h+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,n))break;PD&&(h=this.stackID(u)+" -> ")}for(var d=0,f=s.recoverByInsert(a);d<f.length;d++){var g=f[d];PD&&console.log(c+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,n)}this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),PD&&console.log(c+this.stackID(s)+" (via recover-delete "+this.parser.getName(a)+")"),zD(s,n)):(!i||i.score<s.score)&&(i=s)}return i},t.prototype.stackToTree=function(t){return t.close(),En.build({buffer:xD.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})},t.prototype.stackID=function(t){var e=(OD||(OD=new WeakMap)).get(t);return e||OD.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t},t}();function zD(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(i.pos==t.pos&&i.sameState(t))return void(e[n].score<t.score&&(e[n]=t))}e.push(t)}var HD=function(){function t(t,e,n){this.source=t,this.flags=e,this.disabled=n}return t.prototype.allows=function(t){return!this.disabled||0==this.disabled[t]},t}(),VD=function(t){return t},qD=function(t){this.start=t.start,this.shift=t.shift||VD,this.reduce=t.reduce||VD,this.reuse=t.reuse||VD,this.hash=t.hash||function(){return 0},this.strict=!1!==t.strict},jD=function(t){function e(e){var n=t.call(this)||this;if(n.wrappers=[],13!=e.version)throw new RangeError("Parser version ("+e.version+") doesn't match runtime version (13)");var i=e.nodeNames.split(" ");n.minRepeatTerm=i.length;for(var r=0;r<e.repeatNodeCount;r++)i.push("");var o=Object.keys(e.topRules).map((function(t){return e.topRules[t][1]})),s=[];for(r=0;r<i.length;r++)s.push([]);function a(t,e,n){s[t].push([e,e.deserialize(String(n))])}if(e.nodeProps)for(var l=0,c=e.nodeProps;l<c.length;l++){var u=c[l],h=u[0];for(r=1;r<u.length;){var p=u[r++];if(p>=0)a(p,h,u[r++]);else{for(var d=u[r+-p],f=-p;f>0;f--)a(u[r++],h,d);r++}}}n.nodeSet=new Cn(i.map((function(t,i){return kn.define({name:i>=n.minRepeatTerm?void 0:t,id:i,props:s[i],top:o.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})}))),n.strict=!1,n.bufferLength=gn;var g=AD(e.tokenData);if(n.context=e.context,n.specialized=new Uint16Array(e.specialized?e.specialized.length:0),n.specializers=[],e.specialized)for(r=0;r<e.specialized.length;r++)n.specialized[r]=e.specialized[r].term,n.specializers[r]=e.specialized[r].get;return n.states=AD(e.states,Uint32Array),n.data=AD(e.stateData),n.goto=AD(e.goto),n.maxTerm=e.maxTerm,n.tokenizers=e.tokenizers.map((function(t){return"number"==typeof t?new LD(g,t):t})),n.topRules=e.topRules,n.dialects=e.dialects||{},n.dynamicPrecedences=e.dynamicPrecedences||null,n.tokenPrecTable=e.tokenPrec,n.termNames=e.termNames||null,n.maxNode=n.nodeSet.types.length-1,n.dialect=n.parseDialect(),n.top=n.topRules[Object.keys(n.topRules)[0]],n}return M(e,t),e.prototype.createParse=function(t,e,n){for(var i=new RD(this,t,e,n),r=0,o=this.wrappers;r<o.length;r++){i=(0,o[r])(i,t,e,n)}return i},e.prototype.getGoto=function(t,e,n){void 0===n&&(n=!1);var i=this.goto;if(e>=i[0])return-1;for(var r=i[e+1];;){var o=i[r++],s=1&o,a=i[r++];if(s&&n)return a;for(var l=r+(o>>1);r<l;r++)if(i[r]==t)return a;if(s)return-1}},e.prototype.hasAction=function(t,e){for(var n=this.data,i=0;i<2;i++)for(var r=this.stateSlot(t,i?2:1),o=void 0;;r+=3){if(65535==(o=n[r])){if(1!=n[r+1]){if(2==n[r+1])return UD(n,r+2);break}o=n[r=UD(n,r+2)]}if(o==e||0==o)return UD(n,r+1)}return 0},e.prototype.stateSlot=function(t,e){return this.states[6*t+e]},e.prototype.stateFlag=function(t,e){return(this.stateSlot(t,0)&e)>0},e.prototype.validAction=function(t,e){if(e==this.stateSlot(t,4))return!0;for(var n=this.stateSlot(t,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=UD(this.data,n+2)}if(e==UD(this.data,n+1))return!0}},e.prototype.nextStates=function(t){for(var e,n=[],i=function(t){if(65535==r.data[t]){if(1!=r.data[t+1])return e=t,"break";t=UD(r.data,t+2)}if(0==(1&r.data[t+2])){var i=r.data[t+1];n.some((function(t,e){return 1&e&&t==i}))||n.push(r.data[t],i)}e=t},r=this,o=this.stateSlot(t,1);;o+=3){var s=i(o);if(o=e,"break"===s)break}return n},e.prototype.overrides=function(t,e){var n=_D(this.data,this.tokenPrecTable,e);return n<0||_D(this.data,this.tokenPrecTable,t)<n},e.prototype.configure=function(t){var n,i=Object.assign(Object.create(e.prototype),this);if(t.props&&(i.nodeSet=(n=this.nodeSet).extend.apply(n,t.props)),t.top){var r=this.topRules[t.top];if(!r)throw new RangeError("Invalid top rule name "+t.top);i.top=r}return t.tokenizers&&(i.tokenizers=this.tokenizers.map((function(e){var n=t.tokenizers.find((function(t){return t.from==e}));return n?n.to:e}))),t.contextTracker&&(i.context=t.contextTracker),t.dialect&&(i.dialect=this.parseDialect(t.dialect)),null!=t.strict&&(i.strict=t.strict),t.wrap&&(i.wrappers=i.wrappers.concat(t.wrap)),null!=t.bufferLength&&(i.bufferLength=t.bufferLength),i},e.prototype.getName=function(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)},Object.defineProperty(e.prototype,"eofTerm",{get:function(){return this.maxNode+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topNode",{get:function(){return this.nodeSet.types[this.top[1]]},enumerable:!1,configurable:!0}),e.prototype.dynamicPrecedence=function(t){var e=this.dynamicPrecedences;return null==e?0:e[t]||0},e.prototype.parseDialect=function(t){var e=Object.keys(this.dialects),n=e.map((function(){return!1}));if(t)for(var i=0,r=t.split(" ");i<r.length;i++){var o=r[i],s=e.indexOf(o);s>=0&&(n[s]=!0)}for(var a=null,l=0;l<e.length;l++)if(!n[l])for(var c,u=this.dialects[e[l]];65535!=(c=this.data[u++]);)(a||(a=new Uint8Array(this.maxTerm+1)))[c]=1;return new HD(t,n,a)},e.deserialize=function(t){return new e(t)},e}(jn);function UD(t,e){return t[e]|t[e+1]<<16}function _D(t,e,n){for(var i=e,r=void 0;65535!=(r=t[i]);i++)if(r==n)return i-e;return-1}var WD=new window.TurndownService({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",fence:"```",linkStyle:"inlined"});function GD(t){return WD.turndown(t)}WD.remove(["script","style","title"]),WD.addRule("strikethrough",{filter:["del","s"],replacement:function(t){return"~~"+t+"~~"}}),WD.escape=function(t){return t};var KD=function(){function t(t){this.shouldRestoreSelection=!0,this.selection=null,this.app=t,this.scope=new Nb,this.scope.register([],"Escape",this.close.bind(this)),this.containerEl=createDiv("modal-container");var e=this.bgEl=this.containerEl.createDiv("modal-bg");this.modalEl=this.containerEl.createDiv("modal");var n=this.modalEl.createDiv("modal-close-button");this.titleEl=this.modalEl.createDiv("modal-title"),this.contentEl=this.modalEl.createDiv("modal-content"),n.addEventListener("click",this.close.bind(this)),e.addEventListener("click",this.close.bind(this))}return t.prototype.open=function(){this.shouldRestoreSelection?this.selection=rh():this.selection=null;var t=document.activeElement;t&&t instanceof HTMLElement&&t.blur(),window.getSelection().removeAllRanges();var e=this.app;if(e.keymap.pushScope(this.scope),document.body.appendChild(this.containerEl),this.onOpen(),By.isMobile){var n=this.modalEl,i=this.bgEl,r=n.offsetHeight-1;kb(n,new mb({duration:300}).addProp("transform","translateY("+r+"px)","")),kb(i,new mb({duration:200}).addProp("opacity","0","0.85"))}e.workspace.pushClosable(this)},t.prototype.close=function(){var t=this,e=this.app;if(e.keymap.popScope(this.scope),this.onClose(),By.isMobile){var n=this.modalEl,i=this.bgEl,r=n.offsetHeight-1;kb(n,new mb({duration:300}).addProp("transform","","translateY("+r+"px)"),(function(){t.containerEl.detach()})),kb(i,new mb({duration:200}).addProp("opacity",null,"0"))}else this.containerEl.detach();e.workspace.popClosable(this),this.shouldRestoreSelection&&oh(this.selection)},t.prototype.onOpen=function(){},t.prototype.onClose=function(){},t.prototype.setTitle=function(t){return this.titleEl.setText(t),this},t.prototype.setContent=function(t){return String.isString(t)?this.contentEl.setText(t):this.contentEl.appendChild(t),this},t}(),$D=function(t){function e(e){var n=t.call(this,e)||this;return n.buttonContainerEl=null,n.containerEl.addClass("mod-confirmation"),n.buttonContainerEl=n.modalEl.createDiv("modal-button-container"),n}return M(e,t),e.prototype.addButton=function(t,e,n){var i=this;return this.buttonContainerEl.createEl("button",{cls:t,text:e}).addEventListener("click",(function(t){return D(i,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,n(t)];case 1:return e.sent()||this.close(),[2]}}))}))})),this},e.prototype.addCancelButton=function(){return this.addButton("",Ee("dialogue.button-cancel"),this.close.bind(this))},e}(KD);function YD(t,e){if(!t)return t;if(t.links)for(var n=0,i=t.links;n<i.length;n++){e(i[n])}if(t.embeds)for(var r=0,o=t.embeds;r<o.length;r++){e(o[r])}if(t.tags)for(var s=0,a=t.tags;s<a.length;s++){e(a[s])}if(t.headings)for(var l=0,c=t.headings;l<c.length;l++){e(c[l])}if(t.sections)for(var u=0,h=t.sections;u<h.length;u++){e(h[u])}if(t.listItems)for(var p=0,d=t.listItems;p<d.length;p++){e(d[p])}if(t.frontmatter&&e(t.frontmatter),t.blocks)for(var f in t.blocks)t.blocks.hasOwnProperty(f)&&e(t.blocks[f]);return t}function JD(t){var e=t.position;if(e){delete t.position;var n=e.start,i=e.end;t.pos=[n.line,n.col,n.offset,i.line,i.col,i.offset]}}function QD(t){var e=t.pos;e&&Array.isArray(e)&&6===e.length&&(delete t.pos,t.position={start:{line:e[0],col:e[1],offset:e[2]},end:{line:e[3],col:e[4],offset:e[5]}})}function XD(t,e,n){return function(t,e,n){for(var i=0,r=t.length;i<r;){var o=(i+r)/2|0,s=e(t[o]);if(0===s)return o;s<0?i=o+1:r=o}return n?r:i}(t,(function(t){return e<t.position.start.offset?1:e>t.position.end.offset?-1:0}),n)}function ZD(t){return(t=ng(t).normalize("NFC")).split("#")[0]}function tA(t){var e=(t=ng(t).normalize("NFC")).split("#")[0];return{path:e,subpath:t.substr(e.length)}}function eA(t,e){return!!t&&(!0===nA(t.links,e)||!0===nA(t.embeds,e))}function nA(t,e){if(!t)return!1;for(var n=0,i=t;n<i.length;n++){if(!0===e(i[n]))return!0}return!1}function iA(t){if(!t)return null;var e=[],n=Og(t.frontmatter);if(n)for(var i=0,r=n;i<r.length;i++){var o=r[i];e.push(o)}var s=t.tags;if(s)for(var a=0,l=s;a<l.length;a++){o=l[a];e.push(o.tag)}return e}function rA(t){return ig.lastIndex=0,t.replace(ig," ").replace(/\s+/g," ").trim()}function oA(t,e){if(!t||!e)return null;var n=e.split("#").filter((function(t){return!!t}));if(!n||0===n.length)return null;if(1===n.length){var i=n[0];if(i.startsWith("^")){var r=i.substr(1).toLowerCase(),o=t.blocks;if(o&&o.hasOwnProperty(r)){var s=o[r];return{type:"block",block:s,start:s.position.start,end:s.position.end}}}}var a=t.headings;if(!a||0===a.length)return null;for(var l=0,c=0,u=null,h=null,p=0,d=a;p<d.length;p++){var f=d[p];if(u&&f.level<=c){h=f;break}!u&&f.level>c&&rA(f.heading).toLowerCase()===rA(n[l]).toLowerCase()&&(l++,c=f.level,l===n.length&&(u=f))}return u?{type:"heading",current:u,next:h,start:u.position.start,end:h?h.position.start:null}:null}let sA,aA;const lA=new WeakMap,cA=new WeakMap,uA=new WeakMap,hA=new WeakMap,pA=new WeakMap;let dA={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return cA.get(t);if("objectStoreNames"===e)return t.objectStoreNames||uA.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mA(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function fA(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(aA||(aA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(vA(this),e),mA(lA.get(this))}:function(...e){return mA(t.apply(vA(this),e))}:function(e,...n){const i=t.call(vA(this),e,...n);return uA.set(i,e.sort?e.sort():[e]),mA(i)}}function gA(t){return"function"==typeof t?fA(t):(t instanceof IDBTransaction&&function(t){if(cA.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{e(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)}));cA.set(t,e)}(t),e=t,(sA||(sA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,dA):t);var e}function mA(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{e(mA(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&lA.set(e,t)})).catch((()=>{})),pA.set(e,t),e}(t);if(hA.has(t))return hA.get(t);const e=gA(t);return e!==t&&(hA.set(t,e),pA.set(e,t)),e}const vA=t=>pA.get(t);function yA(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(t,e),a=mA(s);return i&&s.addEventListener("upgradeneeded",(t=>{i(mA(s.result),t.oldVersion,t.newVersion,mA(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((t=>{o&&t.addEventListener("close",(()=>o())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}function bA(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",(()=>e())),mA(n).then((()=>{}))}const wA=["get","getKey","getAll","getAllKeys","count"],kA=["put","add","delete","clear"],CA=new Map;function xA(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(CA.get(e))return CA.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=kA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!wA.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,r?"readwrite":"readonly");let s=o.store;return i&&(s=s.index(e.shift())),(await Promise.all([s[n](...e),r&&o.done]))[0]};return CA.set(e,o),o}function SA(t){return"md"===Xt(Kt(t))&&(t=t.substring(0,t.length-3)),t}dA=(t=>({...t,get:(e,n,i)=>xA(e,n)||t.get(e,n,i),has:(e,n)=>!!xA(e,n)||t.has(e,n)}))(dA);var EA=function(t,e){for(var n in e)if(e.hasOwnProperty(n)&&Kt(n).toLowerCase().contains(t))return!0;return!1},MA=function(){function t(t){this.cache={},this.app=t}return t.prototype.clear=function(){this.cache={}},t.prototype.getForFile=function(t,e){var n,i;return D(this,void 0,Promise,(function(){var r,o,s,a,l,c,u,h,p,d,f,g;return A(this,(function(m){switch(m.label){case 0:return"md"!==e.extension?[2,null]:(r=e.stat.mtime,(o=this.cache).hasOwnProperty(e.path)&&(s=o[e.path]).file===e&&s.mtime===r?[2,s]:[4,this.app.vault.cachedRead(e)]);case 1:if(a=m.sent(),t.isCancelled())return[2,null];l=Eg(a),c=[],m.label=2;case 2:m.trys.push([2,7,8,13]),u=I(Ph(Th(l.children),{maxDelay:0})),m.label=3;case 3:return[4,u.next()];case 4:if((h=m.sent()).done)return[3,6];if(p=h.value,t.isCancelled())return[3,6];if("yaml"===p.type)return[3,5];if("list"===p.type)return Gf(p,"listItem",(function(t){for(var e=[],n=0,i=t.children;n<i.length;n++){var r=i[n];"paragraph"===r.type&&e.push(Ng(r).trim())}var o=e.join("");o&&c.push({display:o,node:t})})),[3,5];if(""===(d=Ng(p).trim()))return[3,5];"heading"===p.type&&(d=Array(p.depth||1).fill("#").join("")+" "+d),c.push({display:d,node:p}),m.label=5;case 5:return[3,3];case 6:return[3,13];case 7:return f=m.sent(),n={error:f},[3,13];case 8:return m.trys.push([8,,11,12]),h&&!h.done&&(i=u.return)?[4,i.call(u)]:[3,10];case 9:m.sent(),m.label=10;case 10:return[3,12];case 11:if(n)throw n.error;return[7];case 12:return[7];case 13:return g={file:e,content:a,mtime:r,blocks:c},o[e.path]=g,[2,g]}}))}))},t.prototype.getAll=function(t){return F(this,arguments,(function(){var e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:e=this.app.vault,n=e.getMarkdownFiles(),i=0,r=n,s.label=1;case 1:return i<r.length?(o=r[i],[4,O(this.getForFile(t,o))]):[3,5];case 2:return[4,s.sent()];case 3:s.sent(),s.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))},t}(),LA=function(t){function e(e,n){var i=t.call(this)||this;return i.worker=null,i.inProgressTaskCount=0,i.db=null,i.fileCache={},i.metadataCache={},i.workQueue=new Eh,i.uniqueFileLookup=new At,i.initialized=!1,i.resolvedLinks={},i.unresolvedLinks={},i.linkResolverQueue=null,i.onCleanCacheCallbacks=[],i.workerResolve=null,i.app=e,i.vault=n,i.worker=new Worker("worker.js",{name:"Metadata Cache Worker"}),i.worker.onmessage=i.onReceiveMessageFromWorker.bind(i),i.blockCache=new MA(e),i.linkResolver(),i.on("finished",i.checkCleanCache,i),i.on("resolved",i.checkCleanCache,i),i}return M(e,t),e.prototype.getLinkSuggestions=function(){for(var t=[],e={},n=this.unresolvedLinks,i=this.vault,r=i.getConfig("showUnsupportedFiles"),o=0,s=i.getFiles();o<s.length;o++){var a=s[o];if(r||ee(a.extension)){var l=a.path;"md"===a.extension&&(l=Qt(l)),e[l]=!0,t.push({file:a,path:l});var c=this.getFileCache(a);if(c){var u=Pg(c.frontmatter);if(u)for(var h=0,p=u;h<p.length;h++){var d=p[h];t.push({file:a,path:l,alias:d})}}}}for(var f in n)if(n.hasOwnProperty(f)){var g=n[f];for(var m in g)g.hasOwnProperty(m)&&(e[m]||(e[m]=!0,t.push({file:null,path:m})))}return t},e.prototype.getTags=function(){var t=this.fileCache,e=this.metadataCache,n={},i=function(t){if(t){var e=t.split("/").last();n[t]=(n[t]||0)+1,e!==t&&i(t.substr(0,t.length-e.length-1))}};for(var r in t)if(t.hasOwnProperty(r)){var o=e[t[r].hash];if(o){var s=iA(o);if(s)for(var a=0,l=s;a<l.length;a++){var c=l[a];i(c)}}}var u={};for(var c in n)if(n.hasOwnProperty(c)){var h=c.toLowerCase(),p=n[c];if(u.hasOwnProperty(h)){var d=u[h];d.count+=p,p>d.max&&(d.max=p,d.tag=c)}else u[h]={tag:c,count:p,max:p}}for(var c in n={},u)if(u.hasOwnProperty(c)){var f=u[c];n[f.tag]=f.count}return n},e.prototype.getLinkpathDest=function(t,e){if(""===t&&e){var n=this.vault.getAbstractFileByPath(e);if(n instanceof cb)return[n]}var i=this._getLinkpathDest(t,e);return 0===i.length&&(i=this._getLinkpathDest(t+".md",e)),i},e.prototype.getFirstLinkpathDest=function(t,e){var n=this.getLinkpathDest(t,e);return n.length>0?n[0]:null},e.prototype._getLinkpathDest=function(t,e){var n=t.toLowerCase(),i=Kt(n),r=this.uniqueFileLookup.get(i);if(!r)return[];var o=$t(e).toLowerCase();if(n.startsWith("./")||n.startsWith("../")){if(n.startsWith("./../")&&(n=n.substr(2)),n.startsWith("./"))""!==o&&(o+="/"),n=o+n.substring(2);else{for(;n.startsWith("../");)n=n.substr(3),o=$t(o);""!==o&&(o+="/"),n=o+n}for(var s=0,a=r;s<a.length;s++){if((g=(f=a[s]).path.toLowerCase())===n)return[f]}}n.startsWith("/")&&(n=n.substr(1));for(var l=0,c=r;l<c.length;l++){if((g=(f=c[l]).path.toLowerCase())===n)return[f]}if(t.startsWith("/"))return[];for(var u=[],h=[],p=0,d=r;p<d.length;p++){var f,g;(g=(f=d[p]).path.toLowerCase()).endsWith(n)&&(g.startsWith(o)?u.push(f):h.push(f))}return u.sort((function(t,e){return t.path.length-e.path.length})),h.sort((function(t,e){return t.path.length-e.path.length})),u.concat(h)},e.prototype.getLinks=function(){var t={};for(var e in this.fileCache)if(this.fileCache.hasOwnProperty(e)){var n=[],i=this.fileCache[e].hash,r=this.metadataCache[i];r&&(r.links&&(n=n.concat(r.links)),r.embeds&&(n=n.concat(r.embeds))),t[e]=n}return t},e.prototype.getFileCache=function(t){return this.getCache(t.path)},e.prototype.getCache=function(t){if(this.fileCache.hasOwnProperty(t)){var e=this.fileCache[t].hash;return"md"!==Xt(Kt(t))?{}:this.metadataCache[e]}},e.prototype.getFileInfo=function(t){return this.fileCache[t]},e.prototype.getCachedFiles=function(){return Object.keys(this.fileCache)},e.prototype.iterateReferences=function(t){var e=function(e){if(!n.fileCache.hasOwnProperty(e))return"continue";var i=n.fileCache[e].hash;eA(n.metadataCache[i],(function(n){return t(e,n)}))},n=this;for(var i in this.fileCache)e(i)},e.prototype.getBacklinksForFile=function(t){var e=this,n=new At;return this.iterateReferences((function(i,r){var o=ZD(r.link),s=e.getFirstLinkpathDest(o,i);s&&s===t&&n.add(i,r)})),n},e.prototype.fileToLinktext=function(t,e,n){void 0===n&&(n=!0);var i=this.vault.getConfig("newLinkFormat"),r="md"===t.extension&&n?Qt(t.path):t.path;if("absolute"===i)return r;if("relative"===i){for(var o="",s=$t(e);""!==s&&"/"!==s&&0!==r.indexOf(s+"/");)o="../"+o,s=$t(s);return 0===r.indexOf(s+"/")?o+r.substr(s.length+1):o+r}var a="md"===t.extension&&n?t.basename:t.name,l=ZD(a),c=this.getLinkpathDest(l,e);return c&&1===c.length&&c[0]===t?a:"md"===t.extension&&n?Qt(t.path):t.path},e.prototype.watchVaultChanges=function(){var t=this.vault;t.on("create",this.onCreate.bind(this)),t.on("modify",this.onCreateOrModify.bind(this)),t.on("delete",this.onDelete.bind(this)),t.on("rename",this.onRename.bind(this))},e.prototype.initialize=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v;return A(this,(function(y){switch(y.label){case 0:e=(t=this).fileCache,n=t.metadataCache,y.label=1;case 1:return y.trys.push([1,8,,9]),i=this,[4,yA(this.app.appId+"-cache",19,{upgrade:function(t,e,n,i){t.objectStoreNames.contains("file")&&t.deleteObjectStore("file"),t.objectStoreNames.contains("metadata")&&t.deleteObjectStore("metadata"),t.createObjectStore("file"),t.createObjectStore("metadata")}})];case 2:return[4,(i.db=y.sent()).transaction(["file","metadata"])];case 3:return[4,(r=y.sent()).objectStore("file").getAllKeys()];case 4:return o=y.sent(),[4,r.objectStore("file").getAll()];case 5:for(s=y.sent(),c=0;c<o.length;c++)e[o[c]]=s[c];return[4,r.objectStore("metadata").getAllKeys()];case 6:return a=y.sent(),[4,r.objectStore("metadata").getAll()];case 7:for(l=y.sent(),c=0;c<a.length;c++)n[a[c]]=YD(l[c],QD);return[3,9];case 8:return u=y.sent(),console.error("Failed to load cache",u),[3,9];case 9:for(setInterval(this.cleanupDeletedCache.bind(this),6e5),h={},p=this.vault.getAllLoadedFiles(),d=0,f=p;d<f.length;d++)(v=f[d])instanceof cb&&(this.uniqueFileLookup.add(v.name.toLowerCase(),v),h[v.path]=v);for(m in e)e.hasOwnProperty(m)&&(v=h[m],g=e[m],v?n.hasOwnProperty(g.hash)?v.stat.mtime!==g.mtime||v.stat.size!==g.size?this.onCreateOrModify(v):this.linkResolverQueue.add(v):this.onCreateOrModify(v):this.deletePath(m));for(m in h)h.hasOwnProperty(m)&&(v=h[m],e[m]||this.onCreateOrModify(v));return this.initialized=!0,this.watchVaultChanges(),this.cleanupDeletedCache(),this.trigger("initialized"),this.trigger("finished"),[2]}}))}))},e.prototype.clear=function(){return D(this,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return(t=this.db)?[4,t.clear("metadata")]:[3,3];case 1:return e.sent(),[4,t.clear("file")];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.showIndexingNotice=function(){var t,e,n=this,i=Ee("interface.msg-indexing"),r=window.setTimeout((function(){var r=n.inProgressTaskCount;r<=0||(t=new jb(i,0),e=window.setInterval((function(){if(t.noticeEl.offsetParent){var o=n.inProgressTaskCount,s=Math.max(0,r-o);t.noticeEl.setText(i+" ("+s+"/"+r+")")}else clearInterval(e)}),300))}),1e3);this.onCleanCache((function(){clearTimeout(r),clearInterval(e),t&&(t.hide(),new jb(Ee("interface.msg-indexing-complete")))}))},e.prototype.linkResolver=function(){var t=this,e=Ph((this.linkResolverQueue=new Ah({onStop:function(){return t.trigger("resolved")},onCancel:function(){t.linkResolverQueue=null}})).generator());D(t,void 0,void 0,(function(){var t,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),t=I(e),a.label=1;case 1:return[4,t.next()];case 2:if((n=a.sent()).done)return[3,4];if(!(i=n.value)||"md"!==i.extension)return[3,3];this.resolveLinks(i.path),this.trigger("resolve",i),a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return r=a.sent(),o={error:r},[3,11];case 6:return a.trys.push([6,,9,10]),n&&!n.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return[2]}}))}))},e.prototype.resolveLinks=function(t){var e=this,n=this.getCache(t);if(n){var i={},r={};eA(n,(function(n){var o=n.link,s=ZD(o),a=e.getFirstLinkpathDest(s,t);a?i[a.path]=(i[a.path]||0)+1:(o=SA(o),r[o]=(r[o]||0)+1)})),this.resolvedLinks[t]=i,this.unresolvedLinks[t]=r}},e.prototype.onCleanCache=function(t){this.isCacheClean()?t():this.onCleanCacheCallbacks.push(t)},e.prototype.checkCleanCache=function(){for(;this.onCleanCacheCallbacks.length>0&&this.isCacheClean();){var t=this.onCleanCacheCallbacks.shift();try{t()}catch(t){console.error(t)}}},e.prototype.isCacheClean=function(){return 0===this.inProgressTaskCount&&0===this.linkResolverQueue.items.length&&!this.linkResolverQueue.runnable.isRunning()},e.prototype.updateRelatedLinks=function(t){"md"===Xt(t)&&(t=Jt(t)),t=t.toLowerCase();for(var e=this.resolvedLinks,n=this.unresolvedLinks,i=0,r=this.getCachedFiles();i<r.length;i++){var o=r[i];if(EA(t,e[o])||EA(t,n[o])){var s=this.vault.getAbstractFileByPath(o);s&&s instanceof cb&&this.linkResolverQueue.add(s)}}},e.prototype.onCreate=function(t){this.onCreateOrModify(t),t&&t instanceof cb&&this.updateRelatedLinks(t.name)},e.prototype.onCreateOrModify=function(t){var e=this;if(t&&t instanceof cb&&(this.uniqueFileLookup.add(t.name.toLowerCase(),t),ee(t.extension))){var n=t.stat,i=t.path,r=this.fileCache[i];if("md"!==t.extension)return r={mtime:n.mtime,size:n.size,hash:""},void this.saveFileCache(i,r);var o=!1;if(r){var s=r.mtime===n.mtime&&r.size===n.size,a=r.hash&&!!this.metadataCache[r.hash];o=s&&a}else r={mtime:0,size:0,hash:""},this.saveFileCache(i,r);if(o)this.linkResolverQueue.add(t);else{this.inProgressTaskCount++,this.workQueue.queue((function(){return D(e,void 0,void 0,(function(){var o;return A(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,D(e,void 0,void 0,(function(){var e,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:return[4,this.vault.readBinary(t)];case 1:return e=c.sent(),o=$(e),[4,X(e)];case 2:if(s=c.sent(),r.mtime=n.mtime,r.size=n.size,r.hash=s,this.saveFileCache(i,r),a=this.metadataCache[s])return this.linkResolverQueue.add(t),this.trigger("changed",t,o,a),[2];l=setTimeout((function(){new jb("Indexing taking a long time for "+t.path)}),1e4),c.label=3;case 3:return c.trys.push([3,,5,6]),[4,this.work(e)];case 4:return a=c.sent(),[3,6];case 5:return clearTimeout(l),[7];case 6:return a?(this.saveMetaCache(s,a),this.linkResolverQueue.add(t),this.trigger("changed",t,o,a),[2]):(console.log("Metadata failed to parse",t),[2])}}))}))];case 1:return s.sent(),[3,3];case 2:return o=s.sent(),console.error(o),[3,3];case 3:return this.inProgressTaskCount--,0===this.inProgressTaskCount&&this.trigger("finished"),[2]}}))}))}))}}},e.prototype.onDelete=function(t){t&&t instanceof cb&&(this.uniqueFileLookup.remove(t.name.toLowerCase(),t),ee(t.extension)&&this.deletePath(t.path))},e.prototype.deletePath=function(t){delete this.resolvedLinks[t],delete this.unresolvedLinks[t],this.saveFileCache(t,null),this.updateRelatedLinks(Kt(t)),this.linkResolverQueue.add(null),this.trigger("finished")},e.prototype.onRename=function(t,e){if(t&&t instanceof cb){var n=t.path,i=this,r=i.uniqueFileLookup,o=i.resolvedLinks,s=i.unresolvedLinks,a=i.fileCache;if(r.remove(Kt(e).toLowerCase(),t),r.add(t.name.toLowerCase(),t),ee(t.extension)){o.hasOwnProperty(e)&&(o[n]=o[e],delete o[e]),s.hasOwnProperty(e)&&(s[n]=s[e],delete s[e]),a.hasOwnProperty(e)&&(this.saveFileCache(n,a[e]),this.saveFileCache(e,null));var l=Kt(e),c=Kt(n);this.updateRelatedLinks(l),c!==l&&this.updateRelatedLinks(c),this.linkResolverQueue.add(null)}}},e.prototype.saveFileCache=function(t,e){e?(this.fileCache[t]=e,this.db&&this.db.transaction("file","readwrite").store.put(e,t)):(delete this.fileCache[t],this.db&&this.db.transaction("file","readwrite").store.delete(t))},e.prototype.saveMetaCache=function(t,e){if(e){this.metadataCache[t]=e;var n=JSON.parse(JSON.stringify(e));YD(n,JD),this.db&&this.db.transaction("metadata","readwrite").store.put(n,t)}else delete this.metadataCache[t],this.db&&this.db.transaction("metadata","readwrite").store.delete(t)},e.prototype.work=function(t){var e=this;if(this.workerResolve)throw new Error("Work queue must be sequential!");return new Promise((function(n){e.workerResolve=n,e.worker.postMessage({metadataCache:t},[t])}))},e.prototype.onReceiveMessageFromWorker=function(t){this.workerResolve&&(this.workerResolve(t.data),this.workerResolve=null)},e.prototype.cleanupDeletedCache=function(){var t=this.fileCache,e=this.metadataCache,n={};for(var i in t){if(t.hasOwnProperty(i))n[t[i].hash]=!0}for(var r in e)e.hasOwnProperty(r)&&(n[r]||this.saveMetaCache(r,null))},e.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.prototype.trigger.apply(this,P([e],n))},e.prototype.on=function(e,n,i){return t.prototype.on.call(this,e,n,i)},e}(sb),DA=function(){function t(t){this.components=[];var e=this.settingEl=t.createDiv("setting-item"),n=this.infoEl=e.createDiv("setting-item-info");this.nameEl=n.createDiv("setting-item-name"),this.descEl=n.createDiv("setting-item-description"),this.controlEl=e.createDiv("setting-item-control")}return t.prototype.setName=function(t){return this.nameEl.setText(t),this},t.prototype.setDesc=function(t){return this.descEl.setText(t),this},t.prototype.setClass=function(t){return this.settingEl.addClass(t),this},t.prototype.setTooltip=function(t){return $e(this.nameEl,t),this},t.prototype.setHeading=function(){return this.settingEl.addClass("setting-item-heading"),this},t.prototype.setDisabled=function(t){this.settingEl.toggleClass("is-disabled",t);for(var e=0,n=this.components;e<n.length;e++){n[e].setDisabled(t)}return this},t.prototype.addButton=function(t){var e=new PA(this.controlEl);return this.components.push(e),t(e),this},t.prototype.addExtraButton=function(t){var e=new OA(this.controlEl);return this.components.push(e),t(e),this},t.prototype.addToggle=function(t){var e=new FA(this.controlEl);return this.components.push(e),t(e),this.settingEl.addClass("mod-toggle"),this},t.prototype.addText=function(t){var e=new NA(this.controlEl);return this.components.push(e),t(e),this},t.prototype.addSearch=function(t){var e=new BA(this.controlEl);return this.components.push(e),t(e),this},t.prototype.addTextArea=function(t){var e=new RA(this.controlEl);return this.components.push(e),t(e),this},t.prototype.addMomentFormat=function(t){var e=new zA(this.controlEl);return this.components.push(e),t(e),this},t.prototype.addDropdown=function(t){var e=new HA(this.controlEl);return this.components.push(e),t(e),this},t.prototype.addSlider=function(t){var e=new VA(this.controlEl);return this.components.push(e),t(e),this},t.prototype.then=function(t){return t(this),this},t.prototype.clear=function(){return this.controlEl.empty(),this.components=[],this},t}(),AA=function(){function t(){this.disabled=!1}return t.prototype.then=function(t){return t(this),this},t.prototype.setDisabled=function(t){return this.disabled=t,this},t}(),TA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.registerOptionListener=function(t,e){var n=this;return t[e]=function(t){return void 0!==t&&n.setValue(t),n.getValue()},this},e}(AA),PA=function(t){function e(e){var n=t.call(this)||this;return(n.buttonEl=e.createEl("button")).addEventListener("click",(function(t){var e=n.clickCallback;!n.disabled&&e&&e(t)})),n}return M(e,t),e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.buttonEl.disabled=e,this},e.prototype.setCta=function(){return this.buttonEl.addClass("mod-cta"),this},e.prototype.removeCta=function(){return this.buttonEl.removeClass("mod-cta"),this},e.prototype.setWarning=function(){return this.buttonEl.addClass("mod-warning"),this},e.prototype.setTooltip=function(t){return $e(this.buttonEl,t),this},e.prototype.setButtonText=function(t){return this.buttonEl.setText(t),this},e.prototype.setIcon=function(t){return Ty(this.buttonEl,t,14),this},e.prototype.setClass=function(t){return this.buttonEl.addClass(t),this},e.prototype.onClick=function(t){return this.clickCallback=t,this},e}(AA),OA=function(t){function e(e){var n=t.call(this)||this,i=n.extraSettingsEl=e.createDiv("setting-editor-extra-setting-button clickable-icon");return Ty(i,nm),i.addEventListener("click",(function(){var t=n.changeCallback;!n.disabled&&t&&t()})),n}return M(e,t),e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.extraSettingsEl.toggleClass("is-disabled",e),this},e.prototype.setTooltip=function(t){return $e(this.extraSettingsEl,t),this},e.prototype.setIcon=function(t){return Ty(this.extraSettingsEl,t),this},e.prototype.onClick=function(t){return this.changeCallback=t,this},e}(AA),FA=function(t){function e(e){var n=t.call(this)||this;return n.on=!1,(n.toggleEl=e.createDiv("checkbox-container")).addEventListener("click",n.onClick.bind(n)),n}return M(e,t),e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.toggleEl.toggleClass("is-disabled",e),this},e.prototype.getValue=function(){return this.on},e.prototype.setValue=function(t){this.on=t,this.toggleEl.toggleClass("is-enabled",t);var e=this.changeCallback;return e&&e(t),this},e.prototype.setTooltip=function(t){return $e(this.toggleEl,t),this},e.prototype.onClick=function(){this.disabled||this.setValue(!this.getValue())},e.prototype.onChange=function(t){return this.changeCallback=t,this},e}(TA),IA=function(t){function e(e){var n=t.call(this)||this;return n.inputEl=e,e.addEventListener("input",n.onChanged.bind(n)),e.setAttribute("spellcheck","false"),n}return M(e,t),e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.inputEl.disabled=e,this},e.prototype.getValue=function(){return this.inputEl.value},e.prototype.setValue=function(t){return String.isString(t)&&(this.inputEl.value=t),this},e.prototype.setPlaceholder=function(t){return this.inputEl.setAttribute("placeholder",t),this},e.prototype.onChanged=function(){var t=this.changeCallback;t&&t(this.inputEl.value)},e.prototype.onChange=function(t){return this.changeCallback=t,this},e}(TA),NA=function(t){function e(e){return t.call(this,e.createEl("input",{type:"text"}))||this}return M(e,t),e}(IA),BA=function(t){function e(e){var n=this,i=e.createDiv("search-input-container"),r=i.createEl("input",{type:"text"});return(n=t.call(this,r)||this).containerEl=i,n.clearButtonEl=i.createDiv("search-input-clear-button",(function(t){t.addEventListener("click",(function(){n.disabled||(r.value="",r.focus(),n.onChanged())})),t.hide()})),n}return M(e,t),e.prototype.onChanged=function(){var e=this.inputEl.value;this.clearButtonEl.toggle(""!==e),t.prototype.onChanged.call(this)},e.prototype.setValue=function(e){return this.clearButtonEl.toggle(""!==e),t.prototype.setValue.call(this,e)},e}(IA),RA=function(t){function e(e){return t.call(this,e.createEl("textarea"))||this}return M(e,t),e}(IA),zA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.setDefaultFormat=function(t){return this.defaultFormat=t,this.setPlaceholder(t),this.updateSample(),this},e.prototype.setSampleEl=function(t){return this.sampleEl=t,this.updateSample(),this},e.prototype.setValue=function(e){return t.prototype.setValue.call(this,e),this.updateSample(),this},e.prototype.onChanged=function(){t.prototype.onChanged.call(this),this.updateSample()},e.prototype.updateSample=function(){var t=this.sampleEl;if(t){var e=this.inputEl.value||this.defaultFormat;if(e){var n=window.moment().format(e);t.setText(n)}else t.setText("")}},e}(NA),HA=function(t){function e(e){var n=t.call(this)||this;return n.selectEl=e.createEl("select","dropdown"),n.selectEl.addEventListener("change",(function(){var t=n.changeCallback;t&&t(n.getValue())})),n}return M(e,t),e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.selectEl.disabled=e,this},e.prototype.addOption=function(t,e){return this.selectEl.createEl("option",{value:t,text:e}),this},e.prototype.addOptions=function(t){for(var e in t)t.hasOwnProperty(e)&&this.selectEl.createEl("option",{value:e,text:t[e]});return this},e.prototype.getValue=function(){return this.selectEl.value},e.prototype.setValue=function(t){return this.selectEl.value=t,this},e.prototype.onChange=function(t){return this.changeCallback=t,this},e}(TA),VA=function(t){function e(e){var n=t.call(this)||this;n.dynamicTooltip=!1;var i=n.sliderEl=e.createEl("input",{type:"range",cls:"slider"});return i.addEventListener("input",(function(){var t=n.changeCallback;t&&t(n.getValue()),n.dynamicTooltip&&n.showTooltip()})),i.addEventListener("click",(function(t){t.stopPropagation()})),n}return M(e,t),e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.sliderEl.disabled=e,this},e.prototype.setLimits=function(t,e,n){return this.sliderEl.setAttrs({min:t,max:e,step:n}),this},e.prototype.getValue=function(){return this.sliderEl.valueAsNumber},e.prototype.setValue=function(t){this.sliderEl.valueAsNumber=t;var e=this.changeCallback;return e&&e(t),this},e.prototype.getValuePretty=function(){var t=this.sliderEl,e=this.getValue();return"any"===t.step||parseFloat(t.step)<1?e.toFixed(2):e.toString()},e.prototype.setDynamicTooltip=function(){var t=this.sliderEl;return t.addEventListener("mouseenter",this.showTooltip.bind(this)),t.addEventListener("mouseleave",Ke),this.dynamicTooltip=!0,this},e.prototype.showTooltip=function(){Ge(this.sliderEl,this.getValuePretty())},e.prototype.onChange=function(t){return this.changeCallback=t,this},e}(TA),qA=function(t){function e(e){var n=t.call(this)||this;return n.colorPickerEl=e.createEl("input",{type:"color"}),n.colorPickerEl.addEventListener("change",(function(){var t=n.changeCallback;t&&t(n.getValue())})),n}return M(e,t),e.prototype.getValue=function(){return this.colorPickerEl.value.slice(1)},e.prototype.getValueInt=function(){return parseInt(this.getValue(),16)},e.prototype.setValue=function(t){this.colorPickerEl.value="#"+t;var e=this.changeCallback;return e&&e(this.getValue()),this},e.prototype.setValueInt=function(t){return this.setValue(t.toString(16).padStart(6,"0"))},e.prototype.onChange=function(t){return this.changeCallback=t,this},e}(TA),jA={none:[],copy:["copy"],copyLink:["copy","link"],copyMove:["copy","move"],link:["link"],linkMove:["link","move"],move:["move"],all:["copy","link","move"],uninitialized:[]};function UA(t,e){e&&function(t,e){if("none"===e)return!0;var n=jA[t.dataTransfer.effectAllowed];return!!n&&n.contains(e)}(t,e)&&(t.dataTransfer.dropEffect=e)}var _A=function(){function t(t){this.ghostEl=null,this.actionEl=null,this.draggable=null,this.sourceEls=null,this.sourceClass="",this.hoverEl=null,this.hoverClass="",this.app=t,window.addEventListener("drag",this.onDrag.bind(this)),window.addEventListener("dragover",this.onDragOver.bind(this)),window.addEventListener("dragend",this.onDragEnd.bind(this)),window.addEventListener("drop",this.onDragEnd.bind(this)),window.addEventListener("dragleave",this.onDragLeave.bind(this))}return t.prototype.onDrag=function(t){var e=this.ghostEl;if(e){var n=t.clientX,i=t.clientY;if(0===n&&0===i)return;n+=5,i+=5,e.style.left=n+"px",e.style.top=i+"px",e.show()}this.setAction(null),t.dataTransfer.dropEffect="none"},t.prototype.onDragOver=function(t){t.defaultPrevented||(this.setAction(null),t.dataTransfer.dropEffect="none",this.updateHover(null,""))},t.prototype.onDragLeave=function(t){var e=this.ghostEl;e&&e.hide()},t.prototype.onDragEnd=function(){var t=this.ghostEl;t&&t.detach(),this.draggable=null,this.updateSource(null,""),this.updateHover(null,""),document.body.removeClass("is-grabbing")},t.prototype.onDragStart=function(t,e){this.draggable=e,document.body.addClass("is-grabbing"),t.dataTransfer.effectAllowed="all";var n=this.ghostEl;n&&n.detach();var i=this.ghostEl=document.body.createDiv("drag-ghost"),r=i.createDiv("drag-ghost-self");e.icon&&Ty(r,e.icon),e.title&&r.createSpan({text:e.title}),this.actionEl=i.createDiv("drag-ghost-action");var o=new Image;o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",document.body.append(o),t.dataTransfer.setDragImage(o,0,0),setTimeout((function(){return o.detach()}),0)},t.prototype.handleDrag=function(t,e){var n=this;By.isMobile||(t.draggable=!0,t.addEventListener("dragstart",(function(t){var i=e(t);i&&n.onDragStart(t,i)})))},t.prototype.dragFile=function(t,e,n){return mh(t.dataTransfer,this.app.getObsidianUrl(e)),{source:n,type:"file",icon:Gg,title:re(e.path),file:e}},t.prototype.dragFolder=function(t,e,n){return{source:n,type:"folder",icon:Kg,title:e.name,file:e}},t.prototype.dragFiles=function(t,e,n){if(0===e.length)return null;for(var i,r=0,o=0,s=[],a=0,l=e;a<l.length;a++){var c=l[a];c instanceof cb?(r++,s.push(this.app.getObsidianUrl(c))):c instanceof ub&&o++}return o>0&&r>0?i=r+" files and "+o+" folders":o>0?i=o+" folders":r>0&&(i=r+" files"),mh(t.dataTransfer,s.join("\n")),{source:n,type:"files",icon:im,title:i,files:e}},t.prototype.dragLink=function(t,e,n,i){var r=this.app.metadataCache.getFirstLinkpathDest(ZD(e),n),o=e,s=e;return r&&(o=this.app.getObsidianUrl(r),s=re(r.path)),mh(t.dataTransfer,o),{source:i,type:"link",icon:um,title:s,linktext:e,sourcePath:n,file:r}},t.prototype.handleDrop=function(t,e,n){var i=this;t.addEventListener("dragover",(function(t){if((n||i.draggable)&&!t.defaultPrevented){var r=e(t,i.draggable,!0);if(r){t.preventDefault();var o=r.action,s=r.dropEffect,a=r.hoverEl,l=r.hoverClass;o&&i.setAction(o),s&&(t.dataTransfer.dropEffect=s),a&&l&&i.updateHover(a,l)}}})),t.addEventListener("drop",(function(t){(n||i.draggable)&&(t.defaultPrevented||e(t,i.draggable,!1)&&t.preventDefault())}))},t.prototype.setAction=function(t){var e=this.actionEl;e&&(t?(e.setText(t),e.show()):e.hide())},t.prototype.updateSource=function(t,e){if(this.sourceEls)for(var n=0,i=this.sourceEls;n<i.length;n++){i[n].removeClass(this.sourceClass)}if(this.sourceEls=t,this.sourceClass=e,t)for(var r=0,o=t;r<o.length;r++){o[r].addClass(e)}},t.prototype.updateHover=function(t,e){t!==this.hoverEl&&(this.hoverEl&&this.hoverEl.removeClass(this.hoverClass),this.hoverEl=t,this.hoverClass=e,t&&t.addClass(e))},t}(),WA=function(){function t(t,e){this.view=t,this.app=t.app,this.editor=e}return t.prototype.handlePaste=function(t){var e=this;if(t.defaultPrevented||this.app.workspace.trigger("editor-paste",t,this.editor,this.view),t.defaultPrevented)return!0;var n=t.clipboardData,i=this.handleDataTransfer(n);if(i)return this.editor.replaceSelection(i,"paste"),t.preventDefault(),!0;if(!n.getData("text/plain")){var r=n.items,o=[],s=function(t){if(!r.hasOwnProperty(t))return"continue";var e=r[t];if("file"!==e.kind)return"continue";var n=e.getAsFile();if(!n)return"continue";var i=new FileReader,s=null;i.onload=function(t){s=t.target.result},i.readAsArrayBuffer(n);var a=n.type,l="";"image/png"===a?l="png":"image/jpeg"===a&&(l="jpg"),l&&s&&o.push({name:"Pasted image",extension:l,data:s})};for(var a in r)s(a);D(e,void 0,void 0,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:return By.isDesktopApp&&0===o.length?[4,de()]:[3,2];case 1:(n=i.sent())&&o.push(n),i.label=2;case 2:t=0,e=o,i.label=3;case 3:return t<e.length?(n=e[t]).data?[4,this.saveAttachment(n.name,n.extension,n.data)]:[3,5]:[3,6];case 4:i.sent(),i.label=5;case 5:return t++,[3,3];case 6:return[2]}}))}))}return!1},t.prototype.handleDragOver=function(t){var e=this.app.dragManager.draggable;if(e){if(dt?t.shiftKey:t.altKey)return;"file"===e.type?(UA(t,"link"),this.app.dragManager.setAction(Ee("interface.drag-and-drop.insert-link-here"))):"files"===e.type?(UA(t,"link"),this.app.dragManager.setAction(Ee("interface.drag-and-drop.insert-links-here"))):("link"===e.type||"heading"===e.type)&&(UA(t,"link"),this.app.dragManager.setAction(Ee("interface.drag-and-drop.insert-link-here")))}else t.ctrlKey?UA(t,"link"):UA(t,"copy")},t.prototype.handleDrop=function(t){var e=this.app,n=null,i=e.dragManager.draggable;if(i){if(dt?t.shiftKey:t.altKey)return t.preventDefault(),this.view.handleDrop(t,i,!1),!0;if("file"===i.type)n=e.fileManager.generateMarkdownLink(i.file,this.view.file.path);else if("files"===i.type){for(var r=[],o=0,s=i.files;o<s.length;o++){var a=s[o];a instanceof cb&&r.push(e.fileManager.generateMarkdownLink(a,this.view.file.path))}n=r.join("\n")}else if("link"===i.type)if(i.file){var l=tA(i.linktext).subpath;n=e.fileManager.generateMarkdownLink(i.file,this.view.file.path,l)}else n=i.linktext;else if("heading"===i.type){l=rA(i.heading.heading);n=e.fileManager.generateMarkdownLink(i.file,this.view.file.path,"#"+l)}}else{if(t.defaultPrevented||this.app.workspace.trigger("editor-drop",t,this.editor,this.view),t.defaultPrevented)return!0;t.shiftKey||(n=this.handleDataTransfer(t.dataTransfer)),n||(n=this.handleDropIntoEditor(t))}if(String.isString(n)){var c=this.editor,u=c.posAtMouse(t);return c.setCursor(u),c.replaceSelection(n),c.focus(),t.preventDefault(),!0}return!1},t.prototype.handleDropIntoEditor=function(t){var e=this,n=t.dataTransfer.files;if(n.length>0){for(var i=[],r=0;r<n.length;r++){(s=n[r].path)&&i.push(s)}if(t.ctrlKey){var o=[];for(r=0;r<i.length;r++){var s,a=Kt(ie(s=i[r])),l=Xt(a),c="md"===l?Jt(a):a,u=rg(s),h="["+c+"]("+(u=u.startsWith("/")?"file://"+u:"file:///"+u)+")";Vt.contains(l)&&(h="!"+h),o.push(h)}return o.join("\n")}return D(e,void 0,void 0,(function(){var t,e,r,o,s,a;return A(this,(function(l){switch(l.label){case 0:t=0,l.label=1;case 1:return t<i.length?(e=i[t],r=Kt(ne(e)),o=Xt(r),s=Jt(r),[4,ce(e)]):[3,5];case 2:return(a=l.sent())?[4,this.saveAttachment(s,o,a,t<n.length-1)]:[3,4];case 3:l.sent(),l.label=4;case 4:return t++,[3,1];case 5:return[2]}}))})),""}return null},t.prototype.handleDataTransfer=function(t){var e=t.getData("text/html");if(e){return t.files.length>0&&(/<!--StartFragment--><img src=[^>]+><!--EndFragment-->/.test(e)||/^<meta[^>]+><img src=[^>]+>/.test(e))?null:this.app.vault.getConfig("autoConvertHtml")?GD(e):null}var n=t.getData("text/plain")||"",i=t.getData("text/uri-list");if(i&&i.toLowerCase()!==n.toLowerCase()){var r=Xt(Kt(i)),o="["+n+"]("+i+")";return Vt.contains(r)&&(o="!"+o),o}return null},t.prototype.saveAttachment=function(t,e,n,i){return D(this,void 0,void 0,(function(){var r,o;return A(this,(function(s){switch(s.label){case 0:return"Pasted image"===t&&(t+=" "+window.moment().format("YYYYMMDDHHmmss")),[4,this.app.saveAttachment(t,e,n)];case 1:return(r=s.sent())&&(o=this.app.fileManager.generateMarkdownLink(r,this.view.file.path),i&&(o+="\n\n"),this.editor.replaceSelection(o)),[2]}}))}))},t.prototype.onContextMenu=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,x,S,E,M,L=this;return A(this,(function(T){switch(T.label){case 0:return n=(e=this).app,i=e.editor,r=i.posAtMouse(t),o=null,t.button||t.buttons||t.which||(s=i.getCursor("from"),a=i.getCursor("to"),$u(s,r)&&$u(r,a)||(r=i.getCursor("head"),o=i.listSelections(),t.stopPropagation())),r?(l=By.isDesktopApp&&ae("electron"),c=!0,u=!0,h=!0,p="",d=null,f=null,g=null,(m=i.getSpellcheckStatus(t,r))&&(p=m.misspelledWord,d=m.dictionarySuggestions,f=m.replace,g=m.addToDictionary),l&&t.isTrusted?(v=l.ipcRenderer,[4,new Promise((function(t){v.once("context-menu",(function(e,n){t(n)})),v.send("context-menu")}))]):[3,2]):[2];case 1:return y=T.sent()||{},M=y.editFlags||{},c=M.canCut,u=M.canCopy,h=M.canPaste,y.misspelledWord&&(p=y.misspelledWord,d=y.dictionarySuggestions,f=function(t){v.send("context-menu-action","replaceMisspelling",t)},g=function(t){v.send("context-menu-action","addWordToDictionary",t)}),[3,3];case 2:t.preventDefault(),T.label=3;case 3:if(o&&i.setSelections(o),b=new zb(n),p){if(0===(w=d||[]).length)b.addItem((function(t){return t.setTitle(Ee("editor.spellcheck.no-suggestion"))}));else for(w.length>6&&(w=w.slice(0,6)),k=function(t){b.addItem((function(e){return e.setTitle(t).setIcon(Gm).onClick((function(){b.hide(),f&&f(t)}))}))},C=0,x=w;C<x.length;C++)S=x[C],k(S);b.addSeparator().addItem((function(t){return t.setTitle(Ee("editor.spellcheck.add-to-dictionary")).setIcon(ev).onClick((function(){g&&g(p)}))})),b.addSeparator()}return(E=i.getClickableTokenAt(r))&&("internal-link"===E.type?n.workspace.handleLinkContextMenu(b,E.text,this.view.file.path):"external-link"===E.type?n.workspace.handleExternalLinkContextMenu(b,E.text):E.type),n.workspace.trigger("editor-menu",b,i,this.view),b.items.length>0&&b.addSeparator(),b.addItem((function(t){return t.setTitle(Ee("interface.menu.cut")).setIcon(wy).setDisabled(!c).onClick((function(){return D(L,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return l?(l.ipcRenderer.send("context-menu-action","cut"),[3,3]):[3,1];case 1:return t=i.getSelection(),i.replaceSelection(""),[4,navigator.clipboard.writeText(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}))})),b.addItem((function(t){return t.setTitle(Ee("interface.menu.copy")).setIcon(by).setDisabled(!u).onClick((function(){return D(L,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return l?(l.ipcRenderer.send("context-menu-action","copy"),[3,3]):[3,1];case 1:return t=i.getSelection(),[4,navigator.clipboard.writeText(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}))})),b.addItem((function(t){return t.setTitle(Ee("interface.menu.paste")).setIcon(ky).setDisabled(!h).onClick((function(){return D(L,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return l?(l.ipcRenderer.send("context-menu-action","paste"),[3,3]):[3,1];case 1:return[4,navigator.clipboard.readText()];case 2:t=e.sent(),i.replaceSelection(t),e.label=3;case 3:return[2]}}))}))}))})),b.addItem((function(t){return t.setTitle(Ee("interface.menu.paste-as-plain-text")).setIcon(Cy).setDisabled(!h).onClick((function(){return D(L,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return l?(l.ipcRenderer.send("context-menu-action","pasteAndMatchStyle"),[3,3]):[3,1];case 1:return[4,navigator.clipboard.readText()];case 2:t=e.sent(),i.replaceSelection(t),e.label=3;case 3:return[2]}}))}))}))})),b.addItem((function(t){return t.setTitle(Ee("interface.menu.select-all")).setIcon(Sy).onClick((function(){var t=i.lineCount()-1;i.setSelection({line:0,ch:0},{line:t,ch:i.getLine(t).length})}))})),b.showAtMouseEvent(t),[2]}}))}))},t}();function GA(t,e){return{modifiers:t,key:e}}function KA(t){return t.startsWith("Key")&&4===t.length?t.charAt(3):t}function $A(t){var e=[];Ib.forEach((function(n){t.modifiers.contains(n)&&e.push(Fb[n])}));var n=(t.code?KA(t.code):t.key)||"";return e.push(function(t){if(Pb.hasOwnProperty(t))return Pb[t];var e=t.replace(/([A-Z])/g," $1").trim();return e.charAt(0).toUpperCase()+e.slice(1)}(n)),e.join(dt?" ":" + ")}var YA,JA,QA,XA=function(){function t(t){this.defaultKeys={},this.customKeys={},this.baked=!1,this.bakedHotkeys=[],this.bakedIds=[],this.app=t,this.app.scope.register(null,null,this.onTrigger.bind(this))}return t.prototype.save=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.app.vault.writeConfigJson("hotkeys",this.customKeys)];case 1:return t.sent(),[2]}}))}))},t.prototype.load=function(){return D(this,void 0,void 0,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:return[4,this.app.vault.readConfigJson("hotkeys")];case 1:if(t=i.sent(),e=!1,t||(t=this.app.vault.getConfig("hotkeys"),e=!0),t&&"object"==typeof t){for(n in t)n.startsWith("explorer:")?(t["file-"+n]=t[n],delete t[n]):"star:star-current-file"===n&&(t["starred:star-current-file"]=t[n],delete t[n]);this.customKeys=t||{},this.baked=!1}return e?(this.app.vault.setConfig("hotkeys",void 0),[4,this.save()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.getDefaultHotkeys=function(t){return this.defaultKeys[t]},t.prototype.addDefaultHotkeys=function(t,e){this.defaultKeys[t]=e,this.baked=!1},t.prototype.removeDefaultHotkeys=function(t){delete this.defaultKeys[t],this.baked=!1},t.prototype.getHotkeys=function(t){return this.customKeys[t]},t.prototype.setHotkeys=function(t,e){this.customKeys[t]=e,this.baked=!1},t.prototype.removeHotkeys=function(t){delete this.customKeys[t],this.baked=!1},t.prototype.printHotkeyForCommand=function(t){var e=this.getHotkeys(t),n=this.getDefaultHotkeys(t);return e&&e.length>0?$A(e[0]):n&&n.length>0?$A(n[0]):""},t.prototype.bake=function(){if(!this.baked){this.baked=!0;var t=this.defaultKeys,e=this.customKeys,n=[],i=[],r=function(t,e){for(var r=0,o=e;r<o.length;r++){var s=o[r];n.push({modifiers:Bb.compileModifiers(s.modifiers),key:s.code?KA(s.code):s.key}),i.push(t)}};for(var o in e)e.hasOwnProperty(o)&&r(o,e[o]);for(var o in t)t.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&r(o,t[o]);this.bakedHotkeys=n,this.bakedIds=i}},t.prototype.onTrigger=function(t,e){this.bake();for(var n=this.bakedHotkeys,i=this.bakedIds,r=0;r<n.length;r++){var o=n[r];if(Bb.isMatch(o,e)){var s=i[r];if(this.app.commands.executeCommandById(s))return!1}}},t}(),ZA="obsidian-search-match-highlight",tT=function(){function t(t,e,n){var i=this;this.editor=null,this.scope=null,this.parentContainer=null,this.searchContainer=null,this.searchInputEl=null,this.replaceInputEl=null,this.cursor=null,this.isActive=!1,this.isReplace=!1,this.app=t,this.editor=e;var r=this.scope=new Nb(t.scope);this.parentContainer=n;var o=this.searchContainer=n.createDiv("document-search-container"),s=this.searchContainer.createDiv("document-search");this.searchInputEl=s.createEl("input",{cls:"document-search-input",type:"text"}),this.searchInputEl.setAttribute("placeholder",Ee("editor.search.placeholder-find"));var a=s.createDiv({cls:"document-search-buttons",type:"text"});a.createEl("button",{cls:"document-search-button",text:Ee("editor.search.label-previous")},(function(t){$e(t,$A(GA(["Shift"],"F3")),{placement:"top"}),t.addEventListener("click",(function(t){t.preventDefault(),i.findPrevious()}))})),a.createEl("button",{cls:"document-search-button",text:Ee("editor.search.label-next")},(function(t){$e(t,$A(GA([],"F3")),{placement:"top"}),t.addEventListener("click",(function(t){t.preventDefault(),i.findNext()}))})),a.createEl("button",{cls:"document-search-button",text:Ee("editor.search.label-all")},(function(t){$e(t,$A(GA(["Alt"],"Enter")),{placement:"top"}),t.addEventListener("click",(function(t){t.preventDefault(),i.searchAll()}))})),a.createSpan("document-search-close-button",(function(t){$e(t,Ee("editor.search.label-exit-search"),{placement:"top"}),t.addEventListener("click",(function(t){t.preventDefault(),i.hide()}))})),this.searchInputEl.addEventListener("input",this.onSearchInput.bind(this));var l=this.searchContainer.createDiv("document-replace");this.replaceInputEl=l.createEl("input",{cls:"document-replace-input",type:"text"}),this.replaceInputEl.setAttribute("placeholder",Ee("editor.search.placeholder-replace"));var c=l.createDiv({cls:"document-replace-buttons",type:"text"});c.createEl("button",{cls:"document-search-button",text:Ee("editor.search.label-replace")},(function(t){t.addEventListener("click",i.replaceCurrentMatch.bind(i)),$e(t,$A(GA([],"Enter")),{placement:"top"})})),c.createEl("button",{cls:"document-search-button",text:Ee("editor.search.label-replace-all")},(function(t){$e(t,$A(GA(["Mod","Alt"],"Enter")),{placement:"top"}),t.addEventListener("click",i.replaceAll.bind(i))})),o.hide(),r.register(["Shift"],"F3",this.findPrevious.bind(this)),r.register([],"F3",this.findNext.bind(this)),r.register([],"Enter",this.onEnter.bind(this)),r.register(["Alt"],"Enter",this.onAltEnter.bind(this)),r.register(["Mod","Alt"],"Enter",this.onModAltEnter.bind(this)),r.register([],"Escape",this.hide.bind(this)),r.register([],"Tab",this.goToNextInput.bind(this)),r.register(["Shift"],"Tab",this.goToNextInput.bind(this))}return t.prototype.show=function(t){void 0===t&&(t=!1),this.isActive=!0,this.isReplace=t;var e=this,n=e.editor,i=e.app,r=e.parentContainer,o=e.searchContainer,s=e.searchInputEl;o.show();var a=n.getSelection();a&&(s.value=a),s.focus(),s.select(),i.keymap.pushScope(this.scope),t?(r.removeClass("is-searching"),r.addClass("is-replacing")):(r.removeClass("is-replacing"),r.addClass("is-searching")),o.toggleClass("mod-replace-mode",t),this.onSearchInput()},t.prototype.hide=function(){this.isActive=!1;var t=this,e=t.app,n=t.editor,i=t.parentContainer,r=t.searchContainer,o=t.searchInputEl;r.hide(),o.value="",o.removeClass("mod-no-match"),i.removeClass("is-replacing"),i.removeClass("is-searching"),this.cursor=null,n.removeHighlights("obsidian-search-match-highlight"),e.keymap.popScope(this.scope),n.focus()},t.prototype.onSearchInput=function(){var t=this.editor;this.cursor=t.searchCursor(this.getQuery());var e=this.cursor.findNext();e?this.highlight([e]):this.clear(),this.searchInputEl.toggleClass("mod-no-match",!e)},t.prototype.findPrevious=function(){if(this.cursor){var t=this.cursor.findPrevious();t?this.highlight([t]):this.clear()}},t.prototype.findNextOrReplace=function(){if(this.cursor){var t=this.replaceInputEl.value;this.replaceInputEl===document.activeElement&&""!==t&&this.cursor.replace(t),this.findNext()}},t.prototype.replaceCurrentMatch=function(){if(this.cursor){var t=this.replaceInputEl.value;this.cursor.replace(t),this.findNext()}},t.prototype.replaceAll=function(){var t=this.replaceInputEl.value;this.cursor.replaceAll(t,"searchReplace")},t.prototype.findNext=function(){if(this.cursor){var t=this.cursor.findNext();t?this.highlight([t]):this.clear()}},t.prototype.searchAll=function(){var t=this.cursor.findAll();this.highlight(t)},t.prototype.highlight=function(t){this.editor.addHighlights(t,ZA,!0,!0);var e=t[0];e&&this.editor.scrollIntoView(e,!0)},t.prototype.clear=function(){this.editor.removeHighlights(ZA)},t.prototype.goToNextInput=function(t){this.searchInputEl===document.activeElement?(this.replaceInputEl.focus(),t.preventDefault()):this.replaceInputEl===document.activeElement&&(this.searchInputEl.focus(),t.preventDefault())},t.prototype.getQuery=function(){return this.searchInputEl.value},t.prototype.onEnter=function(t){this.searchInputEl!==document.activeElement&&this.replaceInputEl!==document.activeElement||this.findNextOrReplace()},t.prototype.onAltEnter=function(t){this.searchInputEl!==document.activeElement&&this.replaceInputEl!==document.activeElement||this.searchAll()},t.prototype.onModAltEnter=function(t){this.isReplace&&this.replaceInputEl===document.activeElement&&this.replaceAll()},t}(),eT=window.CodeMirror,nT=/[^\\][$|]/,iT=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,rT=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i,oT=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,sT=/^\.{0,2}\/[^\>\s]+/,aT=/^(?:[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s])+/;!function(t){t[t.NONE=0]="NONE",t[t.NORMAL=1]="NORMAL",t[t.WITH_SPACE=2]="WITH_SPACE"}(JA||(JA={})),function(t){t[t.NONE=0]="NONE",t[t.SIMPLE=1]="SIMPLE",t[t.NORMAL=2]="NORMAL"}(QA||(QA={}));var lT,cT,uT=/^\s*[^\|].*?\|.*[^|]\s*$/,hT=/^\s*[^\|].*\|/,pT=/^\s*\|[^\|]+\|.+\|\s*$/,dT=/^\s*\|/,fT=/^\s*-+\s*:\s*$/,gT=/^\s*:\s*-+\s*$/,mT=/^\s*:\s*-+\s*:\s*$/,vT=/^\s*-+\s*$/;!function(t){t[t.NONE=0]="NONE",t[t.FRONT_MATTER=1]="FRONT_MATTER",t[t.FRONT_MATTER_END=2]="FRONT_MATTER_END"}(lT||(lT={})),function(t){t[t.NONE=0]="NONE",t[t.BARELINK=1]="BARELINK",t[t.FOOTREF=2]="FOOTREF",t[t.NORMAL=3]="NORMAL",t[t.FOOTNOTE=4]="FOOTNOTE",t[t.MAYBE_FOOTNOTE_URL=5]="MAYBE_FOOTNOTE_URL",t[t.BARELINK2=6]="BARELINK2",t[t.FOOTREF2=7]="FOOTREF2",t[t.INTERNAL_LINK=8]="INTERNAL_LINK",t[t.EMBED=9]="EMBED"}(cT||(cT={}));var yT=((YA={})[cT.BARELINK]="hmd-barelink",YA[cT.BARELINK2]="hmd-barelink2",YA[cT.FOOTREF]="hmd-barelink footref",YA[cT.FOOTNOTE]="hmd-footnote line-HyperMD-footnote",YA[cT.FOOTREF2]="hmd-footref2",YA[cT.INTERNAL_LINK]="hmd-internal-link",YA[cT.EMBED]="hmd-internal-link hmd-embed",YA);function bT(t){t.hmdTable=QA.NONE,t.hmdTableColumns=[],t.hmdTableID=null,t.hmdTableCol=t.hmdTableRow=0}var wT=/^\s+((\d+[).]|[-*+])\s+)?/,kT={hr:"line-HyperMD-hr line-background-HyperMD-hr-bg hr",list1:"list-1",list2:"list-2",list3:"list-3",code:"inline-code",hashtag:"hashtag meta"};window.CodeMirror.defineMode("hypermd",(function(t,e){var n={front_matter:!0,math:!0,table:!0,toc:!0,orgModeMarkup:!0,hashtag:!0,fencedCodeBlockHighlighting:!0,name:"markdown",highlightFormatting:!0,taskLists:!0,strikethrough:!0,emoji:!1,highlight:!0,tokenTypeOverrides:kT};Object.assign(n,e),n.tokenTypeOverrides!==kT&&(n.tokenTypeOverrides=Object.assign({},kT,n.tokenTypeOverrides)),n.name="markdown";var i={htmlBlock:null},r=eT.getMode(t,n),o=L({},r);function s(t,e){var n=e.hmdInnerExitChecker(t,e),i=e.hmdInnerStyle,r=(!n||!n.skipInnerMode)&&e.hmdInnerMode.token(t,e.hmdInnerState)||"";return i&&(r+=" "+i),n?(n.style&&(r+=" "+n.style),n.endPos&&(t.pos=n.endPos),e.hmdInnerExitChecker=null,e.hmdInnerMode=null,e.hmdInnerState=null,e.hmdOverride=null):t.start===t.pos&&t.skipToEnd(),r.trim()||null}function a(t){return{token:function(e){var n=e.string.indexOf(t,e.start);return-1===n?e.skipToEnd():0===n?e.pos+=t.length:(e.pos=n,"\\"===e.string.charAt(n-1)&&e.pos++),null}}}function l(t,e){return e||(e={}),function(n,i){return n.string.substr(n.start,t.length)===t?(e.endPos=n.start+t.length,e):null}}function c(e,n,i,r){if("string"==typeof i&&(i=eT.getMode(t,i)),!(i&&"null"!==i.name||(i="endTag"in r?a(r.endTag):"function"==typeof r.fallbackMode&&r.fallbackMode())))throw new Error("no mode");n.hmdInnerExitChecker="endTag"in r?l(r.endTag):r.exitChecker,n.hmdInnerStyle=r.style,n.hmdInnerMode=i,n.hmdOverride=s,n.hmdInnerState=eT.startState(i);var o=r.style||"";return r.skipFirstToken||(o+=" "+i.token(e,n.hmdInnerState)),o.trim()}return o.startState=function(){var t=r.startState();return bT(t),t.hmdOverride=null,t.hmdInnerExitChecker=null,t.hmdInnerMode=null,t.hmdLinkType=cT.NONE,t.hmdNextMaybe=n.front_matter?lT.FRONT_MATTER:lT.NONE,t.hmdNextState=null,t.hmdNextStyle=null,t.hmdNextPos=null,t.hmdHashtag=!1,t},o.copyState=function(t){for(var e=r.copyState(t),n=0,i=["hmdLinkType","hmdNextMaybe","hmdTable","hmdTableID","hmdTableCol","hmdTableRow","hmdOverride","hmdInnerMode","hmdInnerStyle","hmdInnerExitChecker","hmdNextPos","hmdNextState","hmdNextStyle","hmdHashtag","comment","internalLink","internalEmbed","inlineFootnote","hasAlias","isAlias"];n<i.length;n++){var o=i[n];e[o]=t[o]}return e.hmdTableColumns=t.hmdTableColumns.slice(0),t.hmdInnerMode&&(e.hmdInnerState=eT.copyState(t.hmdInnerMode,t.hmdInnerState)),e},o.blankLine=function(t){var e,n=t.hmdInnerMode;return n?n.blankLine&&(e=n.blankLine(t.hmdInnerState)):e=r.blankLine(t),e||(e=""),-1===t.code&&(e+=" line-HyperMD-codeblock line-background-HyperMD-codeblock-bg"),bT(t),e.trim()||null},o.indent=function(t,e){var n=t.hmdInnerMode||r,i=n.indent;return"function"==typeof i?i.apply(n,arguments):eT.Pass},o.innerMode=function(t){return t.hmdInnerMode?{mode:t.hmdInnerMode,state:t.hmdInnerState}:r.innerMode(t)},o.token=function(e,o){if(e.tabSize=4,o.hmdOverride)return o.hmdOverride(e,o);if(o.hmdNextMaybe===lT.FRONT_MATTER){if("---"===e.string)return o.hmdNextMaybe=lT.FRONT_MATTER_END,c(e,o,"yaml",{style:"hmd-frontmatter",fallbackMode:function(){return a("---")},exitChecker:function(t,e){return"---"===t.string?(e.hmdNextMaybe=lT.NONE,{endPos:3}):null}});o.hmdNextMaybe=lT.NONE}var s,u=o.f===i.htmlBlock,h=-1===o.code,p=0===e.start,d=o.linkText,f=o.linkHref,g=!(h||u),m=g&&!(o.code||o.indentedCode||o.linkHref),v="",y=!1,b=-1,w=null;if(p&&(o.hmdLinkType=cT.NONE),g){if(o.list&&!o.header&&/#/.test(e.peek())&&/^\s*[*\-+]\s$/.test(e.string.substr(0,e.pos))){var k=e.match(/^(#+)(?: |$)/,!0);if(k){var C=k[1].length;return o.header=C,"formatting formatting-header formatting-header-"+C+" header header-"+C}}if(n.math&&m&&o.hmdLinkType===cT.NONE){var x=e.match(/^(\$)[^\s$]/,!1),S=e.match(/^(\${2})/,!1),E=x?"$":"$$",M=e.string.slice(e.pos),L=x&&M.match(/[^\s\\]\$([^0-9]|$)/);if(L||S){var D=eT.getMode(t,{name:"stex"}),A="stex"!==D.name;return v+=c(e,o,D,{style:"math",skipFirstToken:A,fallbackMode:function(){return a(E)},exitChecker:l(E,{style:"formatting formatting-math formatting-math-end math-"})}),L?(A&&(e.pos+=x[1].length),v+=" formatting formatting-math formatting-math-begin"):(A&&(e.pos+=S[1].length),v+=" formatting formatting-math formatting-math-begin math-block")}}if(m){o.internalLink?(o.hmdLinkType=cT.INTERNAL_LINK,o.internalLink=!1):o.internalEmbed&&(o.hmdLinkType=cT.EMBED,o.internalEmbed=!1);var T=o.hmdLinkType===cT.INTERNAL_LINK||o.hmdLinkType===cT.EMBED;if(T)if(e.match(/^\|/,!1))o.isAlias=!0,b=e.pos+1,v+=" link-alias-pipe";else if(e.match(/^\]\]/,!1))o.hmdLinkType=cT.NONE,o.linkText=!1,o.isAlias=!1,o.hasAlias=!1,b=e.pos+2,v+=" formatting-link formatting-link-end";else{y=!0,o.isAlias&&(v+=" link-alias"),o.hasAlias&&!o.isAlias&&(v+=" link-has-alias");var P=e.match(/^([^|\]]*?)/,!1);b=e.pos+Math.max(1,P[0].length)}else if(P=e.match(/^(!?\[\[)(.*?)]]/,!1))"!"===P[1].charAt(0)?(v+=" formatting-link formatting-link-start formatting-embed",o.internalEmbed=!0):(v+=" formatting-link formatting-link-start",o.internalLink=!0),b=e.pos+P[1].length,o.hasAlias=P[2].contains("|"),o.f=o.inline=r.startState().inline;if(o.hmdLinkType===cT.FOOTREF)if(y=!0,e.match(/^\]/,!1))o.hmdLinkType=cT.NONE,b=e.pos+1,v+=" footref formatting formatting-link formatting-link-end";else{var P=e.match(/^([^\]]*?)/,!1);b=e.pos+Math.max(1,P[0].length),v+=" footref"}else(P=e.match(/^\[\^(.*?)](:?)/,!1))&&!P[2]&&(v+=" footref formatting formatting-link formatting-link-start",o.hmdLinkType=cT.FOOTREF,y=!0,b=e.pos+1,o.f=o.inline=r.startState().inline);e.match(/^\^([a-zA-Z0-9\-]+)$/)&&(v+=" blockid"),!o.inlineFootnote&&e.match(/^\^\[/,!1)?(o.inlineFootnote=!0,v+=" inline-footnote-start",b=e.pos+2):o.inlineFootnote&&!T&&o.hmdLinkType===cT.NONE&&e.match(/^]/)&&(o.inlineFootnote=!1,v+=" inline-footnote-end",b=e.pos);var O=e.pos;w=function(t){var n=e.string.slice(O,t);if((o.hmdLinkType===cT.INTERNAL_LINK||o.hmdLinkType===cT.EMBED)&&n.indexOf("|")>=1)return O+n.indexOf("|");var i=e.string.slice(O,t).match(/^(.+?)%%/);return i?O+i[1].length:t},o.comment?e.match(/^%%/,!1)&&(v+=" comment comment-end",o.comment=!1,b=e.pos+2):e.match(/^%%/,!1)&&(v+=" comment comment-start",o.comment=!0,b=e.pos+2)}o.comment&&(v+=" comment"),m&&(o.hmdLinkType||o.image||o.linkText||!e.match(rT)&&!e.match(oT)||(v+="url",b=e.pos))}if(o.hmdNextState)e.pos=o.hmdNextPos,v+=" "+(o.hmdNextStyle||""),Object.assign(o,o.hmdNextState),o.hmdNextState=null,o.hmdNextStyle=null,o.hmdNextPos=null;else if(y){var F=r.copyState(o),I=e.pos;v+=" "+(r.token(e,F)||""),e.pos=I}else v+=" "+(r.token(e,o)||"");v.contains("formatting-task")&&(v+=" line-HyperMD-task-line"),-1!==b&&(e.pos=b),w&&(e.pos=w(e.pos)),o.hmdHashtag&&(v+=" "+n.tokenTypeOverrides.hashtag),!i.htmlBlock&&o.htmlState&&(i.htmlBlock=o.f);var N=o.f===i.htmlBlock,B=-1===o.code;g=g&&!(N||B),(m=m&&g&&!(o.code||o.indentedCode||o.linkHref))&&(s=e.current().match(nT))&&(e.pos=e.start+s.index+1);var R=e.current();if(N!==u&&(N?(v+=" hmd-html-begin",i.htmlBlock=o.f):v+=" hmd-html-end"),(h||B)&&(o.localMode&&h||(v=v.replace("inline-code","")),v+=" line-HyperMD-codeblock line-background-HyperMD-codeblock-bg hmd-codeblock",B!==h&&(B?h||(v+=" line-HyperMD-codeblock-begin line-background-HyperMD-codeblock-begin-bg"):v+=" line-HyperMD-codeblock-end line-background-HyperMD-codeblock-end-bg")),g){var z=o.hmdTable;if(p&&z)(z==QA.SIMPLE?hT:dT).test(e.string)?(o.hmdTableCol=0,o.hmdTableRow++):bT(o);if(p&&o.header&&(/^(?:---+|===+)\s*$/.test(e.string)&&o.prevLine&&o.prevLine.header?v+=" line-HyperMD-header-line line-HyperMD-header-line-"+o.header:v+=" line-HyperMD-header line-HyperMD-header-"+o.header),o.indentedCode&&(v+=" hmd-indented-code"),o.quote){if(e.eol()&&(v+=" line-HyperMD-quote line-HyperMD-quote-"+o.quote,/^ {0,3}\>/.test(e.string)||(v+=" line-HyperMD-quote-lazy")),p&&(s=R.match(/^\s+/)))return e.pos=s[0].length,(v+=" hmd-indent-in-quote").trim();/^>\s+$/.test(R)&&">"!=e.peek()&&(e.pos=e.start+1,R=">",o.hmdOverride=function(t,e){return t.match(wT),e.hmdOverride=null,"hmd-indent-in-quote line-HyperMD-quote line-HyperMD-quote-"+e.quote})}var H=(o.listStack[o.listStack.length-1]||0)+3,V=p&&/^\s+$/.test(R)&&(!1!==o.list||e.indentation()<=H),q=o.list&&/formatting-list/.test(v);if(q||V&&(!1!==o.list||e.match(iT,!1))){var j=o.listStack&&o.listStack.length||0;if(V){if(e.match(iT,!1))!1===o.list&&j++;else{for(;j>0&&e.pos<o.listStack[j-1];)j--;if(!j)return v.trim()||null;v+=" line-HyperMD-list-line-nobullet line-HyperMD-list-line line-HyperMD-list-line-"+j}v+=" hmd-list-indent hmd-list-indent-"+j}else q&&(v+=" line-HyperMD-list-line line-HyperMD-list-line-"+j)}if(d!==o.linkText&&(d||o.internalLink||o.internalEmbed||o.inlineFootnote?(o.hmdLinkType in yT&&(v+=" "+yT[o.hmdLinkType]),o.hmdLinkType===cT.FOOTNOTE?o.hmdLinkType=cT.MAYBE_FOOTNOTE_URL:o.hmdLinkType=cT.NONE):(s=e.match(/^([^\]]+)\](\(| ?\[|\:)?/,!1))?s[2]?":"===s[2]&&"["===e.string.substr(0,e.pos).trim()?o.hmdLinkType=cT.FOOTNOTE:"["!==s[2]&&" ["!==s[2]||"]"!==e.string.charAt(e.pos+s[0].length)?o.hmdLinkType=cT.NORMAL:o.hmdLinkType=cT.BARELINK2:"^"===s[1].charAt(0)?o.hmdLinkType=cT.FOOTREF:o.hmdLinkType=cT.BARELINK:o.hmdLinkType=cT.BARELINK),f!==o.linkHref&&(f?o.hmdLinkType&&(v+=" "+yT[o.hmdLinkType],o.hmdLinkType=cT.NONE):"["===R&&"]"!==e.peek()&&(o.hmdLinkType=cT.FOOTREF2)),o.hmdLinkType!==cT.NONE&&(o.hmdLinkType in yT&&(v+=" "+yT[o.hmdLinkType]),o.hmdLinkType===cT.MAYBE_FOOTNOTE_URL&&(/^(?:\]\:)?\s*$/.test(R)||(v=rT.test(R)||sT.test(R)?v.replace("string url","url")+" hmd-footnote-url":v.replace("string url",""),o.hmdLinkType=cT.NONE))),o.inlineFootnote&&(v+=" inline-footnote"),/formatting-escape/.test(v)&&R.length>1){var U=R.length-1,_=v.replace("formatting-escape","escape")+" hmd-escape-char";return o.hmdOverride=function(t,e){return t.pos+=U,e.hmdOverride=null,_.trim()},v+=" hmd-escape-backslash",e.pos-=U,v}if(!v.trim()&&n.table){var W=!1;if("|"===R.charAt(0)&&(e.pos=e.start+1,R="|",W=!0),W){if(!z){uT.test(e.string)?z=QA.SIMPLE:pT.test(e.string)&&(z=QA.NORMAL);var G=void 0;if(z){var K=e.lookAhead(1);if(z===QA.NORMAL?pT.test(K)?K=K.replace(/^\s*\|/,"").replace(/\|\s*$/,""):z=QA.NONE:z===QA.SIMPLE&&(uT.test(K)||(z=QA.NONE)),z){G=K.split("|");for(var $=0;$<G.length;$++){var Y=G[$];if(fT.test(Y))Y="right";else if(gT.test(Y))Y="left";else if(mT.test(Y))Y="center";else{if(!vT.test(Y)){z=QA.NONE;break}Y="default"}G[$]=Y}}}z&&(o.hmdTable=z,o.hmdTableColumns=G,o.hmdTableRow=o.hmdTableCol=0)}if(z){var J=o.hmdTableColumns.length-1;if(z===QA.NORMAL&&(0===o.hmdTableCol&&/^\s*\|$/.test(e.string.slice(0,e.pos))||e.match(/^\s*$/,!1)))v+=" hmd-table-sep hmd-table-sep-dummy";else if(o.hmdTableCol<J){Y=o.hmdTableRow;var Q=o.hmdTableCol++;0==Q&&(v+=" line-HyperMD-table-"+z+" line-HyperMD-table-row line-HyperMD-table-row-"+Y),v+=" hmd-table-sep hmd-table-sep-"+Q}}}}if(z&&1===o.hmdTableRow&&/emoji/.test(v)&&(v=""),m&&"<"===R){var X=null;if(e.match(/^\![A-Z]+/)?X=">":e.match("?")?X="?>":e.match("![CDATA[")&&(X="]]>"),null!=X)return c(e,o,null,{endTag:X,style:(v+" comment hmd-cdata-html").trim()})}if(n.hashtag&&m)if(o.hmdHashtag){var Z=!1;if(!/formatting/.test(v)&&!/^\s*$/.test(R)){s=R.match(aT);var tt=R.length-(s?s[0].length:0);tt>0&&(e.backUp(tt),Z=!0)}if(Z||(Z=e.eol()),Z||(Z=!aT.test(e.peek())),Z)v+=" hashtag-end "+(it="tag-"+(it=e.current()).replace(/[^_a-zA-Z0-9\-]/g,"")),o.hmdHashtag=!1}else if("#"===R&&!o.linkText&&!o.image&&(p||/^\s*$/.test(e.string.charAt(e.start-1)))){var et=e.string.slice(e.pos).replace(/\\./g,""),nt=aT.exec(et);if(nt&&/[^0-9]/.test(nt[0])){var it="tag-"+nt[0].replace(/[^_a-zA-Z0-9\-]/g,"");o.hmdHashtag=!0,v+=" formatting formatting-hashtag hashtag-begin "+n.tokenTypeOverrides.hashtag+" "+it}}}return v.trim()||null},o}),"hypermd"),eT.defineMIME("text/x-hypermd","hypermd");var CT=function(t,e){return t[0]-e[0]};function xT(t){if(0===t.length)return t;t.sort(CT);for(var e=[t[0]],n=1;n<t.length;n++){var i=e.last();i[1]<t[n][0]?e.push(t[n]):i[1]<t[n][1]&&(i[1]=t[n][1])}return e}var ST=/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/,ET=/\s/,MT=/[\u0F00-\u0FFF\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/;function LT(t){for(var e=t.toLowerCase(),n=[],i=0,r=0;r<e.length;r++){var o=e.charAt(r);ET.test(o)?(i!==r&&n.push(e.substring(i,r)),i=r+1):(ST.test(o)||MT.test(o))&&(i!==r&&n.push(e.substring(i,r)),n.push(o),i=r+1)}return i!==e.length&&n.push(e.substring(i,e.length)),{query:t,tokens:n,fuzzy:e.split("")}}function DT(t){var e=LT(t);return function(t){return PT(e,t)}}function AT(t,e,n,i){if(0===t.length)return 0;var r=0;r-=Math.max(0,t.length-1),r-=i/10;var o=t[0][0];return r-=(t[t.length-1][1]-o+1-e)/100,r-=o/1e3,r-=n/1e4}function TT(t,e,n,i){if(0===t.length)return null;for(var r=n.toLowerCase(),o=0,s=0,a=[],l=0;l<t.length;l++){var c=t[l],u=r.indexOf(c,s);if(-1===u)return null;var h=n.charAt(u);if(u>0&&!ST.test(h)&&!MT.test(h)){var p=n.charAt(u-1);if(h.toLowerCase()!==h&&p.toLowerCase()!==p||h.toUpperCase()!==h&&!ST.test(p)&&!ET.test(p)&&!MT.test(p))if(i){if(u!==s){s+=c.length,l--;continue}}else o+=1}if(0===a.length)a.push([u,u+c.length]);else{var d=a[a.length-1];d[1]<u?a.push([u,u+c.length]):d[1]=u+c.length}s=u+c.length}return{matches:a,score:AT(a,e.length,r.length,o)}}function PT(t,e){if(""===t.query)return{score:0,matches:[]};var n=TT(t.tokens,t.query,e,!1);return n||TT(t.fuzzy,t.query,e,!0)}function OT(t){t.sort((function(t,e){return e.match.score-t.match.score}))}function FT(t,e){if(t)for(var n=0,i=t;n<i.length;n++){var r=i[n];r[0]+=e,r[1]+=e}}function IT(t,e){for(var n=e.toLowerCase(),i=[],r=0,o=t;r<o.length;r++){var s=o[r];if(s){for(var a=!1,l=-1,c=s.length;-1!==(l=n.indexOf(s,l));)a=!0,i.push([l,l+c]),l+=c+1;if(!a)return null}}return xT(i)}function NT(t){var e=t.toLowerCase().split(" ");return function(n){return function(t,e,n){var i=IT(t,n);return i?{score:AT(i,e.length,n.length,0),matches:i}:null}(e,t,n)}}function BT(t,e,n,i){void 0===i&&(i=0),RT(t,e,n?n.matches:null,i)}function RT(t,e,n,i){if(void 0===i&&(i=0),n){for(var r=0,o=0;r<e.length&&o<n.length;o++){var s=n[o],a=s[0]+i,l=s[1]+i;if(!(l<=0)){if(a>=e.length)break;a<0&&(a=0),a!==r&&t.appendText(e.substring(r,a)),t.createSpan({cls:"suggestion-highlight",text:e.substring(a,l)}),r=l}}r<e.length&&t.appendText(e.substring(r))}else t.appendText(e)}var zT=/A-Za-z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/,HT=/\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u4E00-\u9FD5\uAC00-\uD7A3\uA960-\uA97C\uD7B0-\uD7C6/,VT=zT.source+/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,qT=new RegExp("["+VT+"]"),jT=function(t){if(0===t.length)return"";var e=t.charAt(0),n=t.charAt(t.length-1),i=qT.test(e),r=qT.test(n);return(i?"(?:^|[^"+VT+"])":"")+"("+Mt(t)+")"+(r?"(?!["+VT+"])":"()")},UT=function(){},_T=function(){function t(t,e,n,i){this.cache=null,this.data=null,this.strings=t,this.original=e,this.keys=n,this.caseSensitive=i}return t.prototype.clone=function(){var e=new t(Object.assign({},this.strings),this.original,this.keys.slice(),this.caseSensitive);return e.cache=this.cache,this.data&&(e.data=new Map(this.data)),e},t.prototype.setData=function(t,e){this.data||(this.data=new Map),this.data.set(t,e)},t.prototype.getData=function(t){return this.data?this.data.get(t):null},t.prototype.deleteData=function(t){this.data&&(this.data.delete(t),0===this.data.size&&(this.data=null))},t}();function WT(t,e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];t.hasOwnProperty(n)?t[n]=t[n].concat(i):t[n]=i}}var GT=function(){},KT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){for(var e={},n=0,i=t.keys;n<i.length;n++){var r=i[n],o=t.strings[r];o&&(e[r]=[[0,o.length]])}return e},e.prototype.getInfo=function(){return""},e.prototype.requiredInputs=function(){return{content:!0}},e}(GT),$T={},YT={},JT=De((function(){$T={},YT={}}),6e4,!0);function QT(t,e,n){var i=null,r=t.caseSensitive?$T:YT;r.hasOwnProperty(e)&&(i=r[e]),i||(i=r[e]=new RegExp(e,t.caseSensitive?"gm":"gmi"));for(var o=!1,s={},a=0,l=t.keys;a<l.length;a++){var c=l[a],u=t.strings[c];if(u){var h=[];for(i.lastIndex=0;;){var p=i.exec(u);if(!p)break;var d=p[0].length;if(0!==d){if(n){if(!p[1]||0===p[1].length){i.lastIndex++;continue}d=p[1].length}var f=i.lastIndex,g=f-d;h.push([g,f])}else i.lastIndex++}h.length>0&&(s[c]=h,o=!0)}}return o?s:null}var XT=function(t){function e(e){var n=t.call(this)||this;return n.regex=e,n}return M(e,t),e.prototype.match=function(t){if(""!==this.regex)return QT(t,this.regex,!1)},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-regex")+"/"+this.regex+"/"},e.prototype.requiredInputs=function(){return{content:!0}},e}(GT),ZT=function(t){function e(e){var n=t.call(this)||this;return n.text=e,n.regex=jT(e),n}return M(e,t),e.prototype.match=function(t){if(""!==this.text)return QT(t,this.regex,!0)},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-exact-text")+'"'+this.text+'"'},e.prototype.requiredInputs=function(){return{content:!0}},e}(GT),tP=function(t){function e(e){var n=t.call(this,Mt(e))||this;return n.text=e,n}return M(e,t),e.prototype.getInfo=function(){return Ee("plugins.search.label-match-text")+'"'+this.text+'"'},e}(XT),eP=function(t){function e(e){var n=t.call(this)||this;return n.matchers=[],n.matchers=e,n}return M(e,t),e.prototype.requiredInputs=function(){for(var t={},e=0,n=this.matchers;e<n.length;e++){var i=n[e];Object.assign(t,i.requiredInputs())}return t},e}(GT),nP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){for(var e=void 0,n=0,i=this.matchers;n<i.length;n++){var r=i[n].match(t);if(null===r)return null;e?r&&WT(e,r):e=r}return e},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-all")},e}(eP),iP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){for(var e=void 0,n=0,i=this.matchers;n<i.length;n++){var r=i[n].match(t);e||void 0===r?r&&WT(e,r):e=r}return e},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-any")},e}(eP),rP=function(t){function e(e){var n=t.call(this)||this;return n.matcher=e,n}return M(e,t),e.prototype.requiredInputs=function(){return this.matcher.requiredInputs()},e}(GT),oP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){var e=this.matcher.match(t);if(void 0!==e)return e?null:{}},e.prototype.getInfo=function(){return Ee("plugins.search.label-excluding")},e}(rP);function sP(t){for(var e=[];t.pos<t.tokens.length;){var n=aP(t);if(n)if(e.push(n),t.pos<t.tokens.length)if("or"===t.tokens[t.pos].type){t.pos++;continue}break}return 0===e.length?null:1===e.length?e[0]:new iP(e)}function aP(t){for(var e=[];t.pos<t.tokens.length;){var n=lP(t);if(!n)break;e.push(n)}return 0===e.length?null:1===e.length?e[0]:new nP(e)}function lP(t){var e=t.tokens[t.pos];if(!e)return null;var n=e.type,i=e.content;if("text"===n)return t.pos++,new tP(i);if("quoted"===n)return t.pos++,new ZT(i);if("regex"===n){try{new RegExp(i)}catch(t){throw console.error(t),new Error("Failed to parse regular expression. "+t.message)}return t.pos++,new XT(i)}if("group"===n&&"("===i)return t.pos++,function(t){var e=sP(t);if(t.pos<t.tokens.length){var n=t.tokens[t.pos],i=n.type,r=n.content;"group"===i&&")"===r&&t.pos++}return e}(t);if("group"===n&&")"===i)return null;if("or"===n)return null;if("not"===n)return t.pos++,(u=lP(t))?new oP(u):null;if("operator"===n){var r=i,o=t.operators[r];if(!o)throw new Error('Operator "'+r+'" not recognized');if(o.exclusive)for(var s=0,a=t.operatorStack;s<a.length;s++){var l=a[s],c=t.operators[l];if(c.exclusive&&(!c.allowSelf||l!==r))throw new Error('Operator "'+r+'" cannot be nested within "'+l+'"')}t.pos++,t.operatorStack.push(r);var u=lP(t);return t.operatorStack.pop(),u?o.operate(u):null}throw new Error("Failed to parse, error at "+e.pos+' "'+i+'"')}var cP=function(t){function e(e,n){var i=t.call(this,e)||this;return i.caseSensitive=n,i}return M(e,t),e.prototype.match=function(t){var e=t.clone();return e.caseSensitive=this.caseSensitive,this.matcher.match(e)},e.prototype.getInfo=function(){return this.caseSensitive?Ee("plugins.search.label-case-sensitive"):Ee("plugins.search.label-case-insensitive")},e}(rP),uP="filepath",hP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){if(t.strings.hasOwnProperty(uP)){var e=t.clone();return e.keys=[uP],this.matcher.match(e)}},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-file-path")},e.prototype.requiredInputs=function(){return{}},e}(rP),pP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){if(t.strings.hasOwnProperty("filename")){var e=t.clone();return e.keys=["filename"],this.matcher.match(e)}},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-file-name")},e.prototype.requiredInputs=function(){return{}},e}(rP),dP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){if(t.strings.hasOwnProperty("content")){var e=t.clone();return e.keys=["content"],this.matcher.match(e)}},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-content")},e.prototype.requiredInputs=function(){return{content:!0}},e}(rP),fP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.splitContentMatch=function(t,e){var n=this,i=t.clone();i.keys=["content"];var r=!1,o=!1,s=[];return e(i,(function(t,e){i.strings.content=t;var a=n.matcher.match(i);if(void 0===a)o=!0;else if(a){r=!0;var l=a.content;if(l){FT(l,e);for(var c=0,u=l;c<u.length;c++){var h=u[c];s.push(h)}}}})),r?{content:s}:o?void 0:null},e}(rP),gP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){if(t.strings.hasOwnProperty("content")){var e=t.strings.content;return this.splitContentMatch(t,(function(t,n){for(var i=0,r=0,o=e.split("\n");r<o.length;r++){var s=o[r];n(s,i),i=i+s.length+1}}))}},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-line")},e.prototype.requiredInputs=function(){return{content:!0}},e}(fP),mP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){if(t.strings.hasOwnProperty("content")){var e=t.cache;if(!e)return null;var n=t.strings.content;return this.splitContentMatch(t,(function(t,i){if(e.sections)for(var r=0,o=e.sections;r<o.length;r++){var s=o[r];if("list"!==s.type){var a=(h=s.position).start.offset,l=h.end.offset;i(n.substring(a,l),a)}}if(e.listItems)for(var c=0,u=e.listItems;c<u.length;c++){var h;a=(h=u[c].position).start.offset,l=h.end.offset;i(n.substring(a,l),a)}}))}},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-block")},e.prototype.requiredInputs=function(){return{content:!0}},e}(fP),vP=new UT;var yP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.match=function(t){if(t.strings.hasOwnProperty("content")){var e=t.cache;if(!e)return null;var n=t.getData(vP),i=e.headings;if(!i){if(n)return null;t.setData(vP,{sections:null,index:0});var r=this.matcher.match(t);return t.deleteData(vP),r}var o,s,a,l=t.original,c=0;if(n){o=n.sections;var u=n.index,h=o[u];if(0===h.children)return null;c=h.start,s=n.index+1,a=Math.min(o.length,s+h.children)}else o=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=t[i+1],s=r.position.start.offset;0===i&&s>0&&n.push({start:0,end:s,children:0});for(var a=o?o.position.start.offset:e,l=0,c=i+1;c<t.length&&t[c].level>r.level;c++)l++;n.push({start:s,end:a,children:l})}return n}(i,l.length),s=0,a=o.length;return this.splitContentMatch(t,(function(t,e){for(var n=s;n<a;n++){var i=o[n],r=i.start,u=i.end;u<=r||(t.setData(vP,{sections:o,index:n}),e(l.substring(r,u),r-c))}}))}},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-section")},e.prototype.requiredInputs=function(){return{content:!0}},e}(fP),bP=function(t){function e(e,n){var i=this;return e instanceof ZT&&""===e.text&&(e=new KT),(i=t.call(this,e)||this).completed=n,i}return M(e,t),e.prototype.match=function(t){if(t.strings.hasOwnProperty("content")){var e=t.cache;if(!e)return null;var n=t.strings.content,i=this.completed;return this.splitContentMatch(t,(function(t,r){if(e.listItems)for(var o=0,s=e.listItems;o<s.length;o++){var a=s[o];if(void 0!==a.task&&("boolean"!=typeof i||i===(" "!==a.task))){var l=a.position,c=l.start.offset,u=l.end.offset;r(n.substring(c,u),c)}}}))}},e.prototype.getInfo=function(){var t=this.completed;return Ee(!0===t?"plugins.search.label-match-task-done":!1===t?"plugins.search.label-match-task-todo":"plugins.search.label-match-task")},e.prototype.requiredInputs=function(){return{content:!0}},e}(fP),wP=function(t){function e(e){var n=t.call(this)||this;return"#"!==e.text.charAt(0)&&(e=new tP("#"+e.text)),n.matcher=e,n}return M(e,t),e.prototype.match=function(t){var e=new RegExp("^"+this.matcher.regex+"($|\\/)","gmi");if(t.strings.hasOwnProperty("tag")&&e.test(t.strings.tag))return{};if(t.strings.hasOwnProperty("content")){var n=t.cache;if(!n)return null;var i=[],r=!1,o=Og(n.frontmatter);if(o)for(var s=0,a=o;s<a.length;s++){var l=a[s];e.lastIndex=0,e.test(l)&&(r=!0)}var c=n.tags;if(c)for(var u=0,h=c;u<h.length;u++){l=h[u];e.lastIndex=0,e.test(l.tag)&&(i.push([l.position.start.offset,l.position.end.offset]),r=!0)}return r?{content:i}:null}},e.prototype.getInfo=function(){return Ee("plugins.search.label-match-tag")+this.matcher.text},e.prototype.requiredInputs=function(){return{content:!0}},e}(GT),kP={"match-case":{operate:function(t){return new cP(t,!0)}},"ignore-case":{operate:function(t){return new cP(t,!1)}},path:{exclusive:!0,operate:function(t){return new hP(t)}},file:{exclusive:!0,operate:function(t){return new pP(t)}},content:{exclusive:!0,operate:function(t){return new dP(t)}},line:{exclusive:!0,operate:function(t){return new gP(t)}},block:{exclusive:!0,operate:function(t){return new mP(t)}},section:{exclusive:!0,allowSelf:!0,operate:function(t){return new yP(t)}},task:{exclusive:!0,operate:function(t){return new bP(t,void 0)}},"task-todo":{exclusive:!0,operate:function(t){return new bP(t,!1)}},"task-done":{exclusive:!0,operate:function(t){return new bP(t,!0)}},tag:{exclusive:!0,operate:function(t){if(!(t instanceof tP))throw new Error('Operator "tag" can only be followed by text');return new wP(t)}}},CP=function(){function t(t,e,n){n=n||kP,this.query=t,this.caseSensitive=e;var i=function(t,e){for(var n=0,i=t.length,r=[],o=function(t,e){"OR"===t?r.push({type:"or",content:t,pos:e}):r.push({type:"text",content:t,pos:e})};n<i;){var s=t.charAt(n);if('"'!==s)if("/"!==s)if("-"!==s)for(var a=n,l="";n<=i;){if(n===i){l&&o(l,a);break}if(p=t.charAt(n),n++,"("===p||")"===p){l&&o(l,a),r.push({type:"group",content:p,pos:a});break}if(" "===p){l&&o(l,a);break}if(":"===p&&""!==l&&e.hasOwnProperty(l)){r.push({type:"operator",content:l,pos:a});break}l+=p}else{var c=n;n++,r.push({type:"not",content:s,pos:c})}else{var u=n;n++;for(var h="";n<=i;){if(n===i){r.push({type:"regex",content:h,pos:u});break}var p=t.charAt(n);if(n++,"\\"===p&&n<t.length){var d=t.charAt(n);if("/"===d){h+=d,n++;continue}if("\\"===d){h+="\\\\",n++;continue}}if("/"===p){r.push({type:"regex",content:h,pos:u});break}h+=p}}else{var f=n;n++;for(var g="";n<=i;){if(n===i){r.push({type:"quoted",content:g,pos:f});break}p=t.charAt(n);if(n++,"\\"===p&&n<i)g+=t.charAt(n),n++;else{if('"'===p){r.push({type:"quoted",content:g,pos:f});break}g+=p}}}}return r}(t,n),r=this.matcher=function(t,e){return sP({tokens:t,pos:0,operatorStack:[],operators:e})}(i,n);this.requiredInputs=r&&r.requiredInputs()}return t.prototype.match=function(t,e,n){var i={filename:t.name,filepath:t.path,content:e},r="md"===t.extension?["filename","content"]:[],o=new _T(i,e,r,this.caseSensitive);return o.cache=n,this._match(o)},t.prototype.matchTag=function(t){var e={tag:t};return this._match(new _T(e,t,["tag"],this.caseSensitive))},t.prototype.matchFilepath=function(t){var e={filename:Kt(t),filepath:t};return this._match(new _T(e,t,["filename"],this.caseSensitive))},t.prototype._match=function(t){JT();var e=this.matcher.match(t);if(e)for(var n in e)e.hasOwnProperty(n)&&(e[n]=xT(e[n]));return void 0===e&&(e={}),e},t}();function xP(t,e,n,i,r){var o,s;return D(this,void 0,Promise,(function(){var a,l,c,u,h,p,d,f,g;return A(this,(function(m){switch(m.label){case 0:a=Ph(n.generator(),r),m.label=1;case 1:m.trys.push([1,11,12,17]),l=I(a),m.label=2;case 2:return[4,l.next()];case 3:if((c=m.sent()).done)return[3,10];if(u=c.value,h="md"===u.extension,p=t.metadataCache.getFileCache(u),d="",!h||!e.content)return[3,7];m.label=4;case 4:return m.trys.push([4,6,,7]),[4,t.vault.cachedRead(u)];case 5:return d=m.sent(),[3,7];case 6:return f=m.sent(),console.error(f),[3,7];case 7:return n.runnable.isCancelled()?[2]:[4,i(u,d,p)];case 8:m.sent(),m.label=9;case 9:return[3,2];case 10:return[3,17];case 11:return g=m.sent(),o={error:g},[3,17];case 12:return m.trys.push([12,,15,16]),c&&!c.done&&(s=l.return)?[4,s.call(l)]:[3,14];case 13:m.sent(),m.label=14;case 14:return[3,16];case 15:if(o)throw o.error;return[7];case 16:return[7];case 17:return[2]}}))}))}var SP="obsidian-search-match-highlight",EP=window.CodeMirror,MP=null,LP=function(){var t=/^(url|inline-code|property|footref|hmd-footnote|math|link-has-alias|formatting-link|hmd-codeblock|blockid|hmd-frontmatter)$/,e=/[`|~^=$<>]/,n=/\s/,i=/[0-9]/,r=/[a-z]/i,o=new RegExp("["+HT.source+"]"),s=function(t){return!function(t){return Dt.test(t)}(t)&&!e.test(t)&&!n.test(t)};return{token:function(e){var n=e.peek(),a="",l=o.test(n);if(!s(n))return e.next(),null;for(;(n=e.peek())&&s(n)&&l===o.test(n);)a+=n,e.next();if(e.start>=1&&"'"===e.string.charAt(e.start-1))return null;if("'"===n)return null;if(i.test(a))return null;if(!r.test(a))return null;if(a===a.toUpperCase())return null;var c=e.pos;e.pos=e.start;var u=e.baseToken();e.pos=c;var h="";if(u&&u.type&&(h=u.type),h)for(var p=0,d=h.trim().split(" ");p<d.length;p++){var f=d[p];if(f&&t.test(f))return null}return MP?MP.check(a)?void 0:"spell-error":null}}}(),DP="hmd-internal-link";try{delete EP.keyMap.emacsy["Alt-F"],delete EP.keyMap.emacsy["Alt-B"],delete EP.keyMap.emacsy["Alt-D"],delete EP.keyMap.pcDefault["Ctrl-Up"],delete EP.keyMap.pcDefault["Ctrl-Down"],delete EP.keyMap.pcDefault["Alt-Left"],delete EP.keyMap.pcDefault["Alt-Right"],EP.keyMap.macDefault.fallthrough="basic",EP.keyMap.macEmacsy={fallthrough:["macDefault","emacsy"]}}catch(t){console.error(t)}var AP=function(t){function e(e,n){var i=t.call(this)||this;return i.view=e,i.cm=n,i}return M(e,t),e.prototype.getValue=function(){return this.cm.getValue()},e.prototype.setValue=function(t){this.cm.setValue(t)},e.prototype.getLine=function(t){return this.cm.getLine(t)},e.prototype.lineCount=function(){return this.cm.lineCount()},e.prototype.lastLine=function(){return this.cm.lastLine()},e.prototype.getSelection=function(){return this.cm.getSelection()},e.prototype.getRange=function(t,e){return this.cm.getRange(t,e)},e.prototype.replaceSelection=function(t,e){this.cm.replaceSelection(t,void 0,e)},e.prototype.replaceRange=function(t,e,n,i){this.cm.replaceRange(t,e,n,i)},e.prototype.getCursor=function(t){return Ku(this.cm.getCursor(t),0)},e.prototype.listSelections=function(){return this.cm.listSelections()},e.prototype.setSelection=function(t,e){this.cm.setSelection(t,e)},e.prototype.setSelections=function(t,e){this.cm.setSelections(t,e)},e.prototype.exec=function(t){this.cm.execCommand(e.commands[t])},e.prototype.focus=function(){this.cm.focus()},e.prototype.blur=function(){this.cm.getInputField().blur()},e.prototype.hasFocus=function(){return this.cm.hasFocus()},e.prototype.getScrollInfo=function(){return this.cm.getScrollInfo()},e.prototype.scrollTo=function(t,e){this.cm.scrollTo(t,e)},e.prototype.scrollIntoView=function(t,e){this.cm.scrollIntoView(t,this.cm.getWrapperElement().clientHeight/2)},e.prototype.refresh=function(){this.cm.refresh()},e.prototype.transaction=function(t,e){var n=t.replaceSelection,i=t.changes,r=t.selection,o=t.selections,s=this.cm;s.operation((function(){if(String.isString(n)&&s.replaceSelection(n,void 0,e),i){i.sort(Yu);for(var t=0,a=i;t<a.length;t++){var l=a[t];s.replaceRange(l.text,l.from,l.to,e)}}o?s.setSelections(o.map((function(t){return{head:t.from,anchor:t.to||t.from}}))):r&&s.setSelection(r.from,r.to)}))},e.prototype.wordAt=function(t){var e=this.cm.findWordAt(t);return e.empty()?null:{from:e.from(),to:e.to()}},e.prototype.posToOffset=function(t){return this.cm.indexFromPos(t)},e.prototype.offsetToPos=function(t){return this.cm.posFromIndex(t)},e.prototype.undo=function(){this.cm.undo()},e.prototype.redo=function(){this.cm.redo()},e.prototype.coordsAtPos=function(t,e){var n=this.cm.cursorCoords(t,e?"local":"page"),i=n.left;return{top:n.top,bottom:n.bottom,left:i,right:i}},e.prototype.posAtCoords=function(t,e){return this.cm.coordsChar({left:t,top:e},"window")},e.prototype.addHighlights=function(t,e,n,i){n&&this.removeHighlights(e);for(var r=this.cm,o=0,s=t;o<s.length;o++){var a=s[o];if(r.markText(a.from,a.to,{className:e}),i)for(var l=0,c=r.findMarksAt(a.from);l<c.length;l++){var u=c[l];u.__isFold&&u.clear()}}},e.prototype.removeHighlights=function(t){for(var e=0,n=this.cm.getAllMarks();e<n.length;e++){var i=n[e];i.className===t&&i.clear()}},e.prototype.searchCursor=function(t){var e=this.cm,n=this,i=function(n){return e.getSearchCursor(t,n,{caseFold:!0})},r=i(null);return{current:function(){return{from:r.from(),to:r.to()}},findPrevious:function(){var t=r.findPrevious();return t||(t=(r=i(Gu(e.lastLine()))).findPrevious()),t?this.current():null},findNext:function(){var t=r.findNext();return t||(t=(r=i(null)).findNext()),t?this.current():null},replace:function(t,e){var i=this.current();n.replaceRange(t,i.from,i.to,e)},findAll:function(){for(var t=[],e=(r=i(null)).findNext();e;)t.push(this.current()),e=r.findNext();return t},replaceAll:function(t,e){var i=this.findAll().map((function(e){return{from:e.from,to:e.to,text:t}})).reverse();n.transaction({changes:i},e)}}},e.prototype.getClickableTokenAt=function(t){var e=this.cm,n=e.getLineTokens(t.line),i=e.getTokenAt(t,!0),r=i.type;if(r){for(var o=r.split(" "),s=o.contains(DP),a=o.contains("formatting-link")&&["[[","]]"].contains(i.string),l=-1,c=0;c<n.length;c++){if((w=n[c]).start===i.start&&w.end===i.end){l=c;break}}if(s||a){if(-1!==l){for(var u=l-1;u>=0;){var h=(w=n[u]).type;if(!h||!h.contains(DP))break;u--}for(var p=l+1;p<n.length;){var d=(w=n[p]).type;if(!d||!d.contains(DP))break;p++}var f="",g=t.ch,m=t.ch;for(c=u+1;c<p;c++){(w=n[c]).type.contains(DP)&&(f+=w.string,w.start<g&&(g=w.start),w.end>m&&(m=w.end))}return{type:"internal-link",text:Jf(f),start:{line:t.line,ch:g},end:{line:t.line,ch:m}}}return null}if(o.contains("url")){var v=i.string;if("("===v?i=n[l+1]:")"===v&&(i=n[l-1]),!i)return null;v=i.string;try{v=decodeURI(v)}catch(t){return null}var y=!0;return o.contains("string")?y=!Qf(v):/^([a-z0-9+.-]+):/.test(v)||(v="https://"+v),{type:y?"external-link":"internal-link",text:v,start:{line:t.line,ch:i.start},end:{line:t.line,ch:i.end}}}if(o.contains("hashtag")){var b="";for(g=t.ch,m=t.ch,c=0;c<n.length;c++){var w;if((w=n[c]).type&&w.type.split(" ").contains("hashtag"))b+=w.string,w.start<g&&(g=w.start),w.end>m&&(m=w.end);else{if(!(c<l))break;b="",g=t.ch,m=t.ch}}if(b)return{type:"tag",text:b,start:{line:t.line,ch:g},end:{line:t.line,ch:m}}}return null}},e.prototype.getSpellcheckStatus=function(t,e){var n=this,i=t.target;if(i instanceof HTMLElement){if(!i.classList.contains("cm-spell-error"))return null;var r=i.innerText;if(!r)return null;var o=this.cm,s={line:e.line,ch:e.ch},a=o.getTokenAt(s,!0);a.end<s.ch&&(s.ch++,a=o.getTokenAt(s,!0));for(var l=i.getText(),c=-1;!(-1===(c=a.string.indexOf(l,c))||a.start+c<=s.ch&&a.start+c+l.length>=s.ch);)c++;if(-1!==c){var u={line:s.line,ch:a.start+c},h={line:s.line,ch:a.start+c+l.length},p=MP.correct(r);return{misspelledWord:r,dictionarySuggestions:p,replace:function(t){n.replaceRange(t,u,h),o.focus(),o.setCursor({line:u.line,ch:u.ch+t.length})},addToDictionary:function(t){var e=n.view.app,i=e.vault.getConfig("spellcheckDictionary");i&&Array.isArray(i)||(i=[]),i.push(r),MP.add(r),e.vault.setConfig("spellcheckDictionary",i),o.replaceRange("",u,h),o.replaceRange(r,u,u)}}}}},e.commands={goUp:"goLineUp",goDown:"goLineDown",goLeft:"goCharLeft",goRight:"goCharRight",goStart:"goDocStart",goEnd:"goDocEnd",indentMore:"indentMore",indentLess:"indentLess",newlineAndIndent:"newlineAndIndent",swapLineUp:"swapLineUp",swapLineDown:"swapLineDown",deleteLine:"deleteLine",toggleFold:"toggleFold",foldAll:"foldAll",unfoldAll:"unfoldAll"},e}(Zu),TP=function(){function t(t){var e=this;this.type="source",this.hoverPopover=null,this.editorEl=null,this.search=null,this.lastCursor=null,this.scrolling=!1,this.view=t;var n=this.app=t.app,i=this.editorEl=t.contentEl.createDiv("markdown-source-view mod-cm5"),r=this.cmEditor=EP(this.editorEl,{mode:"hypermd",theme:"obsidian",lineWrapping:!0,styleActiveLine:!0,configureMouse:function(t,e,n){return{addNew:n.altKey&&!n.ctrlKey&&!n.metaKey}}}),o=this.editor=new AP(t,r);this.clipboardManager=new WA(t,o),this.updateOptions();var s=r.getWrapperElement(),a=s.find(".CodeMirror-vscrollbar");a.detach(),i.insertBefore(a,i.firstChild),a.style.width="100%";var l=r.getInputField();if(l instanceof HTMLTextAreaElement){l.style.top="0",l.style.bottom="";var c=l.parentElement.style;c.position="absolute",c.opacity="0"}l.tabIndex=-1,this.search=new tT(n,o,this.editorEl),this.editorSuggest=n.workspace.editorSuggest,this.attachCmEvents(),this.attachDomEvents(),n.workspace.trigger("codemirror",r),Wy.registerDomEvents(s,new gB(this.app,this,(function(){return e.view.file})),(function(t){for(;t;){if(t===s)return!0;if(t.classList.contains("markdown-preview-view"))return!1;var e=t.parentElement;if(!e)return!1;t=e}return!1}))}return t.prototype.show=function(){this.editorEl.show(),this.cmEditor.refresh()},t.prototype.hide=function(){this.editorEl.hide(),this.editorSuggest.close()},t.prototype.clear=function(){var t=this.cmEditor.getDoc();t.setValue(""),t.clearHistory()},t.prototype.get=function(){return this.cmEditor.getValue()},t.prototype.set=function(t,e){var n=this.cmEditor;if(e)n.setValue(t),n.clearHistory(),this.lastCursor=null;else{for(var i=n.getScrollInfo(),r=t.split(/\r?\n/g),o=n.lineCount(),s=0;s<r.length&&s<o&&r[s]===n.getLine(s);)s++;if(s===r.length&&s===o)return;for(var a=o-1,l=r.length-1;a>s&&l>s&&n.getLine(a)===r[l];)a--,l--;var c={line:s,ch:0},u={line:a,ch:n.getLine(a).length},h=r.slice(s,l+1).join("\n");s===Math.min(o,r.length)&&(c={line:s-1,ch:n.getLine(s-1).length},r.length>o&&(h="\n"+h)),n.replaceRange(h,c,u,"setValue"),this.scrolling=!0,n.scrollTo(i.left,i.top)}},t.prototype.beforeUnload=function(){},t.prototype.getEphemeralState=function(t){var e=this.editor;if(e.hasFocus()){var n=e.getCursor("anchor"),i=e.getCursor("head");t.cursor={from:{line:n.line,ch:n.ch},to:{line:i.line,ch:i.ch}}}},t.prototype.setEphemeralState=function(t){var e=this.cmEditor,n=t.cursor,i=e.getScrollInfo();if(n&&n.from&&n.to?(e.focus(),e.setSelection(n.from,n.to),e.scrollTo(i.left,i.top)):t.focus&&(this.lastCursor?e.setCursor(this.lastCursor):e.execCommand("goDocStart"),e.focus(),e.scrollTo(i.left,i.top)),t.hasOwnProperty("scroll")&&this.applyScroll(t.scroll),void 0!==t.startLoc&&void 0!==t.endLoc){var r=t.startLoc,o=t.endLoc,s={line:r.line,ch:r.col},a=o?{line:o.line,ch:o.col}:{line:e.lastLine(),ch:e.getLine(e.lastLine()).length};this.highlightSearchMatch(s,a),this.onScroll()}else if(void 0!==t.line&&t.line>=0){var l=t.line;s={line:l,ch:0},a={line:l,ch:e.getLine(l).length};this.highlightSearchMatch(s,a),e.setSelection(a,a),this.onScroll()}else if(void 0!==t.match){var c=t.match,u=th(c.content,c.matches);this.highlightSearchMatches(u),this.onScroll()}},t.prototype.updateOptions=function(){var t,e=this,n=this.app.vault,i=this.cmEditor,r=n.getConfig("readableLineLength");this.editorEl.toggleClass("is-readable-line-width",r);var o="";n.getConfig("autoPairBrackets")&&(o+="()[]{}''\"\""),n.getConfig("autoPairMarkdown")&&(o+="**__``==~~$$%%"),o?i.setOption("autoCloseBrackets",{pairs:o,explode:"",surroundOnly:"=~$%",override:!0}):i.setOption("autoCloseBrackets",!1);var s=n.getConfig("foldHeading"),a=n.getConfig("foldIndent");if(s||a){i.setOption("foldGutter",!0),i.setOption("gutters",["CodeMirror-linenumbers","CodeMirror-foldgutter"]);var l=[EP.fold.frontmatter];s&&l.push(EP.fold.markdown),a&&l.push(EP.fold.indent);var c=1===l.length?l[0]:new((t=EP.fold.combine).bind.apply(t,P([void 0],l)));i.setOption("foldOptions",{rangeFinder:c})}else i.setOption("foldGutter",!1),i.setOption("gutters",[]),i.setOption("foldOptions",{});var u=n.getConfig("showLineNumber");i.setOption("lineNumbers",u);var h=n.getConfig("useTab");i.setOption("indentWithTabs",!!h);var p=n.getConfig("tabSize");i.setOption("tabSize",p),i.setOption("indentUnit",Math.clamp(p,2,4)),i.setOption("scrollPastEnd",!0);var d=n.getConfig("lineWrap");i.setOption("lineWrapping",d);var f=n.getConfig("rightToLeft");i.setOption("direction",f?"rtl":"ltr"),i.setOption("rtlMoveVisually",f);var g=n.getConfig("vimMode"),m=n.getConfig("emacsyKeys");if(g?i.setOption("keyMap","vim"):dt&&m?i.setOption("keyMap","macEmacsy"):i.setOption("keyMap","default"),g&&(a||s)&&(EP.Vim.defineAction("fold",(function(t){return t.execCommand("fold")})),EP.Vim.mapCommand("zc","action","fold"),EP.Vim.defineAction("unfold",(function(t){return t.execCommand("unfold")})),EP.Vim.mapCommand("zo","action","unfold"),EP.Vim.defineAction("toggleFold",(function(t){return t.execCommand("toggleFold")})),EP.Vim.mapCommand("za","action","toggleFold")),n.getConfig("spellcheck")){if(MP||le((function(t){window.process.versions.electron;try{var e=window.require("fs"),n=t.ipcRenderer.sendSync("resources"),i=e.readFileSync(n+"/spellcheck/en_US.aff","utf8"),r=e.readFileSync(n+"/spellcheck/en_US.dic","utf8"),o=new window.nspell(i,r);MP={check:function(t){return o.correct(t)},correct:function(t){return o.suggest(t)},add:function(t){o.add(t)},remove:function(t){o.remove(t)}}}catch(t){console.error("Failed to load spellcheck dictionary.",t)}})),LP&&(i.addOverlay(LP),MP))for(var v=0,y=n.getConfig("spellcheckDictionary");v<y.length;v++){var b=y[v];MP.add(b)}}else LP&&i.removeOverlay(LP);var w={Up:this.passIfNoSuggestion.bind(this),Down:this.passIfNoSuggestion.bind(this),Tab:this.passIfNoSuggestion.bind(this)},k=n.getConfig("smartIndentList");w.Enter=function(t){if(!e.editorSuggest.isShowingSuggestion()){if(!k)return EP.Pass;t.execCommand("newlineAndIndentContinueMarkdownList")}},k&&(g||(w[dt?"Cmd-[":"Ctrl-["]=function(t){t.execCommand("indentLess"),t.execCommand("indentUnindentContinueMarkdownList")},w[dt?"Cmd-]":"Ctrl-]"]=function(t){t.execCommand("indentMore"),t.execCommand("indentUnindentContinueMarkdownList")}),w.Tab=function(t){e.editorSuggest.isShowingSuggestion()||t.execCommand("autoIndentMarkdownList")},w["Shift-Tab"]="autoUnindentMarkdownList"),w.End=function(t){for(var e=!1,n=0,i=t.getLineTokens(t.getCursor("to").line);n<i.length;n++){var r=i[n];if(r.type&&r.type.split(" ").contains("line-HyperMD-table-row")){e=!0;break}}e?t.execCommand("goLineEnd"):t.execCommand("goLineRight")},w.Home="goLineLeftSmart",g||(w[dt?"Cmd-D":"Ctrl-D"]=!1),this.cmEditor.setOption("extraKeys",w),i.refresh()},t.prototype.showSearch=function(t){void 0===t&&(t=!1),this.search.show(t)},t.prototype.getSelection=function(){return this.editor.getSelection()},t.prototype.highlightSearchMatch=function(t,e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var r=this.cmEditor;r.refresh(),i&&this.clearHighlights(),r.markText(t,e,{className:SP}),n&&r.scrollIntoView({from:t,to:e},r.getWrapperElement().offsetHeight/4)},t.prototype.highlightSearchMatches=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0);var i=this.cmEditor;i.refresh(),n&&this.clearHighlights();for(var r=0,o=t;r<o.length;r++){var s=o[r];i.markText(s.from,s.to,{className:SP});for(var a=0,l=i.findMarksAt(s.from);a<l.length;a++){var c=l[a];c.__isFold&&c.clear()}}if(e&&t.length>0){s=t[0];i.scrollIntoView(s,i.getWrapperElement().offsetHeight/4)}},t.prototype.clearHighlights=function(){for(var t=0,e=this.cmEditor.getAllMarks();t<e.length;t++){var n=e[t];n.className===SP&&n.clear()}},t.prototype.onScroll=function(){this.editorSuggest.reposition(),this.scrolling?this.scrolling=!1:this.view.onMarkdownScroll()},t.prototype.getScroll=function(){var t=this.cmEditor,e=t.getScrollInfo(),n=t.lineAtHeight(e.top,"local"),i=t.charCoords({line:n,ch:0},"local"),r=t.charCoords({line:n+1,ch:0},"local"),o=i.top;0===n&&(o=0);var s=r.top;return n+Math.max(0,(e.top-o)/(s-o))},t.prototype.applyScroll=function(t){if(Number.isNumber(t)&&!isNaN(t)){var e=Math.floor(t),n=t-e;this.scrolling=!0;var i=this.cmEditor,r=i.charCoords({line:e,ch:0},"local"),o=i.charCoords({line:e+1,ch:0},"local"),s=r.top;0===e&&(s=0);var a=o.top;i.scrollTo(null,s+(a-s)*n)}},t.prototype.getFoldInfo=function(){for(var t=this.cmEditor,e=[],n=0,i=t.getAllMarks();n<i.length;n++){var r=i[n];if(r.__isFold){var o=r.find();o&&e.push({from:o.from.line,to:o.to.line})}}return e.length>0?{folds:e,lines:t.lineCount()}:null},t.prototype.applyFoldInfo=function(t){var e=this.cmEditor;if((!t||e.lineCount()===t.lines)&&(e.execCommand("unfoldAll"),t))for(var n=new Set,i=0,r=t.folds;i<r.length;i++){var o=r[i].from;n.has(o)||(n.add(o),e.foldCode({line:o,ch:0},null,"fold"))}},t.prototype.attachCmEvents=function(){var t=this,e=this.cmEditor,n=!1,i=De((function(){t.editorSuggest.trigger(t.editor,t.view.file,n),n=!1}),50),r=De((function(){return t.view.onMarkdownFold()}),500),o=De(this.fixIME.bind(this),100,!0);e.on("changes",(function(e,o){for(var s=0,a=o;s<a.length;s++){if("+input"===(u=a[s]).origin||"*compose"===u.origin){t.editor.expandText();break}}for(var l=0,c=o;l<c.length;l++){var u;if("setValue"!==(u=c[l]).origin){t.view.requestSave(),r(),n=!0,i(),t.view.triggerQuickPreview();break}}t.app.workspace.trigger("editor-change",t.editor,t.view)})),e.on("markerAdded",r),e.on("markerCleared",r),e.on("cursorActivity",(function(){t.saveCursor(),i(),o()})),e.on("focus",(function(){t.clearHighlights(),t.saveCursor(),By.isMobile&&t.app.mobileToolbar.open()})),e.on("blur",(function(){t.editorSuggest.close(),By.isMobile&&t.app.mobileToolbar.close()})),e.on("paste",(function(e,n){t.clipboardManager.handlePaste(n)})),e.on("scroll",this.onScroll.bind(this)),e.on("refresh",(function(){var t=e.getWrapperElement().find(".CodeMirror-measure");if(!t.offsetParent)return;var n=t.createSpan();n.appendText("x");for(var i={},r=0,o=s;r<o.length;r++){i[u=o[r]]=n.createSpan({text:u})}n.appendText("x");for(var l=0,c=s;l<c.length;l++){var u;a[u=c[l]]=i[u].getBoundingClientRect().width}n.detach()}));for(var s=[" ","*","+","-","1","2","3","4","5","6","7","8","9","0",".",">"],a={},l=0,c=s;l<c.length;l++){a[c[l]]=0}e.on("renderLine",(function(t,e,n){var i=n.firstChild;i.style.paddingRight="";var r=(/^\s*([*+-]\s+|\d+\.\s+|>\s*|\[.]\s+)*/.exec(e.text)||[""])[0],o=0;if(r){for(var s=t.getOption("tabSize"),l=0;l<r.length;l++){o+="\t"===r.charAt(l)?s*a[" "]:a[r.charAt(l)]||a[" "]}n.style.textIndent="-"+o+"px",n.style.paddingLeft=4+o+"px"}for(var c=i.firstChild;c;){var u=c.nextSibling;if(!u)break;c instanceof HTMLElement&&u instanceof HTMLElement&&c.classList.contains("cm-hashtag-end")&&u.classList.contains("cm-hashtag-end")&&c.removeClass("cm-hashtag-end"),c=u}})),e.setOption("dragDrop",!1);var u=e.display.dragFunctions,h=De(u.over,0);u.over=function(e){t.clipboardManager.handleDragOver(e),e.preventDefault(),h({target:e.target,clientX:e.clientX,clientY:e.clientY,defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0}})},e.setOption("dragDrop",!0),e.on("dragleave",(function(){h.cancel()})),e.on("drop",(function(e,n){h.cancel(),t.clipboardManager.handleDrop(n)})),e.refresh()},t.prototype.attachDomEvents=function(){var t=this,e=this.editorEl;e.addEventListener("mousedown",this.onCodeMirrorMousedown.bind(this)),e.addEventListener("contextmenu",(function(e){return t.clipboardManager.onContextMenu(e)}),{capture:!0}),e.on("mouseover",".cm-hmd-internal-link",this.onInternalLinkMouseover.bind(this))},t.prototype.onCodeMirrorMousedown=function(t){if((0===t.button||1===t.button)&&Bb.isModEvent(t)){var e=this.editor.getClickableTokenAt(this.editor.posAtMouse(t));e&&(this.view.triggerClickableToken(e,t.shiftKey||1===t.button),t.preventDefault())}},t.prototype.passIfNoSuggestion=function(){if(!this.editorSuggest.isShowingSuggestion())return EP.Pass},t.prototype.onInternalLinkMouseover=function(t,e){var n=this.editor.getClickableTokenAt(this.editor.posAtMouse(t));n&&"internal-link"===n.type&&this.app.workspace.trigger("hover-link",{event:t,source:"editor",hoverParent:this,targetEl:e,linktext:n.text,sourcePath:this.view.file.path})},t.prototype.fixIME=function(){if(!By.isMobile){var t=this.cmEditor,e="",n="",i="",r=t.getCursor("anchor");if(r){var o=t.getTokenTypeAt(r);o=(o||"").trim();var s=createSpan();s.className=o.split(" ").filter((function(t){return t})).map((function(t){return"cm-"+t})).join(" "),t.getWrapperElement().find(".CodeMirror-measure").appendChild(s);var a=getComputedStyle(s);n=a.fontSize,e=a.lineHeight,i=a.fontFamily,s.detach()}var l=t.getInputField();l.style.height=e,e||(l.style.height="1px");var c=l.parentElement.style;c.lineHeight=e,c.height=e,c.fontSize=n,c.fontFamily=i}},t.prototype.saveCursor=function(){var t=this.editor;t.hasFocus()&&(this.lastCursor=t.getCursor("anchor"))},t.prototype.onDocumentClick=function(t){this.editorSuggest.close(),this.clearHighlights()},t.prototype.onResize=function(){this.editor.refresh(),this.editorSuggest.reposition()},t.prototype.onCssChange=function(){this.onResize()},t.removeFromSpellcheck=function(t){MP&&MP.remove(t)},t}(),PP=as.line({attributes:{class:"cm-active"}}),OP=Ns.fromClass(function(){function t(t){this.decorations=this.getDeco(t)}return t.prototype.update=function(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))},t.prototype.getDeco=function(t){for(var e=-1,n=[],i=0,r=t.state.selection.ranges;i<r.length;i++){var o=r[i],s=t.lineBlockAt(o.head);s.from>e&&(n.push(PP.range(s.from)),e=s.from)}return as.set(n)},t}(),{decorations:function(t){return t.decorations}}),FP=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.elementClass="cm-active",e}return M(e,t),e}(CS)),IP=xS.compute(["selection"],(function(t){for(var e=[],n=-1,i=0,r=t.selection.ranges;i<r.length;i++){var o=r[i],s=t.doc.lineAt(o.head).from;s>n&&(n=s,e.push(FP.range(s)))}return Hr.of(e)}));function NP(t,e,n){var i=null;return t.between(e,n,(function(t,e){(!i||i.from>t)&&(i={from:t,to:e})})),i}var BP=function(t){function e(e){var n=t.call(this)||this;return n.folded=e,n}return M(e,t),e.prototype.eq=function(t){return t.folded==this.folded},e.prototype.toDOM=function(t){var e=createDiv(this.folded?"cm-fold-indicator is-collapsed":"cm-fold-indicator");e.appendText("​");var n=e.createDiv("collapse-indicator collapse-icon");return Ty(n,Wg,8),n.appendText(" "),e.addEventListener("click",(function(n){var i=t.posAtDOM(e),r=t.state.doc.lineAt(i),o=NP(XS(t.state),r.from,r.to);if(o)t.dispatch({effects:YS.of(o)});else{var s=vu(t.state,r.from,r.to);s&&t.dispatch({effects:$S.of(s)})}})),e},e}(os),RP=as.widget({widget:new BP(!0)}),zP=as.widget({widget:new BP(!1)}),HP=function(){function t(t){this.decorations=as.none,this.buildDeco(t)}return t.prototype.update=function(t){(t.docChanged||t.viewportChanged||t.startState.facet($c)!==t.state.facet($c)||XS(t.startState)!==XS(t.state))&&this.buildDeco(t.view)},t.prototype.buildDeco=function(t){for(var e=new Vr,n=XS(t.state),i=0,r=t.viewportLineBlocks;i<r.length;i++){var o=r[i],s=null;if(NP(n,o.from,o.to)?s=RP:vu(t.state,o.from,o.to)&&(s=zP),s){var a=t.state.doc.sliceString(o.from,o.to),l=o.from+a.match(/^\s*/)[0].length;e.add(l,l,s)}}this.decorations=e.finish()},t}(),VP=Ns.define((function(t){return new HP(t)}),{decorations:function(t){return t.decorations}}),qP=function(){function t(t){this.decorations=as.none,this.indentSizeCache={},this.buildDeco(t)}return t.prototype.update=function(e){Wu(e.transactions,t.clearCache)&&(this.indentSizeCache={}),(e.docChanged||e.viewportChanged||e.geometryChanged||Wu(e.transactions,t.update))&&this.buildDeco(e.view)},t.prototype.buildDeco=function(e){for(var n=this.indentSizeCache,i=e.defaultCharacterWidth,r=new Vr,o={},s=[],a=Rc(e.state),l=function(t){var l=e.state.doc.lineAt(t.from),c=Ju.exec(l.text);if(c&&c[0]){var u=c[0],h=!1;if(a.iterate({from:t.from,to:t.from,enter:function(t){var e=t.prop(Pu);e&&e.contains("HyperMD-codeblock")&&(h=!0)}}),h)return"continue";var p=n[u];if(p||(s.push({text:u,pos:t.from}),p=fi(u,e.state.tabSize)*i),p>0){var d=o[p]=o[p]||as.line({attributes:{style:"text-indent:"+-p+"px;padding-left:"+(4+p)+"px"}});r.add(t.from,t.from,d)}}},c=0,u=e.viewportLineBlocks;c<u.length;c++){l(u[c])}this.decorations=r.finish(),s.length>0&&e.requestMeasure({read:function(t){for(var e=0,i=s;e<i.length;e++){var r=i[e],o=r.text,a=r.pos,l=t.coordsAtPos(a+o.length,-1),c=t.coordsAtPos(a,1);l&&c&&(n[o]=l.right-c.left)}},write:function(){setTimeout((function(){return e.dispatch({effects:t.update.of()})}),0)}})},t.clearCache=gr.define(),t.update=gr.define(),t}(),jP=Ns.define((function(t){return new qP(t)}),{decorations:function(t){return t.decorations}});function UP(t,e){var n=e.ch,i=e.line+1;if(i<1)return 0;if(i>t.lines)return t.length;var r=t.line(i);return Math.min(r.from+Math.max(0,n),r.to)}function _P(t,e){if(e<0||e>t.length)return null;var n=t.lineAt(e);return{line:n.number-1,ch:e-n.from}}var WP=function(t,e){this.line=t,this.ch=e};function GP(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||[]).concat(n)}}function KP(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else{var i=t._handlers,r=i&&i[e];if(r){var o=r.indexOf(n);o>-1&&(i[e]=r.slice(0,o).concat(r.slice(o+1)))}}}function $P(t,e){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=null===(n=t._handlers)||void 0===n?void 0:n[e];if(o)for(var s=0;s<o.length;++s)o[s].apply(o,i)}function YP(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t)for(var i=0;i<t.length;++i)t[i].apply(t,e)}var JP,QP={Return:"CR",Backspace:"BS",Delete:"Del",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"CR"," ":"Space"},XP={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1};try{JP=new RegExp("[\\w\\p{Alphabetic}\\p{Number}_]","u")}catch(t){JP=/[\w]/}function ZP(t,e){if(e.annotations&&Array.isArray(e.annotations))try{e.annotations.some((function(t){"input"==t.value&&(t.value="input.type.compose")}))}catch(t){console.error(t)}else e.userEvent="input.type.compose";return t.dispatch(e)}var tO=function(){function t(t){this.state={},this.marks=Object.create(null),this.$mid=0,this.options={},this._handlers={},this.doc={history:{done:[{changes:[{cm:this,get to(){return this.cm.posFromIndex(this.cm.$lastChangeEndOffset)}}]}]}},this.$lastChangeEndOffset=0,this.virtualSelection=null,this.cm6=t,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this)}return t.prototype.openDialog=function(t,e,n){return oO(this,t,e,n)},t.prototype.openNotification=function(t,e){return function(t,e,n){nO(t,a);var i,r=eO(t,e,n&&n.bottom),o=!1,s=n&&void 0!==n.duration?n.duration:5e3;function a(){o||(o=!0,clearTimeout(i),r.remove(),rO(t,r))}r.onclick=function(t){t.preventDefault(),a()},iO(t,r),s&&(i=window.setTimeout(a,s));return a}(this,t,e)},t.prototype.on=function(t,e){GP(this,t,e)},t.prototype.off=function(t,e){KP(this,t,e)},t.prototype.signal=function(t,e,n){$P(this,t,e,n)},t.prototype.indexFromPos=function(t){return UP(this.cm6.state.doc,t)},t.prototype.posFromIndex=function(t){return _P(this.cm6.state.doc,t)},t.prototype.foldCode=function(t){var e=this.cm6,n=e.state.selection.ranges,i=UP(this.cm6.state.doc,t),r=Bi.create([Bi.range(i,i)],0).ranges;e.state.selection.ranges=r,eE(e),e.state.selection.ranges=n},t.prototype.firstLine=function(){return 0},t.prototype.lastLine=function(){return this.cm6.state.doc.lines-1},t.prototype.lineCount=function(){return this.cm6.state.doc.lines},t.prototype.setCursor=function(t,e){"object"==typeof t&&(e=t.ch,t=t.line);var n=UP(this.cm6.state.doc,{line:t,ch:e});this.cm6.dispatch({selection:{anchor:n}},{scrollIntoView:!this.curOp}),this.curOp&&!this.curOp.isVimOp&&this.onBeforeEndOperation()},t.prototype.getCursor=function(t){var e=this.cm6.state.selection.main,n="head"!=t&&t?"anchor"==t?e.anchor:"start"==t?e.from:"end"==t?e.to:null:e.head;if(null==n)throw new Error("Invalid cursor type");return this.posFromIndex(n)},t.prototype.listSelections=function(){var t=this.cm6.state.doc;return this.cm6.state.selection.ranges.map((function(e){return{anchor:_P(t,e.anchor),head:_P(t,e.head)}}))},t.prototype.setSelections=function(t,e){var n=this.cm6.state.doc,i=t.map((function(t){return Bi.range(UP(n,t.anchor),UP(n,t.head))}));this.cm6.dispatch({selection:Bi.create(i,e)})},t.prototype.setSelection=function(t,e,n){var i=this.cm6.state.doc,r=[Bi.range(UP(i,t),UP(i,e))];this.cm6.dispatch({selection:Bi.create(r,0)}),n&&"*mouse"==n.origin&&this.onBeforeEndOperation()},t.prototype.getLine=function(t){var e=this.cm6.state.doc;return t<0||t>=e.lines?"":this.cm6.state.doc.line(t+1).text},t.prototype.getLineHandle=function(t){return{text:this.getLine(t),row:t}},t.prototype.getLineNumber=function(t){return t.row},t.prototype.getRange=function(t,e){var n=this.cm6.state.doc;return this.cm6.state.sliceDoc(UP(n,t),UP(n,e))},t.prototype.replaceRange=function(t,e,n){n||(n=e);var i=this.cm6.state.doc,r=UP(i,e),o=UP(i,n);ZP(this.cm6,{changes:{from:r,to:o,insert:t}})},t.prototype.replaceSelection=function(t){ZP(this.cm6,this.cm6.state.replaceSelection(t))},t.prototype.replaceSelections=function(t){var e=this.cm6.state.selection.ranges.map((function(e,n){return{from:e.from,to:e.to,insert:t[n]||""}}));ZP(this.cm6,{changes:e})},t.prototype.getSelection=function(){return this.getSelections().join("\n")},t.prototype.getSelections=function(){var t=this.cm6;return t.state.selection.ranges.map((function(e){return t.state.sliceDoc(e.from,e.to)}))},t.prototype.somethingSelected=function(){return this.cm6.state.selection.ranges.some((function(t){return!t.empty}))},t.prototype.getInputField=function(){return this.cm6.contentDOM},t.prototype.clipPos=function(t){var e=this.cm6.state.doc,n=t.ch,i=t.line+1;i<1&&(i=1,n=0),i>e.lines&&(i=e.lines,n=Number.MAX_VALUE);var r=e.line(i);return n=Math.min(Math.max(0,n),r.to-r.from),new WP(i-1,n)},t.prototype.getValue=function(){return this.cm6.state.doc.toString()},t.prototype.setValue=function(t){var e=this.cm6;return e.dispatch({changes:{from:0,to:e.state.doc.length,insert:t},selection:Bi.range(0,0)})},t.prototype.focus=function(){return this.cm6.focus()},t.prototype.blur=function(){return this.cm6.contentDOM.blur()},t.prototype.defaultTextHeight=function(){return this.cm6.defaultLineHeight},t.prototype.findMatchingBracket=function(t){var e=this.cm6.state,n=UP(e.doc,t),i=pC(e,n+1,-1);return i&&i.end||(i=pC(e,n,1))&&i.end?{to:_P(e.doc,i.end.from)}:{to:void 0}},t.prototype.scanForBracket=function(t,e,n,i){return function(t,e,n,i,r){for(var o=r&&r.maxScanLineLength||1e4,s=r&&r.maxScanLines||1e3,a=[],l=function(t){return t&&t.bracketRegex||/[(){}[\]]/}(r),c=n>0?Math.min(e.line+s,t.lastLine()+1):Math.max(t.firstLine()-1,e.line-s),u=e.line;u!=c;u+=n){var h=t.getLine(u);if(h){var p=n>0?0:h.length-1,d=n>0?h.length:-1;if(!(h.length>o))for(u==e.line&&(p=e.ch-(n<0?1:0));p!=d;p+=n){var f=h.charAt(p);if(l.test(f)){var g=sO[f];if(g&&">"==g.charAt(1)==n>0)a.push(f);else{if(!a.length)return{pos:new WP(u,p),ch:f};a.pop()}}}}}return u-n!=(n>0?t.lastLine():t.firstLine())&&null}(this,t,e,0,i)},t.prototype.indentLine=function(t,e){e?this.indentMore():this.indentLess()},t.prototype.indentMore=function(){iS(this.cm6)},t.prototype.indentLess=function(){rS(this.cm6)},t.prototype.execCommand=function(e){"indentAuto"==e?t.commands.indentAuto(this):console.log(e+" is not implemented")},t.prototype.setBookmark=function(t,e){var n=(null==e?void 0:e.insertLeft)?1:-1,i=this.indexFromPos(t);return new uO(this,i,n)},t.prototype.addOverlay=function(t){var e=t.query,n=new UL({regexp:!0,search:e.source,caseSensitive:!/i/.test(e.flags)});if(n.valid){n.forVim=!0,this.cm6Query=n;var i=KL.of(n);return this.cm6.dispatch({effects:i}),n}},t.prototype.removeOverlay=function(t){if(this.cm6Query){this.cm6Query.forVim=!1;var e=KL.of(this.cm6Query);this.cm6.dispatch({effects:e})}},t.prototype.getSearchCursor=function(t,e){var n=this,i=null,r=null;null==e.ch&&(e.ch=Number.MAX_VALUE);var o=UP(n.cm6.state.doc,e),s=t.source.replace(/(\\.|{(?:\d+(?:,\d*)?|,\d+)})|[{}]/g,(function(t,e){return e||"\\"+t}));function a(e,n,i){return void 0===n&&(n=0),void 0===i&&(i=e.length),new SL(e,s,{ignoreCase:t.ignoreCase},n,i)}return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){var e=n.cm6.state.doc;if(t){var s=i?i.from==i.to?i.to-1:i.from:o;i=function(t,e){for(var i=n.cm6.state.doc,r=1;;r++){for(var o=Math.max(t,e-1e4*r),s=a(i,o,e),l=null;!s.next().done;)l=s.value;if(l&&(o==t||l.from>o+10))return l;if(o==t)return null}}(0,s)}else{var l=i?i.from==i.to?i.to+1:i.to:o;i=function(t){var e=n.cm6.state.doc;if(t>e.length)return null;var i=a(e,t).next();return i.done?null:i.value}(l)}return r=i&&{from:_P(e,i.from),to:_P(e,i.to),match:i.match},i&&i.match},from:function(){return null==r?void 0:r.from},to:function(){return null==r?void 0:r.to},replace:function(t){i&&(ZP(n.cm6,{changes:{from:i.from,to:i.to,insert:t}}),i.to=i.from+t.length,r&&(r.to=_P(n.cm6.state.doc,i.to)))}}},t.prototype.findPosV=function(t,e,n,i){for(var r=this.cm6,o=r.state.doc,s="page"==n?r.dom.clientHeight:0,a=UP(o,t),l=Bi.range(a,a,i),c=Math.round(Math.abs(e)),u=0;u<c;u++)"page"==n?l=r.moveVertically(l,e>0,s):"line"==n&&(l=r.moveVertically(l,e>0));return _P(o,l.head)},t.prototype.charCoords=function(t,e){var n=this.cm6,i=UP(n.state.doc,t),r=n.coordsAtPos(i)||{left:0,top:0,bottom:0},o=r.left,s=r.top,a=r.bottom,l=n.contentDOM.getBoundingClientRect();return{left:o-l.left,top:s-l.top,bottom:a-l.top}},t.prototype.coordsChar=function(t,e){var n=this.cm6.contentDOM.getBoundingClientRect(),i={x:t.left+n.left,y:t.top+n.top},r=this.cm6.posAtCoords(i)||0;return _P(this.cm6.state.doc,r)},t.prototype.getScrollInfo=function(){var t=this.cm6.scrollDOM;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight,width:t.scrollWidth,clientHeight:t.clientHeight,clientWidth:t.clientWidth}},t.prototype.scrollTo=function(t,e){null!=t&&(this.cm6.scrollDOM.scrollLeft=t),null!=e&&(this.cm6.scrollDOM.scrollTop=e)},t.prototype.scrollInfo=function(){return 0},t.prototype.scrollIntoView=function(t,e){t?this.cm6.dispatch({effects:Nl.scrollIntoView(this.indexFromPos(t),{yMargin:e})}):this.cm6.dispatch({scrollIntoView:!0,userEvent:"scroll"})},t.prototype.getWrapperElement=function(){return this.cm6.dom},t.prototype.getMode=function(){return{name:this.getOption("mode")}},t.prototype.setSize=function(t,e){this.cm6.dom.style.width=t+4+"px",this.cm6.dom.style.height=e+"px",this.refresh()},t.prototype.refresh=function(){this.cm6.measure()},t.prototype.destroy=function(){this.removeOverlay()},t.prototype.onChange=function(t){var e=this;for(var n in this.marks){this.marks[n].update(t.changes)}this.virtualSelection&&(this.virtualSelection=Bi.create(this.virtualSelection.ranges.map((function(e){return e.map(t.changes)})),this.virtualSelection.mainIndex));var i=this.curOp=this.curOp||{};t.changes.iterChanges((function(t,n,r,o,s){e.$lastChangeEndOffset=o;var a={text:s.toJSON()};i.lastChange?i.lastChange.next=i.lastChange=a:i.lastChange=i.change=a}),!0),i.changeHandlers||(i.changeHandlers=this._handlers.change&&this._handlers.change.slice())},t.prototype.onSelectionChange=function(){var t=this.curOp=this.curOp||{};t.cursorActivityHandlers||(t.cursorActivityHandlers=this._handlers.cursorActivity&&this._handlers.cursorActivity.slice()),this.curOp.cursorActivity=!0},t.prototype.operation=function(t){this.curOp||(this.curOp={$d:0}),this.curOp.$d++;try{var e=t()}finally{this.curOp&&(this.curOp.$d--,this.curOp.$d||this.onBeforeEndOperation())}return e},t.prototype.onBeforeEndOperation=function(){var t=this.curOp,e=!1;t&&(t.change&&YP(t.changeHandlers,this,t.change),t&&t.cursorActivity&&(YP(t.cursorActivityHandlers,this,null),t.isVimOp&&(e=!0)),this.curOp=null),e&&this.scrollIntoView()},t.prototype.moveH=function(t,e){if("char"==e){var n=this.getCursor();this.setCursor(n.line,n.ch+t)}},t.prototype.setOption=function(t,e){switch(t){case"keyMap":this.state.keyMap=e}},t.prototype.getOption=function(t){switch(t){case"firstLineNumber":return 1;case"tabSize":return this.cm6.state.tabSize||4;case"readonly":return this.cm6.state.readOnly;case"indentWithTabs":return"\t"==this.cm6.state.facet(Xc);case"indentUnit":return this.cm6.state.facet(Xc).length||2;case"keyMap":return this.state.keyMap||"vim"}},t.prototype.toggleOverwrite=function(t){this.state.overwrite=t},t.prototype.getTokenTypeAt=function(t){var e,n=this.indexFromPos(t),i=zc(this.cm6.state,n),r=null==i?void 0:i.resolve(n),o=(null===(e=null==r?void 0:r.type)||void 0===e?void 0:e.name)||"";return/comment/i.test(o)?"comment":/string/i.test(o)?"string":""},t.prototype.overWriteSelection=function(t){var e=this.cm6.state.doc,n=this.cm6.state.selection,i=n.ranges.map((function(t){if(t.empty){var n=t.to<e.length?e.sliceString(t.from,t.to+1):"";if(n&&!/\n/.test(n))return Bi.range(t.from,t.to+1)}return t}));this.cm6.dispatch({selection:Bi.create(i,n.mainIndex)}),this.replaceSelection(t)},t.prototype.isInMultiSelectMode=function(){return this.cm6.state.selection.ranges.length>1},t.prototype.virtualSelectionMode=function(){return!!this.virtualSelection},t.prototype.forEachSelection=function(t){var e=this.cm6.state.selection;this.virtualSelection=Bi.create(e.ranges,e.mainIndex);for(var n=0;n<this.virtualSelection.ranges.length;n++){var i=this.virtualSelection.ranges[n];i&&(this.cm6.dispatch({selection:Bi.create([i])}),t(),this.virtualSelection.ranges[n]=this.cm6.state.selection.ranges[0])}this.cm6.dispatch({selection:this.virtualSelection}),this.virtualSelection=null},t.Pos=WP,t.StringStream=bu,t.commands={cursorCharLeft:function(t){bC(t.cm6)},redo:function(t){aM(t.cm6)},undo:function(t){sM(t.cm6)},newlineAndIndent:function(t){Xx({state:t.cm6.state,dispatch:function(e){return ZP(t.cm6,e)}})},indentAuto:function(t){nS(t.cm6)}},t.defineOption=function(t,e,n){},t.isWordChar=function(t){return JP.test(t)},t.keys={Backspace:function(t){Fx(t.cm6)},Delete:function(t){Ix(t.cm6)}},t.keyMap={},t.addClass=function(){},t.rmClass=function(){},t.e_preventDefault=function(t){t.preventDefault()},t.e_stop=function(t){var e,n;null===(e=null==t?void 0:t.stopPropagation)||void 0===e||e.call(t),null===(n=null==t?void 0:t.preventDefault)||void 0===n||n.call(t)},t.keyName=function(t){var e=t.key;if(!XP[e]){"Escape"==e&&(e="Esc")," "==e&&(e="Space"),e.length>1&&(e=e.replace(/Numpad|Arrow/,"")),1==e.length&&(e=e.toUpperCase());var n="";return t.ctrlKey&&(n+="Ctrl-"),t.altKey&&(n+="Alt-"),(n||e.length>1)&&t.shiftKey&&(n+="Shift-"),n+=e}},t.vimKey=function(t){var e=t.key;if(!XP[e]){e.length>1&&"n"==e[0]&&(e=e.replace("Numpad","")),e=QP[e]||e;var n="";return t.ctrlKey&&(n+="C-"),t.altKey&&(n+="A-"),t.metaKey&&(n+="M-"),(n||e.length>1)&&t.shiftKey&&(n+="S-"),(n+=e).length>1&&(n="<"+n+">"),n}},t.lookupKey=function(e,n,i){var r=t.keys[e];r&&i(r)},t.on=GP,t.off=KP,t.signal=$P,t.findMatchingTag=aO,t.findEnclosingTag=cO,t}();function eO(t,e,n){var i=document.createElement("div");return i.appendChild(e),i}function nO(t,e){t.state.currentNotificationClose&&t.state.currentNotificationClose(),t.state.currentNotificationClose=e}function iO(t,e){var n=t.state.dialog;t.state.dialog=e,e&&n!==e&&(n&&n.contains(document.activeElement)&&t.focus(),n&&n.parentElement?n.parentElement.replaceChild(e,n):n&&n.remove(),tO.signal(t,"dialog"))}function rO(t,e){t.state.dialog==e&&(t.state.dialog=null,tO.signal(t,"dialog"))}function oO(t,e,n,i){i||(i={}),nO(t,void 0);var r=eO(0,e,i.bottom),o=!1;function s(e){if("string"==typeof e)a.value=e;else{if(o)return;o=!0,rO(t,r),t.state.dialog||t.focus(),i.onClose&&i.onClose(r)}}iO(t,r);var a=r.getElementsByTagName("input")[0];return a&&(i.value&&(a.value=i.value,!1!==i.selectValueOnOpen&&a.select()),i.onInput&&tO.on(a,"input",(function(t){i.onInput(t,a.value,s)})),i.onKeyUp&&tO.on(a,"keyup",(function(t){i.onKeyUp(t,a.value,s)})),tO.on(a,"keydown",(function(t){i&&i.onKeyDown&&i.onKeyDown(t,a.value,s)||(13==t.keyCode&&n(a.value),(27==t.keyCode||!1!==i.closeOnEnter&&13==t.keyCode)&&(a.blur(),tO.e_stop(t),s()))})),!1!==i.closeOnBlur&&tO.on(a,"blur",(function(){setTimeout((function(){document.activeElement!==a&&s()}))})),a.focus()),s}var sO={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function aO(t,e){var n=t.cm6.state,i=t.indexFromPos(e),r=pC(n,i+1,-1,{brackets:"\n\n"});if(r){if(!r.end||!r.start)return;return{open:lO(n.doc,r.end),close:lO(n.doc,r.start)}}if(r=pC(n,i,1,{brackets:"\n\n"})){if(!r.end||!r.start)return;return{open:lO(n.doc,r.start),close:lO(n.doc,r.end)}}}function lO(t,e){return{from:_P(t,e.from),to:_P(t,e.to)}}function cO(t,e){for(var n=t.cm6.state,i=t.indexFromPos(e),r=n.sliceDoc(0,i),o=i;o>0;){var s=pC(n,o,1,{brackets:"\n\n"});if(s&&s.start&&s.end)return{open:lO(n.doc,s.start),close:lO(n.doc,s.end)};o=r.lastIndexOf(">",o-1)}}var uO=function(){function t(t,e,n){this.cm=t,this.id=t.$mid++,this.offset=e,this.assoc=n,t.marks[this.id]=this}return t.prototype.clear=function(){delete this.cm.marks[this.id]},t.prototype.find=function(){return null==this.offset?null:this.cm.posFromIndex(this.offset)},t.prototype.update=function(t){null!=this.offset&&(this.offset=t.mapPos(this.offset,this.assoc,Mi.TrackDel))},t}(),hO=function(){function t(t,e,n,i,r,o,s,a,l,c){this.left=t,this.top=e,this.height=n,this.fontFamily=i,this.fontSize=r,this.fontWeight=o,this.tabSize=s,this.color=a,this.className=l,this.letter=c}return t.prototype.draw=function(){var t=document.createElement("div");return t.className=this.className,this.adjust(t),t},t.prototype.adjust=function(t){t.style.left=this.left+"px",t.style.top=this.top+"px",t.style.height=this.height+"px",t.style.lineHeight=this.height+"px",t.style.fontFamily=this.fontFamily,t.style.fontSize=this.fontSize,t.style.fontWeight=this.fontWeight,t.style.tabSize=this.tabSize,t.className=this.className,t.textContent=this.letter},t.prototype.eq=function(t){return this.left==t.left&&this.top==t.top&&this.height==t.height&&this.className==t.className&&this.letter==t.letter},t}(),pO=function(){function t(t,e){this.view=t,this.rangePieces=[],this.cursors=[],this.cm=e,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=t.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),t.requestMeasure(this.measureReq),this.setBlinkRate()}return t.prototype.setBlinkRate=function(){this.cursorLayer.style.animationDuration="1200ms"},t.prototype.update=function(t){(t.selectionSet||t.geometryChanged||t.viewportChanged)&&(this.scheduleRedraw(),this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink")},t.prototype.scheduleRedraw=function(){this.view.requestMeasure(this.measureReq)},t.prototype.readPos=function(){for(var t=this.view.state,e=[],n=0,i=t.selection.ranges;n<i.length;n++){var r=i[n],o=r==t.selection.main,s=fO(this.cm,this.view,r,o);s&&e.push(s)}return{cursors:e}},t.prototype.drawSel=function(t){var e=this,n=t.cursors;if(n.length!=this.cursors.length||n.some((function(t,n){return!t.eq(e.cursors[n])}))){var i=this.cursorLayer.children;if(i.length!==n.length){this.cursorLayer.textContent="";for(var r=0,o=n;r<o.length;r++){var s=o[r];this.cursorLayer.appendChild(s.draw())}}else n.forEach((function(t,e){return t.adjust(i[e])}));this.cursors=n}},t.prototype.destroy=function(){this.cursorLayer.remove()},t}(),dO=Qi.override(Nl.theme({".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",border:"none",whiteSpace:"pre"},"&.cm-focused .cm-fat-cursor":{background:"var(--interactive-accent)",color:"var(--text-on-accent)"},"&:not(.cm-focused) .cm-fat-cursor":{outline:"solid 1px #ff9696"}}));function fO(t,e,n,i){var r=n.head,o=!1,s=t.state.vim;if(s&&(!s.insertMode||t.state.overwrite)){if(o=!0,s.visualBlock&&!i)return null;n.anchor<n.head&&r--}if(o){var a=e.coordsAtPos(r,n.assoc||1);if(!a)return null;for(var l=function(t){var e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==_s.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}(e),c=e.domAtPos(r),u=c?c.node:e.contentDOM;c&&c.node instanceof HTMLElement;)u=c.node,c={node:c.node.childNodes[c.offset],offset:0};u instanceof HTMLElement||(u=u.parentNode);var h=getComputedStyle(u),p=r<e.state.doc.length&&e.state.sliceDoc(r,r+1);p&&"\n"!=p&&"\r"!=p||(p=" ");var d=a.bottom-a.top;return new hO(a.left-l.left,a.top-l.top,d,h.fontFamily,h.fontSize,h.fontWeight,h.tabSize,h.color,i?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",p)}return null}var gO=initVimMode(tO);tO.Vim=gO,window.CodeMirrorAdapter=tO;var mO=Nl.theme({".cm-vimMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"0px 10px",fontFamily:"monospace",minHeight:"1.3em"},".cm-vim-panel input":{border:"none",outline:"none"}}),vO=Ns.fromClass(function(){function t(t){var e=this;this.status="",this.query=null,this.decorations=as.none,this.view=t;var n=this.cm=new tO(t);gO.enterVimMode(this.cm),this.view.cm=this.cm,this.cm.state.vimPlugin=this,this.blockCursor=new pO(t,n),this.updateClass(),this.cm.on("vim-command-done",(function(){n.state.vim&&(n.state.vim.status=""),e.blockCursor.scheduleRedraw(),e.updateStatus()})),this.cm.on("vim-mode-change",(function(t){n.state.vim.mode=t.mode,t.subMode&&(n.state.vim.mode+=" block"),n.state.vim.status="",e.blockCursor.scheduleRedraw(),e.updateClass(),e.updateStatus()})),this.cm.on("dialog",(function(){e.cm.state.statusbar?e.updateStatus():t.dispatch({effects:bO.of(!!e.cm.state.dialog)})})),this.dom=document.createElement("span"),this.dom.style.cssText="position: absolute; right: 10px; top: 1px"}return t.prototype.update=function(t){var e;if(t.docChanged&&(this.cm.onChange(t),this.query&&this.highlight(this.query)),t.selectionSet&&this.cm.onSelectionChange(),t.viewportChanged,this.cm.curOp&&!this.cm.curOp.isVimOp&&this.cm.onBeforeEndOperation(),t.transactions)for(var n=0,i=t.transactions;n<i.length;n++)for(var r=0,o=i[n].effects;r<o.length;r++){var s=o[r];if(s.is(KL))if(null===(e=s.value)||void 0===e?void 0:e.forVim){var a=s.value.create();this.highlight(a)}else this.highlight(null)}this.blockCursor.update(t)},t.prototype.updateClass=function(){var t=this.cm.state;!t.vim||t.vim.insertMode&&!t.overwrite?this.view.scrollDOM.classList.remove("cm-vimMode"):this.view.scrollDOM.classList.add("cm-vimMode")},t.prototype.updateStatus=function(){var t=this.cm.state.statusbar;if(t){var e=this.cm.state.dialog,n=this.cm.state.vim;e?e.parentElement!=t&&(t.textContent="",t.appendChild(e)):t.textContent="--"+(n.mode||"normal").toUpperCase()+"--",this.dom.textContent=n.status,t.appendChild(this.dom)}},t.prototype.destroy=function(){this.cm.state.vim=null,this.updateClass(),this.blockCursor.destroy(),delete this.view.cm},t.prototype.highlight=function(t){if(this.query=t,!t)return this.decorations=as.none;for(var e=this.view,n=new Vr,i=0,r=e.visibleRanges,o=r.length;i<o;i++){for(var s=r[i],a=s.from,l=s.to;i<o-1&&l>r[i+1].from-500;)l=r[++i].to;t.highlight(e.state.doc,a,l,(function(t,e){n.add(t,e,yO)}))}return this.decorations=n.finish()},t}(),{eventHandlers:{keydown:function(t,e){var n=tO.vimKey(t),i=this.cm;if(n){var r,o=i.state.vim;"<Esc>"!=n||o.insertMode||o.visualMode||!this.query||i.removeOverlay(null),i.state.vim.status=(i.state.vim.status||"")+n;try{r=gO.multiSelectHandleKey(i,n,"user")}catch(t){console.error(t),i.state.vim.insertMode||(r=!0)}return!r&&i.state.vim.insertMode&&i.state.overwrite&&(t.key&&1==t.key.length&&t.key&&!/\n/.test(t.key)?(r=!0,i.overWriteSelection(t.key)):"Backspace"==t.key&&(r=!0,tO.commands.cursorCharLeft(i))),r&&(t.preventDefault(),t.stopPropagation(),this.blockCursor.scheduleRedraw()),this.updateStatus(),!!r}}},decorations:function(t){return t.decorations}}),yO=as.mark({class:"obsidian-search-match-highlight"}),bO=gr.define(),wO=_i.define({create:function(){return!1},update:function(t,e){for(var n=0,i=e.effects;n<i.length;n++){var r=i[n];r.is(bO)&&(t=r.value)}return t},provide:function(t){return TM.from(t,(function(t){return t?kO:null}))}});function kO(t){var e=document.createElement("div");e.className="cm-vim-panel";var n=t.cm;return n.state.dialog&&e.appendChild(n.state.dialog),{top:!1,dom:e}}var CO=["=","~","$","%"],xO=Nl.inputHandler.of((function(t,e,n,i){if(t.composing||t.state.readOnly)return!1;var r=t.state.selection.main;if(i.length>2||2==i.length&&1==di(hi(i,0))||e!=r.from||n!=r.to)return!1;for(var o=t.state,s=function(e){if(i!==e)return"continue";var n=null,r=o.changeByRange((function(t){return t.empty?{range:n=t}:{changes:[{insert:i,from:t.from},{insert:i,from:t.to}],range:Bi.range(t.anchor+i.length,t.head+i.length)}}));return n?{value:!1}:(t.dispatch(o.update(r,{scrollIntoView:!0,userEvent:"input.type"})),{value:!0})},a=0,l=CO;a<l.length;a++){var c=s(l[a]);if("object"==typeof c)return c.value}return!1})),SO=new Set(["Alt-ArrowUp","Shift-Alt-ArrowUp","Alt-ArrowDown","Shift-Alt-ArrowDown","Alt-l"]),EO=lS.filter((function(t){return!SO.has(t.key)})),MO=function(t,e){var n=e.text.search(/\S/);return-1===n?-1:fi(e.text.substr(0,n),t.facet(Lr.tabSize))},LO=fu.of((function(t,e,n){try{var i=t.doc.lineAt(e),r=MO(t,i);if(r<0)return;for(var o=null,s=i.number+1,a=t.doc.lines;s<=a;++s){var l=t.doc.line(s),c=MO(t,l);if(-1==c);else{if(!(c>r))break;o=l}}if(o)return{from:n,to:o.to}}catch(t){console.error(t)}return null})),DO=fu.of((function(t,e,n){var i=Rc(t);function r(t){if(i.length<t.to)return!0;var e=i.resolve(t.from,1).type.prop(Tu);return e&&/\bheader\b/.test(e)}function o(e){var n=e&&e.text.match(/^\s*#{1,6}(\s+|$)/);if(n&&r(e))return n[0].length;if(t.doc.lines<=e.number)return 100;var i=t.doc.line(e.number+1);return(n=i.text.match(/^[=\-]+\s*$/))&&r(i)?"="==i.text[0]?1:2:100}try{var s=t.doc.lines,a=t.doc.lineAt(e);if(a.number===s)return null;var l=o(a);if(100===l)return null;for(var c=t.doc.line(a.number+1),u=a.to;c&&!(o(c)<=l)&&(u=c.to,c.number!==s);)c=t.doc.line(c.number+1);return u===a.to?null:{from:a.to,to:u}}catch(t){console.error(t)}return null})),AO=fu.of((function(t,e,n){var i=t.doc.lineAt(e);if("---"===i.text){for(var r=i.number-1;r>0;r--)if(t.doc.line(r).text.trim())return;for(var o=t.doc.lines,s=i.number+1;s<=o&&"---"!==t.doc.line(s).text;)s++;if(!(s>o))return{from:e+3,to:t.doc.line(s).to}}})),TO=function(t){for(var e=t.state,n=[],i=1;i<=e.doc.lines;i++){var r=e.doc.line(i),o=vu(e,r.from,r.to);o&&n.push($S.of(o))}for(var s=0;s<e.doc.length;){s=(r=t.lineBlockAt(s)).to+1}return n.length&&t.dispatch({effects:n}),!!n.length},PO=as.mark({class:"cm-selection"}),OO=Ns.fromClass(function(){function t(t){this.decorations=this.getDeco(t)}return t.prototype.update=function(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))},t.prototype.getDeco=function(t){for(var e=new Vr,n=0,i=t.state.selection.ranges;n<i.length;n++){var r=i[n];r.empty||e.add(r.from,r.to,PO)}return e.finish()},t}(),{decorations:function(t){return t.decorations}}),FO=function(t){return _i.define({create:function(){return t},update:function(t){return t}})},IO=FO(null),NO=FO(null),BO=new Zi,RO=[];RO.push(Nl.exceptionSink.of(console.error)),RO.push(wc()),RO.push(iM()),By.isMobile||(RO.push(tc()),RO.push(Qi.high(pc())),RO.push(OO),RO.push(Lr.allowMultipleSelections.of(!0)),RO.push(bL())),RO.push(Lr.phrases.compute([],(function(){return{"folded code":""}}))),RO.push(du()),RO.push(jP),RO.push(ku.define(CodeMirror.getMode({},{name:"hypermd"}))),RO.push(Fu),RO.push(zu),RO.push(OP),RO.push(xO),RO.push(Nl.clickAddsSelectionRange.of((function(t){return t.altKey}))),RO.push(Iu.of("url inline-code property footref hmd-footnote math link-has-alias formatting-link hmd-codeblock blockid hmd-frontmatter")),RO.push(Gl.of(P(P(P([],EO),CM),[{key:"Mod-Shift-z",run:aM,preventDefault:!0}]))),RO.push(Qc.of((function(t,e){var n=t.state.doc.lineAt(e).text.match(/^\s*/);return n?t.countColumn(n[0]):null})));var zO=BO.of(RO),HO=new Zi,VO=AS({fixed:!1})[0],qO=VO.create;VO.create=function(t){var e,n=t.contentDOM;t.contentDOM=t.scrollDOM.firstChild;try{e=qO(t)}finally{t.contentDOM=n}return e};var jO,UO=function(t){function e(e){var n=t.call(this)||this;return n.cm=e,n}return M(e,t),e.prototype.refresh=function(){this.cm.requestMeasure()},e.prototype.getValue=function(){return this.cm.state.doc.toString()},e.prototype.setValue=function(t){var e=this.cm;e.dispatch({changes:{from:0,to:e.state.doc.length,insert:t}})},e.prototype.getLine=function(t){var e=this.cm.state.doc;return t>=e.lines?"":e.line(t+1).text},e.prototype.lineCount=function(){return this.cm.state.doc.lines},e.prototype.lastLine=function(){return this.cm.state.doc.lines-1},e.prototype.getSelection=function(){var t=this.cm,e=t.state.selection.main;return t.state.doc.sliceString(e.from,e.to)},e.prototype.getRange=function(t,e){var n=this.cm,i=n.state.doc;return n.state.doc.sliceString(Hu(i,t),Hu(i,e))},e.prototype.replaceSelection=function(t,e){var n=this.cm,i=n.state.replaceSelection(t);i.userEvent=e,n.dispatch(i)},e.prototype.replaceRange=function(t,e,n,i){var r=this.cm,o=r.state.doc,s=Hu(o,e),a=n?Hu(o,n):s;r.dispatch({changes:{from:s,to:a,insert:t},scrollIntoView:!0,userEvent:i})},e.prototype.getCursor=function(t){void 0===t&&(t="head");var e=this.cm,n=e.state.selection.main,i=e.state.doc;switch(t){case"from":return Vu(i,n.from);case"to":return Vu(i,n.to);case"anchor":return Vu(i,n.anchor);case"head":return Vu(i,n.head)}return null},e.prototype.listSelections=function(){for(var t=this.cm,e=t.state.selection.ranges,n=t.state.doc,i=[],r=0,o=e;r<o.length;r++){var s=o[r];i.push({anchor:Vu(n,s.anchor),head:Vu(n,s.head)})}return i},e.prototype.setSelection=function(t,e){var n=this.cm,i=n.state.doc,r=Hu(i,t),o=e?Hu(i,e):r;n.dispatch({selection:{anchor:r,head:o},scrollIntoView:!0})},e.prototype.setSelections=function(t,e){var n=this.cm,i=n.state.doc;n.dispatch({selection:Bi.create(t.map((function(t){var e=Hu(i,t.anchor),n=t.head?Hu(i,t.head):e;return Bi.range(e,n)}))),scrollIntoView:!0})},e.prototype.exec=function(t){e.commands[t](this.cm)},e.prototype.focus=function(){this.cm.focus()},e.prototype.blur=function(){this.cm.contentDOM.blur()},e.prototype.hasFocus=function(){return this.cm.hasFocus},e.prototype.getScrollInfo=function(){var t=this.cm.scrollDOM;return{top:t.scrollTop,left:t.scrollLeft,clientHeight:t.clientHeight,clientWidth:t.clientWidth,height:t.offsetHeight,width:t.offsetWidth}},e.prototype.scrollTo=function(t,e){var n=this.cm.scrollDOM;null==t&&(t=n.scrollLeft),null==e&&(e=n.scrollTop),n.scroll(t,e)},e.prototype.scrollIntoView=function(t,e){var n=this.cm,i=Hu(n.state.doc,t.from),r=Hu(n.state.doc,t.to),o=Bi.range(i,r);n.dispatch({effects:Nl.scrollIntoView(o,{y:e?"center":"nearest"})})},e.prototype.transaction=function(t,e){var n=t.replaceSelection,i=t.changes,r=t.selection,o=t.selections,s=this.cm,a=s.state.doc,l={},c=[];if(l.changes=c,l.scrollIntoView=!0,String.isString(n)){var u=s.state.replaceSelection(n);c.push(u.changes),l.selection=u.selection,l.effects=u.effects}if(i)for(var h=0,p=i;h<p.length;h++){u=p[h];var d=Hu(a,u.from),f=u.to?Hu(a,u.to):d;c.push({from:d,to:f,insert:u.text})}if(o)l.selection=Bi.create(o.map((function(t){var e=Hu(a,t.from),n=t.to?Hu(a,t.to):e;return Bi.range(e,n)})));else if(r){d=Hu(a,r.from),f=r.to?Hu(a,r.to):d;l.selection={anchor:d,head:f}}l.userEvent=e,this.cm.dispatch(l)},e.prototype.wordAt=function(t){var e=this.cm.state.doc,n=this.cm.state.wordAt(Hu(e,t));return n?{from:Vu(e,n.from),to:Vu(e,n.to)}:null},e.prototype.posToOffset=function(t){return Hu(this.cm.state.doc,t)},e.prototype.offsetToPos=function(t){return Vu(this.cm.state.doc,t)},e.prototype.undo=function(){sM(this.cm)},e.prototype.redo=function(){aM(this.cm)},e.prototype.coordsAtPos=function(t,e){var n=this.cm,i=n.coordsAtPos(Hu(n.state.doc,t)),r={top:i.top,left:i.left,bottom:i.bottom,right:i.right};if(e){var o=n.contentDOM.getBoundingClientRect();r.top-=o.top,r.bottom-=o.top,r.left-=o.left,r.right-=o.left}return r},e.prototype.posAtCoords=function(t,e){var n=this.cm,i=n.posAtCoords({x:t,y:e},!1);return null===i?null:Vu(n.state.doc,i)},e.prototype.addHighlights=function(t,e,n,i){var r=this.cm,o=[],s=[],a=Ru.get(e);a||(a=as.mark({class:e}),Ru.set(e,a));for(var l=r.state.doc,c=XS(r.state),u=function(t){var e=Hu(l,t.from),n=Hu(l,t.to);s.push(a.range(e,n)),i&&c.between(e,n,(function(t,i){n!==t&&e!==i&&o.push(YS.of({from:t,to:i}))}))},h=0,p=t;h<p.length;h++){u(p[h])}n&&o.push(Bu.of((function(t,e,n){return n!==a}))),o.push(Nu.of(s)),r.dispatch({effects:o})},e.prototype.removeHighlights=function(t){if(this.hasHighlight(t)){var e=Ru.get(t);this.cm.dispatch({effects:Bu.of((function(t,n,i){return i!==e}))})}},e.prototype.hasHighlight=function(t){for(var e=Ru.get(t),n=this.cm.state.field(zu).iter();n.value;){if(n.value===e)return!0;n.next()}return!1},e.prototype.searchCursor=function(t){var e=this.cm,n=this,i=function(n,i){return new kL(e.state.doc,t,n,i,(function(t){return t.toLowerCase()}))},r=e.state.selection.main.from,o=e.state.selection.main.to;function s(e,n){for(var r=n;;){for(var o=Math.max(e,r-1e4-t.length),s=i(o,r),a=null;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==e)return null;r-=1e4}}var a=null;return{current:function(){return a},findPrevious:function(){a=null;var t=s(0,r)||s(o,e.state.doc.length);if(!t)return null;var n=e.state.doc;return r=t.from,o=t.to,a={from:Vu(n,t.from),to:Vu(n,t.to)}},findNext:function(){a=null;var t=i(o,void 0).nextOverlapping();if(t.done&&(t=i(0,r).nextOverlapping()),t.done)return null;var n=t.value,s=e.state.doc;return r=n.from,o=n.to,a={from:Vu(s,n.from),to:Vu(s,n.to)}},replace:function(t,e){var i=this.current();i&&n.replaceRange(t,i.from,i.to,e)},findAll:function(){for(var t=i(),n=[],r=e.state.doc;!t.next().done;){var o=t.value;n.push({from:Vu(r,o.from),to:Vu(r,o.to)})}return n},replaceAll:function(t,e){var i=this.findAll().map((function(e){return{from:e.from,to:e.to,text:t}}));n.transaction({changes:i},e)}}},e.prototype.getClickableTokenAt=function(t){if(!t)return null;var e=this.cm,n=e.state.doc,i=[],r=n.line(t.line+1),o=Rc(e.state),s=r.from;o.iterate({from:r.from,to:r.to,enter:function(t,e,n){var r=t.prop(Tu);r&&(s<e&&i.push({type:"",from:s,to:e}),i.push({type:r,from:e,to:n}),s=n)}}),s<r.to&&i.push({type:"",from:s,to:r.to});for(var a=Hu(n,t),l=-1,c=0;c<i.length;c++){var u=i[c];if(u.from<=a&&u.to>=a){l=c;break}}if(!(l<0)){var h=function(t){return n.sliceString(t.from,t.to)},p=i[l],d=p.type,f=d.split(" "),g=h(p),m="hmd-internal-link",v=f.contains(m),y=f.contains("formatting-link")&&["[[","]]"].contains(g);if(v||y){for(var b=l-1;b>=0;){var w=i[b].type;if(!w||!w.contains(m))break;b--}for(var k=l+1;k<i.length;){var C=i[k].type;if(!C||!C.contains(m))break;k++}var x="",S=r.to,E=r.from;for(c=b+1;c<k;c++){var M=i[c];M.type.contains(m)&&(x+=h(M),M.from<S&&(S=M.from),M.to>E&&(E=M.to))}return{type:"internal-link",text:Jf(x),start:Vu(n,S),end:Vu(n,E)}}if(f.contains("link")){for(var L=l+1;L<i.length;){var D=i[L];if(!D||!D.type.split(" ").contains("link")){if(D){var A=D.type.split(" ");if(A.contains("string")&&A.contains("url"))break}L=-1;break}L++}L>-1&&L<i.length&&(l=L,f=(d=(p=i[L]).type).split(" "))}if(f.contains("url")){var T=h(p);if("("===T?T=h(p=i[l+1]):")"===T&&(T=h(p=i[l-1])),!p)return null;try{T=decodeURI(T)}catch(t){return null}var P=!0;return f.contains("string")?P=!Qf(T=tg(T)):/^([a-z0-9+.-]+):/.test(T)||(T="https://"+T),{type:P?"external-link":"internal-link",text:T,start:Vu(n,p.from),end:Vu(n,p.to)}}if(f.contains("hashtag")){var O="";for(S=r.to,E=r.from,c=0;c<i.length;c++){var F=i[c];if(F.type&&F.type.split(" ").contains("hashtag"))O+=h(F),F.from<S&&(S=F.from),F.to>E&&(E=F.to);else{if(!(c<l))break;O="",S=a,E=a}}if(O)return{type:"tag",text:O,start:Vu(n,S),end:Vu(n,E)}}return null}},e.commands={goUp:RC,goDown:zC,goLeft:bC,goRight:wC,goStart:Cx,goEnd:xx,indentMore:iS,indentLess:rS,newlineAndIndent:Xx,swapLineUp:Wx,swapLineDown:Gx,deleteLine:Jx,toggleFold:function(t){return nE(t)||eE(t)},foldAll:TO,unfoldAll:oE},e}(Zu),_O=[],WO=function(){function t(t){var e=this;this.type="source",this.hoverPopover=null,this.editorEl=null,this.sourceMode=!1,this.scrolling=!1,this.cursorPopupEl=null,this.view=t,this.app=t.app,this.editorSuggest=this.app.workspace.editorSuggest;var n=this.editorEl=t.contentEl.createDiv("markdown-source-view cm-s-obsidian mod-cm6"),i=this.contentContainerEl=createDiv("cm-contentContainer"),r=this.cm=new Nl({parent:n}),o=this.editor=new UO(r);this.clipboardManager=new WA(t,o),this.backlinks=null,this.sourceMode=!this.app.vault.getConfig("livePreview"),this.clear(),this.search=new tT(this.app,o,n),r.contentDOM.replaceWith(i),i.appendChild(r.contentDOM),r.scrollDOM.addEventListener("scroll",(function(){return e.onScroll()})),n.addEventListener("mousedown",this.onEditorMousedown.bind(this)),n.addEventListener("contextmenu",(function(t){By.isMobile||e.clipboardManager.onContextMenu(t)})),n.on("mouseover",".cm-hmd-internal-link",this.onEditorLinkMouseover.bind(this)),Wy.registerDomEvents(r.contentDOM,new gB(this.app,this,(function(){return e.view.file})),(function(t){for(;t;){if(t===e.cm.contentDOM)return!0;if(t.classList.contains("markdown-preview-view"))return!1;var n=t.parentElement;if(!n)return!1;t=n}return!1}))}return t.prototype.show=function(){this.editorEl.show()},t.prototype.hide=function(){this.editorEl.hide(),this.editorSuggest.close()},t.prototype.clear=function(){var t=Lr.create({extensions:[this.getLocalExtensions(),HO.of(this.getDynamicExtensions()),zO]});this.cm.setState(t)},t.prototype.get=function(){return this.cm.state.doc.toString()},t.prototype.set=function(t,e){var n=this.cm;if(e){var i=[this.getLocalExtensions(),HO.of(this.getDynamicExtensions()),zO];try{var r=this.view.file.path,o=_O.find((function(t){return t.file===r}));if(o&&o.length===t.length){var s=rM.spec.fromJSON(o.data);i.push(rM.init((function(){return s})))}}catch(t){console.error(t)}var a=Lr.create({doc:t,extensions:i});n.setState(a),n.dispatch({effects:[Nl.scrollTo.of(Bi.cursor(0)),_u.of()]}),n.scrollDOM.scrollTop=0,this.updateBacklinks()}else{for(var l=n.state.doc,c=t.split(/\r?\n/g),u=l.lines,h=0;h<c.length&&h<u&&c[h]===l.line(h+1).text;)h++;if(h===c.length&&h===u)return;for(var p=u-1,d=c.length-1;p>h&&d>h&&l.line(p+1).text===c[d];)p--,d--;var f={line:h,ch:0},g={line:p,ch:l.line(p+1).length},m=c.slice(h,d+1).join("\n");h===Math.min(u,c.length)&&(f={line:h-1,ch:l.line(h).length},c.length>u&&(m="\n"+m)),n.dispatch({changes:{from:Hu(l,f),to:Hu(l,g),insert:m},userEvent:"set"}),this.scrolling=!0}},t.prototype.beforeUnload=function(){try{var t=this.cm.state,e=t.field(rM);if(e){var n=rM.spec.toJSON(e,t),i=function(t){if(t&&Array.isArray(t))for(var e=0,n=t;e<n.length;e++){var i=n[e];if(i.changes&&i.changes.length)return!0}return!1};if(!i(n.done)&&!i(n.undone))return;var r=this.view.file.path;(_O=_O.filter((function(t){return t.file!==r}))).push({ts:Date.now(),file:this.view.file.path,data:n,length:t.doc.length}),_O.length>20&&_O.shift()}}catch(t){console.error(t)}},t.prototype.getEphemeralState=function(t){var e=this.cm;if(e.hasFocus){var n=e.state.doc,i=Vu(n,e.state.selection.main.anchor),r=Vu(n,e.state.selection.main.head);t.cursor={from:{line:i.line,ch:i.ch},to:{line:r.line,ch:r.ch}}}},t.prototype.setEphemeralState=function(t){var e=this.editor,n=t.cursor,i=e.getScrollInfo();if(n&&n.from&&n.to?(e.focus(),e.setSelection(n.from,n.to),e.scrollTo(i.left,i.top)):t.focus&&!By.isMobile&&(e.focus(),e.scrollTo(i.left,i.top)),t.hasOwnProperty("scroll")&&this.applyScroll(t.scroll),void 0!==t.startLoc&&void 0!==t.endLoc){var r=t.startLoc,o=t.endLoc,s={line:r.line,ch:r.col},a=o?{line:o.line,ch:o.col}:{line:e.lastLine(),ch:e.getLine(e.lastLine()).length};this.highlightSearchMatch(s,a),this.onScroll()}else if(void 0!==t.line&&t.line>=0){var l=t.line;s={line:l,ch:0},a={line:l,ch:e.getLine(l).length};e.setSelection(a,a),this.highlightSearchMatch(s,a),this.onScroll()}else if(void 0!==t.match){var c=t.match,u=th(c.content,c.matches);this.highlightSearchMatches(u),this.onScroll()}},t.prototype.setShowBacklinks=function(t){var e=this.app,n=this.backlinks,i=this.view.contentEl.clientHeight;if(t&&!n){var r=this.backlinksEl=this.contentContainerEl.createDiv("embedded-backlinks");this.backlinks=this.view.addChild(new dB(e,r,this.cm.scrollDOM)),this.updateBacklinks(),this.updateBottomPadding(i),this.updateOptions()}else!t&&n&&(this.backlinksEl.detach(),this.backlinksEl=null,this.view.removeChild(n),this.backlinks=null,this.updateBottomPadding(i),this.updateOptions())},t.prototype.updateBacklinks=function(){var t=this.backlinks;if(t){var e=null;this.view.currentMode===this&&(e=this.view.file),t.file=e,t.update()}},t.prototype.highlightSearchMatch=function(t,e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var r=this.editor;r.addHighlights([{from:t,to:e}],"obsidian-search-match-highlight",i,!0),n&&r.scrollIntoView({from:t,to:e},!0)},t.prototype.highlightSearchMatches=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0);var i=this.editor;if(i.addHighlights(t,"obsidian-search-match-highlight",n,!0),e&&t.length>0){var r=t[0];i.scrollIntoView(r,!0)}},t.prototype.updateEvent=function(){var t=this,e=!1,n=De((function(){t.editorSuggest.trigger(t.editor,t.view.file,e),e=!1}),50),i=De((function(){t.view.requestSave(),t.view.triggerQuickPreview(),t.editor.expandText()}),10),r=De(this.updateLinkPopup.bind(this),300),o=De((function(){return t.view.onMarkdownFold()}),500);return function(s){var a=s.transactions;s.docChanged&&a.some((function(t){return"set"!==t.annotation(mr.userEvent)}))&&(e=!0,i(),o()),(Wu(a,$S)||Wu(a,YS))&&o(),(s.docChanged||s.selectionSet)&&(n(),r()),s.docChanged&&t.app.workspace.trigger("editor-change",t.editor,t.view)}},t.prototype.getLocalExtensions=function(){var t=this,e=this.localExtensions;if(!e){(e=this.localExtensions=[]).push(IO.init((function(){return t.cm}))),e.push(NO.init((function(){return t.view})));var n={key:"Tab",run:function(){return t.editor.indentList(),!0},shift:function(){return t.editor.unindentList(),!0}},i=function(){return t.editorSuggest.isShowingSuggestion()};e.push(Gl.of([{key:"ArrowUp",run:i,preventDefault:!0},{key:"ArrowDown",run:i,preventDefault:!0},{key:"Enter",run:i,preventDefault:!0},{key:"Tab",run:i,preventDefault:!0},{key:"Enter",run:function(){return!!t.app.vault.getConfig("smartIndentList")&&(t.editor.newlineAndIndentContinueMarkdownList(),!0)},preventDefault:!0},n])),e.push(Nl.updateListener.of(this.updateEvent())),e.push(Nl.domEventHandlers({dragstart:function(t){return t.dataTransfer.clearData("text/html")},dragover:function(e){return t.clipboardManager.handleDragOver(e)},drop:function(e){return t.clipboardManager.handleDrop(e)},copy:function(e){t.editor.getSelection()||t.editor.getLine(t.editor.getCursor().line)||e.preventDefault()},paste:function(e){return t.clipboardManager.handlePaste(e)},focus:function(){By.isMobile&&t.app.mobileToolbar.open()},blur:function(){By.isMobile&&t.app.mobileToolbar.close(),t.editorSuggest.close()}}))}return e},t.prototype.getDynamicExtensions=function(){var t=this.app.vault,e=t.getConfig("readableLineLength");this.editorEl.toggleClass("is-readable-line-width",e);var n=[],i=t.getConfig("foldHeading"),r=t.getConfig("foldIndent");t.getConfig("showLineNumber")&&(n.push(AS({fixed:!1})),n.push(IP),n.push(jS()));var o=i||r;this.editorEl.toggleClass("is-folding",o),o&&(n.push(cE()),n.push(VP),i&&n.push(DO),r&&n.push(LO),n.push(AO));var s=t.getConfig("useTab"),a=t.getConfig("tabSize");n.push(Lr.tabSize.of(a));var l=s?"\t":new Array(Math.clamp(a,2,4)).fill(" ").join("");n.push(Xc.of(l));var c=t.getConfig("lineWrap");this.editorEl.toggleClass("is-line-wrap",c),c&&n.push(Nl.theme({".cm-content":{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"}}));var u=t.getConfig("rightToLeft");this.editorEl.toggleClass("is-rtl",u),u&&n.push(Nl.theme({"&":{direction:"rtl"}}));var h=t.getConfig("spellcheck");n.push(Nl.contentAttributes.of({spellcheck:String(h),autocorrect:"on",autocapitalize:"on",contenteditable:"true"}));var p=!this.sourceMode;if(this.editorEl.toggleClass("is-live-preview",p),p){var d=this.livePreviewPlugin;d||(d=this.livePreviewPlugin=function(t,e){var n=Ns.define((function(e){return new KB(t,e)}),{decorations:function(t){return t.decorations}}),i=Ns.define((function(t){return new $B(t)}),{decorations:function(t){return t.decorations}}),r=function(t,e){var n=t.app,i=[],r=[];return _i.define({create:function(){return as.none},update:function(o,s){var a=s.state,l=!0;(e.composing||eR.has(e))&&(l=!1);var c=zc(a,e.viewport.to,20);if(c||(l=!1),(Wu([s],LB)||Wu([s],Nu)||Wu([s],Bu))&&(l=!0),!l)return o.map(s.changes);c||(c=Rc(a));var u=a.selection.ranges,h=a.field(zu),p=function(t,e){return ju(u,t,e)||Uu(h,t,e)},d=function(t,e){var n=z.lineAt(t),i=n.from,r=n.text,o=z.lineAt(e),s=o.from,a=o.text;return""===r.substr(0,t-i).trim()&&""===a.substr(e-s).trim()},f=t.file?t.file.path:"",g=[],m=i;i=[];var v=r;r=[];var y=!1,b=-1,w=-1,k=-1,C="",x=!1,S="",E="",M=-1,L=-1,D=-1,A=-1,T=-1,P=!1,O=-1,F="",I=-1,N="",B=function(e,r,o){for(var s=ag(e),a=s.href,l=s.title,c=null,u=0,h=m;u<h.length;u++){var p=h[u];if(p.sourcePath===f&&p.href===a){c=p,m.remove(p);break}}return c?c.title!==l&&c.applyTitle(l):(c=new YB(n,f,a,l)).child&&t.addChild(c.child),c.setPos(r,o),i.push(c),c},R=function(t,e,n){var i=z.lineAt(e),r=i.from,o=i.to,s=i.text,a=""===s.substr(0,e-r).trim()&&""===s.substr(n-r).trim();a?p(r,o)?g.push(as.widget({widget:t,block:a,side:1}).range(o)):g.push(as.replace({widget:t,block:a,side:1}).range(r,o)):p(e,n)?g.push(as.widget({widget:t,side:1}).range(n)):g.push(as.replace({widget:t,side:1}).range(e,n))},z=a.doc;c.iterate({enter:function(e,i,o){var s=e.prop(Tu);if(s)if((K=new Set(s.split(" "))).has("formatting-math-begin"))A=i,T=o,P=K.has("math-block");else if(-1!==A){if(K.has("formatting-math-end")){var a=i,l=o,c=P,u=z.sliceString(T,a);(m=new QB(u,c)).setPos(c&&u.startsWith("\n")?T+1:T,c&&u.endsWith("\n")?a-1:a),c=c&&d(A,l),p(A,l)?P&&g.push(as.widget({widget:m,block:c,side:1}).range(l)):g.push(as.replace({widget:m,block:c,side:1}).range(A,l)),A=-1,T=-1}}else if(K.has("formatting-link-start"))y=K.has("formatting-embed"),b=i,w=o;else if(b>-1)if(K.has("hmd-internal-link")){var h=z.sliceString(i,o);C+=h,k=o}else{if(K.has("formatting-link-end")&&C)if(y){var m=B(C,w,k);R(m,b,o)}else{var H=tA(q=ag(C).href).path;n.metadataCache.getFirstLinkpathDest(H,f)||g.push(BB.range(w,k))}C="",b=-1}else if(K.has("image-marker"))x=!0,M=i;else if(K.has("image-alt-text")&&!K.has("formatting"))S=z.sliceString(i,o);else if(x&&K.has("url")&&!K.has("formatting"))E=z.sliceString(i,o),L=i,D=o;else if(x&&E&&K.has("formatting")){m=void 0;if(Qf(E=tg(E))){var V=void 0;try{V=decodeURI(E)}catch(t){return}var q=ng(V).trim();m=B(q+"|"+S,M,o)}else By.isDesktopApp&&E.startsWith("file:///")&&(E="app://local/"+E.substr("file:///".length)),(m=new WB(E,S)).setPos(L,D);R(m,M,o),x=!1,E="",S="",M=-1,L=-1,D=-1}else if(K.has("hmd-html-begin"))I=i;else if(I>-1&&!N&&K.has("tag"))N=z.sliceString(i,o);else if(K.has("hmd-html-end")&&N&&!ZB.contains(N)){var j=o,U=z.sliceString(I,j),_=z.lineAt(I),W=z.lineAt(j);c=!function(t){if(!t)return!1;if(yh.has(t))return yh.get(t);var e,n;try{e=document.createElement(t),document.body.appendChild(e),n=getComputedStyle(e).display}finally{e&&document.body.removeChild(e)}var i=n&&n.startsWith("inline");return yh.set(t,i),i}(N);if(z.sliceString(_.from,I).trim()||z.sliceString(j,W.to).trim()||(I=_.from,j=W.to),!p(I,j))(m=new tR(n,U,c)).setPos(I,j),g.push(as.replace({widget:m,block:c,side:1}).range(I,j));I=-1,N=""}else K.has("hr")&&(p(i,o)||g.push(VB.range(i,o)));var G=e.prop(Pu);if(G){var K;if((K=new Set(G.split(" "))).has("HyperMD-codeblock-begin")){var $=z.lineAt(i).text.match(AB);F="",$&&(F=$[2]),O=i}if(K.has("HyperMD-codeblock-end")&&-1!==O){var Y=O;if(O=-1,p(Y,o))return;if((W=z.lineAt(i)).number<=1)return;if((_=z.lineAt(Y)).number>=z.lines)return;var J=z.line(_.number+1).from,Q=z.line(W.number-1).to,X=z.sliceString(J,Q);if(JB.canRenderLang(F)){for(var Z=null,tt=0,et=v;tt<et.length;tt++){var nt=et[tt];if(nt.lang===F&&nt.code===X){Z=nt,v.remove(Z);break}}Z||(Z=new JB(n,t,F,X)),Z.setPos(J,Q),Z.lineStart=_.number-1,Z.lineEnd=W.number-1,r.push(Z),g.push(as.replace({widget:Z,block:!0,side:0}).range(Y,o))}else{var it=F;try{var rt=CodeMirror.findModeByName(it);rt&&"null"!==rt.name&&(it=rt.name)}catch(t){}g.push(OB.range(_.from,_.to)),g.push(as.widget({widget:new XB(it,X)}).range(_.to)),g.push(FB.range(W.from,W.to))}}}}});for(var H=0,V=m;H<V.length;H++){var q=V[H];q.child&&t.removeChild(q.child)}for(var j=0,U=v;j<U.length;j++)for(var _=0,W=U[j].children;_<W.length;_++){var G=W[_];t.removeChild(G)}return as.set(g,!0)},provide:function(t){return Nl.decorations.from(t)}})}(t,e);function o(t,e,n,i){var r=t.doc.lineAt(n),o=r.number+(i?1:-1);if(o<1||o>t.doc.lines)return null;var s=t.doc.line(o),a=!0,l=null;if(e.between(s.from,s.to,(function(t,e,n){if(l||t>s.from||e<s.to)return a=!1,!1;l||(l=n)})),!a||!l)return null;if(!l.spec.block)return null;var c=n-r.from;return Bi.cursor(s.from+Math.min(s.length,c))}function s(t,e,n){var i=t.state,s=i.selection,a=t.state.field(r),l=function(r){if(!e&&!r.empty)return Bi.cursor(n?r.to:r.from);var s=o(i,a,r.head,n);if(s)return s;var l=t.moveVertically(r,n);return l.head!=r.head?l:t.moveToLineBoundary(r,n)},c=Bi.create(s.ranges.map((function(t){var n=l(t);return e&&(n=Bi.range(t.anchor,n.head,n.goalColumn)),n})),s.mainIndex);return c.eq(i.selection)||t.dispatch(i.update({selection:c,scrollIntoView:!0,userEvent:"select"})),!0}var a=Qi.high(Gl.of([{key:"ArrowUp",run:function(t){return s(t,!1,!1)},shift:function(t){return s(t,!0,!1)}},{key:"ArrowDown",run:function(t){return s(t,!1,!0)},shift:function(t){return s(t,!0,!0)}}])),l=Nl.domEventHandlers({mousedown:function(){eR.add(e);var t={capture:!0},n=function(){window.removeEventListener("mouseup",n,t),eR.delete(e),setTimeout((function(){e.dispatch({selection:e.state.selection})}),50)};window.addEventListener("mouseup",n,t)}});return[n,i,r,a,l]}(this.view,this.cm)),n.push(d)}var f=t.getConfig("autoPairBrackets"),g=t.getConfig("autoPairMarkdown");if(f||g){var m=[];f&&m.push("(","[","{","'",'"'),g&&m.push("*","_","`","```");var v={brackets:m};n.push(Ik()),n.push(Gl.of(Vk)),n.push(Lr.languageData.of((function(){return[{closeBrackets:v}]}))),n.push(xO)}return(By.isMobile?!!localStorage.getItem("vim"):t.getConfig("vimMode"))&&n.push([mO,Qi.high(vO),dO,wO]),n.push.apply(n,this.app.workspace.editorExtensions),n},t.prototype.updateOptions=function(){this.cm.dispatch({effects:HO.reconfigure(this.getDynamicExtensions())})},t.prototype.showSearch=function(t){void 0===t&&(t=!1),this.search.show(t)},t.prototype.getSelection=function(){return this.editor.getSelection()},t.prototype.onScroll=function(){this.editorSuggest.reposition(),this.scrolling?this.scrolling=!1:this.view.onMarkdownScroll()},t.prototype.getScroll=function(){var t=this.cm,e=t.scrollDOM.scrollTop,n=t.lineBlockAtHeight(e);return t.state.doc.lineAt(n.from).number-1+Math.max(0,e-n.top)/(n.height||1)},t.prototype.applyScroll=function(t){if(Number.isNumber(t)&&!isNaN(t)){var e=Math.floor(t),n=t-e;this.scrolling=!0;var i=this.cm,r=i.state.doc.line(e+1),o=i.lineBlockAt(r.from);i.scrollDOM.scrollTop=o.top+n*o.height}},t.prototype.getFoldInfo=function(){for(var t=this.cm,e=t.state.doc,n=[],i=XS(t.state).iter();i.value;){var r=Vu(e,i.from),o=Vu(e,i.to);n.push({from:r.line,to:o.line}),i.next()}return n.length>0?{folds:n,lines:e.lines}:null},t.prototype.applyFoldInfo=function(t){var e=this.cm;if(!t||e.state.doc.lines===t.lines){oE(e);var n=[];if(t)for(var i=0,r=t.folds;i<r.length;i++){var o=r[i],s=e.state.doc.line(o.from+1),a=vu(e.state,s.from,s.to);a&&n.push($S.of(a))}0!==n.length&&e.dispatch({effects:n})}},t.prototype.onEditorMousedown=function(t){if(0===t.button||1===t.button){var e=t.target,n=this.cm.contentDOM;if(n.contains(e)){for(;e&&e!==n;){if(e instanceof HTMLElement&&"false"===e.contentEditable)return;e=e.parentNode}if(Bb.isModEvent(t)){var i=this.editor.getClickableTokenAt(this.editor.posAtMouse(t));i&&(this.view.triggerClickableToken(i,t.shiftKey||1===t.button),t.preventDefault())}}}},t.prototype.onEditorLinkMouseover=function(t,e){if(Ne(t,e)){var n=this.editor.getClickableTokenAt(this.editor.posAtMouse(t));n&&"internal-link"===n.type&&this.app.workspace.trigger("hover-link",{event:t,source:"editor",hoverParent:this,targetEl:e,linktext:n.text,sourcePath:this.view.file.path})}},t.prototype.updateLinkPopup=function(){var t=this;if(By.isMobile){var e=this,n=e.cm,i=e.editor,r=e.cursorPopupEl;r&&(r.detach(),this.cursorPopupEl=null);var o=i.getCursor("from"),s=i.getClickableTokenAt(o);if(s){var a=0===s.start.line,l=n.scrollDOM,c=n.contentDOM;this.cursorPopupEl=l.createDiv();var u=this.cursorPopupEl.createDiv({cls:"follow-link-popover"});"internal-link"===s.type?u.setText(Ee("editor.link-popover.tooltip-follow-link")):"external-link"===s.type?u.setText(Ee("editor.link-popover.tooltip-open-link")):"tag"===s.type&&u.setText(Ee("editor.link-popover.tooltip-search-tag")),u.createDiv("popover-arrow"),u.style.position="absolute",a&&u.addClass("mod-bottom"),u.style.cursor="pointer",u.style.zIndex="var(--layer-popover)",u.style.top="0",u.style.left="0";var h=i.coordsAtPos(s.start,!0),p=i.coordsAtPos(s.end,!0),d=u.offsetWidth,f=u.offsetParent?u.offsetParent.clientWidth:l.clientWidth,g=c.offsetTop,m=(h.left+p.left)/2+c.offsetLeft-d/2;g+=a?h.bottom+8:h.top-u.offsetHeight-8,p.top>=h.bottom&&(m=h.left+c.offsetLeft-d/2),u.style.top=g+"px",u.style.left=Math.clamp(m,0,f-d)+"px",u.onClickEvent((function(e){u.detach(),t.view.triggerClickableToken(s,e.shiftKey||1===e.button),e.preventDefault()})),"internal-link"===s.type&&u.addEventListener("mouseover",(function(e){Ne(e,u)&&t.app.workspace.trigger("hover-link",{event:e,source:"editor",hoverParent:t,targetEl:u,linktext:s.text,sourcePath:t.view.file.path})}))}}},t.prototype.onDocumentClick=function(t){var e=this;this.editorSuggest.close(),this.cm.dom.contains(t.target)&&setTimeout((function(){return e.editor.removeHighlights("obsidian-search-match-highlight")}),0)},t.prototype.onResize=function(){var t=this.editorEl,e=this.editor,n=this.view.contentEl,i=n.clientWidth,r=n.clientHeight;this.editorSuggest.reposition(),t.style.width=i+"px",t.style.height=r+"px",this.updateBottomPadding(r),By.isMobile&&e.hasFocus()&&e.scrollIntoView({from:e.getCursor("anchor"),to:e.getCursor("head")}),e.refresh()},t.prototype.updateBottomPadding=function(t){var e=this.cm,n=this.backlinksEl,i=Math.round(t/2),r=i+"px";n&&(r="100px",n.style.minHeight=Math.max(0,i-100)+"px"),e.contentDOM.style.paddingBottom=r},t.prototype.onCssChange=function(){this.cm.dispatch({effects:qP.clearCache.of()}),this.editor.refresh()},t.prototype.toggleSource=function(){this.sourceMode=!this.sourceMode,this.updateOptions()},t}(),GO=/[^a-zA-Z0-9]/,KO=/\s/,$O=/[\r\n]/,YO=/\n\r?\n$/,JO=/^\r?\n\r?\n/;function QO(t,e){return t<e?t:e}function XO(t,e){return t>e?t:e}!function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"}(jO||(jO={}));var ZO=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return t.prototype.diff_main=function(t,e,n,i){void 0===i&&(i=this.diffTimeout<=0?Number.MAX_VALUE:Date.now()+1e3*this.diffTimeout);var r=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t===e)return t?[[jO.DIFF_EQUAL,t]]:[];void 0===n&&(n=!0);var o=n,s=this.diff_commonPrefix(t,e),a=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var l=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var c=this.diff_compute_(t,e,o,r);return a&&c.unshift([jO.DIFF_EQUAL,a]),l&&c.push([jO.DIFF_EQUAL,l]),this.diff_cleanupMerge(c),c},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,i=QO(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)===e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!==e.charAt(e.length-1))return 0;for(var n=0,i=QO(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)===e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],i=0,r=null,o=0,s=0,a=0,l=0,c=0;o<t.length;)t[o][0]===jO.DIFF_EQUAL?(n[i++]=o,s=l,a=c,l=0,c=0,r=t[o][1]):(t[o][0]===jO.DIFF_INSERT?l+=t[o][1].length:c+=t[o][1].length,r&&r.length<=XO(s,a)&&r.length<=XO(l,c)&&(t.splice(n[i-1],0,[jO.DIFF_DELETE,r]),t[n[i-1]+1][0]=jO.DIFF_INSERT,i--,o=--i>0?n[i-1]:-1,s=0,a=0,l=0,c=0,r=null,e=!0)),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;){if(t[o-1][0]===jO.DIFF_DELETE&&t[o][0]===jO.DIFF_INSERT){var u=t[o-1][1],h=t[o][1],p=this.diff_commonOverlap_(u,h),d=this.diff_commonOverlap_(h,u);p>=d?(p>=u.length/2||p>=h.length/2)&&(t.splice(o,0,[jO.DIFF_EQUAL,h.substring(0,p)]),t[o-1][1]=u.substring(0,u.length-p),t[o+1][1]=h.substring(p),o++):(d>=u.length/2||d>=h.length/2)&&(t.splice(o,0,[jO.DIFF_EQUAL,u.substring(0,d)]),t[o-1][0]=jO.DIFF_INSERT,t[o-1][1]=h.substring(0,h.length-d),t[o+1][0]=jO.DIFF_DELETE,t[o+1][1]=u.substring(d),o++),o++}o++}},t.prototype.diff_cleanupSemanticLossless=function(t){for(var e=1;e<t.length-1;){if(t[e-1][0]===jO.DIFF_EQUAL&&t[e+1][0]===jO.DIFF_EQUAL){var n=t[e-1][1],i=t[e][1],r=t[e+1][1],o=this.diff_commonSuffix(n,i);if(o){var s=i.substring(i.length-o);n=n.substring(0,n.length-o),i=s+i.substring(0,i.length-o),r=s+r}for(var a=n,l=i,c=r,u=this.diff_cleanupSemanticScore_(n,i)+this.diff_cleanupSemanticScore_(i,r);i.charAt(0)===r.charAt(0);){n+=i.charAt(0),i=i.substring(1)+r.charAt(0),r=r.substring(1);var h=this.diff_cleanupSemanticScore_(n,i)+this.diff_cleanupSemanticScore_(i,r);h>=u&&(u=h,a=n,l=i,c=r)}t[e-1][1]!==a&&(a?t[e-1][1]=a:(t.splice(e-1,1),e--),t[e][1]=l,c?t[e+1][1]=c:(t.splice(e+1,1),e--))}e++}},t.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],i=0,r=null,o=0,s=!1,a=!1,l=!1,c=!1;o<t.length;)t[o][0]===jO.DIFF_EQUAL?(t[o][1].length<this.diffEditCost&&(l||c)?(n[i++]=o,s=l,a=c,r=t[o][1]):(i=0,r=null),l=c=!1):(t[o][0]===jO.DIFF_DELETE?c=!0:l=!0,r&&(s&&a&&l&&c||r.length<this.diffEditCost/2&&Number(s)+Number(a)+Number(l)+Number(c)===3)&&(t.splice(n[i-1],0,[jO.DIFF_DELETE,r]),t[n[i-1]+1][0]=jO.DIFF_INSERT,i--,r=null,s&&a?(l=c=!0,i=0):(o=--i>0?n[i-1]:-1,l=c=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([jO.DIFF_EQUAL,""]);for(var e,n=0,i=0,r=0,o="",s="";n<t.length;)switch(t[n][0]){case jO.DIFF_INSERT:r++,s+=t[n][1],n++;break;case jO.DIFF_DELETE:i++,o+=t[n][1],n++;break;case jO.DIFF_EQUAL:i+r>1?(0!==i&&0!==r&&(0!==(e=this.diff_commonPrefix(s,o))&&(n-i-r>0&&t[n-i-r-1][0]===jO.DIFF_EQUAL?t[n-i-r-1][1]+=s.substring(0,e):(t.splice(0,0,[jO.DIFF_EQUAL,s.substring(0,e)]),n++),s=s.substring(e),o=o.substring(e)),0!==(e=this.diff_commonSuffix(s,o))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),o=o.substring(0,o.length-e))),n-=i+r,t.splice(n,i+r),o.length&&(t.splice(n,0,[jO.DIFF_DELETE,o]),n++),s.length&&(t.splice(n,0,[jO.DIFF_INSERT,s]),n++),n++):0!==n&&t[n-1][0]===jO.DIFF_EQUAL?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=0,i=0,o="",s=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(n=1;n<t.length-1;)t[n-1][0]===jO.DIFF_EQUAL&&t[n+1][0]===jO.DIFF_EQUAL&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),a=!0):t[n][1].substring(0,t[n+1][1].length)===t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,e){var n,i=0,r=0,o=0,s=0;for(n=0;n<t.length&&(t[n][0]!==jO.DIFF_INSERT&&(i+=t[n][1].length),t[n][0]!==jO.DIFF_DELETE&&(r+=t[n][1].length),!(i>e));n++)o=i,s=r;return t.length!==n&&t[n][0]===jO.DIFF_DELETE?s:s+(e-o)},t.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,r=/>/g,o=/\n/g,s=0;s<t.length;s++){var a=t[s][0],l=t[s][1].replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(a){case jO.DIFF_INSERT:e[s]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case jO.DIFF_DELETE:e[s]='<del style="background:#ffe6e6;">'+l+"</del>";break;case jO.DIFF_EQUAL:e[s]="<span>"+l+"</span>"}}return e.join("")},t.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==jO.DIFF_INSERT&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==jO.DIFF_DELETE&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var o=t[r][0],s=t[r][1];switch(o){case jO.DIFF_INSERT:n+=s.length;break;case jO.DIFF_DELETE:i+=s.length;break;case jO.DIFF_EQUAL:e+=XO(n,i),n=0,i=0}}return e+=XO(n,i)},t.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case jO.DIFF_INSERT:e[n]="+"+encodeURI(t[n][1]);break;case jO.DIFF_DELETE:e[n]="-"+t[n][1].length;break;case jO.DIFF_EQUAL:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,r=0,o=e.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{n[i++]=[jO.DIFF_INSERT,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+a);var c=t.substring(r,r+=l);"="===o[s].charAt(0)?n[i++]=[jO.DIFF_EQUAL,c]:n[i++]=[jO.DIFF_DELETE,c];break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(r!==t.length)throw new Error("Delta length ("+r+") does not equal source text length ("+t.length+")");return n},t.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=XO(0,QO(n,t.length)),t===e?0:t.length?t.substring(n,n+e.length)===e?n:this.match_bitap_(t,e,n):-1},t.prototype.patch_make=function(t,e,n){var i,r;if("string"==typeof t&&"string"==typeof e&&void 0===n)i=t,(r=this.diff_main(i,e,!0)).length>2&&(this.diff_cleanupSemantic(r),this.diff_cleanupEfficiency(r));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)r=t,i=this.diff_text1(r);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)i=t,r=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make");i=t,r=n}if(0===r.length)return[];for(var o=[],s=new tF,a=0,l=0,c=0,u=i,h=i,p=0;p<r.length;p++){var d=r[p][0],f=r[p][1];switch(a||d===jO.DIFF_EQUAL||(s.start1=l,s.start2=c),d){case jO.DIFF_INSERT:s.diffs[a++]=r[p],s.length2+=f.length,h=h.substring(0,c)+f+h.substring(c);break;case jO.DIFF_DELETE:s.length1+=f.length,s.diffs[a++]=r[p],h=h.substring(0,c)+h.substring(c+f.length);break;case jO.DIFF_EQUAL:f.length<=2*this.patchMargin&&a&&r.length!==p+1?(s.diffs[a++]=r[p],s.length1+=f.length,s.length2+=f.length):f.length>=2*this.patchMargin&&a&&(this.patch_addContext_(s,u),o.push(s),s=new tF,a=0,u=h,l=c)}d!==jO.DIFF_INSERT&&(l+=f.length),d!==jO.DIFF_DELETE&&(c+=f.length)}return a&&(this.patch_addContext_(s,u),o.push(s)),o},t.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){for(var i=t[n],r=new tF,o=0;o<i.diffs.length;o++)r.diffs[o]=[i.diffs[o][0],i.diffs[o][1]];r.start1=i.start1,r.start2=i.start2,r.length1=i.length1,r.length2=i.length2,e[n]=r}return e},t.prototype.patch_apply=function(t,e){if(0===t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,r=[],o=0;o<t.length;o++){var s=t[o].start2+i,a=this.diff_text1(t[o].diffs),l=void 0,c=-1;if(a.length>this.matchMaxBits?-1!==(l=this.match_main(e,a.substring(0,this.matchMaxBits),s))&&(-1===(c=this.match_main(e,a.substring(a.length-this.matchMaxBits),s+a.length-this.matchMaxBits))||l>=c)&&(l=-1):l=this.match_main(e,a,s),-1===l)r[o]=!1,i-=t[o].length2-t[o].length1;else{r[o]=!0,i=l-s;var u=void 0;if(a===(u=-1===c?e.substring(l,l+a.length):e.substring(l,c+this.matchMaxBits)))e=e.substring(0,l)+this.diff_text2(t[o].diffs)+e.substring(l+a.length);else{var h=this.diff_main(a,u,!1);if(a.length>this.matchMaxBits&&this.diff_levenshtein(h)/a.length>this.patchDeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(h);for(var p=0,d=0,f=0;f<t[o].diffs.length;f++){var g=t[o].diffs[f];g[0]!==jO.DIFF_EQUAL&&(d=this.diff_xIndex(h,p)),g[0]===jO.DIFF_INSERT?e=e.substring(0,l+d)+g[1]+e.substring(l+d):g[0]===jO.DIFF_DELETE&&(e=e.substring(0,l+d)+e.substring(l+this.diff_xIndex(h,p+g[1].length))),g[0]!==jO.DIFF_DELETE&&(p+=g[1].length)}}}}}return[e=e.substring(n.length,e.length-n.length),r]},t.prototype.patch_addPadding=function(t){for(var e=this.patchMargin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var r=t[0],o=r.diffs;if(0===o.length||o[0][0]!==jO.DIFF_EQUAL)o.unshift([jO.DIFF_EQUAL,n]),r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e;else if(e>o[0][1].length){var s=e-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],r.start1-=s,r.start2-=s,r.length1+=s,r.length2+=s}if(0===(o=(r=t[t.length-1]).diffs).length||o[o.length-1][0]!==jO.DIFF_EQUAL)o.push([jO.DIFF_EQUAL,n]),r.length1+=e,r.length2+=e;else if(e>o[o.length-1][1].length){s=e-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,s),r.length1+=s,r.length2+=s}return n},t.prototype.patch_splitMax=function(t){for(var e=this.matchMaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var r=i.start1,o=i.start2,s="";0!==i.diffs.length;){var a=new tF,l=!0;for(a.start1=r-s.length,a.start2=o-s.length,""!==s&&(a.length1=a.length2=s.length,a.diffs.push([jO.DIFF_EQUAL,s]));0!==i.diffs.length&&a.length1<e-this.patchMargin;){var c=i.diffs[0][0],u=i.diffs[0][1];c===jO.DIFF_INSERT?(a.length2+=u.length,o+=u.length,a.diffs.push(i.diffs.shift()),l=!1):c===jO.DIFF_DELETE&&1===a.diffs.length&&a.diffs[0][0]===jO.DIFF_EQUAL&&u.length>2*e?(a.length1+=u.length,r+=u.length,l=!1,a.diffs.push([c,u]),i.diffs.shift()):(u=u.substring(0,e-a.length1-this.patchMargin),a.length1+=u.length,r+=u.length,c===jO.DIFF_EQUAL?(a.length2+=u.length,o+=u.length):l=!1,a.diffs.push([c,u]),u===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(u.length))}s=(s=this.diff_text2(a.diffs)).substring(s.length-this.patchMargin);var h=this.diff_text1(i.diffs).substring(0,this.patchMargin);""!==h&&(a.length1+=h.length,a.length2+=h.length,0!==a.diffs.length&&a.diffs[a.diffs.length-1][0]===jO.DIFF_EQUAL?a.diffs[a.diffs.length-1][1]+=h:a.diffs.push([jO.DIFF_EQUAL,h])),l||t.splice(++n,0,a)}}},t.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},t.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var o=n[i].match(r);if(!o)throw new Error("Invalid patch string: "+n[i]);var s=new tF;e.push(s),s.start1=parseInt(o[1],10),""===o[2]?(s.start1--,s.length1=1):"0"===o[2]?s.length1=0:(s.start1--,s.length1=parseInt(o[2],10)),s.start2=parseInt(o[3],10),""===o[4]?(s.start2--,s.length2=1):"0"===o[4]?s.length2=0:(s.start2--,s.length2=parseInt(o[4],10)),i++;for(var a=void 0,l=void 0,c=void 0;i<n.length;){a=n[i].charAt(0),c=n[i].substring(1);try{l=decodeURI(c)}catch(t){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"===a)s.diffs.push([jO.DIFF_DELETE,l]);else if("+"===a)s.diffs.push([jO.DIFF_INSERT,l]);else if(" "===a)s.diffs.push([jO.DIFF_EQUAL,l]);else{if("@"===a)break;if(""!==a)throw new Error('Invalid patch mode "'+a+'" in: '+l)}i++}}return e},t.prototype.diff_compute_=function(t,e,n,i){var r;if(!t)return[[jO.DIFF_INSERT,e]];if(!e)return[[jO.DIFF_DELETE,t]];var o=t.length>e.length?t:e,s=t.length>e.length?e:t,a=o.indexOf(s);if(-1!==a)return r=[[jO.DIFF_INSERT,o.substring(0,a)],[jO.DIFF_EQUAL,s],[jO.DIFF_INSERT,o.substring(a+s.length)]],t.length>e.length&&(r[0][0]=jO.DIFF_DELETE,r[2][0]=jO.DIFF_DELETE),r;if(1===s.length)return[[jO.DIFF_DELETE,t],[jO.DIFF_INSERT,e]];var l=this.diff_halfMatch_(t,e);if(l){var c=l[0],u=l[1],h=l[2],p=l[3],d=l[4],f=this.diff_main(c,h,n,i),g=this.diff_main(u,p,n,i);return f.concat([[jO.DIFF_EQUAL,d]],g)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},t.prototype.diff_lineMode_=function(t,e,n){var i=this.diff_linesToChars_(t,e);t=i.chars1,e=i.chars2;var r=i.lineArray,o=this.diff_main(t,e,!1,n);this.diff_charsToLines_(o,r),this.diff_cleanupSemantic(o),o.push([jO.DIFF_EQUAL,""]);for(var s=0,a=0,l=0,c="",u="";s<o.length;){switch(o[s][0]){case jO.DIFF_INSERT:l++,u+=o[s][1];break;case jO.DIFF_DELETE:a++,c+=o[s][1];break;case jO.DIFF_EQUAL:if(a>=1&&l>=1){o.splice(s-a-l,a+l),s=s-a-l;for(var h=this.diff_main(c,u,!1,n),p=h.length-1;p>=0;p--)o.splice(s,0,h[p]);s+=h.length}l=0,a=0,c="",u=""}s++}return o.pop(),o},t.prototype.diff_bisect_=function(t,e,n){for(var i=t.length,r=e.length,o=Math.ceil((i+r)/2),s=o,a=2*o,l=new Array(a),c=new Array(a),u=0;u<a;u++)l[u]=-1,c[u]=-1;l[s+1]=0,c[s+1]=0;for(var h=i-r,p=h%2!=0,d=0,f=0,g=0,m=0,v=0;v<o&&!(Date.now()>n);v++){for(var y=-v+d;y<=v-f;y+=2){for(var b=s+y,w=void 0,k=(w=y===-v||y!==v&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1)-y;w<i&&k<r&&t.charAt(w)===e.charAt(k);)w++,k++;if(l[b]=w,w>i)f+=2;else if(k>r)d+=2;else if(p){if((x=s+h-y)>=0&&x<a&&-1!==c[x])if(w>=(S=i-c[x]))return this.diff_bisectSplit_(t,e,w,k,n)}}for(var C=-v+g;C<=v-m;C+=2){for(var x=s+C,S=void 0,E=(S=C===-v||C!==v&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-C;S<i&&E<r&&t.charAt(i-S-1)===e.charAt(r-E-1);)S++,E++;if(c[x]=S,S>i)m+=2;else if(E>r)g+=2;else if(!p){if((b=s+h-C)>=0&&b<a&&-1!==l[b]){k=s+(w=l[b])-b;if(w>=(S=i-S))return this.diff_bisectSplit_(t,e,w,k,n)}}}}return[[jO.DIFF_DELETE,t],[jO.DIFF_INSERT,e]]},t.prototype.diff_bisectSplit_=function(t,e,n,i,r){var o=t.substring(0,n),s=e.substring(0,i),a=t.substring(n),l=e.substring(i),c=this.diff_main(o,s,!1,r),u=this.diff_main(a,l,!1,r);return c.concat(u)},t.prototype.diff_linesToChars_=function(t,e){var n=[],i={};return n[0]="",{chars1:this.diff_linesToCharsMunge_(t,n,i,4e4),chars2:this.diff_linesToCharsMunge_(e,n,i,65535),lineArray:n}},t.prototype.diff_linesToCharsMunge_=function(t,e,n,i){for(var r="",o=0,s=-1,a=e.length;s<t.length-1;){-1===(s=t.indexOf("\n",o))&&(s=t.length-1);var l=t.substring(o,s+1);(n.hasOwnProperty?n.hasOwnProperty(l):void 0!==n[l])?r+=String.fromCharCode(n[l]):(a===i&&(l=t.substring(o),s=t.length),r+=String.fromCharCode(a),n[l]=a,e[a++]=l),o=s+1}return r},t.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],o=0;o<i.length;o++)r[o]=e[i.charCodeAt(o)];t[n][1]=r.join("")}},t.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0===n||0===i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=QO(n,i);if(t===e)return r;for(var o=0,s=1;;){var a=t.substring(r-s),l=e.indexOf(a);if(-1===l)return o;s+=l,0!==l&&t.substring(r-s)!==e.substring(0,s)||(o=s,s++)}},t.prototype.diff_halfMatch_=function(t,e){if(this.diffTimeout<=0)return null;var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;var r,o,s,a,l,c=this.diff_halfMatchI_(n,i,Math.ceil(n.length/4)),u=this.diff_halfMatchI_(n,i,Math.ceil(n.length/2));if(!c&&!u)return null;var h=(r=u?c&&c[4].length>u[4].length?c:u:c)[4];return t.length>e.length?(o=r[0],s=r[1],a=r[2],l=r[3]):(a=r[0],l=r[1],o=r[2],s=r[3]),[o,s,a,l,h]},t.prototype.diff_halfMatchI_=function(t,e,n){for(var i,r,o,s,a=t.substring(n,n+Math.floor(t.length/4)),l="",c=e.indexOf(a,0);-1!==c;){var u=this.diff_commonPrefix(t.substring(n),e.substring(c)),h=this.diff_commonSuffix(t.substring(0,n),e.substring(0,c));l.length<h+u&&(l=e.substring(c-h,c)+e.substring(c,c+u),i=t.substring(0,n-h),r=t.substring(n+u),o=e.substring(0,c-h),s=e.substring(c+u)),c=e.indexOf(a,c+1)}return 2*l.length>=t.length?[i,r,o,s,l]:null},t.prototype.diff_cleanupSemanticScore_=function(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),r=n.match(GO),o=i.match(GO),s=r&&n.match(KO),a=o&&i.match(KO),l=s&&n.match($O),c=a&&i.match($O),u=l&&t.match(YO),h=c&&e.match(JO);return u||h?5:l||c?4:r&&!s&&a?3:s||a?2:r||o?1:0},t.prototype.match_bitap_=function(t,e,n){if(e.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(e),r=this.matchThreshold,o=t.indexOf(e,n);-1!==o&&(r=QO(this.match_bitapScore_(0,o,e,n),r),-1!==(o=t.lastIndexOf(e,n+e.length))&&(r=QO(this.match_bitapScore_(0,o,e,n),r)));var s,a,l=1<<e.length-1;o=-1;for(var c,u=e.length+t.length,h=0;h<e.length;h++){for(s=0,a=u;s<a;)this.match_bitapScore_(h,n+a,e,n)<=r?s=a:u=a,a=Math.floor((u-s)/2+s);u=a;var p=XO(1,n-a+1),d=QO(n+a,t.length)+e.length,f=Array(d+2);f[d+1]=(1<<h)-1;for(var g=d;g>=p;g--){var m=i[t.charAt(g-1)];if(f[g]=0===h?(f[g+1]<<1|1)&m:(f[g+1]<<1|1)&m|(c[g+1]|c[g])<<1|1|c[g+1],f[g]&l){var v=this.match_bitapScore_(h,g-1,e,n);if(v<=r){if(r=v,!((o=g-1)>n))break;p=XO(1,2*n-o)}}}if(this.match_bitapScore_(h+1,n,e,n)>r)break;c=f}return o},t.prototype.match_bitapScore_=function(t,e,n,i){var r=t/n.length,o=Math.abs(i-e);return this.matchDistance?r+o/this.matchDistance:o?1:r},t.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},t.prototype.patch_addContext_=function(t,e){if(0!==e.length){if(null==t.start2)throw Error("patch not initialized");for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!==e.lastIndexOf(n)&&n.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.patchMargin;var r=e.substring(t.start2-i,t.start2);r&&t.diffs.unshift([jO.DIFF_EQUAL,r]);var o=e.substring(t.start2+t.length1,t.start2+t.length1+i);o&&t.diffs.push([jO.DIFF_EQUAL,o]),t.start1-=r.length,t.start2-=r.length,t.length1+=r.length+o.length,t.length2+=r.length+o.length}},t}(),tF=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return t.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1===this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1===this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case jO.DIFF_INSERT:t="+";break;case jO.DIFF_DELETE:t="-";break;case jO.DIFF_EQUAL:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},t}();function eF(t,e,n){var i=new ZO,r=i.diff_main(t,e,!0,0);r.length>2&&(i.diff_cleanupSemantic(r),i.diff_cleanupEfficiency(r));var o=i.patch_make(t,r);return i.patch_apply(o,n)[0]}var nF,iF=function(t){function e(e){var n=t.call(this,e)||this;n.lastSavedData=null,n.saving=!1,n.saveAgain=!1,n.data=null,n.dirty=!1;var i=De(n.save.bind(n),2e3);return n.requestSave=function(){n.dirty=!0,i()},n}return M(e,t),e.prototype.onload=function(){t.prototype.onload.call(this);var e=this.app.vault;this.registerEvent(e.on("modify",this.onModify,this))},e.prototype.onUnloadFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.save(!0)];case 1:return t.sent(),[2]}}))}))},e.prototype.onLoadFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.loadFileInternal(t,!0)];case 1:return e.sent(),[2]}}))}))},e.prototype.save=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:if(this.dirty=!1,!(e=this.file)||e.deleted)return[2];if(this.saving)return t||(this.saveAgain=!0),[2];if(this.saveAgain=!1,n=this.getViewData(),!e||this.lastSavedData===n||null===this.lastSavedData)return[3,5];i=this.lastSavedData,t?(this.data=null,this.lastSavedData=null,this.clear()):(this.data=n,this.lastSavedData=n),this.saving=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.app.vault.modify(e,n)];case 2:return o.sent(),[3,5];case 3:throw r=o.sent(),this.lastSavedData=i,console.error(r),new jb(Ee("interface.msg-fail-to-save-file",{filepath:e.path,message:r.message})),r;case 4:return this.saving=!1,this.saveAgain&&!t&&this.save(),[7];case 5:return[2]}}))}))},e.prototype.onModify=function(t){if(!this.saving&&t===this.file){var e=this.file;this.loadFileInternal(e,!1)}},e.prototype.loadFileInternal=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r;return A(this,(function(o){switch(o.label){case 0:return t.saving?[4,this.app.vault.cachedRead(t)]:[3,2];case 1:return n=o.sent(),[3,4];case 2:return[4,this.app.vault.read(t)];case 3:n=o.sent(),o.label=4;case 4:if(i=this.lastSavedData,this.lastSavedData=n,!e&&i){if(i===n)return[2];if(this.dirty){if((r=this.getViewData())===n)return[2];r!==i&&(n=eF(i,r,n),new jb(Ee("interface.msg-file-changed",{file:t.path})))}}return this.setData(n,e),[2]}}))}))},e.prototype.setData=function(t,e){(this.data!==t||e)&&(this.data=t,this.setViewData(t,e))},e}(_b);!function(t){t[t.Showing=0]="Showing",t[t.Shown=1]="Shown",t[t.Hiding=2]="Hiding",t[t.Hidden=3]="Hidden"}(nF||(nF={}));var rF=[],oF=[],sF=0,aF=null,lF=function(){for(var t=0,e=rF;t<e.length;t++){e[t].hide()}setTimeout((function(){for(var t=0,e=oF;t<e.length;t++){e[t].hide()}}),5)},cF=function(){for(var t=0,e=rF;t<e.length;t++){e[t].hide()}},uF=function(t){aF={x:t.clientX,y:t.clientY}},hF=function(){if(aF)if(0===oF.length)document.removeEventListener("click",lF),document.removeEventListener("contextmenu",cF),document.removeEventListener("mousemove",uF),clearInterval(sF),sF=0;else{for(var t=document.elementFromPoint(aF.x,aF.y),e=0,n=oF;e<n.length;e++){n[e].detect(t)}for(var i=0,r=oF;i<r.length;i++){r[i].transition()}}},pF=function(){sF||(document.addEventListener("click",lF),document.addEventListener("contextmenu",lF),document.addEventListener("mousemove",uF),sF=window.setInterval(hF,500))},dF=function(t){function e(e,n,i){void 0===i&&(i=300);var r=t.call(this)||this;r.onTarget=!0,r.onHover=!1,r.shownPos=null,r.parent=e,r.targetEl=n,r.waitTime=i,r.state=nF.Showing;var o=r.hoverEl=createDiv("popover hover-popover"),s=r.onMouseIn=r.onMouseIn.bind(r),a=r.onMouseOut=r.onMouseOut.bind(r);return n&&(n.addEventListener("mouseover",s),n.addEventListener("mouseout",a)),o.addEventListener("mouseover",(function(t){Ne(t,o)&&(r.onHover=!0,r.transition())})),o.addEventListener("mouseout",(function(t){Ne(t,o)&&(r.onHover=!1,r.transition())})),r.timer=window.setTimeout(r.show.bind(r),i),rF.push(r),pF(),r}return M(e,t),e.prototype.onMouseIn=function(t){this.targetEl&&!Ne(t,this.targetEl)||(this.onTarget=!0,this.transition())},e.prototype.onMouseOut=function(t){this.targetEl&&!Ne(t,this.targetEl)||(this.onTarget=!1,this.transition())},e.prototype.detect=function(t){var e=this.targetEl,n=this.hoverEl;e&&(this.onTarget=t===e||e.contains(t)),this.onHover=t===n||n.contains(t)},e.prototype.shouldShow=function(){return this.shouldShowSelf()||this.shouldShowChild()},e.prototype.shouldShowSelf=function(){return this.onTarget||this.onHover},e.prototype.shouldShowChild=function(){var t=this;return oF.some((function(e){return e!==t&&e.targetEl&&t.hoverEl.contains(e.targetEl)&&e.shouldShow()}))},e.prototype.transition=function(){var t=this,e=this.shouldShow(),n=this.state;e?n===nF.Hiding&&(this.state=nF.Shown,clearTimeout(this.timer)):n===nF.Showing?this.hide():n===nF.Shown&&(this.state=nF.Hiding,this.timer=window.setTimeout((function(){t.shouldShow()?t.transition():t.hide()}),this.waitTime))},e.prototype.show=function(){var t=this.targetEl;!t||document.body.contains(t)?(this.state=nF.Shown,this.timer=0,this.shownPos=aF,this.position(aF),this.onShow(),rF.remove(this),oF.push(this),pF(),this.load()):this.hide()},e.prototype.hide=function(){var t=this,e=this,n=e.hoverEl,i=e.targetEl,r=e.timer;this.state=nF.Hidden,rF.remove(this),oF.remove(this),clearTimeout(r),n.detach(),i&&(i.removeEventListener("mouseover",this.onMouseIn),i.removeEventListener("mouseout",this.onMouseOut)),this.onTarget=!1,this.onHover=!1,oF.filter((function(e){return e.targetEl&&t.hoverEl.contains(e.targetEl)})).forEach((function(t){return t.hide()})),this.onHide(),this.unload()},e.prototype.onShow=function(){var t=this.parent;t.hoverPopover&&t.hoverPopover.hide(),t.hoverPopover=this},e.prototype.onHide=function(){var t=this.parent;t.hoverPopover===this&&(t.hoverPopover=null)},e.prototype.position=function(t){void 0===t&&(t=this.shownPos);var e,n=this.hoverEl,i=this.targetEl;if(t)e={top:t.y-10,bottom:t.y+10,left:t.x,right:t.x};else if(i){var r=ch(i,document.body);e={top:r.top,bottom:r.top+i.offsetHeight,left:r.left,right:r.left+i.offsetWidth}}else e={top:0,bottom:0,left:0,right:0};document.body.appendChild(n),ah(e,n,{gap:10})},e}(Vg);function fF(t,e){return t.length>e-3?t.substring(0,e-3)+"...":t}var gF=/\u00A0/g;function mF(t){return t.replace(gF," ")}function vF(t){if(!t||"string"!=typeof t)return null;var e=!0,n=t.split(".").map((function(t){var n=parseInt(t);return isNaN(n)&&(e=!1),n}));return e?n:null}function yF(t,e){var n=vF(t),i=vF(e);return!!i&&(!n||function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){if(t[i]<e[i])return!0;if(t[i]>e[i])return!1}return t.length<e.length||(t.length,e.length,!1)}(n,i))}function bF(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function wF(t,e,n){return(t=Math.round(255*t))<<16|(e=Math.round(255*e))<<8|(n=Math.round(255*n))}function kF(t){return{ctime:Math.round(t.birthtimeMs),mtime:Math.round(t.mtimeMs),size:t.size}}var CF=window.process,xF=CF?CF.platform:"",SF="darwin"===xF,EF="win32"===xF,MF=SF||EF,LF=function(){function t(t){this.thingsHappening=De(this.kill.bind(this),6e4,!0),this.basePath=t,this.fs=window.require("original-fs"),this.fsPromises=this.fs.promises,this.path=window.require("path");var e=window.require("electron");this.ipcRenderer=e.ipcRenderer,this.files={},this.promise=Promise.resolve(),this.watcher=null,this.watchers={},this.handler=null;try{this.btime=window.require("btime")}catch(t){}this.insensitive=SF||EF;try{this.testInsensitive()}catch(t){console.error(t)}}return t.prototype.testInsensitive=function(){var t=this,e=t.fs,n=t.path,i=t.basePath,r=n.join(i,".OBSIDIANTEST"),o=n.join(i,".OBSIDIANTEST".toLowerCase());e.existsSync(r)&&e.unlinkSync(r),e.writeFileSync(r,"","utf8"),this.insensitive=e.existsSync(o),e.unlinkSync(r)},t.prototype.getName=function(){return this.path.basename(this.basePath)},t.prototype.getBasePath=function(){return this.basePath},t.prototype.listAll=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return this.files["/"]={type:"folder",realpath:"/"},[4,this.listRecursive("")];case 1:return t.sent(),[2]}}))}))},t.prototype.listRecursive=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:return e=this.getFullRealPath(t),[4,this.fsPromises.readdir(e)];case 1:for(n=a.sent(),this.thingsHappening(),i=[],r=0,o=n;r<o.length;r++)s=o[r],i.push(this.listRecursiveChild(t,s));return[4,Promise.all(i)];case 2:return a.sent(),[2]}}))}))},t.prototype.listRecursiveChild=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r;return A(this,(function(o){switch(o.label){case 0:return n=ie(""===t?e:t+"/"+e),i=ne(n),this.trigger("raw",i),Yt(i)?[4,this.reconcileDeletion(n,i)]:[3,2];case 1:return[2,o.sent()];case 2:return o.trys.push([2,4,,8]),[4,this.reconcileFileInternal(n,i)];case 3:return o.sent(),[3,8];case 4:return"ENOENT"!==(r=o.sent()).code?[3,6]:[4,this.reconcileDeletion(n,i,!0)];case 5:return o.sent(),[3,7];case 6:throw r;case 7:return[3,8];case 8:return[2]}}))}))},t.prototype.mkdir=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=this.getFullPath(t),[4,this.fsPromises.mkdir(e,{recursive:!0})];case 1:return n.sent(),[4,this.reconcileInternalFile(t)];case 2:return n.sent(),[2]}}))}))}))},t.prototype.trashSystem=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=this.getFullPath(t),this.ipcRenderer.sendSync("trash",e)?[4,this.reconcileInternalFile(t)]:[2,!1];case 1:return n.sent(),[2,!0]}}))}))}))},t.prototype.trashLocal=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){var e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:return e=this.getFullPath(t),n=this.getFullPath(".trash"),[4,this.fsPromises.mkdir(n,{recursive:!0})];case 1:a.sent(),i=this.path.extname(e),r=this.path.basename(e,i),o=this.path.join(n,r+i),s=1,a.label=2;case 2:return[4,this._exists(o)];case 3:return a.sent()?(s++,o=this.path.join(n,r+" "+s+i),[3,2]):[3,4];case 4:return[4,this.fsPromises.rename(e,o)];case 5:return a.sent(),[4,this.reconcileInternalFile(t)];case 6:return a.sent(),[2]}}))}))}))},t.prototype.rmdir=function(t,e){var n=this;return this.queue((function(){return D(n,void 0,void 0,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return n=this.getFullPath(t),[4,this.fsPromises.rmdir(n,{maxRetries:5,recursive:e})];case 1:return i.sent(),[4,this.reconcileInternalFile(t)];case 2:return i.sent(),[2]}}))}))}))},t.prototype.read=function(t){var e=this;return this.queue((function(){var n=e.getFullPath(t);return e.fsPromises.readFile(n,"utf8")}))},t.prototype.readBinary=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=this.getFullPath(t),[4,this.fsPromises.readFile(e)];case 1:return[2,W(n.sent())]}}))}))}))},t.prototype.write=function(t,e,n){var i=this;return this.queue((function(){return D(i,void 0,void 0,(function(){var i;return A(this,(function(r){switch(r.label){case 0:return i=this.getFullPath(t),[4,this.fsPromises.writeFile(i,e,"utf8")];case 1:return r.sent(),[4,this.applyWriteOptions(i,n)];case 2:return r.sent(),[4,this.reconcileInternalFile(t)];case 3:return r.sent(),[2]}}))}))}))},t.prototype.writeBinary=function(t,e,n){var i=this;return this.queue((function(){return D(i,void 0,void 0,(function(){var i,r;return A(this,(function(o){switch(o.label){case 0:return i=this.getFullPath(t),s=e,r=Buffer.from(s),[4,this.fsPromises.writeFile(i,r)];case 1:return o.sent(),[4,this.applyWriteOptions(i,n)];case 2:return o.sent(),[4,this.reconcileInternalFile(t)];case 3:return o.sent(),[2]}var s}))}))}))},t.prototype.append=function(t,e,n){var i=this;return this.queue((function(){return D(i,void 0,void 0,(function(){var i;return A(this,(function(r){switch(r.label){case 0:return i=this.getFullPath(t),[4,this.fsPromises.appendFile(i,e,"utf8")];case 1:return r.sent(),[4,this.applyWriteOptions(i,n)];case 2:return r.sent(),[4,this.reconcileInternalFile(t)];case 3:return r.sent(),[2]}}))}))}))},t.prototype.applyWriteOptions=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r;return A(this,(function(o){switch(o.label){case 0:return e?(n=e.ctime,i=e.mtime,r=e.immediate,n&&this.btime&&this.btime.btime(t,n),i?[4,this.fsPromises.utimes(t,i/1e3,i/1e3)]:[3,2]):[2];case 1:o.sent(),o.label=2;case 2:return r&&r(),[2]}}))}))},t.prototype.getResourcePath=function(t){var e=this.getFullPath(t),n=0,i=this.files[t];return i&&"file"===i.type&&(n=i.mtime),n||(n=Date.now()),"app://local/"+encodeURIComponent(e)+"?"+n},t.prototype.remove=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=this.getFullPath(t),[4,this.fsPromises.unlink(e)];case 1:return n.sent(),[4,this.reconcileInternalFile(t)];case 2:return n.sent(),[2]}}))}))}))},t.prototype.update=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.reconcileInternalFile(t)];case 1:return e.sent(),[2]}}))}))}))},t.prototype.rename=function(t,e){return D(this,void 0,Promise,(function(){var n=this;return A(this,(function(i){switch(i.label){case 0:return t===e?[2]:[4,this.queue((function(){return D(n,void 0,void 0,(function(){var n,i,r,o,s,a,l,c,u,h;return A(this,(function(p){switch(p.label){case 0:return n=this.getFullPath(t),i=this.getFullPath(e),[4,this._exists(i,!1)];case 1:if(p.sent()&&(!this.insensitive||t.toLowerCase()!==e.toLowerCase()))throw new Error("Destination file already exists!");return r=this.files[t],o=r?r.realpath:null,[4,this.fsPromises.rename(n,i)];case 2:return p.sent(),r?(delete this.files[t],s=this.getRealPath(e),r.realpath=s,this.files[e]=r,this.trigger("renamed",e,t),"folder"===r.type&&this.watchers.hasOwnProperty(t)?(this.stopWatchPath(t),[4,this.startWatchPath(e)]):[3,4]):[2];case 3:p.sent(),p.label=4;case 4:if("folder"===r.type)for(a in this.files)this.files.hasOwnProperty(a)&&a.startsWith(t+"/")&&(l=a.slice(t.length),c=e+l,u=this.files[a],delete this.files[a],h=u.realpath.slice(o.length),u.realpath=s+h,this.files[c]=u,this.trigger("renamed",c,a));return[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},t.prototype.copy=function(t,e){return D(this,void 0,Promise,(function(){var n=this;return A(this,(function(i){switch(i.label){case 0:return[4,this.queue((function(){return D(n,void 0,void 0,(function(){var n,i;return A(this,(function(r){switch(r.label){case 0:return n=this.getFullPath(t),i=this.getFullPath(e),[4,this.fsPromises.copyFile(n,i,this.fs.constants.COPYFILE_EXCL)];case 1:return r.sent(),[4,this.reconcileInternalFile(e)];case 2:return r.sent(),[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},t.prototype.exists=function(t,e){return D(this,void 0,Promise,(function(){var n=this;return A(this,(function(i){return[2,this.queue((function(){var i=n.getFullPath(t);return n._exists(i,e)}))]}))}))},t.prototype._exists=function(t,e){return D(this,void 0,Promise,(function(){var n,i;return A(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.fsPromises.access(t)];case 1:return r.sent(),[3,3];case 2:return r.sent(),[2,!1];case 3:return e&&this.insensitive?(n=this.path.dirname(t),i=this.path.basename(t),[4,this.fsPromises.readdir(n)]):[3,5];case 4:if(-1===r.sent().indexOf(i))return[2,!1];r.label=5;case 5:return[2,!0]}}))}))},t.prototype.stat=function(t){return D(this,void 0,Promise,(function(){var e=this;return A(this,(function(n){return[2,this.queue((function(){return D(e,void 0,void 0,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:e=this.getFullPath(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fsPromises.stat(e)];case 2:return(n=r.sent()).isFile()?[2,L({type:"file"},kF(n))]:n.isDirectory()?[2,{type:"folder",ctime:0,mtime:0,size:0}]:[3,4];case 3:if("ENOENT"!==(i=r.sent()).code)throw i;return[3,4];case 4:return[2,null]}}))}))}))]}))}))},t.prototype.list=function(t){return D(this,void 0,Promise,(function(){var e=this;return A(this,(function(n){return[2,this.queue((function(){return D(e,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c;return A(this,(function(u){switch(u.label){case 0:return e=this.getFullPath(t),[4,this.fsPromises.readdir(e)];case 1:n=u.sent(),i={folders:[],files:[]},r=0,o=n,u.label=2;case 2:return r<o.length?(s=o[r],a=ie(""===t?s:t+"/"+s),l=ne(a),[4,this.fsPromises.stat(this.getFullRealPath(a))]):[3,5];case 3:(c=u.sent()).isFile()&&i.files.push(l),c.isDirectory()&&i.folders.push(l),u.label=4;case 4:return r++,[3,2];case 5:return[2,i]}}))}))}))]}))}))},t.prototype.watch=function(t){return D(this,void 0,Promise,(function(){var e=this;return A(this,(function(n){switch(n.label){case 0:return this.stopWatch(),this.handler=t,[4,this.startWatchPath("/")];case 1:return n.sent(),[2,this.queue((function(){return e.listAll()}))]}}))}))},t.prototype.stopWatch=function(){for(var t in this.watchers)this.watchers.hasOwnProperty(t)&&this.stopWatchPath(t);this.handler=null},t.prototype.startWatchPath=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s=this;return A(this,(function(a){switch(a.label){case 0:if(e=this.getRealPath(t),this.watchers[t])return[2];n=this.getFullPath(t),i=n,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.fsPromises.realpath(n)];case 2:return i=a.sent(),[3,4];case 3:return"ENOENT"!==(r=a.sent()).code&&console.error(r),[3,4];case 4:return(o=this.fs.watch(n,{persistent:!1,encoding:"utf8",recursive:MF})).on("change",(function(t,n){var i="/"===e?n:e+"/"+n;s.onFileChange(i)})),o.on("error",(function(){s.onFileChange(e)})),this.watchers[t]={watcher:o,resolvedPath:i},[2]}}))}))},t.prototype.stopWatchPath=function(t){var e=this.watchers[t];e&&(e.watcher.close(),delete this.watchers[t])},t.prototype.onFileChange=function(t){var e=this;t&&(t=ie(t),setTimeout((function(){var n=ne(t);e.queue((function(){return e.reconcileFile(t,n,!1)}))}),0))},t.prototype.reconcileInternalFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){return[2,this.reconcileFile(this.getRealPath(t),t)]}))}))},t.prototype.reconcileFile=function(t,e,n){return void 0===n&&(n=!0),D(this,void 0,Promise,(function(){var i,r,o,s,a;return A(this,(function(l){switch(l.label){case 0:return this.trigger("raw",e),Yt(e)?[4,this.reconcileDeletion(t,e,n)]:[3,2];case 1:return[2,l.sent()];case 2:return(i=$t(e))&&"/"!==i?this.files[e]?[3,4]:[4,this.reconcileFile($t(t),i,n)]:[3,4];case 3:l.sent(),l.label=4;case 4:return l.trys.push([4,9,,13]),r=this.getFullRealPath(t),this.insensitive?(o=this.path.dirname(r),s=this.path.basename(e),[4,this.fsPromises.readdir(o)]):[3,7];case 5:return-1!==l.sent().map((function(t){return mF(t).normalize("NFC")})).indexOf(s)?[3,7]:[4,this.reconcileDeletion(t,e,n)];case 6:return[2,l.sent()];case 7:return[4,this.reconcileFileInternal(t,e)];case 8:return l.sent(),[3,13];case 9:return"ENOENT"!==(a=l.sent()).code?[3,11]:[4,this.reconcileDeletion(t,e,n)];case 10:return l.sent(),[3,12];case 11:console.error(a),l.label=12;case 12:return[3,13];case 13:return[2]}}))}))},t.prototype.reconcileFileInternal=function(t,e){return D(this,void 0,void 0,(function(){var n,i;return A(this,(function(r){switch(r.label){case 0:return n=this.getFullRealPath(t),[4,this.fsPromises.lstat(n)];case 1:return(i=r.sent()).isFile()?[4,this.reconcileFileCreation(t,e,i)]:[3,3];case 2:return r.sent(),[3,7];case 3:return i.isDirectory()?[4,this.reconcileFolderCreation(t,e)]:[3,5];case 4:return r.sent(),[3,7];case 5:return i.isSymbolicLink()?[4,this.reconcileSymbolicLinkCreation(t,e)]:[3,7];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))},t.prototype.reconcileFileCreation=function(t,e,n){return D(this,void 0,Promise,(function(){var i,r;return A(this,(function(o){if(i=kF(n),r=this.files[e]){if(r.realpath=t,"file"===r.type)return r.mtime===Math.round(n.mtimeMs)&&r.size===n.size||(r.mtime=Math.round(n.mtimeMs),r.size=n.size,this.trigger("raw",e,e,i),this.trigger("modified",e,e,i)),[2];this.removeFile(e)}return this.files[e]=function(t,e){return e.isFile()?{type:"file",realpath:t,ctime:Math.round(e.birthtimeMs),mtime:Math.round(e.mtimeMs),size:e.size}:e.isDirectory()?{type:"folder",realpath:t}:void 0}(t,n),this.trigger("file-created",e,e,i),[2]}))}))},t.prototype.reconcileFolderCreation=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return this.files.hasOwnProperty(e)?[3,4]:(this.files[e]={type:"folder",realpath:t},this.trigger("folder-created",e),MF?[3,2]:[4,this.startWatchPath(e)]);case 1:n.sent(),n.label=2;case 2:return[4,this.listRecursive(t)];case 3:return n.sent(),[3,5];case 4:this.files[e].realpath=t,n.label=5;case 5:return[2]}}))}))},t.prototype.reconcileSymbolicLinkCreation=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:n=this.getFullRealPath(t),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.fsPromises.realpath(n)];case 2:return i=c.sent(),[3,4];case 3:return c.sent(),[2];case 4:if(r=this.path.sep,(o=this.watchers).hasOwnProperty(e))o[e].resolvedPath=i;else for(s in o)if(o.hasOwnProperty(s)&&s!==e&&(a=o[s].resolvedPath,i===a||a.startsWith(i+r)||i.startsWith(a+r)))return[2];return[4,this.fsPromises.stat(n)];case 5:return(l=c.sent()).isFile()?[4,this.reconcileFileCreation(t,e,l)]:[3,7];case 6:return c.sent(),[3,11];case 7:return l.isDirectory()?MF?[4,this.startWatchPath(e)]:[3,9]:[3,11];case 8:c.sent(),c.label=9;case 9:return[4,this.reconcileFolderCreation(t,e)];case 10:c.sent(),c.label=11;case 11:return[2]}}))}))},t.prototype.reconcileDeletion=function(t,e,n){return void 0===n&&(n=!0),D(this,void 0,Promise,(function(){var i,r,o=this;return A(this,(function(s){if("/"===e)return this.trigger("closed",e),[2];if(!(i=this.files[e]))return[2];if(!n)return setTimeout((function(){o.queue((function(){return o.reconcileFile(t,e)}))}),100),[2];if("folder"===i.type)for(r in this.stopWatchPath(e),this.files)this.files.hasOwnProperty(r)&&r.startsWith(e+"/")&&this.removeFile(r);return this.removeFile(e),[2]}))}))},t.prototype.trigger=function(t,e,n,i){this.handler&&this.handler(t,e,n,i)},t.prototype.getRealPath=function(t){for(var e=t;e;){if(this.files.hasOwnProperty(e)){var n=t.substr(e.length);return this.files[e].realpath+n}e=$t(e)}return t},t.prototype.getFullPath=function(t){var e=this.getRealPath(t);return this.getFullRealPath(e)},t.prototype.getFullRealPath=function(t){return this.path.join(this.basePath,t)},t.prototype.kill=function(){this.killLastAction&&(this.killLastAction(new Error("File system operation timed out.")),this.killLastAction=null)},t.prototype.queue=function(t){var e=this,n=function(){var n=new Promise((function(t,n){return e.killLastAction=n}));return e.thingsHappening(),Promise.race([n,t()])},i=this.promise.then(n,n);return this.promise=i,i},t.prototype.removeFile=function(t){var e=this.files[t];delete this.files[t],e&&("file"===e.type?this.trigger("file-removed",t):"folder"===e.type&&this.trigger("folder-removed",t))},t.readLocalFile=function(t){return D(this,void 0,Promise,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:return(e=window.require)?(n=e("fs"),i=W,[4,n.promises.readFile(t)]):[3,2];case 1:return[2,i.apply(void 0,[r.sent()])];case 2:return[2,null]}}))}))},t.mkdir=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return(e=window.require)?[4,e("fs").promises.mkdir(t,{recursive:!0})]:[3,2];case 1:return[2,n.sent()];case 2:return[2,null]}}))}))},t}(),DF=function(){this.viewContainerEl=createDiv("pdf-container");var t=this.viewContainerEl.createDiv("pdf-scroll-container"),e=this.viewContainerEl.createDiv("pdf-controls");this.previousPageEl=e.createDiv("pdf-controls-pager mod-previous",(function(t){return Ty(t,Yg,16)})),this.pageInfoEl=e.createDiv("pdf-controls-page-info"),this.nextPageEl=e.createDiv("pdf-controls-pager mod-next",(function(t){return Ty(t,Jg,16)})),this.canvasEl=t.createEl("canvas","pdf-canvas")},AF=function(t){function e(e,n){var i=t.call(this)||this;i.dom=null,i.pdfDoc=null,i.pageNum=null,i.app=e,i.containerEl=n;var r=i.dom=new DF;return r.previousPageEl.addEventListener("click",(function(){i.navigatePage(-1)})),r.nextPageEl.addEventListener("click",(function(){i.navigatePage(1)})),i}return M(e,t),e.prototype.navigatePage=function(t){var e=this.pdfDoc;if(this.pdfDoc){var n=this.pageNum+t;n<1&&(n=1);var i=e._pdfInfo.numPages;n>i&&(n=i),this.pageNum=n,this.renderPage()}},e.prototype.renderPage=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:return e=(t=this).pdfDoc,n=t.dom,i=t.pageNum,e?(r=e._pdfInfo.numPages,[4,e.getPage(i)]):[2];case 1:return o=c.sent(),5,s=o.getViewport({scale:5}),a=n.canvasEl.getContext("2d"),n.canvasEl.height=s.height,n.canvasEl.width=s.width,n.pageInfoEl.setText(o.pageNumber+" / "+r),l={canvasContext:a,viewport:s},[4,o.render(l).promise];case 2:return c.sent(),[2]}}))}))},e.prototype.loadFile=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o,s,a,l,c,u;return A(this,(function(h){switch(h.label){case 0:return this.destroy(),i=(n=this).app,r=n.dom,n.containerEl.append(r.viewContainerEl),[4,i.vault.readBinary(t)];case 1:o=h.sent(),h.label=2;case 2:return h.trys.push([2,5,,6]),[4,Fh.promise];case 3:return h.sent(),a=this,[4,window.pdfjsLib.getDocument(o).promise];case 4:return s=a.pdfDoc=h.sent(),this.pageNum=1,e&&(l=e.match(/^#page=([0-9]+)/))&&(c=parseInt(l[1]),isNaN(c)||(this.pageNum=Math.clamp(c,1,s._pdfInfo.numPages))),this.renderPage(),[3,6];case 5:return u=h.sent(),console.error(u),[3,6];case 6:return[2]}}))}))},e.prototype.onunload=function(){t.prototype.onunload.call(this),this.destroy()},e.prototype.destroy=function(){this.containerEl.empty();var t=this.pdfDoc;t&&t.destroy(),this.pdfDoc=null,this.pageNum=null},e}(Vg),TF=function(t){function e(e,n){var i=t.call(this)||this;return i.app=e,i.containerEl=n,i}return M(e,t),e.prototype.loadFile=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r;return A(this,(function(o){switch(o.label){case 0:return this.destroy(),[4,this.app.vault.readBinary(t)];case 1:return n=o.sent(),i=this.url=URL.createObjectURL(new Blob([n],{type:"application/pdf"})),(r=this.containerEl.createEl("iframe")).src=i+(e||""),r.style.width="100%",r.style.height="100%",[2]}}))}))},e.prototype.onunload=function(){t.prototype.onunload.call(this),this.destroy()},e.prototype.destroy=function(){this.containerEl.empty(),URL.revokeObjectURL(this.url)},e}(Vg);function PF(t,e){var n,i,r=null===(i=null===(n=window.process)||void 0===n?void 0:n.versions)||void 0===i?void 0:i.electron;return r&&String.isString(r)&&yF("10.0.0",r)?new TF(t,e):new AF(t,e)}var OF=function(t){function e(e){var n=t.call(this,e)||this;return n.icon=em,n.pdfRenderComponent=PF(n.app,n.contentEl),n.addChild(n.pdfRenderComponent),n}return M(e,t),e.prototype.getViewType=function(){return"pdf"},e.prototype.onLoadFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.pdfRenderComponent.loadFile(t,"")];case 1:return e.sent(),[2]}}))}))},e.prototype.setEphemeralState=function(e){t.prototype.setEphemeralState.call(this,e);var n=e.subpath;n&&this.pdfRenderComponent.loadFile(this.file,n)},e.prototype.onUnloadFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(t){return this.pdfRenderComponent.destroy(),[2]}))}))},e.VIEW_TYPE="pdf",e}(_b),FF=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.app=e,o.containerEl=n,o.file=i,o.subpath=r,o.pdfRenderComponent=PF(o.app,n),o.addChild(o.pdfRenderComponent),o}return M(e,t),e.prototype.loadFile=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.pdfRenderComponent.loadFile(this.file,this.subpath)];case 1:return t.sent(),[2]}}))}))},e}(Vg),IF="video",NF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.getViewType=function(){return IF},e.prototype.canAcceptExtension=function(t){return jt.contains(t)},e.prototype.onLoadFile=function(t){return D(this,void 0,void 0,(function(){var n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return i=(n=this).app,(r=n.contentEl).empty(),o=r.createDiv("video-container"),[4,e.displayInEl(t,i,o)];case 1:return s.sent(),[2]}}))}))},e.displayInEl=function(t,e,n){return D(this,void 0,Promise,(function(){var i;return A(this,(function(r){return i=e.vault.getResourcePath(t),[2,Oe(n,i)]}))}))},e.VIEW_TYPE=IF,e}(_b),BF=function(t){function e(){var e=t.call(this)||this;return e.viewByType={},e.typeByExtension={},e.registerViewWithExtensions(_t,rR.VIEW_TYPE,(function(t){return new rR(t)})),e.registerViewWithExtensions(Vt,$b.VIEW_TYPE,(function(t){return new $b(t)})),e.registerViewWithExtensions(qt,Gb.VIEW_TYPE,(function(t){return new Gb(t)})),e.registerViewWithExtensions(jt,NF.VIEW_TYPE,(function(t){return new NF(t)})),e.registerViewWithExtensions(Ut,OF.VIEW_TYPE,(function(t){return new OF(t)})),e}return M(e,t),e.prototype.registerView=function(t,e){if(this.viewByType.hasOwnProperty(t))throw new Error('Attempting to register an existing view type "'+t+'"');this.viewByType[t]=e},e.prototype.unregisterView=function(t){delete this.viewByType[t]},e.prototype.registerExtensions=function(t,e){for(var n=this.typeByExtension,i=0,r=t;i<r.length;i++){var o=r[i];if(n.hasOwnProperty(o))throw new Error('Attempting to register an existing file extension "'+o+'"')}for(var s=0,a=t;s<a.length;s++){o=a[s];this.typeByExtension[o]=e}this.trigger("extensions-updated")},e.prototype.unregisterExtensions=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];delete this.typeByExtension[i]}this.trigger("extensions-updated")},e.prototype.registerViewWithExtensions=function(t,e,n){this.registerView(e,n),this.registerExtensions(t,e)},e.prototype.getViewCreatorByType=function(t){return this.viewByType[t]},e.prototype.getTypeByExtension=function(t){return this.typeByExtension[t]},e.prototype.isExtensionRegistered=function(t){return this.typeByExtension.hasOwnProperty(t)},e.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.prototype.trigger.apply(this,P([e],n))},e.prototype.on=function(e,n,i){return t.prototype.on.call(this,e,n,i)},e}(sb);const RF=(t=>t.CapacitorPlatforms=(t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e};return n.addPlatform=(t,e)=>{n.platforms.set(t,e)},n.setPlatform=t=>{n.platforms.has(t)&&(n.currentPlatform=n.platforms.get(t))},n})(t))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});RF.addPlatform,RF.setPlatform;var zF;!function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"}(zF||(zF={}));class HF extends Error{constructor(t,e){super(t),this.message=t,this.code=e}}const VF=t=>{var e,n;return(null==t?void 0:t.androidBridge)?"android":(null===(n=null===(e=null==t?void 0:t.webkit)||void 0===e?void 0:e.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"},qF=t=>{var e,n,i,r,o;const s=t.Capacitor||{},a=s.Plugins=s.Plugins||{},l=t.CapacitorPlatforms,c=(null===(e=null==l?void 0:l.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>VF(t)),u=(null===(n=null==l?void 0:l.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==VF(t)),h=(null===(i=null==l?void 0:l.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(t=>{const e=d.get(t);return!!(null==e?void 0:e.platforms.has(c()))||!!p(t)}),p=(null===(r=null==l?void 0:l.currentPlatform)||void 0===r?void 0:r.getPluginHeader)||(t=>{var e;return null===(e=s.PluginHeaders)||void 0===e?void 0:e.find((e=>e.name===t))}),d=new Map,f=(null===(o=null==l?void 0:l.currentPlatform)||void 0===o?void 0:o.registerPlugin)||((t,e={})=>{const n=d.get(t);if(n)return console.warn(`Capacitor plugin "${t}" already registered. Cannot register plugins twice.`),n.proxy;const i=c(),r=p(t);let o;const l=n=>{let a;const l=(...l)=>{const c=(async()=>(!o&&i in e&&(o=o="function"==typeof e[i]?await e[i]():e[i]),o))().then((e=>{const o=((e,n)=>{var o,a;if(!r){if(e)return null===(a=e[n])||void 0===a?void 0:a.bind(e);throw new HF(`"${t}" plugin is not implemented on ${i}`,zF.Unimplemented)}{const i=null==r?void 0:r.methods.find((t=>n===t.name));if(i)return"promise"===i.rtype?e=>s.nativePromise(t,n.toString(),e):(e,i)=>s.nativeCallback(t,n.toString(),e,i);if(e)return null===(o=e[n])||void 0===o?void 0:o.bind(e)}})(e,n);if(o){const t=o(...l);return a=null==t?void 0:t.remove,t}throw new HF(`"${t}.${n}()" is not implemented on ${i}`,zF.Unimplemented)}));return"addListener"===n&&(c.remove=async()=>a()),c};return l.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(l,"name",{value:n,writable:!1,configurable:!1}),l},u=l("addListener"),h=l("removeListener"),f=(t,e)=>{const n=u({eventName:t},e),i=async()=>{const i=await n;h({eventName:t,callbackId:i},e)},r=new Promise((t=>n.then((()=>t({remove:i})))));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()},r},g=new Proxy({},{get(t,e){switch(e){case"$$typeof":return;case"addListener":return r?f:u;case"removeListener":return h;default:return l(e)}}});return a[t]=g,d.set(t,{name:t,proxy:g,platforms:new Set([...Object.keys(e),...r?[i]:[]])}),g});return s.convertFileSrc||(s.convertFileSrc=t=>t),s.getPlatform=c,s.handleError=e=>t.console.error(e),s.isNativePlatform=u,s.isPluginAvailable=h,s.pluginMethodNoop=(t,e,n)=>Promise.reject(`${n} does not have an implementation of "${e}".`),s.registerPlugin=f,s.Exception=HF,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},jF=(t=>t.Capacitor=qF(t))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{}),UF=jF.registerPlugin;jF.Plugins;var _F,WF;!function(t){t.Documents="DOCUMENTS",t.Data="DATA",t.Cache="CACHE",t.External="EXTERNAL",t.ExternalStorage="EXTERNAL_STORAGE"}(_F||(_F={})),function(t){t.UTF8="utf8",t.ASCII="ascii",t.UTF16="utf16"}(WF||(WF={}));var GF=window.Capacitor&&"web"!==jF.getPlatform(),KF=!!GF&&"ios"===jF.getPlatform(),$F=!!GF&&"android"===jF.getPlatform(),YF=GF?UF("App"):null,JF=GF?UF("Clipboard"):null,QF=GF?UF("Filesystem"):null,XF=GF?UF("SplashScreen"):null,ZF=GF?UF("StatusBar"):null,tI=GF?UF("Device"):null,eI=GF?UF("KeepAwake"):null,nI=function(t){function e(e){var n=t.call(this,e)||this;n.canDropAnywhere=!0;var i=n.emptyStateEl=n.contentEl.createDiv("empty-state"),r=n.clickableArea=i.createDiv("empty-state-container");return n.emptyTitleEl=r.createDiv({cls:"empty-state-title",text:Ee("interface.empty-state.no-file-open")},(function(t){t.createSpan("empty-state-close-button",(function(t){Ty(t,Am,20),t.addEventListener("click",(function(){n.leaf.detach()}))}))})),n.actionListEl=r.createDiv("empty-state-action-list"),n.app.dragManager.handleDrop(i,(function(t,e,r){var o=n.leaf.handleDrop(t,e,r);if(o)return o.hoverEl=i,o.hoverClass="is-highlighted",o})),n}return M(e,t),e.prototype.getDisplayText=function(){return""},e.prototype.getViewType=function(){return"empty"},e.prototype.onOpen=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s,a,l,c=this;return A(this,(function(u){return e=(t=this).app,(n=t.actionListEl).empty(),i="file-explorer:new-file",r="",By.isMobile||(o=e.hotkeyManager.printHotkeyForCommand(i))&&(r=" ("+o+")"),n.createDiv({cls:"empty-state-action",text:Ee("interface.empty-state.create-new-file")+r},(function(t){t.addEventListener("click",(function(t){e.commands.executeCommandById(i,t)}))})),e.vault.isEmpty()||(s="switcher:open",a="",By.isMobile||(l=e.hotkeyManager.printHotkeyForCommand(s))&&(a=" ("+l+")"),n.createDiv({cls:"empty-state-action",text:Ee("interface.empty-state.go-to-file")+a},(function(t){t.addEventListener("click",(function(t){e.commands.executeCommandById(s,t)}))})),n.createDiv({cls:"empty-state-action",text:Ee("interface.empty-state.see-recent-files")+a},(function(t){t.addEventListener("click",(function(t){e.commands.executeCommandById(s,t)}))}))),n.createDiv({cls:"empty-state-action mod-close",text:Ee("interface.empty-state.close")},(function(t){t.addEventListener("click",(function(){c.leaf.detach()}))})),[2]}))}))},e}(Vb),iI=function(t){function e(e,n){var i=t.call(this,e)||this;i.canDropAnywhere=!0,i.viewType=n;var r=i.emptyTitleEl;r.setText(Ee("interface.empty-state.unknown-pane-title")),r.createSpan("empty-state-close-button",(function(t){Ty(t,Am,20),t.addEventListener("click",(function(){i.leaf.detach()}))}));var o=createDiv({text:Ee("interface.empty-state.unknown-pane-desc",{type:n})});return $e(o,"This pane doesn't look like anything to me."),o.insertAfter(r),i}return M(e,t),e.prototype.getDisplayText=function(){return""},e.prototype.getViewType=function(){return this.viewType},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(e){return this.state=t,[2]}))}))},e}(nI),rI=function(t){function e(e,n){var i=t.call(this)||this;i.parentSplit=null,i.containerEl=null,i.tabHeaderEl=null,i.tabHeaderInnerIconEl=null,i.dimension=null,i.component=new Vg,i.app=e.app,i.workspace=e,i.id=n||Tt(16);var r=i.containerEl=createDiv(),o=i.resizeHandleEl=r.createEl("hr","workspace-leaf-resize-handle");return i.tabHeaderEl=createDiv("workspace-tab-header"),i.tabHeaderEl.createDiv("workspace-tab-header-inner",(function(t){i.tabHeaderInnerIconEl=t.createDiv("workspace-tab-header-inner-icon")})),i.component.load(),o.addEventListener("mousedown",i.onResizeStart.bind(i)),i.updateHeader(),i}return M(e,t),e.prototype.serialize=function(){var t={id:this.id,type:this.type};return this.dimension&&(t.dimension=this.dimension),t},e.prototype.onResizeStart=function(t){if(0===t.button){var e=this.parentSplit;e instanceof sI&&e.onChildResizeStart(this,t)}},e.prototype.setParent=function(t){this.parentSplit=t},e.prototype.getRoot=function(){for(var t=this;t.parentSplit;)t=t.parentSplit;return t},e.prototype.setDimension=function(t){null!==t&&(t<=0||t>=100)&&(t=null),this.dimension=t;var e=this.containerEl,n="";t&&(n=String(t)),e.style.flexGrow=n},e.prototype.detach=function(){this.parentSplit&&this.parentSplit.removeChild(this)},e.prototype.getIcon=function(){return Gg},e.prototype.updateHeader=function(){Ty(this.tabHeaderInnerIconEl,this.getIcon(),17)},e}(sb),oI=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allowSingleChild=!1,e.autoManageDOM=!0,e.children=[],e}return M(e,t),e.prototype.serialize=function(){var e=t.prototype.serialize.call(this);return e.children=this.children.map((function(t){return t.serialize()})),e},e.prototype.replaceChild=function(t,e,n){var i=this,r=i.workspace,o=i.autoManageDOM,s=i.containerEl,a=i.children;t<0&&(t=0),t>=a.length&&(t=a.length);var l=a[t],c=l.containerEl.nextSibling;if(o&&l.containerEl.detach(),l.setParent(null),a[t]=e,o){var u=e.containerEl;s.insertBefore(u,c)}e.setParent(this),n||(this.recomputeChildrenDimensions(),r.onLayoutChange())},e.prototype.insertChild=function(t,e,n){var i=this,r=i.workspace,o=i.autoManageDOM,s=i.containerEl,a=i.children;(t<0||t>=a.length)&&(t=a.length);var l=a[t],c=l?l.containerEl:null;if(a.splice(t,0,e),o){var u=e.containerEl;s.insertBefore(u,c)}e.setParent(this),n||(this.recomputeChildrenDimensions(),r.onLayoutChange())},e.prototype.removeChild=function(t,e){var n=this,i=n.workspace,r=n.autoManageDOM,o=n.parentSplit,s=n.children;if(s.remove(t),r&&t.containerEl.detach(),t.setParent(null),o)if(1!==s.length||this.allowSingleChild){if(0===s.length)return void o.removeChild(this,e)}else{var a=s[0];s.remove(a),r&&a.containerEl.detach(),a.setParent(null);var l=o.children.indexOf(this);r&&o.replaceChild(l,a,!0),a.setDimension(this.dimension)}e||(this.recomputeChildrenDimensions(),i.onLayoutChange())},e.prototype.recomputeChildrenDimensions=function(){},e}(rI),sI=function(t){function e(e,n,i){var r=t.call(this,e,i)||this;return r.type="split",r.direction=null,r.resizeStartPos=null,r.originalSizes=null,r.isResizing=!1,r.workspace=e,r.containerEl.addClass("workspace-split"),r.setDirection(n),r}return M(e,t),e.prototype.serialize=function(){var e=t.prototype.serialize.call(this);return e.direction=this.direction,e},e.prototype.setDirection=function(t){this.containerEl.removeClass("mod-"+this.direction),this.direction=t,this.containerEl.addClass("mod-"+t)},e.prototype.recomputeChildrenDimensions=function(){for(var t=this.children,e=0,n=0,i=t;n<i.length;n++){if(null==(s=i[n]).dimension){e=null;break}e+=s.dimension}for(var r=0,o=t;r<o.length;r++){var s=o[r];null==e||isNaN(e)?s.setDimension(null):s.setDimension(100*s.dimension/e)}this.workspace.requestResize()},e.prototype.onChildResizeStart=function(t,e){var n=this;this.resizeStartPos={x:e.clientX,y:e.clientY};var i=function(e){var i=e.clientX,r=e.clientY,o=0;"vertical"===n.direction?o=i-n.resizeStartPos.x:"horizontal"===n.direction&&(o=r-n.resizeStartPos.y);var s=n.children.indexOf(t);if(n.isResizing||(n.originalSizes=n.children.map((function(t){return n.getElSize(t.containerEl)})),n.isResizing=!0),n.isResizing){var a=n.children.slice(0,s+1),l=n.children.slice(s+1);if(a.reverse(),o>0){var c=n.resizeItemsByDiff(l,o,1);Math.abs(o)>c&&(o=c),n.resizeItemsByDiff(a,o,-1)}else{c=n.resizeItemsByDiff(a,o,-1);Math.abs(o)>c&&(o=-c),n.resizeItemsByDiff(l,o,1)}e.preventDefault()}},r=function(){try{n.finishResize()}catch(t){console.error(t)}document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",r)},e.prototype.resizeItemsByDiff=function(t,e,n){for(var i=0,r=0,o=t;r<o.length;r++){var s=o[r],a=this.children.indexOf(s),l=this.originalSizes[a],c=l-e*n,u=l-(c=Math.max(200,c));e-=u*n,i+=Math.abs(u),this.setElSize(this.children[a].containerEl,c)}return i},e.prototype.finishResize=function(){this.isResizing=!1,this.resizeStartPos=null;for(var t=this.children,e=[],n=0,i=0,r=t;i<r.length;i++){var o=r[i],s=this.getElSize(o.containerEl);e.push(s),n+=s}for(var a=0;a<t.length;a++){o=t[a],s=e[a];this.unsetElSize(o.containerEl);var l=s/n*100;o.setDimension(l)}this.workspace.requestSaveLayout(),this.workspace.requestResize()},e.prototype.getElSize=function(t){return"vertical"===this.direction?t.offsetWidth:"horizontal"===this.direction?t.offsetHeight:void 0},e.prototype.setElSize=function(t,e){return t.style.flex="0 0 auto","vertical"===this.direction?t.style.width=e+"px":"horizontal"===this.direction?t.style.height=e+"px":void 0},e.prototype.unsetElSize=function(t){t.style.flex="",t.style.width="",t.style.height=""},e}(oI),aI=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.type="tabs",i.allowSingleChild=!0,i.tabContainerEl=null,i.tabHeaderEls=[],i.currentTab=0,i.tabHeaderContainerEl=null,i.tabsBeforeEl=null,i.tabsInnerEl=null,i.tabsAfterEl=null,i.workspace=e,i.containerEl.addClass("workspace-tabs"),i.tabContainerEl=i.containerEl.createDiv("workspace-tab-container");var r=i.tabHeaderContainerEl=i.containerEl.createDiv("workspace-tab-header-container");return i.tabsBeforeEl=r.createDiv("workspace-tab-container-before",(function(t){t.createDiv("workspace-tab-header-inner")})),i.tabsInnerEl=r.createDiv("workspace-tab-container-inner"),i.tabsAfterEl=r.createDiv("workspace-tab-container-after",(function(t){t.createDiv("workspace-tab-header-inner")})),i.tabsInnerEl.on("click",".workspace-tab-header",(function(t,e){var n=i.tabHeaderEls.indexOf(e);-1!==n&&i.selectTabIndex(n)})),i}return M(e,t),e.prototype.serialize=function(){var e=t.prototype.serialize.call(this);return this.currentTab>0&&(e.currentTab=this.currentTab),e},e.prototype.selectTabIndex=function(t){this.currentTab=t,this.recomputeChildrenDimensions(),this.workspace.requestSaveLayout(),this.workspace.requestResize()},e.prototype.selectTab=function(t){var e=this.children.indexOf(t);-1!==e&&this.selectTabIndex(e)},e.prototype.recomputeChildrenDimensions=function(){var t=this,e=t.resizeHandleEl,n=t.currentTab,i=t.tabsInnerEl,r=t.tabHeaderContainerEl,o=t.containerEl,s=t.children;if(0!==s.length){n<0&&(n=0),n>=s.length&&(n=s.length-1),n!==this.currentTab&&(this.currentTab=n,this.workspace.requestSaveLayout(),this.workspace.requestResize());for(var a=[],l=null,c=0;c<s.length;c++){var u=s[c],h=u.tabHeaderEl;c===n?(h.addClass("is-active"),l=u):h.removeClass("is-active"),a.push(h)}l?(o.setChildrenInPlace([e,r,l.containerEl]),i.setChildrenInPlace(a)):o.empty(),this.tabHeaderEls=a,this.updateDecorativeCurves()}else o.empty()},e.prototype.updateDecorativeCurves=function(){var t=this.currentTab,e=this.children;this.tabHeaderEls.forEach((function(t){return t.removeClass("is-before-active","is-after-active")})),this.tabsBeforeEl.removeClass("is-before-active"),this.tabsAfterEl.removeClass("is-after-active"),-1!==t&&(t>0?this.tabHeaderEls[t-1].addClass("is-before-active"):this.tabsBeforeEl.addClass("is-before-active"),t<e.length-1?this.tabHeaderEls[t+1].addClass("is-after-active"):this.tabsAfterEl.addClass("is-after-active"))},e}(oI),lI=function(t){function e(e,n,i,r){var o=t.call(this,e,n,r)||this;return o.size=300,o.collapsed=!1,o.emptyStateEl=null,o.side=i,o.containerEl.addClass("mod-"+i+"-split"),o.resizeHandleEl.addEventListener("mousedown",o.onSidedockResizeStart.bind(o)),o.emptyStateEl=o.containerEl.createDiv("workspace-sidedock-empty-state",(function(t){t.createEl("p",{cls:"u-muted",text:Ee("interface.empty-sidebar")})})),o.setSize(o.size),o}return M(e,t),e.prototype.serialize=function(){var e=t.prototype.serialize.call(this);return e.width=this.size,this.collapsed&&(e.collapsed=!0),e},e.prototype.setSize=function(t){this.size=t,this.containerEl.style.width=t+"px"},e.prototype.toggle=function(){this.collapsed?this.expand():this.collapse()},e.prototype.collapse=function(){this.collapsed=!0;var t=this,e=t.workspace,n=t.side,i=t.containerEl,r=t.resizeHandleEl;i.style.width="0",r.style.visibility="hidden","left"===n?e.leftRibbon.setCollapsedState(!0):"right"===n&&e.rightRibbon.setCollapsedState(!0),kb(i,new mb({duration:150}).addProp("width",this.size+"px","0"),(function(){i.hide(),e.requestResize(),i.addClass("is-collapsed")})),e.requestSaveLayout()},e.prototype.expand=function(){this.collapsed=!1;var t=this,e=t.workspace,n=t.side,i=t.containerEl;t.resizeHandleEl.style.visibility="visible",i.removeClass("is-collapsed"),"left"===n?e.leftRibbon.setCollapsedState(!1):"right"===n&&e.rightRibbon.setCollapsedState(!1),i.show(),kb(i,new mb({duration:150}).addProp("width","0",this.size+"px"),(function(){e.requestResize()})),e.requestSaveLayout()},e.prototype.onSidedockResizeStart=function(t){var e=this;if(0===t.button){this.app.disableCssTransition();var n=function(t){var n=t.clientX,i=200,r=e.containerEl.getBoundingClientRect();"left"===e.side?(i=n-r.x,i+=e.resizeHandleEl.offsetWidth/2):"right"===e.side&&(i=r.x+r.width-n,i+=e.resizeHandleEl.offsetWidth/2);var o=e.workspace.containerEl.clientWidth;i=Math.clamp(i,100,Math.max(200,.8*o)),e.setSize(i),t.preventDefault()},i=function(t){0===t.button&&(document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i),e.app.enableCssTransition(),e.workspace.requestSaveLayout(),e.workspace.requestResize())};document.addEventListener("mousemove",n),document.addEventListener("mouseup",i)}},e.prototype.recomputeChildrenDimensions=function(){t.prototype.recomputeChildrenDimensions.call(this),0===this.children.length?(this.collapse(),this.emptyStateEl.show(),"right"===this.side&&this.workspace.rightRibbon.hide()):(this.emptyStateEl.hide(),"right"===this.side&&this.workspace.rightRibbon.show())},e}(sI),cI=function(t){function e(e,n){var i=t.call(this,e.workspace,n)||this;i.type="leaf",i.view=null,i.activeTime=0,i.group=null,i.pinned=!1,i.width=0,i.height=0,i.resizeObserver=null,i.working=!1,i.app=e;var r=i.containerEl;if(r.addClass("workspace-leaf"),r.addEventListener("focusin",(function(t){i.app.workspace.setActiveLeaf(i)})),r.addEventListener("click",(function(t){i.app.workspace.setActiveLeaf(i)})),i.view=new nI(i),i.view.open(i.containerEl),i.tabHeaderEl.addEventListener("mousedown",(function(t){i.workspace.onDragLeaf(t,i)})),i.tabHeaderEl.addEventListener("contextmenu",i.onOpenTabHeaderMenu.bind(i)),window.ResizeObserver){var o=De(i.onResize.bind(i),20,!0);(i.resizeObserver=new ResizeObserver((function(t){for(var e=0,n=t;e<n.length;e++){if(n[e].target===r){var s=r.offsetWidth,a=r.offsetHeight;return void(s===i.width&&a===i.height||(i.width=s,i.height=a,o()))}}}))).observe(r)}return i}return M(e,t),e.prototype.serialize=function(){var e=t.prototype.serialize.call(this);return this.pinned&&(e.pinned=!0),e.state=this.getViewState(),this.group&&(e.group=this.group),e},e.prototype.openFile=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return t?(e=e||{},n=this.view,i=this.app.viewRegistry.getTypeByExtension(t.extension),n&&n instanceof Ub&&n.canAcceptExtension(t.extension)&&(i=n.getViewType()),i?((r=e.state||{}).file=t.path,o={type:i,state:r,active:e.active,group:e.group},[4,this.setViewState(o,e.eState)]):(this.app.openWithDefaultApp(t.path),[2])):[2];case 1:return s.sent(),[2]}}))}))},e.prototype.openLinkText=function(t,e,n){return D(this,void 0,void 0,(function(){var i,r,o,s,a,l,c,u,h;return A(this,(function(p){switch(p.label){case 0:i=this.app,p.label=1;case 1:return p.trys.push([1,6,,7]),n=n||{},r=tA(t),o=r.path,s=r.subpath,a=i.metadataCache.getFirstLinkpathDest(o,e),l=n.state||{},c=n.eState||{},a?(s&&(c.subpath=s),[3,4]):[3,2];case 2:return u=null,o.contains("/")||(u=i.fileManager.getNewFileParent(e)),[4,i.fileManager.createNewMarkdownFile(u,o)];case 3:a=p.sent(),l.mode="source",p.label=4;case 4:return c.focus=!0,n.state=l,n.eState=c,this.workspace.setActiveLeaf(this,!1),[4,this.openFile(a,n)];case 5:return p.sent(),[3,7];case 6:return h=p.sent(),new jb(h.message),console.error(h),[2];case 7:return[2]}}))}))},e.prototype.open=function(t){return D(this,void 0,Promise,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return e=this.view,t===e?[2,t]:e?[4,e.close()]:[3,2];case 1:i.sent(),i.label=2;case 2:t||(t=new nI(this)),this.view=t,i.label=3;case 3:return i.trys.push([3,5,,6]),[4,t.open(this.containerEl)];case 4:return i.sent(),[3,6];case 5:return n=i.sent(),console.error("Failed to open view",n),[3,6];case 6:return[2,t]}}))}))},e.prototype.highlight=function(){this.containerEl.addClass("is-highlighted")},e.prototype.unhighlight=function(){this.containerEl.removeClass("is-highlighted")},e.prototype.getViewState=function(){var t=this.view,e=this.pinned,n={type:t.getViewType(),state:t.getState()};return e&&(n.pinned=!0),n},e.prototype.setViewState=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:if(this.working)return[2];this.working=!0,a.label=1;case 1:return a.trys.push([1,,9,10]),n=this.view,i=n?n.getViewType():"",r={history:!1,layout:!1,close:!1},t.type===i?[3,3]:(o=this.app.viewRegistry.getViewCreatorByType(t.type),n=o?o(this):"string"!=typeof t.type||"empty"===t.type?new nI(this):new iI(this,t.type),[4,this.open(n)]);case 2:a.sent(),r.history=!0,r.layout=!0,a.label=3;case 3:return a.trys.push([3,5,,6]),[4,n.setState(t.state||{},r)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),console.error(s),[3,6];case 6:return r.close?[4,this.open(new nI(this))]:[3,8];case 7:return a.sent(),[2];case 8:return t.active&&this.workspace.setActiveLeaf(this,!t.popstate,!0),void 0!==t.group&&this.setGroupMember(t.group),e&&this.setEphemeralState(e),t.popstate&&(r.history=!1),this.updateStateResult(r),this.updateHeader(),r.done&&r.done(),[3,10];case 9:return this.working=!1,[7];case 10:return[2]}}))}))},e.prototype.getEphemeralState=function(){return this.view.getEphemeralState()},e.prototype.setEphemeralState=function(t){this.view.setEphemeralState(t)},e.prototype.updateStateResult=function(t){t.history?this.workspace.recordHistory(this,!0):this.workspace.requestSaveHistory(),t.layout&&this.workspace.onLayoutChange()},e.prototype.togglePinned=function(){this.setPinned(!this.pinned)},e.prototype.setPinned=function(t){this.pinned=t,this.trigger("pinned-change",t),this.workspace.requestSaveLayout();var e=this.group;if(e)for(var n=0,i=this.workspace.getGroupLeaves(e);n<i.length;n++){var r=i[n];r.pinned!==t&&r.togglePinned()}},e.prototype.setGroupMember=function(t){if(t!==this){var e=null;t&&((e=t.group)||(e=Tt(16),t.setGroup(e))),this.setGroup(e)}},e.prototype.setGroup=function(t){if(t!==this.group){var e=this.pinned;if(!e)for(var n=0,i=this.workspace.getGroupLeaves(t);n<i.length;n++){if(i[n].pinned){e=!0;break}}this.setPinned(e),this.group=t,this.trigger("group-change",t),this.workspace.requestUpdateGroups(),this.workspace.requestSaveLayout()}},e.prototype.detach=function(){t.prototype.detach.call(this);var e=this.view,n=this.resizeObserver;e&&(this.workspace.pushUndoHistory(this),e.close(),this.view=null),n&&n.disconnect()},e.prototype.updateHeader=function(){t.prototype.updateHeader.call(this),$e(this.tabHeaderEl,this.getDisplayText()),this.parentSplit instanceof uI&&this.parentSplit.recomputeChildrenDimensions()},e.prototype.getIcon=function(){var e,n=null===(e=this.view)||void 0===e?void 0:e.getIcon();return n||t.prototype.getIcon.call(this)},e.prototype.getDisplayText=function(){var t,e=null===(t=this.view)||void 0===t?void 0:t.getDisplayText();return e||""},e.prototype.onOpenTabHeaderMenu=function(t){t.preventDefault();var e=this.view;if(e){var n=new zb(this.app);e.onHeaderMenu(n),n.showAtMouseEvent(t)}},e.prototype.handleDrop=function(t,e,n){if("file"===e.type||"link"===e.type)return n||(this.workspace.setActiveLeaf(this),"file"===e.type?this.openFile(e.file):this.openLinkText(e.linktext,e.sourcePath)),{action:Ee("interface.drag-and-drop.open-in-this-pane"),dropEffect:"move"}},e.prototype.onResize=function(){this.view.onResize()},e.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.prototype.trigger.apply(this,P([e],n))},e.prototype.on=function(e,n,i){return t.prototype.on.call(this,e,n,i)},e}(rI),uI=function(t){function e(n,i,r){var o=t.call(this,n,r)||this;o.type="mobile-drawer",o.workspace=null,o.allowSingleChild=!0,o.autoManageDOM=!1,o.currentTab=0,o.collapsed=!1,o.isFullscreen=!1,o.isPinned=!1,o.containerEl=null,o.backdropEl=null,o.innerEl=null,o.headerEl=null,o.tabContainerEl=null,o.tabOptionsEl=null,o.activeTabEl=null,o.activeTabHeaderEl=null,o.activeTabIconEl=null,o.activeTabTitleEl=null,o.activeTabFullscreenEl=null,o.activeTabContentEl=null,o.pinIconEl=null,o.side=i,o.workspace=n,o.collapsed=!0;var s=o.containerEl=n.containerEl.createDiv("workspace-drawer");s.hide();var a=o.innerEl=s.createDiv("workspace-drawer-inner");o.backdropEl=createDiv("workspace-drawer-backdrop",(function(t){t.addEventListener("click",o.collapse.bind(o))})),o.headerEl=a.createDiv("workspace-drawer-header");var l=o.tabContainerEl=a.createDiv("workspace-drawer-tab-container");o.tabOptionsEl=l.createDiv("workspace-drawer-tab-options");var c=o.activeTabEl=createDiv("workspace-drawer-active-tab-container"),u=o.activeTabHeaderEl=c.createDiv("workspace-drawer-active-tab-header");u.addEventListener("click",(function(t){t.defaultPrevented||(o.isFullscreen?o.toggleTabFullscreen():o.selectTabIndex(-1))})),u.createDiv("workspace-drawer-active-tab-back-icon",(function(t){Ty(t,fm,22)})),o.activeTabIconEl=u.createDiv("workspace-drawer-active-tab-icon"),o.activeTabTitleEl=u.createDiv("workspace-drawer-active-tab-title"),o.activeTabFullscreenEl=u.createDiv("workspace-drawer-active-tab-icon",(function(t){Ty(t,Iv,22),t.addEventListener("click",(function(t){o.toggleTabFullscreen(),t.preventDefault()}))})),o.activeTabContentEl=c.createDiv("workspace-drawer-active-tab-content"),o.component.registerEvent(n.on("file-open",o.onFileOpen,o));var h="left"===i?1:-1;return o.component.registerEvent(n.on("swipe",(function(t){if(!o.isPinned&&!(t.points>1||"x"!==t.direction)){var n=o,r=n.containerEl,s=n.backdropEl;bb(r),bb(s);var a=o.workspace.leftSplit,l=o.workspace.rightSplit,c=a.collapsed||a instanceof e&&a.isPinned,u=l.collapsed||l instanceof e&&l.isPinned,p=c&&u&&("left"===i&&t.x>t.startX||"right"===i&&t.x<t.startX);if(o.collapsed){if(p){o.collapsed=!1,ih(),r.show(),o.workspace.containerEl.appendChild(s);var d=r.offsetWidth;t.registerCallback({move:function(e){var n=Math.clamp((e-t.startX)*h/d,0,1);n=Math.clamp(n,0,1),r.style.transform="translateX("+-(1-n)*d*h+"px)",s.style.opacity=String(n)},cancel:function(){r.style.transform="",r.hide(),s.detach(),o.collapsed=!0},finish:function(e,n,i){var a,l=Math.clamp((e-t.startX)*h/d,0,1);i*h>d/2?(kb(r,new mb({duration:200*(a=1-l)}).addProp("transform",null,"translateX(0)","")),kb(s,new mb({duration:150*a,fn:"linear"}).addProp("opacity",null,"1","")),o.onExpand()):(o.collapsed=!0,o.onCollapse(),kb(r,new mb({duration:200*(a=l)}).addProp("transform",null,"translateX("+-d*h+"px)",""),(function(){r.hide()})),kb(s,new mb({duration:150*a,fn:"linear"}).addProp("opacity",null,"0"),(function(){s.detach()})))}})}}else{var f=r.offsetWidth;t.registerCallback({move:function(e){var n=Math.clamp(-(e-t.startX)*h/f,0,1);r.style.transform="translateX("+-n*f*h+"px)",s.style.opacity=String(1-n)},cancel:function(){r.style.transform="",s.style.opacity=""},finish:function(e,n,i){var a,l=Math.clamp(-(e-t.startX)*h/f,0,1);-i*h<f/2?(kb(r,new mb({duration:200*(a=l)}).addProp("transform",null,"translateX(0)","")),kb(s,new mb({duration:150*a,fn:"linear"}).addProp("opacity",null,"1",""))):(o.collapsed=!0,o.onCollapse(),kb(r,new mb({duration:200*(a=1-l)}).addProp("transform",null,"translateX("+-f*h+"px)",""),(function(){r.hide()})),kb(s,new mb({duration:150*a,fn:"linear"}).addProp("opacity",null,"0"),(function(){s.detach()})))}})}}}))),o}return M(e,t),e.prototype.serialize=function(){var e=t.prototype.serialize.call(this);return-1!==this.currentTab&&(e.currentTab=this.currentTab),this.isPinned&&(e.pinned=!0),e},e.prototype.onFileOpen=function(t){this.isFullscreen&&this.toggleTabFullscreen(),this.collapsed||this.collapse()},e.prototype.expand=function(){this.collapsed=!1,this.onExpand();var t=this.containerEl,e=this.backdropEl;t.show(),this.workspace.containerEl.appendChild(e),ih();var n=t.offsetWidth*("left"===this.side?-1:1);kb(e,new mb({duration:150,fn:"linear"}).addProp("opacity","0","1")),kb(t,new mb({duration:200}).addProp("transform","translateX("+n+"px)","translateX(0)","")),this.workspace.requestSaveLayout()},e.prototype.onExpand=function(){},e.prototype.collapse=function(){if(!this.isPinned){this.collapsed=!0,this.onCollapse();var t=this.containerEl,e=this.backdropEl,n=t.offsetWidth*("left"===this.side?-1:1);kb(e,new mb({duration:150,fn:"linear"}).addProp("opacity","1","0"),(function(){e.detach()})),kb(t,new mb({duration:200}).addProp("transform","translateX(0)","translateX("+n+"px)",""),(function(){t.hide()})),this.workspace.requestSaveLayout()}},e.prototype.onCollapse=function(){},e.prototype.toggle=function(){this.collapsed?this.expand():this.collapse()},e.prototype.selectTabIndex=function(t){this.currentTab=t,this.recomputeChildrenDimensions(),this.workspace.requestSaveLayout(),this.workspace.requestResize()},e.prototype.recomputeChildrenDimensions=function(){var t=this,e=this,n=e.innerEl,i=e.children,r=e.headerEl,o=e.currentTab,s=e.tabContainerEl,a=e.tabOptionsEl,l=e.activeTabEl,c=e.activeTabIconEl,u=e.activeTabTitleEl,h=e.activeTabContentEl;if(-1!==o){var p=i[o];p?(p instanceof cI?(Ty(c,p.getIcon(),22),u.setText(p.getDisplayText())):(c.empty(),u.empty()),h.setChildrenInPlace([p.containerEl])):o=-1}if(-1===o){a.empty();for(var d=function(e){a.createDiv({cls:"workspace-drawer-tab-option-item"},(function(n){if(e instanceof cI){var r=e;n.createDiv("workspace-drawer-tab-option-item-icon",(function(t){Ty(t,r.getIcon(),22)})),n.createDiv({cls:"workspace-drawer-tab-option-item-title",text:r.getDisplayText()})}n.addEventListener("click",(function(){t.selectTabIndex(i.indexOf(e))}))}))},f=0,g=i;f<g.length;f++){d(g[f])}}if("left"===this.side){var m=this.workspace.leftRibbon.containerEl;m.removeClass("workspace-ribbon"),m.addClass("workspace-drawer-ribbon"),n.setChildrenInPlace([m,r,s])}else"right"===this.side&&n.setChildrenInPlace([r,s]);-1===o?Lb(s,a,"left"):Lb(s,l,"right")},e.prototype.openLeaf=function(t){var e=this.children.indexOf(t);-1!==e&&this.selectTabIndex(e)},e.prototype.addHeaderButton=function(t,e){return this.headerEl.createDiv("workspace-drawer-header-icon",(function(n){Ty(n,t,26),n.addEventListener("click",e)}))},e.prototype.toggleTabFullscreen=function(){this.isFullscreen=!this.isFullscreen,Ty(this.activeTabFullscreenEl,this.isFullscreen?Nv:Iv,22),this.activeTabEl.style.transition="unset",this.activeTabEl.toggleClass("is-fullscreen",this.isFullscreen)},e.prototype.pinDrawer=function(){this.isPinned=!this.isPinned,Ty(this.pinIconEl,this.isPinned?Nm:wm,22),this.containerEl.toggleClass("is-pinned",this.isPinned),this.backdropEl.toggle(!this.isPinned),this.isPinned||this.collapse(),this.isPinned&&this.collapsed&&this.expand(),this.workspace.requestSaveLayout()},e.collapseFor=function(t){var n=t.getRoot();n instanceof e&&n.collapse()},e}(oI),hI=function(t){function e(e,n){var i=t.call(this,e,"left",n)||this;i.fileCountEl=null;var r=i.app.vault;return i.headerEl.createDiv("workspace-drawer-header-left",(function(t){t.createDiv({cls:"workspace-drawer-header-name"},(function(t){t.createSpan({cls:"workspace-drawer-header-name-text",text:r.getName()})})),t.createDiv("workspace-drawer-header-info",(function(t){i.fileCountEl=t.createDiv(),i.updateInfo()}))})),i.pinIconEl=i.addHeaderButton(wm,(function(t){i.pinDrawer()})),i.containerEl.addClass("mod-left"),i.component.registerEvent(r.on("create",i.updateInfo.bind(i))),i.component.registerEvent(r.on("delete",i.updateInfo.bind(i))),i}return M(e,t),e.prototype.updateInfo=function(){var t=this.app.vault,e=Ee("nouns.file-with-count",{count:t.getRoot().getFileCount()}),n=Ee("nouns.folder-with-count",{count:t.getRoot().getFolderCount()}),i=Ee("plugins.file-explorer.tooltip-folders-files-count",{fileCount:e,folderCount:n});this.fileCountEl.setText(i)},e}(uI),pI=function(t){function e(e,n){var i=t.call(this,e,"right",n)||this;i.fileNameEl=null,i.fileInfoElToRenderer=[];var r=i.headerEl,o=e.mobileFileInfos;return r.createDiv("workspace-drawer-header-left",(function(t){t.createDiv({cls:"workspace-drawer-header-name"},(function(t){i.fileNameEl=t.createDiv({cls:"workspace-drawer-header-name-text"})})),t.createDiv("workspace-drawer-header-info",(function(t){for(var e=0,n=o;e<n.length;e++){var r=n[e],s=t.createDiv("workspace-drawer-header-info-item");i.fileInfoElToRenderer.push({el:s,renderer:r.renderCallback})}}))})),i.containerEl.addClass("mod-right"),i.component.registerEvent(i.app.vault.on("rename",i.updateName.bind(i))),i.component.registerEvent(e.on("file-open",i.onFileOpen,i)),i.component.registerEvent(e.on("quick-preview",i.onQuickPreview,i)),i.pinIconEl=i.addHeaderButton(wm,(function(t){i.pinDrawer()})),i.addHeaderButton(bm,(function(t){var e=i.workspace.activeLeaf;e&&e.view instanceof Vb&&e.view.onMoreOptions(t)})),i}return M(e,t),e.prototype.onFileOpen=function(e){t.prototype.onFileOpen.call(this,e),this.updateName(e),this.updateInfo()},e.prototype.onQuickPreview=function(t){this.app.workspace.getActiveFile()===t&&this.updateInfo()},e.prototype.updateName=function(t){t instanceof cb&&this.fileNameEl.setText(re(t.name))},e.prototype.updateInfo=function(){for(var t=0,e=this.fileInfoElToRenderer;t<e.length;t++){var n=e[t];n.renderer(n.el)}},e}(uI),dI=.2,fI=function(t,e,n){return void 0===n&&(n=.9),t*n+e*(1-n)},gI=function(t,e){return(fI(t>>16&255,e>>16&255)<<16)+(fI(t>>8&255,e>>8&255)<<8)+(0|fI(255&t,255&e))},mI=function(t,e){return e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom},vI=function(t,e,n){return{left:t-n,right:t+n,top:e-n,bottom:e+n}},yI=function(t){t.style.margin="0",t.style.padding="0",t.style.border="0",t.style.width="100%",t.style.height="100%",t.style.overflow="hidden"},bI={showAttachments:!1,hideUnresolved:!1,showOrphans:!0,showTags:!1,localFile:null,localJumps:1,localInterlinks:!1,localForelinks:!0,localBacklinks:!0};function wI(t){return void 0===t&&(t=""),{type:t,links:{}}}function kI(t){if(!t)return wI();var e=wI(t.type);return t.color&&(e.color=t.color),e}var CI={tag:!0},xI={fill:"color-fill",fillFocused:"color-fill-focused",fillTag:"color-fill-tag",fillUnresolved:"color-fill-unresolved",fillAttachment:"color-fill-attachment",arrow:"color-arrow",circle:"color-circle",line:"color-line",text:"color-text",fillHighlight:"color-fill-highlight",lineHighlight:"color-line-highlight"},SI=100,EI=function(){function t(t,e,n){this.x=null,this.y=null,this.fx=null,this.fy=null,this.forward={},this.reverse={},this.weight=0,this.color=null,this.rendered=!1,this.fadeAlpha=0,this.moveText=0,this.fontDirty=!1,this.renderer=t,this.id=e,this.type=n}return t.prototype.initGraphics=function(){if(this.rendered)return!1;this.rendered=!0;var t,e=this.renderer;(t=this.circle=new PIXI.Graphics).beginFill(16777215),t.drawCircle(SI,SI,SI),t.endFill(),By.isMobile&&(t.beginFill(16777215,1e-4),t.drawCircle(SI,SI,500),t.endFill()),t.pivot.x=SI,t.pivot.y=SI,t.interactive=!0,t.buttonMode=!0,t.zIndex=1,t.on("pointerdown",e.onPointerDown).on("pointerup",e.onPointerUp).on("pointerupoutside",e.onPointerUp).on("pointermove",e.onPointerMove).on("pointerover",e.onPointerOver).on("pointerout",e.onPointerOut).on("click",e.onClick).on("rightclick",e.onClick);var n=this.getFillColor();t.alpha=n.a,t.tint=n.rgb,e.hanger.addChild(t),e.nodePxLookup.set(t,this);var i=new PIXI.TextStyle(this.getTextStyle()),r=this.text=new PIXI.Text(this.getDisplayText(),i);return r.resolution=2,r.anchor.set(.5,0),r.zIndex=2,e.hanger.addChild(r),this.fadeAlpha=0,!0},t.prototype.clearGraphics=function(){if(this.rendered){this.rendered=!1;var t=this,e=t.renderer,n=t.circle,i=t.highlight,r=t.text;n&&(this.circle=null,e.nodePxLookup.delete(n),n.parent&&n.parent.removeChild(n),n.destroy()),i&&(this.highlight=null,i.parent&&i.parent.removeChild(i),i.destroy()),r&&(this.text=null,r.parent&&r.parent.removeChild(r),r.destroy())}},t.prototype.getTextStyle=function(){var t=this.renderer,e=this.getSize();return new PIXI.TextStyle({fontSize:14+e/4,fill:t.colors.text.rgb,fontFamily:"Inter",wordWrap:!0,wordWrapWidth:300,align:"center"})},t.prototype.render=function(){if(this.rendered){var t=this,e=t.renderer,n=t.x,i=t.y,r=t.circle,o=t.highlight,s=t.text,a=t.fadeAlpha,l=t.moveText,c=this.getSize(),u=this.getFillColor(),h=e.colors.text,p=e.getHighlightNode(),d=p===this,f=e.nodeScale,g=s.visible,m=dI;(!p||d||this.forward.hasOwnProperty(p.id)||this.reverse.hasOwnProperty(p.id))&&(m=1);var v=(a=this.fadeAlpha=fI(a,m))*u.a,y=e.textAlpha;y*=a,d&&(y=1),y*=h.a;var b=d?15:0;l=this.moveText=g?fI(l,b):b;var w=y>.001,k=e.viewport,C=d||!mI(k,vI(n,i,c*f+1));if(w&&(w=d||!mI(k,{left:n-300,right:n+300,top:i,bottom:i+200})),r.tint=gI(r.tint,u.rgb),r.visible=C,C&&(r.x=n,r.y=i,r.scale.x=r.scale.y=c/100*f,r.alpha=v),s.visible=w,w&&(s.x=n,s.y=i+(c+5)*f+l/e.scale,s.scale.x=s.scale.y=f,d&&e.scale<1&&(s.scale.x=s.scale.y=1/e.scale),s.alpha=y),d){o||((o=this.highlight=new PIXI.Graphics).zIndex=1,e.hanger.addChild(o)),o.x=n,o.y=i,o.scale.x=o.scale.y=f,o.clear();var x=Math.max(1,1/e.scale/f),S=e.colors.circle;o.alpha=S.a,o.lineStyle(x,S.rgb,1),o.drawCircle(0,0,c+x/2)}else o&&(o.parent.removeChild(o),o.destroy(),this.highlight=null);this.fontDirty&&(this.fontDirty=!1,s.style=this.getTextStyle())}},t.prototype.getFillColor=function(){var t=this,e=t.renderer,n=t.type,i=t.color;if(e.getHighlightNode()===this)return e.colors.fillHighlight;if("focused"===n){var r=e.colors.fillFocused;if(r.a>0)return r}else{if(i)return i;if("tag"===n)return e.colors.fillTag;if("unresolved"===n)return e.colors.fillUnresolved;if("attachment"===n)return e.colors.fillAttachment}return e.colors.fill},t.prototype.getSize=function(){return this.renderer.fNodeSizeMult*Math.max(8,Math.min(3*Math.sqrt(this.weight+1),30))},t.prototype.getDisplayText=function(){var t=this.id;return te(t,"md")&&(t=Jt(t)),t},t.prototype.getRelated=function(){return Object.keys(this.forward).concat(Object.keys(this.reverse))},t}(),MI=function(){function t(t,e,n){this.rendered=!1,this.renderer=t,this.source=e,this.target=n}return t.prototype.initGraphics=function(){if(!this.rendered&&this.source.rendered&&this.target.rendered){this.rendered=!0;var t=this.renderer,e=this.px=new PIXI.Container;t.hanger.addChild(e);var n=this.line=new PIXI.Sprite(PIXI.Texture.WHITE),i=t.colors.line;n.alpha=dI*i.a,n.tint=i.rgb,e.addChild(n);var r=this.arrow=new PIXI.Graphics,o=t.colors.text;r.alpha=dI*o.a,r.tint=o.rgb,r.beginFill(16777215),r.moveTo(0,0),r.lineTo(-4,-2),r.lineTo(-3,0),r.lineTo(-4,2),r.lineTo(0,0),r.endFill(),r.zIndex=1,t.hanger.addChild(r)}},t.prototype.clearGraphics=function(){if(this.rendered){this.rendered=!1;var t=this,e=t.px,n=t.line,i=t.arrow;e&&(this.px=null,e.parent&&e.parent.removeChild(e),e.destroy(),e.visible=!1),n&&(this.line=null,n.destroy(),n.visible=!1),i&&(this.arrow=null,i.parent&&i.parent.removeChild(i),i.destroy(),i.visible=!1)}},t.prototype.render=function(){if(this.rendered){var t=this,e=t.px,n=t.line,i=t.arrow,r=t.renderer,o=t.source,s=t.target,a=r.getHighlightNode(),l=o===a||s===a,c=dI;a&&!l||(c=1);var u=c*Math.clamp(2*(r.scale-.3),0,1),h=r.colors.line;l&&(h=r.colors.lineHighlight);var p,d,f=r.colors.arrow,g=!(o.reverse.hasOwnProperty(s.id)&&o.id.localeCompare(s.id)<0),m=r.fShowArrow,v=r.fLineSizeMult/r.scale,y=r.viewport,b=vI(o.x,o.y,v),w=vI(s.x,s.y,v),k=!mI(y,(p=b,d=w,{left:Math.min(p.left,d.left),right:Math.max(p.right,d.right),top:Math.min(p.top,d.top),bottom:Math.max(p.bottom,d.bottom)}));if(c*=h.a,u*=f.a,n.alpha=fI(n.alpha,c),i.alpha=fI(i.alpha,u),g=g&&k,m=m&&k&&i.alpha>.001,n.visible=g,i.visible=m,g||m){var C=s.x-o.x,x=s.y-o.y,S=Math.sqrt(C*C+x*x),E=o.getSize()*r.nodeScale,M=s.getSize()*r.nodeScale;i.visible=m=m&&S>v,g&&(e.x=o.x+C*E/S,e.y=o.y+x*E/S,e.pivot.set(0,0),e.rotation=Math.atan2(x,C),n.x=0,n.y=-v/2,n.width=Math.max(0,S-E-M),n.height=v,n.tint=gI(n.tint,h.rgb)),i.visible=m,m&&(M+=1,i.x=s.x-C*M/S,i.y=s.y-x*M/S,i.pivot.set(0,0),i.rotation=Math.atan2(x,C),i.scale.x=i.scale.y=2*Math.sqrt(r.fLineSizeMult)/r.scale,i.tint=f.rgb)}}},t}(),LI=function(){function t(t){this.rendered=!1,this.renderer=t}return t.prototype.initGraphics=function(){var t=this.renderer;if(!this.text){var e=this.text=new PIXI.Text("Powered by Obsidian",this.getTextStyle());e.anchor.set(1,1),e.zIndex=3,e.alpha=.5,t.px.stage.addChild(e)}},t.prototype.clearGraphics=function(){var t=this.text;t&&t.parent&&(this.text=null,t.parent.removeChild(t),t.destroy()),this.rendered=!1},t.prototype.render=function(){var t=this.renderer,e=this.text;e.visible=!t.hidePowerTag,e.alpha=t.colors.text.a;var n=t.px.renderer;e.x=n.width/n.resolution,e.y=n.height/n.resolution,this.rendered||(this.rendered=!0,this.text.style=this.getTextStyle())},t.prototype.getTextStyle=function(){return new PIXI.TextStyle({fontSize:12,fill:this.renderer.colors.text.rgb,fontFamily:"Inter",wordWrap:!1,align:"right"})},t}(),DI=function(){function t(t,e,n,i){var r=this;this.interactiveEl=null,this.onNodeClick=null,this.onNodeRightClick=null,this.onNodeHover=null,this.onNodeUnhover=null,this.workerResults=null,this.nodeLookup={},this.nodes=[],this.links=[],this.dragNode=null,this.highlightNode=null,this.px=null,this.hanger=null,this.nodePxLookup=new Map,this.powerTag=null,this.scale=1,this.nodeScale=1,this.textAlpha=1,this.targetScale=1,this.panX=0,this.panY=0,this.panvX=0,this.panvY=0,this.keyboardActions={},this.panning=!1,this.width=0,this.height=0,this.viewport=null,this.zoomCenterX=0,this.zoomCenterY=0,this.hidePowerTag=!1,this.fNodeSizeMult=1,this.fLineSizeMult=1,this.fTextShowMult=1,this.fShowArrow=!1,this.mouseX=null,this.mouseY=null,this.colors={},this.renderTimer=null,this.hidePowerTag=n,PIXI.utils.skipHello(),this.containerEl=t,this.testCSS();var o=this.interactiveEl=t.createEl("canvas");if(t.style.padding="0",t.style.overflow="hidden",t.style.position="relative",o.style.position="absolute",o.style.left="0",o.style.top="0",yI(o),o.addEventListener("mousedown",(function(t){return t.preventDefault()})),o.addEventListener("wheel",this.onWheel.bind(this)),o.addEventListener("mousemove",this.onMouseMove.bind(this)),o.addEventListener("mouseout",this.onMouseMove.bind(this)),i||(i=new Worker("/sim.js",{name:"Graph Worker"})),this.worker=i,i.onmessage=function(t){r.workerResults=t.data,r.changed()},e){var s=this.iframeEl=t.createEl("iframe");yI(s),s.onload=this.onIframeLoad.bind(this),s.contentDocument&&this.onIframeLoad()}else{var a=t.createEl("canvas");yI(a),setTimeout((function(){a.getContext("2d")?r.initGraphics(a):setTimeout((function(){r.initGraphics(a)}),300)}),50)}}return t.prototype.destroy=function(){this.worker.terminate(),this.destroyGraphics()},t.prototype.onIframeLoad=function(){var t=this.iframeEl;t.contentWindow.onbeforeunload=this.onIframeUnload.bind(this);var e=t.contentDocument.body;yI(e),e.innerHTML="<canvas>";var n=e.firstChild;yI(n),this.destroyGraphics(),this.initGraphics(n)},t.prototype.onIframeUnload=function(){this.destroyGraphics()},t.prototype.onWheel=function(t){if(t.preventDefault(),this.px){var e=t.deltaY;1===t.deltaMode?e*=40:2===t.deltaMode&&(e*=800);var n=this.targetScale;if(n*=Math.pow(1.5,-e/120),this.targetScale=n,n<this.scale)this.zoomCenterX=0,this.zoomCenterY=0;else{var i=window.devicePixelRatio;this.zoomCenterX=t.offsetX*i,this.zoomCenterY=t.offsetY*i}this.changed()}},t.prototype.onMouseMove=function(t){"mouseout"===t.type?this.mouseX=this.mouseY=null:(this.mouseX=t.offsetX,this.mouseY=t.offsetY)},t.prototype.initGraphics=function(t){var e,n=this,i=this,r=i.iframeEl,o=i.interactiveEl,s=i.worker,a=window.WebGL2RenderingContext;try{r&&r.contentWindow.WebGL2RenderingContext&&(window.WebGL2RenderingContext=r.contentWindow.WebGL2RenderingContext),e=this.px=new PIXI.Application({view:t,antialias:!0,transparent:!0,autoStart:!1})}finally{window.WebGL2RenderingContext=a}e.renderer.plugins.interaction.setTargetElement(o),e.renderer.plugins.interaction.useSystemTicker=!1;var l=null,c=this;this.onPointerDown=function(t){t.data.originalEvent.target===o&&(v||(this.dragging=!0,l=t.data.getLocalPosition(e.stage)))},this.onPointerUp=function(t){if(t.data.originalEvent instanceof TouchEvent&&k(t.data.originalEvent),this.dragging){this.dragging=!1;var e=c.getNodeFromGraphics(this);if(e){var n=t.data.originalEvent;l&&c.onNodeClick&&(n instanceof MouseEvent&&(0===n.button||1===n.button)&&!yt(n)||n instanceof TouchEvent)&&c.onNodeClick(n,e.id,e.type),e.fx=null,e.fy=null,s.postMessage({alphaTarget:0,forceNode:{id:e.id,x:null,y:null}})}l=null,c.dragNode=null,c.changed()}},this.onClick=function(t){var e=t.data.originalEvent;if(2===t.data.button||e instanceof MouseEvent&&yt(e)){var n=c.getNodeFromGraphics(this);n&&c.onNodeRightClick&&c.onNodeRightClick(t.data.originalEvent,n.id,n.type)}},this.onPointerMove=function(t){if(this.dragging){var n=c.getNodeFromGraphics(this);if(n){if(l){var i=t.data.getLocalPosition(e.stage),r=i.x-l.x,o=i.y-l.y;r*r+o*o>25&&(l=null)}var a=t.data.getLocalPosition(c.hanger);n.fx=a.x,n.fy=a.y,s.postMessage({alpha:.3,alphaTarget:.3,run:!0,forceNode:{id:n.id,x:a.x,y:a.y}}),c.dragNode=n,c.changed()}}},this.onPointerOver=function(t){var e=c.highlightNode=c.getNodeFromGraphics(this);c.changed();var n=t.data.originalEvent;n instanceof MouseEvent&&(c.mouseX=n.offsetX,c.mouseY=n.offsetY),c.onNodeHover&&c.onNodeHover(n,e.id,e.type)},this.onPointerOut=function(){c.highlightNode=null,c.changed(),c.onNodeUnhover&&c.onNodeUnhover()};var u=this.hanger=new PIXI.Container,h=this.powerTag=new LI(this);this.onResize(),this.resetPan();var p=new PIXI.Graphics;p.beginFill(0),p.drawRect(0,0,1e4,1e4),p.endFill(),p.alpha=0,p.interactive=!0;var d=null,f=null,g=performance.now(),m=0,v=null,y=null,b=0,w=0,k=function(t){for(var e=performance.now(),i=e-g,r=Array.prototype.slice.call(t.touches),o=null,s=null,a=0,u=r;a<u.length;a++){var h=u[a];v&&h.identifier===v.identifier&&(o=h),y&&h.identifier===y.identifier&&(s=h)}if(s&&!o&&(v=y,o=s,y=null,s=null),o?r.remove(o):r.length>0&&(o=r.first(),r.splice(0,1)),s?r.remove(s):r.length>0&&(s=r.first(),r.splice(0,1)),!l&&!c.dragNode&&v&&o&&v.identifier===o.identifier){var p=window.devicePixelRatio;if(y&&s&&y.identifier===s.identifier){var d=n.interactiveEl.getBoundingClientRect(),f=((v.clientX+y.clientX)/2-d.x)*p,k=((v.clientY+y.clientY)/2-d.y)*p,C=((o.clientX+s.clientX)/2-d.x)*p,x=((o.clientY+s.clientY)/2-d.y)*p,S=v.clientX-y.clientX,E=v.clientY-y.clientY,M=o.clientX-s.clientX,L=o.clientY-s.clientY,D=S*S+E*E,A=M*M+L*L;if(0!==D&&0!==A){var T=Math.sqrt(A/D),P=n.targetScale*T,O=n.panX+(C-f),F=n.panY+(x-k);n.zoomCenterX=C,n.zoomCenterY=x,n.setPan(O,F),n.targetScale=P,n.changed()}b=0,w=0}else{var I=(o.clientX-v.clientX)*p,N=(o.clientY-v.clientY)*p;m=fI(m,i,.8),g=e,b=fI(b,I,.8),w=fI(w,N,.8),n.setPan(n.panX+I,n.panY+N),n.changed()}}else m=fI(m,i,.8),i<100&&(n.panvX=b/m,n.panvY=w/m),b=b=0;v=o,y=s},C=function(t){if(t.data.originalEvent instanceof TouchEvent)k(t.data.originalEvent);else{d=null,document.body.removeClass("is-grabbing"),n.panning=!1;var e=performance.now()-g;m=fI(m,e,.8),e>100?n.panvX=n.panvY=0:(n.panvX/=m,n.panvY/=m)}};p.on("pointerdown",(function(t){t.data.originalEvent instanceof TouchEvent?k(t.data.originalEvent):(d=t.data.getLocalPosition(e.stage),f={x:u.x,y:u.y},document.body.addClass("is-grabbing"),n.panning=!0)})).on("pointerup",C).on("pointerupoutside",C).on("pointermove",(function(t){if(t.data.originalEvent instanceof TouchEvent)k(t.data.originalEvent);else if(d){var i=t.data.getLocalPosition(e.stage),r=f.x+i.x-d.x,o=f.y+i.y-d.y,s=performance.now();m=fI(m,s-g,.8),g=s,n.panvX=fI(n.panvX,r-n.panX,.8),n.panvY=fI(n.panvY,o-n.panY,.8),n.setPan(r,o),n.changed()}})),e.stage.addChild(p),e.stage.addChild(u),h.initGraphics(),this.updateZoom(),this.renderCallback=function(){if(n.renderTimer=null,n.px&&!(n.idleFrames>60)){var t=n,i=t.nodes,r=t.links,o=n.workerResults;if(n.workerResults=null,o)for(var s=o.id,a=o.buffer,l=new Float32Array(a),p=0;p<s.length;p++){(U=n.nodeLookup[s[p]])&&(U.x=l[2*p],U.y=l[2*p+1],U.fx&&(U.x=U.fx),U.fy&&(U.y=U.fy))}var d=n,f=d.panning,g=d.panvX,m=d.panvY,v=d.keyboardActions,y=v.shift;if(!f){n.panX+=1e3*g/60,n.panY+=1e3*m/60;var b=0,w=0;v.up&&(w+=1),v.down&&(w-=1),v.left&&(b+=1),v.right&&(b-=1),0===b&&0===w||(n.idleFrames=0);var k=y?3:1;n.panvX=fI(g,b*k,.9),n.panvY=fI(m,w*k,.9)}var C=1+(y?.1:.03),x=!1;if(v.zoomin&&(n.targetScale*=C,x=!0),v.zoomout&&(n.targetScale/=C,x=!0),x){n.idleFrames=0;var S=window.devicePixelRatio;n.zoomCenterX=n.width/2*S,n.zoomCenterY=n.height/2*S}n.updateZoom();var E=n.scale,M=-n.panX/E,L=-n.panY/E,D=M+n.width/E*window.devicePixelRatio,A=L+n.height/E*window.devicePixelRatio;n.viewport={left:M,right:D,top:L,bottom:A};for(var T=(M+D)/2,P=(L+A)/2,O=[],F=function(t,e){return t.dist-e.dist},I=0,N=i;I<N.length;I++){if(!(U=N[I]).rendered){var B=(X=U.x-T)*X+(Z=U.y-P)*Z;(O.length<50||B<O.last().dist)&&(O.push({node:U,dist:X*X+Z*Z}),O.sort(F),O.length>50&&O.pop())}}if(O.length>0){for(var R=0,z=O;R<z.length;R++){z[R].node.initGraphics()}n.idleFrames=0}for(var H=0,V=r;H<V.length;H++){V[H].initGraphics()}for(var q=0,j=i;q<j.length;q++){var U;(U=j[q]).render()}for(var _=0,W=r;_<W.length;_++){W[_].render()}h.render(),u.sortChildren(),e.render(),n.idleFrames++,n.queueRender();var G=n,K=G.mouseX,$=G.mouseY,Y=G.highlightNode;if(null!==K&&null!==$&&Y){var J=(K*window.devicePixelRatio-n.panX)/E,Q=($*window.devicePixelRatio-n.panY)/E,X=Y.x-J,Z=Y.y-Q,tt=Y.getSize()*n.nodeScale+2;X*X+Z*Z>tt*tt&&(n.highlightNode=null,n.idleFrames=0,c.onNodeUnhover&&c.onNodeUnhover())}}},this.queueRender()},t.prototype.destroyGraphics=function(){var t=this,e=t.iframeEl,n=t.px,i=t.links,r=t.nodes,o=t.powerTag;this.hanger=null;for(var s=0,a=i;s<a.length;s++){a[s].clearGraphics()}for(var l=0,c=r;l<c.length;l++){c[l].clearGraphics()}o&&(this.powerTag=null,o.clearGraphics()),n&&(e&&document.body.contains(e)&&e.contentDocument&&n.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),this.px=null),cancelAnimationFrame(this.renderTimer),this.renderTimer=null,this.renderCallback=null,document.body.removeClass("is-grabbing")},t.prototype.zoomTo=function(t,e){this.targetScale=t,e?(this.zoomCenterX=e.x,this.zoomCenterY=e.y):this.zoomCenterX=this.zoomCenterY=0},t.prototype.onResize=function(){var t=this,e=t.px,n=t.hanger,i=t.containerEl,r=t.interactiveEl,o=window.devicePixelRatio,s=i.clientWidth,a=i.clientHeight;if(this.width=s,this.height=a,e){var l=Math.round(s*o),c=Math.round(a*o),u=e.renderer,h=u.width,p=u.height;u.view.style.width=s+"px",u.view.style.height=a+"px",u.resize(l,c),r.width=s,r.height=a,e.renderer.plugins.interaction.resolution=1/o,n&&this.setPan(this.panX+(l-h)/2,this.panY+(c-p)/2)}this.changed()},t.prototype.resetPan=function(){var t=window.devicePixelRatio;this.setPan(this.width/2*t,this.height/2*t)},t.prototype.setData=function(t){for(var e=this,n=e.nodes,i=e.nodeLookup,r=e.links,o=t.nodes,s={},a=[],l=[],c=!1,u=!1,h=0,p=0,d=n;p<d.length;p++){var f=d[p];o.hasOwnProperty(f.id)?(h=Math.max(h,f.x*f.x+f.y*f.y),s[f.id]=!1):(a.push(f),c=!0)}var g=Math.sqrt(h),m=[];for(var v in o)if(o.hasOwnProperty(v)){var y=o[v];if(i.hasOwnProperty(v)){var b=y.color||null;(f=i[v]).color!==b&&(f.color=b,u=!0),f.type!==y.type&&(f.type=y.type,u=!0)}else{(f=new EI(this,v,y.type)).color=y.color||null,n.push(f),i[v]=f,c=!0,m.push(f)}}for(var v in o)if(o.hasOwnProperty(v)&&i.hasOwnProperty(v)){f=i[v];var w=o[v].links;for(var k in f.forward)f.forward.hasOwnProperty(k)&&(w.hasOwnProperty(k)||(l.push(f.forward[k]),c=!0));for(var k in w)if(w.hasOwnProperty(k)&&!f.forward.hasOwnProperty(k)&&i.hasOwnProperty(k)){var C=i[k],x=new MI(this,f,C);r.push(x),f.forward[C.id]=x,C.reverse[f.id]=x,c=!0}}for(var S=function(t){t.clearGraphics(),r.remove(t),delete t.source.forward[t.target.id],delete t.target.reverse[t.source.id]},E=0,M=l;E<M.length;E++){S(x=M[E])}for(var L=0,D=a;L<D.length;L++){(f=D[L]).clearGraphics(),n.remove(f),delete i[f.id];var A=f.forward,T=f.reverse;for(var k in A)A.hasOwnProperty(k)&&S(A[k]);for(var k in T)T.hasOwnProperty(k)&&S(T[k])}var P=m.length;if(P>0)for(var O=60*P*60,F=Math.sqrt(O/Math.PI+g*g)-g,I=Math.sqrt(O),N=0,B=m;N<B.length;N++){for(var R=0,z=0,H=0,V=0,q=(f=B[N]).getRelated();V<q.length;V++){var j=q[V];if(i.hasOwnProperty(j)){var U=i[j];null!==U.x&&null!==U.y&&(R+=U.x,z+=U.y,H++)}}if(H>0)f.x=R/H+(Math.random()-.5)*I,f.y=z/H+(Math.random()-.5)*I;else{var _=2*Math.random()*Math.PI,W=g+Math.sqrt(Math.random())*F;f.x=W*Math.cos(_),f.y=W*Math.sin(_)}s[f.id]=[f.x,f.y]}var G=t.weights;for(var v in i)if(i.hasOwnProperty(v)){var K=(f=i[v]).weight;K=G?G.hasOwnProperty(v)?G[v]:0:f.getRelated().length,f.weight!==K&&(f.weight=K,c=!0)}if(c){for(var $=[],Y=0,J=r;Y<J.length;Y++){x=J[Y];$.push([x.source.id,x.target.id])}this.worker.postMessage({nodes:s,links:$,alpha:.3,run:!0}),this.changed()}else u&&this.changed()},t.prototype.setRenderOptions=function(t){var e=t.nodeSizeMultiplier,n=t.lineSizeMultiplier,i=t.showArrow,r=t.textFadeMultiplier;Number.isNumber(e)&&(this.fNodeSizeMult=e),Number.isNumber(n)&&(this.fLineSizeMult=n),Number.isNumber(r)&&(this.fTextShowMult=r),isBoolean(i)&&(this.fShowArrow=i),this.changed()},t.prototype.setForces=function(t){this.worker.postMessage({forces:t,alpha:.3,run:!0})},t.prototype.getNodeFromGraphics=function(t){return this.nodePxLookup.get(t)},t.prototype.getHighlightNode=function(){return this.dragNode||this.highlightNode},t.prototype.updateZoom=function(){var t=this,e=t.scale,n=t.targetScale,i=t.panX,r=t.panY;if((e>(n=this.targetScale=Math.min(8,Math.max(1/128,n)))?e/n:n/e)-1>=.01){var o=this.zoomCenterX,s=this.zoomCenterY;if(0===o&&0===s){var a=window.devicePixelRatio;o=this.width/2*a,s=this.height/2*a}var l={x:(o-i)/e,y:(s-r)/e};e=fI(e,n,.85),i-=l.x*e+i-o,r-=l.y*e+r-s,this.changed()}this.setPan(i,r),this.setScale(e)},t.prototype.setPan=function(t,e){var n=this.hanger;this.panX=t,this.panY=e,n&&(n.x=t,n.y=e)},t.prototype.setScale=function(t){var e=this.hanger;this.scale=t,this.nodeScale=Math.sqrt(1/t);var n=Math.log(t)/Math.log(2);this.textAlpha=Math.clamp(n+1-this.fTextShowMult,0,1),e&&(e.scale.x=e.scale.y=t)},t.prototype.changed=function(){this.idleFrames=0,this.queueRender()},t.prototype.queueRender=function(){!this.renderTimer&&this.renderCallback&&(this.renderTimer=requestAnimationFrame(this.renderCallback))},t.prototype.testCSS=function(){var t=function(t){return 255&parseInt(t)},e=function(e){var n=document.body.createDiv({cls:"graph-view "+e}),i=getComputedStyle(n),r=i.color,o=i.opacity;n.detach();var s=r.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*[\d.]+\s*)?\)$/i),a=parseFloat(o);return isNaN(a)&&(a=1),s?{a:a*=s[4]?Math.clamp(parseFloat(s[4].substr(1)),0,1):1,rgb:t(s[1])<<16|t(s[2])<<8|t(s[3])}:{a,rgb:8947848}};for(var n in xI)xI.hasOwnProperty(n)&&(this.colors[n]=e(xI[n]));for(var i=0,r=this.nodes;i<r.length;i++){r[i].fontDirty=!0}var o=this.powerTag;o&&(o.rendered=!1),this.changed()},t.prototype.getTransparentScreenshot=function(){var t=this.px;return t.render(),t.view},t.prototype.getBackgroundScreenshot=function(){var t=this.getTransparentScreenshot(),e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");return n.fillStyle="#FFFFFF",n.fillRect(0,0,t.width,t.height),n.drawImage(t,0,0),e},t.copyToClipboard=function(t,e,n){t.toBlob((function(t){try{var i={};i[e]=t,navigator.clipboard.write([new ClipboardItem(i)]),n&&n()}catch(t){console.error(t)}}),e,100)},t}();var AI=function(){function t(t,e,n){var i=this;this.chooser=t,this.containerEl=e,this.values=[],this.suggestions=[],this.selectedItem=0,e.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),e.on("auxclick",".suggestion-item",this.onSuggestionClick.bind(this)),e.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),n.register([],"ArrowUp",(function(t){if(!t.isComposing)return i.setSelectedItem(i.selectedItem-1,!0),!1})),n.register([],"ArrowDown",(function(t){if(!t.isComposing)return i.setSelectedItem(i.selectedItem+1,!0),!1})),n.register([],"Enter",(function(t){if(!t.isComposing)return i.useSelectedItem(t),!1}))}return t.prototype.setSuggestions=function(t){var e=this.containerEl;e.empty();var n=[];if(t)for(var i=0,r=t;i<r.length;i++){var o=r[i],s=e.createDiv("suggestion-item");this.chooser.renderSuggestion(o,s),n.push(s)}this.values=t,this.suggestions=n,this.setSelectedItem(0)},t.prototype.addMessage=function(t){this.containerEl.createDiv({cls:"suggestion-empty",text:t})},t.prototype.setSelectedItem=function(t,e){void 0===e&&(e=!1);var n=this.suggestions;0!==n.length&&(t<0?t=n.length-1:t>=n.length&&(t=0),this.forceSetSelectedItem(t,e))},t.prototype.forceSetSelectedItem=function(t,e){void 0===e&&(e=!1);var n=this.suggestions,i=n[this.selectedItem];i&&i.removeClass("is-selected"),this.selectedItem=t;var r=n[this.selectedItem];r&&(r.addClass("is-selected"),e&&r.scrollIntoView(!1))},t.prototype.onSuggestionClick=function(t,e){t.preventDefault();var n=this.suggestions.indexOf(e);this.setSelectedItem(n),this.useSelectedItem(t)},t.prototype.onSuggestionMouseover=function(t,e){var n=this.suggestions.indexOf(e);this.setSelectedItem(n)},t.prototype.useSelectedItem=function(t){if(!this.values)return!1;var e=this.values[this.selectedItem];return void 0!==e&&(this.chooser.selectSuggestion(e,t),!0)},t}(),TI=function(){function t(t,e){var n=this;this.dimBackground=!1,this.isOpen=!1,this.app=t,this.scope=new Nb(e||t.scope),this.suggestEl=createDiv("suggestion-container");var i=this.suggestEl.createDiv("suggestion");this.suggestions=new AI(this,i,this.scope),this.scope.register([],"Escape",(function(){return n.close(),!1}))}return t.prototype.open=function(){var t=this.app,e=this.suggestEl;if(!this.isOpen){if(this.isOpen=!0,t.keymap.pushScope(this.scope),bb(e,!0),document.body.appendChild(e),By.isMobile){var n=e.offsetHeight-1;kb(e,new mb({duration:300}).addProp("transform","translateY("+n+"px)",""))}t.workspace.pushClosable(this)}},t.prototype.close=function(){var t=this,e=this.app,n=this.suggestEl;if(this.autoDestroy&&(this.autoDestroy(),this.autoDestroy=null),e.keymap.popScope(this.scope),this.isOpen){if(this.isOpen=!1,By.isMobile){var i=n.offsetHeight-1;kb(n,new mb({duration:300}).addProp("transform","","translateY("+i+"px)"),(function(){t.suggestions.setSuggestions([]),n.detach()}))}else this.suggestions.setSuggestions([]),n.detach();e.workspace.popClosable(this)}},t.prototype.reposition=function(t){var e=this.suggestEl;e.style.left="0",e.style.top="0",ah(t,e,{gap:5})},t.prototype.setAutoDestroy=function(t){var e=this;this.autoDestroy&&this.autoDestroy(),t&&(this.autoDestroy=function(t,e,n){var i=setInterval((function(){document.body.contains(t)||(clearInterval(i),n())}),e);return function(){clearInterval(i)}}(t,500,(function(){e.close()})))},t}(),PI=Me("plugins.search"),OI=[{type:"operator",name:"path:",infoTextI18n:"label-path-option-description"},{type:"operator",name:"file:",infoTextI18n:"label-file-name-option-description"},{type:"operator",name:"tag:",infoTextI18n:"label-tag-option-description"},{type:"operator",name:"line:()",infoTextI18n:"label-line-option-description"},{type:"operator",name:"section:()",infoTextI18n:"label-section-option-description"}],FI=function(t){function e(e,n,i,r){void 0===r&&(r=!1);var o=t.call(this,e)||this;return o.inputEl=null,o.showHistory=!0,o.inputEl=n,o.showHistory=i,r||(n.addEventListener("input",o.onInputChange.bind(o)),n.addEventListener("focus",o.onInputChange.bind(o))),n.addEventListener("blur",o.close.bind(o)),o.suggestEl.on("mousedown",".suggestion-item",(function(t){t.preventDefault()})),o.suggestEl.addClass("mod-search-suggestion"),o}return M(e,t),e.prototype.renderSuggestion=function(t,e){var n=this,i=e.createSpan({cls:"search-suggest-name",text:t.name});e.addClass("search-suggest-item"),"operator"===t.type?e.createSpan({cls:"search-suggest-info-text",text:PI(t.infoTextI18n)}):"group"===t.type&&(e.addClass("list-item"),i.addClass("list-item-part","mod-extended"),e.createDiv("list-item-part search-suggest-icon clickable-icon",(function(e){Ty(e,t.icon,16),$e(e,t.iconTooltip),e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t.callback(),n.onInputChange()}))})),e.addClass("mod-group"))},e.prototype.getSuggestions=function(t){var e=this;if(this.inputEl.selectionStart===t.length){if(t.endsWith("path:"))return this.app.vault.getAllLoadedFiles().filter((function(t){return t instanceof ub})).map((function(t){return{type:"string",name:t.path}}));if(t.endsWith("tag:"))return Object.keys(this.app.metadataCache.getTags()).map((function(t){return{type:"string",name:t}}))}var n=[];n.push({type:"group",name:PI("label-search-options"),icon:Cm,iconTooltip:PI("tooltip-read-more"),callback:function(){window.open("https://help.obsidian.md/Plugins/Search","_blank")}});for(var i=0,r=OI;i<r.length;i++){var o=r[i];n.push(o)}if(""!==t)return t.endsWith(" ")?n:null;if(this.showHistory){var s=this.app.loadLocalStorage("recent-searches");if(s&&Array.isArray(s)&&s.length>0){n.push({type:"group",name:PI("label-history"),icon:Am,iconTooltip:PI("tooltip-clear-history"),callback:function(){e.app.saveLocalStorage("recent-searches",null)}});for(var a=0,l=s;a<l.length;a++){var c=l[a];n.push({type:"history",name:c})}}}return n},e.prototype.selectSuggestion=function(t,e){if("group"!==t.type){var n=this.inputEl,i=n.value,r=t.name;"string"===t.type&&r.contains(" ")&&(r='"'+r+'"');var o=i+r;if(n.value=o,"operator"===t.type&&t.name.endsWith("()")){var s=o.length-1;n.setSelectionRange(s,s)}n.trigger("input"),(By.isMobile||"operator"!==t.type)&&this.close()}else e.preventDefault()},e.prototype.onInputChange=function(){var t=this.inputEl,e=t.value,n=this.getSuggestions(e);n&&n.length>0?(this.suggestions.setSuggestions(n),this.open(),By.isMobile||(this.suggestEl.style.width=Math.max(this.inputEl.offsetWidth,300)+"px",this.setAutoDestroy(t),this.reposition(uh(t)))):this.close()},e.attach=function(t,n,i){void 0===i&&(i=!0),new e(t,n,i)},e.showOnce=function(t,n,i){void 0===i&&(i=!0),new e(t,n,i,!0).onInputChange(),n.focus()},e}(TI),II=function(t){function e(e){var n=t.call(this,e)||this;return n.navigation=!1,n.allowNoFile=!0,n.requestUpdate=De(n.update,0),n}return M(e,t),e.prototype.load=function(){t.prototype.load.call(this);var e=this.app;this.registerEvent(e.workspace.on("file-open",this.onFileOpen,this))},e.prototype.onLoadFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(t){return this.requestUpdate(),[2]}))}))},e.prototype.onUnloadFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(t){return this.requestUpdate(),[2]}))}))},e.prototype.onFileOpen=function(t){this.leaf.group||this.leaf.pinned||(t instanceof cb?this.loadFile(t):this.loadFile(null),this.requestUpdate())},e.prototype.onGroupChange=function(){if(t.prototype.onGroupChange.call(this),this.leaf.group)for(var e=0,n=this.leaf.workspace.getGroupLeaves(this.leaf.group);e<n.length;e++){var i=n[e];if(i!==this.leaf&&i.view instanceof Ub){var r=i.view.getSyncViewState();this.leaf.openFile(i.view.file,r)}}else{var o=this.leaf.workspace.getActiveFile();this.loadFile(o)}},e}(Ub),NI=function(){function t(){var t=this;this.collapsed=!1;var e=this.el=createDiv("tree-item"),n=this.selfEl=e.createDiv("tree-item-self"),i=this.collapseEl=n.createDiv({cls:"tree-item-icon collapse-icon"});this.innerEl=n.createDiv("tree-item-inner"),n.addEventListener("click",(function(e){0!==e.button||e.defaultPrevented||t.onSelfClick(e)})),this.childrenEl=e.createDiv("tree-item-children"),Ty(i,Wg,8),i.addEventListener("click",this.onCollapseClick.bind(this))}return t.prototype.onSelfClick=function(t){},t.prototype.onCollapseClick=function(t){0===t.button&&(t.preventDefault(),this.toggleCollapsed(!0))},t.prototype.toggleCollapsed=function(t){return this.setCollapsed(!this.collapsed,t)},t.prototype.setCollapsed=function(t,e){return this.collapsed=t,this.updateCollapsed(e)},t.prototype.setCollapsible=function(t){var e=this.collapseEl;t?this.selfEl.prepend(e):e.detach()},t.prototype.setClickable=function(t){this.selfEl.toggleClass("is-clickable",t)},t.prototype.updateCollapsed=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:return n=(e=this).el,i=e.childrenEl,r=e.collapsed,n.toggleClass("is-collapsed",r),[4,Eb(i,n,r,t)];case 1:return o.sent(),[2]}}))}))},t}(),BI=Me("plugins.graph-view"),RI=function(){function t(){this.id="graph",this.name=BI("name"),this.description=BI("desc"),this.defaultOn=!0}return t.prototype.init=function(t,e){var n=this;this.app=t,this.plugin=e,e.registerRibbonAction(BI("action-open"),Xg,(function(t){n.openGraphView(Bb.isModEvent(t))})),e.registerGlobalCommand({id:"graph:open",name:BI("action-open"),icon:Zv,callback:this.openGraphView.bind(this),hotkeys:[GA(["Mod"],"G")]}),e.registerGlobalCommand({id:"graph:open-local",name:BI("action-open-local"),icon:Zv,checkCallback:this.openLocalGraph.bind(this)}),e.registerGlobalCommand({id:"graph:animate",name:BI("action-timelapse"),icon:dy,checkCallback:function(t){var e=n.app.workspace.getActiveViewOfType(HI);if(e)return t||e.dataEngine.renderProgression(),!0}}),e.registerViewType(zI,(function(t){return new HI(t)})),e.registerViewType(VI,(function(t){return new qI(t)}))},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this)),n=this,[4,e.loadData()];case 1:return n.options=i.sent()||{},t.workspace.registerHoverLinkSource("graph",{display:this.name,defaultMod:!0}),[2]}}))}))},t.prototype.onDisable=function(t){t.workspace.unregisterHoverLinkSource("graph")},t.prototype.onFileMenu=function(t,e,n,i){var r=this;e instanceof cb&&i&&"sidebar-context-menu"!==n&&t.addItem((function(t){return t.setTitle(BI("action-open-local")).setIcon(Xg).onClick((function(){return D(r,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"vertical").setViewState({type:VI,active:!0,group:i,state:{file:e.path}})];case 1:return t.sent(),[2]}}))}))}))}))},t.prototype.openGraphView=function(t){this.app.workspace.getLeaf(t).setViewState({type:zI,active:!0,state:{}})},t.prototype.openLocalGraph=function(t){var e=this.app.workspace,n=e.getActiveFile();if(n){if(!t)e.splitActiveLeaf("vertical").setViewState({type:VI,active:!0,group:e.activeLeaf,state:{file:n.path}});return!0}},t.prototype.saveOptions=function(){this.plugin.saveData(this.options)},t}(),zI="graph",HI=function(t){function e(e){var n=t.call(this,e)||this;n.icon=Xg;var i=n.renderer=new DI(n.contentEl,!By.isIosApp,!0);return n.dataEngine=new _I(e.app,n,i),n}return M(e,t),e.prototype.getDisplayText=function(){return BI("name")},e.prototype.load=function(){t.prototype.load.call(this),this.registerEvent(this.app.metadataCache.on("resolved",this.update,this)),this.dataEngine.load(),this.update();var e=this.app.internalPlugins.getPluginById("graph").instance;this.dataEngine.setOptions(e.options)},e.prototype.getViewType=function(){return zI},e.prototype.onClose=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){return this.renderer.destroy(),[2]}))}))},e.prototype.onResize=function(){this.renderer.onResize()},e.prototype.onMoreOptionsMenu=function(e){var n=this;t.prototype.onMoreOptionsMenu.call(this,e),e.addSeparator().addItem((function(t){return t.setTitle(BI("action-copy-screenshot")).setIcon(tm).onClick((function(){var t=n.renderer.getTransparentScreenshot();DI.copyToClipboard(t,"image/png",(function(){return new jb(BI("msg-screenshot-copied"))}))}))}))},e.prototype.update=function(){this.dataEngine.render()},e.prototype.onOptionsChange=function(){var t=this.app.internalPlugins.getPluginById("graph").instance;t.options=this.dataEngine.getOptions(),t.saveOptions()},e}(Vb),VI="localgraph",qI=function(t){function e(e){var n=t.call(this,e)||this;n.icon=Xg,n.renderedFile=null;var i=n.renderer=new DI(n.contentEl,!By.isIosApp,!0);return n.engine=new _I(e.app,n,i),n}return M(e,t),e.prototype.getDisplayText=function(){return this.file?BI("tab-title",{displayText:t.prototype.getDisplayText.call(this)}):BI("name")},e.prototype.getViewType=function(){return VI},e.prototype.canAcceptExtension=function(t){return!0},e.prototype.getState=function(){var e=t.prototype.getState.call(this);return e.options=this.engine.getOptions(),e},e.prototype.setState=function(e,n){return D(this,void 0,Promise,(function(){return A(this,(function(i){switch(i.label){case 0:return e.options&&this.engine.setOptions(e.options),[4,t.prototype.setState.call(this,e,n)];case 1:return i.sent(),[2]}}))}))},e.prototype.load=function(){t.prototype.load.call(this),this.registerEvent(this.app.metadataCache.on("resolved",this.update,this)),this.engine.load()},e.prototype.onClose=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){return this.renderer.destroyGraphics(),[2]}))}))},e.prototype.onFileChanged=function(t){t===this.file&&this.requestUpdate()},e.prototype.onResize=function(){this.renderer.onResize()},e.prototype.update=function(){var t=this,e=t.file,n=t.renderer,i=t.engine;t.renderedFile!==e&&(n.resetPan(),this.renderedFile=e);var r=i.options;n.highlightNode=null,r.localFile=e?e.path:null,i.render()},e.prototype.onMoreOptionsMenu=function(e){var n=this;t.prototype.onMoreOptionsMenu.call(this,e),e.addSeparator().addItem((function(t){return t.setTitle(BI("action-copy-screenshot")).setIcon(tm).onClick((function(){var t=n.renderer.getTransparentScreenshot();DI.copyToClipboard(t,"image/png",(function(){return new jb(BI("msg-screenshot-copied"))}))}))}))},e.prototype.onOptionsChange=function(){this.app.workspace.requestSaveLayout()},e}(II);function jI(t,e){return(Math.pow(e,1-t)-e)/(1-e)}function UI(t,e){return 1-Math.log(t*(1-e)+e)/Math.log(e)}var _I=function(){function t(t,e,n){var i=this;this.options=Object.assign({},bI),this.searchQueries=null,this.fileFilter={},this.hasFilter=!1,this.queue=null,this.lastHoverLink=null,this.hoverPopover=null,this.requestUpdateSearch=De(this.updateSearch.bind(this),250,!0),this.progression=0,this.progressionSpeed=20,this.currentFocusFile="",this.app=t,this.view=e,this.renderer=n,n.onNodeClick=this.onNodeClick.bind(this),n.onNodeRightClick=this.onNodeRightClick.bind(this),n.onNodeHover=this.onNodeHover.bind(this),n.onNodeUnhover=this.onNodeUnhover.bind(this),this.onOptionsChange=De((function(){return e.onOptionsChange()}),100,!0);var r=this.controlsEl=n.containerEl.createDiv("graph-controls");r.createDiv("graph-controls-button mod-close",(function(t){Ty(t,Am,16),$e(t,Ee("interface.menu.close")),t.addEventListener("click",(function(){r.addClass("is-close"),i.onOptionsChange()}))})),r.createDiv("graph-controls-button mod-open",(function(t){Ty(t,nm,20),$e(t,BI("tooltip-open-graph-settings")),t.addEventListener("click",(function(){r.removeClass("is-close"),i.onOptionsChange()}))})),e instanceof qI||r.createDiv("graph-controls-button mod-animate",(function(t){Ty(t,Ey,20),$e(t,BI("tooltip-start-timelapse-animation")),t.addEventListener("click",(function(){var t=i.app.workspace.getActiveViewOfType(HI);t&&t.dataEngine.renderProgression()}))})),r.createDiv({cls:"graph-controls-button mod-reset"},(function(t){Ty(t,Pm,16),$e(t,Ee("interface.tooltip-restore-default-settings")),t.addEventListener("click",(function(){i.filterOptions.setDefaultOptions(),i.colorGroupOptions.setColorQueries([]),i.displayOptions.setDefaultOptions(),i.forceOptions.setDefaultOptions()}))})),this.filterOptions=new GI(this,e instanceof qI),this.colorGroupOptions=new KI(this),this.displayOptions=new YI(this),this.forceOptions=new QI(this),this.filterOptions.setDefaultOptions(),this.colorGroupOptions.setColorQueries([]),this.displayOptions.setDefaultOptions(),this.forceOptions.setDefaultOptions()}return t.prototype.load=function(){var t=this,e=this.app,n=this.view,i=e.vault,r=e.workspace,o=e.metadataCache;n.registerEvent(i.on("create",this.onFileChanged,this)),n.registerEvent(i.on("modify",this.onFileChanged,this)),n.registerEvent(i.on("rename",this.recomputeFile,this)),n.registerEvent(o.on("resolve",this.recomputeFile,this)),n.registerEvent(r.on("css-change",this.onCssChange,this)),n.registerEvent(r.on("file-open",this.onFileOpen,this));var s=0;n.registerInterval(window.setInterval((function(){t.renderer.targetScale!==s&&(s=t.renderer.targetScale,t.onOptionsChange())}),2e3));var a={38:"up",40:"down",37:"left",39:"right",187:"zoomin",189:"zoomout"},l=function(e){var i=t.renderer;i.keyboardActions.shift=Bb.isModifier(e,"Shift");var o="keydown"===e.type;if((!o||!e.repeat&&!e.defaultPrevented&&r.activeLeaf===n.leaf&&document.activeElement===document.body)&&a.hasOwnProperty(e.which)){var s=a[e.which];i.keyboardActions[s]=o,i.changed()}};n.registerDomEvent(window,"keydown",l),n.registerDomEvent(window,"keyup",l)},t.prototype.onCssChange=function(){this.renderer.testCSS()},t.prototype.updateSearch=function(){var t=[],e=this.filterOptions.search.getValue();e&&t.push({query:e,color:null}),t=t.concat(this.colorGroupOptions.getColoredQueries()),this.setQuery(t),this.onOptionsChange()},t.prototype.setQuery=function(t){var e=this;this.queue&&(this.queue.cancel(),this.queue=null),this.hasFilter=!1;for(var n=[],i={},r=0,o=t;r<o.length;r++){var s=o[r],a=new CP(s.query,!1);a.matcher||(a=null),a&&(n.push({query:a,color:s.color}),a.requiredInputs&&Object.assign(i,a.requiredInputs),s.color||(this.hasFilter=!0))}if(0===n.length&&(n=null),this.searchQueries=n,!n)return this.fileFilter={},void this.render();var l=this.fileFilter={},c=this.queue=new Ah({onStart:function(){e.filterOptions.startSearch()},onStop:function(){e.render(),e.filterOptions.stopSearch()},onCancel:function(){e.queue=null,e.filterOptions.stopSearch()}}),u=this.app;c.addList(u.vault.getFiles());var h=performance.now(),p=!0;xP(u,i,c,(function(t,e,i){for(var r=!0,o=null,s=0,a=n;s<a.length;s++){var c=a[s],u=c.query.match(t,e,i);if(!u&&!c.color){r=!1;break}if(u&&c.color){o=c.color;break}}l[t.path]=!!r&&(o||!0),p=p||r}),{beforePause:function(t){t<h+333||(h=t,p&&e.render(),p=!1)}})},t.prototype.render=function(){var t=this,e=this,n=e.app,i=e.view,r=e.renderer,o=e.searchQueries,s=e.fileFilter,a=e.options,l=i instanceof qI;if(!l||a.localFile){l&&(this.progression=0);var c=function(t,e,n,i){var r=t.resolvedLinks,o=t.unresolvedLinks,s=t.vault,a=e.showAttachments,l=e.hideUnresolved,c=e.showTags,u={};if(e.showTags){var h=t.getTags();for(var p in h)h.hasOwnProperty(p)&&(u[p.toLowerCase()]=p)}var d={},f=0,g=t.getCachedFiles();if(i){for(var m={},v=0,y=g;v<y.length;v++){var b=y[v],w=s.getAbstractFileByPath(b);m[b]=w instanceof cb?Math.min(w.stat.ctime,w.stat.mtime):1/0}g.sort((function(t,e){return m[t]-m[e]}))}for(var k="",C=0,x=g;C<x.length;C++){var S=x[C],E="md"!==Xt(S);if(a||!E){var M=E?"attachment":"",L=n(S,M);if(L){var D=d[S]=wI(M),A=D.links;if(e.showOrphans&&(f===i&&(k=S),f++),isBoolean(L)||(D.color=L),r.hasOwnProperty(S)){var T=r[S];for(var P in T)if(T.hasOwnProperty(P)){var O="md"!==Xt(P);if(a||!O)n(P,O?"attachment":"")&&(!i||f<i?A[P]=!0:f===i&&(k=S),f++)}}if(!l&&o.hasOwnProperty(S)){T=o[S];for(var P in T)T.hasOwnProperty(P)&&n(P,"unresolved")&&(!i||f<i?(A[P]=!0,d.hasOwnProperty(P)||(d[P]=wI("unresolved"))):f===i&&(k=S),f++)}if(c)if((h=iA(t.getCache(S)))&&h.length>0)for(var F=0,I=h;F<I.length;F++){if(n(p=I[F],"tag")){var N=u[p.toLowerCase()]||p;!i||f<i?A[N]=!0:f===i&&(k=S),f++,d.hasOwnProperty(N)||(d[N]=wI("tag"))}}}}}if(i&&k){var B=g.indexOf(k);if(-1!==B)for(var R=B+1;R<g.length;R++)delete d[g[R]]}return{nodes:d,numLinks:f}}(n.metadataCache,a,(function(e,n){return!o||(""===n?e===a.localFile||(s.hasOwnProperty(e)?s[e]:!t.hasFilter):"tag"===n?o.every((function(t){return!!t.color||!!t.query.matchTag(e)})):"attachment"!==n||o.every((function(t){return!!t.color||!!t.query.matchFilepath(e)})))}),this.progression),u=c.numLinks;if(a.localFile&&(c=function(t,e){var n=t.nodes,i={},r={},o=e.localFile,s=e.localJumps,a=e.localInterlinks,l=e.localForelinks,c=e.localBacklinks;if(r[o]=30,!n.hasOwnProperty(o))return i[o]=wI(),{nodes:i,weights:r};i[o]=wI(n[o].type);for(var u=function(t){var e={};for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];if("tag"!==s.type){var a=s.links;for(var u in a)if(a.hasOwnProperty(u)){var h=i[o];l&&i.hasOwnProperty(o)&&!i.hasOwnProperty(u)&&!CI.hasOwnProperty(h.type)?(e[u]=e[u]||kI(n[u]),h.links[u]=!0):c&&i.hasOwnProperty(u)&&!i.hasOwnProperty(o)&&!CI.hasOwnProperty(i[u].type)&&(e[o]=e[o]||kI(n[o]),e[o].links[u]=!0)}}}for(var p in e)e.hasOwnProperty(p)&&(i[p]=e[p],r[p]=t)},h=30/s,p=0;p<s;p++)u(30-h*(p+1));if(a)for(var d in i)i.hasOwnProperty(d)&&n.hasOwnProperty(d)&&(i[d]=n[d]);return{nodes:i,weights:r}}(c,a)),a.showOrphans||function(t){var e=t.nodes,n={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i].links;for(var o in r)r.hasOwnProperty(o)&&i!==o&&(n[o]=!0)}for(var i in e)if(e.hasOwnProperty(i)){r=e[i].links;var s=!1;for(var o in r)if(r.hasOwnProperty(o)&&e.hasOwnProperty(o)&&i!==o){s=!0;break}s||n[i]||delete e[i]}}(c),this.currentFocusFile){var h=c.nodes[this.currentFocusFile];h&&(h.type="focused")}return r.setData(c),u}r.setData({nodes:{}})},t.prototype.renderProgression=function(){return D(this,void 0,void 0,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:this.progression=1,t=this.render(),this.progressionSpeed=Math.clamp(.5*Math.sqrt(t),5,100),e=Date.now(),i.label=1;case 1:return this.progression>0?(n=this.progression,[4,new Promise((function(t){return Ie(t,0)}))]):[3,3];case 2:return i.sent(),n!==this.progression?[3,3]:(n=1+Math.floor(this.progressionSpeed*(Date.now()-e)/1e3))===this.progression||(this.progression=n,this.render())?[3,1]:[3,3];case 3:return[2]}}))}))},t.prototype.onFileChanged=function(t){"md"!==t.extension&&this.recomputeFile(t)},t.prototype.recomputeFile=function(t){var e=this.queue;e&&e.add(t)},t.prototype.onFileOpen=function(t){var e=t?t.path:"";e!==this.currentFocusFile&&(this.currentFocusFile=e,this.render())},t.prototype.onNodeClick=function(t,e,n){var i=this.app,r=this.view;if("tag"!==n){var o=function(t){return(t instanceof MouseEvent||t instanceof PointerEvent)&&1===t.button}(t)||Bb.isModifier(t,"Mod"),s=i.workspace;s.setActiveLeaf(r.leaf,!1),s.openLinkText(e,"",o)}else{var a=i.internalPlugins.getPluginById("global-search");a&&a.instance.openGlobalSearch("tag:"+e)}},t.prototype.onNodeRightClick=function(t,e,n){var i=this.app;if("tag"!==n){var r=i.metadataCache.getFirstLinkpathDest(e,"");if(r&&t instanceof MouseEvent){var o=new zb(this.app);o.addItem((function(t){return t.setTitle(re(r.path)).setIsLabel(!0)})).addSeparator(),o.addItem((function(t){return t.setTitle(Ee("interface.menu.open-in-new-pane")).setIcon(Sm).onClick((function(){return i.workspace.openLinkText(e,"",!0)}))})),this.app.workspace.trigger("file-menu",o,r,"graph-context-menu",this.view.leaf),o.showAtMouseEvent(t)}}else{var s=i.internalPlugins.getPluginById("global-search");s&&s.instance.openGlobalSearch("tag:"+e)}},t.prototype.onNodeHover=function(t,e,n){if(this.onNodeUnhover(),t instanceof MouseEvent){var i=this,r=i.app,o=i.hoverPopover,s=i.lastHoverLink;if(""===n||"focused"===n||"attachment"===n){if(o&&o.state!==nF.Hidden&&s===e)return o.onTarget=!0,void o.transition();this.lastHoverLink=e,r.workspace.trigger("hover-link",{event:t,source:"graph",hoverParent:this,targetEl:null,linktext:e})}}},t.prototype.onNodeUnhover=function(){var t=this.hoverPopover;t&&(t.onTarget=!1,t.transition())},t.prototype.getOptions=function(){var t={};return this.filterOptions.getOptions(t),this.colorGroupOptions.getOptions(t),this.displayOptions.getOptions(t),this.forceOptions.getOptions(t),t.scale=this.renderer.targetScale,t.close=this.controlsEl.hasClass("is-close"),t},t.prototype.setOptions=function(t){t&&(this.filterOptions.setOptions(t),this.colorGroupOptions.setOptions(t),this.displayOptions.setOptions(t),this.forceOptions.setOptions(t),t.scale&&this.renderer.zoomTo(t.scale),t.close&&this.controlsEl.toggleClass("is-close",t.close),this.render())},t}(),WI=function(t){function e(e,n,i){var r=t.call(this)||this;return r.engine=null,r.optionListeners={},r.engine=e,r.el.addClass("graph-control-section","mod-"+n),r.setCollapsible(!0),r.setCollapsed(!0,!1),r.innerEl.createEl("header",{cls:"graph-control-section-header",text:i}),r.optionListeners["collapse-"+n]=function(t){return void 0!==t&&isBoolean(t)&&r.setCollapsed(t,!1),r.collapsed},r}return M(e,t),e.prototype.onSelfClick=function(t){return this.toggleCollapsed(!0)},e.prototype.updateCollapsed=function(e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,t.prototype.updateCollapsed.call(this,e)];case 1:return n.sent(),this.engine.onOptionsChange(),[2]}}))}))},e.prototype.setOptions=function(t){var e=this.optionListeners;for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&e[n](t[n])},e.prototype.getOptions=function(t){var e=this.optionListeners;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n]();void 0!==i&&(t[n]=i)}},e}(NI),GI=function(t){function e(e,n){var i=t.call(this,e,"filter",BI("label-filters"))||this;i.searchSetting=null,e.controlsEl.appendChild(i.el);var r=i.childrenEl;return(i.searchSetting=new DA(r).addSearch((function(t){return t.setPlaceholder(BI("prompt-filter-nodes")).setValue("").onChange((function(){i.engine.requestUpdateSearch()})).then((function(t){i.search=t,$e(t.clearButtonEl,Ee("plugins.search.tooltip-clear-search")),i.optionListeners.search=function(e){return void 0!==e&&(t.setValue(e),i.engine.requestUpdateSearch()),t.getValue()},t.inputEl.addEventListener("keydown",(function(t){t.isComposing||"Enter"!==t.key||i.engine.updateSearch()})),FI.attach(e.app,t.inputEl,!1)}))}))).settingEl.addClass("mod-search-setting"),n&&(new DA(r).setName(BI("option-depth")).setTooltip(BI("option-depth-description")).setClass("mod-local-jumps").setClass("mod-slider").addSlider((function(t){return t.setLimits(1,5,1).setValue(e.options.localJumps).setDynamicTooltip().registerOptionListener(i.optionListeners,"localJumps").onChange((function(t){e.options.localJumps=t,e.render(),e.onOptionsChange()}))})),new DA(r).setName(BI("option-backlinks")).setTooltip(BI("option-backlinks-description")).setClass("mod-toggle").addToggle((function(t){return t.setValue(e.options.localBacklinks).registerOptionListener(i.optionListeners,"localBacklinks").onChange((function(t){e.options.localBacklinks=t,e.render(),e.onOptionsChange()}))})),new DA(r).setName(BI("option-forelinks")).setTooltip(BI("option-forelinks-description")).setClass("mod-toggle").addToggle((function(t){return t.setValue(e.options.localForelinks).registerOptionListener(i.optionListeners,"localForelinks").onChange((function(t){e.options.localForelinks=t,e.render(),e.onOptionsChange()}))})),new DA(r).setName(BI("option-neighbor-links")).setTooltip(BI("option-neighbor-links-description")).setClass("mod-toggle").addToggle((function(t){return t.setValue(e.options.localInterlinks).registerOptionListener(i.optionListeners,"localInterlinks").onChange((function(t){e.options.localInterlinks=t,e.render(),e.onOptionsChange()}))}))),new DA(r).setName(BI("option-show-tags")).setTooltip(BI("option-show-tags-description")).setClass("mod-toggle").addToggle((function(t){return t.setValue(e.options.showTags).registerOptionListener(i.optionListeners,"showTags").onChange((function(t){e.options.showTags=t,e.render(),e.onOptionsChange()}))})),new DA(r).setName(BI("option-show-attachments")).setTooltip(BI("option-show-attachments-description")).setClass("mod-toggle").addToggle((function(t){return t.setValue(e.options.showAttachments).registerOptionListener(i.optionListeners,"showAttachments").onChange((function(t){e.options.showAttachments=t,e.render(),e.onOptionsChange()}))})),new DA(r).setName(BI("option-show-existing-files-only")).setTooltip(BI("option-show-existing-files-only-description")).setClass("mod-toggle").addToggle((function(t){return t.setValue(e.options.hideUnresolved).registerOptionListener(i.optionListeners,"hideUnresolved").onChange((function(t){e.options.hideUnresolved=t,e.render(),e.onOptionsChange()}))})),n||new DA(r).setName(BI("option-show-orphans")).setTooltip(BI("option-show-orphans-description")).setClass("mod-toggle").addToggle((function(t){return t.setValue(e.options.showOrphans).registerOptionListener(i.optionListeners,"showOrphans").onChange((function(t){e.options.showOrphans=t,e.render(),e.onOptionsChange()}))})),i}return M(e,t),e.prototype.startSearch=function(){this.searchSetting.settingEl.addClass("is-loading")},e.prototype.stopSearch=function(){this.searchSetting.settingEl.removeClass("is-loading")},e.prototype.setDefaultOptions=function(){this.setOptions(bI)},e}(WI),KI=function(t){function e(e){var n=t.call(this,e,"color-groups",BI("label-groups"))||this;return n.containerEl=null,e.controlsEl.appendChild(n.el),n.optionListeners.colorGroups=function(t){return Array.isArray(t)&&(n.setColorQueries(t),n.engine.requestUpdateSearch()),n.getColoredQueries()},n.setColorQueries([]),n}return M(e,t),e.prototype.getColoredQueries=function(){for(var t=[],e=0,n=this.groups;e<n.length;e++){var i=n[e];t.push({query:i.query.getValue(),color:{a:1,rgb:i.color.getValueInt()}})}return t},e.prototype.setColorQueries=function(t){var e=this,n=this.childrenEl;n.empty();for(var i=[],r=n.createDiv({cls:"graph-color-groups-container"}),o=function(t){var n=r.createDiv("graph-color-group"),o=new NA(n).setPlaceholder(BI("placeholder-enter-query")).setValue(t.query).onChange((function(){return e.engine.requestUpdateSearch()})).then((function(t){return FI.attach(e.engine.app,t.inputEl,!1)})),s=new qA(n).setValueInt(t.color?t.color.rgb:0).onChange((function(){return e.engine.updateSearch()})),a=s.colorPickerEl;$e(a,BI("tooltip-click-to-change-drag-to-reorder"));var l={el:n,query:o,color:s};a.addEventListener("mousedown",(function(t){e.onDragOption(t,l)})),n.createDiv("clickable-icon",(function(t){Ty(t,Am,16),$e(t,BI("tooltip-delete-graph")),t.addEventListener("click",(function(){i.remove(l),n.detach(),e.engine.updateSearch()}))})),i.push(l)},s=0,a=t;s<a.length;s++){var l=a[s];o(l)}this.groups=i,n.createDiv("graph-color-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:BI("button-new-group")},(function(t){t.addEventListener("click",(function(){var t="obsidian"===e.engine.app.getTheme(),n=function(t,e,n){var i,r,o;if(t/=360,n/=100,0==(e/=100))i=r=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,a=2*n-s;i=bF(a,s,t+1/3),r=bF(a,s,t),o=bF(a,s,t-1/3)}return{r:i,g:r,b:o}}(40*e.groups.length,t?70:60,60),i=n.r,r=n.g,s=n.b;o({query:"",color:{a:1,rgb:wF(i,r,s)}}),e.engine.updateSearch()}))}))}))},e.prototype.onDragOption=function(t,e){var n=this;if(0===t.button){var i=t.clientX,r=t.clientY,o=e.el,s=o.getBoundingClientRect(),a=t.clientX-s.x,l=t.clientY-s.y,c=null,u=function(t){t.preventDefault();var s=t.clientX,u=t.clientY;if(null===c){var h=s-i,p=u-r;if(h*h+p*p<25)return;var d=o.offsetWidth;n.groups.remove(e),(c=o.cloneNode(!0)).addClass("drag-ghost"),c.style.width=d+"px",document.body.appendChild(c),document.body.addClass("is-grabbing"),n.childrenEl.addClass("is-grabbing")}var f=n.getDropIndex(t);o.detach(),Ke(),c&&(c.style.left=s-a+"px",c.style.top=u-l+"px");for(var g=0;g<n.groups.length;g++){(m=n.groups[g])===e&&g}for(g=0;g<n.groups.length;g++){var m;(m=n.groups[g]).el.style.top=g<f?"0":m.el.offsetHeight+"px"}},h=function(t){if(document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",h),c){c.detach(),document.body.removeClass("is-grabbing"),n.childrenEl.removeClass("is-grabbing");var i=n.getDropIndex(t);n.groups.splice(i,0,e),n.setColorQueries(n.getColoredQueries()),n.engine.updateSearch()}};document.addEventListener("mousemove",u),document.addEventListener("mouseup",h)}},e.prototype.getDropIndex=function(t){var e,n=t.clientY;for(e=0;e<this.groups.length;e++){var i=this.groups[e].el.getBoundingClientRect();if(n<i.top+i.height/2)return e}return e},e}(WI),$I={showArrow:!1,textFadeMultiplier:0,nodeSizeMultiplier:1,lineSizeMultiplier:1},YI=function(t){function e(e){var n=t.call(this,e,"display",BI("label-display"))||this;e.controlsEl.appendChild(n.el);var i=n.childrenEl;return new DA(i).setName(BI("option-show-arrows")).setTooltip(BI("option-show-arrows-description")).setClass("mod-toggle").addToggle((function(t){return t.registerOptionListener(n.optionListeners,"showArrow").onChange((function(t){e.renderer.setRenderOptions({showArrow:t}),e.onOptionsChange()}))})),new DA(i).setName(BI("option-text-fade")).setClass("mod-slider").addSlider((function(t){return t.setLimits(-3,3,.1).setDynamicTooltip().registerOptionListener(n.optionListeners,"textFadeMultiplier").onChange((function(t){e.renderer.setRenderOptions({textFadeMultiplier:t}),e.onOptionsChange()}))})),new DA(i).setName(BI("option-node-size")).setClass("mod-slider").addSlider((function(t){return t.setLimits(.1,5,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"nodeSizeMultiplier").onChange((function(t){e.renderer.setRenderOptions({nodeSizeMultiplier:t}),e.onOptionsChange()}))})),new DA(i).setName(BI("option-link-thickness")).setClass("mod-slider").addSlider((function(t){return t.setLimits(.1,5,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"lineSizeMultiplier").onChange((function(t){e.renderer.setRenderOptions({lineSizeMultiplier:t}),e.onOptionsChange()}))})),e.view instanceof qI||new DA(i).addButton((function(t){return t.setButtonText(BI("button-animate-timelapse")).setCta().onClick((function(){e.renderProgression()}))})),n}return M(e,t),e.prototype.setDefaultOptions=function(){this.setOptions($I)},e}(WI),JI={centerStrength:UI(.1,.01),repelStrength:10,linkStrength:UI(1,.01),linkDistance:250},QI=function(t){function e(e){var n=t.call(this,e,"forces",BI("label-forces"))||this;e.controlsEl.appendChild(n.el);var i=n.childrenEl;return new DA(i).setName(BI("option-center-force")).setClass("mod-slider").addSlider((function(t){return t.setLimits(0,1,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"centerStrength").onChange((function(t){e.renderer.setForces({centerStrength:jI(t,.01)}),e.onOptionsChange()}))})),new DA(i).setName(BI("option-repel-force")).setClass("mod-slider").addSlider((function(t){return t.setLimits(0,20,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"repelStrength").onChange((function(t){e.renderer.setForces({repelStrength:t*t*t}),e.onOptionsChange()}))})),new DA(i).setName(BI("option-link-force")).setClass("mod-slider").addSlider((function(t){return t.setLimits(0,1,"any").setDynamicTooltip().registerOptionListener(n.optionListeners,"linkStrength").onChange((function(t){e.renderer.setForces({linkStrength:jI(t,.01)}),e.onOptionsChange()}))})),new DA(i).setName(BI("option-link-distance")).setClass("mod-slider").addSlider((function(t){return t.setLimits(30,500,1).setDynamicTooltip().registerOptionListener(n.optionListeners,"linkDistance").onChange((function(t){e.renderer.setForces({linkDistance:t}),e.onOptionsChange()}))})),n}return M(e,t),e.prototype.setDefaultOptions=function(){this.setOptions(JI)},e}(WI);function XI(t){for(var e=createDiv("prompt-instructions"),n=function(t){e.createDiv("prompt-instruction",(function(e){e.createSpan({cls:"prompt-instruction-command",text:t.command}),e.createSpan({text:t.purpose})}))},i=0,r=t;i<r.length;i++){n(r[i])}return e}var ZI=function(t){function e(e){var n=t.call(this,e)||this;return n.context=null,n.limit=100,n.suggestEl.addEventListener("mousedown",(function(t){return t.preventDefault()})),n}return M(e,t),e.prototype.setInstructions=function(t){this.suggestEl.appendChild(XI(t))},e.prototype.trigger=function(t,e,n){var i=this,r=t.getCursor("from"),o=t.getCursor("to");if(r.line!==o.line||r.ch!==o.ch)return this.context=null,!1;var s=this.onTrigger(r,t,e);if(s){var a=this.context={editor:t,file:e,start:s.start,end:s.end,query:s.query};if(n){var l=this.getSuggestions(a);if(Array.isArray(l))this.showSuggestions(l);else{if(!l)return;D(i,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return[4,l];case 1:return(t=e.sent())&&this.showSuggestions(t),[2]}}))}))}}return!0}return this.context=null,!1},e.prototype.showSuggestions=function(t){if(0!==t.length){var e=this.limit;e>0&&t.length>e&&(t=t.slice(0,e)),this.suggestions.setSuggestions(t),this.updatePosition(!0)}else this.close()},e.prototype.updatePosition=function(t){var e=this.context;if(e){var n=e.editor;if(this.open(),By.isMobile){if(t){var i=n.getCursor(),r=n.coordsAtPos(i,!0),o=n.getScrollInfo();Math.abs(o.top-r.top)>10&&n.scrollTo(null,r.top+3)}}else{var s=n.coordsAtPos(e.start),a=n.coordsAtPos(e.end);this.reposition({top:s.top,left:Math.min(s.left,a.left),right:Math.max(s.right,a.right),bottom:a.bottom})}}},e.prototype.close=function(){this.context=null,t.prototype.close.call(this)},e}(TI),tN=function(t,e){return e.score-t.score},eN={type:"none",matches:null,score:0},nN=function(t){function e(e){var n=t.call(this,e)||this;return n.runnable=null,n.fileSuggestions=null,n.mode="file",n.global=!1,n.setInstructions([{command:Ee("editor.link-suggestion.label-type-hash"),purpose:Ee("editor.link-suggestion.label-link-heading")},{command:Ee("editor.link-suggestion.label-type-block"),purpose:Ee("editor.link-suggestion.label-link-block")},{command:Ee("editor.link-suggestion.label-type-pipe"),purpose:Ee("editor.link-suggestion.label-change-display-text")}]),n.scope.register([],"Tab",(function(t){if(!t.isComposing&&n.suggestions.useSelectedItem(t))return!1})),n.scope.register(null,"#",(function(t){if(("file"===n.mode||"heading"===n.mode)&&n.suggestions.useSelectedItem(t))return!1})),n.scope.register(null,"^",(function(t){if("file"===n.mode&&n.suggestions.useSelectedItem(t))return!1})),n}return M(e,t),e.prototype.onTrigger=function(t,e,n){var i=t.line,r=e.getLine(i).substr(0,t.ch),o=r.lastIndexOf("[["),s=r.lastIndexOf("]");return-1!==o&&s<o?{start:{line:i,ch:o+2},end:{line:i,ch:t.ch},query:r.substr(o+2)}:null},e.prototype.getSuggestions=function(t){return D(this,void 0,Promise,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:return(e=this.runnable)&&e.cancel(),n=t.query,e=this.runnable=new Dh,n=n.trim(),[4,this.getSuggestionsAsync(e,n)];case 1:if(i=r.sent(),e.isCancelled())return[2,null];if(!i||0===i.length){if(By.isMobile)return[2,[]];i=[eN]}return i.sort(tN),[2,i]}}))}))},e.prototype.showSuggestions=function(e){if(t.prototype.showSuggestions.call(this,e),this.context){var n=this.context.query;n&&"^"!==n&&"#"!==n||this.suggestions.forceSetSelectedItem(-1,!1)}},e.prototype.renderSuggestion=function(t,e){var n=e.createDiv("suggestion-content"),i=e.createDiv("suggestion-note"),r=t.matches;if(!this.global||"heading"!==t.type&&"block"!==t.type||i.setText(oe(t.file.path)),"none"===t.type)n.setText(Ee("editor.link-suggestion.label-no-match-found"));else if("file"===t.type){var o=t.path,s=Kt(o),a=o.substr(0,o.length-s.length);RT(i,a,r),RT(n,s,r,-a.length)}else if("alias"===t.type)i.setText(t.path),RT(n,t.alias,r),n.createSpan({cls:"suggestion-flair",prepend:!0},(function(t){Ty(t,tv,13),$e(t,Ee("interface.tooltip.alias"))}));else if("linktext"===t.type)RT(n,t.path,r);else if("heading"===t.type)RT(n,t.heading,r),n.createSpan({cls:"suggestion-flair",text:"H"+t.level,prepend:!0});else if("block"===t.type){RT(n,t.display,r);var l=t.node.id;l&&String.isString(l)&&(i.getText().trim()&&i.appendText(" > "),RT(i,l,t.idMatch))}},e.prototype.getSuggestionsAsync=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o,s,a,l,c;return A(this,(function(u){if(n=e.indexOf("|"),i=null,-1!==n&&(i=e.substr(n+1),e=e.substr(0,n)),null===i){if(e.startsWith("##"))return e=e.substr(2),this.mode="heading",this.global=!0,[2,this.getGlobalHeadingSuggestions(t,e)];if(e.startsWith("^^"))return e=e.substr(2),this.mode="block",this.global=!0,[2,this.getGlobalBlockSuggestions(t,e)]}return this.global=!1,r=tA(e),o=r.path,s=r.subpath,null!==i?(this.mode="display",[2,this.getDisplaySuggestions(t,o,s,i)]):s?s.startsWith("#^")?(a=s.substr(2),this.mode="block",[2,this.getBlockSuggestions(t,o,a)]):(this.mode="heading",[2,this.getHeadingSuggestions(t,o,s)]):-1!==(l=o.lastIndexOf("^"))?(c=o.substr(l+1),o=o.substr(0,l),this.mode="block",[2,this.getBlockSuggestions(t,o,c)]):(this.mode="file",[2,this.getFileSuggestions(t,o)])}))}))},e.prototype.getDisplaySuggestions=function(t,e,n,i){return D(this,void 0,Promise,(function(){var t,r,o,s,a,l,c,u,h,p,d;return A(this,(function(f){if(t=this.app.metadataCache,r=this.context.file,!(o=t.getFirstLinkpathDest(e,r.path)))return[2,[]];if(!(s=t.getFileCache(o))||!s.frontmatter)return[2,[]];if(!(a=Pg(s.frontmatter)))return[2,[]];for(l=[],c=LT(i),u=0,h=a;u<h.length;u++)p=h[u],(d=PT(c,p))&&l.push({type:"alias",alias:p,file:o,path:e+n,score:d.score,matches:d.matches});return[2,l]}))}))},e.prototype.getHeadingSuggestions=function(t,e,n){var i,r;return D(this,void 0,Promise,(function(){var o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w;return A(this,(function(k){switch(k.label){case 0:if(o=this.app.metadataCache,s=this.context.file,!(a=o.getFirstLinkpathDest(e,s.path))||"md"!==a.extension)return[2,[]];if(!(l=o.getFileCache(a))||!l.headings||0===l.headings.length)return[2,[]];c=n.split("#").filter((function(t){return!!t})),n.endsWith("#")&&c.push(""),(u="#"+c.slice(0,c.length-1).join("#")).endsWith("#")||(u+="#"),h=0,p=0,d=[],k.label=1;case 1:k.trys.push([1,6,7,12]),f=I(Ph(Th(l.headings),{maxDelay:0})),k.label=2;case 2:return[4,f.next()];case 3:if((g=k.sent()).done)return[3,5];if(m=g.value,t.isCancelled())return[3,5];if(m.level<=p||h>=c.length)return[3,5];v=m.heading.toLowerCase(),h===c.length-1?""===(y=c[h])?d.push({type:"heading",file:a,path:e,subpath:u,level:m.level,heading:m.heading,score:0,matches:null}):(b=PT(LT(y),m.heading))&&d.push({type:"heading",file:a,path:e,subpath:u,level:m.level,heading:m.heading,score:b.score,matches:b.matches}):v===c[h].toLowerCase()&&(h++,p=m.level),k.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return w=k.sent(),i={error:w},[3,12];case 7:return k.trys.push([7,,10,11]),g&&!g.done&&(r=f.return)?[4,r.call(f)]:[3,9];case 8:k.sent(),k.label=9;case 9:return[3,11];case 10:if(i)throw i.error;return[7];case 11:return[7];case 12:return 1===d.length&&d[0].heading.toLowerCase()===c.last().toLowerCase()?[2,[]]:[2,d]}}))}))},e.prototype.getGlobalHeadingSuggestions=function(t,e){var n,i;return D(this,void 0,Promise,(function(){var r,o,s,a,l,c,u,h,p,d,f,g,m;return A(this,(function(v){switch(v.label){case 0:r=this.app.metadataCache,o=[],s=LT(e),a=0,l=r.getCachedFiles(),v.label=1;case 1:if(!(a<l.length))return[3,14];if(c=l[a],t.isCancelled())return[3,14];if(!((u=this.app.vault.getAbstractFileByPath(c))instanceof cb)||"md"!==u.extension)return[3,13];if(!(h=r.getCache(c))||!h.headings||0===h.headings.length)return[3,13];v.label=2;case 2:v.trys.push([2,7,8,13]),n=void 0,p=I(Ph(Th(h.headings),{maxDelay:0})),v.label=3;case 3:return[4,p.next()];case 4:if((d=v.sent()).done)return[3,6];if(f=d.value,t.isCancelled())return[3,6];(g=PT(s,f.heading))&&o.push({type:"heading",file:u,path:null,subpath:"#",level:f.level,heading:f.heading,score:g.score,matches:g.matches}),v.label=5;case 5:return[3,3];case 6:return[3,13];case 7:return m=v.sent(),n={error:m},[3,13];case 8:return v.trys.push([8,,11,12]),d&&!d.done&&(i=p.return)?[4,i.call(p)]:[3,10];case 9:v.sent(),v.label=10;case 10:return[3,12];case 11:if(n)throw n.error;return[7];case 12:return[7];case 13:return a++,[3,1];case 14:return[2,o]}}))}))},e.prototype.getBlockSuggestions=function(t,e,n){var i,r;return D(this,void 0,Promise,(function(){var o,s,a,l,c,u,h,p,d,f,g,m;return A(this,(function(v){switch(v.label){case 0:return o=this.app.metadataCache,s=this.context.file,(a=o.getFirstLinkpathDest(e,s.path))&&"md"===a.extension?[4,o.blockCache.getForFile(t,a)]:[2,[]];case 1:if(!(l=v.sent()))return[2,[]];c=l.content,u=n.toLowerCase().split(" "),h=[],v.label=2;case 2:v.trys.push([2,7,8,13]),p=I(Ph(Th(l.blocks),{maxDelay:0})),v.label=3;case 3:return[4,p.next()];case 4:if((d=v.sent()).done)return[3,6];if(f=d.value,t.isCancelled())return[3,6];(g=this.matchBlock(s,a,f,e,c,u))&&h.push(g),v.label=5;case 5:return[3,3];case 6:return[3,13];case 7:return m=v.sent(),i={error:m},[3,13];case 8:return v.trys.push([8,,11,12]),d&&!d.done&&(r=p.return)?[4,r.call(p)]:[3,10];case 9:v.sent(),v.label=10;case 10:return[3,12];case 11:if(i)throw i.error;return[7];case 12:return[7];case 13:return[2,h]}}))}))},e.prototype.getGlobalBlockSuggestions=function(t,e){var n,i;return D(this,void 0,Promise,(function(){var r,o,s,a,l,c,u,h,p,d,f,g,m,v;return A(this,(function(y){switch(y.label){case 0:r=this.app.metadataCache,o=this.context.file,s=e.toLowerCase().split(" "),a=[],y.label=1;case 1:y.trys.push([1,6,7,12]),l=I(Ph(r.blockCache.getAll(t),{batchSize:1,maxDelay:0})),y.label=2;case 2:return[4,l.next()];case 3:if((c=y.sent()).done)return[3,5];if(u=c.value,t.isCancelled())return[3,5];if(h=u.file,p=u.content,"md"!==h.extension)return[3,4];for(d=0,f=u.blocks;d<f.length;d++)g=f[d],(m=this.matchBlock(o,h,g,null,p,s))&&a.push(m);y.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return v=y.sent(),n={error:v},[3,12];case 7:return y.trys.push([7,,10,11]),c&&!c.done&&(i=l.return)?[4,i.call(l)]:[3,9];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(n)throw n.error;return[7];case 11:return[7];case 12:return[2,a]}}))}))},e.prototype.matchBlock=function(t,e,n,i,r,o){if(e===t&&n.node.position.start.line-1<=this.context.start.line&&n.node.position.end.line-1>=this.context.start.line)return null;var s=IT(o,n.display.toLowerCase()),a=s?-(s.length+(s.length>0?s[0][0]/10:0)):0,l=null,c=n.node.id;return c&&String.isString(c)&&(l=IT(o,c.toLowerCase()))&&(a=0),s||l?{type:"block",file:e,path:i,content:r,display:n.display,node:n.node,score:a,matches:s,idMatch:l}:null},e.prototype.getFileSuggestions=function(t,e){var n,i;return D(this,void 0,Promise,(function(){var r,o,s,a,l,c,u,h,p,d,f,g,m;return A(this,(function(v){switch(v.label){case 0:if((r=this.fileSuggestions)||(r=this.fileSuggestions=this.app.metadataCache.getLinkSuggestions()),o=[],""===e){for(s=0,a=r;s<a.length;s++)h=a[s],(p=h.file)?(d=h.alias)?o.push({type:"alias",alias:d,file:p,path:h.path,score:p.stat.mtime,matches:null}):o.push({type:"file",file:p,path:h.path,score:p.stat.mtime,matches:null}):o.push({type:"linktext",path:h.path,score:0,matches:null});return[2,o.sort(tN)]}l=r.length<1e4?DT(e):NT(e),v.label=1;case 1:v.trys.push([1,6,7,12]),c=I(Ph(Th(r),{maxDelay:0})),v.label=2;case 2:return[4,c.next()];case 3:if((u=v.sent()).done)return[3,5];if(h=u.value,t.isCancelled())return[3,5];(p=h.file)?(d=h.alias)?(f=l(d))&&o.push({type:"alias",alias:d,file:h.file,path:h.path,score:f.score,matches:f.matches}):(f=iN(l,h.path))&&o.push({type:"file",file:h.file,path:h.path,score:f.score,matches:f.matches}):(f=l(h.path))&&o.push({type:"linktext",path:h.path,score:f.score,matches:f.matches}),v.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return g=v.sent(),n={error:g},[3,12];case 7:return v.trys.push([7,,10,11]),u&&!u.done&&(i=c.return)?[4,i.call(c)]:[3,9];case 8:v.sent(),v.label=9;case 9:return[3,11];case 10:if(n)throw n.error;return[7];case 11:return[7];case 12:return 1===o.length&&"file"===(m=o[0]).type&&m.file.name.toLowerCase()===e.toLowerCase()?[2,[]]:[2,o]}}))}))},e.prototype.selectSuggestion=function(t,e){var n=this,i=this.context;if(this.close(),i){var r=i.editor,o=i.start,s=i.end,a=i.file,l=[],c=null,u="",h="",p="",d=e instanceof KeyboardEvent?Ob(e):"",f=this.app.vault.getConfig("useMarkdownLinks"),g=a,m=!f,v=function(t,e){return null!==e?e:t.path===g.path?"":n.app.metadataCache.fileToLinktext(t,g.path,m)},y=r.getLine(s.line).substr(s.ch).match(/^(\s*)(\|)?(.*?)(]])/);if("none"!==t.type){if("file"===t.type)u=t.file.basename,p=this.app.metadataCache.fileToLinktext(t.file,g.path,m);else if("alias"===t.type)h=u=t.alias,p=this.app.metadataCache.fileToLinktext(t.file,g.path,m);else if("linktext"===t.type)u=t.path,p=t.path;else if("heading"===t.type){var b=rA(t.heading);u=b,p=(w=v(t.file,t.path))+t.subpath+b}else if("block"===t.type){u="";var w=v(t.file,t.path),k=t.node;if(k.id)p=w+"#^"+k.id;else{var C=Tt(6);p=w+"#^"+C;var x=t.file,S=t.content,E=k.position.start.offset,M=k.position.end.offset,L=0,D="paragraph"===k.type||"listItem"===k.type,A="^"+C;if(D){if(A=" "+A,"listItem"===k.type){var T=k.children;if(T&&T.length>1){var P=T[T.length-1],O=T[T.length-2];"list"===P.type&&(M=O.position.end.offset)}}}else A="\n\n"+A,L=2;if(g!==x)D||"\n"===S.charAt(M)&&"\n"===S.charAt(M+1)||(A+="\n",L++),S=S.slice(0,M)+A+S.slice(M),this.app.vault.modify(x,S);else{var F=S.substring(E,M);if(""===F)return void this.close();for(var I=r.getValue(),N=0,B=-99999;;){var R=I.indexOf(F,N);if(-1===R)break;Math.abs(E-R)<Math.abs(E-B)&&(B=R),N=R+F.length}if(B>=0){var z=eh(I,[B+F.length])[0];!D&&r.getLine(z.line+1)&&(A+="\n",L++),l.push({from:z,text:A}),L>0&&(z.line<s.line||z.line===s.line&&z.ch<s.ch)&&(o.line+=L,s.line+=L)}}}}if(y&&!y[0].contains("[[")&&(y[2]&&!h&&(h=y[3],u||(u=h)),s=Ku(s,y[0].length)),f&&"#"!==d&&"^"!==d)o=Ku(o,-2),p="["+u+"]("+rg(p)+")",l.push({from:o,to:s,text:p}),c=u?{from:Ku(o,p.length)}:{from:Ku(o,1)};else{"#"===d&&(p+="#","file"===t.type&&Ut.contains(t.file.extension)&&(p+="page=")),"^"===d&&(p+="^"),h&&(p+="|"+h),p+="]]",l.push({from:o,to:s,text:p});var H=p.length;"Tab"===d?(H-=2,h&&(c={from:Ku(o,H),to:Ku(o,H-h.length)})):"#"!==d&&"^"!==d||(H-=2,h&&(H-=h.length+1)),c||(c={from:Ku(o,H)})}r.transaction({changes:l,selection:c}),setTimeout((function(){return r.focus()}))}else"Enter"!==d&&"Tab"!==d||(s=Ku(s,y[0].length),r.setSelection(s))}},e.prototype.close=function(){t.prototype.close.call(this),this.fileSuggestions=null,this.runnable&&(this.runnable.cancel(),this.runnable=null)},e}(ZI);function iN(t,e){var n=Kt(e),i=t(n);return i?(FT(i.matches,e.length-n.length),i):((i=t(e))&&(i.score-=1),i)}var rN=/(^|\s)#[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]*$/g,oN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.onTrigger=function(t,e,n){var i=t.line,r=e.getLine(i),o=r.substr(0,t.ch);if(o.match(rN)&&"#"!==r.substr(t.ch,1)){var s=o.lastIndexOf("#"),a=o.substr(s+1);return{start:{line:i,ch:s},end:{line:i,ch:t.ch},query:a}}return null},e.prototype.renderSuggestion=function(t,e){BT(e,t.tag,t)},e.prototype.selectSuggestion=function(t){var e=this.context;if(this.close(),e){var n=e.editor,i=e.start,r=e.end;n.transaction({changes:[{from:i,to:r,text:t.tag+" "}]}),setTimeout((function(){return n.focus()}))}},e.prototype.getSuggestions=function(t){var e=t.query;e=e.toLowerCase();var n=this.app.metadataCache.getTags(),i=[],r=[e];for(var o in n)if(wt(n,o))if(""===e)i.push({tag:o,score:0,matches:null});else{var s=IT(r,o.toLowerCase());s&&i.push({tag:o,score:AT(s,e.length,o.length,0),matches:s})}return i.sort((function(t,e){return e.score-t.score})),i},e}(ZI),sN=function(){function t(t){this.suggests=[],this.currentSuggest=null,this.addSuggest(new nN(t)),this.addSuggest(new oN(t))}return t.prototype.addSuggest=function(t){this.suggests.push(t)},t.prototype.removeSuggest=function(t){this.currentSuggest===t&&this.close(),this.suggests.remove(t)},t.prototype.trigger=function(t,e,n){if(t.hasFocus()){for(var i=0,r=this.suggests;i<r.length;i++){var o=r[i];if(o.trigger(t,e,n))return void(n&&this.setCurrentSuggest(o))}this.close()}},t.prototype.setCurrentSuggest=function(t){var e=this.currentSuggest;e!==t&&(e&&e.close(),this.currentSuggest=t)},t.prototype.isShowingSuggestion=function(){var t=this.currentSuggest;return t&&t.isOpen},t.prototype.reposition=function(){var t=this.currentSuggest;t&&t.isOpen&&t.updatePosition()},t.prototype.close=function(){this.setCurrentSuggest(null)},t}(),aN=function(t){function e(e){var n=t.call(this,e)||this;n.titleEl.setText(Ee("interface.label-debug-info"));var i=n.contentEl,r=n.infoTextEl=i.createEl("textarea",{cls:"debug-textarea"});r.spellcheck=!1;var o=e.account,s="",a="";s+="SYSTEM INFO:\n",le((function(t){var e=t.ipcRenderer.sendSync("version");a=t.remote.app.getVersion(),s+="\tObsidian version: v"+e+"\n",s+="\tInstaller version: v"+a+"\n"}));var l=o.token?"logged in":"not logged in";if(s+="\tLogin status: "+l+"\n",o.token){var c=o.license||"none";s+="\tCatalyst license: "+c+"\n"}var u="";le((function(t){u=t.ipcRenderer.sendSync("insiderBuild",null)?"on":"off",s+="\tInsider build toggle: "+u+"\n"}));var h=e.vault.getConfig("livePreview")?"on":"off",p=e.vault.getConfig("legacyEditor")?"on":"off";s+="\tLive preview: "+h+"\n",s+="\tLegacy editor: "+p+"\n";var d="obsidian"===e.getTheme()?"dark":"light";s+="\tBase theme: "+d+"\n";var f=e.customCss.theme||"none";s+="\tCommunity theme: "+f+"\n";var g=e.customCss.enabledSnippets.size;s+="\tSnippets enabled: "+g+"\n";var m=e.plugins.isEnabled()?"off":"on";s+="\tSafe mode: "+m+"\n";var v=0;if(e.plugins.isEnabled()){var y=e.plugins.manifests,b=Object.keys(y),w=e.plugins.plugins;s+="\tPlugins installed: "+b.length+"\n",v=Object.keys(w).length,s+="\tPlugins enabled: "+v+"\n";var k=1;for(var C in w)w.hasOwnProperty(C)&&(s+="\t\t"+k+": "+w[C].manifest.name+"\n",k++)}s+="\nRECOMMENDATIONS:\n";var x="";return yF(a,"0.11.0")&&(x+="\tUpdate installer: installer version too low, please download from https://obsidian.md/download and reinstall.\n"),("none"!==f||g>0)&&(x+="\tCustom theme: for cosmetic issues, please try to make the issue happen in the help vault or disable community theme and snippets.\n"),"off"===m&&v>0&&(x+="\tCommunity plugins: for bugs, please try to make the issue happen in the help vault or disable community plugins.\n"),""===x&&(x="\tnone\n"),s+=x,r.value=s,i.createDiv("modal-button-container",(function(t){t.createEl("button",{text:Ee("interface.start-screen.option-open-help-vault")},(function(t){t.addEventListener("click",(function(){return D(n,void 0,void 0,(function(){return A(this,(function(t){return e.openHelp(),[2]}))}))}))})),t.createEl("button",{text:Ee("interface.label-copy")},(function(t){t.addEventListener("click",(function(){return D(n,void 0,void 0,(function(){return A(this,(function(t){return Ae(r.value),new jb(Ee("interface.copied",{item:Ee("interface.label-debug-info")})),[2]}))}))}))}))})),n}return M(e,t),e}(KD),lN=(function(){function t(){}t.encodeUrlQuery=function(t){if(!t)return"";var e=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&(!0===t[n]?e.push(encodeURIComponent(n)):e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n])));return e.join("&")},t.decodeUrlQuery=function(t){var e={};if(!t||""===t.trim())return e;for(var n=t.split("&"),i=0;i<n.length;i++){var r=n[i].split("=");if(r.length>=1&&r[0]){var o=decodeURIComponent(r[0]);2===r.length?e[o]=decodeURIComponent(r[1]):e[o]=!0}}return e},t.decodeUrl=function(e){e||(e="");var n=e.split("#"),i=n.length>1?n[1]:"",r=n[0].split("?"),o=r.length>1?r[1]:"";return{path:r[0],query:t.decodeUrlQuery(o),hash:t.decodeUrlQuery(i)}}}(),"obsidian://");function cN(t){if(!t.startsWith(lN))return null;console.log("Received callback URL",t);var e={};if((t=t.substr(lN.length)).startsWith("vault/")){var n=(t=t.substr("vault/".length)).split("/").map((function(t){return decodeURIComponent(t)}));e.action="open",e.vault=n[0],e.file=n.slice(1).join("/")}else{var i="",r="",o=t.indexOf("?"),s=t.indexOf("#",Math.max(0,o));s>=0&&(r=t.substr(s+1),t=t.substr(0,s),e.hash=r),o>=0&&(i=t.substr(o+1),t=t.substr(0,o));for(var a=0,l=i.split("&");a<l.length;a++){var c="true";(n=l[a].split("=")).length>1&&(c=decodeURIComponent(n[1])),e[decodeURIComponent(n[0])]=c}e.action=t.replace(/\/+$/g,"")}return e}var uN=function(){function t(t,e){var n=this;this.workspace=null,this.containerEl=null,this.ribbonActionsEl=null,this.collapseButtonEl=null,this.ribbonSettingEl=null,this.isMobile=!1,this.workspace=t;var i=this.containerEl=createDiv("workspace-ribbon side-dock-ribbon");i.addClass("mod-"+e),this.collapseButtonEl=i.createDiv("workspace-ribbon-collapse-btn",(function(t){var i=Ee("interface.sidebar-collapse");"left"===e?($e(t,i,{placement:"right"}),Ty(t,Yg)):"right"===e&&($e(t,i,{placement:"left"}),Ty(t,Jg)),t.addEventListener("click",(function(){"left"===e?n.workspace.leftSplit.toggle():"right"===e&&n.workspace.rightSplit.toggle()}))})),"left"===e&&(this.ribbonActionsEl=i.createDiv("side-dock-actions"),this.ribbonSettingEl=i.createDiv("side-dock-settings"),By.isMobile||vh(i));var r=t.app;if("left"===e){var o=this.makeRibbonActionButton(zm,Ee("interface.switch-vault"),(function(t){t.stopPropagation(),r.openVaultChooser()}));o.addEventListener("mouseover",(function(){Ty(o,Hm,18)})),o.addEventListener("mouseout",(function(){Ty(o,zm,18)})),this.ribbonSettingEl.appendChild(o);var s=this.makeRibbonActionButton(Rm,Ee("interface.help"),(function(t){t.stopPropagation(),r.openHelp()}));this.ribbonSettingEl.appendChild(s);var a=this.makeRibbonActionButton(nm,Ee("interface.settings"),(function(t){t.stopPropagation(),r.setting.open()}));this.ribbonSettingEl.appendChild(a)}}return t.prototype.addRibbonActionButton=function(t,e,n){var i=this.makeRibbonActionButton(t,e,n);return this.ribbonActionsEl.insertBefore(i,null),i},t.prototype.setCollapsedState=function(t){this.containerEl.toggleClass("is-collapsed",t),$e(this.collapseButtonEl,Ee(t?"interface.sidebar-expand":"interface.sidebar-collapse"))},t.prototype.hide=function(){this.containerEl.addClass("is-hidden")},t.prototype.show=function(){this.containerEl.removeClass("is-hidden")},t.prototype.makeRibbonActionButton=function(t,e,n){var i=createDiv("side-dock-ribbon-action");return i.onClickEvent(n),$e(i,e,{placement:"right"}),By.isMobile?Ty(i,t,22):Ty(i,t,18),i},t}(),hN=function(t){function e(e,n){var i=t.call(this)||this;i.leftSplit=null,i.rightSplit=null,i.leftRibbon=null,i.rightRibbon=null,i.rootSplit=null,i.activeLeaf=null,i.containerEl=null,i.layoutReady=!1,i.mobileFileInfos=[],i.closeables=[],i.backlinkInDocument=!1,i.lastOpenFiles=[],i.protocolHandlers=new Map,i.onLayoutReadyCallbacks=[],i.undoHistory=[],i.isMobileDimmed=!1,i.requestUpdateClosable=De(i.updateClosable.bind(i),0),i.hoverLinkSources={},i.editorExtensions=[],i.app=e,i.containerEl=n,i.leftRibbon=new uN(i,"left"),i.rightRibbon=new uN(i,"right"),i.requestSaveLayout=De(i.saveLayout.bind(i),1e3),i.requestSaveHistory=De(i.updateHistory.bind(i),100),i.requestUpdateGroups=De(i.updateGroups.bind(i),0),i.requestResize=De(i.onResize.bind(i),0),i.requestActiveLeafEvents=De(i.activeLeafEvents.bind(i),0),i.editorSuggest=new sN(e),window.addEventListener("resize",i.requestResize.bind(i)),window.addEventListener("popstate",(function(t){var e=t.state;if(t.preventDefault(),e){var n=i.getLeafById(e.leaf),r=JSON.parse(e.state),o=JSON.parse(e.eState);n&&!n.pinned&&n.view||(n=i.getUnpinnedLeaf(r.type)),r.popstate=!0,r.active=!0,n.setViewState(r,o)}})),document.addEventListener("click",i.onDocumentClick.bind(i)),i.app.vault.on("rename",(function(t,e){if(t instanceof cb){var n=i.lastOpenFiles,r=n.indexOf(e);-1!==r&&(n[r]=t.path,i.requestSaveLayout())}})),i.app.vault.on("config-changed",(function(){i.updateOptions()})),i.on("file-open",(function(t){t&&i.recordMostRecentOpenedFile(t)})),i.on("file-menu",(function(t,e){e instanceof cb&&t.addItem((function(t){return t.setTitle(Ee("commands.copy-url")).setIcon(um).onClick((function(){return i.app.copyObsidianUrl(e)}))}))})),i.on("quit",(function(t){i.iterateAllLeaves((function(e){var n=e.view;n&&n instanceof rR&&n.data!==n.lastSavedData&&t.addPromise(n.save())}))})),i.on("editor-menu",(function(t,e,n){var r=e.getCursor().line,o=og(e.getLine(r));if(null!==o){var s=n.file;t.addItem((function(t){return t.setTitle(Ee("interface.menu.rename-heading")).setIcon($g).onClick((function(){var t=e.getCursor().line,a=n.file;s===a&&r===t&&new aR(i.app,r,o,e,s).open()}))}))}})),i.app.commands.addCommand({id:"editor:save-file",name:Ee("commands.save-file"),callback:function(){var t=i.app.workspace.getActiveViewOfType(rR);t&&t.save()},hotkeys:[GA(["Mod"],"S")]}),i.app.commands.addCommand({id:"editor:follow-link",name:Ee("commands.follow-cursor-link"),icon:dv,checkCallback:function(t){var e=i.getActiveViewOfType(rR);return!(!e||"source"!==e.getMode())&&(t||e.followLinkUnderCursor(!1),!0)},hotkeys:[GA(["Alt"],"Enter")]}),i.app.commands.addCommand({id:"editor:open-link-in-new-leaf",name:Ee("commands.open-cursor-link-in-new-pane"),icon:dv,checkCallback:function(t){var e=i.getActiveViewOfType(rR);return!!e&&(t||e.followLinkUnderCursor(!0),!0)},hotkeys:[GA(["Mod","Alt"],"Enter")]});var r=function(t,e){i.app.commands.addCommand({id:"editor:focus-"+t,name:e,checkCallback:function(e){var n=i.getAdjacentLeafInDirection(i.activeLeaf,t);return!!n&&(e||(ih(),i.setActiveLeaf(n,!0,!0)),!0)}})};if(r("top",Ee("commands.navigate-pane-above")),r("bottom",Ee("commands.navigate-pane-below")),r("left",Ee("commands.navigate-pane-left")),r("right",Ee("commands.navigate-pane-right")),i.app.commands.addCommand({id:"workspace:toggle-pin",name:Ee("commands.toggle-pin"),icon:Nm,checkCallback:function(t){var e=i.activeLeaf;return!(!e||e.view instanceof nI)&&(t||e.togglePinned(),!0)}}),i.app.commands.addCommand({id:"workspace:split-vertical",name:Ee("commands.split-vertically"),icon:Sm,callback:function(){i.duplicateLeaf(i.activeLeaf,"vertical")}}),i.app.commands.addCommand({id:"workspace:split-horizontal",name:Ee("commands.split-horizontally"),icon:xm,callback:function(){i.duplicateLeaf(i.activeLeaf,"horizontal")}}),i.app.commands.addCommand({id:"workspace:edit-file-title",name:Ee("commands.edit-file-title"),icon:$g,checkCallback:function(t){var e=i.activeLeaf;if(e&&e.view instanceof _b)return t||e.setEphemeralState({rename:"all"}),!0},hotkeys:[GA([],"F2")]}),i.app.commands.addCommand({id:"workspace:copy-path",name:Ee("commands.copy-path"),icon:Kv,checkCallback:function(t){var e=i.getActiveFile();if(e)return t||(Ae(e.path),new jb(Ee("interface.copied",{item:""}))),!0}}),i.app.commands.addCommand({id:"workspace:copy-url",name:Ee("commands.copy-url"),icon:Kv,checkCallback:function(t){var e=i.getActiveFile();if(e)return t||i.app.copyObsidianUrl(e),!0}}),i.app.commands.addCommand({id:"workspace:undo-close-pane",name:Ee("commands.undo-close-pane"),icon:vv,checkCallback:function(t){var e=i.undoHistory;if(e.length>0){if(!t){var n=e.shift();i.getLeaf(!0).setViewState(n.state,n.eState)}return!0}},hotkeys:[GA(["Mod","Shift"],"T")]}),By.isDesktopApp&&i.app.commands.addCommand({id:"workspace:export-pdf",name:Ee("commands.export-pdf"),checkCallback:function(t){if(!By.isDesktopApp)return!1;var e=i.getActiveViewOfType(rR);return e?(t||e.printToPdf(),!0):void 0}}),i.app.commands.addCommand({id:"editor:rename-heading",name:Ee("interface.menu.rename-heading"),icon:$g,editorCheckCallback:function(t,e,n){var r=e.getCursor().line,o=og(e.getLine(r));if(o){if(!t){var s=n.file;new aR(i.app,r,o,e,s).open()}return!0}}}),i.registerObsidianProtocolHandler("open",(function(t){if(t.file){var e=ne(t.file),n=i.app.metadataCache.getFirstLinkpathDest(e,"");if(n&&n instanceof cb)i.getLeaf().openFile(n),new jb(Ee("interface.msg-open-file-through-uri",{path:n.path}));else new jb(Ee("interface.msg-file-not-found-through-uri",{name:t.file}))}})),i.registerObsidianProtocolHandler("search",(function(t){var e=i.app.internalPlugins.getPluginById("global-search");e&&e.instance.openGlobalSearch(t.query)})),i.registerObsidianProtocolHandler("new",(function(t){return D(i,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c;return A(this,(function(u){switch(u.label){case 0:return e=null,n=this.app.fileManager,i=this.app.vault,t.file?(r=t.file,o=$t(r),c=void 0,""!==o?[3,1]:(c=i.getRoot(),[3,3])):[3,5];case 1:return(c=i.getAbstractFileByPathInsensitive(o))?[3,3]:[4,i.createFolder(o)];case 2:u.sent(),c=i.getAbstractFileByPathInsensitive(o),u.label=3;case 3:return c instanceof ub?[4,n.createNewMarkdownFile(c,Kt(r))]:[2];case 4:return e=u.sent(),[3,7];case 5:return s=t.name||"",a="",(l=this.getActiveFile())&&(a=l.path),c=n.getNewFileParent(a),[4,n.createNewMarkdownFile(c,s)];case 6:e=u.sent(),u.label=7;case 7:return e?t.content?[4,i.modify(e,t.content)]:[3,9]:[3,11];case 8:u.sent(),u.label=9;case 9:return t.silent?[3,11]:[4,this.getLeaf().openFile(e,{active:!0,state:{mode:"source"},eState:{rename:"all"}})];case 10:u.sent(),u.label=11;case 11:return[2]}}))}))})),i.registerObsidianProtocolHandler("show-plugin",(function(t){t.id&&new KN(i.app,t.id).open()})),i.registerObsidianProtocolHandler("debug-info",(function(t){new aN(e).open()})),i.registerObsidianProtocolHandler("hook-get-address",(function(){var t=i.getActiveFile();if(t){var e=i.app.getObsidianUrl(t);Ae("["+t.basename+"]("+e+")")}})),setInterval(i.updateHistory.bind(i),1e3),GF){var o=i;YF.addListener("backButton",(function(){var t=o.closeables;if(t.length>0)t.last().close();else{var e=o.leftSplit;if(e instanceof uI&&e.isFullscreen)e.toggleTabFullscreen();else{var n=o.rightSplit;if(n instanceof uI&&n.isFullscreen)n.toggleTabFullscreen();else if(e.collapsed||e instanceof uI&&e.isPinned)if(n.collapsed||n instanceof uI&&n.isPinned){var i=arguments[0];!i||i.canGoBack?window.history.back():YF.exitApp()}else n.collapse();else e.collapse()}}}))}if(By.isMobile){var s=document.body,a=[];s.addEventListener("touchstart",(function(t){if(!(t.touches.length>1)){var e=t.touches[0];if("stylus"!==e.touchType){var n=e.clientX,r=e.clientY,o=document.elementFromPoint(n,r);if(!(o instanceof HTMLCanvasElement)&&i.containerEl.contains(o)){var l=e.identifier,c=Date.now(),u=!1,h="x",p=e.clientX,d=e.clientY,f=c,g=0,m=0,v=0;if(a.length>0)for(var y=0,b=a;y<b.length;y++){b[y].cancel()}a=[];var w=function(t){for(var e=t.changedTouches,n=0;n<e.length;n++){var i=e[n];if(i.identifier===l)return i}return null},k=function(t){if(w(t)&&(S(),0!==a.length)){var e,i;"x"===h?(e=p-n,i=g/v*500):(e=d-r,i=m/v*500);for(var o=0,s=a;o<s.length;o++){s[o].finish(p,d,i+e)}a=[]}},C=function(t){if(w(t)&&(S(),0!==a.length)){for(var e=0,n=a;e<n.length;e++){n[e].cancel()}a=[]}},x=function(t){var e=w(t);if(e){var s=e.clientX,l=e.clientY;if(!u){if(Date.now()-c>200)return void S();var y=Math.abs(s-n),b=Math.abs(l-r),k=Math.max(y,b);if(k<10)return;u=!0;for(var C=o,x="x"===(h=y===k?"x":"y")?s-n:l-r;C;){var E="x"===h?C.scrollWidth-C.clientWidth:C.scrollHeight-C.clientHeight;if(E>0){var M=getComputedStyle(C),L="x"===h?M.overflowX:M.overflowY;if("auto"===L||"scroll"===L){var D="x"===h?C.scrollLeft:C.scrollTop;if(x>0&&D>0||x<0&&D<E-1)return void S()}}C=C.parentElement}if(window.getSelection().toString())return void S();i.trigger("swipe",{points:t.touches.length,targetEl:o,startX:n,startY:r,x:s,y:l,direction:h,registerCallback:function(t){return a.push(t)}})}if(0!==a.length){KF&&t.preventDefault(),g=s-p,m=l-d,p=s,d=l;var A=Date.now();v=A-f,f=A;for(var T=0,P=a;T<P.length;T++){P[T].move(s,l)}}else S()}},S=function(){s.removeEventListener("touchcancel",C),s.removeEventListener("touchend",k),s.removeEventListener("touchmove",x)};s.addEventListener("touchcancel",C),s.addEventListener("touchend",k),s.addEventListener("touchmove",x,{passive:!KF})}}}})),i.on("swipe",(function(t){if(!(t.points>1||"y"!==t.direction||t.y<t.startY)&&i.rootSplit.containerEl.contains(t.targetEl)){var e=i.app.vault.getConfig("mobilePullAction"),n=i.app.commands.findCommand(e),r=n?n.name:"Configure pull action",o=document.body.createDiv({cls:"pull-action pull-down-action",text:r});o.onClickEvent((function(){o.detach()}));var s=o.offsetHeight;t.registerCallback({move:function(e,n){var i=(n-t.startY)/s;i=Math.clamp(i,0,1),o.toggleClass("mod-activated",1===i),o.style.transform="translateY("+(i-1)*s+"px)"},cancel:function(){o.detach()},finish:function(e,i,r){var a=(i-t.startY)/s;a=Math.clamp(a,0,1),kb(o,new mb({duration:200*a}).addProp("transform",null,"translateY("+-s+"px)",""),(function(){o.detach()})),r>Math.min(100,s)&&(n?lR(n):new jb("Action not configured"))}})}})),i.on("swipe",(function(t){if(!(t.points<2||"x"!==t.direction)&&i.rootSplit.containerEl.contains(t.targetEl)){var e,n=t.x>t.startX;if(e=n?i.app.commands.findCommand("app:go-back"):i.app.commands.findCommand("app:go-forward")){var r=document.body.createDiv({cls:"pull-action pull-out-action",text:e.name});r.onClickEvent((function(){r.detach()})),n?r.style.left="0":r.style.right="0";var o=n?1:-1,s=r.offsetWidth;t.registerCallback({move:function(e){var n=Math.clamp((e-t.startX)*o/s,0,1);r.toggleClass("mod-activated",1===n),r.style.transform="translateX("+-(1-n)*s*o+"px)"},cancel:function(){r.detach()},finish:function(e,a,l){var c=Math.clamp((e-t.startX)*o/s,0,1);kb(r,new mb({duration:200*c}).addProp("transform",null,"translateX("+-s*o+"px)",""),(function(){r.detach()})),l*o/s>.5&&(n?i.app.commands.executeCommandById("app:go-back"):i.app.commands.executeCommandById("app:go-forward"))}})}}}))}i.registerHoverLinkSource("search",{display:Ee("plugins.page-preview.label-source-search"),defaultMod:!0}),i.registerHoverLinkSource("preview",{display:Ee("plugins.page-preview.label-source-preview"),defaultMod:!1}),i.registerHoverLinkSource("editor",{display:Ee("plugins.page-preview.label-source-editor"),defaultMod:!0});var l=CodeMirror.getMode;return CodeMirror.getMode=function(t,e){var n=l.call(CodeMirror,t,e);return!e||n&&"null"!==n.name||(CodeMirror.getMode=l,Nh.then((function(){for(var t=0,e=i.getLeavesOfType(rR.VIEW_TYPE);t<e.length;t++){var n=e[t];if(n.view instanceof rR)if(n.view.editMode){var r=n.view.editMode.editor;r.replaceRange(" ",{line:0,ch:0}),r.replaceRange("",{line:0,ch:0},{line:0,ch:1})}else{var o=n.view.sourceMode.cmEditor;o.setOption("mode",o.getOption("mode"))}}}))),n},i}return M(e,t),e.prototype.pushClosable=function(t){var e=this.closeables;e.contains(t)||(e.push(t),this.requestUpdateClosable())},e.prototype.popClosable=function(t){var e=this.closeables;e.contains(t)&&(e.remove(t),this.requestUpdateClosable())},e.prototype.updateClosable=function(){if(By.isMobile){var t=this.closeables,e=this.isMobileDimmed,n=t.some((function(t){return t.dimBackground||void 0===t.dimBackground}));!n&&e&&(this.isMobileDimmed=!1,kb(this.containerEl,new mb({duration:100,fn:"linear"}).addProp("borderRadius","10px","").addProp("transform",null,""))),n&&!e&&(this.isMobileDimmed=!0,kb(this.containerEl,new mb({duration:100,fn:"linear"}).addProp("borderRadius","","10px").addProp("transform","","scale(0.95, 0.95)")))}},e.prototype.loadLayout=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f;return A(this,(function(g){switch(g.label){case 0:t=this.app.vault,e={},g.label=1;case 1:return g.trys.push([1,3,,4]),i=(n=JSON).parse,[4,t.adapter.read(t.configDir+"/workspace")];case 2:return e=i.apply(n,[g.sent()]),[3,4];case 3:return g.sent(),[3,4];case 4:return e.hasOwnProperty("lastOpenFiles")&&(this.lastOpenFiles=e.lastOpenFiles),[4,this.setLayout(e)];case 5:for(g.sent(),this.trigger("layout-ready"),r=this.onLayoutReadyCallbacks,this.onLayoutReadyCallbacks=null,o=0,s=r;o<s.length;o++){a=s[o],l=a.pluginId,c=a.callback;try{c()}catch(t){console.error(t),l&&new jb("Failed to load plugin "+l)}}if("Obsidian Help"!==this.app.vault.getName())return[3,7];if(0===(u=this.app.vault.getRoot().children.filter((function(t){return t instanceof cb}))).length)return[2];if("md"!==Xt((h=u[0]).name))return[2];for(p=[],this.iterateRootLeaves((function(t){p.push(t)})),d=0,f=p;d<f.length;d++)f[d].detach();return[4,this.getUnpinnedLeaf().openFile(h,{active:!0,state:{mode:"source",source:!1}})];case 6:g.sent(),g.label=7;case 7:return[2]}}))}))},e.prototype.clearLayout=function(){return D(this,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return this.layoutReady=!1,t=[],this.iterateAllLeaves((function(e){t.push(e.open(null))})),[4,Promise.all(t)];case 1:return e.sent(),this.leftSplit.containerEl.detach(),this.rootSplit.containerEl.detach(),this.rightSplit.containerEl.detach(),this.rootSplit.component.unload(),this.leftSplit.component.unload(),this.rightSplit.component.unload(),this.rootSplit=null,this.leftSplit=null,this.rightSplit=null,[2]}}))}))},e.prototype.setLayout=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y;return A(this,(function(b){switch(b.label){case 0:return this.layoutReady=!1,e=this.app.vault,n=By.isMobile,(s=t.main)?(a=this,[4,this.deserializeLayout(s,null)]):[3,2];case 1:(i=a.rootSplit=b.sent())&&"vertical"!==i.direction&&(i.setDirection("vertical"),i.recomputeChildrenDimensions()),b.label=2;case 2:return(l=t.left)?(c=this,[4,this.deserializeLayout(l,"left")]):[3,4];case 3:(r=c.leftSplit=b.sent())&&r instanceof lI&&"horizontal"!==r.direction&&(r.setDirection("horizontal"),r.recomputeChildrenDimensions()),b.label=4;case 4:return(u=t.right)?(h=this,[4,this.deserializeLayout(u,"right")]):[3,6];case 5:(o=h.rightSplit=b.sent())&&o instanceof lI&&"horizontal"!==o.direction&&(o.setDirection("horizontal"),o.recomputeChildrenDimensions()),b.label=6;case 6:return i?[3,9]:(i=this.rootSplit=new sI(this,"vertical"),p=new cI(this.app),i.insertChild(0,p,!0),(d=this.getLastOpenFiles()).length>0?(f=d[0],(g=e.getAbstractFileByPath(f))&&g instanceof cb?[4,p.openFile(g)]:[3,8]):[3,8]);case 7:b.sent(),b.label=8;case 8:this.setActiveLeaf(p),b.label=9;case 9:return i.containerEl.addClass("mod-root"),r||(n?(r=this.leftSplit=new hI(this)).collapse():r=this.leftSplit=new lI(this,"horizontal","left")),o||(o=this.rightSplit=n?new pI(this):new lI(this,"horizontal","right")).collapse(),m=this.containerEl,By.isMobile?m.setChildrenInPlace([r.containerEl,i.containerEl,o.containerEl]):m.setChildrenInPlace([this.leftRibbon.containerEl,r.containerEl,i.containerEl,o.containerEl,this.rightRibbon.containerEl]),v=t.active,(y=this.getLeafById(v))&&this.setActiveLeaf(y,!1,!0),this.layoutReady=!0,this.onLayoutChange(),[2]}}))}))},e.prototype.onLayoutReady=function(t){null===this.onLayoutReadyCallbacks?t():this.onLayoutReadyCallbacks.push({pluginId:this.app.plugins.loadingPluginId,callback:t})},e.prototype.changeLayout=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return this.layoutReady?[4,this.clearLayout()]:[2];case 1:return e.sent(),[4,this.setLayout(t)];case 2:return e.sent(),[2]}}))}))},e.prototype.deserializeLayout=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o,s,a,l,c,u;return A(this,(function(h){switch(h.label){case 0:if("split"!==t.type)return[3,5];if(n=void 0,e){if(By.isMobile)return[2,null];i=n=new lI(this,t.direction,e,t.id),t.width&&i.setSize(t.width),t.collapsed&&i.collapse()}else n=new sI(this,t.direction,t.id);c=0,h.label=1;case 1:return c<t.children.length?[4,this.deserializeLayout(t.children[c],null)]:[3,4];case 2:(u=h.sent())?n.insertChild(c,u,!0):(t.children.splice(c,1),c--),h.label=3;case 3:return c++,[3,1];case 4:if(0===n.children.length&&!(n instanceof lI))return[2,null];for(c=0;c<t.children.length;c++)r=t.children[c].dimension,n.children[c].setDimension(r);return n.recomputeChildrenDimensions(),[2,n];case 5:if("tabs"!==t.type)return[3,10];o=new aI(this,t.id),c=0,h.label=6;case 6:return c<t.children.length?[4,this.deserializeLayout(t.children[c],null)]:[3,9];case 7:(u=h.sent())?o.insertChild(c,u,!0):(t.children.splice(c,1),c--),h.label=8;case 8:return c++,[3,6];case 9:return 0===o.children.length?[2,null]:(t.currentTab&&o.selectTabIndex(t.currentTab),o.recomputeChildrenDimensions(),[2,o]);case 10:return"leaf"!==t.type?[3,12]:(s=new cI(this.app,t.id),a=t.state||{},[4,s.setViewState(a)]);case 11:return h.sent(),s.view?(t.group&&s.setGroup(t.group),t.pinned&&s.togglePinned(),[2,s]):(s.detach(),[2,null]);case 12:if("mobile-drawer"!==t.type)return[3,17];if(!By.isMobile)return[2,null];l=void 0,"left"===e?l=new hI(this,t.id):"right"===e&&(l=new pI(this,t.id)),c=0,h.label=13;case 13:return c<t.children.length?[4,this.deserializeLayout(t.children[c],null)]:[3,16];case 14:(u=h.sent())?l.insertChild(c,u,!0):(t.children.splice(c,1),c--),h.label=15;case 15:return c++,[3,13];case 16:return l.currentTab=t.currentTab,l.recomputeChildrenDimensions(),t.pinned&&l.pinDrawer(),[2,l];case 17:return[2,null]}}))}))},e.prototype.getLayout=function(){var t={};t.main=this.rootSplit.serialize(),t.left=this.leftSplit.serialize(),t.right=this.rightSplit.serialize();var e=this.activeLeaf;return e&&(t.active=e.id),t},e.prototype.saveLayout=function(){return D(this,void 0,void 0,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:if(!this.layoutReady)return[2];t=this.app.vault,(e=this.getLayout()).lastOpenFiles=this.lastOpenFiles,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.adapter.write(t.configDir+"/workspace",JSON.stringify(e,null,2))];case 2:return n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.updateGroups=function(){var t={};for(var e in this.iterateAllLeaves((function(e){var n=e.group;n&&(t[n]=(t[n]||0)+1)})),t)if(t.hasOwnProperty(e)&&1===t[e])for(var n=0,i=this.getGroupLeaves(e);n<i.length;n++){i[n].setGroup(null)}},e.prototype.onDragLeaf=function(t,e){var n=this;if(0===t.button&&!By.isMobile){t.preventDefault();var i=this.containerEl,r=createEl("section","workspace-drop-overlay mod-drag"),o=createEl("section","workspace-fake-target-overlay");i.insertBefore(o,i.firstChild),i.insertBefore(r,i.firstChild);var s=this.containerEl.createDiv("drag-ghost mod-leaf",(function(t){t.createDiv("drag-ghost-icon",(function(t){Ty(t,e.getIcon(),14)})),t.createSpan({text:fF(e.getDisplayText(),60)})}));r.hide(),o.hide(),s.hide();var a=t.clientX,l=t.clientY,c=!1,u=null,h=function(t,e){return t instanceof lI?["left","right","top","bottom"]:e?["left","right"]:null},p=function(){u&&(u.style.opacity=null),r.hide(),o.hide()},d=function(t){t.preventDefault();var d=t.clientX,f=t.clientY;if(!c){var g=d-a,m=f-l;if(g*g+m*m<25)return;c=!0,s.show(),document.body.addClass("is-grabbing")}s.style.left=d+5+"px",s.style.top=f+5+"px";var v=n.getDropLocation(t);if(v){var y=v.target;if(y&&y!==e)if(y.getRoot()!==n.rootSplit||e.view instanceof Vb||e.view instanceof nI){var b=y.containerEl.getBoundingClientRect(),w=b.width,k=b.height,C=b.x,x=b.y,S=n.getDropDirection(t,b,h(y,v.sidedock),y);if(y!==e.parentSplit||"center"!==S&&1!==e.parentSplit.children.length){if(y===n.leftSplit&&n.leftSplit.collapsed)b=n.leftRibbon.containerEl.getBoundingClientRect();else if(y===n.rightSplit&&n.rightSplit.collapsed){if(b=n.rightRibbon.containerEl.getBoundingClientRect(),!n.rightRibbon.containerEl.offsetParent){var E=i.getBoundingClientRect();b={x:E.right-30,y:E.top,width:30,height:E.height}}}else y instanceof aI&&"center"===S&&(b=y.tabHeaderContainerEl.getBoundingClientRect());r.show(),r.style.transform="translate("+b.x+"px, "+b.y+"px)",r.style.width=b.width+"px",r.style.height=b.height+"px";var M,L,D,A,T=!1;if(y instanceof cI&&y.view&&y.view instanceof HI&&(T=!0),"center"===S||T)return u&&(u.style.opacity=null),void o.hide();"top"===S?(M=b.x,L=x+b.height,A=w,D=k-b.height):"left"===S?(M=C+b.width,L=b.y,A=w-b.width,D=k):"right"===S?(M=C,L=x,A=w-b.width,D=k):"bottom"===S&&(M=C,L=x,A=w,D=k-b.height),u&&y.containerEl===u||(u&&(u.style.opacity=null),o.innerHTML=y.containerEl.outerHTML,y.containerEl.style.opacity="0",u=y.containerEl),y.containerEl.style.opacity="center"===S?null:"0",o.toggle("center"!==S),o.toggleClass("is-in-sidebar",y.getRoot()!==n.rootSplit),o.style.transform="translate("+M+"px, "+L+"px)",o.style.width=A+"px",o.style.height=D+"px"}else p()}else p();else p()}else p()},f=function(t){if(document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",f),u&&(u.style.opacity=null),r.detach(),o.detach(),s.detach(),document.body.removeClass("is-grabbing"),c){var i=n.getDropLocation(t);if(i.target){var a=i.target;if(a&&a!==e){if(a===n.leftSplit){e.parentSplit.removeChild(e),e.setDimension(null);var l=new aI(n);return n.leftSplit.insertChild(-1,l),l.insertChild(-1,e),void n.requestResize()}if(a===n.rightSplit){e.parentSplit.removeChild(e),e.setDimension(null);l=new aI(n);return n.rightSplit.insertChild(-1,l),l.insertChild(-1,e),void n.requestResize()}if(a.getRoot()!==n.rootSplit||e.view instanceof Vb||e.view instanceof nI){var p=a.containerEl.getBoundingClientRect(),g=n.getDropDirection(t,p,h(a,i.sidedock),a);if(a!==e.parentSplit||"center"!==g&&1!==e.parentSplit.children.length){if(i.sidedock&&e.setGroupMember(null),i.sidedock&&a instanceof aI&&"center"===g)return e.parentSplit.removeChild(e),e.setDimension(null),a.insertChild(-1,e),a.selectTabIndex(a.children.length-1),void n.requestResize();var m=a.parentSplit;if(m&&m instanceof sI){var v=e.parentSplit,y="top"===g||"bottom"===g?"horizontal":"vertical";if(i.sidedock){l=new aI(n);n.splitLeaf(a,l,y,"left"===g||"top"===g),v.removeChild(e),e.setDimension(null),l.insertChild(0,e)}else if("center"===g){var b=v.children.indexOf(e),w=m.children.indexOf(a),k=e.dimension,C=a.dimension,x=new cI(n.app);m.replaceChild(w,x,!0),v.replaceChild(b,a,!0),m.replaceChild(w,e,!0),e.setDimension(C),a.setDimension(k),m.recomputeChildrenDimensions(),v!==m&&v.recomputeChildrenDimensions(),n.onLayoutChange()}else v.removeChild(e),e.setDimension(null),n.splitLeaf(a,e,y,"left"===g||"top"===g);n.requestResize()}else;}}}}}};document.addEventListener("mousemove",d),document.addEventListener("mouseup",f)}},e.prototype.onStartLink=function(t){var e=this,n=this.containerEl.createDiv("workspace-drop-overlay mod-link"),i=function(){n.hide(),document.body.removeClass("is-hovering-clickable")},r=function(r){r.preventDefault();var o=e.getDropLocation(r).target;if(o&&o!==t)if(o instanceof cI)if(o.view instanceof Vb||o.view instanceof nI){var s=o.containerEl.getBoundingClientRect();document.body.addClass("is-hovering-clickable"),n.show(),n.style.transform="translate("+s.x+"px, "+s.y+"px)",n.style.width=s.width+"px",n.style.height=s.height+"px"}else i();else i();else i()},o=function(n){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",o),i();var s=e.getDropLocation(n).target;s&&s!==t&&s instanceof cI&&(s.view instanceof Vb||s.view instanceof nI)&&t.setGroupMember(s)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",o)},e.prototype.getDropLocation=function(t){var e=this,n=e.leftRibbon,i=e.rightRibbon,r=e.leftSplit,o=e.rightSplit,s=e.rootSplit;return t.clientX<n.containerEl.offsetWidth?{target:r,sidedock:!0}:(i.containerEl.offsetParent?t.clientX>i.containerEl.getBoundingClientRect().x:t.clientX>this.containerEl.getBoundingClientRect().right-30)?{target:o,sidedock:!0}:lh(t,r.containerEl)?0===r.children.length?{target:r,sidedock:!0}:{target:this.recursiveGetTarget(t,r),sidedock:!0}:lh(t,o.containerEl)?0===o.children.length?{target:o,sidedock:!0}:{target:this.recursiveGetTarget(t,o),sidedock:!0}:lh(t,s.containerEl)?{target:this.recursiveGetTarget(t,s),sidedock:!1}:null},e.prototype.recursiveGetTarget=function(t,e){for(var n=0,i=e.children;n<i.length;n++){var r=i[n];if(lh(t,r.containerEl))return r instanceof aI?r:r instanceof oI?this.recursiveGetTarget(t,r):r}return null},e.prototype.getDropDirection=function(t,e,n,i){var r=t.clientX,o=t.clientY,s=Math.abs(r-e.x)/e.width,a=Math.abs(o-e.y)/e.height,l=Math.abs(r-(e.x+e.width))/e.width,c=Math.abs(o-(e.y+e.height))/e.height;n=n||[];var u="center",h=1;s<.33&&s<h&&!n.contains("left")&&(u="left",h=s),a<.33&&a<h&&!n.contains("top")&&(u="top",h=a,i instanceof aI&&o-e.y<30&&(u="center")),l<.33&&l<h&&!n.contains("right")&&(u="right",h=l),c<.33&&c<h&&!n.contains("bottom")&&(u="bottom",h=c);var p=["left","right"].contains(u)?e.width:e.height;switch(p=Math.max(p/3,40),u){case"center":break;case"left":e.width=p;break;case"top":e.height=p;break;case"right":e.x+=e.width-p,e.width=p;break;case"bottom":e.y+=e.height-p,e.height=p}return u},e.prototype.createLeafInParent=function(t,e){var n=new cI(this.app);return t.children.length>0&&n.setDimension(100/t.children.length),t.insertChild(e,n),n},e.prototype.splitLeaf=function(t,e,n,i){var r=t.parentSplit,o=t.dimension,s=r.children.indexOf(t);if(n&&r instanceof sI&&n!==r.direction){t.setDimension(null);var a=new sI(this,n);r.replaceChild(s,a,!0),a.setDimension(o),r.recomputeChildrenDimensions(),i?(a.insertChild(0,e),a.insertChild(1,t)):(a.insertChild(0,t),a.insertChild(1,e))}else null!==o&&(t.setDimension(o/2),e.setDimension(o/2)),i?r.insertChild(s,e):r.insertChild(s+1,e),r instanceof sI&&r.recomputeChildrenDimensions()},e.prototype.createLeafBySplit=function(t,e,n){var i=new cI(this.app);return this.splitLeaf(t,i,e,n),i},e.prototype.splitActiveLeaf=function(t){var e=this.activeLeaf;return e||(e=this.getMostRecentLeaf()),e?this.createLeafBySplit(e,t):this.createLeafInParent(this.rootSplit,0)},e.prototype.splitLeafOrActive=function(t,e){return t?this.createLeafBySplit(t,e):this.splitActiveLeaf(e)},e.prototype.duplicateLeaf=function(t,e){return D(this,void 0,Promise,(function(){var n,i;return A(this,(function(r){switch(r.label){case 0:return t?(n=t.getViewState(),i=this.createLeafBySplit(t,e),n.active=!0,[4,i.setViewState(n)]):[2];case 1:return r.sent(),[2,i]}}))}))},e.prototype.getUnpinnedLeaf=function(t){var e=this.activeLeaf,n=e;if(n&&!n.pinned)return n;if(n=null,this.iterateRootLeaves((function(e){if(!e.pinned&&e.view.navigation&&(!t||e.type===t))return(!n||n.activeTime<e.activeTime)&&(n=e),!0})),!n){if(e)return this.createLeafBySplit(e);n=this.createLeafInParent(this.rootSplit,-1)}return n},e.prototype.getLeaf=function(t){return t?this.splitActiveLeaf():this.getUnpinnedLeaf()},e.prototype.openLinkText=function(t,e,n,i){return D(this,void 0,void 0,(function(){return A(this,(function(r){switch(r.label){case 0:return[4,this.getLeaf(n).openLinkText(t,e,i)];case 1:return r.sent(),[2]}}))}))},e.prototype.setActiveLeaf=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1);var i=this.activeLeaf;i!==t?t&&t.getRoot()!==this.rootSplit||(i&&i.containerEl.removeClass("mod-active"),this.activeLeaf=t,t&&(t.activeTime=Date.now(),t.containerEl.addClass("mod-active"),n&&t&&t.setEphemeralState({focus:!0}),this.recordHistory(t,e),this.requestActiveLeafEvents())):n&&t&&t.setEphemeralState({focus:!0})},e.prototype.activeLeafEvents=function(){var t=this.activeLeaf;this.trigger("active-leaf-change",t);var e=null;t&&t.view instanceof Ub&&(e=t.view.file),this.trigger("file-open",e)},e.prototype.updateHistory=function(){var t=this.activeLeaf;t&&!t.working&&this.recordHistory(t,!1)},e.prototype.recordHistory=function(t,e){if(this.activeLeaf===t){var n=t,i=history.state;if(i&&i.group&&i.group===t.group&&i.leaf!==t.id){var r=this.getLeafById(i.leaf);r&&(n=r)}var o=JSON.stringify(n.getViewState()),s=JSON.stringify(n.getEphemeralState()||{});if(i&&i.leaf===n.id&&i.state===o&&i.eState===s){if(t===n)return;e=!1}(null===i||i.leaf===n.id&&i.state===o)&&(e=!1),n!==t&&(o=JSON.stringify(t.getViewState()),s=JSON.stringify(t.getEphemeralState()||{}));var a={leaf:t.id,group:t.group,state:o,eState:s};e?history.pushState(a,""):history.replaceState(a,"")}},e.prototype.getLeafById=function(t){var e=null;return this.iterateAllLeaves((function(n){if(n.id===t)return e=n,!0})),e},e.prototype.getGroupLeaves=function(t){var e=[];return t?(this.iterateAllLeaves((function(n){n.group===t&&e.push(n)})),e):e},e.prototype.getMostRecentLeaf=function(){var t=null;return this.iterateRootLeaves((function(e){(!t||t.activeTime<e.activeTime)&&(t=e)})),t},e.prototype.getLeftLeaf=function(t){return this.getSideLeaf(this.leftSplit,t)},e.prototype.getRightLeaf=function(t){return this.getSideLeaf(this.rightSplit,t)},e.prototype.ensureSideLeaf=function(t,e,n,i,r){void 0===i&&(i=!0);var o,s=this.getLeavesOfType(t);0===s.length?(o="left"===e?this.getLeftLeaf(n):this.getRightLeaf(n),i&&this.revealLeaf(o),o.setViewState({type:t,state:r})):(o=s[0],i&&this.revealLeaf(o),r&&o.setViewState({type:t,state:r}))},e.prototype.getActiveLeafOfViewType=function(t){return this.getActiveViewOfType(t)},e.prototype.getActiveViewOfType=function(t){var e=this.activeLeaf;if(!e)return null;var n=e.view;return n instanceof t?n:null},e.prototype.getActiveFile=function(){var t=this.activeLeaf;if(!t)return null;var e=t.view;if(!(e instanceof Ub))return null;var n=e.file;return n||null},e.prototype.getSideLeaf=function(t,e){if(t instanceof uI){var n=new cI(this.app);return t.insertChild(-1,n),n}if(e){var i=new aI(this);t.insertChild(-1,i);n=new cI(this.app);return i.insertChild(-1,n),n}0===t.children.length&&t.insertChild(0,new aI(this));var r=t.children[0];if(r instanceof oI){n=new cI(this.app);return r.insertChild(-1,n),n}return null},e.prototype.iterateLeaves=function(t,e){if(e instanceof cI){if(t(e))return!0}else if(e instanceof oI)for(var n=0,i=e.children;n<i.length;n++){var r=i[n];if(this.iterateLeaves(t,r))return!0}return!1},e.prototype.iterateRootLeaves=function(t){this.iterateLeaves(t,this.rootSplit)},e.prototype.iterateAllLeaves=function(t){this.iterateLeaves(t,this.rootSplit),this.iterateLeaves(t,this.leftSplit),this.iterateLeaves(t,this.rightSplit)},e.prototype.getLeavesOfType=function(t){var e=[];return this.iterateAllLeaves((function(n){n.view&&n.view.getViewType()===t&&e.push(n)})),e},e.prototype.detachLeavesOfType=function(t){for(var e=0,n=this.getLeavesOfType(t);e<n.length;e++){n[e].detach()}},e.prototype.getAdjacentLeafInDirection=function(t,e){if(!t)return null;var n=t.containerEl.getBoundingClientRect(),i=null;switch(e){case"top":i={x:n.left+n.width/2,y:n.top-5};break;case"bottom":i={x:n.left+n.width/2,y:n.top+n.height+5};break;case"left":i={x:n.left-5,y:n.top+n.height/2};break;case"right":i={x:n.left+n.width+5,y:n.top+n.height/2}}if(i){var r=document.elementFromPoint(i.x,i.y),o=null;if(this.iterateRootLeaves((function(t){if(t.containerEl.contains(r))return o=t,!0})),o)return o}for(var s=null,a="left"===e||"right"===e?"vertical":"horizontal";t;){var l=t.parentSplit;if(l instanceof sI&&l.direction===a){var c=l.children,u=c.indexOf(t);if("left"===e||"top"===e){if(u>0){s=c[u-1];break}}else if(u<c.length-1){s=c[u+1];break}}t=l}if(!s)return null;for(;s instanceof oI;)s=s.children[0];return s instanceof cI?s:null},e.prototype.revealLeaf=function(t){var e=t.getRoot();e instanceof lI&&e.collapsed&&e.toggle(),e instanceof uI&&(e.openLeaf(t),e.expand());var n=t.parentSplit;n instanceof aI&&n.selectTab(t)},e.prototype.getLastOpenFiles=function(){return this.lastOpenFiles},e.prototype.updateOptions=function(){var t=this;this.iterateAllLeaves((function(t){t&&t.view instanceof rR&&t.view.updateOptions()})),By.isDesktopApp&&!dt&&le((function(e){var n=e.remote.getCurrentWebContents().session,i=t.app.vault.getConfig("spellcheckLanguages"),r=n.availableSpellCheckerLanguages;i||(i=[e.remote.app.getLocale()]);var o=i.filter((function(t){return r.contains(t)}));n.setSpellCheckerLanguages(o)}))},e.prototype.recordMostRecentOpenedFile=function(t){var e=this.lastOpenFiles;e.remove(t.path),e.unshift(t.path),this.lastOpenFiles=e.slice(0,10),this.requestSaveLayout()},e.prototype.onLayoutChange=function(){if(this.layoutReady){if(!this.activeLeaf||this.activeLeaf.getRoot()!==this.rootSplit){var t=this.getMostRecentLeaf();t||(t=this.createLeafInParent(this.rootSplit,0)),this.setActiveLeaf(t,!0,!0)}this.requestUpdateGroups(),this.requestSaveLayout(),this.requestResize(),this.trigger("layout-change")}},e.prototype.onQuickPreview=function(t,e){this.trigger("quick-preview",t,e)},e.prototype.onResize=function(){this.trigger("resize")},e.prototype.onDocumentClick=function(t){t.defaultPrevented||this.trigger("click",t)},e.prototype.onLinkContextMenu=function(t,e,n,i){var r=new zb(this.app);this.handleLinkContextMenu(r,e,n,i)&&(t.preventDefault(),r.showAtMouseEvent(t))},e.prototype.handleLinkContextMenu=function(t,e,n,i){var r=this;if(!e)return!1;var o=tA(e).path,s=this.app.metadataCache.getFirstLinkpathDest(o,n);return!!s&&(By.isMobile&&t.addSeparator().addItem((function(t){return t.setTitle(re(s.name)).setIsLabel(!0)})).addSeparator(),t.addItem((function(t){return t.setTitle(Ee("interface.menu.open-in-new-pane")).setIcon(Sm).onClick((function(){return r.openLinkText(e,n,!0)}))})),t.addItem((function(t){return t.setTitle(Ee("plugins.file-explorer.menu-opt-rename")).setIcon($g).onClick((function(){return r.app.fileManager.promptForFileRename(s)}))})),t.addSeparator(),this.trigger("file-menu",t,s,"link-context-menu",i),!0)},e.prototype.handleExternalLinkContextMenu=function(t,e){return!!e&&(t.addItem((function(t){return t.setTitle(Ee("interface.menu.copy-url")).setIcon(um).onClick((function(){Ae(e),new jb(Ee("interface.copied",{item:Ee("interface.url")}))}))})),this.trigger("url-menu",t,e,null),!0)},e.prototype.iterateCodeMirrors=function(t){this.iterateAllLeaves((function(e){e.view instanceof rR&&!e.view.editMode&&t(e.view.sourceMode.cmEditor)}))},e.prototype.addMobileFileInfo=function(t){this.mobileFileInfos.push(t)},e.prototype.registerUriHook=function(){var t=this,e=function(e){if(e){console.log("Received URL action",e);var n=t.protocolHandlers;if(n.has(e.action))n.get(e.action)(e)}},n=window.OBS_ACT;if(window.OBS_ACT=e,n&&e(n),GF){YF.addListener("appUrlOpen",(function(n){var i;i=n.url,D(t,void 0,void 0,(function(){var t;return A(this,(function(n){return i?(!(t=cN(i))||t.vault&&t.vault.toLowerCase()!==this.app.vault.getName().toLowerCase()||e(t),[2]):[2]}))}))}))}},e.prototype.registerObsidianProtocolHandler=function(t,e){if(this.protocolHandlers.has(t))throw new Error('Action "'+t+'" is already registered as a handler.');this.protocolHandlers.set(t,e)},e.prototype.unregisterObsidianProtocolHandler=function(t,e){e&&this.protocolHandlers.get(t)!==e||this.protocolHandlers.delete(t)},e.prototype.registerHoverLinkSource=function(t,e){this.hoverLinkSources[t]=e},e.prototype.unregisterHoverLinkSource=function(t){delete this.hoverLinkSources[t]},e.prototype.pushUndoHistory=function(t){if(t){var e=t.getViewState();if("empty"!==e.type){var n=t.getEphemeralState(),i=this.undoHistory;i.unshift({state:e,eState:n}),i.length>10&&i.pop()}}},e.prototype.registerEditorExtension=function(t){this.editorExtensions.push(t),this.updateOptions()},e.prototype.unregisterEditorExtension=function(t){this.editorExtensions.remove(t),this.updateOptions()},e.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.prototype.trigger.apply(this,P([e],n))},e.prototype.on=function(e,n,i){return t.prototype.on.call(this,e,n,i)},e}(sb),pN=function(){function t(t,e){this.app=null,this.setting=null,this.containerEl=null,this.navEl=null,this.app=t,this.setting=e,this.containerEl=createDiv("vertical-tab-content")}return t.prototype.hide=function(){},t}(),dN=function(t){function e(e){var n=t.call(this,e)||this;n.limit=0,n.emptyStateText="No results found",n.isOpen=!1,n.inputEl=null,n.resultContainerEl=null;var i=n.modalEl;return i.removeClass("modal"),i.addClass("prompt"),i.empty(),n.inputEl=i.createEl("input",{cls:"prompt-input",type:"text"}),n.resultContainerEl=i.createDiv("prompt-results"),n.resultContainerEl.on("mousedown",".suggestion-item",(function(t){return t.preventDefault()})),n.chooser=new AI(n,n.resultContainerEl,n.scope),n.inputEl.addEventListener("input",n.onInput.bind(n)),n}return M(e,t),e.prototype.setPlaceholder=function(t){this.inputEl.placeholder=t},e.prototype.setInstructions=function(t){this.modalEl.appendChild(XI(t))},e.prototype.onOpen=function(){var t=this.inputEl;if(this.isOpen=!0,t.value="",By.isMobileApp&&By.isIosApp){var e=document.body.createEl("input",{type:"text"});e.style.position="absolute",e.style.top="0",e.style.opacity="0",e.style.zIndex="-9999",e.focus(),setTimeout((function(){e.detach(),t.focus()}),300)}else t.focus();this.updateSuggestions()},e.prototype.onInput=function(){this.updateSuggestions()},e.prototype.updateSuggestions=function(){var t=this.inputEl.value,e=this.getSuggestions(t);if(0!==e.length){var n=this.limit;n&&n>0&&(e=e.slice(0,n)),this.chooser.setSuggestions(e)}else t?this.onNoSuggestion():this.chooser.setSuggestions(null)},e.prototype.onNoSuggestion=function(){this.chooser.setSuggestions(null),this.chooser.addMessage(this.emptyStateText)},e.prototype.selectSuggestion=function(t,e){this.app.keymap.updateModifiers(e),this.close(),this.isOpen=!1,this.onChooseSuggestion(t,e)},e}(KD),fN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.getSuggestions=function(t){t=t.trim();for(var e=this.getItems(),n=LT(t),i=[],r=0,o=e;r<o.length;r++){var s=o[r],a=PT(n,this.getItemText(s));a&&i.push({match:a,item:s})}return OT(i),i},e.prototype.renderSuggestion=function(t,e){BT(e,this.getItemText(t.item),t.match)},e.prototype.onChooseSuggestion=function(t,e){this.onChooseItem(t.item,e)},e}(dN),gN="YYYY-MM-DD",mN="HH:mm";function vN(t,e,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],o=new RegExp("{{"+i+"}}","gi");t=t.replace(o,r)}var s=null;return t=t.replace(/{{(date|time)(?::(.*?))?}}/gi,(function(t,e,i){return s||(s=window.moment()),i?s.format(i):"date"===e?s.format(n&&n.dateFormat||gN):s.format(n&&n.timeFormat||mN)}))}var yN=/!?\[\[.*?]]/,bN=/^(!?\[)(.*?)(]\(\s*)[^ ]+((?:\s+.*?)?\))$/,wN=function(){function t(t){this.app=null,this.vault=null,this.inProgressUpdates=null,this.updateQueue=new Eh,this.linkResolutions=null,this.app=t,this.vault=t.vault}return t.prototype.getNewFileParent=function(t){var e=this.vault,n=e.getConfig("newFileLocation");if("folder"===n){var i=e.getConfig("newFileFolderPath");if((r=e.getAbstractFileByPath(i))instanceof ub)return r}else if("current"===n){var r;i=$t(t);if((r=e.getAbstractFileByPath(i))instanceof ub)return r}return e.getRoot()},t.prototype.createNewMarkdownFileFromLinktext=function(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){if(!zt(t))throw new Error(Ee("plugins.file-explorer.msg-invalid-characters")+It);return n=null,t.contains("/")||(n=this.app.fileManager.getNewFileParent(e)),[2,this.app.fileManager.createNewMarkdownFile(n,t)]}))}))},t.prototype.createNewMarkdownFile=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:return n=this.vault,t||(t=n.getRoot()),i=t.getParentPrefix(),e?(te(e=e.trim(),"md")&&(e=Qt(e)),e=ne(e),r=n.getAvailablePath(i+e,"md")):(o=Ee("plugins.file-explorer.label-untitled-file"),r=n.getAvailablePath(i+o,"md")),!(s=$t(r))||"/"===s||n.getAbstractFileByPathInsensitive(s)?[3,2]:[4,n.createFolder(s)];case 1:a.sent(),a.label=2;case 2:return[4,n.create(r,"")];case 3:return[2,a.sent()]}}))}))},t.prototype.createNewFolder=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:return e=!t||t.isRoot()?"":t.path+"/",n=Ee("plugins.file-explorer.label-untitled-folder"),i=this.vault.getAvailablePath(e+n),[4,this.vault.createFolder(i)];case 1:return o.sent(),(r=this.vault.getAbstractFileByPath(i))&&r instanceof ub?[2,r]:[2,null]}}))}))},t.prototype.renameFile=function(t,e){return D(this,void 0,Promise,(function(){var n=this;return A(this,(function(i){switch(i.label){case 0:return[4,this.runAsyncLinkUpdate((function(){return n.vault.rename(t,e)}))];case 1:return i.sent(),[2]}}))}))},t.prototype.runAsyncLinkUpdate=function(t){return D(this,void 0,void 0,(function(){var e=this;return A(this,(function(n){return this.inProgressUpdates?(this.inProgressUpdates.push(t()),[2]):[2,this.updateQueue.queue((function(){return D(e,void 0,void 0,(function(){var e,n,i=this;return A(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(t){return i.app.metadataCache.onCleanCache(t)}))];case 1:r.sent(),e=this.linkResolutions=this.getAllLinkResolutions(),r.label=2;case 2:return r.trys.push([2,,7,8]),this.inProgressUpdates=[],[4,t()];case 3:r.sent(),r.label=4;case 4:return this.inProgressUpdates.length>0?(n=this.inProgressUpdates,this.inProgressUpdates=[],[4,Promise.all(n)]):[3,6];case 5:return r.sent(),[3,4];case 6:return[3,8];case 7:return this.inProgressUpdates=null,[7];case 8:return[4,this.updateAllLinks(e)];case 9:return r.sent(),this.linkResolutions=null,[2]}}))}))}))]}))}))},t.prototype.updateAllLinks=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k=this;return A(this,(function(C){for(e=new At,n=this.app.metadataCache,i=0,r=t;i<r.length;i++)o=r[i],s=o.reference.link,a=o.resolvedPaths,l=o.sourceFile.path,c=tA(s),u=c.path,h=c.subpath,p=n.getLinkpathDest(u,l).map((function(t){return t.path})),Lt(a,p)||(d=yN.test(o.reference.original),f=n.fileToLinktext(o.resolvedFile,l,d),o.reference.link!==f&&e.add(l,{reference:o.reference,newLinktext:f+h}));return 0===(g=e.count())?[2]:(m=Ee("nouns.link-with-count",{count:g}),v=Ee("nouns.file-with-count",{count:Object.keys(e.data).length}),y=Ee("dialogue.label-link-affected",{links:m,files:v}),b=Ee("dialogue.msg-updated-links",{links:m,files:v}),w=function(){return D(k,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.updateInternalLinks(e)];case 1:return t.sent(),new jb(b),[2]}}))}))},this.vault.getConfig("alwaysUpdateLinks")?[2,w()]:[2,new Promise((function(t,e){try{var n=new KD(k.app);n.titleEl.setText(Ee("dialogue.label-update-links")),n.contentEl.createEl("p",{text:Ee("dialogue.label-confirm-update-link-to-file")}),n.contentEl.createEl("p",{text:y}),n.onClose=function(){return t()};var i=function(e){n.onClose=function(){return null},n.close(),e&&k.app.vault.setConfig("alwaysUpdateLinks",!0),t(w())},r=n.modalEl.createDiv("modal-button-container");r.createEl("button",{text:Ee("dialogue.button-always-update")}).addEventListener("click",(function(){return i(!0)})),r.createEl("button",{text:Ee("dialogue.button-just-once")}).addEventListener("click",(function(){return i()})),r.createEl("button",{text:Ee("dialogue.button-do-not-update")}).addEventListener("click",(function(){return n.close()})),n.open()}catch(t){e(t)}}))])}))}))},t.prototype.getAllLinkResolutions=function(t){var e=this;void 0===t&&(t=!0);var n=this.app.metadataCache,i=[];return n.iterateReferences((function(r,o){var s=e.vault.getAbstractFileByPath(r);if(s instanceof cb){var a=ZD(o.link);if(a||!t){var l=n.getLinkpathDest(a,r);if(l.length>0){var c=l[0];i.push({reference:o,sourceFile:s,resolvedFile:c,resolvedPaths:l.map((function(t){return t.path}))})}}}})),i},t.prototype.updateInternalLinks=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:e=0,n=t.keys(),a.label=1;case 1:return e<n.length?(i=n[e],(r=this.vault.getAbstractFileByPath(i))instanceof cb?[4,this.vault.read(r)]:[3,4]):[3,5];case 2:return o=a.sent(),s=t.get(i),o=this.updateInternalLinksForFile(o,s),[4,this.vault.modify(r,o)];case 3:a.sent(),a.label=4;case 4:return e++,[3,1];case 5:return[2]}}))}))},t.prototype.updateInternalLinksForFile=function(t,e){e.sort((function(t,e){return e.reference.position.start.offset-t.reference.position.start.offset}));for(var n=0,i=e;n<i.length;n++){var r=i[n],o=r.reference,s=o.position,a=o.original,l=o.link,c=void 0;if(yN.test(a))c=a.replace(l,r.newLinktext);else{var u=rg(r.newLinktext),h=a.match(bN);if(h){var p=h[2],d=ng(p).trim(),f=ZD(l);d===re(f)?p=re(ZD(r.newLinktext)):d.contains("/")&&d===oe(f)&&(p=oe(ZD(r.newLinktext))),c=h[1]+p+h[3]+u+h[4]}else c="[]("+u+")",a.startsWith("!")&&(c="!"+c)}t=t.substring(0,s.start.offset)+c+t.substring(s.end.offset)}return t},t.prototype.promptForFolderDeletion=function(t){var e=this,n=this.app,i=n.vault.getConfig("promptDelete"),r=n.vault.getConfig("trashOption");if(i){var o=document.createDocumentFragment();o.createEl("p",{text:Ee("dialogue.label-confirm-deletion",{filename:t.name})}),"system"===r?o.createEl("p",{text:Ee("dialogue.label-move-to-system-trash")}):"local"===r?o.createEl("p",{text:Ee("dialogue.label-move-to-vault-trash")}):"none"===r&&o.createEl("p",{cls:"mod-warning",text:Ee("dialogue.label-permanent-delete")}),t.children.length>0&&(o.createEl("p",{cls:"mod-warning",text:Ee("dialogue.label-non-empty-folder")}),o.createEl("p",{cls:"mod-warning",text:Ee("dialogue.label-delete-folder-warning")})),new $D(n).setTitle(Ee("dialogue.label-delete-folder")).setContent(o).addButton("mod-warning",Ee("dialogue.button-delete-do-not-ask-again"),(function(){n.vault.setConfig("promptDelete",!1),e.trashFile(t)})).addButton("mod-warning",Ee("dialogue.button-delete"),(function(){e.trashFile(t)})).addCancelButton().open()}else this.trashFile(t)},t.prototype.promptForFileDeletion=function(t){var e=this,n=this.app,i=n.vault.getConfig("promptDelete"),r=n.vault.getConfig("trashOption");if(i){var o=document.createDocumentFragment();o.createEl("p",{text:Ee("dialogue.label-confirm-deletion",{filename:t.name})}),"system"===r?o.createEl("p",{text:Ee("dialogue.label-move-to-system-trash")}):"local"===r?o.createEl("p",{text:Ee("dialogue.label-move-to-vault-trash")}):"none"===r&&o.createEl("p",{cls:"mod-warning",text:Ee("dialogue.label-permanent-delete")});var s=n.metadataCache.getBacklinksForFile(t).count();if(s>0){var a=Ee("nouns.link-with-count",{count:s}),l=Ee("dialogue.label-existing-backlink",{links:a});o.createEl("p",{cls:"mod-warning",text:l})}new $D(n).setTitle(Ee("dialogue.label-delete-file")).setContent(o).addButton("mod-warning",Ee("dialogue.button-delete-do-not-ask-again"),(function(){n.vault.setConfig("promptDelete",!1),e.trashFile(t)})).addButton("mod-warning",Ee("dialogue.button-delete"),(function(){e.trashFile(t)})).addCancelButton().open()}else this.trashFile(t)},t.prototype.promptForFileRename=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s=this;return A(this,(function(a){return e=this.app,n=function(e){return D(s,void 0,void 0,(function(){var n,i,r;return A(this,(function(o){switch(o.label){case 0:if(""===e)return new jb(Ee("plugins.file-explorer.msg-empty-file-name")),[2];if(n=t.getNewPathAfterRename(e),t.path===n)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.renameFile(t,n)];case 2:return o.sent(),[3,4];case 3:return(i=o.sent())&&(r=i.message||i.code||i.toString(),new jb(r)),[3,4];case 4:return[2]}}))}))},i=createEl("input",{type:"text",value:t.basename}),r=function(){return D(s,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return o.close(),[4,n(i.value)];case 1:return t.sent(),new jb(Ee("dialogue.msg-rename-success")),[2]}}))}))},i.addEventListener("keypress",(function(t){t.isComposing||"Enter"!==t.key||r()})),(o=new $D(e)).setTitle(Ee("dialogue.label-rename-file")).setContent(createFragment((function(t){t.createEl("label",{cls:"input-label",text:Ee("dialogue.label-new-name")}),t.appendChild(i)}))).addButton("mod-cta",Ee("dialogue.button-done"),(function(){return r(),!0})).addCancelButton().open(),i.select(),i.focus(),[2]}))}))},t.prototype.trashFile=function(t){var e=this.app,n=e.vault.getConfig("trashOption");"system"===n?e.vault.trash(t,!0):"local"===n?e.vault.trash(t,!1):"none"===n&&e.vault.delete(t,!0)},t.prototype.generateMarkdownLink=function(t,e,n,i){var r,o=this.app,s=o.vault.getConfig("useMarkdownLinks"),a=!s,l=o.metadataCache.fileToLinktext(t,e,a)+(n||"");if(t.path===e&&n&&(l=n),s){var c=rg(l);r="md"===t.extension?"["+(i||t.basename)+"]("+c+")":"![]("+c+")"}else i&&i.toLowerCase()===l.toLowerCase()&&(l=i,i=null),r=i?"[["+l+"|"+i+"]]":"[["+l+"]]","md"!==t.extension&&(r="!"+r);return r},t.prototype.createAndOpenMarkdownFile=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o,s,a;return A(this,(function(l){switch(l.label){case 0:return n=this.app,i=n.workspace,r="",(o=i.getActiveFile())&&(r=o.path),s=this.getNewFileParent(r),[4,this.createNewMarkdownFile(s,t)];case 1:return a=l.sent(),[4,i.getLeaf(e).openFile(a,{active:!0,state:{mode:"source"},eState:{rename:"all"}})];case 2:return l.sent(),[2,a]}}))}))},t.prototype.insertTextIntoFile=function(t,e,n,i,r){return D(this,void 0,void 0,(function(){var o,s,a;return A(this,(function(l){switch(l.label){case 0:return[4,this.vault.read(t)];case 1:return o=l.sent(),s=""===o?"":"\n\n",i&&(e=vN(i,{fromTitle:n,newTitle:t.basename,content:e})),a=r?e+s+o:o+s+e,[4,this.vault.modify(t,a)];case 2:return l.sent(),[2]}}))}))},t.prototype.mergeFile=function(t,e,n,i){return D(this,void 0,void 0,(function(){var r,o,s=this;return A(this,(function(a){switch(a.label){case 0:return r=this.app.workspace,[4,this.vault.read(e)];case 1:return o=a.sent(),[4,this.runAsyncLinkUpdate((function(){return D(s,void 0,void 0,(function(){var r,s,a,l;return A(this,(function(c){switch(c.label){case 0:return[4,this.insertTextIntoFile(t,o,e.basename,n,i)];case 1:return c.sent(),[4,this.trashFile(e)];case 2:if(c.sent(),r=this.linkResolutions)for(s=0,a=r;s<a.length;s++)(l=a[s]).resolvedFile===e&&(l.resolvedFile=t,l.resolvedPaths=[]);return[2]}}))}))}))];case 2:return a.sent(),[4,r.getLeaf().openFile(t)];case 3:return a.sent(),[2]}}))}))},t}();function kN(t){return If(t,null,{})}function CN(t){return function(t,e,n){let i=null;if("function"==typeof e||Array.isArray(e)?i=e:void 0===n&&e&&(n=e),"string"==typeof n&&(n=n.length),"number"==typeof n){const t=Math.round(n);n=t<1?void 0:t>8?{indent:8}:{indent:t}}if(void 0===t){const{keepUndefined:t}=n||e||{};if(!t)return}return new $d(t,i,n).toString(n)}(t,null,{})}var xN=window.moment;function SN(t){return D(this,void 0,Promise,(function(){var e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return GF?[4,YF.requestUrl(t)]:[3,2];case 1:return[2,s.sent().body];case 2:return ae("electron")?[4,ue(t)]:[3,4];case 3:return[2,s.sent()];case 4:return e=t.url,n=t.method,i=t.contentType,r=t.body,o=null,i&&(o={"Content-Type":i}),[4,fetch(e,{method:n,headers:o,body:r})];case 5:return[2,s.sent().text()]}}))}))}function EN(t,e,n){return"https://raw.githubusercontent.com/"+t+"/"+(n||"HEAD")+"/"+e}function MN(t){return"https://github.com/"+t}function LN(t,e,n){return"https://github.com/"+t+"/releases/download/"+e+"/"+n}window.request=SN;var DN=new Intl.Collator(void 0,{usage:"sort",sensitivity:"base",numeric:!0}).compare;var AN="manifest.json",TN="main.js",PN="styles.css",ON={obsidian:S,"@codemirror/autocomplete":c,"@codemirror/closebrackets":u,"@codemirror/collab":h,"@codemirror/commands":d,"@codemirror/comment":f,"@codemirror/fold":m,"@codemirror/gutter":g,"@codemirror/highlight":v,"@codemirror/history":y,"@codemirror/language":s,"@codemirror/lint":w,"@codemirror/matchbrackets":p,"@codemirror/panel":b,"@codemirror/rangeset":r,"@codemirror/rectangular-selection":k,"@codemirror/search":C,"@codemirror/state":i,"@codemirror/stream-parser":a,"@codemirror/text":e,"@codemirror/tooltip":l,"@codemirror/view":o,"@lezer/common":t,"@lezer/lr":x},FN=function(t){function e(e,n){var i=t.call(this)||this;return i.app=e,i.manifest=n,i}return M(e,t),e.prototype.addRibbonIcon=function(t,e,n){var i=this.app.workspace.leftRibbon.addRibbonActionButton(t,e,n);return this.register((function(){return i.detach()})),i},e.prototype.addStatusBarItem=function(){var t=this.app.statusBar.registerStatusBarItem();return t.addClass("plugin-"+this.manifest.id.toLowerCase().replace(/[^_a-zA-Z0-9-]/,"-")),this.register((function(){return t.detach()})),t},e.prototype.addCommand=function(t){var e=this;return t.id=this.manifest.id+":"+t.id,t.name=this.manifest.name+": "+t.name,this.app.commands.addCommand(t),this.register((function(){return e.app.commands.removeCommand(t.id)})),t},e.prototype.addSettingTab=function(t){var e=this;this.app.setting.addSettingTab(t),this.register((function(){return e.app.setting.removeSettingTab(t)}))},e.prototype.registerView=function(t,e){var n=this;this.app.viewRegistry.registerView(t,e),this.register((function(){return n.app.viewRegistry.unregisterView(t)}))},e.prototype.registerExtensions=function(t,e){var n=this;this.app.viewRegistry.registerExtensions(t,e),this.register((function(){return n.app.viewRegistry.unregisterExtensions(t)}))},e.prototype.registerMarkdownPostProcessor=function(t,e){return Wy.registerPostProcessor(t,e),this.register((function(){return Wy.unregisterPostProcessor(t)})),t},e.prototype.registerMarkdownCodeBlockProcessor=function(t,e,n){var i=Wy.createCodeBlockPostProcessor(t,e);return Wy.registerPostProcessor(i,n),Wy.registerCodeBlockPostProcessor(t,e),this.register((function(){Wy.unregisterCodeBlockPostProcessor(t),Wy.unregisterPostProcessor(i)})),i},e.prototype.registerCodeMirror=function(t){this.app.workspace.iterateCodeMirrors(t),this.registerEvent(this.app.workspace.on("codemirror",t))},e.prototype.registerEditorExtension=function(t){var e=this;this.app.workspace.registerEditorExtension(t),this.register((function(){return e.app.workspace.unregisterEditorExtension(t)}))},e.prototype.registerObsidianProtocolHandler=function(t,e){var n=this;this.app.workspace.registerObsidianProtocolHandler(t,e),this.register((function(){return n.app.workspace.unregisterObsidianProtocolHandler(t,e)}))},e.prototype.registerEditorSuggest=function(t){var e=this;this.app.workspace.editorSuggest.addSuggest(t),this.register((function(){return e.app.workspace.editorSuggest.removeSuggest(t)}))},e.prototype.loadData=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.app.vault.readPluginData(this.manifest.dir)];case 1:return[2,t.sent()]}}))}))},e.prototype.saveData=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.app.vault.writePluginData(this.manifest.dir,t)];case 1:return[2,e.sent()]}}))}))},e.prototype.loadCSS=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return e=(t=this).app,n=t.manifest,i=n.dir+"/"+PN,[4,e.vault.exists(i)];case 1:return s.sent()?[4,e.vault.readRaw(i)]:[3,3];case 2:r=s.sent(),(o=document.head.createEl("style",{type:"text/css"})).textContent=r,this.register((function(){return o.detach()})),s.label=3;case 3:return[2]}}))}))},e}(Vg),IN=function(t){function e(e,n){var i=t.call(this,e,e.setting)||this;return i.plugin=n,i.name=n.manifest.name,i.id=n.manifest.id,i}return M(e,t),e}(pN),NN=function(t){function e(e,n){var i=t.call(this,e,e.setting)||this;return i.plugin=null,i.plugin=n,i.name=n.instance.name,i.id=n.instance.id,i}return M(e,t),e}(pN),BN=function(){function t(t){this.manifests={},this.plugins={},this.enabledPlugins=new Set,this.updates={},this.requestSaveConfig=De(this.saveConfig,1e3),this.app=t}return t.prototype.loadManifests=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h;return A(this,(function(p){switch(p.label){case 0:return t=this.app.vault.adapter,e=this.manifests={},n=this.getPluginFolder(),[4,t.exists(n)];case 1:return p.sent()?[4,t.list(n)]:[3,10];case 2:i=p.sent(),r=0,o=i.folders,p.label=3;case 3:if(!(r<o.length))return[3,10];s=o[r],p.label=4;case 4:return p.trys.push([4,8,,9]),a=s+"/"+AN,[4,t.exists(a)];case 5:return p.sent()?(u=(c=JSON).parse,[4,t.read(a)]):[3,7];case 6:if(!(l=u.apply(c,[p.sent()])).id)return[3,9];l.dir=s,e[l.id]=l,p.label=7;case 7:return[3,9];case 8:return h=p.sent(),console.error(h),[3,9];case 9:return r++,[3,3];case 10:return[2]}}))}))},t.prototype.loadPlugin=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r,o,s,a;return A(this,(function(l){switch(l.label){case 0:return this.isEnabled()?(e=this.plugins[t])?[2,e]:(n=this.manifests[t])?[4,this.app.vault.adapter.read(n.dir+"/"+TN)]:[2,null]:[2];case 1:if(i=l.sent(),r=function(t){return ON[t]||ae(t)},s={exports:o={}},function(t){return window.eval("(function anonymous(require,module,exports){"+t+"\n})")}(i)(r,s,o),!(a=o.default||s.exports))throw new Error("Failed to load plugin "+t+". No exports detected.");if(!((e=new a(this.app,n))instanceof FN))throw new Error("Failed to load plugin "+t);return this.plugins[t]=e,[4,e.load()];case 2:return l.sent(),[4,e.loadCSS()];case 3:return l.sent(),[2,e]}}))}))},t.prototype.unloadPlugin=function(t){return D(this,void 0,void 0,(function(){var e;return A(this,(function(n){return(e=this.plugins[t])?(e.unload(),delete this.plugins[t],[2]):[2]}))}))},t.prototype.initialize=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s=this;return A(this,(function(a){switch(a.label){case 0:return[4,(t=this.app).vault.readConfigJson("community-plugins")];case 1:return(e=a.sent())&&Array.isArray(e)||(e=[]),this.enabledPlugins=new Set(e),[4,this.loadManifests()];case 2:if(a.sent(),n=this.manifests,0===Object.keys(n).length)return[2];if(!this.isEnabled())return null===localStorage.getItem("enable-plugin-"+this.app.appId)&&new RN(t).open(),[2];i=0,r=e,a.label=3;case 3:return i<r.length?(o=r[i],n.hasOwnProperty(o)?[4,this.enablePlugin(o)]:[3,5]):[3,6];case 4:a.sent(),a.label=5;case 5:return i++,[3,3];case 6:return this.requestSaveConfig(),this.checkForDeprecations(),setInterval((function(){return s.checkForDeprecations()}),432e5),[2]}}))}))},t.prototype.getPluginFolder=function(){return this.app.vault.configDir+"/plugins"},t.prototype.enablePlugin=function(t){return D(this,void 0,Promise,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:if(!(e=this.manifests[t]))return[2,!1];if(this.isDeprecated(e))return new jb("Unable to load plugin "+e.name+" v"+e.version+". This version has been reported to cause issues. Please check for a newer version of the plugin."),[2,!1];if(!By.isDesktopApp&&e.isDesktopOnly)return[2,!1];i.label=1;case 1:return i.trys.push([1,3,,4]),this.loadingPluginId=t,[4,this.loadPlugin(t)];case 2:return i.sent(),this.loadingPluginId=null,[3,4];case 3:return n=i.sent(),this.loadingPluginId=null,new jb("Failed to load plugin "+t),console.error("Plugin failure: "+t,n),[2,!1];case 4:return[2,!0]}}))}))},t.prototype.disablePlugin=function(t){return D(this,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.unloadPlugin(t)];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),new jb("Failed to unload plugin "+t),console.error("Plugin failure: "+t,e),[3,3];case 3:return[2]}}))}))},t.prototype.enablePluginAndSave=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.enablePlugin(t)];case 1:return e.sent()?(this.enabledPlugins.add(t),this.requestSaveConfig(),[2,!0]):[2,!1]}}))}))},t.prototype.disablePluginAndSave=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return this.enabledPlugins.delete(t),this.requestSaveConfig(),[4,this.disablePlugin(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.uninstallPlugin=function(t){return D(this,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return[4,this.disablePluginAndSave(t)];case 1:return i.sent(),(e=this.manifests[t])?(n=e.dir)?[4,this.app.vault.exists(n)]:[2]:[2];case 2:return i.sent()?[4,this.app.vault.adapter.rmdir(n,!0)]:[2];case 3:return i.sent(),[4,this.loadManifests()];case 4:return i.sent(),[2]}}))}))},t.prototype.getPlugin=function(t){var e=this.plugins[t];return e||null},t.prototype.saveConfig=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.app.vault.writeConfigJson("community-plugins",Array.from(this.enabledPlugins))];case 1:return t.sent(),[2]}}))}))},t.prototype.isEnabled=function(){return"true"===localStorage.getItem("enable-plugin-"+this.app.appId)},t.prototype.setEnable=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:if(localStorage.setItem("enable-plugin-"+this.app.appId,t?"true":"false"),t)return[3,5];e=Object.keys(this.plugins),n=0,i=e,a.label=1;case 1:return n<i.length?(s=i[n],[4,this.disablePlugin(s)]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[3,9];case 5:r=0,o=Array.from(this.enabledPlugins),a.label=6;case 6:return r<o.length?(s=o[r],[4,this.enablePlugin(s)]):[3,9];case 7:a.sent(),a.label=8;case 8:return r++,[3,6];case 9:return[2]}}))}))},t.prototype.checkForDeprecations=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:if(0===Object.keys(this.plugins).length)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),e=(t=JSON).parse,[4,ajaxPromise({url:UN})];case 2:return _N=e.apply(t,[a.sent()]),[3,4];case 3:return a.sent(),[3,4];case 4:for(i in n=[],this.plugins)n.push(i);r=0,a.label=5;case 5:return r<n.length?(o=n[r],this.plugins.hasOwnProperty(o)?(s=this.manifests[o]||this.plugins[o].manifest,this.isDeprecated(s)?[4,this.disablePluginAndSave(o)]:[3,7]):[3,7]):[3,8];case 6:a.sent(),new jb("The plugin "+s.name+" v"+s.version+" has been disabled. This version has been reported to cause issues. Please check for a newer version of the plugin.",0),a.label=7;case 7:return r++,[3,5];case 8:return[2]}}))}))},t.prototype.isDeprecated=function(t){if(!t)return!1;var e=t.id;if(!_N.hasOwnProperty(t.id))return!1;var n=_N[e],i=t.version;return n.contains(i)},t.prototype.getLatestVersion=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:if(n=e.version||null,i=e.minAppVersion,!ZV||!i||!yF(ZV,i))return[2,n];c.label=1;case 1:return c.trys.push([1,3,,4]),n=null,r=EN(t,"versions.json"),a=(s=JSON).parse,[4,ajaxPromise({url:r})];case 2:if(o=a.apply(s,[c.sent()])){for(l in o)o.hasOwnProperty(l)&&(yF(ZV,o[l])||n&&!yF(n,l)||(n=l));return[2,n]}return[3,4];case 3:return c.sent(),[3,4];case 4:return[2,null]}}))}))},t.prototype.ajaxCorsBypass=function(t){return By.isMobileApp?YF.requestUrl({url:t}).then((function(t){return t.body})):ajaxPromise({url:t})},t.prototype.installPlugin=function(t,e,n){return D(this,void 0,Promise,(function(){var i,r,o,s,a,l,c,u,h,p,d,f,g,m;return A(this,(function(v){switch(v.label){case 0:i=n.id,r=n.name,new jb(zN("msg-installing-plugin",{name:r})),o=null,v.label=1;case 1:return v.trys.push([1,3,,4]),s=LN(t,e,AN),[4,this.ajaxCorsBypass(s)];case 2:return o=v.sent(),(a=JSON.parse(o)).id&&a.id===i?[3,4]:(new jb("Plugin ID mismatch."),[2]);case 3:return l=v.sent(),console.error(l),new jb(zN("msg-failed-to-install-plugin",{name:r})),[2];case 4:return c=this.app.vault,u=this.getPluginFolder(),[4,c.exists(u)];case 5:return v.sent()?[3,7]:[4,c.createFolder(u)];case 6:v.sent(),v.label=7;case 7:return h=u+"/"+i,[4,c.exists(h)];case 8:return v.sent()?[3,10]:[4,c.createFolder(h)];case 9:v.sent(),v.label=10;case 10:return[4,(p=c.adapter).write(h+"/"+AN,o)];case 11:v.sent(),v.label=12;case 12:return v.trys.push([12,15,,16]),d=LN(t,e,TN),[4,this.ajaxCorsBypass(d)];case 13:return f=v.sent(),[4,p.write(h+"/"+TN,f)];case 14:return v.sent(),[3,16];case 15:return v.sent(),console.log(r+": "+"main.js not found"),[3,16];case 16:return v.trys.push([16,19,,20]),g=LN(t,e,PN),[4,this.ajaxCorsBypass(g)];case 17:return m=v.sent(),[4,p.write(h+"/"+PN,m)];case 18:return v.sent(),[3,20];case 19:return v.sent(),console.log(r+": "+PN+" not found"),[3,20];case 20:return delete this.updates[i],new jb(zN("msg-successfully-installed-plugin",{name:r})),[4,this.loadManifests()];case 21:return v.sent(),this.plugins.hasOwnProperty(i)?[4,this.disablePlugin(i)]:[3,24];case 22:return v.sent(),[4,this.enablePlugin(i)];case 23:v.sent(),v.label=24;case 24:return[2]}}))}))},t.prototype.checkForUpdates=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g;return A(this,(function(m){switch(m.label){case 0:this.updates={},t=this.updates,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,VN()];case 2:return e=m.sent(),[3,4];case 3:return n=m.sent(),console.error(n),new jb(zN("msg-failed-load-plugins")),[2];case 4:i=0,r=e,m.label=5;case 5:if(!(i<r.length))return[3,12];if(o=r[i],s=o.id,!this.manifests.hasOwnProperty(s))return[3,11];if(a=this.manifests[s],!(l=a.version))return[3,11];c=o.repo,u=EN(c,AN),h=null,m.label=6;case 6:return m.trys.push([6,8,,9]),d=(p=JSON).parse,[4,ajaxPromise({url:u})];case 7:return(h=d.apply(p,[m.sent()]))&&h.id&&h.id===s?[3,9]:[3,11];case 8:return m.sent(),[3,11];case 9:return[4,this.getLatestVersion(c,h)];case 10:(f=m.sent())&&yF(l,f)&&(t[s]={repo:c,version:f,manifest:h}),m.label=11;case 11:return i++,[3,5];case 12:return g=Object.keys(t).length,new jb(0===g?zN("msg-no-updates-found"):zN("msg-updates-found",{count:g})),[2]}}))}))},t}(),RN=function(t){function e(e){var n=t.call(this,e)||this;n.containerEl.addClass("mod-confirmation"),n.titleEl.setText(zN("option-safe-mode")),n.contentEl.createEl("p",{cls:"mod-warning",text:zN("label-third-party-plugin-warning")}),n.contentEl.createEl("p",{text:zN("label-disable-safe-mode-confirmation")});var i=n.modalEl.createDiv("modal-button-container"),r=i.createEl("button",{cls:"mod-cta",text:zN("button-keep-safe-mode")});return i.createEl("button",{cls:"mod-warning",text:zN("button-disable-safe-mode")}).addEventListener("click",(function(){return D(n,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return this.close(),[4,this.app.plugins.setEnable(!0)];case 1:return t.sent(),this.app.setting.open(),this.app.setting.openTabById("community-plugins"),[2]}}))}))})),r.addEventListener("click",(function(){return D(n,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return this.close(),[4,this.app.plugins.setEnable(!1)];case 1:return t.sent(),this.app.setting.open(),this.app.setting.openTabById("community-plugins"),[2]}}))}))})),n}return M(e,t),e}(KD),zN=Me("setting.third-party-plugin"),HN=EN("obsidianmd/obsidian-releases","community-plugins.json"),VN=Lh((function(){return D(void 0,void 0,Promise,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return[4,ajaxPromise({url:HN})];case 1:if(t=n.sent(),e=JSON.parse(t),!Array.isArray(e))throw new Error("Failed to parse community plugins.");return[2,e]}}))}))}),3e5,6e4),qN=EN("obsidianmd/obsidian-releases","community-plugin-stats.json"),jN=Lh((function(){return D(void 0,void 0,Promise,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return e=(t=JSON).parse,[4,ajaxPromise({url:qN})];case 1:return[2,e.apply(t,[n.sent()])]}}))}))}),3e5,6e4),UN=EN("obsidianmd/obsidian-releases","community-plugin-deprecation.json"),_N={},WN=[["download","downloadReverse"],["release","releaseReverse"],["alphabetical","alphabeticalReverse"]],GN={download:"label-sort-downloads-high-to-low",downloadReverse:"label-sort-downloads-low-to-high",release:"label-sort-release-date-new-to-old",releaseReverse:"label-sort-release-date-old-to-new",alphabetical:"label-sort-name-alphabetical",alphabeticalReverse:"label-sort-name-alphabetical-reverse"},KN=function(t){function e(e,n,i){var r=t.call(this,e)||this;r.autoload=n,r.returnToSettings=i,r.sortOrder=e.vault.getConfig("communityPluginSortOrder");var o=r.contentEl;r.modalEl.addClass("mod-community-plugin"),o.addClass("community-plugin");var s=r.searchContainerEl=o.createDiv("community-plugin-search"),a=r.pluginContentEl=o.createDiv("community-plugin-details",(function(t){t.createDiv("community-plugin-details-empty-state",(function(t){t.createEl("p",{text:zN("label-select-a-plugin")})}))}));return By.isMobile&&a.detach(),new DA(s).addSearch((function(t){return t.setPlaceholder(zN("placeholder-community-plugins")).onChange(r.updateSearch.bind(r)).then((function(t){r.searchEl=t.inputEl}))})).addButton((function(t){return t.onClick((function(t){r.showSortMenu(t)})).then((function(t){if(By.isMobile)t.setButtonText(Ee("plugins.file-explorer.action-change-sort"));else{var e=t.buttonEl;Ty(e,Lm),$e(e,Ee("plugins.file-explorer.action-change-sort")),e.addClass("clickable-icon")}}))})),r.searchSummaryEl=s.createDiv("community-plugin-search-summary u-muted"),r.searchResultEl=s.createDiv("community-plugin-search-results"),r.updateSearch(""),r}return M(e,t),e.prototype.updateSearch=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,x,S,E,M,L,D=this;return A(this,(function(A){switch(A.label){case 0:n=(e=this).app,i=e.searchResultEl,r=e.sortOrder,i.empty(),i.addClass("is-loading"),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,VN()];case 2:return o=A.sent(),[3,4];case 3:return s=A.sent(),console.error(s),[3,4];case 4:if(!o)return new jb(zN("msg-failed-load-plugins")),i.removeClass("is-loading"),[2];a={},A.label=5;case 5:return A.trys.push([5,7,,8]),[4,jN()];case 6:return a=A.sent(),[3,8];case 7:return A.sent(),[3,8];case 8:for((l=this.autoload)&&(this.autoload=null),c=null,u=0,h=o;u<h.length;u++)(L=h[u]).id===l&&(c=L);if(l&&!c&&(t=l.split("-").join(" "),setTimeout((function(){return D.searchEl.value=t}),0)),t=t.trim().toLowerCase(),p=t.split(" "),d=[],""===t)for(d=o.slice(),f=0,g=o;f<g.length;f++)(L=g[f]).matches=null,L.score=0;else for(m=0,v=o;m<v.length;m++)(L=v[m]).name&&L.repo&&(L.matches=IT(p,L.name.toLowerCase()+L.description.toLowerCase()),L.matches&&(L.score=AT(L.matches,L.name.length+L.description.length,t.length,0),d.push(L)));for(y=n.plugins.manifests,b=[],w=0,k=d;w<k.length;w++)(L=k[w]).id&&L.name&&L.repo&&(L.downloads=0,a.hasOwnProperty(L.id)&&(L.downloads=a[L.id].downloads),b.push(L));for("release"===r?b.reverse():"releaseReverse"!==r&&(C=null,"download"===r?C=function(t,e){return e.downloads-t.downloads}:"downloadReverse"===r?C=function(t,e){return t.downloads-e.downloads}:"alphabetical"===r?C=function(t,e){return DN(t.name,e.name)}:"alphabeticalReverse"===r&&(C=function(t,e){return-DN(t.name,e.name)}),b.sort(C)),x=Ee("nouns.plugin-with-count",{count:b.length}),this.searchSummaryEl.setText(zN("label-search-summary",{pluginCount:x})),S=function(t){var e=i.createDiv("community-plugin-item"),n=e.createDiv("community-plugin-name");(RT(n,t.name,t.matches),y.hasOwnProperty(t.id)&&n.createSpan({cls:"flair mod-pop",text:zN("label-installed")}),t.downloads&&e.createDiv("community-plugin-downloads",(function(e){e.createSpan({},(function(t){Ty(t,$m,12)})),e.createSpan({cls:"community-plugin-downloads-text",text:t.downloads.toLocaleString()})})),t.author&&e.createDiv({cls:"community-plugin-author",text:zN("label-by-author")+t.author}),t.description)&&RT(e.createDiv({cls:"community-plugin-desc"}),fF(t.description,200),t.matches,-t.name.length);e.addEventListener("click",(function(){D.showPlugin(t)}))},E=0,M=b;E<M.length;E++)L=M[E],S(L);return i.firstChild||i.createDiv({cls:"community-plugin-item",text:zN("label-no-results-found")}),i.removeClass("is-loading"),c&&this.showPlugin(c),[2]}}))}))},e.prototype.showPlugin=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,x,S,E,M,L,T,P,O=this;return A(this,(function(F){switch(F.label){case 0:n=(e=this).app,(i=e.pluginContentEl).addClass("is-loading"),i.empty(),r=t.id,o=t.name,s=t.description,a=t.repo,l=EN(a,AN),c=EN(a,"README.md"),u=null,F.label=1;case 1:return F.trys.push([1,3,,4]),p=(h=JSON).parse,[4,ajaxPromise({url:l})];case 2:return(u=p.apply(h,[F.sent()])).id&&u.id===r?[3,4]:(new jb("Plugin ID mismatch."),i.removeClass("is-loading"),[2]);case 3:return d=F.sent(),console.error(d),new jb(zN("msg-failed-to-load-manifest")),i.removeClass("is-loading"),[2];case 4:i.empty(),By.isMobile&&((f=i.createDiv({cls:"modal-setting-back-button"},(function(t){t.addEventListener("click",(function(){Lb(O.contentEl,O.searchContainerEl,"left")}))}))).createSpan("modal-setting-back-button-icon",(function(t){Ty(t,fm,20)})),f.createSpan({text:Ee("interface.start-screen.button-back")}),Lb(this.contentEl,i,"right")),g=n.plugins.manifests[r],m=i.createDiv("community-plugin-info"),v=m.createDiv({cls:"community-plugin-name",text:o}),g&&v.createSpan({cls:"flair mod-pop",text:zN("label-installed")}),t.downloads&&m.createDiv("community-plugin-downloads",(function(e){e.createSpan({},(function(t){Ty(t,$m,12)})),e.createSpan({cls:"community-plugin-downloads-text",text:t.downloads.toLocaleString()}),$e(e,zN("tooltip-downloaded-times",{count:t.downloads}))})),u.version&&(y=m.createDiv({cls:"community-plugin-version",text:zN("label-version",{version:u.version})}),g&&g.version&&y.appendText(zN("label-currently-installed-version",{version:g.version}))),(b=t.author||u.author)&&(w=m.createDiv({cls:"community-plugin-author",text:zN("label-by-author")}),u.authorUrl?w.createEl("a",{href:u.authorUrl,text:b}):w.appendText(b)),k=m.createDiv({cls:"community-plugin-author",text:zN("label-repository")}),C=MN(a),k.createEl("a",{href:C,text:C}),s&&m.createDiv({cls:"community-plugin-desc",text:s}),(x=!By.isDesktopApp&&u.isDesktopOnly)&&m.createDiv({cls:"mod-warning",text:zN("label-unsupported")}),S=m.createEl("p"),(E=S.createEl("button",{cls:"mod-cta",text:zN("button-install")})).addEventListener("click",(function(){return D(O,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return x?(new jb(zN("label-unsupported")),[2]):[4,(e=this.app.plugins).getLatestVersion(a,u)];case 1:return(n=i.sent())?[4,e.installPlugin(a,n,u)]:(new jb("No appropriate version found."),[2]);case 2:return i.sent(),[4,this.showPlugin(t)];case 3:return i.sent(),[2]}}))}))})),g&&(yF(g.version,u.version)?E.setText(zN("button-update")):E.detach(),M=this.app.plugins.plugins.hasOwnProperty(r),S.createEl("button",{text:zN(M?"button-disable":"button-enable")}).addEventListener("click",(function(){return D(O,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return M?[4,this.app.plugins.disablePluginAndSave(r)]:[3,2];case 1:return e.sent(),[3,4];case 2:return[4,this.app.plugins.enablePluginAndSave(r)];case 3:e.sent(),e.label=4;case 4:return[4,this.showPlugin(t)];case 5:return e.sent(),[2]}}))}))})),S.createEl("button",{text:zN("label-uninstall")}).addEventListener("click",(function(){return D(O,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.app.plugins.uninstallPlugin(r)];case 1:return e.sent(),[4,this.showPlugin(t)];case 2:return e.sent(),[2]}}))}))}))),S.createEl("button",{text:zN("button-copy-share-link")}).addEventListener("click",(function(){return D(O,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,navigator.clipboard.writeText("obsidian://show-plugin?id="+encodeURIComponent(r))];case 1:return t.sent(),new jb(Ee("interface.copied")),[2]}}))}))})),F.label=5;case 5:return F.trys.push([5,7,,8]),[4,ajaxPromise({url:c})];case 6:return L=F.sent(),[3,8];case 7:return F.sent(),L=zN("label-no-readme"),[3,8];case 8:return m.createEl("hr"),T=m.createDiv("community-plugin-readme markdown-preview-view"),P=Lg(Eg(L)),T.appendChild(zg(P)),i.removeClass("is-loading"),[2]}}))}))},e.prototype.onClose=function(){this.returnToSettings&&(this.app.setting.open(),this.app.setting.openTabById("community-plugins"))},e.prototype.showSortMenu=function(t){var e=this;t.preventDefault();for(var n=new zb(this.app),i=this.sortOrder,r=0,o=WN;r<o.length;r++){for(var s=function(t){var r=zN(GN[t]);n.addItem((function(n){return n.setTitle(r).setActive(t===i).onClick((function(){e.sortOrder=t,e.app.vault.setConfig("communityPluginSortOrder",t),e.updateSearch(e.searchEl.value)}))}))},a=0,l=o[r];a<l.length;a++){s(l[a])}n.addSeparator()}n.showAtMouseEvent(t)},e}(KD),$N=function(t){function e(e,n,i){var r=t.call(this)||this;return r.manager=null,r.instance=null,r.enabled=!1,r.commands=[],r.ribbonActions=[],r.mobileFileInfo=[],r.hasStatusBarItem=!1,r.statusBarEl=null,r.addedButtonEls=[],r.views={},r.app=e,r.instance=n,r.manager=i,r}return M(e,t),e.prototype.init=function(){var t=this.instance;t.init&&t.init(this.app,this)},e.prototype.enable=function(t){if(!this.enabled){this.enabled=!0;for(var e=this,n=e.instance,i=e.views,r=e.app,o=0,s=this.commands;o<s.length;o++){var a=s[o];r.commands.addCommand(a)}for(var l=0,c=this.ribbonActions;l<c.length;l++){var u=c[l],h=r.workspace.leftRibbon.addRibbonActionButton(u.icon,u.title,u.callback);this.addedButtonEls.push(h)}if(By.isMobile)for(var p=0,d=this.mobileFileInfo;p<d.length;p++){var f=d[p];r.workspace.addMobileFileInfo(f)}for(var g in this.hasStatusBarItem&&(this.statusBarEl=r.statusBar.registerStatusBarItem(),this.statusBarEl.addClass("plugin-"+this.instance.id.toLowerCase().replace(/[^_a-zA-Z0-9-]/,"-"))),i)i.hasOwnProperty(g)&&this.app.viewRegistry.registerView(g,i[g]);n.onEnable&&n.onEnable(r,this),t&&n.onUserEnable&&n.onUserEnable(r),this.load(),this.manager.requestSaveConfig(),this.manager.trigger("change",this)}},e.prototype.disable=function(t){if(this.enabled){this.enabled=!1;var e=this,n=e.instance,i=e.views,r=e.app;n.onDisable&&n.onDisable(r,this),t&&n.onUserDisable&&n.onUserDisable(r);for(var o=0,s=this.commands;o<s.length;o++){var a=s[o];r.commands.removeCommand(a.id)}for(var l=0,c=this.addedButtonEls;l<c.length;l++){c[l].detach()}for(var u in this.statusBarEl&&this.statusBarEl.detach(),i)i.hasOwnProperty(u)&&(this.app.viewRegistry.unregisterView(u),t&&r.workspace.detachLeavesOfType(u));this.unload(),this.manager.requestSaveConfig(),this.manager.trigger("change",this)}},e.prototype.loadData=function(){return D(this,void 0,Promise,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return t=this.instance.id,[4,this.manager.app.vault.readConfigJson(t)];case 1:return[2,e.sent()]}}))}))},e.prototype.saveData=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=this.instance.id,[4,this.manager.app.vault.writeConfigJson(e,t)];case 1:return n.sent(),[2]}}))}))},e.prototype.deleteData=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.manager.app.vault.deleteConfigJson(this.instance.id)];case 1:return t.sent(),[2]}}))}))},e.prototype.registerViewType=function(t,e){this.views[t]=e},e.prototype.registerGlobalCommand=function(t){t.name=this.instance.name+": "+t.name,this.commands.push(t)},e.prototype.registerRibbonAction=function(t,e,n){this.ribbonActions.push({title:t,icon:e,callback:n})},e.prototype.registerStatusBarItem=function(){this.hasStatusBarItem=!0},e.prototype.registerMobileFileInfo=function(t){this.mobileFileInfo.push({renderCallback:t})},e.prototype.addSettingTab=function(t){var e=this;this.app.setting.addSettingTab(t),this.register((function(){return e.app.setting.removeSettingTab(t)}))},e}(Vg),YN=function(t){function e(e){var n=t.call(this)||this;return n.plugins={},n.requestSaveConfig=De(n.saveConfig.bind(n),500),n.app=e,n}return M(e,t),e.prototype.getPluginById=function(t){var e=this.plugins;return e.hasOwnProperty(t)?e[t]:null},e.prototype.loadPlugin=function(t){var e=this.app,n=this.plugins;if(n.hasOwnProperty(t.id))throw new Error("Plugin "+t.name+" has already been loaded");var i=new $N(e,t,this);return i.init(),n[t.id]=i,t},e.prototype.getEnabledPlugins=function(){var t=this.plugins,e=[];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i.enabled&&e.push(i)}return e},e.prototype.enable=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return e=(t=this).app,n=t.plugins,[4,e.vault.readConfigJson("core-plugins")];case 1:if(!(i=s.sent())){for(o in i=[],n)n.hasOwnProperty(o)&&n[o].instance.defaultOn&&i.push(o);this.requestSaveConfig()}for(o in Array.isArray(i)||(i=[]),r=new Set(i),n)n.hasOwnProperty(o)&&r.has(o)&&n[o].enable(!1);return[2]}}))}))},e.prototype.saveConfig=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r;return A(this,(function(o){switch(o.label){case 0:for(r in e=(t=this).app,n=t.plugins,i=[],n)n.hasOwnProperty(r)&&n[r].enabled&&i.push(r);return[4,e.vault.writeConfigJson("core-plugins",i)];case 1:return o.sent(),[2]}}))}))},e.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.prototype.trigger.apply(this,P([e],n))},e.prototype.on=function(e,n,i){return t.prototype.on.call(this,e,n,i)},e}(sb),JN=[["alphabetical","alphabeticalReverse"],["byModifiedTime","byModifiedTimeReverse"],["byCreatedTime","byCreatedTimeReverse"]],QN={alphabetical:"plugins.file-explorer.label-sort-a-to-z",alphabeticalReverse:"plugins.file-explorer.label-sort-z-to-a",byModifiedTime:"plugins.file-explorer.label-sort-new-to-old",byModifiedTimeReverse:"plugins.file-explorer.label-sort-old-to-new",byCreatedTime:"plugins.file-explorer.label-sort-created-new-to-old",byCreatedTimeReverse:"plugins.file-explorer.label-sort-created-old-to-new"},XN={alphabetical:function(t,e){return DN(t.basename,e.basename)},alphabeticalReverse:function(t,e){return-XN.alphabetical(t,e)},byModifiedTime:function(t,e){return e.stat.mtime-t.stat.mtime},byModifiedTimeReverse:function(t,e){return-XN.byModifiedTime(t,e)},byCreatedTime:function(t,e){return e.stat.ctime-t.stat.ctime},byCreatedTimeReverse:function(t,e){return-XN.byCreatedTime(t,e)}};function ZN(t){return"children"in t&&"childrenEl"in t}function tB(){var t=createDiv();return t.style.width="1px",t.style.height="0.1px",t.style.marginBottom="0",t}var eB=function(t,e){if(e(t),ZN(t)){var n=t.children;if(t.childrenEl.parentNode)for(var i=0,r=n;i<r.length;i++){var o=r[i];eB(o,e)}}},nB=function(){function t(t){var e=this;this.width=0,this.height=0,this.lastScroll=0,this.queued=null,this.scrollEl=t;var n=getComputedStyle(t).overflowX;this.setWidth="auto"===n||"scroll"===n,t.style.position="relative",t.addEventListener("scroll",this.onScroll.bind(this),sh),t.onNodeInserted((function(){return e.queueCompute()}))}return t.prototype.invalidate=function(t,e){e?eB(t,(function(t){return t.info.computed=!1})):t.info.computed=!1,this.queueCompute()},t.prototype.invalidateAll=function(){this.rootEl&&(eB(this.rootEl,(function(t){return t.info.computed=!1})),this.queueCompute())},t.prototype.onScroll=function(){var t=this,e=t.scrollEl,n=t.lastScroll,i=t.height,r=e.scrollTop;Math.abs(n-r)>Math.max(i,300)/2&&this.updateVirtualDisplay(r)},t.prototype.onResize=function(){var t=this.scrollEl;if(null!==t.offsetParent){this.height=t.clientHeight;var e=t.clientWidth;e!==this.width?(this.width=e,this.invalidateAll()):this.updateVirtualDisplay()}},t.prototype.queueCompute=function(){this.queued||(this.queued=Ie(this.compute.bind(this),50))},t.prototype.computeSync=function(){for(var t=0;t<10&&!this.rootEl.info.computed;t++)this.compute()},t.prototype.compute=function(){this.queued&&(this.queued.cancel(),this.queued=null);var t=this.scrollEl,e=this.rootEl;if(e){var n=t.scrollTop;if(null!==t.offsetParent){this._precompute(e),this._layout(e),this._measure(e);var i=!0;if(e.children)for(var r=0,o=e.children;r<o.length;r++){if(!o[r].info.computed){i=!1;break}}e.info.computed=i,this.updateVirtualDisplay(n),i||this.queueCompute()}}},t.prototype._precompute=function(t){if(ZN(t)){var e=t.children,n=t.childrenEl;if(e&&n.parentNode)for(var i=0,r=e;i<r.length;i++){var o=r[i];this._precompute(o)||(t.info.computed=!1)}}return t.info.queued=!1,t.info.computed},t.prototype._layout=function(t){var e=t.info;if(!e.computed){var n=!0;if(ZN(t)){var i=t.children,r=t.childrenEl,o=t.pusherEl;if(r.parentNode){o.style.marginBottom="0";for(var s=[o],a=0,l=0,c=i;l<c.length;l++){var u=c[l];this._layout(u),u.info.computed?(eB(u,(function(t){return a+=t.info.height})),u.el.parentNode===r&&s.push(u.el)):(n=!1,s.push(u.el))}r.setChildrenInPlace(s),r.style.minHeight=a+"px"}}n&&(e.queued=!0)}},t.prototype._measure=function(t){if(!t.info.computed&&ZN(t)){var e=t.children;if(t.childrenEl.parentNode)for(var n=0,i=e;n<i.length;n++){var r=i[n];this._measure(r),r.info.queued&&(this.measure(t,r),r.info.computed=!0)}}},t.prototype.measure=function(t,e){var n=e.el,i=e.info;if(n.offsetParent){i.hidden=!1;var r=e===t.children[0],o=n.nextSibling,s=r?t.childrenEl.offsetTop:n.offsetTop,a=o?o.offsetTop:n.offsetTop+n.offsetHeight,l=0;ZN(e)&&(l=e.childrenEl.offsetHeight),i.height=a-s-l,0===i.height&&0===l&&(i.hidden=!0),this.setWidth&&(i.width=Math.max(n.scrollWidth,n.offsetWidth)),ZN(e)&&(i.childTop=e.childrenEl.offsetTop-s)}else i.hidden=!0},t.prototype.updateVirtualDisplay=function(t){var e=this.scrollEl,n=this.rootEl,i=e.scrollTop;"number"==typeof t&&(i=t),this.lastScroll=i;var r=e.clientHeight,o=i+r,s=Math.min(i,e.scrollTop),a=Math.max(r,300),l=s-a,c=o+a,u=0,h=0;eB(n,(function(t){var e=t.info.height;e>0&&(u+=e,h++)})),u/=h,this.update(n,this.getRootTop(),l,c,u),e.scrollTop!==i&&(e.scrollTop=i)},t.prototype.update=function(t,e,n,i,r){if(ZN(t)){var o=t.children,s=t.childrenEl,a=t.info,l=t.pusherEl;if(s.parentNode){if(a.hidden)return;var c=this.setWidth,u=0,h=0,p=[l],d=!1,f=0;e+=a.height;for(var g=function(t){var o=0;eB(t,(function(t){return o+=t.info.hidden?0:t.info.height||r})),h+=o;var s=e+o;c&&(f=Math.max(f,t.info.width)),d=!1,s<n?u+=o:e>i||(p.push(t.el),m.update(t,e,n,i,r),d=!0),e=s},m=this,v=0,y=o;v<y.length;v++){g(k=y[v])}s.setChildrenInPlace(p),l.style.marginBottom=u+"px",c&&(f=Math.max(1,f),l.style.width=f+"px"),s.style.minHeight=d?"":h+"px"}else{p=[];for(var b=0,w=o;b<w.length;b++){var k=w[b];p.push(k.el)}s.setChildrenInPlace(p),s.style.minHeight=""}}},t.prototype.scrollIntoView=function(t){var e=this.findElementTop(t,this.rootEl,this.getRootTop());if(null!==e){var n=0;eB(t,(function(t){return n+=t.info.height}));var i=e+n,r=this.scrollEl,o=r.scrollTop,s=o+r.clientHeight;e<o?r.scrollTop=e:i>s&&(r.scrollTop=i-r.clientHeight),this.updateVirtualDisplay()}},t.prototype.findElementTop=function(t,e,n){if(t===e)return n;if(ZN(e)){var i=e.children,r=e.childrenEl,o=e.info;if(r.parentNode){n+=o.height;for(var s=function(e){var i=a.findElementTop(t,e,n);if(null!==i)return{value:i};var r=0;eB(e,(function(t){return r+=t.info.height})),r,n+=r},a=this,l=0,c=i;l<c.length;l++){var u=s(c[l]);if("object"==typeof u)return u.value}}}return null},t.prototype.getRootTop=function(){for(var t=this.scrollEl,e=this.rootEl.childrenEl,n=0;e&&e!==t;)n+=e.offsetTop,e=e.offsetParent;return n},t}(),iB=(function(){function t(t,e){this.elements=[],this.lastScroll=0,this.viewportHeight=0,this.renderedWidth=0,this.showAll=!1,this.nodeInfos=Ny(),this.containerEl=t,this.scrollEl=e=e||t,e.style.position="relative",this.sizerEl=t.createDiv();var n=this.pusherEl=createDiv();n.style.width="1px",n.style.height="0.1px",e.addEventListener("scroll",this.onScroll.bind(this)),this.requestRerender=De(this.rerender.bind(this),100),this.onResize()}t.prototype.append=function(t){this.elements.push(t),this.requestRerender()},t.prototype.clear=function(){this.elements=[],this.requestRerender()},t.prototype.invalidate=function(t){var e=this.nodeInfos.get(t);e&&(e.valid=!1,this.requestRerender())},t.prototype.invalidateAll=function(){for(var t=this.elements,e=this.nodeInfos,n=0,i=t;n<i.length;n++){var r=i[n],o=e.get(r);o&&(o.valid=!1)}this.requestRerender()},t.prototype.onResize=function(){var t=this.scrollEl,e=this.containerEl;this.viewportHeight=t.clientHeight;var n=e.offsetWidth;n!==this.renderedWidth?(this.renderedWidth=n,this.invalidateAll()):this.updateVirtualDisplay()},t.prototype.onScroll=function(){var t=this,e=t.scrollEl,n=t.lastScroll,i=t.viewportHeight,r=e.scrollTop;Math.abs(n-r)>i/8&&this.updateVirtualDisplay()},t.prototype.updateVirtualDisplay=function(){var t=this,e=t.showAll,n=t.scrollEl,i=t.containerEl,r=t.sizerEl,o=t.pusherEl,s=t.elements,a=t.nodeInfos;if(e){var l=[];l.push(o);for(var c=0,u=s;c<u.length;c++){var h=u[c];l.push(h)}return r.setChildrenInPlace(l),r.style.minHeight="",void(o.style.marginBottom="0")}var p=n.scrollTop;this.lastScroll=p,n!==i&&(p-=i.offsetTop);var d=n.clientHeight,f=d/4,g=p-f,m=p+d+f,v=0,y=0,b=1,w=[];w.push(o);for(var k=0,C=s;k<C.length;k++){h=C[k];var x=a.get(h);if(!x)break;var S=x.height,E=x.width,M=y+S;b=Math.max(b,E),M<g?(h.parentNode===r&&h.detach(),v=M):y>m?(h.parentNode===r&&h.detach()):(w.push(h)),y=M}r.setChildrenInPlace(w),r.style.minHeight=y+"px",o.style.marginBottom=v+"px"},t.prototype.rerender=function(){for(var t=this,e=t.scrollEl,n=t.sizerEl,i=t.pusherEl,r=t.elements,o=t.nodeInfos,s=e.scrollTop,a=[],l=!1,c=[i],u=0,h=r;u<h.length;u++){var p=(m=h[u]).parentElement===n,d=o.get(m);d&&d.valid?l&&(p=!0,l=!1):(p=!0,a.push(m),l=!0),p&&c.push(m)}i.style.marginBottom="0",n.setChildrenInPlace(c);for(var f=0,g=a;f<g.length;f++){var m,v=(m=g[f]).nextSibling,y=(v?v.offsetTop:m.offsetTop+m.offsetHeight)-m.offsetTop;o.set(m,{height:y,width:m.scrollWidth,valid:!0})}e.scrollTop=s,this.updateVirtualDisplay()}}(),/\r?\n\r?\n/y);function rB(t,e,n,i,r){!function(t,e,n,i){for(var r=t,o=0;o<n.length;o++){var s=n[o],a=s[0];if(a>=e)break;var l=s[1];l<t||(a<t&&(a=t),l>e&&(l=e),a>r&&i(!1,r,a),i(!0,a,l),r=l)}r<e&&i(!1,r,e)}(n,i,r,(function(n,i,r){var o=e.substring(i,r);n?t.createSpan({cls:"search-result-file-matched-text",text:o}):t.createSpan({text:o})}))}var oB=function(){function t(t,e,n,i,r,o){var s=this;void 0===o&&(o=!0),this.collapsible=!0,this.collapsed=!1,this.extraContext=!0,this.separateMatches=!1,this.showTitle=!0,this.onMatchRender=null,this.info={height:0,width:0,childTop:0,computed:!1,queued:!1,hidden:!1},this.children=[],this.pusherEl=tB(),this.app=t,this.parent=e,this.file=n,this.result=i,this.content=r,this.showTitle=o;var a=this.el=this.containerEl=createDiv("tree-item search-result");if(o){var l=a.createDiv("tree-item-self search-result-file-title is-clickable"),c=this.collapseEl=l.createDiv("tree-item-icon collapse-icon");Ty(c,Wg,8),c.style.visibility="hidden",Be(l),l.onClickEvent(this.onResultClick.bind(this)),l.addEventListener("mouseover",(function(t){return s.onResultMouseover(t,l)})),l.addEventListener("contextmenu",this.onResultContextMenu.bind(this)),c.addEventListener("click",this.onCollapseClick.bind(this));var u=l.createDiv("tree-item-inner");if(i.filename||i.filepath){var h=void 0,p=void 0;if(i.filepath){if(h=n.path,p=i.filepath,i.filename)for(var d=n.path.length-n.name.length,f=0,g=i.filename;f<g.length;f++){var m=g[f];p.push([m[0]+d,m[1]+d])}}else h=n.name,p=i.filename,"md"===n.extension&&(0===p.length||p.last()[1]<=n.basename.length)&&(h=n.basename);rB(u,h,0,h.length,p)}else u.setText("md"===n.extension?n.basename:n.name);i.content&&i.content.length>0&&l.createDiv("tree-item-flair-outer").createSpan("tree-item-flair").setText(String(i.content.length))}this.childrenEl=a.createDiv("search-result-file-matches");var v=this.app.dragManager;v.handleDrag(a,(function(t){return v.dragFile(t,s.file)}))}return t.prototype.renderContentMatches=function(){var t=this,e=this,n=e.file,i=e.result,r=e.content,o=e.collapsible,s=e.extraContext,a=e.separateMatches,l=e.collapseEl;this.children=[],this.showTitle&&(l.style.visibility="hidden");var c=i.content;if(c&&0!==c.length){this.showTitle&&o&&(l.style.visibility="");var u=0,h=function(e,n,i,r){var o=u+1;if(!a)for(;o<c.length;){var s=c[o];if(s[0]>=n)break;if(s[1]>n){n=s[1],o++;break}o++}var l=c.slice(u,o),h=new sB(t,e,n,l);h.onMatchRender=t.onMatchRender,h.render(i,r),t.children.push(h),u=o};if(s)for(var p=this.app.metadataCache.getFileCache(n)||{},d=p.listItems,f=p.sections;u<c.length;){m=c[u];var g=this.getMatchExtraPositions(r,m,d,f);h(g[0],g[1])}else for(;u<c.length;){var m=c[u],v=this.getMatchMinimalPositions(r,m);h(v[0],v[1],v[2],v[3])}this.invalidate()}},t.prototype.getMatchMinimalPositions=function(t,e){for(var n=100,i=e[0]-1,r=0;r<n&&i>=0;){if("\n"===t.charAt(i))break;i--,r++}i++;for(var o=r===n,s=e[1],a=0;a<n&&s<t.length;){if("\n"===t.charAt(s))break;s++,a++}return[i,s,o,a===n]},t.prototype.getMatchExtraPositions=function(t,e,n,i){if(n){var r=n[c=XD(n,e[0])];if(r&&e[0]>=r.position.start.offset&&e[1]<=r.position.end.offset){var o=r,s=c+1,a=new Set;for(a.add(o.position.start.line);s<n.length;){var l=n[s];if(!a.has(l.parent))break;a.add(l.position.start.line),s++,o=l}return[r.position.start.offset-r.position.start.col,o.position.end.offset]}}if(i){var c,u=i[c=XD(i,e[0])];if(u&&e[0]>=u.position.start.offset&&e[1]<=u.position.end.offset)return[u.position.start.offset,u.position.end.offset]}for(var h=e[0],p=h-1e3;h>0&&h>p&&10!==t.charCodeAt(h-1);)h--;for(var d=e[0],f=d+1e3;d<t.length&&d<f&&10!==t.charCodeAt(d);)d++;var g=t.substring(h,d).match(Ju);if(g&&g[2]){for(var m=d;m<t.length;){var v=t.indexOf("\n",m+1);-1===v&&(v=t.length);var y=t.substring(m+1,v).match(Ju);if(y&&y[1].length<=g[1].length)break;m=v}return[h,m]}for(var b=h;b>0&&b>p&&(iB.lastIndex=b,!iB.test(t));)b--;for(;10===t.charCodeAt(b)&&b<h;)b++;for(var w=d;w<t.length&&w<f&&(iB.lastIndex=w,!iB.test(t));)w++;return[b,w]},t.prototype.getPrevPos=function(t){var e=this.app.metadataCache.getFileCache(this.file)||{},n=e.listItems,i=e.sections;if(n){var r=n[XD(n,t,!0)];if(r){var o=r.position,s=o.start,a=o.end;if(s.offset-s.col<=t&&a.offset>=t)return s.offset-s.col}}if(i){var l=i[XD(i,t,!0)];if(l&&"list"!==l.type){var c=l.position;s=c.start,a=c.end;if(s.offset-s.col<=t&&a.offset>=t)return s.offset-s.col}}for(var u=this.content,h=t;h>0&&10!==u.charCodeAt(h-1);)h--;return h},t.prototype.getNextPos=function(t){var e=this.app.metadataCache.getFileCache(this.file)||{},n=e.listItems,i=e.sections;if(n){var r=n[p=XD(n,t,!0)];if(r){var o=r.position,s=o.start,a=o.end;if(s.offset-s.col<=t&&a.offset>=t){var l=r,c=p+1,u=new Set;for(u.add(l.position.start.line);c<n.length;){var h=n[c];if(!u.has(h.parent))break;u.add(h.position.start.line),c++,l=h}return l.position.end.offset}}}if(i){var p,d=i[p=XD(i,t,!0)];if(d&&"list"!==d.type){var f=d.position;s=f.start,a=f.end;if(s.offset-s.col<=t&&a.offset>=t)return a.offset}}for(var g=this.content,m=t;m<g.length&&10!==g.charCodeAt(m);)m++;return m},t.prototype.onCollapseClick=function(t){t.preventDefault(),this.setCollapse(!this.collapsed,!0)},t.prototype.onResultClick=function(t,e){if((0===t.button||1===t.button)&&!t.defaultPrevented){t.preventDefault();var n={match:{content:this.content,matches:e||this.result.content||[]}};this.app.workspace.getLeaf(Bb.isModEvent(t)).openFile(this.file,{active:!0,eState:n})}},t.prototype.onResultMouseover=function(t,e,n){if(!t.defaultPrevented&&Ne(t,e)){t.preventDefault();var i=this.file.path,r=null;if(n&&n.length>0)r={scroll:Pt(this.content,n[0][0])};this.app.workspace.trigger("hover-link",{event:t,source:"search",hoverParent:this.parent,targetEl:e,linktext:i,state:r})}},t.prototype.onResultContextMenu=function(t){var e=new zb(this.app);this.app.workspace.handleLinkContextMenu(e,this.file.path,"")&&(t.preventDefault(),e.showAtMouseEvent(t))},t.prototype.setCollapse=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r;return A(this,(function(o){switch(o.label){case 0:return this.collapsed=t,i=(n=this).containerEl,r=n.childrenEl,i.toggleClass("is-collapsed",t),[4,Eb(r,i,t,e)];case 1:return o.sent(),this.invalidate(),[2]}}))}))},t.prototype.setCollapsible=function(t){this.collapsible!==t&&(this.collapsible=t,this.collapseEl.style.visibility=t?"":"hidden")},t.prototype.setExtraContext=function(t){this.extraContext!==t&&(this.extraContext=t,this.renderContentMatches())},t.prototype.invalidate=function(){this.parent.infinityScroll.invalidate(this,!0)},t}(),sB=function(){function t(t,e,n,i){var r=this;this.info={height:0,width:0,childTop:0,computed:!1,queued:!1,hidden:!1},this.onMatchRender=null,this.parent=t,this.start=e,this.end=n,this.matches=i;var o=this.el=createDiv("search-result-file-match");Be(o),o.onClickEvent((function(e){return t.onResultClick(e,i)}));var s=null,a=null,l=t.content.length;o.addEventListener("mouseover",(function(e){Ne(e,o)&&(t.onResultMouseover(e,o,i),s&&s.detach(),a&&a.detach(),r.start>0&&(Ty(s=o.createDiv("search-result-hover-button mod-top"),bv),$e(s,Ee("plugins.search.label-more-context"),{placement:"top"}),s.addEventListener("click",(function(t){t.preventDefault();for(var e=r.start;e>0;){e--;var n=r.parent.getPrevPos(e);if(n<e){e=n;break}}r.start=e,r.render()}))),r.end<l&&(Ty(a=o.createDiv("search-result-hover-button mod-bottom"),wv),$e(a,Ee("plugins.search.label-more-context"),{placement:"bottom"}),a.addEventListener("click",(function(t){t.preventDefault();for(var e=r.end;e<l;){e++;var n=r.parent.getNextPos(e);if(n>e){e=n;break}}r.end=e,r.render()}))))})),o.addEventListener("mouseout",(function(t){Ne(t,o)&&(s&&s.detach(),a&&a.detach())})),o.addEventListener("contextmenu",(function(e){return t.onResultContextMenu(e)}))}return t.prototype.render=function(t,e){var n=this,i=n.el,r=n.parent,o=n.matches,s=n.onMatchRender;i.empty(),t&&i.appendText("..."),rB(i,r.content,this.start,this.end,o),e&&i.appendText("..."),s&&s(o[0],i),r.parent.infinityScroll.invalidate(this)},t}(),aB=function(){function t(t,e,n,i){this.emptyStateEl=null,this.working=!1,this.showingEmptyState=!1,this.collapseAll=!1,this.extraContext=!1,this.cleared=!1,this.infinityScroll=null,this.children=[],this.resultDomLookup=new Map,this.sortOrder="alphabetical",this.changed=De(this.onChange.bind(this),0),this.info={height:0,width:0,childTop:0,computed:!1,queued:!1,hidden:!1},this.pusherEl=tB(),this.app=t,this.el=e,this.emptyStateEl=createDiv({cls:"search-empty-state",text:n}),this.childrenEl=this.el.createDiv("search-results-children"),(this.infinityScroll=new nB(i||this.el)).rootEl=this}return t.prototype.startLoader=function(){this.working=!0,this.el.addClass("is-loading"),this.onChange()},t.prototype.stopLoader=function(){this.cleared=!1,this.working=!1,this.el.removeClass("is-loading"),this.onChange()},t.prototype.onChange=function(){var t=this,e=t.sortOrder,n=t.children,i=t.emptyStateEl,r=t.infinityScroll,o=XN[e];n.sort((function(t,e){return o(t.file,e.file)})),0!==n.length||this.cleared?r.queueCompute():this.childrenEl.setChildrenInPlace([i])},t.prototype.emptyResults=function(){this.children=[],this.resultDomLookup.clear(),this.cleared=!0,this.changed()},t.prototype.getResult=function(t){return this.resultDomLookup.get(t)},t.prototype.removeResult=function(t){var e=this.children,n=this.resultDomLookup,i=n.get(t);return i&&(e.remove(i),n.delete(t),this.changed()),i},t.prototype.addResult=function(t,e,n,i){if(void 0===i&&(i=!0),t){var r=this.children,o=this.resultDomLookup,s=this.removeResult(t),a=new oB(this.app,this,t,e,n,i);return s?a.setCollapse(s.collapsed,!1):a.setCollapse(this.collapseAll,!1),a.extraContext=this.extraContext,r.push(a),o.set(t,a),this.changed(),a}},t.prototype.toggle=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,Sb(this.el,t,e)];case 1:return n.sent(),t||this.infinityScroll.invalidateAll(),[2]}}))}))},t.prototype.setCollapseAll=function(t){this.collapseAll=t;for(var e=0,n=this.children;e<n.length;e++){n[e].setCollapse(t,!1)}this.infinityScroll.invalidateAll()},t.prototype.setExtraContext=function(t){this.extraContext=t;for(var e=0,n=this.children;e<n.length;e++){n[e].setExtraContext(t)}this.infinityScroll.invalidateAll()},t.prototype.onResize=function(){this.infinityScroll.onResize()},t.prototype.getFiles=function(){return this.children.map((function(t){return t.file}))},t.prototype.getMatchCount=function(){for(var t=0,e=0,n=this.children;e<n.length;e++){t+=n[e].children.length}return t},t}(),lB=function(t){function e(e,n){var i=t.call(this)||this;return i.queue=null,i.app=e,i.dom=n,i}return M(e,t),e.prototype.onload=function(){var t=this.app.vault;this.registerEvent(t.on("rename",this.onFileChanged,this)),this.registerEvent(t.on("delete",this.onFileDeleted,this)),this.registerEvent(this.app.metadataCache.on("changed",this.onFileChanged,this))},e.prototype.onunload=function(){this.stop()},e.prototype.stop=function(){var t=this.queue;t&&(t.cancel(),this.queue=null)},e.prototype.start=function(){var t=this,e=this.app,n=this.dom,i=this.queue=new Ah({onStart:function(){n.startLoader()},onStop:function(){n.stopLoader()},onCancel:function(){t.queue=null}}),r=e.vault.getFiles();return r.sort(XN[this.dom.sortOrder]),i.addList(r),i},e.prototype.onFileChanged=function(t){var e=this.queue;e&&e.add(t)},e.prototype.onFileDeleted=function(t){var e=this.queue;e&&e.remove(t),this.dom.removeResult(t)},e}(Vg),cB=(Me("plugins.file-explorer"),function(){function t(t,e){this.navHeaderEl=null,this.navButtonsEl=null,this.app=t;var n=this.navHeaderEl=e.createDiv("nav-header");this.navButtonsEl=n.createDiv("nav-buttons-container")}return t.prototype.addNavButton=function(t,e,n,i){var r=this.navButtonsEl.createDiv("nav-action-button");return i&&r.addClass(i),r.addEventListener("click",n),By.isMobile?Ty(r,t,24):Ty(r,t,20),$e(r,e),r},t.prototype.addSortButton=function(t,e){var n=this;return this.addNavButton(Lm,Ee("plugins.file-explorer.action-change-sort"),(function(i){i.preventDefault();for(var r=new zb(n.app),o=e(),s=0,a=JN;s<a.length;s++){for(var l=function(e){var n=Ee(QN[e]);r.addItem((function(i){return i.setTitle(n).setActive(e===o).onClick((function(){t(e)}))}))},c=0,u=a[s];c<u.length;c++){l(u[c])}r.addSeparator()}r.showAtMouseEvent(i)}))},t}()),uB="backlink",hB=function(){function t(){this.id="backlink",this.name=Ee("plugins.backlinks.name"),this.description=Ee("plugins.backlinks.desc"),this.defaultOn=!0}return t.prototype.init=function(t,e){var n=this;this.app=t,this.plugin=e,e.registerStatusBarItem(),e.registerViewType(uB,(function(t){return new pB(t)})),e.registerGlobalCommand({id:"backlink:open",name:Ee("plugins.backlinks.action-show"),icon:dv,callback:function(){n.app.workspace.ensureSideLeaf(uB,"right",!1)}}),e.registerGlobalCommand({id:"backlink:open-backlinks",name:Ee("plugins.backlinks.action-open-for-current"),icon:dv,checkCallback:this.openBacklinksForActiveFile.bind(this)}),e.registerGlobalCommand({id:"backlink:toggle-backlinks-in-document",name:Ee("plugins.backlinks.action-toggle-backlinks-in-document"),icon:dv,checkCallback:this.toggleBacklinksInDocument.bind(this)})},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:return e.registerEvent(t.workspace.on("file-open",this.onFileOpen,this)),e.registerEvent(t.workspace.on("layout-ready",this.initLeaf,this)),e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this)),e.registerEvent(t.metadataCache.on("resolved",this.updateBacklinks,this)),(n=this.plugin.statusBarEl)&&(n.addClass("mod-clickable"),n.addEventListener("click",(function(){var e=t.workspace,n=e.getLeavesOfType(uB);n.length>0&&e.revealLeaf(n[0])}))),i=this,o=(r=Object).assign,s=[{}],[4,e.loadData()];case 1:return i.options=o.apply(r,s.concat([a.sent()])),this.app.workspace.backlinkInDocument=this.options.backlinkInDocument,e.addSettingTab(new fB(t,e,this)),[2]}}))}))},t.prototype.onUserEnable=function(){this.initLeaf()},t.prototype.onUserDisable=function(t){for(var e=0,n=t.workspace.getLeavesOfType(uB);e<n.length;e++){n[e].detach()}t.workspace.iterateAllLeaves((function(t){var e=t.view;e instanceof rR&&e.showBacklinks&&e.toggleBacklinks()}))},t.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(uB,"right",!1,!1)},t.prototype.onFileMenu=function(t,e,n,i){var r=this;!By.isMobile&&e instanceof cb&&i&&"sidebar-context-menu"!==n&&t.addItem((function(t){return t.setTitle(Ee("plugins.backlinks.action-open")).setIcon(Wv).onClick((function(){return D(r,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"horizontal").setViewState({type:uB,active:!0,group:i,state:{file:e.path}})];case 1:return t.sent(),[2]}}))}))}))})),e instanceof cb&&i&&i.view instanceof rR&&i.view.canToggleBacklinks()&&t.addItem((function(t){return t.setTitle(Ee("plugins.backlinks.action-toggle-backlinks-in-document")).setIcon(Wv).onClick((function(){var t=i.view;t instanceof rR&&t.toggleBacklinks()}))}))},t.prototype.onFileOpen=function(t){this.file=t instanceof cb?t:null,this.updateBacklinks()},t.prototype.updateBacklinks=function(){var t=this.file,e=0;if(t){var n=t.path,i=this.app.metadataCache.resolvedLinks;for(var r in i)r!==n&&i.hasOwnProperty(r)&&i[r].hasOwnProperty(n)&&(e+=i[r][n])}var o=this.plugin.statusBarEl;if(o){var s=Ee("nouns.backlink-with-count",{count:e});o.setText(s)}},t.prototype.openBacklinksForActiveFile=function(t){var e=this.app.workspace,n=e.getActiveFile();if(n){if(!t)e.splitActiveLeaf("vertical").setViewState({type:uB,active:!0,group:e.activeLeaf,state:{file:n.path}});return!0}},t.prototype.toggleBacklinksInDocument=function(t){var e=this.app.workspace.getActiveViewOfType(rR);if(e&&e.canToggleBacklinks())return t||e.toggleBacklinks(),!0},t}(),pB=function(t){function e(e){var n=t.call(this,e)||this;n.icon=Wv;var i=n.contentEl;return n.backlink=n.addChild(new dB(n.app,i)),n.requestUpdate(),n}return M(e,t),e.prototype.getDisplayText=function(){return this.file?Ee("plugins.backlinks.tab-title",{displayText:t.prototype.getDisplayText.call(this)}):Ee("plugins.backlinks.name")},e.prototype.getViewType=function(){return uB},e.prototype.canAcceptExtension=function(t){return!0},e.prototype.getState=function(){var e=t.prototype.getState.call(this);return e.collapseAll=this.backlink.collapseAll,e.extraContext=this.backlink.extraContext,e.sortOrder=this.backlink.sortOrder,e.showSearch=this.backlink.showSearch,e.searchQuery=this.backlink.searchComponent.getValue(),e.backlinkCollapsed=this.backlink.backlinkCollapsed,e.unlinkedCollapsed=this.backlink.unlinkedCollapsed,e},e.prototype.setState=function(e,n){return D(this,void 0,Promise,(function(){var i,r,o,s,a,l,c;return A(this,(function(u){switch(u.label){case 0:return[4,t.prototype.setState.call(this,e,n)];case 1:return u.sent(),i=e.collapseAll,r=e.extraContext,o=e.sortOrder,s=e.showSearch,a=e.searchQuery,l=e.backlinkCollapsed,c=e.unlinkedCollapsed,isBoolean(i)&&this.backlink.setCollapseAll(i),isBoolean(r)&&this.backlink.setExtraContext(r),isBoolean(s)&&this.backlink.setShowSearch(s),String.isString(o)&&XN.hasOwnProperty(o)&&this.backlink.setSortOrder(o),isBoolean(l)?[4,this.backlink.setBacklinkCollapsed(l,!1)]:[3,3];case 2:u.sent(),u.label=3;case 3:return isBoolean(c)?[4,this.backlink.setUnlinkedCollapsed(c,!1)]:[3,5];case 4:u.sent(),u.label=5;case 5:return String.isString(a)&&(this.backlink.searchComponent.setValue(a),this.backlink.updateSearch()),[2]}}))}))},e.prototype.onResize=function(){this.backlink.onResize()},e.prototype.update=function(){this.leaf.updateHeader();var t=this.backlink;t.file=this.file,t.tooltipPlacement=this.getSideTooltipPlacement(),t.update()},e}(II),dB=function(t){function e(e,n,i){var r=t.call(this)||this;r.collapseAll=!1,r.extraContext=!1,r.sortOrder="alphabetical",r.showSearch=!1,r.searchQuery=null,r.backlinkFile=null,r.backlinkCollapsed=!1,r.backlinkHeaderEl=null,r.backlinkCountEl=null,r.backlinkQueue=null,r.unlinkedFile=null,r.unlinkedCollapsed=!1,r.unlinkedHeaderEl=null,r.unlinkedCountEl=null,r.unlinkedAliases="",r.unlinkedQueue=null,r.app=e;var o=r.headerDom=new cB(r.app,n);r.collapseAllButtonEl=o.addNavButton(qm,Ee("plugins.search.label-collapse-results"),r.onToggleCollapseClick.bind(r)),r.extraContextButtonEl=o.addNavButton(_m,Ee("plugins.search.label-more-context"),r.onToggleMoreContextClick.bind(r)),o.addSortButton((function(t){return r.setSortOrder(t)}),(function(){return r.sortOrder})),r.showSearchButtonEl=o.addNavButton(km,Ee("plugins.backlinks.label-show-search"),r.onToggleShowSearchClick.bind(r)),r.searchComponent=new BA(n).setPlaceholder(Ee("plugins.search.prompt-start-search")).onChange(De(r.updateSearch.bind(r),400,!0)).then((function(t){$e(t.clearButtonEl,Ee("plugins.search.tooltip-clear-search")),t.inputEl.addEventListener("keypress",(function(t){t.isComposing||"Enter"!==t.key||(By.isMobile&&ih(),r.updateSearch())})),t.containerEl.hide()}));var s=n.createDiv("backlink-pane");i=i||s;var a=r.backlinkHeaderEl=s.createDiv("tree-item-self is-clickable");a.createSpan("tree-item-icon collapse-icon",(function(t){Ty(t,Wg,8)})),a.createDiv({cls:"tree-item-inner",text:Ee("plugins.backlinks.label-linked-mentions")}),a.addEventListener("click",r.toggleBacklinkCollapsed.bind(r)),r.backlinkCountEl=a.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.backlinkDom=new aB(r.app,s.createDiv("search-result-container"),Ee("plugins.backlinks.label-no-backlinks"),i);var l=r.unlinkedHeaderEl=s.createDiv("tree-item-self is-clickable");return l.createSpan("tree-item-icon collapse-icon",(function(t){Ty(t,Wg,8)})),l.createDiv({cls:"tree-item-inner",text:Ee("plugins.backlinks.label-unlinked-mentions")}),l.addEventListener("click",r.toggleUnlinkedCollapsed.bind(r)),r.unlinkedCountEl=l.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.unlinkedDom=new aB(r.app,s.createDiv("search-result-container"),Ee("plugins.backlinks.label-no-unlinked-mentions"),i),r.setUnlinkedCollapsed(!0,!1),r}return M(e,t),e.prototype.onload=function(){var t=this.app,e=t.vault;this.registerEvent(t.metadataCache.on("resolve",this.onMetadataChanged,this)),this.registerEvent(e.on("create",this.onFileChanged,this)),this.registerEvent(e.on("modify",this.onFileChanged,this)),this.registerEvent(e.on("rename",this.onFileRename,this)),this.registerEvent(e.on("delete",this.onFileDeleted,this))},e.prototype.onToggleCollapseClick=function(){this.setCollapseAll(!this.collapseAll)},e.prototype.setCollapseAll=function(t){t!==this.collapseAll&&(this.collapseAll=t,this.backlinkDom.setCollapseAll(t),this.unlinkedDom.setCollapseAll(t),this.collapseAllButtonEl.toggleClass("is-active",t),this.app.workspace.requestSaveLayout())},e.prototype.onToggleMoreContextClick=function(){this.setExtraContext(!this.extraContext)},e.prototype.setExtraContext=function(t){t!==this.extraContext&&(this.extraContext=t,this.backlinkDom.setExtraContext(t),this.unlinkedDom.setExtraContext(t),this.extraContextButtonEl.toggleClass("is-active",t),this.app.workspace.requestSaveLayout())},e.prototype.onToggleShowSearchClick=function(){this.setShowSearch(!this.showSearch),this.showSearch&&this.searchComponent.inputEl.focus()},e.prototype.setShowSearch=function(t){t!==this.showSearch&&(this.showSearch=t,this.searchComponent.containerEl.toggle(t),this.showSearchButtonEl.toggleClass("is-active",t),t||(this.searchComponent.setValue(""),this.updateSearch()),this.app.workspace.requestSaveLayout())},e.prototype.setSortOrder=function(t){t!==this.sortOrder&&(this.sortOrder=t,this.backlinkDom.sortOrder=t,this.backlinkDom.changed(),this.unlinkedDom.sortOrder=t,this.unlinkedDom.changed(),this.app.workspace.requestSaveLayout())},e.prototype.onResize=function(){this.backlinkDom.onResize(),this.unlinkedDom.onResize()},e.prototype.updateSearch=function(){var t=this.searchComponent.getValue(),e=this.searchQuery;if(!(!e&&!t||e&&e.query===t))try{if(t){var n=new CP(t,!1);n.matcher?this.searchQuery=n:this.searchQuery=null}else this.searchQuery=null;this.backlinkFile=null,this.unlinkedFile=null,this.update()}catch(t){new jb(t.message),console.log(t)}},e.prototype.toggleBacklinkCollapsed=function(){this.setBacklinkCollapsed(!this.backlinkCollapsed,!0)},e.prototype.setBacklinkCollapsed=function(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return t===this.backlinkCollapsed?[2]:(this.backlinkCollapsed=t,[4,this.setSectionCollapsed(this.backlinkHeaderEl,this.backlinkDom,t,e)]);case 1:return n.sent(),this.app.workspace.requestSaveLayout(),this.backlinkDom.infinityScroll.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},e.prototype.toggleUnlinkedCollapsed=function(){this.setUnlinkedCollapsed(!this.unlinkedCollapsed,!0)},e.prototype.setUnlinkedCollapsed=function(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return t===this.unlinkedCollapsed?[2]:(this.unlinkedCollapsed=t,[4,this.setSectionCollapsed(this.unlinkedHeaderEl,this.unlinkedDom,t,e)]);case 1:return n.sent(),this.app.workspace.requestSaveLayout(),this.backlinkDom.infinityScroll.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},e.prototype.updateHeaderTooltip=function(t,e){t.toggleClass("is-collapsed",e),$e(t,Ee(e?"interface.tooltip.click-to-expand":"interface.tooltip.click-to-collapse"),{placement:this.tooltipPlacement})},e.prototype.setSectionCollapsed=function(t,e,n,i){return D(this,void 0,void 0,(function(){return A(this,(function(r){switch(r.label){case 0:return this.updateHeaderTooltip(t,n),[4,e.toggle(n,i)];case 1:return r.sent(),this.update(),[2]}}))}))},e.prototype.onMetadataChanged=function(t){var e=this.backlinkQueue;if(e&&e.add(t),this.onFileChanged(t),t===this.unlinkedFile){var n="",i=this.app.metadataCache.getFileCache(t);if(i){var r=Pg(i.frontmatter);r&&(n=JSON.stringify(r))}this.unlinkedAliases!==n&&this.recomputeUnlinked(t)}},e.prototype.onFileChanged=function(t){var e=this.unlinkedQueue;e&&e.add(t)},e.prototype.onFileRename=function(t){if(t===this.unlinkedFile)this.recomputeBacklink(t),this.recomputeUnlinked(t);else{this.onFileChanged(t);var e=this.backlinkQueue;e&&e.add(t)}},e.prototype.onFileDeleted=function(t){var e=this.unlinkedQueue;e&&e.remove(t);var n=this.backlinkQueue;n&&n.remove(t),this.backlinkDom.removeResult(t),this.unlinkedDom.removeResult(t)},e.prototype.update=function(){var t=this.file;this.backlinkFile!==t&&this.recomputeBacklink(t),this.unlinkedFile!==t&&this.recomputeUnlinked(t),this.updateHeaderTooltip(this.backlinkHeaderEl,this.backlinkCollapsed),this.updateHeaderTooltip(this.unlinkedHeaderEl,this.unlinkedCollapsed)},e.prototype.passSearchFilter=function(t,e,n,i){return D(this,void 0,void 0,(function(){var i;return A(this,(function(r){return(i=this.searchQuery)&&!i.match(t,e,n)?[2,!1]:[2,!0]}))}))},e.prototype.recomputeBacklink=function(t){var e=this;this.stopBacklinkSearch();var n=this.backlinkCollapsed,i=this.backlinkCountEl;if(n)i.hide();else{this.backlinkFile=t;var r=this.app,o=this.backlinkDom;if(i.show(),i.setText("0"),o.emptyResults(),t){var s=this.app.metadataCache,a=this.backlinkQueue=new Ah({onStart:function(){o.startLoader()},onStop:function(){o.stopLoader()},onCancel:function(){e.backlinkQueue=null}});o.emptyResults();var l=r.vault.getMarkdownFiles();l.sort(XN[o.sortOrder]),a.addList(l);var c=function(e){var n=e.path,i=s.resolvedLinks;return i.hasOwnProperty(n)&&i[n].hasOwnProperty(t.path)},u=function(){i.setText(String(o.getMatchCount()))},h=function(){return F(this,arguments,(function(){var t,e,n,i,r,s;return A(this,(function(l){switch(l.label){case 0:l.trys.push([0,8,9,14]),t=I(a.generator()),l.label=1;case 1:return[4,O(t.next())];case 2:return(e=l.sent()).done?[3,7]:(n=e.value,c(n)?[4,O(n)]:[3,5]);case 3:return[4,l.sent()];case 4:return l.sent(),[3,6];case 5:o.removeResult(n),u(),l.label=6;case 6:return[3,1];case 7:return[3,14];case 8:return i=l.sent(),r={error:i},[3,14];case 9:return l.trys.push([9,,12,13]),e&&!e.done&&(s=t.return)?[4,O(s.call(t))]:[3,11];case 10:l.sent(),l.label=11;case 11:return[3,13];case 12:if(r)throw r.error;return[7];case 13:return[7];case 14:return[2]}}))}))}(),p=Ph(r.vault.generateFiles(h,!0),{batchSize:2});D(e,void 0,void 0,(function(){var e,n,i,r,l,c,h,d,f,g,m,v,y,b,w;return A(this,(function(k){switch(k.label){case 0:k.trys.push([0,6,7,12]),e=I(p),k.label=1;case 1:return[4,e.next()];case 2:return(n=k.sent()).done?[3,5]:(i=n.value,r=i.file,l=i.content,t===r?[3,4]:(c=!1,h={},(d=s.getFileCache(r))?[4,this.passSearchFilter(r,l,d,a.runnable)]:(o.removeResult(r),u(),[3,4])));case 3:if(!k.sent())return[3,4];for(f=[],eA(d,(function(e){(function(e,n){var i=ZD(n.link),r=s.getFirstLinkpathDest(i,e);return r&&r===t})(r.path,e)&&f.push(e)})),h.content=[],g=0,m=f;g<m.length;g++)v=m[g],h.content.push([v.position.start.offset,v.position.end.offset]),c=!0;c?o.addResult(r,h,l).renderContentMatches():o.removeResult(r),u(),k.label=4;case 4:return[3,1];case 5:return[3,12];case 6:return y=k.sent(),b={error:y},[3,12];case 7:return k.trys.push([7,,10,11]),n&&!n.done&&(w=e.return)?[4,w.call(e)]:[3,9];case 8:k.sent(),k.label=9;case 9:return[3,11];case 10:if(b)throw b.error;return[7];case 11:return[7];case 12:return[2]}}))}))}}},e.prototype.stopBacklinkSearch=function(){var t=this.backlinkQueue;t&&!t.runnable.isCancelled()&&(t.runnable.cancel(),this.backlinkFile=null),this.backlinkQueue=null},e.prototype.recomputeUnlinked=function(t){var e=this;this.stopUnlinkedSearch();var n=this.unlinkedCollapsed,i=this.unlinkedCountEl;if(n)i.hide();else{this.unlinkedFile=t,this.unlinkedAliases="";var r=this.app,o=this.unlinkedDom;if(i.show(),i.setText("0"),o.emptyResults(),t){var s=new RegExp(jT(t.basename),"gi"),a=[s],l=this.app.metadataCache.getFileCache(t);if(l){var c=Pg(l.frontmatter);if(c){for(var u=0,h=c;u<h.length;u++){var p=h[u];p&&a.push(new RegExp(jT(p),"gi"))}this.unlinkedAliases=JSON.stringify(c)}}var d=this.unlinkedQueue=new Ah({onStart:function(){o.startLoader()},onStop:function(){o.stopLoader()},onCancel:function(){e.unlinkedQueue=null}});o.emptyResults();var f=r.vault.getMarkdownFiles();f.sort(XN[o.sortOrder]),d.addList(f);var g=d.generator(),m=Ph(r.vault.generateFiles(g,!0));D(e,void 0,void 0,(function(){var e,n,l,c,u,h,p,f,g,v,y,b,w,k,C,x,S,E,M,L,D,T,P;return A(this,(function(A){switch(A.label){case 0:A.trys.push([0,6,7,12]),e=I(m),A.label=1;case 1:return[4,e.next()];case 2:return(n=A.sent()).done?[3,5]:(l=n.value,c=l.file,u=l.content,t===c?[3,4]:(h=r.metadataCache.getFileCache(c),[4,this.passSearchFilter(c,u,h,d.runnable)]));case 3:if(!A.sent())return[3,4];for(p=!1,f=[],g=0,v=a;g<v.length;g++)for((y=v[g]).lastIndex=0,b=y.exec(u);b;)w=y.lastIndex,k=w-b[1].length,f.push([k,w]),b=y.exec(u);for((C={}).content=[],x=function(t){var e=eA(h,(function(e){return e.position.start.offset<=t[0]&&e.position.end.offset>=t[1]}));if(h&&h.frontmatter){var n=h.frontmatter.position;n&&n.start.offset<=t[0]&&n.end.offset>=t[1]&&(e=!0)}e||(p=!0,C.content.push(t))},S=0,E=f;S<E.length;S++)M=E[S],x(M);p?(L=o.addResult(c,C,u),this.addLinkFunction(L,t,c,s),L.separateMatches=!0,L.renderContentMatches()):o.removeResult(c),i.setText(String(o.getMatchCount())),A.label=4;case 4:return[3,1];case 5:return[3,12];case 6:return D=A.sent(),T={error:D},[3,12];case 7:return A.trys.push([7,,10,11]),n&&!n.done&&(P=e.return)?[4,P.call(e)]:[3,9];case 8:A.sent(),A.label=9;case 9:return[3,11];case 10:if(T)throw T.error;return[7];case 11:return[7];case 12:return[2]}}))}))}}},e.prototype.stopUnlinkedSearch=function(){var t=this.unlinkedQueue;t&&!t.runnable.isCancelled()&&(t.runnable.cancel(),this.unlinkedFile=null),this.unlinkedQueue=null},e.prototype.addLinkFunction=function(t,e,n,i){var r=this;t.onMatchRender=function(o,s){s.createEl("button",{cls:"search-result-file-match-replace-button",text:Ee("plugins.backlinks.label-link-button-text")}).addEventListener("click",(function(a){return D(r,void 0,void 0,(function(){var r,l,c,u,h,p;return A(this,(function(d){switch(d.label){case 0:return a.preventDefault(),s.detach(),t.invalidate(),r=this.app.vault,l=o[0],c=o[1],[4,r.read(n)];case 1:return u=d.sent(),h=u.slice(l,c),p=this.app.fileManager.generateMarkdownLink(e,n.path,"",i.test(h)?"":h),u=u.slice(0,l)+p+u.slice(c),[4,r.modify(n,u)];case 2:return d.sent(),[2]}}))}))}))}},e}(Vg),fB=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.instance=i,r}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty();var n=this.instance.options;new DA(e).setName(Ee("plugins.backlinks.option-backlink-in-document")).setDesc(Ee("plugins.backlinks.option-backlink-in-document-desc")).addToggle((function(e){return e.setValue(n.backlinkInDocument).onChange((function(e){n.backlinkInDocument=e,t.app.workspace.backlinkInDocument=e,t.plugin.saveData(n)}))}))},e}(NN),gB=function(){function t(t,e,n){this.app=t,this.hoverParent=e,this.getFile=n}return t.prototype.onInternalLinkDrag=function(t,e,n){this.app.dragManager.onDragStart(t,this.app.dragManager.dragLink(t,n,this.getFile().path))},t.prototype.onInternalLinkClick=function(t,e,n){t.preventDefault(),this.app.workspace.openLinkText(n,this.getFile().path,Bb.isModEvent(t),{active:!0})},t.prototype.onInternalLinkRightClick=function(t,e,n){var i=new zb(this.app);this.app.workspace.handleLinkContextMenu(i,n,this.getFile().path)&&(t.preventDefault(),i.showAtMouseEvent(t))},t.prototype.onExternalLinkClick=function(t,e,n){n.startsWith("file:///")&&(t.preventDefault(),window.open(n))},t.prototype.onInternalLinkMouseover=function(t,e,n){this.app.workspace.trigger("hover-link",{event:t,source:"preview",hoverParent:this.hoverParent,targetEl:e,linktext:n,sourcePath:this.getFile().path})},t.prototype.onTagClick=function(t,e,n){var i=this.app.internalPlugins.getPluginById("global-search");i&&i.instance.openGlobalSearch("tag:"+n)},t}(),mB=function(t){function e(e,n){var i=t.call(this,n)||this;i.docId=Tt(16),i.nesting=xB,i.hoverPopover=null,i.app=e;var r=new gB(e,i,i.getFile.bind(i));return i.renderer=new Wy(i,r,n,"worker.js"),i}return M(e,t),e.prototype.onload=function(){var t=this.app;this.registerEvent(t.vault.on("modify",this.onFileChange,this)),this.registerEvent(t.vault.on("delete",this.onFileChange,this)),this.registerEvent(t.metadataCache.on("changed",this.onFileChange,this))},e.prototype.onCheckboxClick=function(t,e,n){t.preventDefault();for(var i=this.renderer.text,r=0,o=0;r<n;){if(-1===(o=i.indexOf("\n",o)+1))return;r++}var s=i.indexOf("\n",o);-1===s&&(s=i.length);var a=i.slice(o,s).search(/\[.\]/);if(-1!==a){var l=o+a+1,c=" "===i.charAt(l)?"x":" ",u=i.slice(0,l)+c+i.slice(l+1);this.edit(u)}},e.prototype.postProcess=function(t,e,n){var i=this,r=wB.postProcess(this.app,{docId:this.docId,sourcePath:this.getFile().path,frontmatter:n,promises:e,addChild:function(t){return i.addChild(t)},getSectionInfo:function(t){return i.renderer.getSectionInfo(t)},containerEl:this.renderer.sizerEl,el:t.el,remainingNestLevel:this.nesting});t.usesFrontMatter=!!r.usesFrontMatter,this.resolveLinks(t.el)},e.prototype.onScroll=function(){},e.prototype.onFoldChange=function(){},e.prototype.onRenderComplete=function(){},e.prototype.onFileChange=function(t){for(var e=0,n=this.renderer.sections;e<n.length;e++){var i=n[e];i.rendered&&this.resolveLinks(i.el)}},e.prototype.resolveLinks=function(t){for(var e=this.app,n=this.renderer,i=0,r=t.findAll("a.internal-link");i<r.length;i++){var o=r[i],s=n.getInternalLinkHref(o);if(s){var a=ZD(s),l=e.metadataCache.getFirstLinkpathDest(a,this.getFile().path);o.toggleClass("is-unresolved",!l)}}},e.postProcess=function(t,e){for(var n=e.sourcePath,i=e.promises,r=e.el,o=e.displayMode,s=e.remainingNestLevel,a=void 0===s?xB:s,l=0,c=r.findAll("code.language-query");l<c.length;l++){var u=c[l],h=Jy(u).trim(),p=u.parentElement;e.addChild(vB(t,h,p,n))}for(var d=0,f=Wy.postProcessors;d<f.length;d++){var g=(0,f[d])(r,e);g&&g.then&&i.push(g)}var m=r.findAll(".internal-embed:not(.is-loaded)");if(m.length>0)for(var v=0,y=m;v<y.length;v++){var b=y[v],w=b.getAttribute("src"),k=EB.load({app:t,linktext:w,sourcePath:n,containerEl:b,displayMode:o,showTitle:!0,remainingNestLevel:a});k&&(e.addChild(k),i.push(k.loadFile()))}return e},e.loadEmbed=function(t,e,n){var i=t.app,r=t.linktext,o=t.showTitle,s=t.sourcePath,a=t.displayMode,l=t.remainingNestLevel,c=void 0===l?xB:l,u=t.state,h=tA(r).subpath,p=n.createDiv("markdown-embed");o&&!h&&p.createDiv({cls:"markdown-embed-title",text:e.basename});var d=p.createDiv("markdown-embed-content");return a?new yB(i,d,e,h,c-1):(p.createDiv("markdown-embed-link",(function(t){Ty(t,um,20),$e(t,"Open link"),Be(t),t.onClickEvent((function(t){0!==t.button&&1!==t.button||(t.preventDefault(),i.workspace.openLinkText(r,s,Bb.isModEvent(t)))}))})),new bB(i,d,e,h,c-1,u))},e.renderMarkdown=function(t,e,n,i){return D(this,void 0,void 0,(function(){var r,o,s,a,l,c,u,h,p,d;return A(this,(function(f){switch(f.label){case 0:for(r=Eg(t),o=Mg(r),s=Lg(r),a=zg(s),e.appendChild(a),l=[],c={docId:Tt(16),sourcePath:n,frontmatter:o,promises:l,addChild:function(t){return i&&i.addChild(t)},getSectionInfo:function(){return null},containerEl:e,el:e,displayMode:!0},u=0,h=Wy.postProcessors;u<h.length;u++)p=h[u],(d=p(e,c))&&d.then&&l.push(d);return l.length>0?[4,Promise.all(l)]:[3,2];case 1:f.sent(),f.label=2;case 2:return[2]}}))}))},e}(Vy);function vB(t,e,n,i){var r=createDiv("internal-query");n.replaceWith(r),r.createDiv("internal-query-header",(function(t){t.createSpan("internal-query-header-icon",(function(t){return Ty(t,_g)})),t.createSpan({cls:"internal-query-header-title",text:e})}));var o=r.createDiv("search-result-container");return new CB(t,o,e,i)}var yB=function(t){function e(e,n,i,r,o){var s=t.call(this)||this;return s.nesting=xB,s.app=e,s.containerEl=n,s.file=i,s.subpath=r,s.nesting=o,s}return M(e,t),e.prototype.loadFile=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f=this;return A(this,(function(g){switch(g.label){case 0:return e=(t=this).app,n=t.file,i=t.subpath,r=oA(e.metadataCache.getFileCache(n),i),[4,e.vault.cachedRead(n)];case 1:return o=g.sent(),r&&(s=r.start.offset,a=r.end?r.end.offset:o.length,o=o.substring(s,a)),l=Eg(o),c=Mg(l),u=Lg(l),h=zg(u),(p=this.containerEl.createDiv("markdown-preview-view")).toggleClass("rtl",e.vault.getConfig("rightToLeft")),p.appendChild(h),d=[],wB.postProcess(this.app,{docId:Tt(16),sourcePath:n.path,frontmatter:c,promises:d,addChild:function(t){return f.addChild(t)},getSectionInfo:function(){return null},containerEl:p,el:p,displayMode:!0}),d.length>0?[4,Promise.all(d)]:[3,3];case 2:g.sent(),g.label=3;case 3:return[2]}}))}))},e}(Vg),bB=function(t){function e(e,n,i,r,o,s){var a=t.call(this,e,n)||this;return a.before="",a.after="",a.file=i,a.subpath=r,a.nesting=o,a.state=s,n.onNodeInserted((function(){return a.renderer.updateVirtualDisplay()})),a}return M(e,t),e.prototype.loadFile=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s,a,l,c,u;return A(this,(function(h){switch(h.label){case 0:return e=(t=this).app,n=t.file,i=t.subpath,r=t.state,o=oA(e.metadataCache.getFileCache(n),i),i&&!o?(this.renderer.set("### Unable to find section "+i+" in "+n.basename),[2]):[4,e.vault.cachedRead(n)];case 1:return s=h.sent(),a="",l="",o?(c=o.start.offset,u=o.end?o.end.offset:s.length,a=s.substring(0,c),l=s.substring(u),s=s.substring(c,u),"heading"===o.type?this.containerEl.addClass("markdown-embed-heading"):"block"===o.type&&this.containerEl.addClass("markdown-embed-block")):this.containerEl.addClass("markdown-embed-page"),this.before=a,this.after=l,this.renderer.set(s),this.renderer.previewEl.toggleClass("rtl",e.vault.getConfig("rightToLeft")),r&&r.hasOwnProperty("scroll")&&this.renderer.applyScrollDelayed(r.scroll,{highlight:!0,center:!0}),[2]}}))}))},e.prototype.edit=function(t){var e=this;this.renderer.set(t);var n=this.before+t+this.after;D(e,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.app.vault.modify(this.file,n)];case 1:return t.sent(),[2]}}))}))},e.prototype.onFileChange=function(e){t.prototype.onFileChange.call(this,e),e===this.file&&this.loadFile()},e.prototype.getFile=function(){return this.file},e}(mB),wB=function(t){function e(e){var n=this,i=e.contentEl.createDiv("markdown-reading-view");return i.style.width="100%",i.style.height="100%",(n=t.call(this,e.app,i)||this).type="preview",n.view=e,n.search=new kB(n,i),n.backlinks=null,n.updateOptions(),n.onResize(),n.onFoldChange=De((function(){return n.view.onMarkdownFold()}),500),n}return M(e,t),e.prototype.show=function(){this.containerEl.show()},e.prototype.hide=function(){this.containerEl.hide()},e.prototype.get=function(){return this.renderer.text},e.prototype.set=function(t,e){e&&this.clear(),this.renderer.set(t),this.updateBacklinks()},e.prototype.clear=function(){this.renderer.clear()},e.prototype.beforeUnload=function(){},e.prototype.rerender=function(t){this.renderer.rerender(t)},e.prototype.getEphemeralState=function(t){},e.prototype.setEphemeralState=function(t){var e=this;if(t.focus){var n=this.renderer.previewEl;n.tabIndex=-1,n.focus()}t.hasOwnProperty("scroll")&&this.renderer.applyScrollDelayed(t.scroll);var i=function(){return D(e,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<5?[4,this.view.onMarkdownScroll()]:[3,5];case 2:return e.sent()?[2]:[4,Sh(100*(t+1))];case 3:e.sent(),e.label=4;case 4:return t++,[3,1];case 5:return[2]}}))}))};if(void 0!==t.line&&t.line>=0&&this.renderer.applyScrollDelayed(t.line,{highlight:!0},i),void 0!==t.match){var r=t.match,o=r.content,s=r.matches;if(s.length>0){var a=Pt(o,s[0][0]);this.renderer.applyScrollDelayed(a,{highlight:!0},i)}}},e.prototype.getScroll=function(){return this.renderer.getScroll()},e.prototype.applyScroll=function(t){this.renderer.applyScroll(t)},e.prototype.getFoldInfo=function(){return this.renderer.getFoldInfo()},e.prototype.applyFoldInfo=function(t){this.renderer.applyFoldInfo(t)},e.prototype.onResize=function(){this.renderer.onResize(),null!==this.view.scroll&&this.renderer.applyScrollDelayed(this.view.scroll)},e.prototype.showSearch=function(){this.search.show()},e.prototype.updateOptions=function(){var t=this.app,e=this.renderer,n=t.vault,i=e.previewEl,r=n.getConfig("readableLineLength");i.toggleClass("is-readable-line-width",r);var o=n.getConfig("foldHeading");i.toggleClass("allow-fold-headings",o);var s=n.getConfig("foldIndent");i.toggleClass("allow-fold-lists",s),i.toggleClass("rtl",n.getConfig("rightToLeft")),o||e.unfoldAllHeadings(),s||e.unfoldAllLists(),i.toggleClass("show-frontmatter",n.getConfig("showFrontmatter"));var a=n.getConfig("tabSize");i.style.tabSize=String(a),kg.globalOptions.breaks=!n.getConfig("strictLineBreaks"),this.rerender()},e.prototype.edit=function(t){var e=this;this.renderer.set(t),this.view.triggerQuickPreview(),D(e,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.view.save()];case 1:return t.sent(),[2]}}))}))},e.prototype.onScroll=function(){Date.now()-this.renderer.lastRender<100||this.view.onMarkdownScroll()},e.prototype.getFile=function(){return this.view.file},e.prototype.onRenderComplete=function(){t.prototype.onRenderComplete.call(this),null===this.search.highlightRanges&&this.search.isActive&&this.search.updateQuery()},e.prototype.foldAll=function(){var t=this.app.vault,e=t.getConfig("foldHeading"),n=t.getConfig("foldIndent");e&&this.renderer.foldAllHeadings(),n&&this.renderer.foldAllLists()},e.prototype.unfoldAll=function(){var t=this.app.vault,e=t.getConfig("foldHeading"),n=t.getConfig("foldIndent");e&&this.renderer.unfoldAllHeadings(),n&&this.renderer.unfoldAllLists()},e.prototype.getSelection=function(){return window.getSelection().toString()},e.prototype.setShowBacklinks=function(t){var e=this,n=e.app,i=e.renderer,r=e.backlinks;t&&!r?(i.addFooter(),i.footer.el.addClass("embedded-backlinks"),this.backlinks=this.addChild(new dB(n,i.footer.el,i.previewEl)),this.updateBacklinks()):!t&&r&&(i.removeFooter(),this.removeChild(r),this.backlinks=null)},e.prototype.updateBacklinks=function(){var t=this.backlinks;if(t){var e=null;this.view.currentMode===this&&(e=this.getFile()),t.file=e,t.update()}},e}(mB),kB=function(){function t(t,e){var n=this;this.scope=null,this.parentContainer=null,this.searchContainer=null,this.searchInputEl=null,this.isActive=!1,this.lastQuery=null,this.highlightRanges=null,this.selectedRange=-1,this.lastText=null,this.view=t;var i=this.scope=new Nb(t.app.scope);this.parentContainer=e;var r=this.searchContainer=e.createDiv("document-search-container"),o=this.searchContainer.createDiv("document-search");this.searchInputEl=o.createEl("input",{cls:"document-search-input",type:"text"}),this.searchInputEl.setAttribute("placeholder",Ee("editor.search.placeholder-find"));var s=o.createDiv({cls:"document-search-buttons",type:"text"});s.createEl("button",{cls:"document-search-button",text:Ee("editor.search.label-previous")},(function(t){$e(t,"Shift + F3",{placement:"top"}),t.addEventListener("click",(function(t){t.preventDefault(),n.findPrevious()}))})),s.createEl("button",{cls:"document-search-button",text:Ee("editor.search.label-next")},(function(t){$e(t,"Enter or F3",{placement:"top"}),t.addEventListener("click",(function(t){t.preventDefault(),n.findNext()}))})),s.createSpan("document-search-close-button",(function(t){$e(t,Ee("editor.search.label-exit-search"),{placement:"top"}),t.addEventListener("click",(function(t){t.preventDefault(),n.hide()}))})),this.searchInputEl.addEventListener("input",De(this.onSearchInput.bind(this),150,!0)),r.hide(),i.register(["Shift"],"F3",this.findPrevious.bind(this)),i.register([],"F3",this.findNext.bind(this)),i.register([],"Enter",this.onEnter.bind(this)),i.register([],"Escape",this.hide.bind(this))}return t.prototype.show=function(){this.isActive=!0;var t=this,e=t.view,n=t.parentContainer,i=t.searchContainer,r=t.searchInputEl;i.show();var o=window.getSelection().toString();o&&(r.value=o),r.focus(),r.select(),this.updateQuery(),e.app.keymap.pushScope(this.scope),n.addClass("is-searching")},t.prototype.hide=function(){this.isActive=!1;var t=this,e=t.view,n=t.parentContainer,i=t.searchContainer,r=t.searchInputEl;i.hide(),r.value="",r.removeClass("mod-no-match"),n.removeClass("is-searching"),e.app.keymap.popScope(this.scope),this.updateQuery()},t.prototype.updateQuery=function(){var t=this.getQuery().toLowerCase(),e=this.view,n=this.searchInputEl,i=e.renderer,r=i.lastText;t||(r=null);var o=this.lastText!==r,s=this.lastQuery!==t;if(o&&(this.lastText=r),s&&(this.lastQuery=t,this.selectedRange=-1),o||s){n.removeClass("mod-no-match");for(var a=0,l=i.sections;a<l.length;a++){(p=l[a]).highlightRanges=null}if(i.queueRender(),t){for(var c=[],u=0,h=i.sections;u<h.length;u++){var p,d=[];ph((p=h[u]).el,d);for(var f=d.map((function(t){return t.textContent})).join("").toLowerCase(),g=[],m=0;-1!==(m=f.indexOf(t,m));){var v=m+t.length,y={section:p,start:m,end:v,active:!1};g.push(y),c.push(y),m=v}g.length>0&&(p.highlightRanges=g)}this.highlightRanges=c,n.toggleClass("mod-no-match",0===c.length)}else this.highlightRanges=null}},t.prototype.onSearchInput=function(){this.updateQuery(),this.selectRange(0)},t.prototype.findNext=function(){this.selectRange(this.selectedRange+1)},t.prototype.findPrevious=function(){this.selectRange(this.selectedRange-1)},t.prototype.selectRange=function(t){var e=this.highlightRanges;if(e&&0!==e.length){t>e.length-1&&(t=0),t<0&&(t=e.length-1);var n=e[this.selectedRange];n&&(n.active=!1),this.selectedRange=t;var i=e[this.selectedRange];i.active=!0,this.view.renderer.selectRange(i)}},t.prototype.getQuery=function(){return this.searchInputEl.value},t.prototype.onEnter=function(t){t.isComposing||this.searchInputEl!==document.activeElement||this.findNext()},t}(),CB=function(t){function e(e,n,i,r){var o=t.call(this,n)||this;return o.searchQuery=null,o.app=e,o.query=i,o.sourcePath=r,o.dom=new aB(e,n,Ee("plugins.search.label-no-matches")),o.queue=new lB(e,o.dom),o.addChild(o.queue),o}return M(e,t),e.prototype.onload=function(){var t=this,e=t.app,n=t.dom,i=t.sourcePath;n.emptyResults();try{var r=new CP(this.query,!1);if(!r.matcher)return;this.searchQuery=r;var o=this.queue.start();xP(e,r.requiredInputs,o,(function(t,e,o){t.path===i&&(e=e.replace(/```query([\s\S]*?)(```|$)/g,(function(t){return t.replace(/./g," ")})));var s=r.match(t,e,o);s?n.addResult(t,s,e).renderContentMatches():n.removeResult(t)}))}catch(t){console.log(t)}},e.prototype.onResize=function(){this.dom.onResize()},e}(Vy),xB=5,SB=function(t){function e(e,n){var i=t.call(this,e)||this;return i.loadFile=n,i}return M(e,t),e.prototype.loadFile=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){return[2]}))}))},e}(Vy),EB=function(){function t(){}return t.load=function(t){var e=this,n=t.app,i=t.linktext,r=t.sourcePath,o=t.containerEl,s=t.remainingNestLevel,a=void 0===s?xB:s,l=tA(i),c=l.path,u=l.subpath,h=n.metadataCache.getFirstLinkpathDest(c,r);o.empty();var p=null;if(h){var d=h.extension;Vt.contains(d)?(o.addClass("image-embed"),p=new SB(o,(function(){return $b.displayInEl(h,n,o)}))):qt.contains(d)?(o.addClass("media-embed"),p=new SB(o,(function(){return Gb.displayInEl(h,n,o)}))):jt.contains(d)?(o.addClass("media-embed"),p=new SB(o,(function(){return NF.displayInEl(h,n,o)}))):Ut.contains(d)?(o.addClass("pdf-embed"),p=new FF(n,o,h,u)):_t.contains(d)&&a>0?p=wB.loadEmbed(t,h,o):(o.addClass("file-embed"),o.createDiv({cls:"file-embed-title"},(function(t){t.createSpan({cls:"file-embed-icon"},(function(t){Ty(t,Gg,22)})),t.appendText(" "+h.name)})),p=new SB(o,(function(){return D(e,void 0,void 0,(function(){return A(this,(function(t){return[2]}))}))})),o.addEventListener("click",(function(){n.openWithDefaultApp(h.path)})),$e(o,Ee("interface.embed-open-in-default-app-tooltip")))}else o.appendText(Ee("plugins.page-preview.label-empty-note",{linktext:i})),o.addClass("file-embed","mod-empty"),o.onClickEvent((function(t){n.workspace.openLinkText(i,r,Bb.isModEvent(t))}));return o.addClass("is-loaded"),p},t}(),MB=window.ResizeObserver,LB=gr.define(),DB=new Set(["em","strong","inline-code","strikethrough","highlight","link","image","hmd-internal-link","hmd-embed","formatting-link","footref"]),AB=/^\s*(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,TB=new WeakMap;var PB=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.start=-1,e.end=-1,e}return M(e,t),e.prototype.setPos=function(t,e){this.start=t,this.end=e},e.prototype.hookClickHandler=function(t,e){var n=this;e.addEventListener("click",(function(i){i.defaultPrevented||n.selectElement(t,e)}))},e.prototype.addEditButton=function(t,e){var n=this,i=e.createDiv("edit-block-button");Ty(i,hv),$e(i,"Edit this block"),i.addEventListener("click",(function(){n.selectElement(t,e)}))},e.prototype.selectElement=function(t,e){var n=this.start,i=this.end;if(n<0||i<0)!function(t,e){try{var n=e.posAtDOM(t);e.dispatch({selection:{head:n,anchor:n}}),e.focus()}catch(t){}}(e,t);else try{t.dispatch({selection:{head:n,anchor:i}}),t.focus()}catch(t){}},e.prototype.resizeWidget=function(t,e){MB&&new MB(function(t){if(TB.has(t))return TB.get(t);var e=De((function(){return t.requestMeasure()}),10);return TB.set(t,e),e}(t)).observe(e,{box:"border-box"})},e}(os),OB=as.replace({}),FB=as.replace({}),IB=as.mark({class:"cm-underline"}),NB=as.mark({class:"cm-transparent"}),BB=as.mark({class:"is-unresolved"}),RB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.toDOM=function(t){return createSpan({cls:"cm-blockquote-border cm-transparent",text:">"})},e}(os),zB=as.replace({widget:new RB}),HB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.eq=function(t){return t instanceof e},e.prototype.toDOM=function(t){var e=createDiv("hr cm-line");return e.createEl("br"),e.addEventListener("click",(function(){var n=t.posAtDOM(e),i=t.state.doc.lineAt(n);t.dispatch({selection:{head:i.from,anchor:i.to}})})),e.createEl("hr"),e},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return 20},enumerable:!1,configurable:!0}),e}(os),VB=as.replace({widget:new HB,block:!0}),qB=as.mark({class:"list-bullet"}),jB=function(t){function e(e){var n=t.call(this)||this;return n.content=e,n}return M(e,t),e.prototype.eq=function(t){return t instanceof e&&t.content===this.content},e.prototype.updateDOM=function(t){return t instanceof HTMLInputElement&&(t.setAttribute("data-task",this.content),t.checked=" "!==this.content,!0)},e.prototype.toDOM=function(t){var e=createEl("input",{cls:"task-list-item-checkbox",type:"checkbox"});return e.setAttribute("data-task",this.content),e.checked=" "!==this.content,e.addEventListener("input",(function(){var n=t.posAtDOM(e),i=t.state.doc.lineAt(n),r=i.text.search(/\[.\]/);if(-1!==r){var o=i.text.charAt(r+1),s=i.from+r+1;t.dispatch({changes:[{from:s,to:s+1,insert:" "===o?"x":" "}]})}})),e},e}(os),UB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.eq=function(t){return t instanceof e},e.prototype.toDOM=function(t){return createSpan("external-link")},e}(os),_B=as.widget({widget:new UB}),WB=function(t){function e(e,n){var i=t.call(this)||this;return i.url=e,i.title=n,i}return M(e,t),e.prototype.eq=function(t){return t instanceof e&&this.url===t.url&&this.title===t.title},e.prototype.updateDOM=function(t){return t instanceof HTMLImageElement&&(t.src!==this.url&&(t.src=this.url),this.applyTitle(t,this.title),!0)},e.prototype.toDOM=function(t){var e=createEl("img");return e.src=this.url,this.applyTitle(e,this.title),this.hookClickHandler(t,e),this.resizeWidget(t,e),e},e.prototype.applyTitle=function(t,e){var n=0,i=0;if(e){var r=function(t){var e=lg(t);return!!e&&(n=e.x,i=e.y,!0)},o=e.lastIndexOf("|");-1!==o?r(e.substr(o+1))&&(e=e.substr(0,o)):r(e)&&(e="")}n>0&&(t.width=n),i>0&&(t.height=i),t.setAttr("alt",e)},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return 30},enumerable:!1,configurable:!0}),e}(PB),GB=function(){function t(t){this.tree=Rc(t.state),this.decorations=this.buildDeco(t)}return t.prototype.update=function(t){var e=Rc(t.state);e.length<t.view.viewport.to||t.view.composing||eR.has(t.view)?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||t.selectionSet||Wu(t.transactions,LB)||Wu(t.transactions,Nu)||Wu(t.transactions,Bu))&&(this.tree=e,this.decorations=this.buildDeco(t.view))},t}(),KB=function(t){function e(e,n){var i=t.call(this,n)||this;return i.markdownView=e,i}return M(e,t),e.prototype.update=function(e){var n=e.state,i=e.view;if(!e.docChanged&&e.selectionSet&&!eR.has(i)){var r=n.selection,o=this.decorations,s=!1,a=function(t,e,n,i){return e<=t&&t<=n&&(i===OB?t=Math.min(e,t):i===FB&&(t=Math.max(n,t))),t},l=r.ranges.map((function(t){for(var e=t.anchor,n=t.head,i=e,r=n,l=!1,c=function(t,e,n){var o=a(i,t,e,n),s=a(r,t,e,n);o===i&&s===r||(i=o,r=s,l=!0)},u=0;u<10&&(l=!1,o.between(i,i,c),i!==r&&o.between(r,r,c),l);u++);return i!==e||r!==n?(s=!0,Bi.range(i,r)):t}));s&&window.setTimeout((function(){r===n.selection&&i.dispatch({selection:Bi.create(l,r.mainIndex)})}))}t.prototype.update.call(this,e)},e.prototype.buildDeco=function(t){if(!this.tree.length)return as.none;for(var e=t.state,n=e.selection.ranges,i=e.field(zu),r=function(t,e){return ju(n,t,e)||Uu(i,t,e)},o=new Vr,s=0,a=function(t,n){var i=t,a=t,c=null,u=function(t){c||(c=[]),c.push(t)},h=function(t){if(c){if(r(i,a))for(var e=0,n=c;e<n.length;e++){(h=n[e]).always&&o.add(h.from,h.to,h.deco)}else{if(c.length>1){var s=c.last();s.deco===OB&&(s.deco=FB)}for(var l=0,u=c;l<u.length;l++){var h=u[l];o.add(h.from,h.to,h.deco)}}c=null}i=t,a=t},p="",d=!1;l.tree.iterate({from:t,to:n,enter:function(t,n,i){var l=t.prop(Tu),c=function(){return e.doc.sliceString(n,i)};if(n===a&&l||h(n),l){if(n<s)return;s=i;var f=l.split(" "),g=new Set(f);if(g.has("formatting-header")){var m=e.doc.lineAt(n);return void(r(m.from,m.to)||m.text.trim()===c().trim()||o.add(n,i,OB))}if(g.has("formatting-quote"))return void(function(t){var n=e.doc.lineAt(t);return r(n.from,n.to)}(n)||(g.has("quote-1")?o.add(n,n+1,NB):o.add(n,n+1,zB)));var v=f.some((function(t){return DB.has(t)})),y=g.has("string")&&g.has("url"),b=g.has("link")&&1===g.size,w=g.has("hmd-internal-link")&&!g.has("link-has-alias")&&!g.has("link-alias-pipe")&&!g.has("hmd-embed"),k=b||w,C=g.has("formatting"),x=g.has("image"),S=g.has("formatting-link")||g.has("link-has-alias")||g.has("link-alias-pipe"),E=g.has("formatting-task"),M=g.has("formatting-link-end")||y,L=g.has("formatting-list-ul");if(x?d=!0:d&&!g.has("url")&&(d=!1),g.has("formatting-link-start")&&e.doc.length>=i+2&&"]]"===e.doc.sliceString(i,i+2))return;if(g.has("formatting-link-end")&&n>=2&&"[["===e.doc.sliceString(n-2,n))return;var D=S||y||k||E||L;if(g.has("hmd-barelink")&&!g.has("footref")&&(C=D=!1),S&&g.has("link")&&g.has("url"))return i+1<e.doc.length&&">"===e.doc.sliceString(i,i+1)&&u({from:i,to:i+1,deco:FB}),void(a=i+1);if((S&&g.has("link")&&"]"===c()||C&&y&&"("===c())&&(M=!0),(v||D)&&(a=i,C||D)){var A={from:n,to:i,deco:M?FB:OB};if(E){var T=e.doc.sliceString(n+1,n+2);A.deco=as.widget({widget:new jB(T)})}else if(L){var P=(m=e.doc.lineAt(n)).text.match(Ju);P&&P[6]||(A.deco=qB,A.to=a=n+1)}else if(k){var O=c();w&&O.length>1&&O.startsWith("#")&&(u({from:n,to:n+1,deco:OB}),A.from++),A.deco=IB}u(A)}g.has("url")&&!C?p=c():g.has("url")&&C&&p&&")"===c()&&!d?(Qf(p)||u({from:i,to:i,always:!0,deco:_B}),p=""):p=""}}}),h(0)},l=this,c=0,u=t.visibleRanges;c<u.length;c++){var h=u[c];a(h.from,h.to)}return o.finish()},e}(GB),$B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.buildDeco=function(t){if(!this.tree.length)return as.none;for(var e=t.state,n=new Vr,i=0,r=t.visibleRanges;i<r.length;i++){var o=r[i],s=o.from,a=o.to;this.tree.iterate({from:s,to:a,enter:function(t,i,r){var o=t.prop(Pu);if(o&&o.contains("HyperMD-task-line")){var s=e.doc.lineAt(i).text.match(Ju);s&&s[6]&&n.add(i,i,as.line({attributes:{"data-task":s[6]}}))}}})}return n.finish()},e}(GB),YB=function(t){function e(e,n,i,r){var o=t.call(this)||this;o.sourcePath=n,o.href=i;var s=o.containerEl=createDiv("internal-embed");s.tabIndex=-1,s.setAttr("src",i),o.applyTitle(r);var a=EB.load({app:e,linktext:i,sourcePath:n,containerEl:s,displayMode:!1,showTitle:!0,remainingNestLevel:5});return a&&(o.child=a,a.loadFile()),o}return M(e,t),e.prototype.eq=function(t){return t instanceof e&&this.sourcePath===t.sourcePath&&this.href===t.href&&this.title===t.title},e.prototype.updateDOM=function(t){return!1},e.prototype.toDOM=function(t){var e=this.containerEl;return this.hookClickHandler(t,e),this.resizeWidget(t,e),e},e.prototype.applyTitle=function(t){var e=this.containerEl;this.title=t;var n=0,i=0;if(t){var r=function(t){var e=lg(t);return!!e&&(n=e.x,i=e.y,!0)},o=t.lastIndexOf("|");-1!==o?r(t.substr(o+1))&&(t=t.substr(0,o)):r(t)&&(t="")}e.setAttr("alt",t),e.setAttr("width",0===n?"":String(n)),e.setAttr("height",0===i?"":String(i));var s=e.firstChild;s&&s instanceof HTMLImageElement&&(s.setAttr("alt",t),s.setAttr("width",0===n?"":String(n)),s.setAttr("height",0===i?"":String(i)))},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return 100},enumerable:!1,configurable:!0}),e}(PB),JB=function(t){function e(e,n,i,r){var o=t.call(this)||this;o.children=[],o.installed=!1,o.app=e,o.view=n,o.lang=i,o.code=r;var s=o.containerEl=createDiv("cm-preview-code-block cm-embed-block");s.tabIndex=-1;var a=s.createEl("pre"),l=a.createEl("code","language-"+i);if(Yy.set(l,r),"mermaid"===i)Gy(n.contentEl,[l]);else if("query"===i)o.addChild(vB(e,r,a,n.file.path));else if(Wy.codeBlockPostProcessors.hasOwnProperty(i)){s.empty();var c=s.createDiv("block-language-"+i);(0,Wy.codeBlockPostProcessors[i])(r,c,{docId:Tt(16),sourcePath:n.file.path,frontmatter:{},promises:[],addChild:function(t){return o.addChild(t)},getSectionInfo:function(t){return o.containerEl.contains(t)?{lineStart:o.lineStart,lineEnd:o.lineEnd,text:o.view.editor.getValue()}:null},containerEl:n.contentEl,el:c});var u=s.findAll(".internal-embed:not(.is-loaded)");if(u.length>0)for(var h=0,p=u;h<p.length;h++){var d=p[h],f=d.getAttribute("src"),g=EB.load({app:e,linktext:f,sourcePath:n.file.path,containerEl:d,displayMode:!0,showTitle:!0,remainingNestLevel:xB});g&&(o.addChild(g),g.loadFile())}}else l.setText(r);return o}return M(e,t),e.canRenderLang=function(t){return"mermaid"===t||"query"===t||Wy.codeBlockPostProcessors.hasOwnProperty(t)},e.prototype.eq=function(t){return t instanceof e&&this.lang===t.lang&&this.code===t.code},e.prototype.updateDOM=function(t){return!1},e.prototype.toDOM=function(t){var e=this.containerEl;return this.addEditButton(t,e),this.resizeWidget(t,e),e},e.prototype.addChild=function(t){this.view.addChild(t),this.children.push(t)},e}(PB),QB=function(t){function e(e,n){var i=t.call(this)||this;return i.math=e,i.block=n,i}return M(e,t),e.prototype.eq=function(t){return t instanceof e&&this.math===t.math&&this.block===t.block},e.prototype.updateDOM=function(t){var e=this.block;return(e&&t instanceof HTMLDivElement||!e&&t instanceof HTMLSpanElement)&&(this.render(t),!0)},e.prototype.toDOM=function(t){var e=createEl(this.block?"div":"span","math");return this.block&&(e.createEl("br"),e.createEl("br"),this.addEditButton(t,e)),this.hookClickHandler(t,e),this.resizeWidget(t,e),this.render(e),e},e.prototype.render=function(t){var e=this;Vh.then((function(){var n=e,i=n.math,r=n.block;t.toggleClass("math-block",r),t.toggleClass("cm-embed-block",r);var o=t.find(".edit-block-button");t.empty();try{var s=jh(i,r);t.appendChild(s)}catch(e){t.appendText(i)}o&&t.appendChild(o),Kh()}))},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return 50},enumerable:!1,configurable:!0}),e}(PB),XB=function(t){function e(e,n){var i=t.call(this)||this;return i.lang=e,i.code=n,i}return M(e,t),e.prototype.eq=function(t){return!1},e.prototype.toDOM=function(t){var e=this,n=createSpan({cls:"code-block-flair",text:this.lang});return $e(n,Ee("interface.menu.copy")),n.addEventListener("click",(function(){return D(e,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return(t=this.code).endsWith("\n")&&(t=t.substr(0,t.length-1)),[4,navigator.clipboard.writeText(t)];case 1:return e.sent(),new jb(Ee("interface.copied",{item:""})),[2]}}))}))})),n},e}(os),ZB=["script","style","link","meta","object","embed","webview"],tR=function(t){function e(e,n,i){var r=t.call(this)||this;return r.app=e,r.html=n,r.block=i,r}return M(e,t),e.prototype.eq=function(t){return t instanceof e&&this.html===t.html&&this.block===t.block},e.prototype.toDOM=function(t){var e=this.block,n=this.html,i=createEl(e?"div":"span","cm-html-embed"+(e?" cm-embed-block":""));return i.tabIndex=-1,this.hookClickHandler(t,i),i.appendChild(zg(n)),e&&this.addEditButton(t,i),this.app.fixFileLinks(i),this.resizeWidget(t,i),i},Object.defineProperty(e.prototype,"estimatedHeight",{get:function(){return 40},enumerable:!1,configurable:!0}),e}(PB);var eR=new WeakSet;var nR={enable:!1},iR="markdown",rR=function(t){function e(e){var n=t.call(this,e)||this;n.icon=Gg,n.modeButtonEl=null,n.modes={},n.currentMode=null,n.scroll=null,n.showBacklinks=!1,nR.enable||By.isMobile?(n.editMode=n.registerMode(new WO(n)),n.editor=n.editMode.editor,n.sourceMode={cmEditor:n.editor}):(n.sourceMode=n.registerMode(new TP(n)),n.editor=n.sourceMode.editor),n.previewMode=n.registerMode(new wB(n)),n.modeButtonEl=n.addAction(Ly,"",n.onSwitchView.bind(n));var i=n.modes;for(var r in i)i.hasOwnProperty(r)&&i[r].hide();var o=n.app.vault.getConfig("defaultViewMode");o&&i.hasOwnProperty(o)||(o="source"),n.currentMode=i[o],n.containerEl.setAttribute("data-mode",n.getMode()),n.currentMode.show(),n.updateButtons(),n.showBacklinks=n.app.workspace.backlinkInDocument,n.updateShowBacklinks(),n.addChild(n.previewMode);var s=0;return n.containerEl.addEventListener("wheel",(function(t){if(n.app.vault.getConfig("baseFontSizeAction")){var e=t.ctrlKey,i=Date.now();if(e&&!(s>i-500)){if(e&&0!==t.deltaY){if(dt&&Number.isInteger(t.deltaY))return;var r=n.app.vault.getConfig("baseFontSize");t.deltaY<0?r++:r--,n.app.changeBaseFontSize(r)}}else s=i}}),{passive:!0}),n.titleEl.addEventListener("keydown",n.onTitleKeydown.bind(n)),n}return M(e,t),e.prototype.onload=function(){t.prototype.onload.call(this);var e=this.leaf;this.registerEvent(e.workspace.on("quick-preview",this.onQuickPreview,this)),this.registerEvent(e.workspace.on("click",this.onDocumentClick,this)),this.registerEvent(e.workspace.on("resize",this.onResize,this)),this.registerEvent(e.workspace.on("css-change",this.onCssChange,this)),this.onResize()},e.prototype.getViewType=function(){return iR},e.prototype.canAcceptExtension=function(t){return _t.contains(t)},e.prototype.getState=function(){var e=t.prototype.getState.call(this);return e.mode=this.getMode(),e.backlinks=this.showBacklinks,this.editMode&&(e.source=this.editMode&&this.editMode.sourceMode),e},e.prototype.setState=function(e,n){return D(this,void 0,Promise,(function(){var i,r,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:return i=!1,r=e.mode,o=e.backlinks,s=e.source,r?(a=this.modes).hasOwnProperty(r)?[4,this.setMode(a[r])]:[3,2]:[3,2];case 1:i=c.sent(),c.label=2;case 2:return(l=this.editMode)&&"boolean"==typeof s&&l.sourceMode!==s&&(l.toggleSource(),i=!0),"boolean"==typeof o&&(this.showBacklinks=o,this.updateShowBacklinks()),i&&(n.layout=!0),[4,t.prototype.setState.call(this,e,n)];case 3:return c.sent(),[2]}}))}))},e.prototype.getEphemeralState=function(){var e=t.prototype.getEphemeralState.call(this);return this.currentMode.getEphemeralState(e),null!==this.scroll&&(e.scroll=this.scroll),e},e.prototype.setEphemeralState=function(e){t.prototype.setEphemeralState.call(this,e);var n=e.subpath;if(n){var i=oA(this.app.metadataCache.getFileCache(this.file),n);i&&(e.line=i.start.line,e.startLoc=i.start,e.endLoc=i.end||null)}this.currentMode.setEphemeralState(e),e.hasOwnProperty("scroll")&&(this.scroll=e.scroll)},e.prototype.onUnloadFile=function(e){return D(this,void 0,Promise,(function(){return A(this,(function(n){return this.onMarkdownFold(),this.currentMode.beforeUnload(),[2,t.prototype.onUnloadFile.call(this,e)]}))}))},e.prototype.registerMode=function(t){return this.modes[t.type]=t,t},e.prototype.getMode=function(){return this.currentMode.type},e.prototype.updateButtons=function(){var t=this.currentMode,e=this.modeButtonEl,n=Ee("interface.menu.mod-click-open-new-pane",{key:Fb.Mod});"source"===t.type?(Ty(e,Ly,By.isMobile?23:17),$e(e,Ee("interface.menu.edit-view")+"\n"+Ee("interface.menu.switch-to-read-view")+"\n"+n)):(Ty(e,$g,By.isMobile?23:17),$e(e,Ee("interface.menu.read-view")+"\n"+Ee("interface.menu.switch-to-edit-view")+"\n"+n))},e.prototype.getSyncViewState=function(){var e=t.prototype.getSyncViewState.call(this);return delete e.state.mode,delete e.eState.cursor,e},e.prototype.setMode=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:return t&&this.currentMode!==t?(n=(e=this).currentMode,i=e.scroll,"source"!==n.type?[3,2]:[4,this.save()]):[2,!1];case 1:o.sent(),o.label=2;case 2:return r=n.getFoldInfo(),this.app.foldManager.save(this.file,r),n.hide(),this.currentMode=t,t.show(),null!==this.data&&t.set(this.data,!1),t.onResize(),null!==i&&t.setEphemeralState({scroll:i}),t.applyFoldInfo(r),this.updateButtons(),this.containerEl.setAttribute("data-mode",this.getMode()),[2,!0]}}))}))},e.prototype.getViewData=function(){return this.currentMode.get()},e.prototype.clear=function(){var t=this,e=t.currentMode,n=t.sourceMode,i=t.editMode,r=t.modes;for(var o in e!==n&&e!==i||this.onMarkdownFold(),this.scroll=null,r)r.hasOwnProperty(o)&&r[o].clear()},e.prototype.onSwitchView=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:return t.preventDefault(),e=this.leaf,(n=this.getState()).mode="preview"===this.getMode()?"source":"preview",i={type:iR,state:n},Bb.isModEvent(t)&&(r=this.app.workspace,e=r.createLeafBySplit(this.leaf),i.active=!0,i.group=this.leaf),[4,e.setViewState(i)];case 1:return o.sent(),[2]}}))}))},e.prototype.canToggleBacklinks=function(){return"preview"===this.getMode()||this.editMode instanceof WO},e.prototype.toggleBacklinks=function(){return D(this,void 0,void 0,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:return t=this.leaf,(e=this.getState()).backlinks=!e.backlinks,n={type:iR,state:e},[4,t.setViewState(n)];case 1:return i.sent(),this.app.workspace.requestSaveLayout(),[2]}}))}))},e.prototype.updateShowBacklinks=function(){var t=this,e=t.showBacklinks,n=t.editMode,i=t.previewMode;n&&n.setShowBacklinks(e),i.setShowBacklinks(e)},e.prototype.onMarkdownScroll=function(){var t=this.currentMode.getScroll();return null!==t&&(this.scroll=t),this.syncState(!1)},e.prototype.onMarkdownFold=function(){this.app.foldManager.save(this.file,this.currentMode.getFoldInfo())},e.prototype.onMoreOptionsMenu=function(e){var n=this;t.prototype.onMoreOptionsMenu.call(this,e),e.addItem((function(t){return t.setTitle(Ee("interface.menu.find")).setIcon(km).onClick((function(){return n.showSearch()}))})),"source"===this.getMode()&&e.addItem((function(t){return t.setTitle(Ee("interface.menu.replace")).setIcon(km).onClick((function(){return n.showSearch(!0)}))})),By.isDesktopApp&&e.addItem((function(t){return t.setTitle(Ee("commands.export-pdf")).setIcon(Gg).onClick((function(t){return n.app.commands.executeCommandById("workspace:export-pdf",t)}))})),this.editMode===this.currentMode&&e.addItem((function(t){return t.setTitle(Ee("commands.toggle-source-mode")).setIcon(hv).onClick((function(){var t=n.getState();t.source=!t.source,n.leaf.setViewState({type:iR,state:t})}))}))},e.prototype.onHeaderMenu=function(e){var n=this;t.prototype.onHeaderMenu.call(this,e);var i=this.getMode();"preview"===i?e.addItem((function(t){return t.setTitle(Ee("interface.menu.edit")).setIcon($g).onClick(n.onSwitchView.bind(n))})):"source"===i&&e.addItem((function(t){return t.setTitle(Ee("interface.menu.preview")).setIcon(Ly).onClick(n.onSwitchView.bind(n))}))},e.prototype.onResize=function(){this.currentMode.onResize()},e.prototype.onCssChange=function(){this.editMode&&this.editMode.onCssChange(),this.sourceMode&&this.sourceMode instanceof TP&&this.sourceMode.onCssChange()},e.prototype.onTitleKeydown=function(t){t.isComposing||"Enter"!==t.key&&"Tab"!==t.key||(t.preventDefault(),this.setEphemeralState({focus:!0}))},e.prototype.triggerQuickPreview=function(){var t=this.currentMode.get();this.data!==t&&(this.data=t,this.leaf.workspace.onQuickPreview(this.file,this.data))},e.prototype.onQuickPreview=function(t,e){t===this.file&&this.setData(e,!1)},e.prototype.setViewData=function(t,e){var n=this.currentMode,i=this.modes;if(e){for(var r in this.scroll=null,i)i.hasOwnProperty(r)&&i[r].set(t,!0);var o=this.app.foldManager.load(this.file);o&&n.applyFoldInfo(o)}else n.set(t,!1)},e.prototype.onDocumentClick=function(t){var e=this,n=e.currentMode,i=e.sourceMode,r=e.editMode;n===i&&i.onDocumentClick(t),n===r&&r.onDocumentClick(t)},e.prototype.updateOptions=function(){var t=this.modes;for(var e in t)t.hasOwnProperty(e)&&t[e].updateOptions()},e.prototype.showSearch=function(t){void 0===t&&(t=!1),this.currentMode.showSearch(t)},e.prototype.getSelection=function(){return this.currentMode.getSelection()},e.prototype.printToPdf=function(){new sR(this.app,this.file).open()},e.prototype.triggerClickableToken=function(t,e){var n=this;if("internal-link"===t.type)setTimeout((function(){n.app.workspace.openLinkText(t.text,n.file.path,e)}),100);else if("external-link"===t.type)window.open(t.text);else if("tag"===t.type){var i=t.text;i.startsWith("#")||(i="#"+i);var r=this.app.internalPlugins.getPluginById("global-search");r&&r.instance.openGlobalSearch("tag:"+i)}},e.prototype.followLinkUnderCursor=function(t){var e=this.editor.getClickableTokenAt(this.editor.getCursor());e&&this.triggerClickableToken(e,t)},e.VIEW_TYPE=iR,e}(iF),oR=Me("editor.print-modal"),sR=function(t){function e(e,n){var i=t.call(this,e)||this;i.file=n,i.modalEl.addClass("mod-narrow"),i.titleEl.setText(oR("title"));var r=i.contentEl;r.createEl("p",{cls:"u-muted",text:oR("caption",{filename:n.basename})});var o=e.vault.getConfig("pdfExportSettings");return new DA(r).setName(oR("setting-page-size")).addDropdown((function(t){return t.addOption("A3",oR("setting-page-size-a3")).addOption("A4",oR("setting-page-size-a4")).addOption("A5",oR("setting-page-size-a5")).addOption("Legal",oR("setting-page-size-legal")).addOption("Letter",oR("setting-page-size-letter")).addOption("Tabloid",oR("setting-page-size-tabloid")).setValue(o.pageSize).then((function(t){return i.pageSize=t}))})),new DA(r).setName(oR("setting-landscape")).addToggle((function(t){return t.setValue(o.landscape).then((function(t){return i.landscape=t}))})),new DA(r).setName(oR("setting-margin")).addDropdown((function(t){return t.addOption("0",oR("setting-margin-default")).addOption("2",oR("setting-margin-minimal")).addOption("1",oR("setting-margin-none")).setValue(o.margin).then((function(t){return i.marginsType=t}))})),new DA(r).setName(oR("setting-downscale-percent")).addSlider((function(t){return t.setLimits(1,100,1).setDynamicTooltip().setValue(o.downscalePercent).then((function(t){return i.scaleFactor=t}))})),r.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:oR("button-export-to-pdf")},(function(t){t.addEventListener("click",(function(){return D(i,void 0,void 0,(function(){var t,n,i,r;return A(this,(function(o){switch(o.label){case 0:return t={pageSize:this.pageSize.getValue(),landscape:this.landscape.getValue(),margin:this.marginsType.getValue(),downscalePercent:this.scaleFactor.getValue()},e.vault.setConfig("pdfExportSettings",t),(n={}).pageSize=t.pageSize,n.landscape=t.landscape,n.marginsType=parseInt(t.margin),n.scaleFactor=t.downscalePercent,n.open=!0,i=this.file,[4,ae("electron").remote.dialog.showSaveDialog({defaultPath:i.basename+".pdf",filters:[{name:"PDF Files",extensions:["pdf"]},{name:"All Files",extensions:["*"]}],properties:["showOverwriteConfirmation"]})];case 1:return(r=o.sent()).cancelled||!r.filePath?[2]:(n.filepath=r.filePath,this.close(),[4,this.printToPdf(n)]);case 2:return o.sent(),[2]}}))}))}))}))})),i}return M(e,t),e.prototype.printToPdf=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:(e=this.app.loadProgress).setMessage(Ee("dialogue.preparing-pdf")),e.show(),n=document.body.createDiv("print"),(i=new Vg).load(),r=function(){n.detach(),i.unload(),e.hide()},n.addEventListener("click",r),s.label=1;case 1:return s.trys.push([1,5,6,7]),[4,this.print(n,i)];case 2:return s.sent(),[4,Sh(200)];case 3:return s.sent(),[4,(a=t,new Promise((function(t){var e=ae("electron").ipcRenderer;e.once("printToPDF",t),e.send("printToPDF",a)})))];case 4:return s.sent(),new jb("PDF Saved to "+t.filepath),[3,7];case 5:return o=s.sent(),console.error(o),new jb("Failed to save PDF."),[3,7];case 6:return r(),[7];case 7:return[2]}var a}))}))},e.prototype.testPrint=function(){return D(this,void 0,void 0,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return(t=document.body.createDiv("print")).addEventListener("click",(function(){t.detach(),e.unload()})),(e=new Vg).load(),[4,this.print(t,e)];case 1:return n.sent(),[2]}}))}))},e.prototype.print=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o,s,a,l,c,u,h,p,d,f;return A(this,(function(g){switch(g.label){case 0:return n=t.createDiv("markdown-preview-view"),r=(i=this).app,o=i.file,[4,this.app.vault.cachedRead(o)];case 1:return s=g.sent(),a=Eg(s),l=Mg(a),c=Lg(a),u=zg(c),n.appendChild(u),n.toggleClass("show-frontmatter",r.vault.getConfig("showFrontmatter")),h=[],wB.postProcess(r,{docId:Tt(16),sourcePath:o.path,frontmatter:l,promises:h,addChild:function(t){return e.addChild(t)},getSectionInfo:function(){return null},containerEl:n,el:n,displayMode:!0}),h.length>0?[4,Promise.all(h)]:[3,3];case 2:g.sent(),g.label=3;case 3:for(p=n.findAll("a.internal-link"),d=0,f=p;d<f.length;d++)f[d].removeAttribute("href");return[2,n]}}))}))},e}(KD),aR=function(t){function e(e,n,i,r,o){var s=t.call(this,e)||this;return s.headingLine=n,s.file=o,s.editor=r,s.oldHeading=i,s.inputEl=createEl("input",{type:"text",value:i}),s.inputEl.addEventListener("keypress",(function(t){"Enter"===t.key&&(s.submit(),s.close())})),s.setTitle(Ee("dialogue.label-rename-heading")).setContent(createFragment((function(t){t.createEl("label",{cls:"input-label",text:Ee("dialogue.label-new-name")}),t.appendChild(s.inputEl)}))).addButton("mod-cta",Ee("dialogue.button-done"),(function(){s.submit()})).addCancelButton(),s}return M(e,t),e.prototype.submit=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C;return A(this,(function(x){switch(x.label){case 0:if(t=this.editor,e=this.headingLine,n=this.inputEl.value,i=t.getLine(e),""===n)return new jb(Ee("plugins.file-explorer.msg-empty-file-name")),[2];for(r=this.replaceHeadingText(i,n),o=rA(n),s=this.app.fileManager,a=s.getAllLinkResolutions(!1),l=new At,c=rA(this.oldHeading).toLowerCase(),u=0,h=a;u<h.length;u++)(p=h[u]).resolvedFile===this.file&&(d=tA(p.reference.link),f=d.path,g=d.subpath,m=g.substring(1),rA(m).toLowerCase()===c&&l.add(p.sourceFile.path,{reference:p.reference,newLinktext:f+"#"+o}));return 0!==(v=l.count())?[3,1]:(t.setLine(e,r),[3,7]);case 1:return y=Ee("nouns.link-with-count",{count:v}),b=Ee("nouns.file-with-count",{count:Object.keys(l.data).length}),w=Ee("dialogue.msg-updated-links",{links:y,files:b}),(k=l.get(this.file.path))&&k.length>0?(l.removeKey(this.file.path),[4,this.app.vault.read(this.file)]):[3,4];case 2:return C=x.sent(),C=(C=s.updateInternalLinksForFile(C,k)).replace(new RegExp("^"+Mt(i)+"$","gm"),r),[4,this.app.vault.modify(this.file,C)];case 3:return x.sent(),[3,5];case 4:t.setLine(e,r),x.label=5;case 5:return[4,s.updateInternalLinks(l)];case 6:x.sent(),new jb(w),x.label=7;case 7:return this.close(),[2]}}))}))},e.prototype.onOpen=function(){t.prototype.onOpen.call(this),this.inputEl.select(),this.inputEl.focus()},e.prototype.replaceHeadingText=function(t,e){return t.replace(/^(#{1,6} ).*/m,(function(t,n){return n+e}))},e}($D);function lR(t){t.checkCallback?t.checkCallback(!1):t.callback?t.callback():console.error("Command "+t+" did not provide a callback")}var cR=function(){function t(t){this.commands={},this.editorCommands={},this.app=t}return t.prototype.addCommand=function(t){var e=this;t.mobileOnly&&!By.isMobile||((t.editorCallback||t.editorCheckCallback)&&(t.checkCallback=function(n){var i=e.app.workspace.getActiveViewOfType(rR);if(i&&(t.allowPreview||"source"===i.getMode())){if(t.editorCheckCallback)return t.editorCheckCallback(n,i.editor,i);if(t.editorCallback)return n||t.editorCallback(i.editor,i),!0}},this.editorCommands[t.id]=t),this.commands[t.id]=t,t.hotkeys&&this.app.hotkeyManager.addDefaultHotkeys(t.id,t.hotkeys))},t.prototype.removeCommand=function(t){this.commands.hasOwnProperty(t)&&this.app.hotkeyManager.removeDefaultHotkeys(t),delete this.commands[t],delete this.editorCommands[t]},t.prototype.findCommand=function(t){return this.commands[t]},t.prototype.listCommands=function(){return Object.values(this.commands).filter((function(t){if(!t.checkCallback)return!0;try{return t.checkCallback(!0)}catch(e){return console.log("Command failed to execute: ",t.id),console.error(e),!1}}))},t.prototype.executeCommandById=function(t,e){this.app.lastEvent=e||null;var n=this.findCommand(t);if(!n)return!1;try{lR(n)}catch(t){return console.log("Command failed to execute: ",n.id),console.error(t),!1}return!0},t}(),uR=function(t){function e(e){var n=t.call(this)||this;return n.app=null,n.styleEl=null,n.themes=[],n.snippets=[],n.enabledSnippets=new Set,n.csscache=new Map,n.theme="",n.useObsidianCss=!1,n.queue=new Eh,n.app=e,n.boundFileUpdated=n.onFileUpdated.bind(n),n.boundRaw=n.onRaw.bind(n),n.requestReloadCss=De(n.applyCss.bind(n),100),n}return M(e,t),e.prototype.onload=function(){return D(this,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return t.prototype.onload.call(this),e=this.app,this.loadData(),[4,this.readCssFolders()];case 1:return i.sent(),n=this.styleEl=createEl("style",{type:"text/css"}),this.registerEvent(e.vault.on("create",this.boundFileUpdated)),this.registerEvent(e.vault.on("modify",this.boundFileUpdated)),this.registerEvent(e.vault.on("delete",this.boundFileUpdated)),this.registerEvent(e.vault.on("raw",this.boundRaw)),document.head.appendChild(n),this.applyCss(),[2]}}))}))},e.prototype.loadData=function(){var t=this.app.vault,e=t.getConfig("enabledCssSnippets");e&&(this.enabledSnippets=new Set(e));var n=t.getConfig("cssTheme");n&&(this.theme=n),t.getConfig("translucency")&&this.enableTranslucency()},e.prototype.readCssFolders=function(){var t=this;return this.queue.queue((function(){return t._readCssFolders()}))},e.prototype._readCssFolders=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d;return A(this,(function(f){switch(f.label){case 0:return t=this.app,e=this.app.vault.adapter,n=[],i=this.getThemeFolder(),[4,t.vault.exists(i)];case 1:return f.sent()?[4,t.vault.adapter.list(i)]:[3,3];case 2:for(r=f.sent(),o=0,s=r.files;o<s.length;o++)p=s[o],(d=Kt(p)).startsWith(".")||"css"!==Xt(d)||n.push(Jt(d));f.label=3;case 3:return this.themes=n,a=[],l=this.getSnippetsFolder(),[4,t.vault.exists(l)];case 4:return f.sent()?[4,e.list(l)]:[3,6];case 5:for(c=f.sent(),u=0,h=c.files;u<h.length;u++)p=h[u],(d=Kt(p)).startsWith(".")||"css"!==Xt(d)||a.push(Jt(d));f.label=6;case 6:return a.sort(DN),this.snippets=a,this.requestReloadCss(),[2]}}))}))},e.prototype.onFileUpdated=function(t){this.onRaw(t.path)},e.prototype.onRaw=function(t){(t.startsWith(this.getThemeFolder())||t.startsWith(this.getThemeFolder()))&&this.readCssFolders(),this.csscache.has(t)&&(this.csscache.delete(t),this.requestReloadCss())},e.prototype.applyCss=function(t){var e=this;return this.queue.queue((function(){return e._applyCss(t)}))},e.prototype._applyCss=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p;return A(this,(function(d){switch(d.label){case 0:return n=(e=this).theme,i=e.enabledSnippets,r=e.snippets,o=[],t?(o.push(t),[3,3]):[3,1];case 1:return n?(a=(s=o).push,[4,this.loadCss(this.getThemePath(n))]):[3,3];case 2:a.apply(s,[d.sent()]),d.label=3;case 3:l=0,c=r,d.label=4;case 4:return l<c.length?(u=c[l],i.has(u)?(p=(h=o).push,[4,this.loadCss(this.getSnippetPath(u))]):[3,6]):[3,7];case 5:p.apply(h,[d.sent()]),d.label=6;case 6:return l++,[3,4];case 7:return this.styleEl.textContent=o.filter((function(t){return t})).join("\n"),this.app.workspace.trigger("css-change"),this.app.workspace.trigger("resize"),[2]}}))}))},e.prototype.loadCss=function(t){return D(this,void 0,Promise,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:return(e=this.csscache).has(t)?[2,e.get(t)]:[4,(n=this.app.vault.adapter).exists(t)];case 1:return r.sent()?[4,n.read(t)]:[3,3];case 2:return i=r.sent(),e.set(t,i),[2,i];case 3:return[2,null]}}))}))},e.prototype.setCssEnabledStatus=function(t,e){var n=this.enabledSnippets;e?n.add(t):n.delete(t),this.app.vault.setConfig("enabledCssSnippets",Array.from(n)),this.requestReloadCss()},e.prototype.setTheme=function(t){this.theme=t,this.app.vault.setConfig("cssTheme",t),this.requestReloadCss()},e.prototype.setTranslucency=function(t){this.app.vault.setConfig("translucency",t),t?this.enableTranslucency():this.disableTranslucency()},e.prototype.enableTranslucency=function(){le((function(t){try{var e=t.remote.getCurrentWindow();if("Windows"===ht){e.setBackgroundColor("#00000000");var n=window.require("vibrancy-win");n.setAcrylic(e,343932960)||n.setBlurBehind(e,0)}else{if("MacOS"!==ht)return;e.setBackgroundColor("#00000000"),e.setVibrancy("fullscreen-ui")}document.body.addClass("is-translucent")}catch(t){new jb(Ee("interface.msg-upgrade-installer"))}}))},e.prototype.disableTranslucency=function(){le((function(t){document.body.removeClass("is-translucent");try{var e=t.remote.getCurrentWindow();if("Windows"===ht){window.require("vibrancy-win").disable(e)}else{if("MacOS"!==ht)return;e.setVibrancy(null)}}catch(t){}}))},e.prototype.getThemeFolder=function(){return this.app.vault.configDir+"/themes"},e.prototype.getSnippetsFolder=function(){return this.app.vault.configDir+"/snippets"},e.prototype.getThemePath=function(t){return this.getThemeFolder()+"/"+t+".css"},e.prototype.getSnippetPath=function(t){return this.getSnippetsFolder()+"/"+t+".css"},e}(Vg);function hR(t){return D(this,void 0,Promise,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return[2,i.sent()];case 2:throw e=i.sent(),(n=e.message)&&(n.contains("does not exist")||n.contains("there is no such file"))&&(e.code="ENOENT"),e;case 3:return[2]}}))}))}var pR=5242880;function dR(t){if("NSFileTypeRegular"===t.type?t.type="file":"NSFileTypeDirectory"===t.type&&(t.type="directory"),null===t.ctime&&(t.ctime=0),"children"in t&&t.children)for(var e=0,n=t.children;e<n.length;e++){dR(n[e])}}var fR=function(){function t(t){this.uri="",this.dir=t}return t.prototype.init=function(){return D(this,void 0,Promise,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return t=this,[4,QF.getUri({directory:this.dir,path:""})];case 1:return t.uri=e.sent().uri,[2]}}))}))},t.prototype.watch=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,QF.startWatch({directory:this.dir,path:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.verifyIcloud=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,QF.verifyIcloud({path:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.read=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,hR(QF.readFile({directory:this.dir,path:t,encoding:WF.UTF8}))];case 1:return[2,e.sent().data]}}))}))},t.prototype.readBinary=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,hR(this.stat(t))];case 1:return e.sent().size<pR?[4,hR(QF.readFile({directory:this.dir,path:t}))]:[3,3];case 2:return[2,Y(e.sent().data)];case 3:return[4,fetch(this.getUri(t))];case 4:return[2,e.sent().arrayBuffer()]}}))}))},t.prototype.write=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,hR(QF.writeFile({directory:this.dir,path:t,data:e,encoding:WF.UTF8}))];case 1:return n.sent(),[2]}}))}))},t.prototype.writeBinary=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,hR(this.writeBinaryInternal(t,e))];case 1:return n.sent(),[2]}}))}))},t.prototype.writeBinaryInternal=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return e.byteLength<pR?[4,QF.writeFile({directory:this.dir,path:t,data:J(e)})]:[3,2];case 1:return s.sent(),[2];case 2:return[4,QF.writeFile({directory:this.dir,path:t,data:""})];case 3:s.sent(),n=0,s.label=4;case 4:return n<e.byteLength?(i=Math.min(1048576,e.byteLength-n),r=new Uint8Array(e,n,i),o=Q(r),[4,QF.appendFile({directory:this.dir,path:t,data:o})]):[3,6];case 5:return s.sent(),n+=i,[3,4];case 6:return[2]}}))}))},t.prototype.append=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,hR(QF.appendFile({directory:this.dir,path:t,data:e,encoding:WF.UTF8}))];case 1:return n.sent(),[2]}}))}))},t.prototype.mkdir=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,hR(QF.mkdir({directory:this.dir,path:t,recursive:!0}))];case 1:return e.sent(),[2]}}))}))},t.prototype.readdir=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,hR(QF.readdir({directory:this.dir,path:t}))];case 1:return[2,e.sent().files]}}))}))},t.prototype.stat=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return[4,hR(QF.stat({directory:this.dir,path:t}))];case 1:return dR(e=n.sent()),[2,e]}}))}))},t.prototype.statAll=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return[4,hR(QF.statAll({directory:this.dir,path:t}))];case 1:return dR(e=n.sent()),[2,e]}}))}))},t.prototype.exists=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.stat(t)];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}}))}))},t.prototype.setTimes=function(t,e,n){return D(this,void 0,Promise,(function(){return A(this,(function(i){switch(i.label){case 0:return[4,hR(QF.setTimes({directory:this.dir,path:t,ctime:e,mtime:n}))];case 1:return i.sent(),[2]}}))}))},t.prototype.rmdir=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,hR(QF.rmdir({directory:this.dir,path:t,recursive:!0}))];case 1:return e.sent(),[2]}}))}))},t.prototype.delete=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,hR(QF.deleteFile({directory:this.dir,path:t}))];case 1:return e.sent(),[2]}}))}))},t.prototype.rename=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,hR(QF.rename({directory:this.dir,from:t,to:e}))];case 1:return n.sent(),[2]}}))}))},t.prototype.copy=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,hR(QF.copy({directory:this.dir,from:t,to:e}))];case 1:return n.sent(),[2]}}))}))},t.prototype.open=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,hR(QF.open({directory:this.dir,path:t}))];case 1:return e.sent(),[2]}}))}))},t.prototype.trash=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,hR(QF.trash({directory:this.dir,path:t}))];case 1:return e.sent(),[2]}}))}))},t.prototype.getNativeUri=function(t){t=ie(t);var e=this.uri;return"/"===t?e:(e.endsWith("/")||(e+="/"),e+t.split("/").map((function(t){return encodeURIComponent(t)})).join("/"))},t.prototype.getUri=function(t){var e=this.getNativeUri(t);return e.startsWith("file://")&&(e=jF.convertFileSrc(e)),e},t}();function gR(t){return{ctime:Math.round(t.ctime),mtime:Math.round(t.mtime),size:t.size}}window.FS=fR;var mR=function(){function t(t,e){var n=this;this.fs=e,this.basePath=t,this.files={},this.promise=Promise.resolve(),this.handler=null,this.insensitive=!1,D(n,void 0,void 0,(function(){return A(this,(function(t){try{this.testInsensitive()}catch(t){console.error(t)}return[2]}))}))}return t.prototype.testInsensitive=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){return[2]}))}))},t.prototype.getName=function(){return Kt(this.basePath)},t.prototype.listAll=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r;return A(this,(function(o){switch(o.label){case 0:this.files["/"]={type:"folder",realpath:"/"},o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.fs.statAll(this.getFullRealPath(""))];case 2:if((t=o.sent()).children)for(e=0,n=t.children;e<n.length;e++)i=n[e],this.quickListRecursive("",i);return[3,5];case 3:return r=o.sent(),console.error("Failed to run quick list",r),[4,this.listRecursive("")];case 4:return o.sent(),[3,5];case 5:return[2]}}))}))},t.prototype.quickListRecursive=function(t,e){var n=e.name,i=ie(""===t?n:t+"/"+n),r=ne(i);if(this.trigger("raw",r),!Yt(r))if("file"===e.type)this.reconcileFileChanged(i,r,e);else if("directory"===e.type&&(this.files.hasOwnProperty(r)?this.files[r].realpath=i:(this.files[r]={type:"folder",realpath:i},this.trigger("folder-created",r)),e.children))for(var o=0,s=e.children;o<s.length;o++){var a=s[o];this.quickListRecursive(i,a)}},t.prototype.listRecursive=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:return e=this.getFullRealPath(t),[4,this.fs.readdir(e)];case 1:for(n=a.sent(),i=[],r=0,o=n;r<o.length;r++)s=o[r],i.push(this.listRecursiveChild(t,s));return[4,Promise.all(i)];case 2:return a.sent(),[2]}}))}))},t.prototype.listRecursiveChild=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r;return A(this,(function(o){switch(o.label){case 0:return n=ie(""===t?e:t+"/"+e),i=ne(n),this.trigger("raw",i),Yt(i)?[4,this.reconcileDeletion(n,i)]:[3,2];case 1:return[2,o.sent()];case 2:return[4,this.fs.stat(this.getFullRealPath(n))];case 3:return"file"!==(r=o.sent()).type?[3,4]:(this.reconcileFileChanged(n,i,r),[3,6]);case 4:return"directory"!==r.type?[3,6]:[4,this.reconcileFolderCreation(n,i)];case 5:o.sent(),o.label=6;case 6:return[2]}}))}))},t.prototype.mkdir=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:e=this.getFullPath(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fs.mkdir(e)];case 2:return i.sent(),[3,4];case 3:if("Directory exists"!==(n=i.sent()).message)throw n;return[3,4];case 4:return[4,this.reconcileInternalFile(t)];case 5:return i.sent(),[2]}}))}))}))},t.prototype.trashSystem=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:e=this.getFullPath(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fs.trash(e)];case 2:return n.sent(),[3,4];case 3:return n.sent(),[2,!1];case 4:return[4,this.reconcileInternalFile(t)];case 5:return n.sent(),[2,!0]}}))}))}))},t.prototype.trashLocal=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){var e,n,i,r,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:e=this.getFullPath(t),n=this.getFullPath(".trash"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.fs.mkdir(n)];case 2:return c.sent(),[3,4];case 3:if("Directory exists"!==(i=c.sent()).message)throw i;return[3,4];case 4:r=Kt(e),o=Qt(r),s=Xt(r),a=n+"/"+o+"."+s,l=1,c.label=5;case 5:return[4,this._exists(a)];case 6:return c.sent()?(l++,a=n+"/"+o+" "+l+"."+s,[3,5]):[3,7];case 7:return[4,this.fs.rename(e,a)];case 8:return c.sent(),[4,this.reconcileInternalFile(t)];case 9:return c.sent(),[2]}}))}))}))},t.prototype.rmdir=function(t,e){var n=this;return this.queue((function(){return D(n,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=this.getFullPath(t),[4,this.fs.rmdir(e)];case 1:return n.sent(),[4,this.reconcileInternalFile(t)];case 2:return n.sent(),[2]}}))}))}))},t.prototype.read=function(t){var e=this;return this.queue((function(){var n=e.getFullPath(t);return e.fs.read(n)}))},t.prototype.readBinary=function(t){var e=this;return this.queue((function(){var n=e.getFullPath(t);return e.fs.readBinary(n)}))},t.prototype.write=function(t,e,n){var i=this;return this.queue((function(){return D(i,void 0,void 0,(function(){var i;return A(this,(function(r){switch(r.label){case 0:return i=this.getFullPath(t),[4,this.fs.write(i,e)];case 1:return r.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,3]:[3,4];case 2:r.sent(),r.label=3;case 3:n.immediate&&n.immediate(),r.label=4;case 4:return[4,this.reconcileInternalFile(t)];case 5:return r.sent(),[2]}}))}))}))},t.prototype.writeBinary=function(t,e,n){var i=this;return this.queue((function(){return D(i,void 0,void 0,(function(){var i;return A(this,(function(r){switch(r.label){case 0:return i=this.getFullPath(t),[4,this.fs.writeBinary(i,e)];case 1:return r.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,3]:[3,4];case 2:r.sent(),r.label=3;case 3:n.immediate&&n.immediate(),r.label=4;case 4:return[4,this.reconcileInternalFile(t)];case 5:return r.sent(),[2]}}))}))}))},t.prototype.append=function(t,e,n){var i=this;return this.queue((function(){return D(i,void 0,void 0,(function(){var i;return A(this,(function(r){switch(r.label){case 0:return i=this.getFullPath(t),[4,this.fs.append(i,e)];case 1:return r.sent(),n?n.ctime||n.mtime?[4,this.fs.setTimes(i,n.ctime,n.mtime)]:[3,3]:[3,4];case 2:r.sent(),r.label=3;case 3:n.immediate&&n.immediate(),r.label=4;case 4:return[4,this.reconcileInternalFile(t)];case 5:return r.sent(),[2]}}))}))}))},t.prototype.getResourcePath=function(t){var e=this.getFullPath(t);return this.fs.getUri(e)},t.prototype.getNativePath=function(t){var e=this.getFullPath(t);return this.fs.getNativeUri(e)},t.prototype.open=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){return e=this.getFullPath(t),[2,this.fs.open(e)]}))}))},t.prototype.remove=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=this.getFullPath(t),[4,this.fs.delete(e)];case 1:return n.sent(),[4,this.reconcileInternalFile(t)];case 2:return n.sent(),[2]}}))}))}))},t.prototype.update=function(t){var e=this;return this.queue((function(){return D(e,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.reconcileInternalFile(t)];case 1:return e.sent(),[2]}}))}))}))},t.prototype.rename=function(t,e){return D(this,void 0,Promise,(function(){var n=this;return A(this,(function(i){switch(i.label){case 0:return t===e?[2]:[4,this.queue((function(){return D(n,void 0,void 0,(function(){var n,i,r,o,s,a,l,c,u,h;return A(this,(function(p){switch(p.label){case 0:return n=this.getFullPath(t),i=this.getFullPath(e),[4,this._exists(i,!1)];case 1:if(p.sent()&&(!this.insensitive||t.toLowerCase()!==e.toLowerCase()))throw new Error("Destination file already exists!");return r=this.files[t],o=r?r.realpath:null,[4,this.fs.rename(n,i)];case 2:if(p.sent(),!r)return[2];if(delete this.files[t],s=this.getRealPath(e),r.realpath=s,this.files[e]=r,this.trigger("renamed",e,t),"folder"===r.type)for(a in this.files)this.files.hasOwnProperty(a)&&a.startsWith(t+"/")&&(l=a.slice(t.length),c=e+l,u=this.files[a],delete this.files[a],h=u.realpath.slice(o.length),u.realpath=s+h,this.files[c]=u,this.trigger("renamed",c,a));return[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},t.prototype.copy=function(t,e){return D(this,void 0,Promise,(function(){var n=this;return A(this,(function(i){switch(i.label){case 0:return[4,this.queue((function(){return D(n,void 0,void 0,(function(){var n,i;return A(this,(function(r){switch(r.label){case 0:return n=this.getFullPath(t),i=this.getFullPath(e),[4,this.fs.copy(n,i)];case 1:return r.sent(),[4,this.reconcileInternalFile(e)];case 2:return r.sent(),[2]}}))}))}))];case 1:return i.sent(),[2]}}))}))},t.prototype.exists=function(t,e){return D(this,void 0,Promise,(function(){var n=this;return A(this,(function(i){return[2,this.queue((function(){var i=n.getFullPath(t);return n._exists(i,e)}))]}))}))},t.prototype._exists=function(t,e){return D(this,void 0,Promise,(function(){var n,i;return A(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.fs.stat(t)];case 1:return r.sent(),[3,3];case 2:return r.sent(),[2,!1];case 3:return e&&this.insensitive?(n=$t(t),i=Kt(t),[4,this.fs.readdir(n)]):[3,5];case 4:if(-1===r.sent().indexOf(i))return[2,!1];r.label=5;case 5:return[2,!0]}}))}))},t.prototype.stat=function(t){return D(this,void 0,Promise,(function(){var e=this;return A(this,(function(n){return[2,this.queue((function(){return D(e,void 0,void 0,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:e=this.getFullPath(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fs.stat(e)];case 2:return"file"===(n=r.sent()).type?[2,L({type:"file"},gR(n))]:"directory"===n.type?[2,{type:"folder",ctime:0,mtime:0,size:0}]:[3,4];case 3:if("ENOENT"!==(i=r.sent()).code)throw i;return[3,4];case 4:return[2,null]}}))}))}))]}))}))},t.prototype.list=function(t){return D(this,void 0,Promise,(function(){var e=this;return A(this,(function(n){return[2,this.queue((function(){return D(e,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c;return A(this,(function(u){switch(u.label){case 0:return e=this.getFullPath(t),[4,this.fs.readdir(e)];case 1:n=u.sent(),i={folders:[],files:[]},r=0,o=n,u.label=2;case 2:return r<o.length?(s=o[r],a=ie(""===t?s:t+"/"+s),l=ne(a),[4,this.fs.stat(this.getFullRealPath(a))]):[3,5];case 3:"file"===(c=u.sent()).type&&i.files.push(l),"directory"===c.type&&i.folders.push(l),u.label=4;case 4:return r++,[3,2];case 5:return[2,i]}}))}))}))]}))}))},t.prototype.watch=function(t){return D(this,void 0,Promise,(function(){var e=this;return A(this,(function(n){switch(n.label){case 0:return this.stopWatch(),this.handler=t,[4,QF.addListener("change",(function(t){var n=ie(t.path),i=ie(n.substr(e.basePath.length));e.onFileChange(i)}))];case 1:return n.sent(),[2,this.queue((function(){return e.listAll()}))]}}))}))},t.prototype.stopWatch=function(){try{QF.removeAllListeners()}catch(t){}this.handler=null},t.prototype.onFileChange=function(t){var e=this;t&&(t=ie(t),setTimeout((function(){var n=ne(t);e.queue((function(){return e.reconcileFile(t,n,!1)}))}),0))},t.prototype.reconcileInternalFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){return[2,this.reconcileFile(this.getRealPath(t),t)]}))}))},t.prototype.reconcileFile=function(t,e,n){return void 0===n&&(n=!0),D(this,void 0,Promise,(function(){var i,r,o,s,a;return A(this,(function(l){switch(l.label){case 0:return this.trigger("raw",e),Yt(e)?[4,this.reconcileDeletion(t,e,n)]:[3,2];case 1:return[2,l.sent()];case 2:return l.trys.push([2,10,,14]),i=this.getFullRealPath(t),this.insensitive?(r=$t(i),o=Kt(e),[4,this.fs.readdir(r)]):[3,5];case 3:return-1!==l.sent().map((function(t){return mF(t).normalize("NFC")})).indexOf(o)?[3,5]:[4,this.reconcileDeletion(t,e,n)];case 4:return[2,l.sent()];case 5:return[4,this.fs.stat(i)];case 6:return"file"!==(s=l.sent()).type?[3,7]:(this.reconcileFileChanged(t,e,s),[3,9]);case 7:return"directory"!==s.type?[3,9]:[4,this.reconcileFolderCreation(t,e)];case 8:l.sent(),l.label=9;case 9:return[3,14];case 10:return"ENOENT"!==(a=l.sent()).code?[3,12]:[4,this.reconcileDeletion(t,e,n)];case 11:return l.sent(),[3,13];case 12:console.error(a),l.label=13;case 13:return[3,14];case 14:return[2]}}))}))},t.prototype.reconcileFileChanged=function(t,e,n){var i=this.files[e];if(i){if(i.realpath=t,"file"===i.type&&(i.mtime!==Math.round(n.mtime)||i.size!==n.size)){i.mtime=Math.round(n.mtime),i.size=n.size;var r=gR(n);this.trigger("modified",e,e,r)}}else this.reconcileFileCreation(t,e,n)},t.prototype.reconcileFileCreation=function(t,e,n){var i=gR(n);this.files[e]||(this.files[e]=function(t,e){return"file"===e.type?{type:"file",realpath:t,ctime:Math.round(e.ctime),mtime:Math.round(e.mtime),size:e.size}:"directory"===e.type?{type:"folder",realpath:t}:void 0}(t,n),this.trigger("file-created",e,e,i))},t.prototype.reconcileFolderCreation=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return this.files.hasOwnProperty(e)?[3,2]:(this.files[e]={type:"folder",realpath:t},this.trigger("folder-created",e),[4,this.listRecursive(t)]);case 1:return n.sent(),[3,3];case 2:this.files[e].realpath=t,n.label=3;case 3:return[2]}}))}))},t.prototype.reconcileDeletion=function(t,e,n){return void 0===n&&(n=!0),D(this,void 0,Promise,(function(){var i,r,o=this;return A(this,(function(s){if("/"===e)return this.trigger("closed",e),[2];if(!(i=this.files[e]))return[2];if(!n)return setTimeout((function(){o.queue((function(){return o.reconcileFile(t,e)}))}),100),[2];if("folder"===i.type)for(r in this.files)this.files.hasOwnProperty(r)&&r.startsWith(e+"/")&&this.removeFile(r);return this.removeFile(e),[2]}))}))},t.prototype.trigger=function(t,e,n,i){this.handler&&this.handler(t,e,n,i)},t.prototype.getRealPath=function(t){for(var e=t;e;){if(this.files.hasOwnProperty(e)){var n=t.substr(e.length);return this.files[e].realpath+n}e=$t(e)}return t},t.prototype.getFullPath=function(t){var e=this.getRealPath(t);return this.getFullRealPath(e)},t.prototype.getFullRealPath=function(t){return this.basePath+"/"+t},t.prototype.queue=function(t){var e=this.promise.then(t,t);return this.promise=e,e},t.prototype.removeFile=function(t){var e=this.files[t];delete this.files[t],e&&("file"===e.type?this.trigger("file-removed",t):"folder"===e.type&&this.trigger("folder-removed",t))},t}(),vR=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.editor=i,r.suggestEl.on("mousedown",".suggestion-item",(function(t){return t.preventDefault()})),r}return M(e,t),e.prototype.getSuggestions=function(t){return[0,1,2,3,4,5,6]},e.prototype.renderSuggestion=function(t,e){0===t?e.setText("No heading"):e.setText("Heading "+t)},e.prototype.selectSuggestion=function(t,e){this.close(),this.editor.setHeading(t)},e.prototype.open=function(){this.suggestions.setSuggestions(this.getSuggestions("")),By.isMobile||this.reposition(this.editor.coordsAtPos(this.editor.getCursor())),t.prototype.open.call(this)},e}(TI);var yR=function(){function t(t){this.app=t}return t.prototype.cleanup=function(){var t=this.app,e=this.app.appId+"-note-fold-";for(var n in localStorage)if(n.startsWith(e)){var i=n.substr(e.length);t.vault.getAbstractFileByPath(i)||localStorage.removeItem(n)}},t.prototype.load=function(t){return t?this.app.loadLocalStorage("note-fold-"+t.path):null},t.prototype.save=function(t,e){if(t)return this.app.saveLocalStorage("note-fold-"+t.path,e)},t}(),bR=function(){function t(t){this.isOpen=!1,this.app=t,this.containerEl=createDiv("mobile-toolbar"),this.optionsContainerEl=this.containerEl.createDiv("mobile-toolbar-options-container")}return t.prototype.open=function(){var t=this,e=this.app,n=this.optionsContainerEl;n.empty();var i=e.vault.getConfig("mobileToolbarCommands");if(0!==i.length){for(var r,o=e.commands,s=function(t){var e=o.findCommand(t);if(!e)return"continue";n.createDiv("mobile-toolbar-option",(function(n){var i=e.icon;i||(i=sy),Ty(n,i,22),n.addEventListener("click",(function(e){o.executeCommandById(t,e),e.preventDefault()})),n.addEventListener("mousedown",(function(t){t.preventDefault()}))}))},a=0,l=i;a<l.length;a++){s(l[a])}this.isOpen=!0;var c=function(){if(clearTimeout(r),window.removeEventListener("resize",c),t.isOpen){var e=t.containerEl;t.app.dom.appContainerEl.appendChild(e);var n=e.offsetHeight-1;kb(e,new mb({duration:250}).addProp("transform","translateY("+n+"px)",""))}};window.addEventListener("resize",c),r=window.setTimeout(c,500)}},t.prototype.close=function(){this.isOpen=!1;var t=this.containerEl;bb(t),t.detach()},t}();function wR(t){return"md"===t.extension?Qt(t.path):t.path}var kR=function(t){function e(e){var n=t.call(this,e)||this;return n.shouldShowUnresolved=!1,n.shouldShowAlias=!0,n.shouldShowAttachments=!0,n.shouldShowAllTypes=!1,n.limit=10,n.scope.register(null,"Tab",(function(){return!1})),n}return M(e,t),e.prototype.onNoSuggestion=function(){this.chooser.setSuggestions([null]),this.chooser.addMessage(this.emptyStateText)},e.prototype.getSuggestions=function(t){var e=this;t=t.trim();var n=this.app,i=n.workspace,r=n.vault,o=n.metadataCache,s=n.viewRegistry,a=[],l=!this.shouldShowAttachments,c=function(t){return s.isExtensionRegistered(t.extension)?!l||"md"===t.extension:e.shouldShowAllTypes};if(!t){for(var u=0,h=i.getLastOpenFiles();u<h.length;u++){var p=h[u];(v=r.getAbstractFileByPath(p))instanceof cb&&(c(v)&&a.push({type:"file",file:v,match:null}))}return a}var d,f=r.getFiles().filter((function(t){return c(t)}));d=f.length<1e4?DT(t):NT(t);for(var g=0,m=f;g<m.length;g++){var v;if((P=iN(d,wR(v=m[g])))&&a.push({type:"file",file:v,match:P}),this.shouldShowAlias){var y=o.getFileCache(v);if(y){var b=Pg(y.frontmatter);if(b)for(var w=0,k=b;w<k.length;w++){var C=k[w],x=d(C);x&&a.push({type:"alias",alias:C,file:v,match:x})}}}}if(this.shouldShowUnresolved){var S=o.unresolvedLinks,E=[];for(var M in S)if(S.hasOwnProperty(M)){var L=S[M];for(var D in L)L.hasOwnProperty(D)&&E.push(D)}for(var A=0,T=E=Array.from(new Set(E));A<T.length;A++){var P,O=T[A];(P=d(O))&&a.push({type:"unresolved",linktext:O,match:P})}}return OT(a),a},e.prototype.renderSuggestion=function(t,e){if(!t){var n=this.inputEl.value;return e.setText(n),e.createEl("kbd",{cls:"suggestion-hotkey",text:Ee("interface.label-enter-to-create")}),void e.createSpan({cls:"suggestion-flair",prepend:!0})}if("file"===t.type)BT(e,wR(t.file),t.match),e.createSpan({cls:"suggestion-flair",prepend:!0});else if("alias"===t.type){BT(e,t.alias,t.match),e.createSpan({cls:"suggestion-flair",prepend:!0},(function(t){Ty(t,tv,16),$e(t,Ee("interface.tooltip.alias"))})),e.createDiv("suggestion-note").appendText(wR(t.file))}else"unresolved"===t.type&&(e.createSpan({cls:"suggestion-flair",prepend:!0,text:"+"},(function(t){Ty(t,Gv,16),$e(t,Ee("interface.tooltip.not-created-yet"))})),BT(e,t.linktext,t.match))},e}(dN),CR=function(){function t(t){this.app=t}return t.prototype.setupNative=function(){var t=this;$F&&YF.addListener("appShareIntent",(function(e){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return ih(),"text"!==e.type?[3,2]:[4,this.handleShareText(e.text)];case 1:t.sent(),t.label=2;case 2:return"file"!==e.type?[3,4]:[4,this.handleShareFiles([e])];case 3:t.sent(),t.label=4;case 4:return"files"!==e.type?[3,6]:[4,this.handleShareFiles(e.files)];case 5:t.sent(),t.label=6;case 6:return[2]}}))}))}))},t.prototype.setupWorkspace=function(){var t=this.app,e=t.workspace;e.on("receive-text-menu",(function(n,i){var r=e.getActiveViewOfType(rR);r&&n.addItem((function(t){return t.setTitle(Ee("interface.mobile.action-insert-text-into-file",{filename:r.file.basename})).setIcon(Gg).onClick((function(){return r.editor.insertText("\n"+i+"\n")}))})),n.addItem((function(e){return e.setTitle(Ee("interface.mobile.action-choose-file-to-insert")).setIcon(Gg).onClick((function(){new xR(t,i).open()}))}))})),e.on("receive-files-menu",(function(n,i){var r=e.getActiveViewOfType(rR);r&&n.addItem((function(e){return e.setTitle(Ee("interface.mobile.action-insert-link-into-file",{filename:r.file.basename})).setIcon(Gg).onClick((function(){var e=i.map((function(e){return t.fileManager.generateMarkdownLink(e,r.file.path)}));r.editor.insertText("\n"+e.join("\n")+"\n")}))}))}))},t.prototype.handleShareText=function(t){return D(this,void 0,void 0,(function(){var e;return A(this,(function(n){return e=new zb(this.app).addItem((function(e){return e.setTitle(fF(t,300)).removeIcon().setIsLabel(!0).titleEl.addClass("u-muted","u-small")})).addSeparator(),this.app.workspace.trigger("receive-text-menu",e,t),e.addItem((function(t){return t.setTitle(Ee("dialogue.button-cancel")).setIcon(Am).onClick((function(){return null}))})).showAtPosition({x:0,y:0}),[2]}))}))},t.prototype.handleShareFiles=function(t){return D(this,void 0,void 0,(function(){var e=this;return A(this,(function(n){return new zb(this.app).addItem((function(e){return e.setTitle(createFragment((function(e){for(var n=0,i=t;n<i.length;n++){var r=i[n];e.createDiv({text:r.name})}}))).removeIcon().setIsLabel(!0).titleEl.addClass("u-muted","u-small")})).addSeparator().addItem((function(n){return n.setTitle(Ee("interface.mobile.action-import")).setIcon(im).onClick((function(){return e.importFiles(t)}))})).addItem((function(t){return t.setTitle(Ee("dialogue.button-cancel")).setIcon(Am).onClick((function(){return null}))})).showAtPosition({x:0,y:0}),[2]}))}))},t.prototype.importFiles=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f,g;return A(this,(function(m){switch(m.label){case 0:e=[],n=new jb(Ee("interface.mobile.msg-importing"),0),i=0,r=this.app.vault,o=0,s=t,m.label=1;case 1:if(!(o<s.length))return[3,12];a=s[o],m.label=2;case 2:return m.trys.push([2,10,,11]),t.length>1&&n.setMessage(Ee("interface.mobile.msg-importing")+" ("+i+"/"+t.length+")"),[4,fetch(jF.convertFileSrc(a.uri))];case 3:return[4,m.sent().arrayBuffer()];case 4:return l=m.sent(),c=a.name||Kt(a.uri),u=Jt(c),h=Xt(c),p=void 0,"md"===h?[3,6]:[4,r.getAvailablePathForAttachments(u,h)];case 5:return p=m.sent(),[3,8];case 6:return[4,r.getAvailablePath(u,h)];case 7:p=m.sent(),m.label=8;case 8:return[4,r.createBinary(p,l)];case 9:return d=m.sent(),e.push(d),i++,[3,11];case 10:return f=m.sent(),n.hide(),new jb(Ee("interface.mobile.msg-failed-to-import-file",{filename:a.name})),new jb(f.toString()),[2];case 11:return o++,[3,1];case 12:return n.hide(),(g=new zb(this.app).addItem((function(t){return t.setTitle(Ee("interface.mobile.msg-import-success")).removeIcon().setIsLabel(!0)})).addSeparator()).addItem((function(t){return t.setTitle(Ee("dialogue.button-done")).setIcon(pm).onClick((function(){return null}))})),this.app.workspace.trigger("receive-files-menu",g,e),g.showAtPosition({x:0,y:0}),[2]}}))}))},t}(),xR=function(t){function e(e,n){var i=t.call(this,e)||this;return i.emptyStateText=Ee("plugins.quick-switcher.label-no-note-create-new"),i.text=n,i.shouldShowUnresolved=!0,i.shouldShowAttachments=!1,i.shouldShowAllTypes=!1,i.setPlaceholder("Choose file to insert"),i.setInstructions([{command:"↑↓",purpose:"to navigate"},{command:"↵",purpose:"to select"},{command:"esc",purpose:"to dismiss"}]),i}return M(e,t),e.prototype.onChooseSuggestion=function(t,e){return D(this,void 0,Promise,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:e=null,n=this.app,r.label=1;case 1:return r.trys.push([1,7,,8]),t?[3,3]:[4,n.fileManager.createNewMarkdownFileFromLinktext(this.inputEl.value,"")];case 2:return e=r.sent(),[3,6];case 3:return"unresolved"!==t.type?[3,5]:[4,n.fileManager.createNewMarkdownFileFromLinktext(t.linktext,"")];case 4:return e=r.sent(),[3,6];case 5:"file"!==t.type&&"alias"!==t.type||(e=t.file),r.label=6;case 6:return[3,8];case 7:return i=r.sent(),new jb(i.toString()),[2];case 8:return e?[4,this.app.fileManager.insertTextIntoFile(e,this.text,"","",!1)]:[3,11];case 9:return r.sent(),[4,this.app.workspace.getLeaf().openFile(e)];case 10:r.sent(),r.label=11;case 11:return[2]}}))}))},e}(kR),SR="audio/mp4",ER=function(){function t(){this.id="audio-recorder",this.name=Ee("plugins.audio-recorder.name"),this.description=Ee("plugins.audio-recorder.desc"),this.app=null,this.plugin=null,this.recording=!1,this.recorder=null,this.extension=""}return t.prototype.init=function(t,e){var n=this;this.app=t,this.plugin=e,e.registerRibbonAction(Ee("plugins.audio-recorder.action-toggle"),lm,this.onRecordAudio.bind(this)),e.registerGlobalCommand({id:"audio-recorder:start",name:Ee("plugins.audio-recorder.action-start"),icon:uy,checkCallback:function(t){return!n.recording&&(t||n.onStartRecording(),!0)}}),e.registerGlobalCommand({id:"audio-recorder:stop",name:Ee("plugins.audio-recorder.action-stop"),icon:hy,checkCallback:function(t){return!!n.recording&&(t||n.onStopRecording(),!0)}})},t.prototype.checkPermission=function(){return D(this,void 0,Promise,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:return By.isDesktopApp&&"MacOS"===ht?(t=ae("electron"))?(e=t.remote.systemPreferences,n=e.getMediaAccessStatus("microphone"),["denied","restricted","unknown"].contains(n)?(this.showRecordingMessage(Ee("plugins.audio-recorder.msg-access-denied"),!0),[2,!1]):[3,1]):(this.showRecordingMessage(Ee("plugins.audio-recorder.msg-access-denied"),!0),[2,!1]):[3,5];case 1:return"not-determined"!==n?[3,3]:(this.showRecordingMessage(Ee("plugins.audio-recorder.msg-pending-grant"),!1),[4,e.askForMediaAccess("microphone")]);case 2:return[2,i.sent()];case 3:if("granted"===n)return[2,!0];i.label=4;case 4:return[2,!1];case 5:return[2,!0]}}))}))},t.prototype.onRecordAudio=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.checkPermission()];case 1:return t.sent()?this.recording?[3,3]:[4,this.onStartRecording()]:[2];case 2:return t.sent(),[3,4];case 3:this.onStopRecording(),t.label=4;case 4:return[2]}}))}))},t.prototype.onStartRecording=function(){return D(this,void 0,void 0,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:if(KF&&!navigator.mediaDevices)return new jb("This functionality requires iOS 14.5."),[2];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 2:return t=i.sent(),[4,this.startRecording(t)];case 3:return i.sent(),[3,5];case 4:return(e=i.sent()).message.contains("Requested device not found")&&this.plugin.addedButtonEls.length>0?(n=Ee("plugins.audio-recorder.msg-no-microphone"),this.showRecordingMessage(n,!0)):(e.message.contains("denied")&&new jb(e.message),console.error(e)),[2];case 5:return this.recording=!0,this.plugin.addedButtonEls.forEach((function(t){Ty(t,cm,18),t.addClass("is-active")})),[2]}}))}))},t.prototype.onStopRecording=function(){this.recording=!1,this.recorder.stop(),this.plugin.addedButtonEls.forEach((function(t){Ty(t,lm,18),t.removeClass("is-active")}))},t.prototype.startRecording=function(t){var e=this,n=[],i='audio/webm;codecs="opus"';this.extension="webm",MediaRecorder.isTypeSupported(SR)&&(i=SR,this.extension="m4a"),this.recorder=new MediaRecorder(t,{mimeType:i}),this.recorder.addEventListener("dataavailable",(function(t){t.data.size>0&&n.push(t.data)})),this.recorder.addEventListener("stop",(function(){return D(e,void 0,void 0,(function(){var e,i=this;return A(this,(function(r){return this.recorder=null,t.getTracks().forEach((function(t){t.stop()})),(e=new FileReader).addEventListener("loadend",(function(){return D(i,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.saveRecording(e.result)];case 1:return t.sent(),[2]}}))}))})),e.readAsArrayBuffer(n[0]),D(i,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),GF?[4,eI.allowSleep()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[3,4];case 3:return t=e.sent(),console.error(t),[3,4];case 4:return[2]}}))})).then(),[2]}))}))})),this.recorder.start(),D(e,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),GF?[4,eI.keepAwake()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[3,4];case 3:return t=e.sent(),console.error(t),[3,4];case 4:return[2]}}))})).then()},t.prototype.saveRecording=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u;return A(this,(function(h){switch(h.label){case 0:return e=this.app,n=e.workspace,i="Recording "+window.moment().format("YYYYMMDDHHmmss"),r=null,(o=n.getActiveViewOfType(rR))&&(r=o.file),[4,e.vault.getAvailablePathForAttachments(i,this.extension,r)];case 1:return s=h.sent(),[4,e.vault.createBinary(s,t)];case 2:return a=h.sent(),o?(l=o.file,c=this.app.fileManager.generateMarkdownLink(a,l.path),[4,e.vault.read(l)]):[3,5];case 3:return u=h.sent(),u+="\n"+c+"\n",[4,e.vault.modify(l,u)];case 4:return h.sent(),[2];case 5:return[4,n.getUnpinnedLeaf().openFile(a,{active:!0})];case 6:return h.sent(),[2]}}))}))},t.prototype.showRecordingMessage=function(t,e){this.plugin.addedButtonEls.length>0&&Ge(this.plugin.addedButtonEls[0],t,{placement:"right",classes:e?["mod-error"]:[]})},t}(),MR=function(t){function e(e,n){var i=t.call(this,e)||this;return i.textInputEl=null,i.textInputEl=n,n.addEventListener("input",i.onInputChange.bind(i)),n.addEventListener("focus",i.onInputChange.bind(i)),n.addEventListener("blur",i.close.bind(i)),i.suggestEl.on("mousedown",".suggestion-item",(function(t){t.preventDefault()})),i}return M(e,t),e.prototype.onInputChange=function(){var t=this.textInputEl,e=t.value,n=this.getSuggestions(e);n.length>0?(this.suggestions.setSuggestions(n),this.open(),this.setAutoDestroy(t),By.isMobile||this.reposition(uh(t))):this.close()},e}(TI),LR=function(t){function e(e,n,i,r){var o=t.call(this,e,n)||this;return o.commands=i,o.cb=r,o}return M(e,t),e.prototype.renderSuggestion=function(t,e){RT(e,t.command.name,t.matches.matches)},e.prototype.getSuggestions=function(t){var e=NT(t);return this.commands.map((function(t){return{command:t,matches:e(t.name)}})).filter((function(t){return!!t.matches})).sort((function(t,e){return e.matches.score-t.matches.score})).slice(0,100)},e.prototype.selectSuggestion=function(t){this.cb(t.command),this.close()},e}(MR),DR=function(){function t(){this.id="command-palette",this.name=Ee("plugins.command-palette.name"),this.description=Ee("plugins.command-palette.desc"),this.defaultOn=!0,this.modal=null,this.options={}}return t.prototype.init=function(t,e){this.app=t,this.openCallback=this.onOpen.bind(this),e.registerRibbonAction(Ee("plugins.command-palette.action-open"),Rv,this.openCallback),e.registerGlobalCommand({id:"command-palette:open",name:Ee("plugins.command-palette.action-open"),icon:Jv,callback:this.openCallback,hotkeys:[GA(["Mod"],"P")]})},t.prototype.onEnable=function(t,e){return D(this,void 0,Promise,(function(){var n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return this.modal=new AR(t,this),n=this,r=(i=Object).assign,o=[{}],[4,e.loadData()];case 1:return n.options=r.apply(i,o.concat([s.sent()])),e.addSettingTab(new TR(t,e,this)),[2]}}))}))},t.prototype.onDisable=function(t,e){this.modal=null},t.prototype.saveSettings=function(t){t.saveData(this.options)},t.prototype.onOpen=function(){return this.modal&&this.modal.open(),!1},t.prototype.getCommands=function(){var t=this.app.commands.listCommands(),e=this.options.pinned;return e&&t.sort((function(t,n){var i=e.indexOf(t.id),r=e.indexOf(n.id);return i===r?DN(t.name,n.name):-1===i?1:-1===r?-1:i-r})),t},t}(),AR=function(t){function e(e,n){var i=t.call(this,e)||this;return i.emptyStateText=Ee("plugins.command-palette.label-no-commands"),i.plugin=n,i.setInstructions([{command:"↑↓",purpose:Ee("plugins.command-palette.instruction-navigate")},{command:"↵",purpose:Ee("plugins.command-palette.instruction-use")},{command:"esc",purpose:Ee("plugins.command-palette.instruction-dismiss")}]),i.setPlaceholder(Ee("plugins.command-palette.prompt-type-command")),i.scope.register(null,"Tab",(function(){return!1})),i.scope.register(null,"Enter",(function(t){if(!t.isComposing)return i.chooser.useSelectedItem(t),!1})),i}return M(e,t),e.prototype.getItems=function(){return this.plugin.getCommands()},e.prototype.getItemText=function(t){return t.name},e.prototype.renderSuggestion=function(t,e){var n=e.createSpan("suggestion-prefix"),i=e.createSpan("suggestion-content"),r=t.item,o=this.plugin.options.pinned;o&&o.contains(r.id)&&e.createSpan({cls:"suggestion-flair"},(function(t){Ty(t,Nm,13)}));var s=r.name,a=s.indexOf(": ");if(-1!==a){var l=s.slice(0,a),c=s.slice(a+2);BT(n,l,t.match),BT(i,c,t.match,-(a+2))}else BT(i,s,t.match),n.remove();var u=this.app,h=u.hotkeyManager.getHotkeys(r.id),p=u.hotkeyManager.getDefaultHotkeys(r.id);if(h)for(var d=0,f=h;d<f.length;d++){var g=f[d];e.createEl("kbd",{cls:"suggestion-hotkey",text:$A(g)})}else if(p)for(var m=0,v=p;m<v.length;m++){var y=v[m];e.createEl("kbd",{cls:"suggestion-hotkey",text:$A(y)})}},e.prototype.onChooseItem=function(t,e){this.app.lastEvent=e,lR(t)},e}(fN),TR=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.instance=i,r}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty(),new DA(e).setHeading().setName(Ee("plugins.command-palette.label-pinned-commands"));var n=[],i=function(){var e=n.map((function(t){return t.id}));0===e.length&&(e=null),t.instance.options.pinned=e,t.instance.saveSettings(t.plugin),t.display()},r=this.instance.options.pinned;if(r)for(var o=0,s=r;o<s.length;o++){var a=s[o];(g=this.app.commands.commands[a])&&n.push(g)}for(var l=e.createDiv(),c=function(t){l.createDiv("mobile-option-setting-item",(function(e){e.createSpan({cls:"mobile-option-setting-item-name",text:t.name}),e.createSpan("",(function(e){Ty(e,Am),$e(e,Ee("interface.delete-action-short-name")),e.addEventListener("click",(function(){n.remove(t),i()}))})),e.createSpan("mobile-option-setting-drag-icon",(function(r){Ty(r,Qg),$e(r,Ee("interface.drag-to-rearrange")),He(r,e,l,0,(function(){return null}),(function(e){n.remove(t),n.splice(e,0,t),i()}))}))}))},u=0,h=n;u<h.length;u++){c(g=h[u])}0===n.length&&l.createDiv({cls:"mobile-option-setting-item",text:Ee("plugins.command-palette.label-no-commands")});var p=this.app.commands.commands,d=[];for(var f in p){var g=p[f];n.contains(g)||d.push(g)}new DA(e).setName(Ee("plugins.command-palette.option-add-new-pin")).setDesc(Ee("plugins.command-palette.option-add-new-pin-description")).addText((function(e){return e.setPlaceholder(Ee("plugins.command-palette.prompt-type-command")).then((function(){new LR(t.app,e.inputEl,d,(function(t){n.push(t),i()}))}))}))},e}(NN),PR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.renderSuggestion=function(t,e){e.setText(Qt(t.path))},e.prototype.getSuggestions=function(t){t=t.toLowerCase();for(var e=[],n=0,i=this.app.vault.getAllLoadedFiles();n<i.length;n++){var r=i[n];r instanceof cb&&r.path.toLowerCase().contains(t)&&e.push(r)}return e.slice(0,100)},e.prototype.selectSuggestion=function(t){var e=this.textInputEl;e.value=Qt(t.path),e.trigger("input"),this.close()},e}(MR),OR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.getSuggestions=function(e){var n=t.prototype.getSuggestions.call(this,e);return n=n.filter((function(t){return"md"===t.extension}))},e}(PR),FR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.renderSuggestion=function(t,e){e.setText(t.path)},e.prototype.getSuggestions=function(t){t=t.toLowerCase();for(var e=[],n=0,i=this.app.vault.getAllLoadedFiles();n<i.length;n++){var r=i[n];r instanceof ub&&r.path.toLowerCase().contains(t)&&e.push(r)}return e.slice(0,100)},e.prototype.selectSuggestion=function(t){var e=this.textInputEl;e.value=t.path,e.trigger("input"),this.close()},e}(MR),IR="YYYY-MM-DD",NR=Me("plugins.daily-notes"),BR=function(){function t(){this.id="daily-notes",this.name=NR("name"),this.description=NR("desc"),this.app=null,this.plugin=null,this.options={}}return t.prototype.init=function(t,e){var n=this;this.app=t,this.plugin=e,e.registerRibbonAction(NR("action-open"),Em,this.onOpenDailyNote.bind(this)),e.registerGlobalCommand({id:"daily-notes",name:NR("action-open"),icon:Yv,callback:this.onOpenDailyNote.bind(this)}),e.registerGlobalCommand({id:"daily-notes:goto-prev",name:NR("action-open-previous"),icon:gy,checkCallback:function(t){var e=n.getCurrentFileDateTimestamp();return!!e&&(t||n.gotoPreviousExisting(e),!0)}}),e.registerGlobalCommand({id:"daily-notes:goto-next",name:NR("action-open-next"),icon:py,checkCallback:function(t){var e=n.getCurrentFileDateTimestamp();return!!e&&(t||n.gotoNextExisting(e),!0)}})},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n,i=this;return A(this,(function(r){switch(r.label){case 0:return n=this,[4,e.loadData()];case 1:return n.options=r.sent()||{},e.addSettingTab(new RR(t,e,this)),this.app.workspace.onLayoutReady((function(){i.options.autorun&&i.onOpenDailyNote()})),e.registerEvent(this.app.workspace.on("receive-text-menu",(function(t,e){t.addItem((function(t){return t.setTitle(NR("action-insert-text")).setIcon(Em).onClick((function(){return D(i,void 0,void 0,(function(){var t;return A(this,(function(n){switch(n.label){case 0:return[4,this.getDailyNote()];case 1:return t=n.sent(),[4,this.app.fileManager.insertTextIntoFile(t,e,"","",!1)];case 2:return n.sent(),[4,this.app.workspace.getLeaf().openFile(t,{active:!0,state:{mode:"source"}})];case 3:return n.sent(),[2]}}))}))}))}))}))),e.registerEvent(this.app.workspace.on("receive-files-menu",(function(t,e){t.addItem((function(t){return t.setTitle(NR("action-insert-link")).setIcon(Em).onClick((function(){return D(i,void 0,void 0,(function(){var t,n,i=this;return A(this,(function(r){switch(r.label){case 0:return[4,this.getDailyNote()];case 1:return t=r.sent(),n=e.map((function(e){return i.app.fileManager.generateMarkdownLink(e,t.path)})),[4,this.app.fileManager.insertTextIntoFile(t,n.join("\n"),"","",!1)];case 2:return r.sent(),[4,this.app.workspace.getLeaf().openFile(t,{active:!0,state:{mode:"source"}})];case 3:return r.sent(),[2]}}))}))}))}))}))),[2]}}))}))},t.prototype.getDailyNote=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g;return A(this,(function(m){switch(m.label){case 0:e=(t=this).app,n=t.options,i=null,r=this.getFormat();try{i=window.moment().format(r)}catch(t){return new jb(NR("msg-fail-format",{format:r})),console.error(t),[2]}if(i&&(i=i.trim()),(s=n.folder)&&String.isString(s)){if(a=ne(s),!((l=e.vault.getAbstractFileByPath(a))instanceof ub))return new jb(NR("msg-fail-folder",{folderOption:s})),[2,null];o=l}else o=e.fileManager.getNewFileParent("");return c=o.getParentPrefix()+i+".md",!(u=e.vault.getAbstractFileByPathInsensitive(c))||u instanceof cb?(h=u)?[3,6]:(p=n.template)?(d=e.metadataCache.getFirstLinkpathDest(p,""))?[4,e.vault.cachedRead(d)]:(new jb(NR("msg-fail-template-file",{template:p})),[2]):[3,4]:[2,null];case 1:return f=m.sent(),g=vN(f,{title:i},{}),[4,e.fileManager.createNewMarkdownFile(o,i)];case 2:return h=m.sent(),[4,e.vault.modify(h,g)];case 3:return m.sent(),[3,6];case 4:return[4,e.fileManager.createNewMarkdownFile(o,i)];case 5:h=m.sent(),m.label=6;case 6:return[2,h]}}))}))},t.prototype.onOpenDailyNote=function(t){return D(this,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return[4,this.getDailyNote()];case 1:return(e=n.sent())?[4,this.app.workspace.getLeaf(Bb.isModEvent(t||this.app.lastEvent)).openFile(e,{active:!0,state:{mode:"source"}})]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.gotoPreviousExisting=function(t){return D(this,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return e=Number.NEGATIVE_INFINITY,n=null,this.iterateDailyNotes((function(i,r){r<t&&r>e&&(n=i,e=r)})),n?[4,this.app.workspace.getLeaf().openFile(n,{active:!0})]:(new jb(NR("msg-no-previous")),[2]);case 1:return i.sent(),[2]}}))}))},t.prototype.gotoNextExisting=function(t){return D(this,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return e=Number.POSITIVE_INFINITY,n=null,this.iterateDailyNotes((function(i,r){r>t&&r<e&&(n=i,e=r)})),n?[4,this.app.workspace.getLeaf().openFile(n,{active:!0})]:(new jb(NR("msg-no-next")),[2]);case 1:return i.sent(),[2]}}))}))},t.prototype.iterateDailyNotes=function(t){var e=this.app.vault.getAllLoadedFiles(),n=this.getFormat();e.forEach((function(e){if(e instanceof cb){var i=window.moment(e.basename,n,!0);i.isValid()&&t(e,i.valueOf())}}))},t.prototype.getCurrentFileDateTimestamp=function(){var t=this.app.workspace.getActiveViewOfType(rR);if(t){var e=t.file.basename,n=this.getFormat(),i=window.moment(e,n,!0);if(i.isValid())return i.valueOf()}return null},t.prototype.getFormat=function(){var t=this.options.format;return t&&String.isString(t)?t:IR},t}(),RR=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.instance=i,r}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty();var n=this.instance.options,i=document.createDocumentFragment();i.appendText(NR("label-refer-to-syntax")),i.createEl("a",{text:NR("label-syntax-link"),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),i.createEl("br"),i.appendText(NR("label-syntax-live-preview"));var r=i.createEl("b","u-pop");new DA(e).setName(NR("option-date-format")).setDesc(i).addMomentFormat((function(e){return e.setSampleEl(r).setDefaultFormat(IR).setValue(n.format).onChange((function(e){n.format=e.trim(),t.plugin.saveData(n)}))})),new DA(e).setName(NR("option-new-file-location")).setDesc(NR("option-new-file-location-description")).addText((function(e){e.setPlaceholder(Ee("setting.folder-path-example-placeholder")).setValue(n.folder).onChange((function(e){n.folder=e.trim(),t.plugin.saveData(n)})),new FR(t.app,e.inputEl)})),new DA(e).setName(NR("option-template")).setDesc(NR("option-template-description")).addText((function(e){e.setPlaceholder(Ee("setting.file-path-example-placeholder")).setValue(n.template).onChange((function(e){n.template=e.trim(),t.plugin.saveData(n)})),new OR(t.app,e.inputEl)})),new DA(e).setName(NR("option-open-on-start")).setDesc(NR("option-open-on-start-description")).addToggle((function(e){return e.setValue(n.autorun).onChange((function(e){n.autorun=e,t.plugin.saveData(n)}))}))},e}(NN);function zR(){return Ee(By.isMobileApp?"plugins.open-with-default-app.action-open-file-mobile":"plugins.open-with-default-app.action-open-file")}var HR=function(){function t(){this.id="open-with-default-app",this.name=Ee("plugins.open-with-default-app.name"),this.description=Ee("plugins.open-with-default-app.desc"),this.defaultOn=!0,this.app=null}return t.prototype.init=function(t,e){var n=this;this.app=t,e.registerGlobalCommand({id:"open-with-default-app:open",name:zR(),icon:ny,checkCallback:function(t){var e=n.app.workspace.getActiveFile();if(e)return t||n.app.openWithDefaultApp(e.path),!0}}),By.isDesktopApp&&e.registerGlobalCommand({id:"open-with-default-app:show",name:Ee("plugins.open-with-default-app.action-show-in-folder"),icon:Xv,checkCallback:function(t){var e=n.app.workspace.getActiveFile();if(e)return t||n.app.showInFolder(e.path),!0}})},t.prototype.onEnable=function(t,e){e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this))},t.prototype.onFileMenu=function(t,e){var n=this;e instanceof cb&&t.addItem((function(t){return t.setTitle(zR()).setIcon(hm).onClick((function(){return n.app.openWithDefaultApp(e.path)}))})),By.isDesktopApp&&t.addItem((function(t){return t.setTitle(Ee("plugins.open-with-default-app.action-show-in-folder")).setIcon(hm).onClick((function(){return n.app.showInFolder(e.path)}))}))},t}(),VR=function(){function t(){this.id="editor-status",this.name=Ee("plugins.editor-status.name"),this.description=Ee("plugins.editor-status.desc"),this.defaultOn=!0}return t.prototype.init=function(t,e){this.app=t,this.plugin=e,e.registerStatusBarItem()},t.prototype.onEnable=function(t,e){e.registerEvent(t.workspace.on("file-open",this.updateStatus,this)),e.registerEvent(t.workspace.on("layout-change",this.updateStatus,this)),e.statusBarEl.addEventListener("click",this.onClick.bind(this)),e.statusBarEl.addEventListener("contextmenu",this.onClick.bind(this)),e.statusBarEl.addClass("mod-clickable"),this.updateStatus()},t.prototype.onDisable=function(){},t.prototype.getStatus=function(){var t=this.app.workspace.getActiveViewOfType(rR);return t?"preview"===t.getMode()?"read":t.editMode?t.editMode.sourceMode?"source":"live-preview":"source":""},t.prototype.setStatus=function(t){return D(this,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:if(!(e=this.app.workspace.getActiveViewOfType(rR)))return[2];switch(n=e.getState(),t){case"read":n.mode="preview";break;case"source":n.mode="source",n.source=!0;break;case"live-preview":n.mode="source",n.source=!1}return[4,e.leaf.setViewState({type:iR,state:n})];case 1:return i.sent(),[2]}}))}))},t.prototype.updateStatus=function(){var t=this.plugin.statusBarEl;switch(t.empty(),this.getStatus()){case"":return;case"read":t.setText(Ee("plugins.editor-status.read"));break;case"source":t.setText(Ee("plugins.editor-status.edit-source"));break;case"live-preview":t.setText(Ee("plugins.editor-status.edit-live-preview"))}},t.prototype.onClick=function(t){var e=this,n=this.app.workspace.getActiveViewOfType(rR);if(n){var i=new zb(this.app),r=this.getStatus(),o=function(t,n){i.addItem((function(i){return i.setTitle(n).setIcon(r===t?pm:null).onClick((function(){return e.setStatus(t)}))}))};o("read",Ee("plugins.editor-status.read")),o("source",Ee("plugins.editor-status.edit-source")),n.editMode&&o("live-preview",Ee("plugins.editor-status.edit-live-preview")),i.showAtMouseEvent(t)}},t}(),qR=Me("plugins.file-explorer"),jR=function(){function t(){this.id="file-explorer",this.name=qR("name"),this.description=qR("desc"),this.defaultOn=!0,this.moveFileModal=null}return t.prototype.init=function(t,e){var n=this;this.app=t,this.plugin=e,this.moveFileModal=new YR(t),e.registerGlobalCommand({id:"file-explorer:open",name:qR("action-show"),icon:Xv,callback:function(){n.app.workspace.ensureSideLeaf(KR,"left",!1)}}),e.registerGlobalCommand({id:"file-explorer:reveal-active-file",name:qR("action-reveal-active-file"),icon:ey,checkCallback:function(t){var e=n.app.workspace.getActiveFile();if(e)return t||n.revealInFolder(e),!0}}),e.registerGlobalCommand({id:"file-explorer:move-file",name:qR("command-move-file"),icon:oy,checkCallback:function(t){var e=n.app.workspace.getActiveFile();if(e)return t||(n.moveFileModal.setCurrentFile(e),n.moveFileModal.open()),!0}}),e.registerViewType(KR,(function(t){return new $R(t)}))},t.prototype.onEnable=function(t,e){e.registerEvent(t.workspace.on("layout-ready",this.initLeaf,this)),e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this)),t.workspace.registerHoverLinkSource("file-explorer",{display:this.name,defaultMod:!0})},t.prototype.onDisable=function(t){t.workspace.unregisterHoverLinkSource("file-explorer")},t.prototype.onUserEnable=function(){this.initLeaf()},t.prototype.onFileMenu=function(t,e,n){var i=this;!By.isMobile&&e instanceof cb&&"file-explorer-context-menu"!==n&&t.addItem((function(t){return t.setTitle(qR("action-reveal-file")).setIcon(Kg).onClick((function(){return i.revealInFolder(e)}))})),"link-context-menu"!==n&&t.addItem((function(t){return t.setTitle(qR(e instanceof cb?"action-move-file":"action-move-folder")).setIcon(Vm).onClick((function(){i.moveFileModal.setCurrentFile(e),i.moveFileModal.open()}))}))},t.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(KR,"left",!1,!1)},t.prototype.revealInFolder=function(t){var e,n=this.app,i=n.workspace.getLeavesOfType("file-explorer");0===i.length?(e=n.workspace.getLeftLeaf(!0)).setViewState({type:"file-explorer"}):e=i[0],n.workspace.revealLeaf(e),e.view.revealInFolder(t)},t}(),UR=function(){function t(){this.info={height:0,width:0,childTop:0,computed:!1,queued:!1,hidden:!1}}return t.prototype.updateTitle=function(){this.titleInnerEl.setText(this.getTitle()),this.titleEl.setAttr("data-path",this.file.path)},t.prototype.isFullTitleShown=function(){var t=this.titleEl,e=this.titleInnerEl,n=t.offsetParent,i=parseInt(getComputedStyle(t).paddingLeft)+t.offsetLeft,r=n.clientWidth;return i+e.scrollWidth<=r+n.scrollLeft},t.prototype.startRename=function(){var t=this.titleInnerEl;t.addClass("is-being-renamed"),t.setAttribute("contenteditable","true"),nh(t)},t.prototype.stopRename=function(){var t=this.titleInnerEl;t.removeClass("is-being-renamed"),t.removeAttribute("contenteditable");var e=t.parentElement.find(".tooltip");e&&e.remove()},t}(),_R=function(t){function e(e,n){var i=t.call(this)||this;i.tagEl=null,i.fileExplorer=e,i.file=n;var r=i.el=createDiv("nav-file"),o=i.titleEl=r.createDiv("nav-file-title");return i.titleInnerEl=o.createDiv("nav-file-title-content"),i.updateTitle(),i}return M(e,t),e.prototype.getTitle=function(){return this.file.basename},e.prototype.updateTitle=function(){t.prototype.updateTitle.call(this);var e=this.titleEl,n=this.tagEl;e.toggleClass("is-unsupported",!this.isSupported());var i=this.file.extension;_t.contains(i)?n&&(n.detach(),this.tagEl=null):(n||(n=this.tagEl=e.createDiv({cls:"nav-file-tag",prepend:!0})),n.setText(i))},e.prototype.isSupported=function(){return this.fileExplorer.app.viewRegistry.isExtensionRegistered(this.file.extension)},e}(UR),WR=function(t){function e(e,n){var i=t.call(this)||this;i.pusherEl=tB(),i.fileExplorer=e,i.file=n;var r=n.isRoot(),o=i.el=createDiv("nav-folder");r&&o.addClass("mod-root");var s=i.titleEl=o.createDiv("nav-folder-title");return i.collapseIndicatorEl=s.createDiv("nav-folder-collapse-indicator collapse-icon"),i.titleInnerEl=s.createDiv("nav-folder-title-content"),i.childrenEl=o.createDiv("nav-folder-children"),r||(Ty(i.collapseIndicatorEl,Wg,8),s.addEventListener("click",i.onTitleElClick.bind(i))),i.updateTitle(),i.setCollapsed(!r,!1),i}return M(e,t),e.prototype.getTitle=function(){var t=this.file,e=t.name;return t.isRoot()&&(e=t.vault.getName()),e},e.prototype.onTitleElClick=function(t){0===t.button&&this.fileExplorer.fileBeingRenamed!==this.file&&(this.fileExplorer.handleFileClick(t,this)||this.toggleCollapsed(!0))},e.prototype.toggleCollapsed=function(t){this.setCollapsed(!this.collapsed,t)},e.prototype.setCollapsed=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return this.collapsed===t?[2]:(this.collapsed=t,i=(n=this).el,r=n.fileExplorer,o=n.childrenEl,i.toggleClass("is-collapsed",t),o.style.minHeight="",r.requestSaveFold(),[4,Eb(o,i,t,e)]);case 1:return s.sent(),r.dom.infinityScroll.invalidate(this,!0),[2]}}))}))},e.prototype.sort=function(){var t=this.file,e=this.fileExplorer,n=XN[e.sortOrder],i=t.children.slice();i.sort((function(t,e){var i=t instanceof ub,r=e instanceof ub;return i||r?i&&!r?-1:r&&!i?1:DN(t.name,e.name):n(t,e)}));for(var r=[],o=0,s=i;o<s.length;o++){var a=s[o],l=e.fileItems[a.path];l&&r.push(l)}this.children=r},e}(UR),GR=function(t){this.navFileContainerEl=null,this.navFileContainerEl=t.createDiv("nav-files-container"),this.infinityScroll=new nB(this.navFileContainerEl),this.infinityScroll.setWidth=!0},KR="file-explorer",$R=function(t){function e(e){var n=t.call(this,e)||this;n.icon=Kg,n.dom=null,n.currentHoverFile=null,n.sortOrder="alphabetical",n.fileBeingRenamed=null,n.fileRenameScope=null,n.requestSaveFold=De(n.saveFold.bind(n),2e3),n.ready=!1,n.activeDom=null,n.selectedDoms=[];var i=n.containerEl,r=n.headerDom=new cB(n.app,i);return r.addNavButton(Gg,qR("action-new-note"),n.onCreateNewNoteClick.bind(n)),r.addNavButton(Kg,qR("action-new-folder"),n.onCreateNewFolderClick.bind(n)),r.addSortButton((function(t){return n.setSortOrder(t)}),(function(){return n.sortOrder})),n.fileItems={},n.files=Ny(),n.fileRenameScope=new Nb(n.app.scope),n.sortOrder=n.app.vault.getConfig("fileSortOrder"),n.fileRenameScope.register([],"Enter",n.onKeyEnterInRename.bind(n)),n.fileRenameScope.register([],"Escape",n.onKeyEscInRename.bind(n)),n.requestSort=n.app.nextFrameOnceCallback(n.sort.bind(n)),n.dom=new GR(i),i.on("click",".nav-file",n.onFileClick.bind(n)),Be(i),i.on("auxclick",".nav-file",n.onFileClick.bind(n)),i.on("mouseover",".nav-file-title, .nav-folder-title",n.onFileMouseover.bind(n)),i.on("mouseout",".nav-file-title, .nav-folder-title",n.onFileMouseout.bind(n)),i.on("contextmenu",".nav-file-title, .nav-folder-title",n.openFileContextMenu.bind(n)),n}return M(e,t),e.prototype.getDisplayText=function(){return qR("name")},e.prototype.getViewType=function(){return KR},e.prototype.load=function(){var e=this;t.prototype.load.call(this);var n=this.app,i=n.vault;this.registerEvent(i.on("create",this.onCreate,this)),this.registerEvent(i.on("delete",this.onDelete,this)),this.registerEvent(i.on("rename",this.onRename,this)),this.registerEvent(i.on("modify",this.onModify,this)),this.registerEvent(i.on("config-changed",this.updateConfig,this)),this.registerEvent(n.workspace.on("file-open",this.onFileOpen,this)),this.registerEvent(n.viewRegistry.on("extensions-updated",this.onExtensionsUpdated,this)),this.registerScopeEvent(n.scope.register([],"F2",this.onRenameWithShortcut.bind(this))),this.ready=!1;for(var r=0,o=n.vault.getAllLoadedFiles();r<o.length;r++){var s=o[r];this.onCreate(s)}this.updateConfig(),this.app.workspace.onLayoutReady((function(){e.ready=!0,e.requestSort(),e.loadFold()}))},e.prototype.onCreate=function(t){var e=t.path,n=this.fileItems[e];n||(t instanceof cb?n=this.createItemDom(t):t instanceof ub&&(n=this.createFolderDom(t)),this.fileItems[e]=n,this.files.set(n.el,t)),this.requestSort()},e.prototype.onDelete=function(t){var e=t.path,n=this.fileItems[e];n&&(this.files.delete(n.el),delete this.fileItems[e],this.activeDom===n&&(this.activeDom=null),this.selectedDoms.remove(n)),this.requestSort()},e.prototype.onRename=function(t,e){var n=t.path,i=this.fileItems[e];i&&(i.updateTitle(),delete this.fileItems[e],this.fileItems[n]=i,this.files.set(i.el,t),i instanceof WR&&this.requestSaveFold(),this.dom.infinityScroll.invalidate(i)),this.requestSort()},e.prototype.onModify=function(){"byModifiedTime"!==this.sortOrder&&"byModifiedTimeReverse"!==this.sortOrder||this.requestSort()},e.prototype.updateConfig=function(){var t=this.app.vault;this.dom.navFileContainerEl.toggleClass("show-unsupported",t.getConfig("showUnsupportedFiles")),this.dom.infinityScroll.invalidateAll()},e.prototype.openFileContextMenu=function(t,e){var n=this;t.preventDefault();var i=this.files.get(e.parentElement);if(!(i instanceof ub&&i.isRoot())){var r=new zb(this.app);if(By.isMobile&&r.addItem((function(t){return t.setTitle(i.name).setIsLabel(!0)})).addSeparator(),i instanceof ub){var o=i;r.addItem((function(t){return t.setTitle(qR("menu-opt-new-note")).setIcon(jg).onClick((function(t){var e=Bb.isModifier(t,"Mod");n.createAbstractFile("file",o,e)}))})).addItem((function(t){return t.setTitle(qR("menu-opt-new-folder")).setIcon(Kg).onClick((function(t){var e=Bb.isModifier(t,"Mod");n.createAbstractFile("folder",o,e)}))})).addItem((function(t){return t.setTitle(qR("menu-opt-set-attachment-folder")).setIcon(tm).onClick((function(){n.app.setAttachmentFolder(o)}))})),r.addSeparator()}r.addItem((function(t){return t.setTitle(qR("menu-opt-rename")).setIcon($g).onClick((function(){return n.startRenameFile(i)}))})),r.addItem((function(t){return t.setTitle(qR("menu-opt-delete")).setIcon(Ug).onClick((function(){return D(n,void 0,void 0,(function(){return A(this,(function(t){return i instanceof ub?this.app.fileManager.promptForFolderDeletion(i):i instanceof cb&&this.app.fileManager.promptForFileDeletion(i),[2]}))}))}))})),r.addItem((function(t){return t.setTitle(Ee("interface.menu.open-in-new-pane")).setIcon(Sm).onClick((function(){return D(n,void 0,void 0,(function(){return A(this,(function(t){return i instanceof cb&&this.app.workspace.openLinkText(i.path,"",!0),[2]}))}))}))})),this.app.workspace.trigger("file-menu",r,i,"file-explorer-context-menu",null),i instanceof cb&&r.addItem((function(t){return t.setTitle(qR("menu-opt-make-copy")).setIcon(im).onClick((function(t){return D(n,void 0,void 0,(function(){var e,n,r;return A(this,(function(o){switch(o.label){case 0:return i instanceof cb?(e=Bb.isModifier(t,"Mod"),n=this.app.vault.getAvailablePath(Qt(i.path),i.extension),[4,this.app.vault.copy(i,n)]):[3,2];case 1:r=o.sent(),this.afterCreate(r,e),o.label=2;case 2:return[2]}}))}))}))})),r.showAtMouseEvent(t);var s=this.fileItems[i.path];s&&(s.titleEl.addClass("is-being-dragged"),r.onHide((function(){s.titleEl.removeClass("is-being-dragged")})))}},e.prototype.setSortOrder=function(t){this.sortOrder=t,this.app.vault.setConfig("fileSortOrder",t),this.sort()},e.prototype.onCreateNewFolderClick=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){return t.preventDefault(),this.createAbstractFile("folder",null,!1),[2]}))}))},e.prototype.onCreateNewNoteClick=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o;return A(this,(function(s){return t.preventDefault(),e=Bb.isModifier(t,"Mod"),n=this.app.workspace,i="",(r=n.getActiveFile())&&(i=r.path),o=this.app.fileManager.getNewFileParent(i),this.createAbstractFile("file",o,e),[2]}))}))},e.prototype.createAbstractFile=function(t,e,n){return D(this,void 0,void 0,(function(){var i,r;return A(this,(function(o){switch(o.label){case 0:return i=this.app,r=null,"file"!==t?[3,2]:[4,i.fileManager.createNewMarkdownFile(e)];case 1:return r=o.sent(),[3,4];case 2:return"folder"!==t?[3,4]:[4,i.fileManager.createNewFolder(e)];case 3:r=o.sent(),o.label=4;case 4:return this.afterCreate(r,n),[2]}}))}))},e.prototype.afterCreate=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r=this;return A(this,(function(o){switch(o.label){case 0:return t?(n=this.app,t instanceof cb?(i=n.workspace,[4,i.getLeaf(e).openFile(t,{active:!0,state:{mode:"source"},eState:{rename:"all"}})]):[3,2]):[2];case 1:return o.sent(),[3,3];case 2:n.nextFrame((function(){return D(r,void 0,void 0,(function(){var e;return A(this,(function(n){return this.sort(),this.startRenameFile(t),(e=this.fileItems[t.path])&&e.titleEl.scrollIntoView(!1),[2]}))}))})),o.label=3;case 3:return[2]}}))}))},e.prototype.onFileClick=function(t,e){if(0===t.button||1===t.button){t.preventDefault();var n=this.files.get(e);if(this.fileBeingRenamed!==n&&n&&n instanceof cb){var i=this.fileItems[n.path];if(this.handleFileClick(t,i))return;this.app.workspace.getLeaf(Bb.isModEvent(t)).openFile(n,{active:!0})}}},e.prototype.handleFileClick=function(t,e){var n,i=this.selectedDoms,r=this.activeDom;if(t.altKey)return i.contains(e)?(i.remove(e),e.titleEl.removeClass("is-active")):(i.push(e),e.titleEl.addClass("is-active")),!0;if(t.shiftKey){if(r===e||!r)return!0;var o=this.fileItems["/"],s=r,a=e,l=this.getItemDomAncestorTree(o,s),c=this.getItemDomAncestorTree(o,a);if(!l||!c)return!0;for(var u=o;l.length>0&&c.length>0&&l.last()===c.last();)u=l.last(),l.pop(),c.pop();var h=u.children.indexOf(l.last()||s),p=u.children.indexOf(c.last()||a);if(-1===h||-1===p)return!0;if(p<h){var d=s;s=a,a=d;var f=l;l=c,c=f;var g=h;h=p,p=g}var m=[];m.push(s);for(var v=s,y=0,b=l;y<b.length;y++){for(var w=b[y],k=w.children.indexOf(v)+1;k<w.children.length;k++)m.push(w.children[k]);v=w}for(k=h+1;k<p;k++)m.push(u.children[k]);c.reverse();for(k=0;k<c.length;k++){var C=c[k],x=k===c.length-1?a:c[k+1];m.push(C);for(var S=C.children.indexOf(x),E=0;E<S;E++)m.push(C.children[E])}m.push(a),n=m,m=Array.from(new Set(n));for(var M=this.app.vault.getConfig("showUnsupportedFiles"),L=0,D=m;L<D.length;L++){var A=D[L];!M&&A instanceof _R&&!A.isSupported()||(i.contains(A)||(i.push(A),A.titleEl.addClass("is-active")))}return!0}},e.prototype.getItemDomAncestorTree=function(t,e){for(var n=0,i=t.children;n<i.length;n++){var r=i[n];if(r===e)return[t];if(r instanceof WR){var o=this.getItemDomAncestorTree(r,e);if(o)return o.push(t),o}}return null},e.prototype.onFileMouseover=function(t,e){if(Ne(t,e)&&!ze(t)){var n=this.files.get(e.parentElement);if(n){this.currentHoverFile=n;var i="",r="";n instanceof cb&&(i=qR("tooltip-modified-time",{time:window.moment(n.stat.mtime).format("YYYY-MM-DD HH:mm")}),r=qR("tooltip-created-time",{time:window.moment(n.stat.ctime).format("YYYY-MM-DD HH:mm")}));var o=this.fileItems[n.path],s="";if(o&&!o.isFullTitleShown()&&(s+=o.getTitle()),n instanceof cb)""!==s&&(s+="\n\n"),s+=i+"\n"+r;else if(n instanceof ub){var a=Ee("nouns.file-with-count",{count:n.getFileCount()}),l=Ee("nouns.folder-with-count",{count:n.getFolderCount()});""!==s&&(s+="\n\n"),s+=qR("tooltip-folders-files-count",{fileCount:a,folderCount:l})}""!==s&&Ge(e,s,{placement:this.getSideTooltipPlacement(),gap:24,horizontalParent:this.containerEl,delay:100}),n instanceof cb&&this.app.workspace.trigger("hover-link",{event:t,source:"file-explorer",hoverParent:this,targetEl:e,linktext:n.path})}}},e.prototype.onFileMouseout=function(t,e){Ne(t,e)&&(this.currentHoverFile=null,this.clearTooltip())},e.prototype.onFileOpen=function(t){var e=t?this.fileItems[t.path]:null;if(e!==this.activeDom){var n=this.activeDom,i=this.selectedDoms;n&&n.titleEl.removeClass("is-active");for(var r=0,o=i;r<o.length;r++){o[r].titleEl.removeClass("is-active")}this.selectedDoms=[],this.activeDom=e,e&&(this.selectedDoms.push(e),e.titleEl.addClass("is-active"))}},e.prototype.onResize=function(){this.dom.infinityScroll.onResize()},e.prototype.revealInFolder=function(t){for(var e=this,n=t.parent;n&&null!==n.path;){var i=this.fileItems[n.path];i&&i instanceof WR&&i.collapsed&&i.toggleCollapsed(!1),n=n.parent}this.app.nextFrame((function(){var n=e.fileItems[t.path],i=e.dom.infinityScroll;i.computeSync(),i.scrollIntoView(n);var r=n.el;r.addClass("is-flashing"),setTimeout((function(){r.removeClass("is-flashing")}),2e3)}))},e.prototype.sort=function(){if(this.ready){var t=this.fileItems,e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);for(var i=this.dom.navFileContainerEl,r=i.scrollTop,o=0,s=e;o<s.length;o++){var a=s[o];a instanceof WR&&(a.sort(),a.file.isRoot()&&(this.dom.infinityScroll.rootEl=a,this.dom.navFileContainerEl.setChildrenInPlace([a.el])))}i.scrollTop=r,this.dom.infinityScroll.compute()}},e.prototype.loadFold=function(){var t=this.fileItems,e=this.app.loadLocalStorage("file-explorer-unfold");if(e&&Array.isArray(e))for(var n=0,i=e;n<i.length;n++){var r=t[i[n]];r&&r instanceof WR&&r.collapsed&&r.toggleCollapsed(!1)}},e.prototype.saveFold=function(){if(this.ready){var t=this.fileItems,e=[];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i&&i instanceof WR&&!i.collapsed&&e.push(i.file.path)}this.app.saveLocalStorage("file-explorer-unfold",e)}},e.prototype.attachFileEvents=function(t){t.titleInnerEl.addEventListener("blur",this.onTitleBlur.bind(this)),t.titleInnerEl.addEventListener("input",this.onFileRenameInput.bind(this))},e.prototype.dragFiles=function(t,e){var n=this.selectedDoms;if(0===n.length||1===n.length&&n[0]===e)return null;if(!n.contains(e))return null;for(var i=[],r=[],o=0,s=n;o<s.length;o++){var a=s[o];r.push(a.file),i.push(a.titleEl)}var l=this.app.dragManager;return l.updateSource(i,"is-being-dragged"),l.dragFiles(t,r)},e.prototype.createItemDom=function(t){var e=this,n=new _R(this,t),i=n.titleEl,r=this.app.dragManager;return r.handleDrag(i,(function(o){var s=e.dragFiles(o,n);return s||(r.updateSource([i],"is-being-dragged"),r.dragFile(o,t))})),this.attachFileEvents(n),n},e.prototype.canMoveFileToFolder=function(t,e){if(t===e)return!1;if(t instanceof ub&&t.isRoot())return!1;if(t instanceof ub&&e.path.startsWith(t.path))return!1;var n=t.name;return"/"!==e.path&&(n=e.path+"/"+n),t.path!==n},e.prototype.createFolderDom=function(t){var e=this,n=new WR(this,t),i=n.titleEl,r=this.app.dragManager;return n.file.isRoot()||r.handleDrag(i,(function(o){var s=e.dragFiles(o,n);return s||(r.updateSource([i],"is-being-dragged"),r.dragFolder(o,t))})),r.handleDrop(i,(function(n,r,o){var s=t.name||e.app.vault.getName();if(!r){if((f=n.dataTransfer.files).length>0&&!o){for(var a=[],l=0;l<f.length;l++){var c=(u=f[l]).path;c&&a.push(c)}D(e,void 0,void 0,(function(){var e,n,i,r,o,s,l,c;return A(this,(function(u){switch(u.label){case 0:e=this.app.vault,n=0,u.label=1;case 1:return n<a.length?[4,ce(i=a[n])]:[3,5];case 2:return(r=u.sent())?(o=Kt(ne(i)),s=Xt(o),l=Jt(o),c=e.getAvailablePath(t.getParentPrefix()+l,s),[4,e.createBinary(c,r)]):[3,4];case 3:u.sent(),u.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))}return{dropEffect:"copy",hoverEl:i,hoverClass:"is-being-dragged-over"}}if("file"===r.type||"folder"===r.type){var u=r.file;if(!e.canMoveFileToFolder(u,t))return;var h=u.name;if("/"!==t.path&&(h=t.path+"/"+h),!o){if(e.app.vault.getAbstractFileByPath(h)){var p=Qt(h),d=Xt(Kt(h));h=e.app.vault.getAvailablePath(p,d)}e.app.fileManager.renameFile(u,h)}return{action:Ee("interface.drag-and-drop.move-into-folder",{folder:s}),dropEffect:"move",hoverEl:i,hoverClass:"is-being-dragged-over"}}if("files"===r.type){for(var f,g=[],m=0,v=f=r.files;m<v.length;m++){u=v[m];e.canMoveFileToFolder(u,t)&&g.push(u)}for(var y=[],b=0,w=g;b<w.length;b++){u=w[b];for(var k=!0,C=0,x=g;C<x.length;C++){var S=x[C];if(S instanceof ub&&u.path.startsWith(S.path)){k=!1;break}}k&&y.push(u)}if(0===y.length)return;return o||D(e,void 0,void 0,(function(){var e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:e=0,n=y,a.label=1;case 1:return e<n.length?(i=n[e],r=i.name,"/"!==t.path&&(r=t.path+"/"+r),this.app.vault.getAbstractFileByPath(r)&&(i instanceof cb?(o=Qt(r),s=Xt(Kt(r)),r=this.app.vault.getAvailablePath(o,s)):i instanceof ub&&(r=this.app.vault.getAvailablePath(r))),[4,this.app.fileManager.renameFile(i,r)]):[3,4];case 2:a.sent(),a.label=3;case 3:return e++,[3,1];case 4:return[2]}}))})),{action:Ee("interface.drag-and-drop.move-into-folder",{folder:s}),dropEffect:"move",hoverEl:i,hoverClass:"is-being-dragged-over"}}}),!0),this.attachFileEvents(n),n},e.prototype.onTitleBlur=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){return this.finishRename(),[2]}))}))},e.prototype.onFileRenameInput=function(t){var e=t.currentTarget,n=this.files.get(e.parentElement.parentElement),i=e.getText();(1===e.childNodes.length&&e.firstChild.nodeType===Node.TEXT_NODE||(e.setText(i),nh(e,!1)),i=i.trim(),this.clearTooltip(),Bt.test(i))?Ge(e.parentElement,qR("msg-invalid-characters")+It,{classes:["mod-error"]}):this.app.vault.checkForDuplicate(n,i)?Ge(e.parentElement,qR("msg-file-already-exists"),{classes:["mod-error"]}):Rt.test(i)&&Ge(e.parentElement,qR("msg-unsafe-characters")+Nt,{classes:["mod-error"]})},e.prototype.startRenameFile=function(t){return D(this,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return t instanceof ub&&t.isRoot()?[2]:[4,this.finishRename()];case 1:for(i.sent(),this.fileBeingRenamed=t,e=t.parent;e&&null!==e.path;)(n=this.fileItems[e.path])&&n instanceof WR&&n.collapsed&&n.toggleCollapsed(!1),e=e.parent;return this.app.keymap.pushScope(this.fileRenameScope),this.fileItems[t.path].startRename(),[2]}}))}))},e.prototype.finishRename=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:if(!(t=this.fileBeingRenamed))return[2];if(this.exitRename(),e=this.fileItems[t.path],n=e.titleInnerEl,""===(i=n.getText().trim()))return e.updateTitle(),this.displayError(qR("msg-empty-file-name"),e),[2];if(r=t.getNewPathAfterRename(i),t.path===r)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.app.fileManager.renameFile(t,r)];case 2:return a.sent(),[3,4];case 3:return(o=a.sent())&&(console.error(o),s=o.message||o.code||o.toString(),this.displayError(s,e)),[3,4];case 4:return e.updateTitle(),[2]}}))}))},e.prototype.displayError=function(t,e){Ge(e.titleEl,t,{placement:"bottom",classes:["mod-error"]}),setTimeout(this.clearTooltip.bind(this),2e3)},e.prototype.exitRename=function(){var t=this.fileBeingRenamed;this.fileBeingRenamed=null,this.fileItems[t.path].stopRename(),this.app.keymap.popScope(this.fileRenameScope)},e.prototype.onKeyEnterInRename=function(t){t.isComposing||(t.preventDefault(),this.finishRename())},e.prototype.onKeyEscInRename=function(){var t=this.fileBeingRenamed;t&&(this.fileItems[t.path].updateTitle(),this.exitRename())},e.prototype.onRenameWithShortcut=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return this.currentHoverFile?[4,this.startRenameFile(this.currentHoverFile)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.onExtensionsUpdated=function(){var t=this.fileItems;for(var e in t)t.hasOwnProperty(e)&&t[e].updateTitle()},e.prototype.clearTooltip=function(){Ke()},e}(Hb),YR=function(t){function e(e){var n=t.call(this,e)||this;return n.currentFile=null,n.emptyStateText=qR("label-no-folders"),n.setInstructions([{command:"↑↓",purpose:qR("instruction-navigate")},{command:"↵",purpose:qR("instruction-move")},{command:"esc",purpose:qR("instruction-dismiss")}]),n.inputEl.setAttribute("placeholder",qR("prompt-type-folder")),n.scope.register(null,"Tab",(function(){return!1})),n}return M(e,t),e.prototype.setCurrentFile=function(t){this.currentFile=t},e.prototype.getItems=function(){for(var t=[],e=0,n=this.app.vault.getAllLoadedFiles();e<n.length;e++){var i=n[e];i instanceof ub&&t.push(i)}return t},e.prototype.getItemText=function(t){return t.isRoot()?"/":t.path},e.prototype.onChooseItem=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return e=this.app,(n=this.currentFile)?n===t?[2]:(i=n.name,"/"!==t.path&&(i=t.path+"/"+i),n.path===i?[2]:(e.vault.getAbstractFileByPath(i)&&(r=Qt(i),o=Xt(Kt(i)),i=e.vault.getAvailablePath(r,o)),[4,e.fileManager.renameFile(n,i)])):[2];case 1:return s.sent(),[2]}}))}))},e}(fN),JR={intervalMinutes:5,keepDays:7},QR=Me("plugins.file-recovery"),XR=function(){function t(){this.id="file-recovery",this.name=QR("name"),this.description=QR("desc"),this.defaultOn=!0,this.app=null,this.pluginInstance=null,this.db=null,this.tsCache={},this.pendingFiles=new Set}return t.prototype.init=function(t,e){this.app=t,this.pluginInstance=e,e.registerGlobalCommand({id:"file-recovery:open",name:QR("action-open"),icon:ay,callback:this.openModal.bind(this)})},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r,o,s,a=this;return A(this,(function(l){switch(l.label){case 0:return n=this,r=(i=Object).assign,o=[{},JR],[4,e.loadData()];case 1:return n.options=r.apply(i,o.concat([l.sent()])),e.addSettingTab(new ZR(t,e,this)),e.registerEvent(t.vault.on("modify",this.onFileChanged,this)),e.registerEvent(t.workspace.on("file-open",this.onFileChanged,this)),e.registerInterval(window.setInterval(this.resave.bind(this),6e4)),e.registerInterval(window.setInterval(this.cleanup.bind(this),36e5)),t.workspace.onLayoutReady((function(){e.registerEvent(t.vault.on("create",a.onFileChanged,a))})),s=this,[4,yA(this.app.appId+"-backup",1,{upgrade:function(t,e,n,i){t.objectStoreNames.contains("backups")&&t.deleteObjectStore("backups");var r=t.createObjectStore("backups",{autoIncrement:!0});r.createIndex("path","path"),r.createIndex("ts","ts")}})];case 2:return s.db=l.sent(),this.cleanup(),[2]}}))}))},t.prototype.onDisable=function(){this.db&&(this.db.close(),this.db=null)},t.prototype.onFileChanged=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u;return A(this,(function(h){switch(h.label){case 0:return t&&t instanceof cb&&"md"===t.extension?(n=(e=this).db,i=e.tsCache,n?(r=t.path,o=i[r],s=null,i.hasOwnProperty(r)?[3,2]:[4,this.getLastVersionByPath(r)]):[2]):[2];case 1:s=h.sent(),o=s?s.ts:0,i[r]=o,h.label=2;case 2:return a=Date.now(),l=a-o,c=this.options.intervalMinutes,(isNaN(c)||c<0)&&(c=5),l<60*c*1e3?(this.pendingFiles.add(r),[2]):[4,this.app.vault.cachedRead(t)];case 3:return u=h.sent(),s?[3,5]:[4,this.getLastVersionByPath(r)];case 4:s=h.sent(),h.label=5;case 5:return s&&s.data===u?[2]:[4,n.add("backups",{path:r,ts:a,data:u})];case 6:return h.sent(),i[r]=a,[2]}}))}))},t.prototype.resave=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:t=this.pendingFiles,e=Array.from(t),n=this.app.vault,i=0,r=e,s.label=1;case 1:return i<r.length?(o=r[i],t.delete(o),[4,this.onFileChanged(n.getAbstractFileByPath(o))]):[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype.cleanup=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r;return A(this,(function(o){switch(o.label){case 0:return(t=this.db)?(e=t.transaction("backups","readwrite"),n=e.store.index("ts"),i=this.options.keepDays,(isNaN(i)||i<1)&&(i=7),[4,n.openCursor(IDBKeyRange.upperBound(Date.now()-24*i*60*60*1e3))]):[2];case 1:r=o.sent(),o.label=2;case 2:return r?[4,r.delete()]:[3,5];case 3:return o.sent(),[4,r.continue()];case 4:return r=o.sent(),[3,2];case 5:return[4,e.done];case 6:return o.sent(),[2]}}))}))},t.prototype.openModal=function(){new ez(this.app,this).open()},t.prototype.clearData=function(){this.db.clear("backups"),this.tsCache={}},t.prototype.getLastVersionByPath=function(t){return D(this,void 0,Promise,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return e=this.db.transaction("backups","readonly"),[4,e.store.index("path").openCursor(t,"prev")];case 1:return[2,(n=i.sent())?n.value:null]}}))}))},t}(),ZR=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.instance=i,r}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty();var n=this.instance.options;new DA(e).setName(QR("option-interval")).setDesc(QR("option-interval-description")).addText((function(e){return e.setValue(String(n.intervalMinutes)).onChange((function(e){var i=parseFloat(e);!isNaN(i)&&i>=0&&(n.intervalMinutes=i,t.plugin.saveData(n))}))})),new DA(e).setName(QR("option-keep")).setDesc(QR("option-keep-description")).addText((function(e){return e.setValue(String(n.keepDays)).onChange((function(e){var i=parseFloat(e);!isNaN(i)&&i>=1&&(n.keepDays=i,t.plugin.saveData(n))}))})),new DA(e).setName(QR("option-open-history")).setDesc(QR("option-open-history-description")).addButton((function(e){return e.setButtonText(QR("button-view-snapshots")).setCta().onClick((function(){t.instance.openModal()}))})),new DA(e).setName(QR("option-clear")).setDesc(QR("option-clear-description")).addButton((function(e){return e.setButtonText(QR("button-clear-history")).setWarning().onClick((function(){new $D(t.app).setTitle(QR("option-clear")).setContent(createFragment((function(t){t.createEl("p",{cls:"mod-warning",text:QR("label-clear-warning")})}))).addButton("mod-warning",QR("button-clear-history"),(function(){t.instance.clearData(),new jb(QR("msg-clear-complete"))})).addCancelButton().open()}))}))},e}(NN),tz=function(t){function e(e,n,i,r){var o=t.call(this,e,n)||this;return o.paths=[],o.modal=null,o.paths=i,o.modal=r,o}return M(e,t),e.prototype.renderSuggestion=function(t,e){e.setText(Qt(t))},e.prototype.getSuggestions=function(t){t=t.toLowerCase();for(var e=[],n=0,i=this.paths;n<i.length;n++){var r=i[n];r.toLowerCase().contains(t)&&e.push(r)}return e.slice(0,100)},e.prototype.selectSuggestion=function(t){var e=this.textInputEl;e.value=Qt(t),this.modal.switchToPath(t),e.trigger("input"),this.close()},e}(MR),ez=function(t){function e(e,n){var i=t.call(this,e)||this;return i.plugin=null,i.historyListEl=null,i.versionListEl=null,i.fileContentEl=null,i.dataEl=null,i.plugin=n,i}return M(e,t),e.prototype.switchToPath=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d=this;return A(this,(function(f){switch(f.label){case 0:return n=(e=this).versionListEl,i=e.dataEl,r=e.fileContentEl,n.empty(),o=this.plugin.db,s=o.transaction("backups","readonly"),[4,s.store.index("path").getAll(t)];case 1:for((a=f.sent()).sort((function(t,e){return e.ts-t.ts})),l=null,c=function(t){var e=n.createDiv({cls:"sync-history-list-item",text:window.moment(t.ts).format("LLLL")});e.createDiv("u-small u-muted").setText(ct(t.data.length));var o=function(){l&&l.removeClass("is-active"),(l=e).addClass("is-active"),r.removeClass("mod-empty"),i.value=t.data,By.isMobile&&Lb(d.contentEl,d.fileContentEl,"right")};e.addEventListener("click",o),null!==l||By.isMobile||o()},u=0,h=a;u<h.length;u++)p=h[u],c(p);return[2]}}))}))},e.prototype.onOpen=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u=this;return A(this,(function(h){switch(h.label){case 0:return e=(t=this).modalEl,n=t.contentEl,i=this.plugin.db,r=i.transaction("backups","readonly"),[4,r.store.index("path").openCursor(null,"nextunique")];case 1:o=h.sent(),s=[],h.label=2;case 2:return o?(s.push(o.value.path),[4,o.continue()]):[3,4];case 3:return o=h.sent(),[3,2];case 4:return s.sort(DN),0===s.length?(this.titleEl.setText(QR("name")),n.createEl("p",{text:QR("label-no-history-found")}),[2]):(e.addClass("mod-sync-history"),a=this.historyListEl=n.createDiv("sync-history-list"),new DA(a).addSearch((function(t){var e=t.inputEl;e.setAttribute("placeholder",QR("placeholder-choose-file")),new tz(u.app,e,s,u)})),this.versionListEl=a.createDiv("sync-history-list-item-container"),l=this.fileContentEl=n.createDiv("sync-history-content-container mod-empty"),By.isMobile&&(l.detach(),(c=l.createDiv({cls:"modal-setting-back-button"},(function(t){t.addEventListener("click",(function(){Lb(u.contentEl,u.historyListEl,"left")}))}))).createSpan("modal-setting-back-button-icon",(function(t){Ty(t,fm,20)})),c.createSpan({text:Ee("interface.start-screen.button-back")})),l.createEl("p",{cls:"sync-history-content-empty",text:QR("label-select-file")}),this.dataEl=l.createEl("textarea","sync-history-content"),l.createEl("p","sync-history-content-buttons u-center-text",(function(t){t.createEl("button",{cls:"mod-cta",text:Ee("interface.label-copy")},(function(t){t.addEventListener("click",(function(){return D(u,void 0,void 0,(function(){return A(this,(function(t){return Ae(this.dataEl.value),new jb(Ee("interface.copied",{item:""})),[2]}))}))}))}))})),[2])}}))}))},e}(KD),nz=Me("plugins.search"),iz=function(){function t(){this.id="global-search",this.name=nz("name"),this.description=nz("desc"),this.defaultOn=!0,this.app=null,this.options={}}return t.prototype.init=function(t,e){var n=this;this.app=t,e.registerGlobalCommand({id:"global-search:open",name:nz("action-open-search"),icon:ly,callback:function(){var e=window.getSelection().toString(),i=t.workspace.getActiveViewOfType(rR);if(i){var r=i.getSelection();r&&(e=r)}e?e.contains(" ")&&(e='"'+e.replace(/\\/,"\\\\").replace(/"/,'\\"')+'"'):e=null,n.openGlobalSearch(e)},hotkeys:[GA(["Mod","Shift"],"F")]}),e.registerViewType(rz,(function(t){return new oz(t)}))},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return e.registerEvent(t.workspace.on("layout-ready",this.initLeaf,this)),e.registerEvent(t.workspace.on("editor-menu",this.onEditorMenu,this)),n=this,[4,e.loadData()];case 1:return n.options=i.sent()||{},[2]}}))}))},t.prototype.onUserEnable=function(){this.initLeaf()},t.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(rz,"left",!1,!1)},t.prototype.onEditorMenu=function(t,e,n){var i=this,r=e.getSelection();r&&t.addItem((function(t){return t.setTitle(nz("menu-opt-search-for",{keyword:fF(r,40)})).setIcon(_g).onClick((function(){r.contains(" ")&&(r='"'+r.replace(/\\/,"\\\\").replace(/"/,'\\"')+'"'),i.openGlobalSearch(r)}))}))},t.prototype.openGlobalSearch=function(t){this.app.workspace.ensureSideLeaf(rz,"left",!1,!0,{query:t})},t.prototype.getGlobalSearchQuery=function(){var t,e=this.app.workspace.getLeavesOfType(rz);if(0===e.length)return"";var n=e[0].getViewState();return(null===(t=null==n?void 0:n.state)||void 0===t?void 0:t.query)?n.state.query:""},t}(),rz="search",oz=function(t){function e(e){var n=t.call(this,e)||this;n.icon=_g,n.searchInfoEl=null,n.matchingCase=!1,n.explainSearch=!1,n.searchQuery=null,n.recentSearches=[],n.requestSaveSearch=De(n.saveSearch.bind(n),5e3,!0);var i=n.containerEl,r=n.headerDom=new cB(n.app,i);return n.matchingCaseButtonEl=r.addNavButton(jm,nz("label-match-case"),(function(){return n.setMatchingCase(!n.matchingCase)})),n.explainSearchButtonEl=r.addNavButton(Rm,nz("label-explain-search-term"),(function(){return n.setExplainSearch(!n.explainSearch)})),n.collapseAllButtonEl=r.addNavButton(qm,nz("label-collapse-results"),(function(){return n.setCollapseAll(!n.dom.collapseAll)})),n.extraContextButtonEl=r.addNavButton(_m,nz("label-more-context"),(function(){return n.setExtraContext(!n.dom.extraContext)})),r.addSortButton((function(t){return n.setSortOrder(t)}),(function(){return n.dom.sortOrder})),r.addNavButton(im,nz("label-copy-search-results"),n.onCopyResultsClick.bind(n)),new BA(i).setPlaceholder(nz("prompt-start-search")).onChange(De(n.startSearch.bind(n),250,!0)).then((function(t){$e(t.clearButtonEl,nz("tooltip-clear-search")),n.searchComponent=t,n.searchComponent.inputEl.addEventListener("keypress",(function(t){t.isComposing||"Enter"!==t.key||(By.isMobile&&ih(),n.startSearch())})),By.isMobile&&t.containerEl.createDiv("search-input-suggest-button",(function(e){Ty(e,Wg,10),e.addEventListener("click",(function(){FI.showOnce(n.app,t.inputEl,!0)}))}))})),n.searchInfoEl=i.createDiv({cls:"search-info-container"}),n.searchInfoEl.hide(),n.dom=new aB(n.app,i.createDiv("search-result-container mod-global-search"),nz("label-no-matches")),n.queue=new lB(n.app,n.dom),n.addChild(n.queue),By.isMobile||FI.attach(n.app,n.searchComponent.inputEl,!0),n}return M(e,t),e.prototype.onOpen=function(){return D(this,void 0,Promise,(function(){return A(this,(function(e){return this.registerDomEvent(this.leaf.tabHeaderEl,"click",this.onTabHeaderClick.bind(this)),[2,t.prototype.onOpen.call(this)]}))}))},e.prototype.saveSearch=function(){var t=this.searchComponent.getValue();if(t){var e=this.app.loadLocalStorage("recent-searches");e&&Array.isArray(e)||(e=[]),e.remove(t),e.unshift(t),e.length>20&&(e=e.slice(0,20)),this.app.saveLocalStorage("recent-searches",e)}},e.prototype.getDisplayText=function(){return nz("name")},e.prototype.getViewType=function(){return rz},e.prototype.getState=function(){var e=t.prototype.getState.call(this);return e.query=this.getQuery(),e.matchingCase=this.matchingCase,e.explainSearch=this.explainSearch,e.collapseAll=this.dom.collapseAll,e.extraContext=this.dom.extraContext,e.sortOrder=this.dom.sortOrder,e},e.prototype.setState=function(e,n){return D(this,void 0,Promise,(function(){var i,r,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:return[4,t.prototype.setState.call(this,e,n)];case 1:return c.sent(),i=e.query,r=e.matchingCase,o=e.explainSearch,s=e.collapseAll,a=e.extraContext,l=e.sortOrder,(String.isString(i)||null===i)&&this.setQuery(i),isBoolean(r)&&this.setMatchingCase(r),isBoolean(o)&&this.setExplainSearch(o),isBoolean(s)&&this.setCollapseAll(s),isBoolean(a)&&this.setExtraContext(a),String.isString(l)&&XN.hasOwnProperty(l)&&this.setSortOrder(l),[2]}}))}))},e.prototype.setMatchingCase=function(t){t!==this.matchingCase&&(this.matchingCase=t,this.matchingCaseButtonEl.toggleClass("is-active",t),this.app.workspace.requestSaveLayout(),""!==this.searchComponent.getValue()&&this.startSearch())},e.prototype.setExplainSearch=function(t){t!==this.explainSearch&&(this.explainSearch=t,this.searchInfoEl.toggle(t),this.explainSearchButtonEl.toggleClass("is-active",t),this.app.workspace.requestSaveLayout())},e.prototype.setCollapseAll=function(t){t!==this.dom.collapseAll&&(this.dom.setCollapseAll(t),this.collapseAllButtonEl.toggleClass("is-active",t),this.app.workspace.requestSaveLayout())},e.prototype.setExtraContext=function(t){t!==this.dom.extraContext&&(this.dom.setExtraContext(t),this.extraContextButtonEl.toggleClass("is-active",t),this.app.workspace.requestSaveLayout())},e.prototype.onCopyResultsClick=function(t){t.preventDefault(),new sz(this.app,this.dom).open()},e.prototype.setSortOrder=function(t){var e=this.dom;e.sortOrder=t,e.changed()},e.prototype.onResize=function(){this.dom.onResize()},e.prototype.startSearch=function(){var t=this;this.stopSearch();var e=this,n=e.app,i=e.dom,r=e.searchInfoEl;i.emptyResults();try{var o=this.searchComponent.getValue(),s=new CP(o,this.matchingCase);if(!s.matcher)return;this.searchQuery=s,this.renderSearchInfo(s.matcher,r);var a=this.queue.start();xP(n,s.requiredInputs,a,(function(e,n,r){return D(t,void 0,void 0,(function(){var t;return A(this,(function(o){switch(o.label){case 0:return(t=s.match(e,n,r))?i.addResult(e,t,n).renderContentMatches():i.removeResult(e),i.el.offsetParent?[3,2]:[4,new Promise((function(t){return i.el.onNodeInserted(t,!0)}))];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))}))}catch(t){r.createDiv({cls:"search-info",text:t.message}),console.log(t)}this.app.workspace.requestSaveLayout(),this.requestSaveSearch()},e.prototype.stopSearch=function(){this.queue.stop(),this.searchInfoEl.empty()},e.prototype.renderSearchInfo=function(t,e){if(e.createDiv({text:t.getInfo()}),t instanceof eP)for(var n=e.createDiv("search-info-children"),i=0,r=t.matchers;i<r.length;i++){var o=r[i];this.renderSearchInfo(o,n)}else if(t instanceof rP){n=e.createDiv("search-info-children");this.renderSearchInfo(t.matcher,n)}},e.prototype.setQuery=function(t){var e=this.searchComponent,n=e.inputEl;String.isString(t)?(n.value=t,e.setValue(t),n.focus(),this.startSearch()):n.select()},e.prototype.getQuery=function(){return this.searchComponent.getValue()},e.prototype.onTabHeaderClick=function(){var t=this;setTimeout((function(){t.searchComponent.inputEl.select()}),0)},e}(Hb),sz=function(t){function e(e,n){var i=t.call(this,e)||this;return i.dom=n,i.titleEl.setText(nz("label-copy-search-results")),i}return M(e,t),e.prototype.onOpen=function(){var t=this,e=this.contentEl,n=this.dom,i={},r=this.app.internalPlugins.getPluginById("global-search");r&&(i=r.instance.options),e.empty();var o,s,a,l=e.createDiv("copy-search-result-container"),c=l.createEl("textarea","copy-search-result-textarea"),u=function(){var t=n.getFiles();c.value=t.map((function(t,e){var n=o.getValue()?t.path:t.basename,l=s.getValue();"wikilink"===l?n="[["+n+"]]":"markdown"===l&&(n="["+t.basename+"]("+n+")");var c=a.getValue();return"-"===c?n="- "+n:"*"===c?n="* "+n:"num"===c&&(n=e+1+". "+n),i.showFullPath=o.getValue(),i.linkStyle=s.getValue(),i.listStyle=a.getValue(),r.saveData(i),n})).join("\n"),c.select()};new DA(l).setName(nz("option-show-path")).setDesc(nz("option-show-path-description")).addToggle((function(t){t.setValue(!!i.showFullPath).onChange(u),o=t})),new DA(l).setName(nz("option-link-style")).setDesc(nz("option-link-style-description")).addDropdown((function(t){t.addOption("none",nz("option-choice-link-style-none")).addOption("wikilink",nz("option-choice-link-style-wikilink")).addOption("markdown",nz("option-choice-link-style-markdown-link")).setValue(i.linkStyle||"none").onChange(u),s=t})),new DA(l).setName(nz("option-list-prefix")).setDesc(nz("option-list-prefix-description")).addDropdown((function(t){t.addOption("none",nz("option-choice-list-style-none")).addOption("-",nz("option-choice-list-style-dash")).addOption("*",nz("option-choice-list-style-asterisk")).addOption("num",nz("option-choice-list-style-numbered")).setValue(i.listStyle||"none").onChange(u),a=t})),e.createDiv("modal-button-container",(function(e){e.createEl("button",{text:nz("button-copy-results"),cls:"mod-cta"}).addEventListener("click",(function(){Ae(c.value),new jb(nz("msg-successfully-copied"))})),e.createEl("button",{text:Ee("dialogue.button-done")}).addEventListener("click",(function(){return t.close()}))})),u()},e.prototype.onClose=function(){this.contentEl.empty()},e}(KD),az=function(){function t(){this.id="markdown-importer",this.name=Ee("plugins.markdown-format-importer.name"),this.description=Ee("plugins.markdown-format-importer.desc"),this.defaultOn=!0}return t.prototype.init=function(t,e){this.app=t,e.registerRibbonAction(Ee("plugins.markdown-format-importer.action-open"),rm,this.onOpen.bind(this)),e.registerGlobalCommand({id:"markdown-importer:open",name:Ee("plugins.markdown-format-importer.action-open"),icon:ty,callback:this.onOpen.bind(this)})},t.prototype.onOpen=function(){return new fz(this.app).open(),!1},t}(),lz=/\^\^(\S(.*?\S)?)\^\^/g,cz=/::(\S(.*?\S)?)::/g,uz=/\[\[(\d+?)\]\]/g,hz=/\B\#([^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]+\b)/g,pz=/\B\#(\[\[[\w \t]*?\]\])/g,dz=/\{\{\[\[(TODO|DONE)\]\]\}\}/g,fz=function(t){function e(e){var n=t.call(this,e)||this;n.converters=[];var i=n.contentEl,r=n.converters;n.titleEl.setText(Ee("plugins.markdown-format-importer.name"));for(var o=n.conversionsEl=i.createDiv(),s=[{name:Ee("plugins.markdown-format-importer.option-roam-tag-fixer"),description:Ee("plugins.markdown-format-importer.option-roam-tag-fixer-description"),convert:function(t,e,n,i){return(n=n.replace(hz,(function(t,e){for(var n=!0,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o<48||o>57){n=!1;break}}return n?t:(i.replaced++,"[["+e+"]]")}))).replace(pz,(function(t,e){return i.replaced++,e}))}},{name:Ee("plugins.markdown-format-importer.option-roam-highlight-fixer"),description:Ee("plugins.markdown-format-importer.option-roam-highlight-fixer-description"),convert:function(t,e,n,i){return n.replace(lz,(function(t,e){return i.replaced++,"=="+e+"=="}))}},{name:Ee("plugins.markdown-format-importer.option-roam-todo-converter"),description:Ee("plugins.markdown-format-importer.option-roam-todo-converter-description",ve),convert:function(t,e,n,i){return n.replace(dz,(function(t,e){return i.replaced++,"TODO"===e?"[ ]":"[x]"}))}},{name:Ee("plugins.markdown-format-importer.option-bear-highlight-fixer"),description:Ee("plugins.markdown-format-importer.option-bear-highlight-fixer-description"),convert:function(t,e,n,i){return n.replace(cz,(function(t,e){return i.replaced++,"=="+e+"=="}))}},{name:Ee("plugins.markdown-format-importer.zettelkasten-link-fixer"),description:Ee("plugins.markdown-format-importer.zettelkasten-link-fixer-description"),convert:function(t,e,n,i){return n.replace(uz,(function(n,r){for(var o=0,s=t.vault.getAllLoadedFiles();o<s.length;o++){var a=s[o];if(a instanceof cb&&a.basename.contains(r))return i.replaced++,"[["+t.metadataCache.fileToLinktext(a,e.path)+"]]"}return n}))}},{name:Ee("plugins.markdown-format-importer.zettelkasten-link-beautifier"),description:Ee("plugins.markdown-format-importer.zettelkasten-link-beautifier-description"),convert:function(t,e,n,i){return n.replace(uz,(function(n,r){for(var o=0,s=t.vault.getAllLoadedFiles();o<s.length;o++){var a=s[o];if(a instanceof cb&&a.basename.contains(r))return i.replaced++,"[["+t.metadataCache.fileToLinktext(a,e.path)+"|"+a.basename.replace(r,"").trim()+"]]"}return n}))}}],a=function(t){new DA(o).setName(t.name).setDesc(t.description).addToggle((function(e){e.setValue(!1),r.push({toggle:e,conversion:t})}))},l=0,c=s;l<c.length;l++){a(c[l])}o.createEl("p",{cls:"setting-message mod-warning",text:Ee("plugins.markdown-format-importer.msg-all-files-warning")}),o.createEl("p",{cls:"setting-message mod-warning",text:Ee("plugins.markdown-format-importer.msg-override-files-warning")}),o.createDiv("modal-button-container").createEl("button",{cls:"mod-cta",text:Ee("plugins.markdown-format-importer.label-start-conversion")}).addEventListener("click",n.onProcess.bind(n));var u=n.resultEl=createDiv();n.statusEl=u.createEl("p","u-center-text"),n.processedEl=u.createDiv("changelog-item mod-success"),n.modifiedEl=u.createDiv("changelog-item mod-highlighted"),n.replacedEl=u.createDiv("changelog-item mod-highlighted"),n.renderStats({processed:0,modified:0,replaced:0});var h=u.createDiv("modal-button-container");return(n.cancelEl=h.createEl("button",{cls:"mod-warning",text:Ee("plugins.markdown-format-importer.label-stop")})).addEventListener("click",n.onCancel.bind(n)),(n.goBackEl=h.createEl("button",{cls:"",text:Ee("plugins.markdown-format-importer.label-go-back")})).addEventListener("click",n.onGoBack.bind(n)),(n.doneEl=h.createEl("button",{cls:"mod-cta",text:Ee("plugins.markdown-format-importer.label-done")})).addEventListener("click",n.close.bind(n)),n}return M(e,t),e.prototype.onProcess=function(){for(var t=this,e=[],n=0,i=this.converters;n<i.length;n++){var r=i[n];r.toggle.getValue()&&e.push(r.conversion)}0!==e.length&&(this.runnable=new Dh({onCancel:function(){t.cancelEl.hide(),t.statusEl.setText(Ee("plugins.markdown-format-importer.label-cancelling"))}}),this.conversionsEl.detach(),this.contentEl.append(this.resultEl),this.cancelEl.show(),this.goBackEl.hide(),this.doneEl.hide(),this.statusEl.setText(Ee("plugins.markdown-format-importer.label-processing")),this.process(e))},e.prototype.onCancel=function(){var t=this.runnable;t&&t.cancel()},e.prototype.onGoBack=function(){this.resultEl.detach(),this.contentEl.append(this.conversionsEl);for(var t=0,e=this.converters;t<e.length;t++){e[t].toggle.setValue(!1)}},e.prototype.onFinish=function(t){this.renderStats(t),this.cancelEl.hide(),this.goBackEl.show(),this.statusEl.setText(Ee("plugins.markdown-format-importer.label-finished")),this.doneEl.show()},e.prototype.renderStats=function(t){this.processedEl.setText(Ee("plugins.markdown-format-importer.label-processed-files")),this.processedEl.setAttribute("data-label",t.processed.toString()),this.modifiedEl.setText(Ee("plugins.markdown-format-importer.label-modified-files")),this.modifiedEl.setAttribute("data-label",t.modified.toString()),this.replacedEl.setText(Ee("plugins.markdown-format-importer.label-total-replacements")),this.replacedEl.setAttribute("data-label",t.replaced.toString())},e.prototype.onClose=function(){this.onCancel(),this.onGoBack()},e.prototype.process=function(t){var e,n;return D(this,void 0,void 0,(function(){var i,r,o,s,a,l,c,u,h,p,d,f,g,m,v;return A(this,(function(y){switch(y.label){case 0:r=(i=this).app,o=i.runnable,s={processed:0,modified:0,replaced:0},a=r.vault.getMarkdownFiles(),y.label=1;case 1:y.trys.push([1,9,10,15]),l=I(r.vault.iterateFiles(a)),y.label=2;case 2:return[4,l.next()];case 3:if((c=y.sent()).done)return[3,8];if(u=c.value,h=u.file,p=u.content,o.isCancelled())return this.onFinish(s),[3,8];for(d=p,f=0,g=t;f<g.length;f++)m=g[f],d=m.convert(r,h,d,s);return d===p?[3,5]:(s.modified++,[4,r.vault.modify(h,d)]);case 4:y.sent(),y.label=5;case 5:return s.processed++,o.isCancelled()?(this.onFinish(s),[3,8]):(this.renderStats(s),s.processed%10!=0?[3,7]:[4,r.nextFramePromise()]);case 6:y.sent(),y.label=7;case 7:return[3,2];case 8:return[3,15];case 9:return v=y.sent(),e={error:v},[3,15];case 10:return y.trys.push([10,,13,14]),c&&!c.done&&(n=l.return)?[4,n.call(l)]:[3,12];case 11:y.sent(),y.label=12;case 12:return[3,14];case 13:if(e)throw e.error;return[7];case 14:return[7];case 15:return this.onFinish(s),[2]}}))}))},e}(KD),gz=Me("plugins.note-composer"),mz=function(){function t(){this.id="note-composer",this.name=gz("name"),this.description=gz("desc"),this.defaultOn=!0,this.options={},this.app=null,this.pluginInstance=null}return t.prototype.init=function(t,e){var n=this;this.app=t,this.pluginInstance=e,e.registerGlobalCommand({id:"note-composer:merge-file",name:gz("command-merge-file"),icon:vy,checkCallback:function(t){var e=n.app.workspace.getActiveFile();if(e){if(!t){var i=new vz(n.app,n);i.setCurrentFile(e),i.open()}return!0}}}),e.registerGlobalCommand({id:"note-composer:split-file",name:gz("command-split-file"),icon:Vv,editorCheckCallback:function(t,e,i){if(e.somethingSelected()){if(!t){var r=new yz(n.app,e,n);r.setCurrentFile(i.file),r.open()}return!0}}}),e.registerGlobalCommand({id:"note-composer:extract-heading",name:gz("command-extract-heading"),icon:xy,editorCheckCallback:function(t,e,i){var r=e.getCursor().line;if(null!==og(e.getLine(r)))return t||n.extractHeading(i.file,e),!0}})},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return n=this,[4,e.loadData()];case 1:return n.options=i.sent()||{askBeforeMerging:!0},e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this)),e.registerEvent(t.workspace.on("editor-menu",this.onEditorMenu,this)),e.addSettingTab(new bz(t,e,this)),[2]}}))}))},t.prototype.onFileMenu=function(t,e,n){var i=this;"link-context-menu"!==n&&e instanceof cb&&t.addItem((function(t){return t.setTitle(gz("action-merge-file")).setIcon(yy).onClick((function(){var t=new vz(i.app,i);t.setCurrentFile(e),t.open()}))}))},t.prototype.onEditorMenu=function(t,e,n){var i=this;e.getSelection()&&t.addItem((function(t){return t.setTitle(gz("command-split-file")).setIcon(xy).onClick((function(){var t=new yz(i.app,e,i);t.setCurrentFile(n.file),t.open()}))}));var r=e.getCursor().line;null!==og(e.getLine(r))&&t.addItem((function(t){return t.setTitle(gz("command-extract-heading")).setIcon(xy).onClick((function(){return i.extractHeading(n.file,e)}))}))},t.prototype.extractHeading=function(t,e){var n=e.getCursor().line,i=this.getSelectionUnderHeading(t,e,n);if(i){var r=i.heading,o=i.start,s=i.end;e.setSelection(o,s);var a=new yz(this.app,e,this,r);a.setCurrentFile(t),a.open()}else new jb(gz("msg-fail-to-find-heading"))},t.prototype.getSelectionUnderHeading=function(t,e,n){var i=this.app.metadataCache.getFileCache(t);if(!i)return null;var r=i.headings;if(!r||0===r.length)return null;for(var o,s=0,a=null,l=null,c=0,u=r;c<u.length;c++){var h=u[c];if(a&&h.level<=s){l=h;break}a||h.position.start.line!==n||(s=h.level,a=h)}if(!a)return null;if(l)for(o=l.position.start.line-1;""===e.getLine(o).trim()&&o>n;)o--;else o=e.lineCount()-1;return{heading:a.heading.trim(),start:Gu(n,0),end:Gu(o,e.getLine(o).length)}},t.prototype.getTemplateText=function(){return D(this,void 0,Promise,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:return t=this.app,e="",this.options.template?(n=t.metadataCache.getFirstLinkpathDest(this.options.template,""))?[4,t.vault.cachedRead(n)]:(new jb(gz("msg-fail-to-fetch-template",{template:this.options.template})),[2]):[3,2];case 1:return""===(e=i.sent())||e.contains("{{content}}")||(e+="\n\n{{content}}"),[2,e];case 2:return[2]}}))}))},t}(),vz=function(t){function e(e,n){var i=t.call(this,e)||this;return i.currentFile=null,i.emptyStateText=gz("label-no-files"),i.noteComposer=n,i.shouldShowAttachments=!1,i.setPlaceholder(gz("prompt-select-file-to-merge")),i.setInstructions([{command:"↑↓",purpose:gz("instruction-navigate")},{command:"↵",purpose:gz("instruction-merge")},{command:dt?"cmd ↵":"ctrl ↵",purpose:gz("instruction-create-new")},{command:"shift ↵",purpose:gz("instruction-merge-at-top")},{command:"esc",purpose:gz("instruction-dismiss")}]),i.scope.register(["Shift"],"Enter",(function(t){return i.chooser.useSelectedItem(t),!1})),i.scope.register(["Mod"],"Enter",(function(t){return i.chooser.useSelectedItem(t),!1})),i}return M(e,t),e.prototype.setCurrentFile=function(t){this.currentFile=t},e.prototype.onChooseSuggestion=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r,o,s,a,l,c,u,h,p=this;return A(this,(function(d){switch(d.label){case 0:return n=this.app,i=this.inputEl.value,!Bb.isModifier(e,"Mod")&&t&&"unresolved"!==t.type?[3,2]:(o=i,t&&"unresolved"===t.type&&(o=t.linktext),s=n.fileManager.getNewFileParent(o),[4,n.fileManager.createNewMarkdownFile(s,o)]);case 1:return r=d.sent(),[3,3];case 2:r=t.file,d.label=3;case 3:return r===this.currentFile||(a=this.currentFile,l=e.shiftKey,c=this.noteComposer,u=function(){return D(p,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return[4,c.getTemplateText()];case 1:return t=e.sent(),[4,n.fileManager.mergeFile(r,a,t,l)];case 2:return e.sent(),[2]}}))}))},c.options.askBeforeMerging?((h=document.createDocumentFragment()).createEl("p",{text:gz("label-confirm-file-merge",{file:a.basename,destination:r.basename})}),new $D(n).setTitle(gz("label-merge-file")).setContent(h).addButton("mod-warning",gz("button-merge-do-not-ask-again"),(function(){c.options.askBeforeMerging=!1,c.pluginInstance.saveData(c.options),u()})).addButton("mod-warning",gz("button-merge"),(function(){u()})).addCancelButton().open()):u()),[2]}}))}))},e}(kR),yz=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;if(o.defaultValue="",o.editor=n,o.composer=i,o.shouldShowUnresolved=!0,o.shouldShowAttachments=!1,!r){var s=n.getSelection().split("\n");if(s.length>0)r=og(s[0])}return r||(r=""),o.defaultValue=r,o.setPlaceholder(gz("prompt-select-file-to-merge")),o.setInstructions([{command:"↑↓",purpose:gz("instruction-navigate")},{command:"↵",purpose:gz("instruction-append")},{command:dt?"cmd ↵":"ctrl ↵",purpose:gz("instruction-create-new")},{command:"shift ↵",purpose:gz("instruction-prepend")},{command:"esc",purpose:gz("instruction-dismiss")}]),o.scope.register(["Shift"],"Enter",(function(t){return o.chooser.useSelectedItem(t),!1})),o.scope.register(["Mod"],"Enter",(function(t){return o.chooser.useSelectedItem(t),!1})),o}return M(e,t),e.prototype.onOpen=function(){t.prototype.onOpen.call(this),this.inputEl.value=this.defaultValue,this.updateSuggestions()},e.prototype.setCurrentFile=function(t){this.currentFile=t},e.prototype.onChooseSuggestion=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r,o,s,a,l,c,u,h;return A(this,(function(p){switch(p.label){case 0:n=this.app,i=this.editor.getSelection(),r=e.shiftKey,o=Bb.isModifier(e,"Mod"),a=this.currentFile,p.label=1;case 1:return p.trys.push([1,7,,8]),!o&&t?[3,3]:[4,n.fileManager.createNewMarkdownFileFromLinktext(this.inputEl.value,a.path)];case 2:return s=p.sent(),[3,6];case 3:return"unresolved"!==t.type?[3,5]:[4,n.fileManager.createNewMarkdownFileFromLinktext(t.linktext,a.path)];case 4:return s=p.sent(),[3,6];case 5:"file"!==t.type&&"alias"!==t.type||(s=t.file),p.label=6;case 6:return[3,8];case 7:return l=p.sent(),new jb(l.toString()),[2];case 8:return[4,this.composer.getTemplateText()];case 9:return c=p.sent(),[4,n.fileManager.insertTextIntoFile(s,i,a.basename,c,r)];case 10:return p.sent(),u=n.fileManager.generateMarkdownLink(s,a.path),"embed"===(h=this.composer.options.replacementText)?this.editor.replaceSelection("!"+u):"none"===h?this.editor.replaceSelection(""):this.editor.replaceSelection(u),[2]}}))}))},e}(kR),bz=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.instance=i,r}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty();var n=this.instance.options;new DA(e).setName(gz("option-split-replacement-text")).setDesc(gz("option-split-replacement-text-description")).addDropdown((function(e){return e.addOption("link",gz("option-choice-split-replacement-text-link")).addOption("embed",gz("option-choice-split-replacement-text-embed")).addOption("none",gz("option-choice-split-replacement-text-none")).setValue(n.replacementText||"link").onChange((function(e){n.replacementText=e,t.plugin.saveData(n)}))})),new DA(e).setName(gz("option-template-file")).setDesc(gz("option-template-file-description",ve)).addText((function(e){e.setPlaceholder(Ee("setting.file-path-example-placeholder")).setValue(n.template).onChange((function(e){n.template=e.trim(),t.plugin.saveData(n)})),new OR(t.app,e.inputEl)})),new DA(e).setName(gz("option-confirm-file-merge")).setDesc(gz("option-confirm-file-merge-description")).addToggle((function(e){return e.setValue(n.askBeforeMerging).onChange((function(e){n.askBeforeMerging=e,t.plugin.saveData(n)}))}))},e}(NN),wz="outgoing-link",kz=Me("plugins.outgoing-links"),Cz=function(){function t(){this.id="outgoing-link",this.name=kz("name"),this.description=kz("desc"),this.defaultOn=!1}return t.prototype.init=function(t,e){var n=this;this.app=t,this.plugin=e,e.registerViewType(wz,(function(t){return new xz(t)})),e.registerGlobalCommand({id:"outgoing-links:open",name:kz("action-show"),icon:dv,callback:function(){n.app.workspace.ensureSideLeaf(wz,"right",!1)}}),e.registerGlobalCommand({id:"outgoing-links:open-for-current",name:kz("action-open-for-current"),icon:dv,checkCallback:this.openForCurrentFile.bind(this)})},t.prototype.onEnable=function(t,e){e.registerEvent(t.workspace.on("layout-ready",this.initLeaf,this)),e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this))},t.prototype.onUserEnable=function(){this.initLeaf()},t.prototype.onUserDisable=function(t){for(var e=0,n=t.workspace.getLeavesOfType(wz);e<n.length;e++){n[e].detach()}},t.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(wz,"right",!1,!1)},t.prototype.onFileMenu=function(t,e,n,i){var r=this;!By.isMobile&&e instanceof cb&&i&&"sidebar-context-menu"!==n&&t.addItem((function(t){return t.setTitle(kz("action-open")).setIcon(_v).onClick((function(){return D(r,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"horizontal").setViewState({type:wz,active:!0,group:i,state:{file:e.path}})];case 1:return t.sent(),[2]}}))}))}))}))},t.prototype.openForCurrentFile=function(t){var e=this.app.workspace,n=e.getActiveFile();if(n){if(!t)e.splitActiveLeaf("vertical").setViewState({type:wz,active:!0,group:e.activeLeaf,state:{file:n.path}});return!0}},t}(),xz=function(t){function e(e){var n=t.call(this,e)||this;n.icon=_v;var i=n.contentEl.createDiv("outgoing-link-pane");return n.outgoingLink=n.addChild(new Sz(n.app,i)),n.requestUpdate(),n}return M(e,t),e.prototype.getDisplayText=function(){return this.file?kz("tab-title",{displayText:t.prototype.getDisplayText.call(this)}):kz("name")},e.prototype.getViewType=function(){return wz},e.prototype.canAcceptExtension=function(t){return!0},e.prototype.getState=function(){var e=t.prototype.getState.call(this);return e.linksCollapsed=this.outgoingLink.linksCollapsed,e.unlinkedCollapsed=this.outgoingLink.unlinkedCollapsed,e},e.prototype.setState=function(e,n){return D(this,void 0,Promise,(function(){var i,r;return A(this,(function(o){switch(o.label){case 0:return[4,t.prototype.setState.call(this,e,n)];case 1:return o.sent(),i=e.linksCollapsed,r=e.unlinkedCollapsed,isBoolean(i)?[4,this.outgoingLink.setLinksCollapsed(i,!1)]:[3,3];case 2:o.sent(),o.label=3;case 3:return isBoolean(r)?[4,this.outgoingLink.setUnlinkedCollapsed(r,!1)]:[3,5];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},e.prototype.onResize=function(){this.outgoingLink.onResize()},e.prototype.update=function(){this.leaf.updateHeader();var t=this.outgoingLink;t.file=this.file,t.tooltipPlacement=this.getSideTooltipPlacement(),t.update()},e}(II),Sz=function(t){function e(e,n,i){var r=t.call(this)||this;r.showSearch=!1,r.outgoingFile=null,r.linksCollapsed=!1,r.linksHeaderEl=null,r.linksCountEl=null,r.linksQueue=null,r.unlinkedFile=null,r.unlinkedCollapsed=!1,r.unlinkedHeaderEl=null,r.unlinkedCountEl=null,r.unlinksQueue=null,r.unlinkedDomInfo=new WeakMap,r.requestUpdate=De(r.update.bind(r),50),r.app=e,i=i||n;var o=r.linksHeaderEl=n.createDiv("tree-item-self is-clickable");o.createSpan("tree-item-icon collapse-icon",(function(t){Ty(t,Wg,8)})),o.createDiv({cls:"tree-item-inner",text:kz("label-links")}),o.addEventListener("click",r.toggleLinksCollapsed.bind(r)),r.linksCountEl=o.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.outgoingLinkDom=new Ez(n.createDiv("search-result-container")),r.outgoingLinkInfinityScroller=new nB(i),r.outgoingLinkInfinityScroller.rootEl=r.outgoingLinkDom;var s=r.unlinkedHeaderEl=n.createDiv("tree-item-self is-clickable");return s.createSpan("tree-item-icon collapse-icon",(function(t){Ty(t,Wg,8)})),s.createDiv({cls:"tree-item-inner",text:kz("label-unlinked-mentions")}),s.addEventListener("click",r.toggleUnlinkedCollapsed.bind(r)),r.unlinkedCountEl=s.createDiv("tree-item-flair-outer").createSpan("tree-item-flair"),r.unlinkedDom=new aB(e,n.createDiv("search-result-container"),kz("label-unlinked-mentions"),i),r.setUnlinkedCollapsed(!0,!1),r}return M(e,t),e.prototype.onload=function(){var t=this.app,e=t.vault;this.registerEvent(t.metadataCache.on("resolve",this.onFileResolved,this)),this.registerEvent(e.on("delete",this.onFileDeleted,this))},e.prototype.onResize=function(){this.outgoingLinkInfinityScroller.onResize(),this.unlinkedDom.onResize()},e.prototype.toggleLinksCollapsed=function(){this.setLinksCollapsed(!this.linksCollapsed,!0)},e.prototype.setLinksCollapsed=function(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return t===this.linksCollapsed?[2]:(this.linksCollapsed=t,this.updateHeaderTooltip(this.linksHeaderEl,t),[4,Sb(this.outgoingLinkDom.el,t,e)]);case 1:return n.sent(),t||this.outgoingLinkInfinityScroller.invalidateAll(),this.update(),this.app.workspace.requestSaveLayout(),this.outgoingLinkInfinityScroller.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},e.prototype.toggleUnlinkedCollapsed=function(){this.setUnlinkedCollapsed(!this.unlinkedCollapsed,!0)},e.prototype.setUnlinkedCollapsed=function(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return t===this.unlinkedCollapsed?[2]:(this.unlinkedCollapsed=t,[4,this.setSectionCollapsed(this.unlinkedHeaderEl,this.unlinkedDom,t,e)]);case 1:return n.sent(),this.app.workspace.requestSaveLayout(),this.outgoingLinkInfinityScroller.updateVirtualDisplay(),this.unlinkedDom.infinityScroll.updateVirtualDisplay(),[2]}}))}))},e.prototype.updateHeaderTooltip=function(t,e){t.toggleClass("is-collapsed",e),$e(t,Ee(e?"interface.tooltip.click-to-expand":"interface.tooltip.click-to-collapse"),{placement:this.tooltipPlacement})},e.prototype.setSectionCollapsed=function(t,e,n,i){return D(this,void 0,void 0,(function(){return A(this,(function(r){switch(r.label){case 0:return this.updateHeaderTooltip(t,n),[4,e.toggle(n,i)];case 1:return r.sent(),this.update(),[2]}}))}))},e.prototype.onFileResolved=function(t){t===this.file&&(this.outgoingFile=null,this.unlinkedFile=null,this.update())},e.prototype.onFileDeleted=function(){this.unlinkedFile=null,this.requestUpdate()},e.prototype.update=function(){var t=this.file;this.outgoingFile!==t&&this.recomputeLinks(),this.unlinkedFile!==t&&this.recomputeUnlinked(),this.updateHeaderTooltip(this.linksHeaderEl,this.linksCollapsed),this.updateHeaderTooltip(this.unlinkedHeaderEl,this.unlinkedCollapsed)},e.prototype.recomputeLinks=function(){var t=this,e=this.linksQueue;e&&!e.runnable.isCancelled()&&(e.runnable.cancel(),this.outgoingFile=null),this.linksQueue=null;var n=this.linksCollapsed,i=this.linksCountEl;if(n)i.hide();else{var r=this.file;this.outgoingFile=r;var o=this.outgoingLinkDom,s=this.outgoingLinkInfinityScroller;if(s.queueCompute(),i.show(),i.setText("0"),r&&"md"===r.extension){var a=this.app.metadataCache,l=a.getFileCache(r);if(l){var c=[];if(eA(l,(function(t){var e=t.link;c.push({linktext:e,pos:t.position.start.offset})})),c.sort((function(t,e){return t.pos-e.pos})),0!==c.length){for(var u=r.path,h=0,p=0,d=o.children;p<d.length;p++){d[p].invalidated=!0}o.children.filter((function(t){return t.sourcePath===u}));var f=function(){var t=o.children;t.sort((function(t,e){return t.pos-e.pos}));for(var e=0;e<t.length;e++){var n=t[e];if(-1!==h&&n.pos>h)break;n.invalidated&&(t.splice(e,1),e--)}s.queueCompute(),i.setText(String(t.length))};e=this.linksQueue=new Ah({onStart:function(){},onStop:function(){h=-1,f()},onCancel:function(){t.linksQueue=null}});var g=new Set;e.addList(c);var m=Ph(e.generator(),{batchSize:20,beforePause:function(){f()}});D(t,void 0,void 0,(function(){var t,e,n,i,r,s,l,c,p,d,f,v,y,b;return A(this,(function(w){switch(w.label){case 0:w.trys.push([0,5,6,11]),t=I(m),w.label=1;case 1:return[4,t.next()];case 2:if((e=w.sent()).done)return[3,4];if(n=e.value,i=n.linktext,r=n.pos,s=tA(i),l=s.path,c=s.subpath,(p=a.getFirstLinkpathDest(l,u))||(l=SA(l)),d=(p?p.path:l)+c,g.has(d))return[3,3];g.add(d),(f=new Mz(this,i,l,c,u,p)).pos=r,h=r,o.children.push(f),w.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return v=w.sent(),y={error:v},[3,11];case 6:return w.trys.push([6,,9,10]),e&&!e.done&&(b=t.return)?[4,b.call(t)]:[3,8];case 7:w.sent(),w.label=8;case 8:return[3,10];case 9:if(y)throw y.error;return[7];case 10:return[7];case 11:return[2]}}))}))}else o.children=[]}else o.children=[]}else o.children=[]}},e.prototype.recomputeUnlinked=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,x,S,E,M,L,T,P,O,F,N,B=this;return A(this,(function(R){switch(R.label){case 0:return(t=this.unlinksQueue)&&!t.runnable.isCancelled()&&(t.runnable.cancel(),this.unlinkedFile=null),this.unlinksQueue=null,n=(e=this).unlinkedCollapsed,i=e.unlinkedCountEl,n?(i.hide(),[2]):(r=this.file,o=this.unlinkedDom,a=(s=this).app,l=s.unlinkedDomInfo,this.unlinkedFile=r,i.show(),i.setText("0"),r&&"md"===r.extension?(c={},u=function(t,e){t=t.toLowerCase();var n=c[t]=c[t]||{text:t,files:[]};n.files.contains(e)||n.files.push(e)},h=a.metadataCache.getFileCache(r),[4,a.vault.cachedRead(r)]):(o.emptyResults(),[2]));case 1:for(p=R.sent(),d=a.vault.getMarkdownFiles(),f=0,g=d;f<g.length;f++)if((m=g[f])!==r&&(u(m.basename,m),(v=a.metadataCache.getFileCache(m))&&(y=Pg(v.frontmatter))))for(b=0,w=y;b<w.length;b++)(k=w[b])&&u(k,m);if(C=Array.from(Object.values(c)).sort((function(t,e){return DN(t.text,e.text)})),x=o.getResult(r)){for(S=x.children,E=0;E<S.length;E++)M=S[E],(L=l.get(M))&&c.hasOwnProperty(L.text)||(S.splice(E,1),E--);x.content=p}else o.emptyResults(),x=o.addResult(r,{content:[]},p,!1);return x.separateMatches=!0,T=function(){x.children.sort((function(t,e){return t.matches[0][0]-e.matches[0][0]})),o.infinityScroll.queueCompute(),i.setText(String(o.getMatchCount()))},t=this.unlinksQueue=new Ah({onStart:function(){},onStop:function(){T()},onCancel:function(){B.linksQueue=null}}),P=0,(O=h&&h.frontmatter&&h.frontmatter.position)&&(P=O.end.offset),F=p.toLowerCase(),t.addList(C),N=Ph(t.generator(),{beforePause:function(){T()}}),D(B,void 0,void 0,(function(){var t,e,n,i,o,s,c,u,d,f,g,m,v,y,b,w,k,C=this;return A(this,(function(S){switch(S.label){case 0:S.trys.push([0,5,6,11]),t=I(N),S.label=1;case 1:return[4,t.next()];case 2:if((e=S.sent()).done)return[3,4];for(n=e.value,i=n.files,o=n.text,s=x.children,c=0;c<s.length;c++)u=s[c],(d=l.get(u))&&d.text!==o||(s.splice(c,1),c--);for(f=jT(o),g=new RegExp(f,"giy"),m=f.startsWith("(?:")?-1:0,v=F.indexOf(o,P),y=function(){g.lastIndex=v+m;var t=v,e=v+o.length;if(v=F.indexOf(o,e),!g.test(p))return"continue";if(eA(h,(function(n){return n.position.start.offset<=t&&n.position.end.offset>=e})))return"continue";var c=[t,e],u=x.getMatchMinimalPositions(p,c),d=u[0],f=u[1],y=u[2],b=u[3],w=new sB(x,d,f,[c]);l.set(w,n);var k=i;w.onMatchRender=function(t,e){for(var n=e.createDiv({cls:"search-result-file-match-destination-file-container"}),i=function(t){var i=n.createDiv({cls:"search-result-file-match-destination-file"});i.createSpan({cls:"search-result-file-match-destination-file-icon"},(function(t){Ty(t,dv,14)})),i.createSpan({cls:"search-result-file-match-destination-file-name",text:t.basename});var o="/"!==t.parent.path,s=kz("tooltip-link-file");o&&(s=Qt(t.path)+"\n\n"+s),$e(i,s),i.addEventListener("click",(function(n){return D(C,void 0,void 0,(function(){var i,o,s,l,u,h;return A(this,(function(p){switch(p.label){case 0:return n.preventDefault(),e.detach(),x.invalidate(),i=this.app.vault,o=c[0],s=c[1],t?[4,i.read(r)]:[2];case 1:return l=p.sent(),u=l.slice(o,s),h=a.fileManager.generateMarkdownLink(t,r.path,"",u),l=l.slice(0,o)+h+l.slice(s),[4,i.modify(r,l)];case 2:return p.sent(),[2]}}))}))}))},o=0,s=k;o<s.length;o++)i(s[o])},w.render(y,b),s.push(w)};-1!==v;)y();S.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return b=S.sent(),w={error:b},[3,11];case 6:return S.trys.push([6,,9,10]),e&&!e.done&&(k=t.return)?[4,k.call(t)]:[3,8];case 7:S.sent(),S.label=8;case 8:return[3,10];case 9:if(w)throw w.error;return[7];case 10:return[7];case 11:return[2]}}))})).then(),[2]}}))}))},e}(Vg),Ez=function(t){this.info={height:0,width:0,childTop:0,computed:!1,queued:!1,hidden:!1},this.children=[],this.pusherEl=tB(),this.el=t,this.childrenEl=t},Mz=function(t,e,n,i,r,o){this.info={height:0,width:0,childTop:0,computed:!1,queued:!1,hidden:!1},this.invalidated=!1,this.sourcePath=r;var s=t.app,a=this.el=createDiv("tree-item-self is-clickable outgoing-link-item"),l=a.createSpan("tree-item-icon"),c=dv,u=n,h="";if(o){var p=oA(s.metadataCache.getFileCache(o),i);p?"heading"===p.type?(c=sv,u=p.current.heading,h=n):"block"===p.type&&(c=rm,u=p.block.id,h=n):(c=dv,"/"!==o.parent.path&&(h=$t(o.path)))}else c=Gv,$e(a,kz("tooltip-not-created"));Ty(l,c);var d=a.createDiv({cls:"tree-item-inner",text:u});if(h&&d.createDiv({cls:"tree-item-inner-subtext",text:h}),a.onClickEvent((function(t){s.workspace.openLinkText(e,r,Bb.isModEvent(t))})),a.addEventListener("mouseover",(function(n){!n.defaultPrevented&&Ne(n,a)&&(n.preventDefault(),s.workspace.trigger("hover-link",{event:n,source:"search",hoverParent:t,targetEl:a,linktext:e,sourcePath:r}))})),o){var f=s.dragManager;f.handleDrag(a,(function(t){return f.dragFile(t,o)}))}},Lz=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=null,e}return M(e,t),e.prototype.render=function(){var t=this.childrenEl,e=this.children;if(null!==e){t.setChildrenInPlace(e.map((function(t){return t.el})));for(var n=0,i=e;n<i.length;n++){i[n].render()}}else t.empty()},e}(NI),Dz=function(){function t(t){this.children=[],this.childrenEl=t}return t.prototype.render=function(){var t=this.childrenEl,e=this.children;t.setChildrenInPlace(e.map((function(t){return t.el})));for(var n=0,i=e;n<i.length;n++){i[n].render()}},t.prototype.addRoot=function(t){this.children.push(t)},t.prototype.clear=function(){this.children=[],this.render()},t}();var Az=function(t){function e(e,n){var i=t.call(this)||this;return i.owner=e,i.heading=n,i.innerEl.setText(n.heading),i}return M(e,t),e.prototype.onSelfClick=function(t){if(!t.defaultPrevented){var e=this.owner;e.onItemClick&&e.onItemClick(this.heading)}},e.prototype.render=function(){t.prototype.render.call(this);var e=this.owner,n=this.children;this.setCollapsible(e.collapsible&&n&&n.length>0),this.setClickable(!!e.onItemClick)},e.prototype.setActive=function(t){this.selfEl.toggleClass("mod-active",t)},e}(Lz),Tz=function(t){function e(e,n){var i=t.call(this,e)||this;return i.collapsible=!0,i.highlighted=null,i.allItems=[],i.onItemClick=n,i}return M(e,t),e.prototype.renderOutline=function(t){for(var e=[],n=this.allItems=[],i=0,r=t;i<r.length;i++){for(var o=r[i],s=o.level,a=new Az(this,o),l=e.last();l&&l.heading.level>=s;)e.pop(),l=e.last();e.push(a),l?(l.children=l.children||[],l.children.push(a)):this.addRoot(a),n.push(a)}this.highlighted=null,this.render()},e.prototype.highlightLine=function(t){for(var e=this.highlighted,n=null,i=0,r=this.allItems;i<r.length;i++){var o=r[i];if(!(o.heading.position.start.line<=t))break;n=o}n!==e&&(e&&e.setActive(!1),this.highlighted=n,n&&n.setActive(!0))},e}(Dz),Pz="outline";function Oz(t){var e="\n"===t.charAt(t.length-1),n="\n"===t.charAt(t.length-2);return e?n?t:t+"\n":t+"\n\n"}var Fz,Iz=function(){function t(){this.id="outline",this.name=Ee("plugins.outline.name"),this.description=Ee("plugins.outline.desc")}return t.prototype.init=function(t,e){var n=this;this.app=t,this.plugin=e,e.registerViewType(Pz,(function(t){return new Nz(t)})),e.registerGlobalCommand({id:"outline:open",name:Ee("plugins.outline.action-show"),icon:iy,callback:function(){n.app.workspace.ensureSideLeaf(Pz,"right",!1)}}),e.registerGlobalCommand({id:"outline:open-for-current",name:Ee("plugins.outline.action-open-for-current"),icon:iy,checkCallback:this.openTocForActiveFile.bind(this)})},t.prototype.onEnable=function(t,e){e.registerEvent(t.workspace.on("file-open",this.onFileOpen,this)),e.registerEvent(t.workspace.on("layout-ready",this.initLeaf,this)),e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this))},t.prototype.onFileOpen=function(t){this.file=t instanceof cb?t:null},t.prototype.onUserEnable=function(){this.initLeaf()},t.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(Pz,"right",!1,!1)},t.prototype.onFileMenu=function(t,e,n,i){var r=this;!By.isMobile&&e instanceof cb&&i&&"sidebar-context-menu"!==n&&t.addItem((function(t){return t.setTitle(Ee("plugins.outline.action-open")).setIcon(qm).onClick((function(){return D(r,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.app.workspace.splitLeafOrActive(i,"vertical").setViewState({type:Pz,active:!0,group:i,state:{file:e.path}})];case 1:return t.sent(),[2]}}))}))}))}))},t.prototype.openTocForActiveFile=function(t){var e=this.app.workspace,n=e.getActiveFile();if(n){if(!t)e.splitActiveLeaf("vertical").setViewState({type:Pz,active:!0,group:e.activeLeaf,state:{file:n.path}});return!0}},t}(),Nz=function(t){function e(e){var n=t.call(this,e)||this;n.icon=qm,n.paneEl=null;var i=n.contentEl,r=n.paneEl=i.createDiv("outline");n.treeView=new Tz(r,n.onItemClick.bind(n));var o=createDiv("drop-indicator"),s=De((function(t){return o.style.top=t+"px"}),0);return n.app.dragManager.handleDrop(i,(function(t,e,i){if("outline"===e.source&&"heading"===e.type&&e.file===n.file){var a=n.treeView.allItems;if(0===a.length)return;for(var l=t.target,c=null,u=0,h=a;u<h.length;u++){var p=(y=h[u]).selfEl;if(p===l||p.contains(l)){var d=p.getBoundingClientRect(),f=d.y+d.height/2,g=void 0,m=void 0;if(t.clientY<f)g=p.offsetTop,m="before";else{var v=p.nextSibling;g=v?v.offsetTop:p.offsetTop+p.offsetHeight,m="after"}c={item:y,position:m,y:g}}}if(!c){var y,b=a[a.length-1];m=b.selfEl.getBoundingClientRect();if(t.clientY>m.y)c={item:b,position:"after",y:b.selfEl.offsetTop+b.selfEl.offsetHeight};else c={item:y=a[0],position:"before",y:y.selfEl.offsetTop}}o.parentNode!==r&&r.prepend(o),s(Math.max(0,c.y-2));var w=n.app.metadataCache.getFileCache(n.file);if(!w||!w.headings)return;var k=w.headings,C=e.heading,x=k.indexOf(C),S=c.item.heading,E=k.indexOf(S);if(-1===x||-1===E)return;if("after"===c.position&&(S=k[++E]),x===E)return;for(var M=x+1;M<k.length&&!(k[M].level<=C.level);M++);var L=C.position.start.offset,T=M<k.length?k[M].position.start.offset:-1,P=S?S.position.start.offset:-1,O=Math.max(L,T,P)+1,F=-1===P?O:P;if(F>=L&&F<=(-1===T?O:T))return;return i||D(n,void 0,void 0,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return[4,this.app.vault.read(this.file)];case 1:return t=n.sent(),-1===T&&(T=t.length),-1===P&&(P=t.length),e=Oz(t.substring(L,T)),t=P<L?Oz(t.substring(0,P))+e+t.substring(P,L)+t.substring(T):t.substring(0,L)+Oz(t.substring(T,P))+e+t.substring(P),[4,this.app.vault.modify(this.file,t)];case 2:return n.sent(),[2]}}))})),{dropEffect:"move",hoverEl:o,hoverClass:"is-active"}}})),n}return M(e,t),e.prototype.getDisplayText=function(){return this.file?Ee("plugins.outline.tab-title",{displayText:t.prototype.getDisplayText.call(this)}):Ee("plugins.outline.name")},e.prototype.getViewType=function(){return Pz},e.prototype.canAcceptExtension=function(t){return!0},e.prototype.load=function(){t.prototype.load.call(this);var e=this.app;this.registerEvent(e.metadataCache.on("changed",this.onFileChanged,this)),this.requestUpdate()},e.prototype.onFileChanged=function(t){t===this.file&&this.requestUpdate()},e.prototype.update=function(){var t=this,e=this.paneEl,n=this.treeView;e.empty(),n.clear();var i=this.getHeadings();if(i){n.renderOutline(i);for(var r=this.app.dragManager,o=function(e){r.handleDrag(e.selfEl,(function(n){return r.updateSource([e.selfEl],"is-being-dragged"),gh(n.dataTransfer,e.heading.heading),{source:"outline",type:"heading",icon:sv,title:e.heading.heading,heading:e.heading,file:t.file}}))},s=0,a=n.allItems;s<a.length;s++){o(a[s])}}else e.createDiv({cls:"pane-empty",text:Ee("plugins.outline.label-no-headings")})},e.prototype.onItemClick=function(t){var e=this;setTimeout((function(){var n=e.leaf;uI.collapseFor(n);var i,r=n.workspace;i=n.group?r.getGroupLeaves(n.group):r.getLeavesOfType(iR);for(var o=t.position.start.line,s=!1,a=0,l=i;a<l.length;a++){var c;(c=l[a])&&c.view instanceof rR&&c.view.file===e.file&&(c.view.setEphemeralState({line:o}),s=!0)}s||(c=r.getLeaf()).openFile(e.file,{eState:{line:o}})}),10)},e.prototype.getHeadings=function(){var t=this.file;if(!t||"md"!==t.extension)return null;var e=this.app.metadataCache.getFileCache(t);if(!e)return null;var n=e.headings;return n&&0!==n.length?n:null},e}(II),Bz=function(){function t(){this.id="page-preview",this.name=Ee("plugins.page-preview.name"),this.description=Ee("plugins.page-preview.desc"),this.defaultOn=!0,this.overrides={}}return t.prototype.init=function(t,e){this.app=t},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return e.registerEvent(t.workspace.on("link-hover",this.onLinkHover,this)),e.registerEvent(t.workspace.on("hover-link",this.onHoverLink,this)),n=this,r=(i=Object).assign,o=[{}],[4,e.loadData()];case 1:return n.overrides=r.apply(i,o.concat([s.sent()])),e.addSettingTab(new Rz(t,e,this)),[2]}}))}))},t.prototype.onHoverLink=function(t){var e=this,n=t.source,i=t.hoverParent,r=t.targetEl,o=t.linktext,s=t.sourcePath,a=void 0===s?"":s,l=t.state;if(!ze(t.event)){var c=!0;if(this.overrides.hasOwnProperty(n)?c=this.overrides[n]:this.app.workspace.hoverLinkSources.hasOwnProperty(n)&&(c=this.app.workspace.hoverLinkSources[n].defaultMod),uF(t.event),c&&!Bb.isModifier(t.event,"Mod")){if(!r)return;var u=!1,h=function(){u=!0,document.removeEventListener("keydown",p),document.removeEventListener("mouseover",d)},p=function(t){u||(document.body.contains(r)?Bb.isModifier(t,"Mod")&&(h(),e.onLinkHover(i,r,o,a,l)):h())},d=function(t){u||r===t.target||r.contains(t.target)||h()};return document.addEventListener("keydown",p),void document.addEventListener("mouseover",d)}this.onLinkHover(i,r,o,a,l)}},t.prototype.onLinkHover=function(t,e,n,i,r){var o=this,s=t.hoverPopover;s&&s.state!==nF.Hidden&&s.targetEl===e||(s=new dF(t,e),setTimeout((function(){return D(o,void 0,void 0,(function(){var t,e;return A(this,(function(o){switch(o.label){case 0:return s.state===nF.Hidden?[2]:(t=s.hoverEl,(e=EB.load({app:this.app,linktext:n,sourcePath:i,containerEl:t,state:r}))?(s.addChild(e),[4,e.loadFile()]):[3,2]);case 1:o.sent(),o.label=2;case 2:return s.state===nF.Shown&&s.position(),[2]}}))}))}),100))},t}(),Rz=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.instance=i,r}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty(),new DA(e).setHeading().setName(Ee("plugins.page-preview.label-require-mod",{key:Fb.Mod}));var n=this.instance.overrides,i=this.app.workspace.hoverLinkSources,r=function(r){var o=i[r],s=n[r];n.hasOwnProperty(r)||(s=o.defaultMod),new DA(e).setName(o.display).addToggle((function(e){return e.setValue(s).onChange((function(e){e===o.defaultMod?delete n[r]:n[r]=e,t.plugin.saveData(n)}))}))};for(var o in i)r(o)},e}(NN),zz="indexFile",Hz="siteName",Vz="logo",qz="noindex",jz="defaultTheme",Uz="showNavigation",_z="showGraph",Wz="showOutline",Gz="showSearch",Kz="googleAnalytics",$z="readableLineLength",Yz="strictLineBreaks",Jz="showHoverPreview",Qz="showBacklinks",Xz="slidingWindowMode",Zz=((Fz={})[zz]="",Fz[Vz]="",Fz[Hz]="",Fz[qz]=!1,Fz[jz]="light",Fz[Uz]=!0,Fz[_z]=!0,Fz[Wz]=!1,Fz[Gz]=!1,Fz[Kz]="",Fz[$z]=!0,Fz[Yz]=!1,Fz[Jz]=!1,Fz[Qz]=!1,Fz[Xz]=!1,Fz),tH=Me("plugins.publish"),eH=function(t){function e(e,n){var i=t.call(this,e)||this;return i.offlineSection=null,i.noAccountSection=null,i.noSubscriptionSection=null,i.manageSitesSection=null,i.siteOptionsSection=null,i.reviewChangesSection=null,i.uploadProgressSection=null,i.editSiteSlugSection=null,i.listPasswordSection=null,i.addPasswordSection=null,i.configureCustomDomainSection=null,i.errorMessageEl=null,i.loaderEl=null,i.currentSection=null,i.plugin=n,i.modalEl.addClass("mod-publish"),i.setTitleText(tH("action-publish-changes")),i.contentEl.createDiv("message-container",(function(t){i.errorMessageEl=t.createDiv("message mod-error"),i.errorMessageEl.hide()})),i.offlineSection=new rH(i),i.loaderEl=i.contentEl.createDiv("loader-cube",(function(t){for(var e=1;e<=9;e++)t.createDiv({cls:"sk-cube sk-cube"+e})})),i.loaderEl.hide(),i.noAccountSection=new oH(i),i.noSubscriptionSection=new sH(i),i.manageSitesSection=new aH(i),i.siteOptionsSection=new lH(i),i.reviewChangesSection=new fH(i),i.uploadProgressSection=new gH(i),i.editSiteSlugSection=new mH(i),i.listPasswordSection=new vH(i),i.addPasswordSection=new yH(i),i.configureCustomDomainSection=new bH(i),i}return M(e,t),e.prototype.handleError=function(t){console.error(t),this.loaderEl.hide(),t instanceof kH?"AUTHFAIL"===t.code?(this.openSection(this.manageSitesSection),this.showError(tH("msg-no-permission-to-publish-to-site"))):"NET"===t.code?this.showError(tH("msg-network-error")+t.message):this.showError(t.message):this.showError(tH("msg-something-went-wrong"))},e.prototype.showError=function(t){this.errorMessageEl.setText(t),this.errorMessageEl.show()},e.prototype.hideError=function(){this.errorMessageEl.hide()},e.prototype.onOpen=function(){return D(this,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:if(t=this.app.account,this.closeSection(),this.loaderEl.show(),t.token)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.getUserInfo()];case 2:return e.sent(),[3,4];case 3:return e.sent(),[2,this.openSection(this.offlineSection)];case 4:if(!t.token)return[2,this.openSection(this.noAccountSection)];e.label=5;case 5:return this.plugin.siteId?[2,this.openReviewChanges()]:[2,this.openSection(this.manageSitesSection)]}}))}))},e.prototype.getCurrentSlug=function(){return D(this,void 0,Promise,(function(){var t;return A(this,(function(e){switch(e.label){case 0:t=this.plugin.siteId,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.plugin.apiGetSlugs([t])];case 2:return[2,e.sent()[t]];case 3:return e.sent(),[2,t];case 4:return[2]}}))}))},e.prototype.onClose=function(){},e.prototype.deleteSite=function(t){return D(this,void 0,void 0,(function(){var e=this;return A(this,(function(n){return this.app.account.deleteSite(t,(function(){return D(e,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return this.plugin.siteId!==t?[3,2]:[4,this.plugin.setup(null,null)];case 1:e.sent(),e.label=2;case 2:return[4,this.openSection(this.manageSitesSection)];case 3:return e.sent(),[2]}}))}))})),[2]}))}))},e.prototype.openReviewChanges=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.openSection(this.reviewChangesSection)];case 1:return t.sent(),[2]}}))}))},e.prototype.editSlug=function(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return this.editSiteSlugSection.setSiteInfo(t),this.editSiteSlugSection.setExistingSlug(e),[4,this.openSection(this.editSiteSlugSection)];case 1:return n.sent(),[2]}}))}))},e.prototype.uploadChanges=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){return this.uploadProgressSection.addChanges(t),this.openSection(this.uploadProgressSection),[2]}))}))},e.prototype.showPasswords=function(){return D(this,void 0,void 0,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:t=this.listPasswordSection,i.label=1;case 1:return i.trys.push([1,4,,5]),this.currentSection.hide(),this.loaderEl.show(),[4,this.plugin.apiGetPassword()];case 2:return e=i.sent().pass,t.setPasswords(e),t.updateDisplay(),[4,this.openSection(t)];case 3:return i.sent(),[3,5];case 4:return n=i.sent(),this.handleError(n),[2];case 5:return[2]}}))}))},e.prototype.openAddPassword=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.openSection(this.addPasswordSection)];case 1:return t.sent(),[2]}}))}))},e.prototype.setTitleText=function(t){this.titleEl.setText(t)},e.prototype.closeSection=function(){this.errorMessageEl.hide(),this.currentSection&&this.currentSection.hide(),this.currentSection=null},e.prototype.openSection=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return this.closeSection(),t.title&&this.setTitleText(t.title),this.loaderEl.show(),[4,t.show()];case 1:return e.sent(),this.loaderEl.hide(),this.currentSection=t,[2]}}))}))},e}(KD),nH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.selectSuggestion=function(t){var e=this.textInputEl;e.value=t.path,e.trigger("input"),this.close()},e.prototype.getSuggestions=function(e){var n=t.prototype.getSuggestions.call(this,e);return n=n.filter((function(t){return Vt.contains(t.extension)}))},e}(PR),iH=function(){function t(t){this.title=null,this.el=null,this.parentModal=null,this.parentModal=t,this.el=t.contentEl.createDiv(),this.hide()}return t.prototype.show=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){return this.el.show(),[2]}))}))},t.prototype.hide=function(){this.el.hide()},t}(),rH=function(t){function e(e){var n=t.call(this,e)||this;return n.el.createEl("p",{text:tH("label-no-internet-access")}),n}return M(e,t),e}(iH),oH=function(t){function e(e){var n=t.call(this,e)||this;return n.el.createEl("p",{text:tH("label-publish-service-description")}),n.el.createEl("p",{text:tH("label-please-login")}),n.el.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:Ee("setting.account.link-sign-up-now")},(function(t){t.addEventListener("click",(function(){window.open("http://obsidian.md/account","_blank")}))})),t.createEl("button",{text:Ee("setting.account.button-login")},(function(t){t.addEventListener("click",(function(){var t=n.parentModal.app;n.parentModal.close(),t.setting.openTabById("account"),t.setting.open()}))}))})),n}return M(e,t),e}(iH),sH=function(t){function e(e){var n=t.call(this,e)||this;return n.el.createEl("p",{text:tH("label-no-publish-subscription")}),n.el.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:tH("button-purchase")},(function(t){t.addEventListener("click",(function(){window.open("http://obsidian.md/pricing","_blank")}))}))})),n}return M(e,t),e}(iH),aH=function(t){function e(e){var n=t.call(this,e)||this;return n.title=tH("label-manage-sites"),n.slugInputEl=null,n}return M(e,t),e.prototype.show=function(){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b=this;return A(this,(function(w){switch(w.label){case 0:e=this.parentModal,n=this.el,i=e.plugin,r=e.app,o=r.account,n.empty(),w.label=1;case 1:return w.trys.push([1,3,,4]),[4,o.getSites()];case 2:return s=w.sent(),[3,4];case 3:return a=w.sent(),e.handleError(a),[2];case 4:return l=s.sites,0!==(c=s.limit)?[3,6]:[4,e.openSection(e.noSubscriptionSection)];case 5:return w.sent(),[2];case 6:0===l.length&&n.createDiv("site-empty-state u-center-text",(function(t){t.createEl("p",{text:tH("label-no-sites")})})),u=n.createDiv(),h=l.map((function(t){return t.id})),p={},w.label=7;case 7:return w.trys.push([7,9,,10]),[4,i.apiGetSlugs(h)];case 8:return p=w.sent(),[3,10];case 9:return d=w.sent(),console.error(d),[3,10];case 10:for(f=function(t){u.createDiv("site-list-item list-item",(function(n){var o=p[t.id]||t.id;n.createDiv({cls:"list-item-part mod-extended",text:o}),n.createEl("button",{text:tH("button-choose")},(function(n){n.addEventListener("click",(function(){return D(b,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,i.setup(t.id,t.host)];case 1:return n.sent(),[4,e.openReviewChanges()];case 2:return n.sent(),[2]}}))}))}))})),n.createDiv({cls:"clickable-icon"},(function(e){Ty(e,$g),$e(e,tH("tooltip-edit-site-id")),e.addEventListener("click",(function(){b.parentModal.editSlug(t,p[t.id]||"")}))})),n.createDiv("clickable-icon",(function(e){Ty(e,Am),$e(e,tH("tooltip-delete-site")),e.addEventListener("click",(function(){var e=document.createDocumentFragment();e.createEl("p",{text:tH("label-delete-site-confirmation")}),e.createEl("p",{cls:"setting-message mod-warning",text:tH("label-delete-site-details")}),new $D(r).setTitle(tH("label-confirm-delete-site",{site:o})).setContent(e).addButton("mod-warning",Ee("dialogue.button-delete"),(function(){b.parentModal.deleteSite(t.id)})).addCancelButton().open()}))}))}))},g=0,m=l;g<m.length;g++)v=m[g],f(v);return l.length<c?(new DA(this.el).setName(tH("option-site-id")).setDesc(tH("option-site-id-description")).addText((function(t){t.setPlaceholder(tH("option-site-id-placeholder")),t.inputEl.addEventListener("keydown",(function(t){t.isComposing||"Enter"!==t.key||b.createSite()})),b.slugInputEl=t.inputEl})).setClass("site-list-site-id-setting"),this.el.createDiv("u-center-text",(function(t){t.createEl("button",{text:tH("button-create"),cls:"mod-cta"},(function(t){t.addEventListener("click",b.createSite.bind(b))}))}))):(y=Ee("nouns.site-with-count",{count:c}),new DA(n).setName(tH("label-site-usage",{site:l.length.toString(),limit:y})).addButton((function(t){return t.setButtonText(tH("button-add-more-sites")).setCta().onClick((function(){window.open("http://obsidian.md/account","_blank")}))}))),t.prototype.show.call(this),[2]}}))}))},e.prototype.createSite=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a=this;return A(this,(function(l){switch(l.label){case 0:if(e=(t=this).parentModal,n=t.slugInputEl,i=e.app.account,r=e.plugin,e.hideError(),o=n.value.toLowerCase(),!/^[a-z0-9\-]+$/.test(o))return e.showError(tH("msg-invalid-site-id")),[2];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,r.apiCheckSlug(o)];case 2:return l.sent(),e.showError(tH("msg-site-id-in-use")),[3,4];case 3:return(s=l.sent())instanceof kH&&"NOTFOUND"===s.code?i.createSite((function(t){return D(a,void 0,void 0,(function(){var n;return A(this,(function(i){switch(i.label){case 0:if(!t.id)return[3,7];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.apiSetSlug(t.id,t.host,o)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),this.parentModal.handleError(n),[2];case 4:return[4,r.setup(t.id,t.host)];case 5:return i.sent(),[4,e.openReviewChanges()];case 6:return i.sent(),[3,8];case 7:this.parentModal.showError(tH("msg-create-site-issue")),i.label=8;case 8:return[2]}}))}))})):e.handleError(s),[3,4];case 4:return[2]}}))}))},e}(iH),lH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=tH("label-site-options"),e}return M(e,t),e.prototype.show=function(){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a=this;return A(this,(function(l){switch(l.label){case 0:e=this.parentModal.plugin,this.el.empty(),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.apiOptions()];case 2:return n=l.sent(),[3,4];case 3:return i=l.sent(),this.parentModal.handleError(i),[2];case 4:return r={},o=function(t){return n.hasOwnProperty(t)?n[t]:Zz[t]},s=this.el.createDiv("publish-site-settings-container"),new DA(s).setName(tH("option-site-metadata")).setHeading(),new DA(s).setName(tH("option-site-name")).setDesc(tH("option-site-name-description")).addText((function(t){return t.setPlaceholder(tH("option-site-name-placeholder")).setValue(o(Hz)).onChange((function(t){return r[Hz]=t}))})),new DA(s).setName(tH("option-home-page-file")).setDesc(tH("option-home-page-file-description")).addText((function(t){t.setPlaceholder(tH("option-home-page-file-placeholder")).setValue(o(zz)).onChange((function(t){return r[zz]=t})),new OR(a.parentModal.app,t.inputEl)})),new DA(s).setName(tH("option-logo")).setDesc(tH("option-logo-description")).addText((function(t){t.setPlaceholder(tH("option-logo-placeholder")).setValue(o(Vz)).onChange((function(t){return r[Vz]=t})),new nH(a.parentModal.app,t.inputEl)})),new DA(s).setName(tH("option-custom-domain")).setDesc(tH("option-custom-domain-desc")).addButton((function(t){return t.setButtonText(tH("button-configure")).onClick((function(){return D(a,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return[4,(t=this.parentModal).openSection(t.configureCustomDomainSection)];case 1:return e.sent(),[2]}}))}))}))})),new DA(s).setName(tH("option-noindex")).setDesc(tH("option-noindex-desc")).addToggle((function(t){return t.setValue(o(qz)).onChange((function(t){return r[qz]=t}))})),new DA(s).setName(tH("option-site-appearance")).setHeading(),new DA(s).setName(tH("option-theme")).setDesc(tH("option-theme-description")).addDropdown((function(t){return t.addOption("light",Ee("setting.appearance.light-theme")).addOption("dark",Ee("setting.appearance.dark-theme")).setValue(o(jz)).onChange((function(t){return r[jz]=t}))})),new DA(s).setName(tH("option-site-reading-experience")).setHeading(),new DA(s).setName(tH("option-hover-preview-file")).setDesc(tH("option-hover-preview-file-description")).addToggle((function(t){return t.setValue(o(Jz)).onChange((function(t){return r[Jz]=t}))})),new DA(s).setName(tH("option-readable-line-length")).setDesc(tH("option-readable-line-length-description")).addToggle((function(t){return t.setValue(o($z)).onChange((function(t){return r[$z]=t}))})),new DA(s).setName(Ee("setting.editor.option-strict-line-break")).setDesc(Ee("setting.editor.option-strict-line-break-description")).addToggle((function(t){return t.setValue(o(Yz)).onChange((function(t){return r[Yz]=t}))})),new DA(s).setName(tH("option-sliding-window-mode")).setDesc(tH("option-sliding-window-mode-description")).addToggle((function(t){return t.setValue(o(Xz)).onChange((function(t){return r[Xz]=t}))})),new DA(s).setName(tH("option-site-components")).setHeading(),new DA(s).setName(tH("option-show-navigation")).setDesc(tH("option-show-navigation-description")).addToggle((function(t){return t.setValue(o(Uz)).onChange((function(t){r[Uz]=t}))})),new DA(s).setName(tH("option-show-search")).setDesc(tH("option-show-search-description")).addToggle((function(t){return t.setValue(o(Gz)).onChange((function(t){return r[Gz]=t}))})),new DA(s).setName(tH("option-show-graph")).setDesc(tH("option-show-graph-description")).addToggle((function(t){return t.setValue(o(_z)).onChange((function(t){return r[_z]=t}))})),new DA(s).setName(tH("option-show-outline")).setDesc(tH("option-show-outline-description")).addToggle((function(t){return t.setValue(o(Wz)).onChange((function(t){return r[Wz]=t}))})),new DA(s).setName(tH("option-show-backlinks")).setDesc(tH("option-show-backlinks-description")).addToggle((function(t){return t.setValue(o(Qz)).onChange((function(t){return r[Qz]=t}))})),new DA(s).setName(tH("option-site-misc")).setHeading(),new DA(s).setName(tH("option-site-password")).setDesc(tH("option-site-password-description")).addButton((function(t){return t.setButtonText(tH("button-manage-passwords")).onClick((function(){return D(a,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.parentModal.showPasswords()];case 1:return t.sent(),[2]}}))}))}))})),new DA(s).setName(tH("option-google-analytics")).setDesc(tH("option-google-analytics-description")).addSearch((function(t){return t.setPlaceholder("UA-XXXXX-Y").setValue(o(Kz)).onChange((function(t){return r[Kz]=t})).inputEl.style.width="150px"})),this.el.createDiv("button-container u-center-text",(function(t){t.createEl("button",{text:tH("button-save-site-settings"),cls:"mod-cta"},(function(t){t.addEventListener("click",(function(){return D(a,void 0,void 0,(function(){var t;return A(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.apiOptions(r)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),this.parentModal.handleError(t),[2];case 3:return new jb(tH("msg-updated-options")),[4,this.parentModal.openReviewChanges()];case 4:return n.sent(),[2]}}))}))}))})),t.createEl("button",{text:tH("button-go-back")},(function(t){t.addEventListener("click",(function(){return D(a,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.parentModal.openReviewChanges()];case 1:return t.sent(),[2]}}))}))}))}))})),t.prototype.show.call(this),[2]}}))}))},e}(iH),cH=function(t){function e(e){var n=t.call(this)||this;return n.visible=!0,n.section=e,n.innerEl.addClass("file-tree-item"),n}return M(e,t),e.prototype.setChecked=function(t){},e.prototype.setVisible=function(t){this.visible=t,this.el.toggle(t)},e.prototype.applyQuery=function(t){},e.prototype.updateCheckedRecursive=function(){for(var t=this.parent;t;)t.updateChecked(),t=t.parent;this.section.updateChecked()},e}(Lz),uH=function(t,e){var n=t instanceof pH,i=e instanceof pH;if(n||i){if(n&&!i)return-1;if(i&&!n)return 1}return DN(t.name,e.name)},hH=function(t){function e(e,n){var i=t.call(this,e)||this;i.diff=n,i.path=n.path;var r=Kt(n.path);"md"===Xt(r)&&(r=Jt(r)),i.name=r;var o=i,s=o.selfEl,a=o.innerEl;return s.addClass("mod-file","mod-"+n.type),(i.checkboxEl=a.createEl("input",{cls:"file-tree-item-checkbox",type:"checkbox"})).addEventListener("change",i.updateChecked.bind(i)),Ty(a.createDiv("file-tree-item-icon"),Gg,20),a.createDiv({cls:"file-tree-item-title",text:r}),i.updateChecked(),a.createDiv("tree-item-flair-outer").createSpan({cls:"tree-item-flair",text:"to-delete"===n.type?"To delete":n.type}),i}return M(e,t),e.prototype.onSelfClick=function(t){this.setChecked(!this.diff.checked),this.updateCheckedRecursive()},e.prototype.setChecked=function(t){this.diff.checked!==t&&(this.diff.checked=t,this.updateChecked())},e.prototype.updateChecked=function(){var t=this.diff.checked;this.checkboxEl.checked=t,this.selfEl.toggleClass("is-selected",t)},e.prototype.applyQuery=function(t){this.setVisible(this.diff.checked||this.path.toLowerCase().contains(t))},e.prototype.render=function(){t.prototype.render.call(this),this.setCollapsible(!1),this.setClickable(!0)},e}(cH),pH=function(t){function e(e,n){var i=t.call(this,e)||this;i.children=[],i.path=n,i.name=Kt(n);var r=i.innerEl;return i.selfEl.addClass("mod-folder"),(i.checkboxEl=r.createEl("input",{cls:"file-tree-item-checkbox",type:"checkbox"})).addEventListener("change",i.updateChecked.bind(i)),Ty(r.createDiv("file-tree-item-icon"),Kg,20),r.createDiv({cls:"file-tree-item-title",text:i.name}),i}return M(e,t),e.prototype.getChecked=function(){for(var t=0,n=0,i=0,r=this.children;i<r.length;i++){var o=r[i];if(o instanceof hH)t++,o.diff.checked&&n++;else if(o instanceof e){var s=o.getChecked();t+=s.count,n+=s.checked}}return{count:t,checked:n}},e.prototype.onSelfClick=function(t){var e=this.getChecked(),n=e.count,i=e.checked;if(0!==n){for(var r=i<n,o=0,s=this.children;o<s.length;o++){s[o].setChecked(r)}this.updateChecked(),this.updateCheckedRecursive()}},e.prototype.setChecked=function(t){for(var e=0,n=this.children;e<n.length;e++){n[e].setChecked(t)}this.updateChecked()},e.prototype.updateChecked=function(){var t=this.getChecked(),e=t.count,n=t.checked,i=this.checkboxEl,r=e>0&&n===e;i.checked=r,i.indeterminate=!r&&n>0,this.selfEl.toggleClass("is-selected",r)},e.prototype.applyQuery=function(t){for(var e=!1,n=0,i=this.children;n<i.length;n++){var r=i[n];r.applyQuery(t),e=e||r.visible}this.setVisible(e)},e.prototype.render=function(){this.children.sort(uH),t.prototype.render.call(this),this.setCollapsible(!0),this.setClickable(!0)},e}(cH),dH=function(t){function e(e,n){var i=t.call(this,e)||this;i.children=[],i.collapsed=!1,i.folders={},i.files={};var r=e.createDiv("file-tree publish-section"),o=r.createDiv("publish-section-header");return i.childrenEl=r.createDiv("publish-change-list"),i.sectionEl=r,i.headerEl=o,o.createDiv("publish-section-header-toggle-collapsed-button collapse-icon",(function(t){Ty(t,Wg,8),t.addEventListener("click",(function(){return i.toggleCollapsed(!0)}))})),o.createDiv({cls:"publish-section-header-text",text:n},(function(t){t.addEventListener("click",(function(){return i.toggleCollapsed(!0)}))})),i.selectedEl=o.createDiv("publish-section-header-selected",(function(t){i.selectedCountEl=t.createSpan({cls:"publish-section-header-selected-count",text:"0"}),t.createSpan({text:tH("label-file-selected")})})),o.createDiv({cls:"publish-section-header-action button",text:tH("button-select-all-files")}).addEventListener("click",i.checkAll.bind(i)),o.createDiv({cls:"publish-section-header-action",text:tH("button-deselect-all-files")}).addEventListener("click",i.uncheckAll.bind(i)),i}return M(e,t),e.prototype.toggleCollapsed=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.setCollapsed(!this.collapsed,t)];case 1:return e.sent(),[2]}}))}))},e.prototype.setCollapsed=function(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return this.collapsed===t?[2]:(this.collapsed=t,this.sectionEl.toggleClass("is-collapsed",t),[4,Sb(this.childrenEl,t,e)]);case 1:return n.sent(),[2]}}))}))},e.prototype.checkAll=function(){for(var t=0,e=this.children;t<e.length;t++){e[t].setChecked(!0)}this.updateChecked()},e.prototype.uncheckAll=function(){for(var t=0,e=this.children;t<e.length;t++){e[t].setChecked(!1)}this.updateChecked()},e.prototype.updateChecked=function(){var t=this,e=t.files,n=t.selectedEl,i=t.selectedCountEl,r=0;for(var o in e)e.hasOwnProperty(o)&&e[o].diff.checked&&r++;i.setText(String(r)),n.toggleClass("u-pop",r>0)},e.prototype.addChild=function(t){var e=$t(t.path);if(e){var n=this.folders,i=n[e];i||(i=n[e]=new pH(this,e),this.addChild(i)),i.children.push(t),t.parent=i}else this.addRoot(t)},e.prototype.createItem=function(t){var e=new hH(this,t);this.files[t.path]=e,this.addChild(e)},e.prototype.render=function(){t.prototype.render.call(this),this.updateChecked()},e.prototype.applyQuery=function(t){for(var e=0,n=this.children;e<n.length;e++){n[e].applyQuery(t)}},e.prototype.clear=function(){t.prototype.clear.call(this),this.folders={},this.files={},this.updateChecked()},e}(Dz),fH=function(t){function e(e){var n=t.call(this,e)||this;n.title=tH("action-publish-changes"),n.noChangesEl=null,n.pathToDiffMap={},n.currentlyPublishedToSiteNameEl=null,n.filterComponent=null,n.app=e.app,n.el.createDiv({cls:"publish-changes-info"},(function(t){t.createDiv({cls:"publish-changes-info-publishing-to",text:tH("label-publishing-to")}),(n.currentlyPublishedToSiteNameEl=t.createEl("a","publish-changes-current-site-name")).setAttribute("target","_blank"),t.createDiv("publish-changes-switch-site",(function(t){t.createSpan("clickable-icon",(function(t){Ty(t,Gm),$e(t,tH("tooltip-switch-site")),t.addEventListener("click",(function(){return D(n,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return[4,(t=this.parentModal).openSection(t.manageSitesSection)];case 1:return e.sent(),[2]}}))}))}))})),t.createSpan("clickable-icon",(function(t){Ty(t,nm),$e(t,tH("tooltip-open-site-options")),t.addEventListener("click",(function(){var t=n.parentModal;t.openSection(t.siteOptionsSection)}))}))})),n.filterComponent=new BA(t).setPlaceholder(Ee("setting.hotkeys.prompt-filter")),t.createEl("button",{cls:"publish-changes-add-linked-btn",text:tH("button-add-linked")},(function(t){$e(t,tH("tooltip-add-linked")),t.addEventListener("click",(function(){return D(n,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p;return A(this,(function(d){for(u in t=this.app.metadataCache,n=(e=this).pathToDiffMap,i=e.untrackedFiles,r=[],n)n.hasOwnProperty(u)&&(h=n[u]).checked&&"deleted"!==h.type&&r.push(u);for(o=new Set,s=function(e){eA(t.getCache(e),(function(n){var i=t.getFirstLinkpathDest(n.link,e);i&&o.add(i.path)}))},a=0,l=r;a<l.length;a++)u=l[a],s(u);for(u in c=0,n)n.hasOwnProperty(u)&&o.has(u)&&((h=n[u]).checked||"new"!==h.type||(p=i.files[u])&&(p.setChecked(!0),p.updateCheckedRecursive(),c+=1));return new jb(tH("msg-added-linked-files",{count:c})),[2]}))}))}))}))})),n.noChangesEl=n.el.createEl("p",{text:tH("label-no-changes-detected")});var i=n.el.createDiv("publish-sections-container");n.trackedChangedFiles=new dH(i,tH("label-changed-files-to-be-published")),n.trackedUnchangedFiles=new dH(i,tH("label-unchanged-files-already-published")),n.untrackedFiles=new dH(i,tH("label-new-files-to-be-published"));var r=n.el.createDiv("modal-button-container");return r.createEl("button",{cls:"mod-cta",text:tH("button-publish")},(function(t){t.addEventListener("click",n.uploadChanges.bind(n))})),r.createEl("button",{text:Ee("dialogue.button-cancel")},(function(t){t.addEventListener("click",n.parentModal.close.bind(n.parentModal))})),n}return M(e,t),e.prototype.setCurrentSiteName=function(t){this.currentlyPublishedToSiteNameEl.setText(t),this.currentlyPublishedToSiteNameEl.setAttribute("href",wH+"/"+t)},e.prototype.show=function(){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f=this;return A(this,(function(g){switch(g.label){case 0:e=this.parentModal,this.pathToDiffMap={},e.getCurrentSlug().then((function(t){return f.setCurrentSiteName(t)})),n=[],g.label=1;case 1:return g.trys.push([1,3,,4]),[4,e.plugin.scanForChanges()];case 2:return n=g.sent(),this.noChangesEl.toggle(0===n.length),[3,4];case 3:return i=g.sent(),e.handleError(i),[2];case 4:for(o=(r=this).trackedChangedFiles,s=r.trackedUnchangedFiles,a=r.untrackedFiles,o.clear(),s.clear(),a.clear(),l=0,c=n;l<c.length;l++)u=c[l],this.pathToDiffMap[u.path]=u,"changed"===(h=u.type)||"deleted"===h?o.createItem(u):"new"===h?a.createItem(u):"to-delete"===h&&s.createItem(u);if(o.render(),s.render(),a.render(),this.filterComponent.onChange((function(t){t=t.trim().toLowerCase(),o.applyQuery(t),s.applyQuery(t),a.applyQuery(t)})),o.children.length>0){for(d in s.setCollapsed(!0,!1),a.setCollapsed(!0,!1),o.files)o.files.hasOwnProperty(d)&&"deleted"!==(p=o.files[d]).diff.type&&p.setChecked(!0);for(d in o.folders)o.folders.hasOwnProperty(d)&&o.folders[d].updateChecked()}return[2,t.prototype.show.call(this)]}}))}))},e.prototype.uploadChanges=function(){return D(this,void 0,void 0,(function(){var t,e,n,i;return A(this,(function(r){switch(r.label){case 0:for(n in t=this.pathToDiffMap,e=[],t)t.hasOwnProperty(n)&&(i=t[n]).checked&&e.push(i);return 0===e.length?(new jb(tH("msg-select-at-least-one-file")),[2]):[4,this.parentModal.uploadChanges(e)];case 1:return r.sent(),[2]}}))}))},e}(iH),gH=function(t){function e(e){var n=t.call(this,e)||this;return n.title=tH("label-upload-changes"),n.changesContainer=null,n.doneButton=null,n.successMessageEl=null,n.siteLinkEl=null,n.runnable=null,n.changes=[],n.pathToEl={},n.changesContainer=n.el.createDiv("list-item-parent upload-progress-container"),n.successMessageEl=n.el.createDiv({},(function(t){t.createEl("p",{text:tH("label-clear-cache")}),t.createEl("p",{text:tH("label-visit-site")},(function(t){return D(n,void 0,void 0,(function(){return A(this,(function(e){return this.siteLinkEl=t.createEl("a"),this.siteLinkEl.setAttribute("target","_blank"),[2]}))}))}))})),n.successMessageEl.hide(),n.el.createDiv("modal-button-container",(function(t){n.doneButton=t.createEl("button",{cls:"mod-cta",text:tH("button-done")},(function(t){t.addEventListener("click",(function(){n.runnable?(n.runnable.cancel(),n.runnable=null):n.parentModal.close()}))})),t.createEl("button",{text:tH("button-go-back")},(function(t){t.addEventListener("click",(function(){n.runnable&&n.runnable.cancel(),n.parentModal.openReviewChanges()}))}))})),n}return M(e,t),e.prototype.addChanges=function(t){this.changes=t},e.prototype.show=function(){return D(this,void 0,void 0,(function(){var e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return this.runnable&&this.runnable.cancel(),[4,t.prototype.show.call(this)];case 1:for(s.sent(),this.successMessageEl.hide(),this.changesContainer.removeClass("is-finished"),this.doneButton.addClass("mod-warning"),this.doneButton.setText(tH("button-stop")),this.changesContainer.empty(),this.pathToEl={},e=function(t){n.pathToEl[t.path]=n.changesContainer.createDiv("publish-upload-item list-item",(function(e){e.createDiv("list-item-part",(function(t){Ty(t,Gg)})),e.createDiv({cls:"list-item-part mod-extended publish-upload-item-title",text:Qt(t.path)}),e.createDiv("list-item-part",(function(e){var n=e.createSpan("flair");"new"===t.type||"changed"===t.type?n.setText(tH("label-status-to-publish")):"deleted"===t.type&&n.setText(tH("label-status-to-delete"))}))}))},n=this,i=0,r=this.changes;i<r.length;i++)o=r[i],e(o);return this.startUpload(),[2]}}))}))},e.prototype.startUpload=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h=this;return A(this,(function(p){switch(p.label){case 0:t=this.parentModal,e=t.app,n=t.plugin,(i=this.runnable=new Dh({onStop:function(){return D(h,void 0,void 0,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return this.doneButton.removeClass("mod-warning"),this.doneButton.setText(tH("button-done")),e=wH+"/",[4,this.parentModal.getCurrentSlug()];case 1:return t=e+n.sent(),this.siteLinkEl.setText(t),this.siteLinkEl.setAttribute("href",t),this.successMessageEl.show(),this.changesContainer.addClass("is-finished"),this.runnable===i&&(this.runnable=null),[2]}}))}))}})).start(),r=0,o=this.changes,p.label=1;case 1:if(!(r<o.length))return[3,10];if(s=o[r],a=this.pathToEl[s.path],l=a.find(".flair"),i.isCancelled())return l.setText(tH("label-status-cancelled")),a.addClass("mod-failed","mod-completed"),[3,9];p.label=2;case 2:return p.trys.push([2,7,,8]),l.setText(tH("label-status-uploading")),"deleted"!==s.type&&"to-delete"!==s.type?[3,4]:[4,n.apiRemoveFile(s.path)];case 3:return p.sent(),l.setText(tH("label-status-deleted")),[3,6];case 4:return(c=e.vault.getAbstractFileByPath(s.path))&&c instanceof cb?[4,n.apiUploadFile(c)]:[3,6];case 5:p.sent(),l.setText(tH("label-status-published")),p.label=6;case 6:return a.scrollIntoView({behavior:"smooth",block:"center"}),[3,8];case 7:return u=p.sent(),this.parentModal.handleError(u),l.setText(tH("label-status-failed")),a.addClass("mod-failed"),[3,8];case 8:a.addClass("mod-completed"),p.label=9;case 9:return r++,[3,1];case 10:return i.stop(),[2]}}))}))},e}(iH),mH=function(t){function e(e){var n=t.call(this,e)||this;return n.title=tH("tooltip-edit-site-id"),n.newSlug=null,n.site=null,n.slugInputEl=null,new DA(n.el).setName(tH("option-site-id")).setDesc(tH("option-site-id-description")).addText((function(t){t.setPlaceholder(tH("option-site-id-placeholder")).onChange((function(t){return n.newSlug=t.toLowerCase()})),n.slugInputEl=t.inputEl})).setClass("site-list-site-id-setting"),n.el.createEl("p","button-container u-center-text",(function(t){t.createEl("button",{cls:"mod-cta",text:tH("button-change")},(function(t){return D(n,void 0,void 0,(function(){var n=this;return A(this,(function(i){return t.addEventListener("click",(function(){return D(n,void 0,void 0,(function(){var t,n;return A(this,(function(i){switch(i.label){case 0:t=e.plugin,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.apiSetSlug(this.site.id,this.site.host,this.newSlug)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),e.handleError(n),[2];case 4:return[4,e.openSection(e.siteOptionsSection)];case 5:return i.sent(),[2]}}))}))})),[2]}))}))})),t.createEl("button",{text:Ee("dialogue.button-cancel")},(function(t){return D(n,void 0,void 0,(function(){var n=this;return A(this,(function(i){return t.addEventListener("click",(function(){return D(n,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,e.openSection(e.manageSitesSection)];case 1:return t.sent(),[2]}}))}))})),[2]}))}))}))})),n}return M(e,t),e.prototype.setSiteInfo=function(t){this.site=t},e.prototype.setExistingSlug=function(t){this.slugInputEl.value=t},e}(iH),vH=function(t){function e(e){var n=t.call(this,e)||this;return n.title=tH("label-manage-passwords"),n.passwords=null,n.updateDisplay(),n}return M(e,t),e.prototype.setPasswords=function(t){this.passwords=t},e.prototype.updateDisplay=function(){var t=this,e=this.el;if(e.empty(),null===this.passwords)e.createEl("p",{cls:"u-muted",text:tH("label-no-password")});else{var n=0;e.createEl("p",{cls:"u-muted",text:tH("label-have-password")}),e.createEl("hr");for(var i=e.createDiv("passwords-container"),r=function(e){i.createDiv("list-item password-item",(function(i){i.createDiv({cls:"list-item-part",text:e.name||tH("label-untitled-password")}),i.createDiv({cls:"u-muted u-small list-item-part mod-extended",text:tH("label-password-created-time",{time:window.moment(e.ts).fromNow()})}),i.createDiv("list-item-part clickable-icon",(function(e){Ty(e,Am),$e(e,Ee("dialogue.button-delete"));var i=n;e.addEventListener("click",(function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.parentModal.plugin.apiDelPassword(i)];case 1:return t.sent(),[4,this.parentModal.showPasswords()];case 2:return t.sent(),[2]}}))}))})),n+=1}))}))},o=0,s=this.passwords;o<s.length;o++){r(s[o])}}e.createDiv("button-container u-center-text",(function(e){e.createEl("button",{cls:"mod-cta",text:tH("action-new-password")},(function(e){e.addEventListener("click",(function(){t.parentModal.openAddPassword()}))})),e.createEl("button",{text:tH("button-go-back")},(function(e){e.addEventListener("click",(function(){var e=t.parentModal;e.openSection(e.siteOptionsSection)}))}))}))},e}(iH),yH=function(t){function e(e){var n=t.call(this,e)||this;return n.title=tH("label-add-password"),n.passwordFieldEl=null,n.nicknameFieldEl=null,new DA(n.el).setName(tH("option-password-name")).setDesc(tH("option-password-desc")).addText((function(t){return t.setPlaceholder(tH("option-password-placeholder")).then((function(t){t.inputEl.setAttribute("type","password"),n.passwordFieldEl=t.inputEl}))})),new DA(n.el).setName(tH("option-nickname-name")).setDesc(tH("option-nickname-desc")).addText((function(t){return n.nicknameFieldEl=t.inputEl})),n.el.createDiv("button-container u-center-text",(function(t){t.createEl("button",{text:tH("action-add-password"),cls:"mod-cta"},(function(t){t.addEventListener("click",(function(){return D(n,void 0,void 0,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=this.passwordFieldEl.value,e=this.nicknameFieldEl.value,[4,this.parentModal.plugin.apiAddPassword(e,t)];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),this.parentModal.handleError(n),[2];case 3:return new jb(tH("msg-added-new-password")),[4,this.parentModal.showPasswords()];case 4:return i.sent(),[2]}}))}))}))})),t.createEl("button",{text:tH("button-go-back")},(function(t){t.addEventListener("click",(function(){return D(n,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.parentModal.showPasswords()];case 1:return t.sent(),[2]}}))}))}))}))})),n}return M(e,t),e.prototype.show=function(){return D(this,void 0,void 0,(function(){return A(this,(function(e){return this.passwordFieldEl.value="",this.nicknameFieldEl.value="",t.prototype.show.call(this),[2]}))}))},e}(iH),bH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=tH("label-configure-custom-domain"),e}return M(e,t),e.prototype.show=function(){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s=this;return A(this,(function(a){switch(a.label){case 0:return(e=this.el).empty(),[4,t.prototype.show.call(this)];case 1:return a.sent(),[4,this.parentModal.plugin.apiCustomUrl()];case 2:return n=a.sent(),new DA(e).setName(tH("option-custom-url-name")).setDesc(tH("option-custom-url-desc")).addText((function(t){return i=t.setPlaceholder(tH("option-custom-url-placeholder")).setValue(n.url||"")})),new DA(e).setName(tH("option-custom-url-redirect")).setDesc(tH("option-custom-url-redirect-desc")).addToggle((function(t){return r=t.setValue(n.redirect)})),o=tH("label-custom-domain-instructions",{link:'<a href="https://help.obsidian.md/Licenses+%26+add-on+services/Obsidian+Publish#Custom+domain" target="_blank">'+tH("label-custom-domain-link-name")+"</a>"}),this.el.createEl("p",{cls:"u-muted"},(function(t){t.innerHTML=o})),this.el.createDiv("button-container u-center-text",(function(t){t.createEl("button",{text:tH("button-update-custom-domain"),cls:"mod-cta"},(function(t){t.addEventListener("click",(function(){return D(s,void 0,void 0,(function(){var t,e,n,o;return A(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=i.getValue(),e=r.getValue(),[4,this.parentModal.plugin.apiCustomUrl(t,e)];case 1:return s.sent(),[3,3];case 2:return n=s.sent(),this.parentModal.handleError(n),[2];case 3:return(o=this.parentModal).openSection(o.siteOptionsSection),[2]}}))}))}))})),t.createEl("button",{text:tH("button-go-back")},(function(t){t.addEventListener("click",(function(){return D(s,void 0,void 0,(function(){var t;return A(this,(function(e){return(t=this.parentModal).openSection(t.siteOptionsSection),[2]}))}))}))}))})),[2]}}))}))},e}(iH),wH="https://publish.obsidian.md";pe&&(wH="http://127.0.0.1:3001");var kH=function(t){function e(n,i){var r=t.call(this,i)||this;return r.name="RequestError",r.code=n,Object.setPrototypeOf(r,e.prototype),r}return M(e,t),e}(Error),CH=Me("plugins.publish"),xH=function(){function t(){this.id="publish",this.name=CH("name"),this.description=CH("desc"),this.app=null,this.vault=null,this.plugin=null,this.siteId=null,this.host=null,this.modal=null,this.requestSaveData=De(this.saveData.bind(this),2e3)}return t.prototype.init=function(t,e){this.app=t,this.vault=t.vault,this.plugin=e,e.registerRibbonAction(CH("action-publish-changes"),Vm,this.openPublishChanges.bind(this)),e.registerGlobalCommand({id:"publish:view-changes",name:CH("action-publish-changes"),icon:oy,callback:this.openPublishChanges.bind(this)})},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.loadData()];case 1:return t.sent(),[2]}}))}))},t.prototype.onDisable=function(t,e){this.modal=null},t.prototype.loadData=function(){return D(this,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return[4,this.plugin.loadData()];case 1:if(!(t=e.sent()))return[2];try{this.siteId=t.siteId,this.host=t.host}catch(t){console.error(t)}return[2]}}))}))},t.prototype.saveData=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.plugin.saveData({siteId:this.siteId,host:this.host})];case 1:return t.sent(),[2]}}))}))},t.prototype.setup=function(t,e){return D(this,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return this.siteId=t,this.host=e,[4,this.saveData()];case 1:return n.sent(),[2]}}))}))},t.prototype.getHost=function(){var t=this.host||"127.0.0.1:3002";return t.startsWith("127.0.0.1")||t.startsWith("localhost")?"http://"+t:"https://"+t},t.prototype.scanForChanges=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g;return A(this,(function(m){switch(m.label){case 0:return t=this.vault,e=[],[4,this.apiList()];case 1:n=m.sent(),i={},r=0,o=n,m.label=2;case 2:return r<o.length?(s=o[r],a=s.path,i[a]=s,(l=t.getAbstractFileByPath(a))&&l instanceof cb?!1===(g=this.getPublishFlag(l))?[3,4]:[4,this.getHash(l)]:[3,4]):[3,6];case 3:return m.sent()!==s.hash?e.push({path:a,ctime:s.ctime,mtime:s.mtime,size:s.size,type:"changed",checked:!0===g}):e.push({path:a,ctime:s.ctime,mtime:s.mtime,size:s.size,type:"to-delete",checked:!1}),[3,5];case 4:e.push({path:a,ctime:s.ctime,mtime:s.mtime,size:s.size,type:"deleted",checked:!1}),m.label=5;case 5:return r++,[3,2];case 6:for(c=t.getRoot(),u=[c];u.length;)if((h=u.pop())instanceof ub)for(p=0,d=h.children;p<d.length;p++)f=d[p],u.push(f);else if(h instanceof cb&&(ee(h.extension)||"obsidian.css"===h.name||"publish.css"===h.name||"favicon.ico"===h.name||"publish.js"===h.name)&&!i.hasOwnProperty(h.path)){if(!1===(g=this.getPublishFlag(h)))continue;e.push({path:h.path,ctime:0,mtime:0,size:0,type:"new",checked:!0===g})}return[2,e]}}))}))},t.prototype.apiRequest=function(t){return D(this,void 0,void 0,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,ajaxPromise(t)];case 1:return e=r.sent(),[3,3];case 2:if((n=r.sent())instanceof XMLHttpRequest)throw new kH("NET","Network unavailable.");if(n instanceof Error)throw new kH("NET",n.message);throw new kH("NET","Unknown");case 3:if((i=JSON.parse(e)).code&&i.message)throw new kH(i.code,i.message);return[2,i]}}))}))},t.prototype.apiPostFrontend=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){return e.token=this.app.account.token,[2,this.apiRequest({method:"POST",url:wH+"/"+t,data:e})]}))}))},t.prototype.apiPostBackend=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){return e.id=this.siteId,e.token=this.app.account.token,[2,this.apiRequest({method:"POST",url:this.getHost()+"/"+t,data:e})]}))}))},t.prototype.apiSetSlug=function(t,e,n){return D(this,void 0,Promise,(function(){return A(this,(function(i){return[2,this.apiPostFrontend("api/slug",{id:t,host:e,slug:n})]}))}))},t.prototype.apiGetSlugs=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){return[2,this.apiPostFrontend("api/slugs",{ids:t})]}))}))},t.prototype.apiCheckSlug=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){return[2,this.apiPostFrontend("api/site",{slug:t})]}))}))},t.prototype.apiCustomUrl=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){return[2,this.apiPostFrontend("api/customurl",{id:this.siteId,host:this.host,url:t,redirect:e})]}))}))},t.prototype.apiList=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){return[2,this.apiPostBackend("api/list",{})]}))}))},t.prototype.apiOptions=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){return[2,this.apiPostBackend("api/options",{options:t})]}))}))},t.prototype.apiGetPassword=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){return[2,this.apiPostBackend("api/password",{})]}))}))},t.prototype.apiAddPassword=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){return[2,this.apiPostBackend("api/password",{name:t,pw:e})]}))}))},t.prototype.apiDelPassword=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){return[2,this.apiPostBackend("api/password",{del:t})]}))}))},t.prototype.apiRemoveFile=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){return[2,this.apiPostBackend("api/remove",{path:t})]}))}))},t.prototype.apiUploadFile=function(t){return D(this,void 0,Promise,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:if(t.stat.size>52428800)throw new kH("TOOLARGE","Failed to upload file over limit of 50mb.");return[4,this.getHash(t)];case 1:return e=r.sent(),[4,this.vault.readBinary(t)];case 2:return n=r.sent(),i={"obs-token":this.app.account.token,"obs-id":this.siteId,"obs-path":encodeURIComponent(t.path),"obs-hash":e},[2,this.apiRequest({method:"POST",url:this.getHost()+"/api/upload",headers:i,data:n})]}}))}))},t.prototype.getHash=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){return(e=this.getHashFromMetadataCache(t))?[2,e]:[2,this.computeHash(t)]}))}))},t.prototype.getPublishFlag=function(t){var e=this.app.metadataCache.getFileCache(t);if(!e)return null;var n=Ag(e.frontmatter,"publish");return n&&String.isString(n)&&(n="false"!==(n=n.toLowerCase())&&"no"!==n&&("true"===n||"yes"===n||null)),n},t.prototype.getHashFromMetadataCache=function(t){var e=this.app.metadataCache.getFileInfo(t.path);return e&&e.mtime===t.stat.mtime&&e.size===t.stat.size?e.hash:null},t.prototype.computeHash=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.vault.readBinary(t)];case 1:return[4,X(e.sent())];case 2:return[2,e.sent()]}}))}))},t.prototype.openPublishChanges=function(){this.modal||(this.modal=new eH(this.app,this)),this.modal.open()},t}(),SH=Me("plugins.quick-switcher"),EH=function(){function t(){this.id="switcher",this.name=SH("name"),this.description=SH("desc"),this.defaultOn=!0,this.options={},this.QuickSwitcherModal=MH}return t.prototype.init=function(t,e){this.app=t,e.registerRibbonAction(SH("action-open"),om,this.onOpen.bind(this)),e.registerGlobalCommand({id:"switcher:open",name:SH("action-open"),icon:ey,callback:this.onOpen.bind(this),hotkeys:[GA(["Mod"],"O")]})},t.prototype.onEnable=function(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return e.addSettingTab(new LH(t,e,this)),n=this,[4,e.loadData()];case 1:return n.options=i.sent()||{showExistingOnly:!1,showAttachments:!0,showAllFileTypes:!1},[2]}}))}))},t.prototype.onOpen=function(){new MH(this.app,this.options).open()},t}(),MH=function(t){function e(e,n){var i=t.call(this,e)||this;i.emptyStateText=SH("label-no-note-create-new"),i.shouldShowUnresolved=!n.showExistingOnly,i.shouldShowAttachments=n.showAttachments,i.shouldShowAllTypes=n.showAllFileTypes,i.setPlaceholder(SH("prompt-type-file-name")),i.setInstructions([{command:"↑↓",purpose:SH("instruction-navigate")},{command:"↵",purpose:SH("instruction-open")},{command:dt?"cmd ↵":"ctrl ↵",purpose:SH("instruction-open-in-new-pane")},{command:"shift ↵",purpose:SH("instruction-create")},{command:"esc",purpose:SH("instruction-dismiss")}]);var r=i.scope;return r.register(["Mod"],"Enter",(function(t){return i.chooser.useSelectedItem(t),!1})),r.register(["Shift"],"Enter",(function(t){return i.selectSuggestion(null,t),!1})),r.register(["Mod","Shift"],"Enter",(function(t){return i.selectSuggestion(null,t),!1})),i}return M(e,t),e.prototype.onChooseSuggestion=function(t,e){var n,i=Bb.isModifier(e,"Mod");if(!t){var r=this.inputEl.value,o="",s=this.app.workspace.getActiveViewOfType(Ub);return s&&(o=(null===(n=s.file)||void 0===n?void 0:n.path)||""),void this.app.workspace.openLinkText(r,o,i,{active:!0})}if("file"===t.type||"alias"===t.type)this.app.workspace.getLeaf(i).openFile(t.file,{active:!0});else if("unresolved"===t.type){this.app.workspace.getLeaf(i).openLinkText(t.linktext,"",{active:!0})}},e}(kR),LH=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.instance=i,r}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty();var n=this.instance.options;new DA(e).setName(SH("option-show-existing-only")).setDesc(SH("option-show-existing-only-description")).addToggle((function(e){return e.setValue(n.showExistingOnly).onChange((function(e){n.showExistingOnly=e,t.plugin.saveData(n)}))})),new DA(e).setName(SH("option-show-attachments")).setDesc(SH("option-show-attachments-desc")).addToggle((function(e){return e.setValue(n.showAttachments).onChange((function(e){n.showAttachments=e,t.plugin.saveData(n)}))})),this.app.vault.getConfig("showUnsupportedFiles")&&new DA(e).setName(SH("option-show-all-file-types")).setDesc(SH("option-show-all-file-types-desc")).addToggle((function(e){return e.setValue(n.showAllFileTypes).onChange((function(e){n.showAllFileTypes=e,t.plugin.saveData(n)}))}))},e}(NN),DH=function(){function t(){this.id="random-note",this.name=Ee("plugins.random-note.name"),this.description=Ee("plugins.random-note.desc"),this.app=null,this.pluginInstance=null}return t.prototype.init=function(t,e){this.app=t,this.pluginInstance=e,e.registerRibbonAction(Ee("plugins.random-note.action-open"),Im,this.onRandomNote.bind(this)),e.registerGlobalCommand({id:"random-note",name:Ee("plugins.random-note.action-open"),icon:Qv,callback:this.onRandomNote.bind(this)})},t.prototype.onRandomNote=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r;return A(this,(function(o){switch(o.label){case 0:for(t=[],e=0,n=this.app.vault.getAllLoadedFiles();e<n.length;e++)(i=n[e])instanceof cb&&"md"===i.extension&&t.push(i);return r=t[Math.floor(Math.random()*t.length)],[4,this.app.workspace.getLeaf().openFile(r,{active:!0})];case 1:return o.sent(),[2]}}))}))},t}(),AH=hh("/lib/reveal/reveal.js"),TH=function(){function t(){this.id="slides",this.name=Ee("plugins.slides.name"),this.description=Ee("plugins.slides.desc")}return t.prototype.init=function(t,e){var n=this;this.app=t,e.registerGlobalCommand({id:"slides:start",name:Ee("plugins.slides.action-start"),icon:ry,checkCallback:function(t){var e=n.app.workspace.getActiveFile();if(e&&"md"===e.extension)return t||new PH(n.app).openFile(e),!0}})},t.prototype.onEnable=function(t,e){e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this))},t.prototype.onFileMenu=function(t,e){var n=this;e instanceof cb&&"md"===e.extension&&t.addItem((function(t){return t.setTitle(Ee("plugins.slides.action-start")).setIcon(sm).onClick((function(){return new PH(n.app).openFile(e)}))}))},t}(),PH=function(t){function e(e){var n=t.call(this)||this;return n.containerEl=null,n.revealCssEl=null,n.themeCssEl=null,n.app=e,n.scope=new Nb,n.scope.register([],"Escape",n.close.bind(n)),n}return M(e,t),e.prototype.openFile=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b=this;return A(this,(function(w){switch(w.label){case 0:return this.app.keymap.pushScope(this.scope),[4,this.app.vault.read(t)];case 1:e=w.sent(),w.label=2;case 2:for(w.trys.push([2,6,,7]),this.containerEl&&this.containerEl.detach(),n=AH.promise,i="moonstone"===this.app.vault.getConfig("theme"),r=this.containerEl=document.body.createDiv("slides-container"),(o=this.themeCssEl=document.head.createEl("link",{prepend:!0})).setAttribute("rel","stylesheet"),i?o.setAttribute("href","/lib/reveal/white.css"):o.setAttribute("href","/lib/reveal/black.css"),(s=this.revealCssEl=document.head.createEl("link",{prepend:!0})).setAttribute("rel","stylesheet"),s.setAttribute("href","/lib/reveal/reveal.css"),a=r.createDiv("reveal"),l=a.createDiv("slides"),a.createDiv("slides-close-btn",(function(t){Ty(t,am,30),t.addEventListener("click",b.close.bind(b))})),c=Eg(e),u=Mg(c),h={definitions:Fg(c)},p=c.children,d=[[]],m=0;m<p.length;m++)"thematicBreak"===(f=p[m]).type?d.push([]):d.last().push(f);for(g=function(t){var e=d[t];if(0===e.length)return"continue";c.children=e;var n=Lg(c,h);l.createEl("section",{},(function(t){var e=zg(n);t.appendChild(e)}))},m=0;m<d.length;m++)g(m);return v=[],wB.postProcess(this.app,{docId:Tt(16),sourcePath:t.path,frontmatter:u,promises:v,addChild:function(t){return b.addChild(t)},getSectionInfo:function(){return null},containerEl:l,el:l}),v.length>0?[4,Promise.all(v)]:[3,4];case 3:w.sent(),w.label=4;case 4:return[4,n];case 5:return w.sent(),new Reveal(a,{embedded:!0,keyboardCondition:"focused",controlsTutorial:!1,overview:!1}).initialize(),setTimeout((function(){a.dispatchEvent(new PointerEvent("pointerdown"))}),0),[3,7];case 6:return y=w.sent(),console.error(y),this.close(),[3,7];case 7:return[2]}}))}))},e.prototype.close=function(){this.app.keymap.popScope(this.scope);var t=this,e=t.containerEl,n=t.revealCssEl,i=t.themeCssEl;e&&(e.detach(),this.containerEl=null),n&&(n.detach(),this.revealCssEl=null),i&&(i.detach(),this.themeCssEl=null)},e}(Vg),OH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="starred",e.name=Ee("plugins.starred.name"),e.description=Ee("plugins.starred.desc"),e.app=null,e.plugin=null,e.items=[],e}return M(e,t),e.prototype.init=function(t,e){var n=this;this.app=t,this.plugin=e,e.registerGlobalCommand({id:"starred:open",name:Ee("plugins.starred.action-show"),icon:cy,callback:function(){n.app.workspace.ensureSideLeaf(FH,"left",!1)}}),e.registerGlobalCommand({id:"starred:star-current-file",name:Ee("plugins.starred.action-toggle"),icon:cy,callback:function(){var e=t.workspace.getActiveFile();e&&n.toggleFile(e)}}),e.registerViewType(FH,(function(t){return new IH(t,n)}))},e.prototype.onEnable=function(t,e){return D(this,void 0,Promise,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return e.registerEvent(t.workspace.on("layout-ready",this.initLeaf,this)),e.registerEvent(t.vault.on("rename",this.onRename,this)),e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this)),[4,e.loadData()];case 1:return(n=i.sent())&&n.items&&Array.isArray(n.items)&&(this.items=n.items,this.onItemsChanged(!1)),[2]}}))}))},e.prototype.onUserEnable=function(){this.initLeaf()},e.prototype.initLeaf=function(){this.app.workspace.ensureSideLeaf(FH,"left",!1,!1)},e.prototype.toggleFile=function(t){var e=this.findStarredFile(t);e?this.removeItem(e):this.addStarredFile(t)},e.prototype.onRename=function(t,e){for(var n=!1,i=0,r=this.items;i<r.length;i++){var o=r[i];"file"===o.type&&o.path===e&&(o.path=t.path,n=!0)}n&&this.onItemsChanged(!0)},e.prototype.onFileMenu=function(t,e){var n=this;if(e instanceof cb){var i=this.findStarredFile(e);i?t.addItem((function(t){return t.setTitle(Ee("plugins.starred.action-unstar")).setIcon(Fm).onClick((function(){return n.removeItem(i)}))})):t.addItem((function(t){return t.setTitle(Ee("plugins.starred.action-star")).setIcon(Om).onClick((function(){return n.addStarredFile(e)}))}))}},e.prototype.findStarredFile=function(t){var e=this.items.filter((function(e){return"file"===e.type&&e.path===t.path}));return e.length>0?e[0]:null},e.prototype.addStarredFile=function(t){this.findStarredFile(t)||this.addItem({type:"file",title:t.basename,path:t.path})},e.prototype.findStarredSearch=function(t){var e=this.items.filter((function(e){return"search"===e.type&&e.query===t}));return e.length>0?e[0]:null},e.prototype.addStarredSearch=function(t){this.findStarredSearch(t)||this.addItem({type:"search",title:t,query:t})},e.prototype.toggleFileStar=function(t){var e=this.findStarredFile(t);e?this.removeItem(e):this.addStarredFile(t)},e.prototype.addFilesStar=function(t){for(var e=0,n=0,i=t;n<i.length;n++){var r=i[n];this.findStarredFile(r)||(this.items.push({type:"file",title:r.basename,path:r.path}),e++)}0!==e&&(new jb(Ee("plugins.starred.msg-successfully-starred",{type:"file",title:e+" files"})),this.onItemsChanged(!0))},e.prototype.addItem=function(t){if(t){this.items.push(t);var e=t.type,n=this.getItemText(t);new jb(Ee("plugins.starred.msg-successfully-starred",{type:e,title:n})),this.onItemsChanged(!0)}},e.prototype.removeItem=function(t){if(t){this.items.remove(t);var e=t.type,n=this.getItemText(t);new jb(Ee("plugins.starred.msg-removed-starred",{type:e,title:n})),this.onItemsChanged(!0)}},e.prototype.getItemText=function(t){return"file"===t.type?t.title:"search"===t.type?t.query:""},e.prototype.onItemsChanged=function(t){this.trigger("changed"),t&&this.plugin.saveData({items:this.items})},e.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.prototype.trigger.apply(this,P([e],n))},e.prototype.on=function(e,n,i){return t.prototype.on.call(this,e,n,i)},e}(sb),FH="starred",IH=function(t){function e(e,n){var i=t.call(this,e)||this;i.icon=Om,i.plugin=n,i.itemLookup=Ny();var r=i.containerEl,o=i.headerDom=new cB(i.app,r);o.addNavButton(Om,Ee("plugins.starred.action-toggle"),i.onStar.bind(i)),o.addNavButton(Um,Ee("plugins.starred.action-toggle-search"),i.onStarSearch.bind(i));var s=i.listEl=r.createDiv("item-list");s.style.position="relative",s.on("contextmenu",".nav-file-title",i.openContextMenu.bind(i));var a=createDiv("drop-indicator"),l=De((function(t){return a.style.top=t+"px"}),0);return i.app.dragManager.handleDrop(r,(function(t,e,r){if("starred"===e.source){var o=null;if("file"===e.type&&(o=n.findStarredFile(e.file)),"search"===e.type&&(o=n.findStarredSearch(e.query)),!o)return;var c=n.items,u=c.indexOf(o),h=t.target,p=null;if(s.contains(h)){for(var d=h;d&&d.parentNode!==s;)d=d.parentNode;if(d&&d.parentNode===s){var f=i.itemLookup.get(d);if(f){var g=d.getBoundingClientRect(),m=g.y+g.height/2,v=void 0,y=c.indexOf(f);if(t.clientY<m)v=d.offsetTop;else{var b=d.nextSibling;v=b?b.offsetTop:d.offsetTop+d.offsetHeight,y++}p={index:y,y:v}}}if(!p){var w=s.lastChild;p={index:c.length,y:w.offsetTop+w.offsetHeight}}}if(p||(p={index:0,y:0}),p.index>u&&p.index--,p.index===u)return;return a.parentNode!==s&&s.prepend(a),l(Math.max(0,p.y-2)),r||(c.remove(o),c.splice(p.index,0,o),n.onItemsChanged(!0)),{dropEffect:"move",hoverEl:a,hoverClass:"is-active"}}if("file"===e.type)return r||n.addStarredFile(e.file),{action:Ee("interface.drag-and-drop.star-this-file"),dropEffect:"copy"};if("files"===e.type){if(!r){for(var k=[],C=0,x=e.files;C<x.length;C++){var S=x[C];S instanceof cb&&k.push(S)}n.addFilesStar(k)}return{action:Ee("interface.drag-and-drop.star-these-files"),dropEffect:"copy"}}})),i}return M(e,t),e.prototype.getDisplayText=function(){return Ee("plugins.starred.name")},e.prototype.getViewType=function(){return FH},e.prototype.load=function(){t.prototype.load.call(this),this.registerEvent(this.plugin.on("changed",this.renderItems,this)),this.renderItems()},e.prototype.renderItems=function(){var t=this;this.listEl.empty();for(var e=this.app.dragManager,n=function(n){if("file"!==n.type&&"search"!==n.type)return"continue";var r=createDiv("nav-file"),o=r.createDiv("nav-file-title"),s=o.createDiv("nav-file-icon");if("file"===n.type){var a=i.app.vault.getAbstractFileByPath(n.path);if(!(a instanceof cb))return"continue";Ty(s,Gg),o.createDiv({cls:"nav-file-title-content",text:a.basename});var l=a;e.handleDrag(r,(function(t){return e.updateSource([o],"is-being-dragged"),e.dragFile(t,l,"starred")}))}else if("search"===n.type){var c=n.query;Ty(s,_g),o.createDiv({cls:"nav-file-title-content",text:c}),e.handleDrag(r,(function(t){return gh(t.dataTransfer,c),e.updateSource([o],"is-being-dragged"),{source:"starred",type:"search",icon:km,title:c,query:c}}))}i.listEl.appendChild(r),i.itemLookup.set(r,n),Be(r),r.onClickEvent((function(e){0!==e.button&&1!==e.button||t.triggerStarredItem(n,Bb.isModEvent(e))}))},i=this,r=0,o=this.plugin.items;r<o.length;r++){n(o[r])}},e.prototype.triggerStarredItem=function(t,e){var n=this.app;if("file"===t.type){var i=n.vault.getAbstractFileByPath(t.path);if(!(i instanceof cb))return void new jb(Ee("plugins.starred.msg-cannot-find-path",{path:t.path}));this.app.workspace.getLeaf(e).openFile(i,{active:!0})}else if("search"===t.type){var r=this.app.internalPlugins.getPluginById("global-search");r&&r.instance.openGlobalSearch(t.query)}},e.prototype.onStar=function(){var t=this.app.workspace.getActiveFile();t&&this.plugin.toggleFileStar(t)},e.prototype.onStarSearch=function(){var t=this.app.workspace.getLeavesOfType("search");if(0!==t.length){var e=t[0];if(e.view instanceof oz){var n=e.view.getQuery();if(n){var i=this.plugin.findStarredSearch(n);i?this.plugin.removeItem(i):this.plugin.addStarredSearch(n)}}}},e.prototype.openContextMenu=function(t,e){var n=this;t.preventDefault();var i=this.itemLookup.get(e.parentElement);new zb(this.app).addItem((function(t){return t.setTitle(Ee("plugins.starred.menu-opt-remove")).setIcon(Om).onClick((function(){return n.plugin.removeItem(i)}))})).showAtMouseEvent(t)},e}(Hb),NH=function(){function t(t,e,n,i){this.min=t||0,this.max=e||Number.MAX_VALUE,this.base=n||1e3,this.jitter=i||!0,this.count=0,this.nextTs=Date.now()}return t.prototype.success=function(){this.count=0,this.nextTs=Date.now()+this.getTimeout()},t.prototype.fail=function(){this.count++,this.nextTs=Date.now()+this.getTimeout()},t.prototype.getTimeout=function(){if(0===this.count)return this.min;var t=this.count-1,e=this.base*Math.pow(2,t);if(this.jitter){e*=.5+.5*Math.random()}return e=Math.floor(Math.min(this.max,this.min+e))},t.prototype.getNextTs=function(){return this.nextTs},t.prototype.isReady=function(){return Date.now()>this.nextTs},t}(),BH={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol Error",1003:"Unsupported Data",1004:"(For future)",1005:"No Status Received",1006:"Abnormal Closure",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message too big",1010:"Missing Extension",1011:"Internal Error",1012:"Service Restart",1013:"Try Again Later",1014:"Bad Gateway",1015:"TLS Handshake"},RH=window.WebSocket;var zH=window.process&&window.process.platform,HH=GF||zH&&"win32"!==zH&&"darwin"!==zH,VH=GF?500:2e3,qH=["image"],jH=Me("plugins.sync"),UH="";function _H(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){return[2,yA(t+"-sync",1,{upgrade:function(t,e,n,i){t.objectStoreNames.contains("data")||t.createObjectStore("data")}})]}))}))}GF&&D(void 0,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return[4,tI.getInfo()];case 1:return t=e.sent(),UH=t.name,[2]}}))}));var WH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="sync",e.name=jH("name"),e.description=jH("desc"),e.app=null,e.vault=null,e.plugin=null,e.db=null,e.vaultId=null,e.vaultName=null,e.key=null,e.host=null,e.deviceName="",e.version=0,e.initial=!0,e.localFiles={},e.scanSpecialFiles=!1,e.scanSpecialFileQueue=[],e.serverFiles={},e.fileRetry={},e.newServerFiles=[],e.allowTypes=new Set(qH),e.allowSpecialFiles=new Set,e.ignoreFolders=[],e.dirty=!1,e.requestSaveData=De(e.saveData.bind(e),2e3),e.boundOnFileAdd=e.onFileAdd.bind(e),e.boundOnFileRemove=e.onFileRemove.bind(e),e.boundOnFileRename=e.onFileRename.bind(e),e.boundOnRaw=e.onRaw.bind(e),e.pause=!1,e.syncing=!1,e.error=!1,e.ready=!1,e.server=null,e.syncLog=[],e.timer=0,e.backoff=new NH(0,3e5,5e3,!0),e.statusIconEl=null,e.iconSize=18,e.syncingPath="",e.syncStatus="",e}return M(e,t),e.prototype.getRemoteVaultId=function(){return this.vaultId},e.prototype.getRemoteVaultName=function(){return this.vaultName},e.prototype.init=function(t,e){this.app=t,this.vault=t.vault,this.plugin=e,this.settingTab=new XH(t,e,this),e.registerStatusBarItem(),this.setStatus("Uninitialized")},e.prototype.openChooseRemoteVaultModal=function(){new JH(this.app,this,this.settingTab).open()},e.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r,o=this;return A(this,(function(s){return n=t.workspace,this.registerEvents(),e.addSettingTab(this.settingTab),e.registerEvent(t.workspace.on("file-menu",this.onFileMenu,this)),n.onLayoutReady((function(){return D(o,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.loadData()];case 1:return t.sent(),this.scanFiles(),this.requestSync(),[2]}}))}))})),this.timer=window.setInterval(this.requestSync.bind(this),3e4),this.on("status-change",(function(){o.updateStatusBar()})),By.isMobile?(this.iconSize=28,n.onLayoutReady((function(){var t=n.rightSplit;o.statusIconEl=t.addHeaderButton(Qm,o.showSyncLog.bind(o)),o.statusIconEl.addClass("sync-status-icon")}))):(i=e.statusBarEl)&&(r=i.createDiv("status-bar-item-segment"),this.statusIconEl=r.createSpan("status-bar-item-icon sync-status-icon"),this.statusIconEl.addEventListener("click",this.showSyncLog.bind(this))),[2]}))}))},e.prototype.onDisable=function(t,e){this.server&&(this.server.disconnect(),this.server=null),this.timer&&(clearInterval(this.timer),this.timer=0),this.statusIconEl&&this.statusIconEl.detach(),this.unregisterEvents()},e.prototype.onFileMenu=function(t,e,n){var i=this;e instanceof cb&&("pane-more-options"===n||"file-explorer-context-menu"===n)&&t.addItem((function(t){return t.setTitle(jH("action-view-version-history")).setIcon(Pm).onClick((function(){return i.showVersionHistory(e.path)}))}))},e.prototype.loadData=function(){return D(this,void 0,void 0,(function(){var t,e,n,i;return A(this,(function(r){switch(r.label){case 0:t=null,r.label=1;case 1:return r.trys.push([1,4,,5]),e=this,[4,yA(this.app.appId+"-sync",1,{upgrade:function(t,e,n,i){t.objectStoreNames.contains("data")||t.createObjectStore("data")}})];case 2:return[4,(e.db=r.sent()).get("data","data")];case 3:return t=r.sent(),[3,5];case 4:return n=r.sent(),console.error("Failed to load sync data",n),[3,5];case 5:return t?[3,9]:[4,this.plugin.loadData()];case 6:return(t=r.sent())?[4,this.db.put("data",t,"data")]:[3,9];case 7:return r.sent(),[4,this.plugin.deleteData()];case 8:r.sent(),r.label=9;case 9:if(!t)return[2];try{this.vaultId=t.vaultId,this.vaultName=t.vaultName,this.key=Y(t.key),this.host=t.host,this.deviceName=t.deviceName||"",this.pause=!!t.pause,this.version=t.version||0,this.initial=void 0===t.initial||!!t.initial,this.localFiles=t.local||{},this.serverFiles=t.remote||{},this.newServerFiles=t.pending||[],(i=t.appId)&&i!==this.app.appId&&(this.pause=!0,this.version=0,this.initial=!0,this.localFiles={},this.serverFiles={},this.newServerFiles=[]),this.fileRetry={},this.allowTypes=new Set(t.allowTypes||qH),this.allowSpecialFiles=new Set(t.allowSpecialFiles||[]),this.ignoreFolders=t.ignoreFolders||[]}catch(t){console.error(t)}return[2]}}))}))},e.prototype.saveData=function(){return D(this,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return this.dirty?(this.dirty=!1,(t={}).appId=this.app.appId,t.vaultId=this.vaultId,t.vaultName=this.vaultName,t.key=J(this.key),t.host=this.host,t.deviceName=this.deviceName,t.pause=this.pause,t.version=this.version,t.initial=this.initial,t.local=this.localFiles,t.remote=this.serverFiles,t.pending=this.newServerFiles,t.allowTypes=Array.from(this.allowTypes),t.allowSpecialFiles=Array.from(this.allowSpecialFiles),t.ignoreFolders=this.ignoreFolders,[4,this.db.put("data",t,"data")]):[2];case 1:return e.sent(),[2]}}))}))},e.prototype.getDefaultDeviceName=function(){return By.isDesktopApp?window.require("os").hostname():UH||"Unknown"},e.prototype.setup=function(t,e,n,i,r){return D(this,void 0,void 0,(function(){var o;return A(this,(function(s){switch(s.label){case 0:return this.vaultId=t,this.vaultName=e,o=this,[4,lt(n,i)];case 1:return o.key=s.sent(),this.host=r,this.clear(),this.scanFiles(),[4,this.saveData()];case 2:return s.sent(),this.requestSync(),[2]}}))}))},e.prototype.unsetup=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return this.vaultId=null,this.vaultName=null,this.key=null,this.host=null,this.clear(),this.setStatus("Uninitialized"),[4,this.saveData()];case 1:return t.sent(),[2]}}))}))},e.prototype.clear=function(){this.dirty=!0,this.version=0,this.initial=!0,this.serverFiles={},this.newServerFiles=[],this.fileRetry={},this.allowTypes=new Set(qH);var t=this.server;t&&(t.disconnect(),this.server=null),this.gettingServer=null,this.backoff.success()},e.prototype.setPause=function(t){this.pause=t,t?(this.setStatus("Paused"),this.log("Paused")):(this.setStatus("Resumed"),this.log("Resumed")),this.dirty=!0,this.saveData(),this.requestSync()},e.prototype.getPause=function(){return this.pause},e.prototype.changeFilter=function(t){var e=this.serverFiles,n=this.newServerFiles,i=this.app.vault.configDir+"/",r=[];for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];this.allowSyncFile(s.path,s.folder,i)||r.push(s)}t();for(var a=[],l=0,c=r;l<c.length;l++){s=c[l];this.allowSyncFile(s.path,s.folder,i)&&a.push(s)}a.sort((function(t,e){return t.path.length-e.path.length})),n.unshift.apply(n,a)},e.prototype.makeKeyHash=function(t,e){return D(this,void 0,void 0,(function(){var n,i;return A(this,(function(r){switch(r.label){case 0:return[4,lt(t,e)];case 1:return n=r.sent(),i=et,[4,Z(n)];case 2:return[2,i.apply(void 0,[r.sent()])]}}))}))},e.prototype.getSalt=function(){return function(t){for(var e=[],n=0,i=ut.length;n<t;n++)e.push(ut.charAt(Math.floor(Math.random()*i)));return e.join("")}(20)},e.prototype.verifyPassword=function(t,e,n,i){return D(this,void 0,void 0,(function(){var r,o,s,a;return A(this,(function(l){switch(l.label){case 0:return[4,this.makeKeyHash(e,n)];case 1:return r=l.sent(),a=(s=JSON).parse,[4,this.app.account.verifyVaultKey(t,r,i)];case 2:if((o=a.apply(s,[l.sent()])).error)throw new Error(o.error);return[2]}}))}))},e.prototype.log=function(t,e,n){void 0===n&&(n=!1);var i=this.syncLog;if("Fully synced"===t&&i.last().info===t)return;i.push({file:e,info:t,ts:Date.now(),error:n}),i.length>VH&&i.splice(0,100),this.trigger("new-log")},e.prototype.scanFiles=function(){for(var t=this.vault,e=this.localFiles,n=[t.getRoot()];n.length;){var i=n.pop();if(this.onFileAdd(i),i instanceof ub)for(var r=0,o=i.children;r<o.length;r++){var s=o[r];n.push(s)}}for(var a in e){if(e.hasOwnProperty(a)&&!a.startsWith("."))t.getAbstractFileByPath(a)||delete e[a]}this.scanSpecialFiles=!0},e.prototype.setIgnoreFolders=function(t){var e=this;this.changeFilter((function(){e.ignoreFolders=t})),this.forceSaveData(),this.requestSync()},e.prototype.setSyncType=function(t,e){var n=this;this.allowTypes.has(t)!==e&&(this.changeFilter((function(){e?n.allowTypes.add(t):n.allowTypes.delete(t)})),this.forceSaveData(),this.requestSync())},e.prototype.setAllowSpecialFile=function(t,e){var n=this;this.allowSpecialFiles.has(t)!==e&&(this.changeFilter((function(){e?n.allowSpecialFiles.add(t):n.allowSpecialFiles.delete(t)})),this.forceSaveData(),this.requestSync())},e.prototype.registerEvents=function(){this.vault.on("create",this.boundOnFileAdd),this.vault.on("modify",this.boundOnFileAdd),this.vault.on("delete",this.boundOnFileRemove),this.vault.on("rename",this.boundOnFileRename),this.vault.on("raw",this.boundOnRaw)},e.prototype.unregisterEvents=function(){this.vault.off("create",this.boundOnFileAdd),this.vault.off("modify",this.boundOnFileAdd),this.vault.off("delete",this.boundOnFileRemove),this.vault.off("rename",this.boundOnFileRename),this.vault.off("raw",this.boundOnRaw)},e.prototype.onFileAdd=function(t){var e=t.path;if("/"!==e){var n=this.localFiles,i=n[e];if(i||(n[e]=i={path:e,folder:!1,ctime:0,mtime:0,size:0,hash:"",synctime:0,synchash:""}),i.path=e,t instanceof ub)i.folder=!0,i.ctime=0,i.mtime=0,i.size=0,i.hash="";else if(t instanceof cb){i.folder=!1;var r=t.stat,o=Math.ceil(r.mtime),s=Math.ceil(r.ctime),a=r.size;i.mtime&&i.mtime===o&&i.size===r.size||(i.hash=""),i.mtime=o,i.ctime=s,i.size=a}this.requestSync()}},e.prototype.onFileRemove=function(t){delete this.localFiles[t.path],this.requestSync()},e.prototype.onFileRename=function(t,e){var n=this.localFiles,i=n[e];n[t.path]=i,delete n[e],i.path=t.path,i.synctime=0,this.onFileAdd(t),this.requestSync()},e.prototype.onRaw=function(t){if(t.startsWith(this.vault.configDir+"/")){var e=this.scanSpecialFileQueue;if(e.contains(t))return;e.push(t),this.requestSync()}},e.prototype.onPushedFile=function(t){if(this.version=t.uid,!this.initial||!t.deleted){var e=t.path,n={path:t.path,size:t.size,hash:t.hash,ctime:t.ctime,mtime:t.mtime,folder:t.folder,deleted:t.deleted,uid:t.uid};this.initial&&(n.initial=!0);var i=this.localFiles[e],r=!1;n.deleted!==!i?r=!0:!i||n.folder===i.folder&&n.size===i.size&&n.hash===i.hash||(r=!0),n.device=t.device,r&&this.log("Server pushed"+(t.folder?" (folder)":"")+(t.deleted?" (deleted or renamed)":"")+(t.device?" ["+t.device+"]":""),t.path),this.newServerFiles.push(n),this.requestSync()}},e.prototype.allowSyncFile=function(t,e,n){for(var i=0,r=this.ignoreFolders;i<r.length;i++){var o=r[i];if(e&&t===o||t.startsWith(o+"/"))return!1}if(!e&&t.startsWith(n)){var s=t.substr(n.length);if(s.startsWith(".")||s.contains("/."))return!1;var a=null;return"app.json"===s?a="app":"appearance.json"===s?a="appearance":"hotkeys.json"===s?a="hotkey":"core-plugins.json"===s?a="core-plugin":"community-plugins.json"===s?a="community-plugin":s.startsWith("themes/")||s.startsWith("snippets/")?a="appearance-data":!s.contains("/")&&s.endsWith(".json")?a="core-plugin-data":s.startsWith("plugins/")&&!s.substr("plugins/".length).startsWith(".")&&(a="community-plugin-data"),a&&this.allowSpecialFiles.has(a)}if(t.startsWith("."))return!1;if(e)return!0;if(t.startsWith("."))return!1;var l=Xt(Kt(t));if("md"===l)return!0;var c=this.allowTypes;return Vt.contains(l)?c.has("image"):qt.contains(l)?c.has("audio"):jt.contains(l)?c.has("video"):Ut.contains(l)?c.has("pdf"):!!c.has("unsupported")},e.prototype.canSyncPath=function(t,e){var n=this.fileRetry;for(var i in n)if(n.hasOwnProperty(i)&&n[i].ts>t&&e.startsWith(i))return!1;return!0},e.prototype.canSyncLocalFile=function(t,e){if(!e.synctime)return!0;var n=e.size,i=n>10240?n>102400?30:20:10;return t-e.synctime>1e3*i},e.prototype.getHost=function(){var t=this.host||"127.0.0.1:3003";return t.startsWith("127.0.0.1")||t.startsWith("localhost")?"ws://"+t:"wss://"+t},e.prototype.setStatus=function(t){this.syncStatus=t,this.trigger("status-change")},e.prototype.getStatus=function(){return this.vaultId?this.error||Object.keys(this.fileRetry).length>0?"error":this.pause?"paused":this.syncing?"syncing":"synced":"paused"},e.prototype.failedSync=function(t){var e=this.syncingPath;if(this.log(t,e,!0),e){var n=this.fileRetry,i=Date.now(),r=n[e];r||(r=n[e]={count:0,error:"",ts:0}),r.error=t;var o=r.count=r.count+1,s=5*Math.pow(2,o)*1e3;s=Math.min(s,3e5),r.ts=i+s}},e.prototype.requestSync=function(){return D(this,void 0,void 0,(function(){var t,e,n;return A(this,(function(i){switch(i.label){case 0:return this.syncing?[2]:(this.syncing=!0,this.error=!1,this.trigger("status-change"),[4,Sh(50)]);case 1:i.sent(),t=!0,i.label=2;case 2:if(!t||!this.plugin.enabled||this.pause||!this.vaultId)return[3,9];i.label=3;case 3:return i.trys.push([3,5,,6]),this.error=!1,this.syncingPath=null,[4,this._sync()];case 4:return t=i.sent(),(e=this.syncingPath)&&delete this.fileRetry[e],[3,6];case 5:return n=i.sent(),console.log("Sync Error!"),console.error(n),this.error=!0,this.failedSync(n.message),t=!1,this.trigger("status-change"),[3,6];case 6:return this.dirty&&this.requestSaveData(),t?[4,Sh(100)]:[3,8];case 7:i.sent(),i.label=8;case 8:return[3,2];case 9:return this.syncing=!1,this.trigger("status-change"),[2]}}))}))},e.prototype.getServer=function(){var t=this,e=this.gettingServer;if(!e){this.gettingServer=e=this.asyncGetServer();var n=function(){t.gettingServer=null};e.then(n,n)}return e},e.prototype.asyncGetServer=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s=this;return A(this,(function(a){switch(a.label){case 0:return!(t=this.server)||t.isConnected()||t.isConnecting()||(t.disconnect(),t=this.server=null,this.backoff.fail()),t?[3,4]:this.host&&this.app.account.token&&this.vaultId&&this.key?[4,it(this.key)]:[3,3];case 1:return e=a.sent(),i=et,[4,Z(this.key)];case 2:return n=i.apply(void 0,[a.sent()]),t=this.server=new ZH(e,n),[3,4];case 3:return[2,null];case 4:if(t.hasConnection())return[3,8];this.setStatus("Connecting to server"),this.log("Connecting to server"),this.ready=!1,a.label=5;case 5:return a.trys.push([5,7,,8]),r=this.deviceName||this.getDefaultDeviceName(),[4,t.connect(this.getHost(),this.app.account.token,this.vaultId,this.version,this.initial,r,(function(t){s.log("Connection successful. Detecting changes..."),s.ready=!0,s.initial&&(s.initial=!1),s.version<t&&(s.version=t),s.dirty=!0,s.requestSaveData(),s.requestSync()}),this.onPushedFile.bind(this))];case 6:return a.sent(),this.backoff.success(),[3,8];case 7:return(o=a.sent()).message&&o.message.contains("Your subscription to Obsidian Sync has expired")&&new jb(o.message),console.error(o),this.log(o.message,null,!0),t.disconnect(),t=this.server=null,this.error=!0,this.backoff.fail(),[2,null];case 8:return[2,t]}}))}))},e.prototype._sync=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,x,S,E,M,L,D,T,P,O,F,I,N,B,R,z,H,V,q,j,U,_,W,G,K,Y,J,Q,Z,tt,et=this;return A(this,(function(nt){switch(nt.label){case 0:return this.pause?[2,!1]:this.backoff.isReady()?[4,this.getServer()]:(this.log("Waiting to connect to server"),[2,!1]);case 1:if(!(t=nt.sent()))return[2,!1];if(this.pause||!this.vaultId)return[2,!1];e=this.localFiles,n=this.serverFiles,i=this.newServerFiles,r=this.vault,o=r.adapter,s=Date.now(),a=0,this.setStatus("Indexing..."),l=r.configDir,c=l+"/",nt.label=2;case 2:if(nt.trys.push([2,21,,22]),u={},h=this.scanSpecialFileQueue,!this.scanSpecialFiles)return[3,17];for(j in this.scanSpecialFiles=!1,this.setStatus("Initializing..."),h=this.scanSpecialFileQueue=[],e)e.hasOwnProperty(j)&&j.startsWith(".")&&(u[j]=e[j],delete e[j]);return[4,o.exists(l)];case 3:return nt.sent()?(h.push(c+"config"),[4,o.list(l)]):[3,17];case 4:for(p=nt.sent(),d=0,f=p.files;d<f.length;d++)"json"===Xt(D=f[d])&&h.push(D);return[4,o.exists(c+"themes")];case 5:return nt.sent()?[4,o.list(c+"themes")]:[3,7];case 6:for(g=nt.sent(),m=0,v=g.files;m<v.length;m++)"css"===Xt(D=v[m])&&h.push(D);nt.label=7;case 7:return[4,o.exists(c+"snippets")];case 8:return nt.sent()?[4,o.list(c+"snippets")]:[3,10];case 9:for(y=nt.sent(),b=0,w=y.files;b<w.length;b++)"css"===Xt(D=w[b])&&h.push(D);nt.label=10;case 10:return[4,o.exists(c+"plugins")];case 11:return nt.sent()?[4,o.list(c+"plugins")]:[3,16];case 12:k=nt.sent(),C=0,x=k.folders,nt.label=13;case 13:return C<x.length?(S=x[C],[4,o.list(S)]):[3,16];case 14:for(E=nt.sent(),M=0,L=E.files;M<L.length;M++)D=L[M],"manifest.json"!==(T=Kt(D))&&"main.js"!==T&&"styles.css"!==T&&"data.json"!==T||h.push(D);nt.label=15;case 15:return C++,[3,13];case 16:this.forceSaveData(),nt.label=17;case 17:return h.length>0?(j=h.pop(),[4,o.exists(j)]):[3,20];case 18:return nt.sent()?[4,o.stat(j)]:(delete e[j],[3,17]);case 19:return"file"!==(P=nt.sent()).type?(delete e[j],[3,17]):((q=e[j])||(q=u.hasOwnProperty(j)?e[j]=u[j]:e[j]={path:j,ctime:0,mtime:0,size:0,folder:!1,hash:"",synchash:"",synctime:0}),Y=Math.ceil(P.mtime),K=Math.ceil(P.ctime),O=P.size,q.mtime&&q.mtime===Y&&q.size===P.size||(q.hash=""),q.mtime=Y,q.ctime=K,q.size=O,[3,17]);case 20:return[3,22];case 21:return F=nt.sent(),console.error("Failed to scan config files",F),[3,22];case 22:if(!(i.length>0))return[3,26];I=function(l){var u,h,p,d,f,g,m,v,y,b,w,k,C,x,S,E,M,L,D,T,P,O,F,I,B,R,z,H,V,q,j;return A(this,(function(A){switch(A.label){case 0:if(u=i[l],h=u.path,p=n[h],d=e[h],f=function(t,e){return t||et.log("Accepted",h),d&&(d.synctime=Date.now()),e||(n[h]=u),i.splice(l,1),et.setDirty(),!0},!N.allowSyncFile(h,u.folder,c))return[2,{value:f(!0)}];if(!zt(h)||By.isAndroidApp&&/[?<>]/.test(h))return N.log("Ignoring remote file name with illegal characters",h,!0),new jb('Sync: Unable to download file with illegal name "'+h+'"'),[2,{value:f(!0,!0)}];if(!N.canSyncPath(s,h))return a++,[2,"continue"];for(N.syncingPath=h,g=l+1;g<i.length;g++)if(i[g].path===h)return N.log("Skipped",h),[2,{value:f(!0,!0)}];return d?[3,2]:u.deleted?[2,{value:f(!0)}]:(N.setStatus("Downloading "+h),[4,N.syncFileDown(t,u)]);case 1:return A.sent(),[2,{value:f()}];case 2:return d.folder||d.hash?[3,4]:(N.getHashFromMetadataCache(d),d.hash?[3,4]:(N.setStatus("Computing hash "+h),[4,N.updateHash(d)]));case 3:A.sent(),A.label=4;case 4:if(!d.folder||!u.folder)return[3,9];if(!u.deleted)return[3,8];if(!(C=r.getAbstractFileByPath(h)))return[3,8];if(C instanceof ub&&C.children.length>0)return[2,{value:f(!0)}];N.setStatus("Deleting "+h),N.log("Deleting",h),A.label=5;case 5:return A.trys.push([5,7,,8]),[4,r.delete(C,!0)];case 6:return A.sent(),[3,8];case 7:return m=A.sent(),v=(m?m.message:"")||"Failed to delete folder",N.log(v,h,!0),[3,8];case 8:return[2,{value:f(!0)}];case 9:return d.folder||u.folder||d.hash!==u.hash?p&&(d.folder&&p.folder||d.hash===p.hash)?u.deleted?(N.setStatus("Deleting "+h),(C=r.getAbstractFileByPath(h))?(N.log("Deleting",h),[4,r.delete(C)]):[3,11]):[3,14]:[3,16]:[2,{value:f(!0)}];case 10:return A.sent(),[3,13];case 11:return N.log("Deleting",h),[4,o.remove(h)];case 12:A.sent(),A.label=13;case 13:return[2,{value:f()}];case 14:return N.setStatus("Downloading "+h),[4,N.syncFileDown(t,u)];case 15:return A.sent(),[2,{value:f()}];case 16:return d.folder||!u.folder?[3,18]:(C=r.getAbstractFileByPath(h))instanceof cb?(y=C.extension,b=y?h.substr(h.length-y.length-1):"",w=h.substr(0,h.length-b.length),k=w+" (Conflicted copy)"+b,N.setStatus("Renaming conflicted file "+h),N.log("Renaming conflicted file",h),[4,r.rename(C,k)]):[3,18];case 17:return A.sent(),N.setDirty(),[2,{value:!0}];case 18:return u.initial&&u.mtime>d.mtime?(N.setStatus("Downloading "+h),[4,N.syncFileDown(t,u)]):[3,20];case 19:return A.sent(),[2,{value:f()}];case 20:if(u.initial||d.folder||u.folder||u.deleted||"md"!==Xt(h)||u.hash===d.synchash)return[3,37];if(N.setStatus("Merging "+h),N.log("Merging conflicted file",h),!((C=r.getAbstractFileByPath(h))instanceof cb))return N.log("Merge failed.",h,!0),[2,{value:f(!0)}];x=void 0,A.label=21;case 21:return A.trys.push([21,23,,24]),[4,r.read(C)];case 22:return x=A.sent(),[3,24];case 23:return S=A.sent(),N.log("Merge failed. "+S.toString(),h,!0),[2,{value:f(!0)}];case 24:return x?[3,26]:[4,N.syncFileDown(t,u)];case 25:return A.sent(),[2,{value:f()}];case 26:if(E="",!p||p.deleted)return[3,30];A.label=27;case 27:return A.trys.push([27,29,,30]),M=$,[4,t.pull(p.uid)];case 28:return E=M.apply(void 0,[A.sent()]),[3,30];case 29:return L=A.sent(),N.log("Merge failed. "+L.toString(),h,!0),[2,{value:f(!0)}];case 30:D=void 0,A.label=31;case 31:return A.trys.push([31,33,,34]),T=$,[4,t.pull(u.uid)];case 32:return D=T.apply(void 0,[A.sent()]),[3,34];case 33:return P=A.sent(),N.log("Merge failed. "+P.toString(),h,!0),[2,{value:f(!0)}];case 34:return E===D||x===D?[2,{value:f()}]:D?(O=eF(E,x,D),[4,r.modify(C,O)]):[3,36];case 35:A.sent(),N.log("Merge successful",h),A.label=36;case 36:return[2,{value:f()}];case 37:if(u.folder||u.deleted||!h.startsWith(c))return[3,46];if("json"!==Xt(h))return[3,44];A.label=38;case 38:return A.trys.push([38,43,,44]),N.setStatus("Merging "+h),N.log("Merging conflicted file",h),B=(I=JSON).parse,[4,o.read(h)];case 39:return!(F=B.apply(I,[A.sent()]))||Array.isArray(F)||"object"!=typeof F?[3,42]:(H=(z=JSON).parse,V=$,[4,t.pull(u.uid)]);case 40:if(!(R=H.apply(z,[V.apply(void 0,[A.sent()])])))return[3,42];for(q in R)R.hasOwnProperty(q)&&(F[q]=R[q]);return[4,o.write(h,JSON.stringify(F,void 0,2))];case 41:return A.sent(),N.log("Merge successful",h),[2,{value:f(!0)}];case 42:return[3,44];case 43:return j=A.sent(),N.log("Merge failed. "+j.toString(),h,!0),[3,44];case 44:return[4,N.syncFileDown(t,u)];case 45:return A.sent(),[2,{value:f()}];case 46:return N.log("Rejected server change",h),[2,{value:f(!0)}]}}))},N=this,Z=0,nt.label=23;case 23:return Z<i.length?[5,I(Z)]:[3,26];case 24:if("object"==typeof(B=nt.sent()))return[2,B.value];nt.label=25;case 25:return Z++,[3,23];case 26:if(!this.ready)return[2,!1];for(j in R=null,z=null,n)if(n.hasOwnProperty(j)&&(U=n[j],!e.hasOwnProperty(j))){if(U.deleted){delete n[j];continue}if(!this.allowSyncFile(j,U.folder,c))continue;U.folder?(!z||U.path.length>z.path.length)&&(z=U):(!R||U.path.length>R.path.length)&&(R=U)}return R?(j=R.path,this.setStatus("Deleting remote file "+j),this.log("Deleting remote file",j),this.syncingPath=j,[4,t.push(j,!1,!0,0,0,"",null)]):[3,28];case 27:return nt.sent(),R.deleted=!0,this.setDirty(),[2,!0];case 28:return z?(j=z.path,this.setStatus("Deleting remote folder "+j),this.log("Deleting remote folder",j),this.syncingPath=j,[4,t.push(j,!0,!0,0,0,"",null)]):[3,30];case 29:return nt.sent(),z.deleted=!0,this.setDirty(),[2,!0];case 30:for(j in H=null,V=null,e)if(e.hasOwnProperty(j)&&(q=e[j],this.allowSyncFile(j,q.folder,c)))if(this.canSyncPath(s,j)){if(U=n[j],HH&&!q.folder&&U&&U.ctime&&(0===q.ctime||q.ctime>U.ctime)&&!U.folder&&!U.deleted&&(q.ctime=U.ctime),q.folder||!(q.size>103809024))if(U&&!U.deleted){if(!H)if(q.folder){if(!this.canSyncLocalFile(s,q)){a++;continue}U.folder||(!H||q.path.length<H.path.length)&&(H=q)}else if(U.folder){if(!this.canSyncLocalFile(s,q)){a++;continue}z=U}else if(q.hash||this.getHashFromMetadataCache(q),!q.hash||q.hash!==U.hash){if(!this.canSyncLocalFile(s,q)){a++;continue}(!V||q.size<V.size)&&(V=q)}}else{if(!this.canSyncLocalFile(s,q)){a++;continue}q.folder?(!H||q.path.length<H.path.length)&&(H=q):(!V||q.size<V.size)&&(V=q)}}else a++;return H?(j=H.path,this.syncingPath=j,this.setStatus("Uploading "+j),this.log("Uploading",j),G=this.version,[4,t.push(j,!0,!1,0,0,"",null)]):[3,32];case 31:return nt.sent(),n[j]={uid:G,path:j,folder:!0,deleted:!1,ctime:0,mtime:0,size:0,hash:""},this.setDirty(),H.synctime=Date.now(),[2,!0];case 32:return V?(j=V.path,this.syncingPath=j,this.setStatus("Uploading "+j),U=n[j],!V.hash&&(this.getHashFromMetadataCache(V),U&&U.hash===V.hash)?(this.setDirty(),[2,!0]):[4,o.readBinary(j)]):[3,36];case 33:return _=nt.sent(),W=V,[4,X(_)];case 34:return W.hash=nt.sent(),U&&U.hash===V.hash?(this.setDirty(),[2,!0]):(this.log("Uploading file",j),G=this.version,K=V.ctime,Y=V.mtime,J=V.hash,[4,t.push(j,!1,!1,K,Y,J,_)]);case 35:for(nt.sent(),V.synchash=J,this.log("Upload complete",j),Q=!1,Z=i.length-1;Z>=0;Z--)(tt=i[Z]).path===j&&(tt.mtime!==Y||tt.hash!==J||Q?Q&&i.splice(Z,1):(Q=!0,i.splice(Z,1),n[j]=tt));return Q||(n[j]={uid:G,path:j,folder:!1,deleted:!1,ctime:K,mtime:Y,size:_.byteLength,hash:J}),V.synctime=Date.now(),this.setDirty(),[2,!0];case 36:return 0===a?(this.log("Fully synced"),this.setStatus("Fully synced"),[2,!1]):(this.setStatus("Indexing..."),[2,!0])}}))}))},e.prototype.setDirty=function(){this.dirty=!0,this.trigger("status-change")},e.prototype.forceSaveData=function(){this.setDirty(),this.requestSaveData()},e.prototype.getHashFromMetadataCache=function(t){var e=this.app.metadataCache.getFileInfo(t.path);e&&Math.ceil(e.mtime)===t.mtime&&e.size===t.size&&(t.hash=e.hash)},e.prototype.syncFileDown=function(t,e){return D(this,void 0,void 0,(function(){var n,i,r,o,s,a,l,c,u,h;return A(this,(function(p){switch(p.label){case 0:return n=e.path,[4,(i=this.vault.adapter).stat(n)];case 1:return r=p.sent(),e.folder?r&&"folder"===r.type?[2]:r&&"file"===r.type?(this.log("Deleting local file",n),[4,i.remove(n)]):[3,3]:[3,5];case 2:p.sent(),p.label=3;case 3:return this.log("Creating local folder",n),[4,i.mkdir(n)];case 4:return p.sent(),[2];case 5:return r&&"folder"===r.type?[4,i.list(n)]:[3,10];case 6:return 0!==(o=p.sent()).files.length||0!==o.folders.length?[3,8]:(this.log("Deleting local folder",n),[4,i.rmdir(n,!0)]);case 7:return p.sent(),[2];case 8:return this.log("Renaming conflicted file",n),[4,i.rename(n,n+" (Conflicted copy)")];case 9:return p.sent(),[2];case 10:return this.log("Downloading file",n),[4,t.pull(e.uid)];case 11:if(!(s=p.sent()))throw new Error("Failed to download file, no data.");return[4,X(s)];case 12:return a=p.sent(),r?(l=void 0,e.ctime&&(0===r.ctime||e.ctime<r.ctime)&&(l=e.ctime),[4,i.writeBinary(n,s,{ctime:l,mtime:e.mtime})]):[3,14];case 13:return p.sent(),[3,20];case 14:return c=$t(n),(u="/"!==c&&""!==c)?[4,i.exists(c)]:[3,16];case 15:u=!p.sent(),p.label=16;case 16:return u?[4,i.mkdir(c)]:[3,18];case 17:p.sent(),p.label=18;case 18:return[4,i.writeBinary(n,s,{ctime:e.ctime,mtime:e.mtime})];case 19:p.sent(),p.label=20;case 20:(h=this.localFiles[n])&&(h.hash=a,h.synchash=a),this.log("Downloading complete",n),p.label=21;case 21:return[2]}}))}))},e.prototype.updateHash=function(t){return D(this,void 0,Promise,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return t.folder||t.hash?[2,null]:[4,this.vault.adapter.readBinary(t.path)];case 1:return e=i.sent(),n=t,[4,X(e)];case 2:return n.hash=i.sent(),[2,e]}}))}))},e.prototype.updateStatusBar=function(){var t=this.getStatus(),e=this.statusIconEl;e&&($e(e,this.syncStatus,{placement:"top"}),e.removeClass("mod-success","mod-working","mod-error"),"paused"===t?(Ty(e,Zm,this.iconSize),e.addClass("mod-working")):"synced"===t?(Ty(e,Xm,this.iconSize),e.addClass("mod-success")):"syncing"===t?(Ty(e,Qm,this.iconSize),e.addClass("mod-working")):"error"===t&&(Ty(e,Qm,this.iconSize),e.addClass("mod-error")))},e.prototype.showVersionHistory=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){return new GH(this.app,this,t).open(),[2]}))}))},e.prototype.getHistory=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,this.getServer()];case 1:return[4,n.sent().listHistory(t,e)];case 2:return[2,n.sent()]}}))}))},e.prototype.getContentForVersion=function(t){return D(this,void 0,Promise,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.getServer()];case 1:return[2,e.sent().pull(t)]}}))}))},e.prototype.restoreVersion=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.getServer()];case 1:return[4,e.sent().restore(t)];case 2:return e.sent(),[2]}}))}))},e.prototype.showDeletedFiles=function(t){return D(this,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return[4,this.getServer()];case 1:return[4,n.sent().listDeleted()];case 2:return(e=n.sent()).reverse(),t?new $H(this.app,this,jH("label-deleted-files"),e).open():new KH(this.app,this,jH("label-deleted-files"),e).open(),[2]}}))}))},e.prototype.showConfigFiles=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r;return A(this,(function(o){for(i in t=[],e=this.serverFiles,n=this.app.vault.configDir+"/",e)e.hasOwnProperty(i)&&!(r=e[i]).folder&&r.path.startsWith(n)&&t.push({uid:r.uid,ts:r.mtime,folder:r.folder,path:r.path,size:r.size,deleted:r.deleted,device:r.device});return t.sort((function(t,e){return e.ts-t.ts})),new KH(this.app,this,jH("label-setting-files"),t).open(),[2]}))}))},e.prototype.purge=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.getServer()];case 1:return[4,t.sent().purge()];case 2:return t.sent(),[2]}}))}))},e.prototype.size=function(){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.getServer()];case 1:return[4,t.sent().size()];case 2:return[2,t.sent()]}}))}))},e.prototype.openSettings=function(){var t=this.app.setting;t.open(),t.activeTab!==this.settingTab&&t.openTabById(this.id)},e.prototype.showSyncLog=function(){this.vaultId&&!this.pause?new QH(this.app,this).open():this.openSettings()},e.prototype.trigger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.prototype.trigger.apply(this,P([e],n))},e.prototype.on=function(e,n,i){return t.prototype.on.call(this,e,n,i)},e}(sb),GH=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.plugin=null,r.history=null,r.filepath=null,r.historyListContainerEl=null,r.historyListEl=null,r.historyContentTextareaEl=null,r.historyContentOtherEl=null,r.historyContentCopyButtonEl=null,r.historyContentContainerEl=null,r.activeHistoryItemEl=null,r.loadMoreButtonEl=null,r.activeHistory=null,r.plugin=n,r.filepath=i,r}return M(e,t),e.prototype.onOpen=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s=this;return A(this,(function(a){switch(a.label){case 0:return e=(t=this).modalEl,n=t.contentEl,e.addClass("mod-sync-history"),i=this.historyListContainerEl=n.createDiv("sync-history-list-container"),this.historyListEl=i.createDiv("sync-history-list"),this.loadMoreButtonEl=i.createDiv({cls:"sync-history-load-more-button",text:jH("label-load-more")},(function(t){t.addEventListener("click",s.fetchMore.bind(s))})),r=this.historyContentContainerEl=n.createDiv("sync-history-content-container"),By.isMobile&&(r.detach(),(o=r.createDiv({cls:"modal-setting-back-button"},(function(t){t.addEventListener("click",(function(){Lb(s.contentEl,s.historyListContainerEl,"left")}))}))).createSpan("modal-setting-back-button-icon",(function(t){Ty(t,fm,20)})),o.createSpan({text:Ee("interface.start-screen.button-back")})),this.historyContentTextareaEl=r.createEl("textarea","sync-history-content"),this.historyContentOtherEl=r.createDiv("sync-history-content-other"),r.createDiv("modal-button-container u-center-text",(function(t){s.historyContentCopyButtonEl=t.createEl("button",{cls:"mod-cta",text:Ee("interface.label-copy")},(function(t){t.addEventListener("click",(function(){return D(s,void 0,void 0,(function(){return A(this,(function(t){return Ae(this.historyContentTextareaEl.value),new jb(Ee("interface.copied",{item:""})),[2]}))}))}))})),t.createEl("button",{cls:"mod-cta",text:jH("label-restore-this-version")},(function(t){t.addEventListener("click",(function(){return D(s,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return this.activeHistory===this.history.items[0]?(new jb(jH("msg-already-latest-version")),[2]):[4,this.plugin.restoreVersion(this.activeHistory.uid)];case 1:return t.sent(),new jb(jH("msg-restored-version",{time:window.moment(this.activeHistory.ts).fromNow()})),this.close(),[2]}}))}))}))}))})),[4,this.fetchMore()];case 1:return a.sent(),[2]}}))}))},e.prototype.openHistory=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u;return A(this,(function(h){switch(h.label){case 0:return n=(e=this).historyContentContainerEl,i=e.historyContentTextareaEl,r=e.historyContentOtherEl,o=e.historyContentCopyButtonEl,r.empty(),t.deleted?(i.value=jH("label-file-deleted"),i.show(),o.hide(),r.hide(),[3,10]):[3,1];case 1:n.addClass("is-loading"),h.label=2;case 2:return h.trys.push([2,,9,10]),s=Xt(Kt(this.filepath)),_t.contains(s)||Wt.contains(s)?(a=i,l=$,[4,this.plugin.getContentForVersion(t.uid)]):[3,4];case 3:return a.value=l.apply(void 0,[h.sent()]),i.show(),o.show(),r.hide(),[3,8];case 4:return Vt.contains(s)?[4,this.plugin.getContentForVersion(t.uid)]:[3,6];case 5:return c=h.sent(),u=URL.createObjectURL(new Blob([c],{type:"image/"+s})),Te(r,u),[3,7];case 6:r.setText("Unable to preview "+s+" files"),h.label=7;case 7:i.hide(),o.hide(),r.show(),h.label=8;case 8:return[3,10];case 9:return n.removeClass("is-loading"),[7];case 10:return By.isMobile&&Lb(this.contentEl,this.historyContentContainerEl,"right"),[2]}}))}))},e.prototype.setActiveHistoryItem=function(t,e){this.activeHistoryItemEl&&this.activeHistoryItemEl.removeClass("is-active"),this.activeHistoryItemEl=t,t.addClass("is-active"),this.activeHistory=e},e.prototype.fetchMore=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g=this;return A(this,(function(m){switch(m.label){case 0:return e=(t=this).contentEl,n=t.titleEl,i=t.modalEl,r=t.historyListEl,o=t.loadMoreButtonEl,s=null,a=!this.history,this.history&&(s=this.history.items.last().uid),l=this,[4,this.plugin.getHistory(this.filepath,s)];case 1:return l.history=m.sent(),c=this.history.items,a?(this.activeHistoryItemEl=null,0===c.length?(e.empty(),n.setText("Version history"),i.removeClass("mod-sync-history"),e.createEl("p",{cls:"u-center-text",text:jH("label-no-earlier-version")}),[2]):By.isMobile?[3,3]:[4,this.openHistory(c[0])]):[3,3];case 2:m.sent(),m.label=3;case 3:for(u=function(t){if(t.folder)return"continue";var e=r.createDiv({cls:"sync-history-list-item",text:window.moment(t.ts).format("LLLL")}),n=e.createDiv("u-small u-muted");t.deleted?n.setText(jH("label-file-deleted")):0===t.size?n.setText(jH("label-empty-file")):n.setText(ct(t.size)),t.device&&n.appendText(" ["+t.device+"]"),e.addEventListener("click",(function(){return D(g,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,this.openHistory(t)];case 1:return n.sent(),By.isMobile||this.setActiveHistoryItem(e,t),this.activeHistory=t,[2]}}))}))})),!a||h.activeHistoryItemEl||By.isMobile||h.setActiveHistoryItem(e,t)},h=this,p=0,d=c;p<d.length;p++)f=d[p],u(f);return this.history.more||o.hide(),[2]}}))}))},e}(KD),KH=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.plugin=null,o.history=[],o.plugin=n,o.title=i,o.history=r,o}return M(e,t),e.prototype.onOpen=function(){var t=this,e=this.titleEl,n=this.contentEl;e.setText(this.title),n.createEl("p",{cls:"u-center-text",text:jH("label-click-to-see-history")});for(var i=n.createDiv("sync-file-tree-container"),r=function(e){if(e.folder)return"continue";var n=i.createDiv({cls:"list-item deleted-file-item"});n.createDiv({cls:"list-item-part mod-extended",text:oe(e.path)});var r=window.moment(e.ts).fromNow();e.device&&(r="["+e.device+"] "+r),n.createDiv({cls:"u-muted u-small list-item-part",text:r}),n.addEventListener("click",(function(){t.plugin.showVersionHistory(e.path)}))},o=0,s=this.history;o<s.length;o++){r(s[o])}},e}(KD),$H=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.plugin=null,o.history=[],o.plugin=n,o.title=i,o.history=r,o}return M(e,t),e.prototype.onOpen=function(){var t=this,e=this.titleEl,n=this.contentEl;e.setText(this.title);var i=n.createDiv("sync-file-tree-container"),r=[],o=n.createEl("p",{cls:"u-center-text"}).createEl("button",{text:jH("button-restore-selected-files")});o.addEventListener("click",(function(){return D(t,void 0,void 0,(function(){var t,e,n,i,o,s,a,l,c,u,h,p;return A(this,(function(d){switch(d.label){case 0:t=r.filter((function(t){return t.checkboxEl.checked})).map((function(t){return t.historyItem})),e=new jb(jH("msg-restoring")+" (0/"+t.length+")",0),n=0,i=0,o=0,s=t,d.label=1;case 1:if(!(o<s.length))return[3,11];a=s[o],d.label=2;case 2:return d.trys.push([2,8,,9]),[4,this.plugin.getHistory(a.path,null)];case 3:l=d.sent(),c=0,u=l.items,d.label=4;case 4:return c<u.length?(h=u[c]).deleted?[3,6]:[4,this.plugin.restoreVersion(h.uid)]:[3,7];case 5:return d.sent(),n++,[3,7];case 6:return c++,[3,4];case 7:return i++,[3,9];case 8:return p=d.sent(),console.error(p),[3,9];case 9:e.setMessage(jH("msg-restoring-count")+" ("+i+"/"+t.length+")"),d.label=10;case 10:return o++,[3,1];case 11:return setTimeout((function(){return e.hide()}),4e3),new jb(jH("msg-restoring-complete",{succeeded:n,failed:t.length-n})),[2]}}))}))}));for(var s=0,a=function(t){if(t.folder)return"continue";var e=i.createDiv({cls:"list-item deleted-file-item"}),n=e.createEl("input",{type:"checkbox"}),a={checkboxEl:n,historyItem:t};e.createDiv({cls:"list-item-part mod-extended",text:oe(t.path)});var l=window.moment(t.ts).fromNow();t.device&&(l="["+t.device+"] "+l),e.createDiv({cls:"u-muted u-small list-item-part",text:l}),e.addEventListener("click",(function(t){var e=r.indexOf(a),i=!n.checked;if(t.shiftKey)for(var l=Math.min(s,e),c=Math.max(s,e),u=l;u<=c;u++)r[u].checkboxEl.checked=i;s=e,t.target!==n&&(n.checked=i),setTimeout((function(){var t=r.filter((function(t){return t.checkboxEl.checked})).length;o.setText(jH("button-restore-selected-files")+" ("+t+")"),o.toggleClass("mod-cta",t>0)}),5)})),r.push(a)},l=0,c=this.history;l<c.length;l++){a(c[l])}},e}(KD),YH=function(t){function e(e,n){var i=t.call(this,e)||this;return i.plugin=null,i.vaultName="",i.useOwnKey=!0,i.key="",i.errorEl=null,i.plugin=n,i.setTitle(jH("label-create-remote-vault")).addButton("mod-cta","Create",i.onCreateVault.bind(i)).addCancelButton(),i}return M(e,t),e.prototype.onCreateVault=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u=this;return A(this,(function(h){switch(h.label){case 0:return e=(t=this).app,n=t.vaultName,i=t.useOwnKey,r=t.key,o=t.errorEl,s=t.plugin,o.hide(),a="",!0===i&&""===r&&(a=jH("msg-please-enter-password")),""===n&&(a=jH("msg-vault-name-cannot-be-empty")),a?(o.setText(a),o.show(),[2,!0]):(c=null,i?(l=s.getSalt(),[4,s.makeKeyHash(r,l)]):[3,2]);case 1:c=h.sent(),h.label=2;case 2:return e.account.createVault(n,c,l,(function(t){if(t.error)return o.setText(t.error),void o.show();e.account.getVaults((function(){u.close(),new jb(jH("msg-successfully-created-vault",{name:n})),u.plugin.openChooseRemoteVaultModal()}))})),[2,!0]}}))}))},e.prototype.onOpen=function(){var t=this;this.vaultName="",this.useOwnKey=!0,this.key="";var e=this.contentEl;e.empty(),e.createDiv("message-container",(function(e){t.errorEl=e.createDiv("message mod-error"),t.errorEl.hide()})),e.createEl("p",{text:jH("label-remote-vault-explanation")}),new DA(e).setName(jH("option-vault-name")).setDesc(jH("option-vault-name-desc")).addText((function(e){return e.setPlaceholder(jH("option-vault-name-placeholder")).onChange((function(e){return t.vaultName=e}))}));var n=null;new DA(e).setName(jH("option-use-custom-encryption-password")).setDesc(createFragment((function(t){t.createDiv({text:jH("option-use-custom-encryption-password-desc")}),t.createDiv({cls:"mod-warning",text:jH("option-use-custom-encryption-password-desc-warning")})}))).addToggle((function(e){return e.setValue(!0).onChange((function(e){n.settingEl.toggle(e),t.useOwnKey=e}))})),n=new DA(e).setName(jH("option-encryption-password")).setDesc(createFragment((function(t){t.createDiv({text:jH("option-encryption-password-desc")}),t.createDiv({cls:"mod-warning",text:jH("option-encryption-password-desc-warning")}),t.createDiv({text:jH("option-encryption-password-desc-2")})}))).addText((function(e){e.inputEl.type="password",e.setPlaceholder(jH("option-encryption-password-placeholder")).onChange((function(e){return t.key=e}))}))},e}($D),JH=function(t){function e(e,n,i){var r=t.call(this,e)||this;r.plugin=null,r.promptKeyModal=null,r.settingTab=null,r.keyInputEl=null,r.currentVaultInfo=null,r.errorEl=null,r.settingTab=i;var o=document.createDocumentFragment(),s=o.createDiv("loader-cube",(function(t){for(var e=1;e<=9;e++)t.createDiv({cls:"sk-cube sk-cube"+e})}));s.hide();var a=o.createDiv({},(function(t){t.createDiv("message-container",(function(t){r.errorEl=t.createDiv("message mod-error")})),r.errorEl.hide(),t.createEl("p","u-center-text",(function(t){t.createEl("label",{cls:"input-label",text:jH("option-encryption-password")}),r.keyInputEl=t.createEl("input",{type:"password"},(function(t){t.setAttribute("placeholder",jH("option-encryption-password-placeholder"))}))}))}));return r.plugin=n,r.promptKeyModal=new $D(e).setTitle(jH("label-enter-encryption-password")).setContent(o).addButton("mod-cta",jH("button-unlock-vault"),(function(){return D(r,void 0,void 0,(function(){var t,n,i;return A(this,(function(r){switch(r.label){case 0:s.show(),a.hide(),this.errorEl.hide(),t=this.keyInputEl.value,r.label=1;case 1:return r.trys.push([1,5,,6]),n=this.currentVaultInfo,[4,this.plugin.verifyPassword(n.id,t,n.salt,n.host)];case 2:return r.sent(),new jb(jH("msg-verified-password")),[4,this.plugin.setup(n.id,n.name,t,n.salt,n.host)];case 3:return r.sent(),[4,this.plugin.setPause(!0)];case 4:return r.sent(),new oV(e,this.plugin,this.settingTab,n.name).open(),this.promptKeyModal.close(),this.onOpen(),[3,6];case 5:return i=r.sent(),console.error(i),i instanceof XMLHttpRequest?this.errorEl.setText(Ee("plugins.publish.msg-network-error")):this.errorEl.setText(i.message),this.errorEl.show(),[3,6];case 6:return a.show(),s.hide(),[2,!0]}}))}))})).addCancelButton(),r}return M(e,t),e.prototype.onOpen=function(){var t=this,e=this.contentEl;e.empty();var n=e.createDiv(),i=this.plugin.getRemoteVaultId();this.titleEl.setText(jH("label-remote-vaults"));var r=e.createDiv("loader-cube",(function(t){for(var e=1;e<=9;e++)t.createDiv({cls:"sk-cube sk-cube"+e})}));this.app.account.getVaults((function(e){n.empty();for(var o=n.createDiv("vault-list"),s=function(e){var s=i===e.id;o.createDiv("vault-list-item list-item",(function(o){o.toggleClass("is-connected",s),o.createDiv("vault-list-item-icon list-item-part",(function(t){Ty(t,s?Hm:zm,16)})),o.createDiv({cls:"vault-list-item-title list-item-part",text:e.name}),o.createDiv({cls:"vault-list-item-creation-time list-item-part mod-extended",text:jH("label-vault-created-time",{time:window.moment(e.created).fromNow()})}),s||o.createDiv("list-item-part clickable-icon",(function(i){Ty(i,Ug),$e(i,jH("tooltip-delete-remote-vault")),i.addEventListener("click",(function(){var i=document.createDocumentFragment();i.createEl("p",{text:jH("label-confirm-delete-remote-vault-question")}),i.createEl("p",{text:jH("label-confirm-delete-remote-vault-result")}),i.createEl("p",{cls:"mod-warning",text:jH("label-confirm-delete-remote-vault-warning")}),new $D(t.app).setTitle(jH("label-confirm-delete-remote-vault")).setContent(i).addButton("mod-warning","Delete",(function(){n.hide(),r.show(),t.app.account.deleteVault(e.id,(function(){new jb(jH("msg-remote-vault-deleted",{name:e.name})),t.open()}))})).addCancelButton().open()}))})),s?o.createEl("button",{cls:"list-item-part vault-list-item-button",text:jH("button-disconnect-from-remote-vault")}).addEventListener("click",(function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return n.hide(),r.show(),[4,this.plugin.unsetup()];case 1:return t.sent(),this.open(),[2]}}))}))})):i||o.createEl("button",{cls:"list-item-part vault-list-item-button",text:jH("button-connect-to-remote-vault")},(function(i){i.addClass("mod-cta"),i.addEventListener("click",(function(){var i=function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return e.password?[3,1]:(this.currentVaultInfo=e,this.keyInputEl.value="",this.promptKeyModal.open(),[3,4]);case 1:return n.hide(),r.show(),[4,this.plugin.setup(e.id,e.name,e.password,e.salt,e.host)];case 2:return t.sent(),[4,this.plugin.setPause(!0)];case 3:t.sent(),this.close(),new oV(o,this.plugin,this.settingTab,e.name).open(),t.label=4;case 4:return[2]}}))}))},o=t.app;o.vault.getFiles().length>0?new $D(o).setTitle(jH("label-confirm-merge-vault")).setContent(createFragment((function(t){t.createEl("p",{text:jH("msg-vault-has-notes")}),t.createEl("p",{text:jH("msg-merge-warning",{name:e.name})})}))).addButton("mod-cta",Ee("dialogue.button-continue"),i).addCancelButton().open():i()}))}))}))},a=0,l=e;a<l.length;a++){s(l[a])}0===e.length&&n.createDiv("vault-empty-state",(function(t){t.createEl("p",{text:jH("label-not-remote-vaults")})})),e.length<5&&n.createDiv("button-container u-center-text",(function(e){e.createEl("button",{cls:"mod-cta js-create-vault",text:jH("button-create-new-remote-vault")},(function(e){e.addEventListener("click",(function(){new YH(t.app,t.plugin).open()}))}))})),r.hide()}))},e.prototype.onClose=function(){t.prototype.onClose.call(this),this.settingTab.display()},e}(KD),QH=function(t){function e(e,n){var i=t.call(this,e)||this;i.plugin=null,i.syncLog=[],i.syncLogContainerEl=null,i.errorOnly=!1,i.updateSyncLog=function(){for(var t=i.syncLogContainerEl,e=i.syncLog=i.plugin.syncLog,n=function(t){if(t.el)return"continue";t.el=createDiv("list-item",(function(e){var n,i=window.moment(t.ts).format("YYYY-MM-DD HH:mm")+" - "+t.info+" "+(null!==(n=t.file)&&void 0!==n?n:"");e.createSpan({text:i})})),t.error&&t.el.addClass("mod-error")},r=0,o=e;r<o.length;r++){n(o[r])}i.errorOnly&&(e=e.filter((function(t){return t.error}))),t.setChildrenInPlace(e.map((function(t){return t.el}))),t.scrollTop=t.scrollHeight},i.plugin=n;var r=i,o=r.titleEl,s=r.contentEl;return r.modalEl.addClass("mod-sync-log"),o.setText(jH("label-sync-log")),new DA(s).setName(jH("options-only-show-errors")).setDesc(jH("options-only-show-errors-desc")).addToggle((function(t){return t.onChange((function(t){i.errorOnly=t,i.updateSyncLog()}))})),i.syncLogContainerEl=s.createDiv("sync-log-container"),s.createDiv("modal-button-container",(function(t){t.createEl("button",{text:jH("button-copy-sync-log"),cls:"mod-cta"}).addEventListener("click",i.onCopyResults.bind(i)),t.createEl("button",{text:Ee("dialogue.button-done")}).addEventListener("click",(function(){return i.close()}))})),i}return M(e,t),e.prototype.onOpen=function(){t.prototype.onOpen.call(this),this.updateSyncLog(),this.plugin.on("new-log",this.updateSyncLog)},e.prototype.onClose=function(){this.plugin.off("new-log",this.updateSyncLog),t.prototype.onClose.call(this)},e.prototype.onCopyResults=function(){for(var t="",e=0,n=this.syncLog;e<n.length;e++){var i=n[e];t+=""+window.moment(i.ts).format("YYYY-MM-DD HH:mm"),t+=" - "+i.info,i.file&&(t+=" "+i.file),t+="\n"}Ae(t),new jb(jH("msg-successfully-copied-sync-log"))},e}(KD),XH=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.vaults=[],r.manageExcludedFoldersModal=null,r.sync=i,r.manageExcludedFoldersModal=new iV(e,i,r),r}return M(e,t),e.prototype.display=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g=this;return A(this,(function(m){switch(m.label){case 0:if(e=(t=this).app,n=t.sync,i=t.containerEl,r=e.account,i.empty(),o=n.getRemoteVaultId(),s=n.getRemoteVaultName(),!r.email)return this.displayRequireLogin(),[2];if(o)return[3,7];if(a=i.createDiv("loader-cube",(function(t){for(var e=1;e<=9;e++)t.createDiv({cls:"sk-cube sk-cube"+e})})),r.email)return[3,5];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,r.getUserInfo()];case 2:return m.sent(),[3,4];case 3:return m.sent(),a.hide(),i.createEl("p",{text:Ee("plugins.publish.msg-network-error")}),i.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:jH("button-retry")},(function(t){t.addEventListener("click",(function(){g.display()}))}))})),[2];case 4:if(!r.email)return this.displayRequireLogin(),[2];m.label=5;case 5:return[4,r.getSubscriptions()];case 6:if(l=m.sent(),a.hide(),!l.sync)return i.createEl("p",{cls:"u-center-text",text:jH("label-no-sync-subscription")}),i.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:jH("button-purchase-subscription")},(function(t){t.addEventListener("click",(function(){window.open("http://obsidian.md/pricing","_blank")}))}))})),[2];m.label=7;case 7:return i.empty(),c=new DA(i).setName(jH("option-pick-remote-vault")),s?(c.setDesc(jH("option-pick-remote-vault-desc-connected",{name:s})),c.addExtraButton((function(t){return t.setIcon(Am).setTooltip(jH("button-disconnect-from-remote-vault")).onClick((function(){return D(g,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.sync.unsetup()];case 1:return t.sent(),[4,this.display()];case 2:return t.sent(),[2]}}))}))}))}))):c.setDesc(jH("option-pick-remote-vault-desc-not-connected")),c.addButton((function(t){return t.setButtonText("Choose").onClick((function(){n.openChooseRemoteVaultModal()}))})),o&&(n.getPause()?new DA(i).setName(jH("option-sync-status")).setDesc(jH("option-sync-status-desc-paused")).addButton((function(t){return t.setButtonText(jH("button-resume")).setCta().onClick((function(){n.setPause(!1),n.requestSync(),g.display()}))})):new DA(i).setName(jH("option-sync-status")).setDesc(jH("option-sync-status-desc-running")).addButton((function(t){return t.setButtonText(jH("button-pause")).onClick((function(){n.setPause(!0),g.display()}))})),new DA(i).setName(jH("option-device-name")).setDesc(jH("option-device-name-desc")).addText((function(t){return t.setPlaceholder(n.getDefaultDeviceName()).setValue(n.deviceName).onChange((function(t){n.deviceName=t,n.forceSaveData()}))})),new DA(i).setName(jH("option-view-deleted-files")).setDesc(jH("option-view-deleted-files-desc")).addButton((function(t){return t.setButtonText(jH("button-view")).onClick((function(){return n.showDeletedFiles()}))})).addButton((function(t){return t.setButtonText(jH("button-bulk-restore")).onClick((function(){return n.showDeletedFiles(!0)}))})),new DA(i).setName(jH("option-sync-log")).setDesc(jH("option-sync-log-desc")).addButton((function(t){return t.setButtonText(jH("button-view")).onClick((function(){return n.showSyncLog()}))})),h=function(){return D(g,void 0,void 0,(function(){var t,e,i,r;return A(this,(function(o){switch(o.label){case 0:return[4,n.size()];case 1:return t=o.sent(),e=t.size>t.limit,p.settingEl.toggle(e),i=t.size<0?"Unknown":ct(t.size),r=t.limit<0?"Unknown":ct(t.limit),u.setText(jH("option-over-size-desc",{size:i,limit:r})),[2]}}))}))},(p=new DA(i).setName(jH("option-over-size")).setDesc(createFragment((function(t){u=t.createSpan({text:""})}))).addButton((function(t){return t.setButtonText(jH("msg-largest-files")).onClick((function(){new rV(e,n).open()}))})).addButton((function(t){return t.setWarning().setButtonText(jH("button-purge-remote")).setTooltip(jH("tooltip-purge-remote")).onClick((function(){return D(g,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,n.purge()];case 1:return t.sent(),new jb(jH("msg-purge-complete")),[4,h()];case 2:return t.sent(),[2]}}))}))}))}))).settingEl.hide(),h(),new DA(i).setHeading().setName(jH("option-selective-sync")),new DA(i).setName(jH("option-excluded-folders")).setDesc(createFragment((function(t){var e=g.sync.ignoreFolders;if(t.appendText(jH("option-excluded-folder-desc")),e.length>0){t.appendText(jH("option-currently-excluded-folders"));for(var n=t.createEl("ul"),i=0,r=e;i<r.length;i++){var o=r[i];n.createEl("li",{text:o})}}}))).addButton((function(t){return t.setButtonText(jH("button-manage-excluded-folders")).onClick((function(){g.manageExcludedFoldersModal.open()}))})),(d=function(t,e){new DA(i).setName(jH("option-sync-"+t)).setDesc(jH("option-sync-"+t+"-desc",e)).addToggle((function(e){return e.setValue(n.allowTypes.has(t)).onChange((function(e){return n.setSyncType(t,e)}))}))})("image",{extensions:Vt.join(", ")}),d("audio",{extensions:qt.join(", ")}),d("video",{extensions:jt.join(", ")}),d("pdf"),d("unsupported"),f=function(t){new DA(i).setName(jH("option-sync-"+t)).setDesc(jH("option-sync-"+t+"-desc")).addToggle((function(e){return e.setValue(n.allowSpecialFiles.has(t)).onChange((function(e){return n.setAllowSpecialFile(t,e)}))}))},new DA(i).setHeading().setName(jH("option-vault-config-sync")),new DA(i).setName(jH("option-view-config-files")).setDesc(jH("option-view-config-files-desc")).addButton((function(t){return t.setButtonText(jH("button-view")).onClick((function(){return n.showConfigFiles()}))})),f("app"),f("appearance"),f("appearance-data"),f("hotkey"),f("core-plugin"),f("core-plugin-data"),f("community-plugin"),f("community-plugin-data")),[2]}}))}))},e.prototype.displayRequireLogin=function(){var t=this,e=this.containerEl;e.createEl("p",{text:"Obsidian Sync is Obsidian's add-on sync service with end-to-end encryption and version history."}),e.createEl("p",{text:"To start syncing, please log in or create a new Obsidian account."}),e.createDiv("modal-button-container",(function(e){e.createEl("button",{cls:"mod-cta",text:jH("button-sign-up")},(function(t){t.addEventListener("click",(function(){window.open("http://obsidian.md/account","_blank")}))})),e.createEl("button",{text:jH("button-log-in")},(function(e){e.addEventListener("click",(function(){t.setting.openTabById("account")}))}))}))},e}(NN),ZH=function(){function t(t,e){this.socket=null,this.queue=new Eh,this.cryptoKey=null,this.keyhash=null,this.cryptoKey=t,this.keyhash=e}return t.prototype.isConnecting=function(){var t=this.socket;return t&&t.readyState===RH.CONNECTING},t.prototype.isConnected=function(){var t=this.socket;return t&&t.readyState===RH.OPEN},t.prototype.hasConnection=function(){return!!this.socket},t.prototype.connect=function(t,e,n,i,r,o,s,a){return D(this,void 0,Promise,(function(){var l=this;return A(this,(function(c){return this.hasConnection()?[2]:(this.onReady=s,this.onPush=a,[2,new Promise((function(s,a){var c=!1,u=function(t){c||(c=!0,l.disconnect(),a(t))},h=l.socket=new RH(t);h.binaryType="arraybuffer",h.onclose=function(t){u(new Error("Disconnected. Code: "+t.code+" "+function(t){if(t>=0&&t<=999)return"(Unused)";if(t>=1016){if(t<=1999)return"(For WebSocket standard)";if(t<=2999)return"(For WebSocket extensions)";if(t<=3999)return"(For libraries and frameworks)";if(t<=4999)return"(For applications)"}return BH.hasOwnProperty(t)?BH[t]:"(Unknown)"}(t.code)))},h.onopen=function(){l.lastMessageTs=Date.now(),l.heartbeat=window.setInterval((function(){var t=Date.now()-l.lastMessageTs;t>12e4?l.disconnect():t>1e4&&l.send({op:"ping"})}),2e4),l.send({op:"init",token:e,id:n,keyhash:l.keyhash,version:i,initial:r,device:o})},h.onmessage=function(t){var e,n=t.data;if("string"!=typeof n)return u(new Error("Server returned binary"));try{e=JSON.parse(n)}catch(t){return console.error(t),u(new Error("Server JSON failed to parse: "+n))}return"err"===e.status?u(new Error("Failed to authenticated: "+e.msg)):"ok"!==e.res?u(new Error("Did not respond to login request: "+n)):(s(),c=!0,h.onmessage=l.onMessage.bind(l),h.onclose=l.disconnect.bind(l),void(h.onerror=l.disconnect.bind(l)))}}))])}))}))},t.prototype.disconnect=function(){this.socket&&this.socket.close(),this.socket=null,clearInterval(this.heartbeat),this.heartbeat=null;var t=new Error("Disconnected");this.responsePromise&&(this.responsePromise.reject(t),this.responsePromise=null),this.dataPromise&&(this.dataPromise.reject(t),this.dataPromise=null)},t.prototype.pull=function(t){return D(this,void 0,Promise,(function(){var e=this;return A(this,(function(n){return[2,this.queue.queue((function(){return D(e,void 0,void 0,(function(){var e,n,i,r,o,s,a;return A(this,(function(l){switch(l.label){case 0:return[4,this.request({op:"pull",uid:t})];case 1:if((e=l.sent()).deleted)return[3,8];n=e.size,i=e.pieces,r=new ArrayBuffer(n),o=0,s=0,l.label=2;case 2:return s<i?[4,this.dataResponse()]:[3,5];case 3:a=l.sent(),new Uint8Array(r,o,a.byteLength).set(new Uint8Array(a)),o+=a.byteLength,l.label=4;case 4:return s++,[3,2];case 5:return r.byteLength>0?[4,ot(r,this.cryptoKey)]:[3,7];case 6:r=l.sent(),l.label=7;case 7:return[2,r];case 8:return[2,null]}}))}))}))]}))}))},t.prototype.push=function(t,e,n,i,r,o,s){return D(this,void 0,Promise,(function(){var a=this;return A(this,(function(l){return[2,this.queue.queue((function(){return D(a,void 0,void 0,(function(){var a,l,c,u,h,p,d,f;return A(this,(function(g){switch(g.label){case 0:return[4,this.encodeStr(t)];case 1:return a=g.sent(),l=e?"":Xt(Kt(t)),e||n?[4,this.request({op:"push",path:a,extension:l,hash:"",ctime:0,mtime:0,folder:e,deleted:n})]:[3,3];case 2:return g.sent(),[2];case 3:return s.byteLength>0?[4,rt(s,this.cryptoKey)]:[3,5];case 4:s=g.sent(),g.label=5;case 5:return o?[4,this.encodeStr(o)]:[3,7];case 6:o=g.sent(),g.label=7;case 7:return c=s.byteLength,u=2097152,h=Math.ceil(c/u),[4,this.request({op:"push",path:a,extension:l,hash:o,ctime:i,mtime:r,folder:e,deleted:n,size:c,pieces:h})];case 8:if("ok"===g.sent().res)return[2];p=0,g.label=9;case 9:return p<h?(d=p*u,f=Math.min(u,c-d),this.sendBinary(new Uint8Array(s,d,f)),[4,this.response()]):[3,12];case 10:g.sent(),g.label=11;case 11:return p++,[3,9];case 12:return[2]}}))}))}))]}))}))},t.prototype.listDeleted=function(){return D(this,void 0,Promise,(function(){var t=this;return A(this,(function(e){return[2,this.queue.queue((function(){return D(t,void 0,void 0,(function(){var t,e,n,i,r,o;return A(this,(function(s){switch(s.label){case 0:return[4,this.request({op:"deleted"})];case 1:t=s.sent(),e=t.items,n=0,i=e,s.label=2;case 2:return n<i.length?(r=i[n],o=r,[4,this.decodeStr(r.path)]):[3,5];case 3:o.path=s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,e]}}))}))}))]}))}))},t.prototype.listHistory=function(t,e){return D(this,void 0,Promise,(function(){var n=this;return A(this,(function(i){return[2,this.queue.queue((function(){return D(n,void 0,void 0,(function(){var n,i,r,o,s,a,l;return A(this,(function(c){switch(c.label){case 0:return[4,this.encodeStr(t)];case 1:return n=c.sent(),[4,this.request({op:"history",path:n,last:e})];case 2:i=c.sent(),r=i.items,o=0,s=r,c.label=3;case 3:return o<s.length?(a=s[o],l=a,[4,this.decodeStr(a.path)]):[3,6];case 4:l.path=c.sent(),c.label=5;case 5:return o++,[3,3];case 6:return[2,i]}}))}))}))]}))}))},t.prototype.restore=function(t){return D(this,void 0,Promise,(function(){var e=this;return A(this,(function(n){return[2,this.queue.queue((function(){return D(e,void 0,void 0,(function(){return A(this,(function(e){return[2,this.request({op:"restore",uid:t})]}))}))}))]}))}))},t.prototype.purge=function(){return D(this,void 0,Promise,(function(){var t=this;return A(this,(function(e){return[2,this.queue.queue((function(){return t.request({op:"purge"})}))]}))}))},t.prototype.size=function(){return D(this,void 0,Promise,(function(){var t=this;return A(this,(function(e){return[2,this.queue.queue((function(){return t.request({op:"size"})}))]}))}))},t.prototype.onServerPush=function(t){return D(this,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return e=t,[4,this.decodeStr(t.path)];case 1:return e.path=i.sent(),t.hash?(n=t,[4,this.decodeStr(t.hash)]):[3,3];case 2:n.hash=i.sent(),i.label=3;case 3:return this.onPush(t),[2]}}))}))},t.prototype.response=function(){return(this.responsePromise=Mh()).promise},t.prototype.dataResponse=function(){return(this.dataPromise=Mh()).promise},t.prototype.request=function(t,e){return void 0===e&&(e=6e4),D(this,void 0,Promise,(function(){var n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:n=this.responsePromise=Mh(),this.send(t),i=new Error("Timeout"),r=window.setTimeout((function(){return n.reject(i)}),e),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.promise];case 2:return o=a.sent(),clearTimeout(r),[3,4];case 3:throw(s=a.sent())===i&&this.disconnect(),s;case 4:if(o.err)throw new Error(o.err);return[2,o]}}))}))},t.prototype.onMessage=function(t){if(this.lastMessageTs=Date.now(),"string"==typeof t.data){var e=void 0;try{e=JSON.parse(t.data)}catch(e){return console.log(t.data),void this.disconnect()}var n=e.op;if("pong"===n)return;if("ready"===n)return void this.onReady(e.version);if("push"===n)return void this.onServerPush(e);var i=this.responsePromise;i&&(this.responsePromise=null,i.resolve(e))}else{var r=this.dataPromise;r&&(this.dataPromise=null,r.resolve(t.data))}},t.prototype.send=function(t){this.socket.send(JSON.stringify(t))},t.prototype.sendBinary=function(t){this.socket.send(t)},t.prototype.encodeStr=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:return[4,Z(e=K(t))];case 1:return n=o.sent(),i=new Uint8Array(n,0,12),r=et,[4,rt(e,this.cryptoKey,i)];case 2:return[2,r.apply(void 0,[o.sent()])]}}))}))},t.prototype.decodeStr=function(t){return D(this,void 0,Promise,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return e=$,[4,ot(tt(t),this.cryptoKey)];case 1:return[2,e.apply(void 0,[n.sent()])]}}))}))},t}(),tV=function(t,e){return DN(t.folder.name,e.folder.name)},eV=function(t){function e(e,n){var i=t.call(this)||this;i.checked=!0,i.children=[],i.owner=e,i.folder=n;var r=i.innerEl;i.selfEl.addClass("mod-folder");var o=i.checkboxEl=r.createEl("input",{cls:"file-tree-item-checkbox",type:"checkbox"});return o.checked=!0,o.addEventListener("change",i.updateChecked.bind(i)),Ty(r.createDiv("file-tree-item-icon"),Kg,20),r.createDiv({cls:"file-tree-item-title",text:n.name}),i}return M(e,t),e.prototype.onSelfClick=function(t){this.checkboxEl.disabled||(this.setChecked(!this.checked),this.owner.updateStatus())},e.prototype.setChecked=function(t){!this.checked===t&&(this.checked=t,this.updateChecked(),this.updateDisabledRecursive())},e.prototype.updateChecked=function(){var t=this.checked;this.checkboxEl.checked=t,this.selfEl.toggleClass("is-selected",t)},e.prototype.setDisabled=function(t){this.checkboxEl.disabled!==t&&(this.checkboxEl.disabled=t,this.checked=t,this.updateChecked())},e.prototype.updateDisabledRecursive=function(){for(var t=this.checkboxEl.disabled||this.checked,e=0,n=this.children;e<n.length;e++){var i=n[e];i.setDisabled(t),i.updateDisabledRecursive()}},e.prototype.sort=function(){for(var t=0,e=this.children;t<e.length;t++){e[t].sort()}this.children.sort(tV)},e.prototype.render=function(){t.prototype.render.call(this),this.setCollapsible(this.children.length>0)},e.prototype.getExcludedFolders=function(){var t=this.checkboxEl,e=[];if(!t.disabled&&t.checked&&e.push(this.folder.path),!t.disabled)for(var n=0,i=this.children;n<i.length;n++){var r=i[n];e=e.concat(r.getExcludedFolders())}return e},e.prototype.setStatusFromIgnoreFolders=function(t){var e=t.contains(this.folder.path);if(!e)for(var n=0,i=this.children;n<i.length;n++){i[n].setStatusFromIgnoreFolders(t)}this.setChecked(e)},e}(Lz),nV=function(t){function e(e,n){var i=t.call(this,n)||this;return i.folders={},i.children=[],i.owner=e,n.addClass("file-tree"),i}return M(e,t),e.prototype.addFolderRecursive=function(t,e){var n=new eV(this.owner,t);this.folders[t.path]=n,e?e.children.push(n):this.addRoot(n);for(var i=0,r=t.children;i<r.length;i++){var o=r[i];o instanceof ub&&this.addFolderRecursive(o,n)}},e.prototype.sort=function(){for(var t=0,e=this.children;t<e.length;t++){e[t].sort()}this.children.sort(tV)},e.prototype.clear=function(){t.prototype.clear.call(this),this.folders={}},e}(Dz),iV=function(t){function e(e,n,i){var r=t.call(this,e)||this;r.sync=null,r.settingTab=null,r.excludedFolderCountEl=null,r.fileTreeContainerEl=null,r.sync=n,r.settingTab=i;var o=r,s=o.contentEl;return o.titleEl.setText(jH("label-manage-excluded-folders")),r.excludedFolderCountEl=s.createEl("p"),r.fileTreeContainerEl=s.createDiv("sync-file-tree-container"),r.tree=new nV(r,r.fileTreeContainerEl),s.createDiv("modal-button-container").createEl("button",{cls:"mod-cta",text:Ee("dialogue.button-done")},(function(t){t.addEventListener("click",r.close.bind(r))})),r}return M(e,t),e.prototype.onOpen=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a;return A(this,(function(l){for((t=this.tree).clear(),e=this.app.vault.getRoot(),n=0,i=e.children;n<i.length;n++)(a=i[n])instanceof ub&&t.addFolderRecursive(a);for(t.sort(),t.render(),r=this.sync.ignoreFolders,o=0,s=t.children;o<s.length;o++)(a=s[o]).setStatusFromIgnoreFolders(r);return this.updateExcludedFolderCount(),[2]}))}))},e.prototype.onClose=function(){this.settingTab.display()},e.prototype.updateExcludedFolderCount=function(){var t=this.sync.ignoreFolders.length,e=Ee("nouns.folder-with-count",{count:t});this.excludedFolderCountEl.setText(jH("label-number-of-folders-excluded",{folders:e}))},e.prototype.updateStatus=function(){for(var t=[],e=0,n=this.tree.children;e<n.length;e++){var i=n[e];t=t.concat(i.getExcludedFolders())}this.sync.setIgnoreFolders(t),this.updateExcludedFolderCount()},e}(KD),rV=function(t){function e(e,n){var i=t.call(this,e)||this;return i.sync=n,i.titleEl.setText(jH("msg-largest-files")),i.contentEl.createDiv({text:jH("msg-largest-files-desc")}),i}return M(e,t),e.prototype.onOpen=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s;return A(this,(function(a){for(n in t=this.sync.serverFiles,e=[],t)t.hasOwnProperty(n)&&(s=t[n]).size>0&&e.push(s);for(e=e.sort((function(t,e){return e.size-t.size})).slice(0,20),i=this.contentEl,r=0,o=e;r<o.length;r++)s=o[r],i.createDiv({cls:"u-small u-muted",text:s.path+" ("+ct(s.size)+")"});return[2]}))}))},e}(KD),oV=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;o.sync=null,o.settingTab=null,o.sync=n,o.settingTab=i;var s=o,a=s.contentEl;s.titleEl.setText(jH("label-setup-connection")),a.createEl("p",{text:jH("label-now-connected-to-vault",{name:r})});var l=a.createDiv("modal-button-container");return l.createEl("button",{text:jH("button-start-syncing")},(function(t){t.addEventListener("click",(function(){return D(o,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return this.sync.setPause(!1),[4,this.settingTab.display()];case 1:return t.sent(),this.close(),[2]}}))}))}))})),l.createEl("button",{text:jH("label-manage-excluded-folders")},(function(t){t.addEventListener("click",(function(){o.settingTab.manageExcludedFoldersModal.open()}))})),o}return M(e,t),e}(KD),sV=function(){function t(){this.id="tag-pane",this.name=Ee("plugins.tag-pane.name"),this.description=Ee("plugins.tag-pane.desc")}return t.prototype.init=function(t,e){var n=this;this.app=t,this.plugin=e,e.registerGlobalCommand({id:"tag-pane:open",name:Ee("plugins.tag-pane.action-show"),icon:ov,callback:function(){n.app.workspace.ensureSideLeaf(aV,"right",!1)}}),e.registerViewType(aV,(function(t){return new dV(t)}))},t.prototype.onEnable=function(t,e){e.registerEvent(t.workspace.on("layout-ready",this.initLeaf,this))},t.prototype.onUserEnable=function(){this.initLeaf()},t.prototype.initLeaf=function(){var t="right";By.isMobile&&(t="left"),this.app.workspace.ensureSideLeaf(aV,t,!1,!1)},t}(),aV="tag",lV=[["alphabetical","alphabeticalReverse"],["frequency","frequencyReverse"]],cV={alphabetical:"plugins.tag-pane.label-sort-by-name-a-to-z",alphabeticalReverse:"plugins.tag-pane.label-sort-by-name-z-to-a",frequency:"plugins.tag-pane.label-sort-by-frequency-high-to-low",frequencyReverse:"plugins.tag-pane.label-sort-by-frequency-low-to-high"},uV=function(){this.info={height:0,width:0,childTop:0,computed:!1,queued:!1,hidden:!1},this.el=createDiv({cls:"pane-empty tag-pane-empty",text:Ee("plugins.tag-pane.label-no-tags")})},hV=function(t){function e(e){var n=t.call(this)||this;n.info={height:0,width:0,childTop:0,computed:!1,queued:!1,hidden:!1},n.tag="",n.count=-1,n.children=[],n.pusherEl=tB(),n.tagView=e;var i=n,r=i.selfEl,o=i.innerEl;return r.addClass("tag-pane-tag"),n.tagTextEl=o.createDiv("tag-pane-tag-text"),n.tagCountEl=r.createDiv("tree-item-flair-outer").createSpan("tag-pane-tag-count tree-item-flair"),n.setCollapsible(!0),n.setClickable(!0),n}return M(e,t),e.prototype.onSelfClick=function(t){var e="tag:"+this.tag,n=this.tagView.app.internalPlugins.getPluginById("global-search");if(n){var i=n.instance;if(i){var r=i.getGlobalSearchQuery();if(!Bb.isModifier(t,"Mod")||""===r)return void i.openGlobalSearch(e);r.contains(e)?i.openGlobalSearch(r.replace(e,"").trim()):i.openGlobalSearch(r.trim()+" "+e)}}},e.prototype.setTag=function(t){if(this.tag!==t){this.tag=t;var e=this.tagTextEl;t.startsWith("#")&&(t=t.substr(1));var n=t.split("/").last(),i=t.substr(0,t.length-n.length);e.empty(),e.createSpan({cls:"tag-pane-tag-parent",text:i}),e.createSpan({cls:"tag-pane-tag-self",text:n})}return this},e.prototype.setCount=function(t){this.count!==t&&(this.count=t,this.tagCountEl.setText(String(t)));return this},e.prototype.updateCollapsed=function(e){return D(this,void 0,Promise,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,t.prototype.updateCollapsed.call(this,e)];case 1:return n.sent(),this.tagView.infinityScroll.invalidate(this),this.tagView.requestSaveFold(),[2]}}))}))},e}(NI),pV=function(t){this.children=[],this.info={height:0,width:0,childTop:0,computed:!1,queued:!1,hidden:!1},this.pusherEl=tB(),this.el=t,this.childrenEl=t.createDiv()},dV=function(t){function e(e){var n=t.call(this,e)||this;n.icon=dm,n.tagPaneEl=null,n.sortOrder="frequency",n.useHierarchy=!1,n.tagDoms={},n.requestSaveFold=De(n.saveFold.bind(n),500);var i=n.containerEl,r=new cB(n.app,i);r.addNavButton(Lm,Ee("plugins.file-explorer.action-change-sort"),(function(t){t.preventDefault();for(var e=new zb(n.app),i=n.sortOrder,r=0,o=lV;r<o.length;r++){for(var s=function(t){var r=Ee(cV[t]);e.addItem((function(e){return e.setTitle(r).setActive(t===i).onClick((function(){n.sortOrder=t,n.requestUpdateTags(),n.app.workspace.requestSaveLayout()}))}))},a=0,l=o[r];a<l.length;a++){s(l[a])}e.addSeparator()}e.showAtMouseEvent(t)})),n.useHierarchyEl=r.addNavButton(ev,Ee("plugins.tag-pane.action-show-nested-tags"),(function(){return n.setUseHierarchy(!n.useHierarchy)}));var o=n.tagPaneEl=i.createDiv("tag-container");return n.infinityScroll=new nB(o),n.root=new pV(o),n.infinityScroll.rootEl=n.root,n.requestUpdateTags=De(n.updateTags.bind(n),10),n.setUseHierarchy(!0),n}return M(e,t),e.prototype.getDisplayText=function(){return Ee("plugins.tag-pane.name")},e.prototype.getViewType=function(){return aV},e.prototype.getState=function(){var e=t.prototype.getState.call(this);return e.sortOrder=this.sortOrder,e.useHierarchy=this.useHierarchy,e},e.prototype.setState=function(e,n){return D(this,void 0,Promise,(function(){var i,r;return A(this,(function(o){switch(o.label){case 0:return[4,t.prototype.setState.call(this,e,n)];case 1:return o.sent(),i=e.sortOrder,r=e.useHierarchy,String.isString(i)&&cV.hasOwnProperty(i)&&(this.sortOrder=i),isBoolean(r)&&this.setUseHierarchy(r),this.requestUpdateTags(),[2]}}))}))},e.prototype.load=function(){t.prototype.load.call(this);var e=this.app;this.registerEvent(e.metadataCache.on("finished",this.requestUpdateTags,this)),this.requestUpdateTags()},e.prototype.onResize=function(){this.infinityScroll.onResize()},e.prototype.setUseHierarchy=function(t){this.useHierarchy!==t&&(this.useHierarchy=t,this.useHierarchyEl.toggleClass("is-active",t),this.requestUpdateTags(),this.app.workspace.requestSaveLayout())},e.prototype.saveFold=function(){if(this.app.workspace.layoutReady){var t=this.tagDoms,e=[];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i&&i.collapsed&&e.push(n)}this.app.saveLocalStorage("tag-pane-fold",e)}},e.prototype.updateTags=function(){var t=this,e=this.app,n=this.tagDoms,i=e.metadataCache.getTags(),r=Object.keys(i),o=this.tagDoms={},s=this.app.loadLocalStorage("tag-pane-fold"),a=new Set(s||null);if(r.length>0){var l=[],c=this.sortOrder,u=null;if("alphabetical"===c)u=function(t,e){return DN(t.tag,e.tag)};else if("alphabeticalReverse"===c)u=function(t,e){return-DN(t.tag,e.tag)};else{var h="frequencyReverse"===c?-1:1;u=function(t,e){var n=t.tag,r=e.tag,o=i[n],s=i[r];return o===s?DN(n,r):h*(s-o)}}var p=this.useHierarchy,d=function(e,n){var i=e.split("/").last();if(p&&i!==e){var r=e.substr(0,e.length-i.length-1),s=r.toLowerCase(),a=o[s];a||((a=new hV(t)).setTag(r),o[s]=a),a.children.contains(n)||a.children.push(n),d(r,a)}else l.contains(n)||l.push(n)};for(var f in n)n.hasOwnProperty(f)&&(n[f].children=[]);for(var g=0,m=r;g<m.length;g++){(w=n[f=(b=m[g]).toLowerCase()])||(w=new hV(this)),w.setTag(b),o[f]=w}for(var v=0,y=r;v<y.length;v++){var b;f=(b=y[v]).toLowerCase();d(b,o[f])}for(var f in o)if(o.hasOwnProperty(f)){var w,k=(w=o[f]).children.length>0;w.setCollapsible(k),w.setCount(i[w.tag]||0),k&&w.collapsed!==a.has(f)&&w.setCollapsed(a.has(f),!1)}var C=function(t){t.sort(u);for(var e=0,n=t;e<n.length;e++){var i=n[e];C(i.children)}};C(l),this.root.children=l}else this.root.children=[new uV];this.infinityScroll.queueCompute()},e}(Hb),fV=function(){function t(){this.id="templates",this.name=Ee("plugins.templates.name"),this.description=Ee("plugins.templates.desc"),this.app=null,this.plugin=null,this.options={},this.templateFiles=[]}return t.prototype.init=function(t,e){this.app=t,this.plugin=e,e.registerRibbonAction(Ee("plugins.templates.action-insert"),im,this.onInsertTemplate.bind(this)),e.registerGlobalCommand({id:"insert-template",name:Ee("plugins.templates.action-insert"),icon:Kv,callback:this.onInsertTemplate.bind(this)}),e.registerGlobalCommand({id:"insert-current-date",name:Ee("plugins.templates.action-insert-current-date"),icon:Yv,editorCallback:this.insertCurrentDate.bind(this)}),e.registerGlobalCommand({id:"insert-current-time",name:Ee("plugins.templates.action-insert-current-time"),icon:$v,editorCallback:this.insertCurrentTime.bind(this)})},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return n=this,[4,e.loadData()];case 1:return n.options=i.sent()||{},e.addSettingTab(new mV(t,e,this)),[2]}}))}))},t.prototype.insertTemplate=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a;return A(this,(function(l){switch(l.label){case 0:return n=(e=this).app,i=e.options,(r=n.workspace.getActiveViewOfType(rR))?(o=r.file,[4,this.app.vault.cachedRead(t)]):[3,2];case 1:s=l.sent(),(a=r.editor).replaceSelection(vN(s,{title:o.basename},{dateFormat:i.dateFormat,timeFormat:i.timeFormat})),a.focus(),l.label=2;case 2:return[2]}}))}))},t.prototype.onInsertTemplate=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a=this;return A(this,(function(l){return e=(t=this).app,n=t.options,(i=n.folder)&&String.isString(i)?(r=ne(mF(i).normalize("NFC")),(o=e.vault.getAbstractFileByPath(r))&&o instanceof ub?(this.templateFiles=[],(s=function(t){for(var e=0,n=t.children;e<n.length;e++){var i=n[e];i instanceof cb&&"md"===i.extension?a.templateFiles.push(i):i instanceof ub&&s(i)}})(o),1===this.templateFiles.length?(this.insertTemplate(this.templateFiles[0]),[2]):(new gV(e,this).open(),[2])):(new jb(Ee("plugins.templates.msg-fail-folder-not-found",{folderOption:i})),[2])):[2]}))}))},t.prototype.insertCurrentDate=function(t){return D(this,void 0,void 0,(function(){var e,n,i;return A(this,(function(r){return e=this.options,n=e.dateFormat||gN,i=window.moment().format(n),t.insertText(i),[2]}))}))},t.prototype.insertCurrentTime=function(t){return D(this,void 0,void 0,(function(){var e,n,i;return A(this,(function(r){return e=this.options,n=e.timeFormat||mN,i=window.moment().format(n),t.insertText(i),[2]}))}))},t}(),gV=function(t){function e(e,n){var i=t.call(this,e)||this;return i.emptyStateText=Ee("plugins.templates.msg-no-templates-found"),i.templatePlugin=null,i.templatePlugin=n,i.setInstructions([{command:"↑↓",purpose:Ee("plugins.templates.instruction-navigate")},{command:"↵",purpose:Ee("plugins.templates.instruction-insert")},{command:"esc",purpose:Ee("plugins.templates.instruction-dismiss")}]),i.setPlaceholder(Ee("plugins.templates.prompt-type-template")),i.scope.register(null,"Tab",(function(){return!1})),i}return M(e,t),e.prototype.getItems=function(){return this.templatePlugin.templateFiles},e.prototype.onChooseItem=function(t){this.templatePlugin.insertTemplate(t)},e.prototype.getItemText=function(t){return t.basename},e}(fN),mV=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.instance=i,r}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty();var n=this.instance.options;new DA(e).setName(Ee("plugins.templates.option-template-folder-location")).setDesc(Ee("plugins.templates.option-template-folder-location-description")).addText((function(e){e.setPlaceholder(Ee("setting.folder-path-example-placeholder")).setValue(n.folder).onChange((function(e){n.folder=e.trim(),t.plugin.saveData(n)})),new FR(t.app,e.inputEl)}));var i=document.createDocumentFragment();i.appendText(Ee("plugins.templates.option-template-date-format-description",ve)),i.createEl("br"),i.appendText(Ee("plugins.templates.option-template-date-format-description2",ve)),i.createEl("br"),i.appendText(Ee("plugins.daily-notes.label-refer-to-syntax")),i.createEl("a",{text:Ee("plugins.daily-notes.label-syntax-link"),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),i.createEl("br"),i.appendText(Ee("plugins.daily-notes.label-syntax-live-preview"));var r=i.createEl("b","u-pop");new DA(e).setName(Ee("plugins.templates.option-template-date-format")).setDesc(i).addMomentFormat((function(e){return e.setSampleEl(r).setDefaultFormat(gN).setValue(n.dateFormat).onChange((function(e){n.dateFormat=e.trim(),t.plugin.saveData(n)}))}));var o=document.createDocumentFragment();o.appendText(Ee("plugins.templates.option-template-time-format-description",ve)),o.createEl("br"),o.appendText(Ee("plugins.templates.option-template-time-format-description2",ve)),o.createEl("br"),o.appendText(Ee("plugins.daily-notes.label-refer-to-syntax")),o.createEl("a",{text:Ee("plugins.daily-notes.label-syntax-link"),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),o.createEl("br"),o.appendText(Ee("plugins.daily-notes.label-syntax-live-preview"));var s=o.createEl("b","u-pop");new DA(e).setName(Ee("plugins.templates.option-template-time-format")).setDesc(o).addMomentFormat((function(e){return e.setSampleEl(s).setDefaultFormat(mN).setValue(n.timeFormat).onChange((function(e){n.timeFormat=e.trim(),t.plugin.saveData(n)}))}))},e}(NN);var vV="\nlet pattern = /(?:[0-9]+(?:(?:,|\\.)[0-9]+)*|[\\-'"+zT.source+"஀-௿가-힣ꥠ-ꥼힰ-ퟆ])+|["+HT.source+"]/g;\nfunction countWords(str) {\n\tpattern.lastIndex = 0;\n\tlet m = str.match(pattern);\n\treturn m ? m.length : 0;\n}\n\nself.onmessage = function (e) {\n\ttry {\n\t\tself.postMessage(countWords(e.data));\n\t} catch (e) {\n\t\tconsole.error('WordCount', e);\n\t}\n};\n",yV=function(){function t(){this.id="word-count",this.name=Ee("plugins.word-count.name"),this.description=Ee("plugins.word-count.desc"),this.defaultOn=!0,this.worker=null,this.wordEl=null,this.charEl=null,this.mobileInfoEl=null,this.wordCount=0,this.charCount=0,this.requestUpdate=De(this.update.bind(this),500)}return t.prototype.init=function(t,e){this.app=t,this.plugin=e,e.registerStatusBarItem(),e.registerMobileFileInfo(this.updateMobileFileInfo.bind(this))},t.prototype.onEnable=function(t,e){var n,i;e.registerEvent(t.workspace.on("file-open",this.onFileOpen,this)),e.registerEvent(t.workspace.on("quick-preview",this.onQuickPreview,this)),this.worker=(n=vV,new Worker(URL.createObjectURL(new Blob([n],{type:"text/javascript"})),i)),this.worker.onmessage=this.onMessage.bind(this);var r=e.statusBarEl;r&&(r.empty(),this.wordEl=r.createSpan({cls:"status-bar-item-segment",text:""}),this.charEl=r.createSpan({cls:"status-bar-item-segment",text:""}));var o=t.workspace.getActiveFile();o?this.onFileOpen(o):this.onFileOpen(null)},t.prototype.onDisable=function(){this.worker.terminate(),this.worker=null,this.wordEl=null,this.charEl=null},t.prototype.onFileOpen=function(t){return D(this,void 0,void 0,(function(){var e;return A(this,(function(n){switch(n.label){case 0:return t instanceof cb&&"md"===t.extension?[4,this.app.vault.cachedRead(t)]:[3,2];case 1:return e=n.sent(),this.updateCharCount(e.length),this.requestUpdate(e),[3,3];case 2:this.updateCharCount(0),this.requestUpdate(""),n.label=3;case 3:return[2]}}))}))},t.prototype.onQuickPreview=function(t,e){this.app.workspace.getActiveFile()===t&&(this.updateCharCount(e.length),this.requestUpdate(e))},t.prototype.update=function(t){t?this.worker.postMessage(t):(this.updateWordCount(0),this.updateMobileFileInfo())},t.prototype.onMessage=function(t){this.updateWordCount(t.data),this.updateMobileFileInfo()},t.prototype.updateWordCount=function(t){this.wordCount=t;var e=this.wordEl;e&&e.setText(Ee("nouns.word-with-count",{count:t}))},t.prototype.updateCharCount=function(t){this.charCount=t;var e=this.charEl;e&&e.setText(Ee("nouns.character-with-count",{count:t}))},t.prototype.updateMobileFileInfo=function(t){if(t?this.mobileInfoEl=t:t=this.mobileInfoEl,t){var e=Ee("nouns.word-with-count",{count:this.wordCount}),n=Ee("nouns.character-with-count",{count:this.charCount}),i=Ee("plugins.file-explorer.tooltip-folders-files-count",{fileCount:e,folderCount:n});t.setText(i)}},t}(),bV=function(){function t(){this.id="workspaces",this.name=Ee("plugins.workspaces.name"),this.description=Ee("plugins.workspaces.desc"),this.workspaces={},this.activeWorkspace=""}return t.prototype.init=function(t,e){this.app=t,this.plugin=e,e.registerGlobalCommand({id:"workspaces:load",name:Ee("plugins.workspaces.action-load"),icon:fy,callback:this.onLoad.bind(this)}),e.registerGlobalCommand({id:"workspaces:save-and-load",name:Ee("plugins.workspaces.action-save-and-load"),icon:fy,callback:this.onSaveAndLoad.bind(this)}),e.registerRibbonAction(Ee("plugins.workspaces.action-manage-workspaces"),Km,this.onOpenModal.bind(this)),e.registerGlobalCommand({id:"workspaces:open-modal",name:Ee("plugins.workspaces.action-manage-workspaces"),icon:fy,callback:this.onOpenModal.bind(this)})},t.prototype.onEnable=function(t,e){return D(this,void 0,Promise,(function(){var t;return A(this,(function(n){switch(n.label){case 0:return[4,e.loadData()];case 1:return(t=n.sent())&&t.workspaces?(this.workspaces=t.workspaces||{},this.activeWorkspace=t.active||""):this.workspaces=t||{},[2]}}))}))},t.prototype.onDisable=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,e.saveData(this.workspaces)];case 1:return t.sent(),[2]}}))}))},t.prototype.onOpenModal=function(){new wV(this.app,this).open()},t.prototype.onLoad=function(){return new kV(this.app,this,!1).open(),!1},t.prototype.onSaveAndLoad=function(){return new kV(this.app,this,!0).open(),!1},t.prototype.saveWorkspace=function(t){this.workspaces[t]=this.app.workspace.getLayout(),this.saveData()},t.prototype.setActiveWorkspace=function(t){this.activeWorkspace=t,this.saveData()},t.prototype.loadWorkspace=function(t){var e=this.workspaces[t];e&&(this.activeWorkspace=t,this.app.workspace.changeLayout(e),this.saveData())},t.prototype.deleteWorkspace=function(t){return D(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return delete this.workspaces[t],[4,this.saveData()];case 1:return e.sent(),[2]}}))}))},t.prototype.saveData=function(){return D(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.plugin.saveData({workspaces:this.workspaces,active:this.activeWorkspace})];case 1:return t.sent(),[2]}}))}))},t}(),wV=function(t){function e(e,n){var i=t.call(this,e)||this;return i.plugin=n,i.titleEl.setText(Ee("plugins.workspaces.action-manage-workspaces")),i}return M(e,t),e.prototype.onOpen=function(){var t=this,e=this.contentEl,n=this.plugin;e.empty(),e.createDiv("list-item",(function(e){var n=t.nameEl=e.createEl("input",{cls:"list-item-part mod-extended",type:"text"});n.placeholder=Ee("plugins.workspaces.placeholder-save-current-workspace-as"),n.addEventListener("keypress",(function(e){e.isComposing||"Enter"!==e.key||t.onFinish()})),e.createEl("button",{cls:"list-item-part",text:Ee("plugins.workspaces.button-save")}).addEventListener("click",t.onFinish.bind(t))}));var i=this.plugin.workspaces;Object.keys(i).length>0&&e.createEl("hr"),e.createDiv({},(function(e){var r=function(r){i.hasOwnProperty(r)&&e.createDiv("list-item",(function(e){e.createDiv({cls:"list-item-part mod-extended",text:r}),e.createEl("button",{cls:"list-item-part",text:Ee("plugins.workspaces.button-load")},(function(e){e.addEventListener("click",(function(){n.loadWorkspace(r),t.close()}))})),e.createDiv("list-item-part clickable-icon",(function(e){Ty(e,Am,14),$e(e,Ee("plugins.workspaces.tooltip-delete-workspace")),e.addEventListener("click",(function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,n.deleteWorkspace(r)];case 1:return t.sent(),new jb(Ee("plugins.workspaces.msg-delete-workspace-success")),this.onOpen(),[2]}}))}))}))}))}))};for(var o in i)r(o)})),this.nameEl.focus()},e.prototype.onClose=function(){this.contentEl.empty()},e.prototype.onFinish=function(){var t=this.nameEl.value.trim();t?(this.plugin.saveWorkspace(t),this.plugin.setActiveWorkspace(t),new jb(Ee("plugins.workspaces.msg-save-workspace-success")),this.nameEl.value="",this.onOpen()):new jb(Ee("plugins.workspaces.msg-please-enter-name"))},e}(KD),kV=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.emptyStateText=Ee("plugins.workspaces.label-no-workspaces-found"),r.plugin=n,r.shouldSave=i,r.setPlaceholder(Ee("plugins.workspaces.placeholder-type-to-search-workspaces")),r}return M(e,t),e.prototype.getItems=function(){return Object.keys(this.plugin.workspaces)},e.prototype.getEmptySearchItems=function(){return this.getItems()},e.prototype.getItemText=function(t){return t},e.prototype.renderSuggestion=function(t,e){var n=t.item;RT(e,this.getItemText(n),t.match?t.match.matches:null)},e.prototype.onChooseItem=function(t){if(this.shouldSave){var e=this.plugin,n=e.workspaces,i=e.activeWorkspace;i&&n[i]&&this.plugin.saveWorkspace(i)}this.plugin.loadWorkspace(t)},e}(fN),CV="YYYYMMDDHHmm",xV=Me("plugins.zettelkasten-prefixer"),SV=function(){function t(){this.id="zk-prefixer",this.name=xV("name"),this.description=xV("desc"),this.app=null,this.plugin=null,this.options={}}return t.prototype.init=function(t,e){this.app=t,this.plugin=e,e.registerRibbonAction(xV("action-create-note"),Mm,this.onCreateNote.bind(this)),e.registerGlobalCommand({id:"zk-prefixer",name:xV("action-create-note"),icon:my,callback:this.onCreateNote.bind(this)})},t.prototype.onEnable=function(t,e){return D(this,void 0,void 0,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return n=this,[4,e.loadData()];case 1:return n.options=i.sent()||{},e.addSettingTab(new EV(t,e,this)),[2]}}))}))},t.prototype.onCreateNote=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v;return A(this,(function(y){switch(y.label){case 0:for(n=(e=this).app,i=e.options,r=window.moment();!o;)s=this.getFormat(),a=r.format(s),this.checkNoteExists(a)?r=r.add(1,"m"):o=a;if(l=this.app.workspace.getLeaf(Bb.isModEvent(t||this.app.lastEvent)),(u=i.folder)&&String.isString(u)){if(h=ne(mF(u).normalize("NFC")),!((p=n.vault.getAbstractFileByPath(h))instanceof ub))return new jb(xV("msg-folder-not-found",{folderOption:u})),[2];c=p}else c=n.fileManager.getNewFileParent("");return(f=i.template)?(g=n.metadataCache.getFirstLinkpathDest(f,""))?[4,n.vault.cachedRead(g)]:(new jb(xV("msg-template-file-not-found",{template:f})),[2]):[3,4];case 1:return m=y.sent(),v=vN(m,{title:o},{}),[4,n.fileManager.createNewMarkdownFile(c,o)];case 2:return d=y.sent(),[4,n.vault.modify(d,v)];case 3:return y.sent(),[3,6];case 4:return[4,n.fileManager.createNewMarkdownFile(c,o)];case 5:d=y.sent(),y.label=6;case 6:return[4,l.openFile(d,{state:{mode:"source"},eState:{rename:"end"}})];case 7:return y.sent(),[2]}}))}))},t.prototype.checkNoteExists=function(t){for(var e=!1,n=0,i=this.app.vault.getAllLoadedFiles();n<i.length;n++){var r=i[n];if(r instanceof cb&&r.name.startsWith(t)){e=!0;break}}return e},t.prototype.getFormat=function(){var t=this.options.format;return t&&String.isString(t)?t:CV},t}(),EV=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.instance=i,r}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty();var n=this.instance.options;new DA(e).setName(xV("option-new-file-location")).setDesc(xV("option-new-file-location-description")).addText((function(e){e.setPlaceholder(Ee("setting.folder-path-example-placeholder")).setValue(n.folder).onChange((function(e){n.folder=e.trim(),t.plugin.saveData(n)})),new FR(t.app,e.inputEl)})),new DA(e).setName(xV("option-template-file")).setDesc(xV("option-template-file-description")).addText((function(e){e.setPlaceholder(xV("option-template-file-placeholder")).setValue(n.template).onChange((function(e){n.template=e.trim(),t.plugin.saveData(n)})),new PR(t.app,e.inputEl)}));var i=document.createDocumentFragment();i.appendText(Ee("plugins.daily-notes.label-refer-to-syntax")),i.createEl("a",{text:Ee("plugins.daily-notes.label-syntax-link"),attr:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank"}}),i.createEl("br"),i.appendText(Ee("plugins.daily-notes.label-syntax-live-preview"));var r=i.createEl("b","u-pop");new DA(e).setName(xV("option-id-format")).setDesc(i).addMomentFormat((function(e){return e.setSampleEl(r).setDefaultFormat(CV).setValue(n.format).onChange((function(e){n.format=e.trim(),t.plugin.saveData(n)}))}))},e}(NN),MV=function(){function t(t,e){this.app=t,this.containerEl=e}return t.prototype.registerStatusBarItem=function(){return this.containerEl.createDiv("status-bar-item")},t}();var LV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=Ee("setting.about.name"),e.id="about",e}return M(e,t),e.prototype.display=function(){return D(this,void 0,Promise,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C=this;return A(this,(function(x){switch(x.label){case 0:return(t=this.containerEl).empty(),e=function(){var t=Ee("setting.about.label-unknown-version"),e=Ee("setting.about.label-unknown-version"),n="",i=!1,r=!1,o=!0,s=!0,a=!1;return le((function(l){var c=l.remote.app.getVersion();e="v"+c,t="v"+l.ipcRenderer.sendSync("version"),n=l.ipcRenderer.sendSync("update"),(o=yF("0.7.3",c))&&(i=l.ipcRenderer.sendSync("check-update"),r=l.ipcRenderer.sendSync("disable-update")),(s=yF("0.10.0",c))&&(a=l.ipcRenderer.sendSync("disable-gpu"))})),{appVersion:t,installerVersion:e,update:n,checking:i,updateDisabled:r,supportsCheckAndDisable:o,supportsAppReady:s,disableGpu:a}}(),n=e.appVersion,i=e.installerVersion,r=e.update,o=e.updateDisabled,s=e.checking,a=e.supportsCheckAndDisable,l=e.supportsAppReady,c=e.disableGpu,By.isDesktopApp?(s&&(u=function(){le((function(t){a&&(s=t.ipcRenderer.sendSync("check-update"))})),s?setTimeout(u,1e3):C.display()},setTimeout(u,0)),h=new DA(t).setName(Ee("setting.about.label-current-version")+n).setDesc(createFragment((function(t){t.appendText(Ee("setting.about.label-install-version",{version:i})),t.createEl("br"),"update-manual-required"===r?(t.createEl("b",{text:Ee("setting.about.label-manual-install-required")}),t.appendText(" "),t.createEl("a",{text:Ee("setting.about.label-download-link"),attr:{href:"https://obsidian.md/download"}})):"update-downloaded"===r?(t.appendText(Ee("setting.about.label-new-version-ready")),t.createEl("br"),t.createEl("a",{text:Ee("setting.about.label-read-changelog"),attr:{href:"https://forum.obsidian.md/c/announcements/13"}}),t.createEl("br"),t.appendText(Ee("setting.about.label-relaunch-to-update"))):(t.appendText(Ee("setting.about.label-up-to-date")),t.createEl("br"),t.createEl("a",{text:Ee("setting.about.label-read-changelog"),attr:{href:"https://forum.obsidian.md/c/announcements/13"}})),t.createEl("br"),s&&(t.appendText(Ee("setting.about.label-checking-for-updates")),t.createEl("br")),t.lastChild.detach()}))),"update-downloaded"===r?h.addButton((function(t){return t.setCta().setButtonText(Ee("setting.about.button-relaunch")).onClick((function(){le((function(t){t.ipcRenderer.sendSync("relaunch")}))}))})):a&&h.addButton((function(t){return t.setCta().setButtonText(Ee("setting.about.button-check-for-updates")).onClick((function(){le((function(t){t.ipcRenderer.sendSync("check-update",!0),C.display()}))}))})),a&&new DA(t).setName(Ee("setting.about.option-auto-update")).setDesc(Ee("setting.about.option-auto-update-description")).addToggle((function(t){return t.setValue(!o).onChange((function(t){le((function(e){e.ipcRenderer.sendSync("disable-update",!t),setTimeout((function(){return C.display()}),500)}))}))})),[3,3]):[3,1];case 1:return GF?[4,YF.getInfo()]:[3,3];case 2:p=x.sent(),new DA(t).setName(Ee("setting.about.label-current-version")+p.version),x.label=3;case 3:return d=this.app.setting,new DA(t).setName(Ee("setting.about.option-open-help")).setDesc(Ee("setting.about.option-open-help-description")).addButton((function(t){return t.setButtonText(Ee("setting.about.button-open")).onClick((function(){d.close(),C.app.openHelp()}))})),f=localStorage.getItem(fe)||ge,g=f,new DA(t).setName(Ee("setting.about.option-language")).setDesc(Ee("setting.about.option-language-description")).addButton((function(t){m=t,t.setCta().setButtonText(Ee("setting.about.button-relaunch")).onClick((function(){g===ge?localStorage.removeItem(fe):localStorage.setItem(fe,g),window.location.reload()})),t.buttonEl.hide()})).addDropdown((function(t){for(var e in t.onChange((function(t){g=t,m.buttonEl.toggle(f!==g)})),me)me.hasOwnProperty(e)&&t.addOption(e,me[e]);t.setValue(f)})),(v=this.app.account).checkKey((function(){var e=v.license,n=v.key,i=v.keyValidation;if(e&&By.isDesktopApp){var r=!1;le((function(t){r=t.ipcRenderer.sendSync("insiderBuild",null)})),new DA(t).setName(Ee("setting.about.option-insider-build")).setDesc(Ee("setting.about.option-insider-build-description")).addToggle((function(t){return t.setValue(r).onChange((function(t){le((function(e){e.ipcRenderer.sendSync("insiderBuild",t)}))}))}))}var o=new DA(t);if(n){var s=Ee("setting.about.label-your-commercial-license-key",{key:n});"valid"===i&&(s+=" "+Ee("setting.about.label-commercial-license-info",{company:v.company,seats:v.seats,expiry:window.moment(v.expiry).format("MMMM D, YYYY")})),o.setName(Ee("setting.about.label-commercial-license")).setDesc(s),"valid"===i?o.addButton((function(t){return t.setButtonText(Ee("setting.about.button-remove-commercial-license")).onClick((function(){v.setKey(null),C.display()}))})):i?(o.descEl.createEl("p",{text:Ee("setting.about.label-invalid-commercial-license")+""+i}),o.addButton((function(t){return t.setButtonText(Ee("setting.about.button-activate-commercial-license")).setCta().onClick((function(){C.openCommercialLicenseModal()}))}))):o.descEl.createEl("p",{text:Ee("setting.about.label-validating-commercial-license")})}else if(e){var a=document.createDocumentFragment();a.createEl("b",{cls:"u-pop",text:"Catalyst "+e}),a.appendText(Ee("setting.about.label-personal-license")),a.appendText(Ee("setting.about.label-thank-you-for-support")),o.setName(Ee("setting.about.label-license")).setDesc(a).addButton((function(t){return t.setButtonText(Ee("setting.about.button-activate-commercial-license")).onClick((function(){C.openCommercialLicenseModal()}))}))}else o.setName(Ee("setting.about.label-license")).setDesc(Ee("setting.about.label-free-personal-license")).addButton((function(t){return t.setCta().setButtonText(Ee("setting.about.button-activate-commercial-license")).onClick((function(){C.openCommercialLicenseModal()}))}))})),new DA(t).setName(Ee("setting.about.option-advanced")).setHeading(),By.isDesktopApp&&l&&new DA(t).setName(Ee("setting.about.option-hw-acceleration")).setDesc(createFragment((function(t){t.createDiv({text:Ee("setting.about.option-hw-acceleration-description")}),t.createDiv({cls:"mod-warning",text:Ee("setting.about.option-hw-acceleration-warning")})}))).addButton((function(t){y=t,t.setCta().setButtonText(Ee("setting.about.button-relaunch")).onClick((function(){le((function(t){t.ipcRenderer.sendSync("relaunch")}))})),t.buttonEl.hide()})).addToggle((function(t){return t.setValue(!c).onChange((function(t){t=!t,le((function(e){e.ipcRenderer.sendSync("disable-gpu",t),y.buttonEl.toggle(t!==c)}))}))})),w=localStorage.getItem(this.app.appId+"-config")||"",k=w,new DA(t).setName(Ee("setting.about.option-config-location")).setDesc(Ee("setting.about.option-config-location-description")).addButton((function(t){b=t,t.setCta().setButtonText(Ee("setting.about.button-relaunch")).onClick((function(){localStorage.setItem(C.app.appId+"-config",k),window.location.reload()})),t.buttonEl.hide()})).addText((function(t){t.setPlaceholder(".obsidian").setValue(w).onChange((function(e){!e||hb.validateConfigDir(e)?(Ke(),k=e,b.buttonEl.toggle(e!==w)):Ge(t.inputEl,Ee("setting.about.option-config-location-warning"),{placement:"left",classes:["mod-error"]})}))})),[2]}}))}))},e.prototype.openCommercialLicenseModal=function(){var t=this;this.setting.close();var e,n,i=this.app,r=new $D(i).setTitle(Ee("setting.about.label-activate-license")).setContent(createFragment((function(t){t.createDiv("message-container",(function(t){n=t.createDiv("message mod-error")})),n.hide();var i="https://obsidian.md/pricing";t.createEl("p",{text:Ee("setting.account.message-obtain-commercial-license",{pricingPageLink:i})},(function(t){t.innerHTML=t.innerHTML.replace(i,'<a href="'+i+'">'+i+"</a>")})),t.createEl("p",{text:Ee("setting.about.label-enter-commercial-license")}),t.createEl("p",{},(function(t){t.createEl("label",{cls:"input-label",text:Ee("setting.about.label-license-key")}),e=t.createEl("input",{type:"text"},(function(t){t.setAttribute("placeholder",Ee("setting.about.license-key-placeholder"))}))}))}))).addButton("mod-cta",Ee("setting.about.button-activate"),(function(){return i.account.key=e.value,i.account.checkKey((function(){"valid"===i.account.keyValidation?(r.close(),t.setting.open()):(i.account.key=null,n.setText(i.account.keyValidation),n.show())})),!0})).addCancelButton();r.open()},e}(pN),DV=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.name=Ee("setting.account.name"),i.id="account",i}return M(e,t),e.prototype.display=function(){var t,e,n,i,r=this,o=this.app.account;this.containerEl.empty(),t=this.containerEl.createDiv();var s=function(){e.hide();var t=n.value,s=i.value,a=!1;""===t?(e.setText(Ee("setting.account.message-empty-email")),a=!0):-1===t.indexOf("@")?(e.setText(Ee("setting.account.message-invalid-email")),a=!0):""===s&&(e.setText(Ee("setting.account.message-empty-password")),a=!0),a?e.show():o.login(t,s,(function(t){if(t.error&&"Login failed"===t.error)return e.setText(Ee("setting.account.message-login-failed")),void e.show();r.display()}))},a=this.containerEl.createDiv("loader-cube",(function(t){for(var e=1;e<=9;e++)t.createDiv({cls:"sk-cube sk-cube"+e})})),l=this.containerEl.createDiv({},(function(t){t.createEl("h2",{text:Ee("setting.account.label-log-in")}),t.createDiv("message-container",(function(t){(e=t.createDiv("message mod-error")).hide()})),t.createEl("p","login-field",(function(t){t.createEl("label",{cls:"input-label",text:Ee("setting.account.label-email")}),n=t.createEl("input",{type:"email"},(function(t){t.setAttribute("placeholder",Ee("setting.account.placeholder-email")),t.addEventListener("keydown",(function(t){t.isComposing||"Enter"!==t.key||s()}))}))})),t.createEl("p","login-field",(function(t){t.createEl("label",{cls:"input-label",text:Ee("setting.account.label-password")}),i=t.createEl("input",{type:"password"},(function(t){t.setAttribute("placeholder",Ee("setting.account.placeholder-password")),t.addEventListener("keydown",(function(t){t.isComposing||"Enter"!==t.key||s()}))}))})),t.createDiv("button-container u-center-text",(function(t){t.createEl("button",{cls:"mod-cta",text:Ee("setting.account.button-login")},(function(t){t.addEventListener("click",s.bind(r))}))})),t.createEl("p","u-center-text",(function(t){t.createSpan({text:Ee("setting.account.label-no-account")}),t.createEl("a",{text:Ee("setting.account.link-sign-up-now")},(function(t){t.setAttribute("href","https://obsidian.md/account#mode=signup"),t.setAttribute("target","_blank")}))}))}));l.hide();var c=function(){o.getUserInfo().then((function(){o.checkKey((function(){o.token&&function(){t.empty(),t.createEl("h2",{text:Ee("setting.account.label-welcome",{name:r.app.account.name})}),t.createEl("p",{text:Ee("setting.account.label-your-account-email")},(function(t){t.createSpan({cls:"u-pop",text:r.app.account.email})}));var e,n=r.app.account,i=t.createDiv(),o=n.license;["insider","supporter","vip"].contains(o)?("insider"===o?e=Ee("setting.account.label-insider"):"supporter"===o?e=Ee("setting.account.label-supporter"):"vip"===o&&(e=Ee("setting.account.label-vip")),i.createEl("p",{},(function(t){t.innerHTML=Ee("setting.account.label-role-text",{role:'<b class="u-pop">'+e+"</b>"})})),i.createEl("p",{},(function(t){var e=Ee("setting.account.message-get-community-badges-link-text"),n=Ee("setting.account.message-get-community-badges-instructions",{link:'<a href="https://help.obsidian.md/Licenses+%26+add-on+services/Catalyst+license#How+do+I+get+my+shiny+badges+after+I+upgrade">'+e+"</a>"});t.innerHTML=n}))):o=null,n.key&&n.license||t.createEl("p",{text:Ee("setting.account.label-action-suggestion")}),n.key||t.createEl("p",{},(function(t){t.createEl("button","mod-cta",(function(t){t.createEl("a",{text:Ee("setting.account.button-get-commercial-license")},(function(t){t.setAttribute("href","https://obsidian.md/pricing"),t.setAttribute("target","_blank")}))}))})),n.license||t.createEl("p",{},(function(t){t.createEl("button","mod-cta",(function(t){t.createEl("a",{text:Ee("setting.account.button-get-catalyst-license")},(function(t){t.setAttribute("href","https://obsidian.md/pricing"),t.setAttribute("target","_blank")}))})),t.createEl("button",{cls:"mod-cta",text:Ee("setting.account.button-check-for-catalyst-license")},(function(t){t.addEventListener("click",(function(){c()}))}))})),o&&"vip"!==o&&t.createEl("a",{},(function(t){t.createEl("button",{cls:"mod-cta",text:Ee("setting.account.button-upgrade-catalyst-license")}),t.setAttribute("href","https://obsidian.md/account"),t.setAttribute("target","_blank")})),t.createEl("button",{text:Ee("setting.account.button-log-out")},(function(t){t.addEventListener("click",(function(){n.logout(r.display.bind(r))}))}))}(),a.hide(),o.token?(l.hide(),t.show()):(l.show(),t.hide())}))}))};c()},e}(pN),AV=Me("setting.appearance"),TV=[{id:"obsidian",nameI18n:"dark-theme"},{id:"moonstone",nameI18n:"light-theme"}],PV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=AV("name"),e.id="appearance",e}return M(e,t),e.prototype.display=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m=this;return A(this,(function(v){for(e=(t=this).containerEl,n=t.app,e.empty(),i=n.customCss,new DA(e).setName(AV("option-base-theme")).setDesc(AV("option-base-theme-description")).addDropdown((function(t){t.onChange((function(t){n.changeTheme(t)}));for(var e=0,i=TV;e<i.length;e++){var r=i[e];t.addOption(r.id,AV(r.nameI18n))}t.setValue(n.getTheme())})),new DA(e).setName(Ee("plugins.translucency.name")).setDesc(Ee("plugins.translucency.desc")).addToggle((function(t){return t.setValue(n.vault.getConfig("translucency")).onChange((function(t){i.setTranslucency(t)}))})),s=ob.baseFontSize,a=function(t){return r.extraSettingsEl.toggleVisibility(t!==s)},new DA(e).setName(AV("option-font-size")).setDesc(AV("option-font-size-description")).addExtraButton((function(t){return r=t.setIcon(Pm).setTooltip(Ee("setting.hotkeys.tooltip-restore-default")).onClick((function(){o.setValue(s)}))})).addSlider((function(t){return o=t.setLimits(10,30,1).setDynamicTooltip().setValue(n.vault.getConfig("baseFontSize")).onChange((function(t){n.changeBaseFontSize(t),a(t)}))})),a(o.getValue()),new DA(e).setName(AV("option-font-size-action")).setDesc(AV("option-font-size-action-description")).addToggle((function(t){return t.setValue(n.vault.getConfig("baseFontSizeAction")).onChange((function(t){n.vault.setConfig("baseFontSizeAction",t)}))})),l=new DA(e).setName(AV("option-themes")).setDesc(AV("option-manage-themes-description")),By.isDesktopApp&&l.addExtraButton((function(t){return t.setIcon(Kg).setTooltip(AV("button-open-themes-folder")).onClick((function(){return D(m,void 0,void 0,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return t=this.app.vault,e=i.getThemeFolder(),[4,t.exists(e)];case 1:return n.sent()?[3,3]:[4,t.createFolder(e)];case 2:n.sent(),n.label=3;case 3:return this.app.openWithDefaultApp(e),[2]}}))}))}))})),l.addButton((function(t){return t.setButtonText(AV("option-theme-button-manage")).setCta().onClick((function(){new NV(n,m).open()}))})),c=i.snippets,u=i.enabledSnippets,h=new DA(e).setHeading().setName(AV("option-css-snippets")).addExtraButton((function(t){return t.setIcon(Gm).setTooltip(AV("button-reload-snippets")).onClick((function(){return D(m,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,i.readCssFolders()];case 1:return t.sent(),new jb(AV("msg-reloaded-snippets")),this.display(),[2]}}))}))}))})),By.isDesktopApp&&h.addExtraButton((function(t){return t.setIcon(Kg).setTooltip(AV("button-open-snippets-folder")).onClick((function(){return D(m,void 0,void 0,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return t=this.app.vault,e=i.getSnippetsFolder(),[4,t.exists(e)];case 1:return n.sent()?[3,3]:[4,t.createFolder(e)];case 2:n.sent(),n.label=3;case 3:return this.app.openWithDefaultApp(e),[2]}}))}))}))})),0===c.length&&new DA(e).setName(AV("label-no-css-snippets-found")).setDesc(AV("no-snippet-description",{path:"vault/"+i.getSnippetsFolder()})),p=function(t){new DA(e).setName(t).setDesc(AV("option-toggle-snippet-description",{path:"vault/"+i.getSnippetPath(t)})).addToggle((function(e){return e.setValue(u.has(t)).onChange((function(e){return D(m,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return[4,i.setCssEnabledStatus(t,e)];case 1:return n.sent(),[2]}}))}))}))}))},d=0,f=c;d<f.length;d++)g=f[d],p(g);return[2]}))}))},e}(pN),OV=EN("obsidianmd/obsidian-releases","community-css-themes.json"),FV=Lh((function(){return D(void 0,void 0,Promise,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return[4,ajaxPromise({url:OV})];case 1:if(t=n.sent(),e=JSON.parse(t),!Array.isArray(e))throw new Error("Failed to parse community themes.");return[2,e]}}))}))}),3e5,6e4),IV=Lh((function(){return D(void 0,void 0,Promise,(function(){var t,e;return A(this,(function(n){switch(n.label){case 0:return e=(t=JSON).parse,[4,ajaxPromise({url:"https://releases.obsidian.md/stats/theme"})];case 1:return[2,e.apply(t,[n.sent()])]}}))}))}),3e5,6e4),NV=function(t){function e(e,n){var i=t.call(this,e)||this;return i.localThemes=[],i.themes=[],i.appearanceSettings=null,i.localSearchInput=null,i.searchInput=null,i.currentModeToggle=null,i.localThemeListEl=null,i.themeListEl=null,i.appearanceSettings=n,i.sortOrder=e.vault.getConfig("communityThemeSortOrder"),i}return M(e,t),e.prototype.onOpen=function(){this.modalEl.addClass("mod-community-theme"),this.loadThemes()},e.prototype.onClose=function(){this.appearanceSettings.display()},e.prototype.loadThemes=function(){return D(this,void 0,void 0,(function(){var t,e,n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v,y,b,w,k,C,x,S,E,M,L=this;return A(this,(function(D){switch(D.label){case 0:t=this.contentEl,e={},n={},i=setTimeout((function(){return new jb(Ee("plugins.custom-css.msg-fetching-themes"))}),100),D.label=1;case 1:return D.trys.push([1,3,,4]),[4,FV()];case 2:for(r=D.sent(),clearTimeout(i),o=0,s=r;o<s.length;o++)a=s[o],e[a.name]=a;return[3,4];case 3:return l=D.sent(),console.error(l),clearTimeout(i),new jb(Ee("plugins.custom-css.msg-load-error")),[3,4];case 4:return D.trys.push([4,6,,7]),[4,IV()];case 5:return n=D.sent(),[3,7];case 6:return c=D.sent(),console.error(c),[3,7];case 7:for(t.empty(),u=this.localThemes=[],h=this.themes=[],t.createDiv({cls:"modal-title",text:AV("label-installed-themes")}),p=t.createDiv("community-theme-container"),d=p.createDiv("community-theme-filters-container"),this.localThemeListEl=p.createDiv("theme-list"),new DA(d).addSearch((function(t){return t.setPlaceholder(Ee("plugins.custom-css.prompt-filter")).onChange((function(){return L.updateLocalThemeVisibility()})).then((function(t){return L.localSearchInput=t}))})),u.push(this.addThemeCard({name:"Default",author:"Obsidian",modes:["dark","light"],screenshot:"obsidian"===this.app.getTheme()?"dark.png":"light.png",repo:"obsidianmd/obsidian-releases",el:null,downloads:0})),f=this.app.customCss.themes,g=0,m=f;g<m.length;g++)w=m[g],(v=e[w])?(C=v.name,x=v.author,S=v.repo,E=v.modes,M=v.screenshot,u.push(this.addThemeCard({name:C,author:x,repo:S,modes:E,screenshot:M,el:null,downloads:n[C]?n[C].download:0}))):u.push(this.addThemeCard({name:w,author:"Unknown",modes:["dark","light"],screenshot:"",repo:"",el:null,downloads:0}));if(Object.keys(e).length>0){for(w in t.createEl("hr"),t.createDiv({cls:"modal-title",text:AV("option-community-themes")}),y=t.createDiv("community-theme-container"),b=y.createDiv("community-theme-filters-container"),this.themeListEl=y.createDiv("theme-list"),new DA(b).addSearch((function(t){return t.setPlaceholder(Ee("plugins.custom-css.prompt-filter")).onChange((function(){return L.updateThemeVisibility()})).then((function(t){return L.searchInput=t}))})).addButton((function(t){return t.onClick((function(t){L.showSortMenu(t)})).then((function(t){if(By.isMobile)t.setButtonText(Ee("plugins.file-explorer.action-change-sort"));else{var e=t.buttonEl;Ty(e,Lm),$e(e,Ee("plugins.file-explorer.action-change-sort")),e.addClass("clickable-icon")}}))})),b.createDiv("community-theme-mode-toggle-container",(function(t){t.createEl("label",{cls:"community-theme-mode-toggle-label",text:"obsidian"===L.app.getTheme()?Ee("plugins.custom-css.label-dark-theme-only"):Ee("plugins.custom-css.label-light-theme-only")}),L.currentModeToggle=new FA(t).setValue(!0).onChange((function(){return L.updateThemeVisibility()}))})),e)e.hasOwnProperty(w)&&(f.contains(w)||(k=e[w],C=k.name,x=k.author,S=k.repo,E=k.modes,M=k.screenshot,h.push(this.addThemeCard({name:C,author:x,repo:S,modes:E,screenshot:M,el:null,downloads:n[C]?n[C].download:0}))));this.updateThemeVisibility()}return this.updateLocalThemeVisibility(),[2]}}))}))},e.prototype.addThemeCard=function(t){var e=this,n=t.name,i=t.author,r=t.repo,o=t.screenshot,s=t.downloads,a="Default"===n,l=a||this.app.customCss.themes.contains(n),c=t.el=createDiv("community-theme");a&&(n=Ee("setting.appearance.label-default-theme")),c.createDiv({cls:"community-theme-title",text:n});var u=c.createDiv({cls:"community-theme-info u-center-text",text:i});if(s&&u.createSpan("community-theme-downloads",(function(t){t.createSpan({},(function(t){Ty(t,$m,12)})),t.createSpan({cls:"community-plugin-downloads-text",text:s.toLocaleString()}),$e(t,Ee("setting.third-party-plugin.tooltip-downloaded-times",{count:s}))})),r&&o){var h=EN(r,o);c.createDiv().createEl("img",{cls:"community-theme-screenshot",attr:{alt:n,src:h}},(function(t){$e(t,AV("tooltip-click-to-enlarge"))})).addEventListener("click",(function(){var t=new KD(e.app);t.modalEl.addClass("mod-image-lightbox"),t.contentEl.createEl("img",{cls:"community-theme-lightbox",attr:{alt:n,src:h}}),t.open()}))}else c.createDiv({cls:"community-theme-screenshot mod-unavailable",text:AV("label-screenshot-unavailable")});var p=c.createDiv("modal-button-container"),d=this.app.customCss.theme,f=a&&!d||d===n;if(f?(c.addClass("is-selected"),p.createEl("button",{text:AV("label-currently-selected")})):p.createEl("button",{cls:"mod-cta",text:Ee("plugins.custom-css.label-use")}).addEventListener("click",(function(){return D(e,void 0,void 0,(function(){var e,i;return A(this,(function(r){switch(r.label){case 0:return a?(this.app.customCss.setTheme(""),[3,4]):[3,1];case 1:return l?[3,3]:[4,this.downloadOrUpdateTheme(t)];case 2:r.sent();try{e=[],(i=localStorage.getItem("local-themes"))&&(e=JSON.parse(i),Array.isArray(e)||(e=[])),e.contains(n)||(e.push(n),localStorage.setItem("local-themes",JSON.stringify(e)),ajax({method:"POST",url:"https://releases.obsidian.md/stats/theme/"+n+"/download"}))}catch(t){console.error(t)}r.label=3;case 3:this.app.customCss.setTheme(n),r.label=4;case 4:return new jb(Ee("plugins.custom-css.msg-now-using-theme",{title:n})),[4,this.loadThemes()];case 5:return r.sent(),[2]}}))}))})),!a&&l){if(r)p.createEl("button",{cls:"mod-cta",text:Ee("plugins.custom-css.label-update")}).addEventListener("click",(function(){return D(e,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.downloadOrUpdateTheme(t)];case 1:return e.sent(),new jb(Ee("plugins.custom-css.msg-updated-theme",{title:n})),[4,this.loadThemes()];case 2:return e.sent(),[2]}}))}))}));var g=p.createSpan({cls:"community-theme-remove-button clickable-icon u-muted"});Ty(g,Ug,16),$e(g,Ee("plugins.custom-css.tooltip-remove-theme")),g.addEventListener("click",(function(){return D(e,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.removeTheme(n)];case 1:return t.sent(),f&&this.app.customCss.setTheme(""),new jb(Ee("plugins.custom-css.msg-deleted-theme",{title:n})),[4,this.loadThemes()];case 2:return t.sent(),[2]}}))}))}))}return r&&!a&&u.createSpan({cls:"clickable-icon"},(function(t){Ty(t,My,18),$e(t,Ee("plugins.custom-css.label-visit-on-github")),t.addEventListener("click",(function(){window.open(MN(r))}))})),t},e.prototype.showSortMenu=function(t){var e=this;t.preventDefault();for(var n=new zb(this.app),i=this.sortOrder,r=0,o=WN;r<o.length;r++){for(var s=function(t){var r=Ee("setting.third-party-plugin."+GN[t]);n.addItem((function(n){return n.setTitle(r).setActive(t===i).onClick((function(){e.sortOrder=t,e.app.vault.setConfig("communityThemeSortOrder",t),e.updateThemeVisibility()}))}))},a=0,l=o[r];a<l.length;a++){s(l[a])}n.addSeparator()}n.showAtMouseEvent(t)},e.prototype.downloadOrUpdateTheme=function(t){return D(this,void 0,void 0,(function(){var e,n,i,r,o,s;return A(this,(function(a){switch(a.label){case 0:return e=t.name,n=this.app,i=n.vault,r=n.customCss,[4,this.downloadCss(t)];case 1:return o=a.sent(),s=r.getThemeFolder(),[4,i.exists(s)];case 2:return a.sent()?[3,4]:[4,i.createFolder(s)];case 3:a.sent(),a.label=4;case 4:return[4,i.adapter.write(r.getThemePath(e),o)];case 5:return a.sent(),[4,r.readCssFolders()];case 6:return a.sent(),[2]}}))}))},e.prototype.removeTheme=function(t){return D(this,void 0,void 0,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:return e=this.app,n=e.vault,i=e.customCss,[4,n.adapter.exists(i.getThemePath(t))];case 1:return r.sent()?[4,n.adapter.remove(i.getThemePath(t))]:[3,4];case 2:return r.sent(),[4,i.readCssFolders()];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype.downloadCss=function(t){var e=EN(t.repo,"obsidian.css");return ajaxPromise({url:e})},e.prototype.updateLocalThemeVisibility=function(){for(var t=this.localSearchInput.getValue().toLowerCase(),e=[],n=0,i=this.localThemes;n<i.length;n++){var r=i[n];(""===t||r.name.toLowerCase().contains(t))&&e.push(r)}this.localThemeListEl.setChildrenInPlace(e.map((function(t){return t.el})))},e.prototype.updateThemeVisibility=function(){for(var t=this.searchInput.getValue().toLowerCase(),e=this.currentModeToggle.getValue(),n="obsidian"===this.app.getTheme()?"dark":"light",i=this.sortOrder,r=[],o=0,s=this.themes;o<s.length;o++){var a=s[o],l=a.modes,c=!0,u=!0;""!==t&&(c=a.name.toLowerCase().contains(t)),e&&l&&(u=l.contains(n)),c&&u&&r.push(a)}if("release"===i)r.reverse();else if("releaseReverse"!==i){var h=null;"download"===i?h=function(t,e){return e.downloads-t.downloads}:"downloadReverse"===i?h=function(t,e){return t.downloads-e.downloads}:"alphabetical"===i?h=function(t,e){return DN(t.name,e.name)}:"alphabeticalReverse"===i&&(h=function(t,e){return-DN(t.name,e.name)}),r.sort(h)}this.themeListEl.setChildrenInPlace(r.map((function(t){return t.el})))},e}(KD),BV=Me("setting.third-party-plugin"),RV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=BV("name"),e.id="community-plugins",e}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty();var n=this.app.plugins,i=!n.isEnabled();if(new DA(e).setName(BV("option-safe-mode")).setDesc(BV(i?"option-safe-mode-description-on":"option-safe-mode-description-off")).addToggle((function(e){e.setValue(i).onChange((function(e){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return e?[4,n.setEnable(!1)]:[3,2];case 1:return t.sent(),this.display(),[3,3];case 2:this.setting.close(),new RN(this.app).open(),t.label=3;case 3:return[2]}}))}))}))})),n.isEnabled()){new DA(e).setName(BV("option-browse-community-plugins")).setDesc(BV("option-browse-community-plugins-description")).addButton((function(e){return e.setCta().setButtonText(BV("button-browse")).onClick((function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){return this.setting.close(),new KN(this.app,null,!0).open(),[2]}))}))}))}));var r=n.manifests,o=n.plugins,s=Object.keys(r),a=n.updates,l=Object.keys(a).length;if(s.sort((function(t,e){return r[t].name.localeCompare(r[e].name)})),new DA(e).setName(BV("label-current-plugins")).setDesc(BV("label-currently-installed",{count:s.length})+" "+(l>0?BV("msg-updates-found",{count:l}):"")).then((function(i){return D(t,void 0,void 0,(function(){var t=this;return A(this,(function(r){return l>0?i.addButton((function(i){return i.setCta().setButtonText(BV("button-update-all-plugins")).onClick((function(){return fh(e,(function(){return D(t,void 0,void 0,(function(){var t,e,i,r,o;return A(this,(function(s){switch(s.label){case 0:for(e in t=[],a)t.push(e);i=0,s.label=1;case 1:return i<t.length?(r=t[i],a.hasOwnProperty(r)?(o=a[r],[4,n.installPlugin(o.repo,o.version,o.manifest)]):[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return this.display(),[2]}}))}))}))}))})):s.length>0&&i.addButton((function(i){return i.setCta().setButtonText(BV("button-check-for-updates")).onClick((function(){return fh(e,(function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,n.checkForUpdates()];case 1:return t.sent(),this.display(),[2]}}))}))}))}))})),[2]}))}))})),s.length>0){new DA(e).setName(BV("option-search-installed-plugin")).setDesc(BV("option-search-installed-plugin-description")).addSearch((function(e){return e.setPlaceholder(BV("placeholder-search-installed-plugin")).onChange((function(e){t.updateSearch(e)}))}));var c=new DA(e).setHeading().setName(BV("label-installed-plugins")).addExtraButton((function(e){return e.setIcon(Gm).setTooltip(BV("button-reload-plugins")).onClick((function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,n.loadManifests()];case 1:return t.sent(),new jb(BV("msg-reloaded-third-party-plugins")),this.display(),[2]}}))}))}))}));By.isDesktopApp&&c.addExtraButton((function(e){return e.setIcon(Kg).setTooltip(BV("button-open-plugins-folder")).onClick((function(){return D(t,void 0,void 0,(function(){var t,e;return A(this,(function(i){switch(i.label){case 0:return t=this.app.vault,e=n.getPluginFolder(),[4,t.exists(e)];case 1:return i.sent()?[3,3]:[4,t.createFolder(e)];case 2:i.sent(),i.label=3;case 3:return this.app.openWithDefaultApp(e),[2]}}))}))}))}))}for(var u=function(i){if(!r.hasOwnProperty(i)){var s=o[i].manifest;new DA(e).setName(s.name).setDesc(s.description).addToggle((function(e){return e.setValue(!0).onChange((function(e){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,n.disablePluginAndSave(s.id)];case 1:return t.sent(),this.display(),[2]}}))}))}))}))}},h=0,p=Object.keys(o);h<p.length;h++){u(m=p[h])}for(var d=this.installedPluginsEl=e.createDiv("installed-plugins-container"),f=0,g=s;f<g.length;f++){var m=g[f],v=r[m];this.renderInstalledPlugin(v,d)}}},e.prototype.renderInstalledPlugin=function(t,e,n,i){var r,o=this,s=this.app.plugins,a=s.plugins,l=s.updates,c=t.id,u=new DA(e).setDesc(createFragment((function(e){t.version&&e.createDiv({text:"Version "+t.version}),r=e.createDiv({})}))).then((function(e){if(l.hasOwnProperty(c)){var a=l[c];e.addButton((function(t){return t.setCta().setButtonText(BV("button-update")).setTooltip(BV("msg-update-plugin",{version:a.version})).onClick((function(){return fh(e.settingEl,(function(){return D(o,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,s.installPlugin(a.repo,a.version,a.manifest)];case 1:return t.sent(),this.display(),[2]}}))}))}))}))}))}RT(e.nameEl,t.name,n),RT(r,t.description,i)})).addExtraButton((function(e){return e.setIcon(Am).setTooltip(BV("label-uninstall")).onClick((function(){new $D(o.app).setTitle(BV("label-uninstall-plugin")).setContent(BV("label-uninstall-plugin-confirmation")).addButton("mod-warning",BV("label-uninstall"),(function(){return D(o,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,s.uninstallPlugin(t.id)];case 1:return e.sent(),this.display(),[2]}}))}))})).addCancelButton().open()}))})).addToggle((function(e){return e.setValue(a.hasOwnProperty(t.id)).onChange((function(n){return D(o,void 0,void 0,(function(){return A(this,(function(i){switch(i.label){case 0:return n?[4,s.enablePluginAndSave(t.id)]:[3,2];case 1:return i.sent()||e.setValue(!1),[3,4];case 2:return[4,s.disablePluginAndSave(t.id)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))}))})).infoEl;u.style.cursor="pointer",u.addEventListener("click",(function(){o.setting.close(),new KN(o.app,c,!0).open()}))},e.prototype.updateSearch=function(t){var e=this.app.plugins,n=this.installedPluginsEl;n.empty();var i=e.manifests,r=Object.keys(i);r.sort((function(t,e){return i[t].name.localeCompare(i[e].name)}));for(var o=(t=t.trim().toLowerCase()).split(" "),s=0,a=r;s<a.length;s++){var l=a[s],c=i[l],u=null,h=null;(!t||(u=IT(o,c.name.toLowerCase()),h=c.description?IT(o,c.description.toLowerCase()):null,u||h))&&this.renderInstalledPlugin(c,n,u,h)}},e}(pN),zV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=Ee("setting.editor.name"),e.id="editor",e.passedVimTest=!1,e}return M(e,t),e.prototype.display=function(){var t=this;this.containerEl.empty();var e,n=By.isMobile||nR.enable;(new DA(this.containerEl).setHeading().setName(Ee("setting.editor.section-general")),new DA(this.containerEl).setName(Ee("setting.editor.option-default-new-pane-view")).setDesc(Ee("setting.editor.option-default-new-pane-view-description")).addDropdown((function(e){return e.addOption("source",Ee("setting.editor.option-default-new-pane-view-editing")).addOption("preview",Ee("setting.editor.option-default-new-pane-view-reading")).setValue(t.app.vault.getConfig("defaultViewMode")).onChange((function(e){t.app.vault.setConfig("defaultViewMode",e)}))})),n&&new DA(this.containerEl).setName(Ee("setting.editor.option-default-editing-mode")).setDesc(Ee("setting.editor.option-default-editing-mode-description")).addDropdown((function(e){return e.addOption("live-preview",Ee("setting.editor.option-default-editing-mode-live-preview")).addOption("source",Ee("setting.editor.option-default-editing-mode-source")).setValue(t.app.vault.getConfig("livePreview")?"live-preview":"source").onChange((function(e){t.app.vault.setConfig("livePreview","live-preview"===e);for(var n=0,i=t.app.workspace.getLeavesOfType(iR);n<i.length;n++){var r=i[n];if(r.view instanceof rR){var o=r.view.getState();o.source="live-preview"!==e,r.setViewState({type:iR,state:o})}}}))})),By.isDesktopApp)&&new DA(this.containerEl).setName(Ee("setting.editor.option-legacy-editor")).setDesc(createFragment((function(t){t.appendText(Ee("setting.editor.option-legacy-editor-description")),t.createEl("br"),t.createSpan({cls:"mod-warning",text:Ee("setting.msg-restart-required")})}))).addButton((function(n){e=n,n.setCta().setButtonText(Ee("setting.about.button-relaunch")).onClick((function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,this.app.vault.saveConfig()];case 1:return t.sent(),window.location.reload(),[2]}}))}))})),n.buttonEl.hide()})).addToggle((function(n){return n.setValue(t.app.vault.getConfig("legacyEditor")).onChange((function(n){t.app.vault.setConfig("legacyEditor",n),e.buttonEl.show()}))}));new DA(this.containerEl).setHeading().setName(Ee("setting.editor.section-display")),this.addOption("readableLineLength",Ee("setting.editor.option-readable-line-length"),Ee("setting.editor.option-readable-line-description")),this.addOption("strictLineBreaks",Ee("setting.editor.option-strict-line-break"),Ee("setting.editor.option-strict-line-break-description")),this.addOption("showFrontmatter",Ee("setting.editor.option-show-frontmatter"),Ee("setting.editor.option-show-frontmatter-description")),this.addOption("foldHeading",Ee("setting.editor.option-fold-heading"),Ee("setting.editor.option-fold-heading-description")),this.addOption("foldIndent",Ee("setting.editor.option-fold-indent"),Ee("setting.editor.option-fold-indent-description")),this.addOption("showLineNumber",Ee("setting.editor.option-show-line-number"),Ee("setting.editor.option-show-line-number-description")),this.addOption("lineWrap",Ee("setting.editor.option-line-wrap"),Ee("setting.editor.option-line-wrap-description")),this.addOption("rightToLeft",Ee("setting.editor.option-rtl"),Ee("setting.editor.option-rtl-description")),new DA(this.containerEl).setHeading().setName(Ee("setting.editor.section-behavior"));var i=this.app.vault.getConfig("spellcheck"),r=new DA(this.containerEl).setName(Ee("setting.editor.option-spellcheck")).setDesc(Ee("setting.editor.option-spellcheck-description"));By.isDesktopApp&&r.addExtraButton((function(e){return e.onClick((function(){nR.enable?new VV(t.app).open():new HV(t.app).open()}))})),r.addToggle((function(e){return e.setValue(i).onChange((function(e){return t.app.vault.setConfig("spellcheck",e)}))})),By.isDesktopApp&&nR.enable&&le((function(e){var n=e.remote.getCurrentWebContents().session,i=new DA(t.containerEl).setName(Ee("setting.editor.spellcheck-languages")).setDesc(Ee("setting.editor.spellcheck-languages-description"));if(dt)i.setDesc(Ee("setting.editor.spellcheck-languages-mac-description"));else{var r=function(){i.clear();var o=n.availableSpellCheckerLanguages,s=t.app.vault.getConfig("spellcheckLanguages"),a=i.controlEl.createDiv("setting-command-hotkeys");if(s){var l=s.map((function(t){return{lang:t,display:o.contains(t)?Le(t):Le(t)+" (Not available)"}}));l.sort((function(t,e){return DN(t.display,e.display)}));for(var c=function(e,n){a.createSpan({cls:"setting-hotkey",text:n}).createSpan("setting-hotkey-icon",(function(n){Ty(n,Am,8),n.addEventListener("click",(function(){var n=s.filter((function(t){return t!==e}));t.app.vault.setConfig("spellcheckLanguages",n),r()}))}))},u=0,h=l;u<h.length;u++){var p=h[u];c(p.lang,p.display)}var d=i.controlEl.createSpan("setting-restore-hotkey-button");Ty(d,Pm,18),d.addEventListener("click",(function(){t.app.vault.setConfig("spellcheckLanguages",null),r()}))}else a.createSpan({cls:"setting-hotkey",text:Le(e.remote.app.getLocale())});i.addDropdown((function(n){n.selectEl.style.width="80px",n.addOption("","+");var i=o.map((function(t){return{lang:t,display:Le(t)}}));i.sort((function(t,e){return DN(t.display,e.display)}));for(var a=0,l=i;a<l.length;a++){var c=l[a],u=c.lang,h=c.display;n.addOption(u,h)}n.onChange((function(n){if(n){if(s||(s=[e.remote.app.getLocale()]),s.contains(n))return void r();s.push(n),t.app.vault.setConfig("spellcheckLanguages",s),r()}}))}))};r()}})),this.addOption("autoPairBrackets",Ee("setting.editor.option-auto-pair-brackets"),Ee("setting.editor.option-auto-pair-brackets-description")),this.addOption("autoPairMarkdown",Ee("setting.editor.option-auto-pair-markdown"),Ee("setting.editor.option-auto-pair-markdown-description")),this.addOption("smartIndentList",Ee("setting.editor.option-smart-indent-lists"),Ee("setting.editor.option-smart-indent-lists-description")),this.addOption("useTab",Ee("setting.editor.option-use-tabs"),Ee("setting.editor.option-use-tabs-description")),new DA(this.containerEl).setName(Ee("setting.editor.option-tab-size")).setDesc(Ee("setting.editor.option-tab-size-description")).addSlider((function(e){return e.setLimits(2,8,1).setValue(t.app.vault.getConfig("tabSize")).setDynamicTooltip().onChange((function(e){t.app.vault.setConfig("tabSize",e)}))})),new DA(this.containerEl).setHeading().setName(Ee("setting.about.option-advanced")),this.addOption("autoConvertHtml",Ee("setting.editor.option-auto-convert-html"),Ee("setting.editor.option-auto-convert-html-description")),dt&&!n&&this.addOption("emacsyKeys",Ee("setting.editor.option-emacsy-keys"),Ee("setting.editor.option-emacsy-keys-description"));var o=By.isMobile?!!localStorage.getItem("vim"):this.app.vault.getConfig("vimMode");new DA(this.containerEl).setName(Ee("setting.editor.option-vim-key-bindings")).setDesc(createFragment((function(t){t.appendText(Ee("setting.editor.option-vim-key-bindings-description")),By.isMobile&&(t.createEl("br"),t.appendText(Ee("setting.editor.option-vim-key-bindings-mobile")))}))).addToggle((function(e){return e.setValue(o).onChange((function(n){t.passedVimTest||!0!==n?By.isMobile?n?localStorage.setItem("vim","true"):localStorage.removeItem("vim"):t.app.vault.setConfig("vimMode",n):(e.setValue(!1),t.startVimTest(e))}))}))},e.prototype.addOption=function(t,e,n){var i=this;new DA(this.containerEl).setName(e).setDesc(n).addToggle((function(e){return e.setValue(i.app.vault.getConfig(t)).onChange((function(e){return i.app.vault.setConfig(t,e)}))}))},e.prototype.startVimTest=function(t){var e,n=this,i=createFragment(),r=function(){var i=e.value.toLowerCase();""===i?new jb(Ee("setting.editor.msg-vim-mode-please-enter-command")):i.startsWith(":q")?(n.passedVimTest=!0,t.setValue(!0),o.close(),new jb(Ee("setting.editor.msg-vim-mode-enabled"))):new jb(Ee("setting.editor.msg-vim-mode-not-enabled"))},o=new $D(this.app);i.createEl("p",{cls:"mod-warning",text:Ee("setting.editor.label-vim-warning")}),i.createEl("p",{text:Ee("setting.editor.label-vim-test")}),i.createEl("p",{},(function(t){t.createEl("label",{cls:"input-label",text:Ee("setting.editor.label-vim-your-answer")}),(e=t.createEl("input",{type:"text"})).setAttribute("placeholder",Ee("setting.editor.placeholder-enter-command")),e.addEventListener("keydown",(function(t){t.isComposing||"Enter"!==t.key||r()}))})),o.setTitle(Ee("setting.editor.label-confirm-enable-vim")),o.setContent(i),o.addButton("mod-cta",Ee("setting.editor.button-confirm-enable-vim"),r),o.addCancelButton(),o.open(),e.focus()},e}(pN),HV=function(t){function e(e){var n=t.call(this,e)||this;return n.titleEl.setText(Ee("setting.editor.spellcheck-dict")),n}return M(e,t),e.prototype.onOpen=function(){this.dictionary=this.app.vault.getConfig("spellcheckDictionary"),this.rerender()},e.prototype.onClose=function(){this.contentEl.empty()},e.prototype.rerender=function(){var t=this,e=this.dictionary,n=this.contentEl;n.empty();for(var i=n.createDiv("spellchecker-dictionary-container"),r=function(n){var r=i.createDiv("spellchecker-dictionary-item"),o=r.createDiv("spellchecker-dictionary-remove-button");Ty(o,Am,12),$e(o,"Remove from dictionary"),o.addEventListener("click",(function(){e.remove(n),TP.removeFromSpellcheck(n),t.app.vault.setConfig("spellcheckDictionary",e),t.rerender()})),r.createDiv({cls:"spellchecker-dictionary-word",text:n})},o=0,s=e;o<s.length;o++){r(s[o])}0===e.length&&n.createEl("p",{text:Ee("setting.editor.spellcheck-dict-empty")})},e}(KD),VV=function(t){function e(e){var n=t.call(this,e)||this;return n.titleEl.setText(Ee("setting.editor.spellcheck-dict")),n}return M(e,t),e.prototype.onOpen=function(){this.rerender()},e.prototype.onClose=function(){this.contentEl.empty()},e.prototype.rerender=function(){var t=this,e=this.contentEl;e.empty(),le((function(n){return D(t,void 0,void 0,(function(){var t,i,r,o,s,a,l,c=this;return A(this,(function(u){switch(u.label){case 0:return[4,(t=n.remote.getCurrentWebContents().session).listWordsInSpellCheckerDictionary()];case 1:for((i=u.sent()).sort(DN),r=e.createDiv("spellchecker-dictionary-container"),o=function(e){var n=r.createDiv("spellchecker-dictionary-item"),i=n.createDiv("spellchecker-dictionary-remove-button");Ty(i,Am,12),$e(i,"Remove from dictionary"),i.addEventListener("click",(function(){t.removeWordFromSpellCheckerDictionary(e),c.rerender()})),n.createDiv({cls:"spellchecker-dictionary-word",text:e})},s=0,a=i;s<a.length;s++)l=a[s],o(l);return 0===i.length&&e.createEl("p",{text:Ee("setting.editor.spellcheck-dict-empty")}),[2]}}))}))}))},e}(KD),qV=Me("setting.file"),jV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=qV("name"),e.id="file",e.deleteOption=[{value:"system",description:qV("option-choice-system-trash")},{value:"local",description:qV("option-choice-vault-trash")},{value:"none",description:qV("option-choice-permanent-delete")}],e.newNoteLocationOptions=[{value:"root",description:qV("option-choice-vault-root")},{value:"current",description:qV("option-choice-current-folder")},{value:"folder",description:qV("option-choice-specified-folder")}],e.newLinkFormatOptions=[{value:"shortest",description:qV("option-choice-shortest-linktext")},{value:"relative",description:qV("option-choice-relative-path")},{value:"absolute",description:qV("option-choice-absolute-path")}],e.newAttachmentLocationOptions=[{value:"root",description:qV("option-choice-vault-root")},{value:"folder",description:qV("option-choice-specified-folder")},{value:"current",description:qV("option-choice-current-folder")},{value:"subfolder",description:qV("option-choice-subdirectory")}],e}return M(e,t),e.prototype.display=function(){var t=this,e=this.app,n=this.containerEl;n.empty(),new DA(n).setName(qV("option-confirm-file-deletion")).setDesc(qV("option-confirm-file-deletion-description")).addToggle((function(n){return n.setValue(e.vault.getConfig("promptDelete")).onChange((function(e){t.app.vault.setConfig("promptDelete",e)}))})),new DA(n).setName(qV("option-delete-destination")).setDesc(qV("option-delete-destination-description")).addDropdown((function(n){n.onChange((function(t){e.vault.setConfig("trashOption",t)}));for(var i=0,r=t.deleteOption;i<r.length;i++){var o=r[i];n.addOption(o.value,o.description)}n.setValue(e.vault.getConfig("trashOption"))}));var i=e.vault.getConfig("alwaysUpdateLinks");new DA(n).setName(qV("option-always-update-links")).setDesc(qV("option-always-update-links-description")).addToggle((function(e){return e.setValue(i).onChange((function(e){t.app.vault.setConfig("alwaysUpdateLinks",e)}))}));var r,o=function(){a.settingEl.toggle("folder"===r.getValue())};new DA(n).setName(qV("option-new-note-location")).setDesc(qV("option-new-note-location-description")).addDropdown((function(n){r=n,n.onChange((function(t){e.vault.setConfig("newFileLocation",t),o()}));for(var i=0,s=t.newNoteLocationOptions;i<s.length;i++){var a=s[i];n.addOption(a.value,a.description)}n.setValue(e.vault.getConfig("newFileLocation"))}));var s=e.vault.getConfig("newFileFolderPath"),a=new DA(n).setName(qV("option-new-file-folder-path")).setDesc(qV("option-new-file-folder-path-description")).addText((function(t){t.setPlaceholder(Ee("setting.folder-path-example-placeholder")).setValue("/"===s?"":s).onChange((function(t){e.vault.setConfig("newFileFolderPath",t)})),new FR(e,t.inputEl)}));new DA(n).setName(qV("option-link-autocompleted-format")).setDesc(qV("option-link-autocompleted-format-description")).addDropdown((function(n){n.onChange((function(t){e.vault.setConfig("newLinkFormat",t)}));for(var i=0,r=t.newLinkFormatOptions;i<r.length;i++){var o=r[i];n.addOption(o.value,o.description)}n.setValue(e.vault.getConfig("newLinkFormat"))})),new DA(n).setName(qV("option-use-wiki-links")).setDesc(qV("option-use-wiki-links-description")).addToggle((function(t){return t.setValue(!e.vault.getConfig("useMarkdownLinks")).onChange((function(t){e.vault.setConfig("useMarkdownLinks",!t)}))})),new DA(n).setName(qV("option-show-unsupported-files")).setDesc(qV("option-show-unsupported-files-description")).addToggle((function(t){return t.setValue(e.vault.getConfig("showUnsupportedFiles")).onChange((function(t){e.vault.setConfig("showUnsupportedFiles",t)}))}));var l=null,c=null,u=null,h=null,p=null,d=function(){c.settingEl.toggle("folder"===l.getValue()),u.settingEl.toggle("subfolder"===l.getValue())},f=function(){var t=l.getValue();return"root"===t?"/":"folder"===t?h.getValue():"current"===t?"./":"subfolder"===t?"./"+p.getValue():void 0};new DA(n).setName(qV("option-new-attachment-location")).setDesc(qV("option-new-attachment-location-description")).addDropdown((function(n){n.onChange((function(t){d(),e.vault.setConfig("attachmentFolderPath",f())}));for(var i=0,r=t.newAttachmentLocationOptions;i<r.length;i++){var o=r[i];n.addOption(o.value,o.description)}l=n})),e.vault.getConfig("attachmentFolderPath"),c=new DA(n).setName(qV("option-attachment-folder-path")).setDesc(qV("option-attachment-folder-path-description")).addText((function(t){t.setPlaceholder(Ee("setting.folder-path-example-placeholder")).onChange((function(t){e.vault.setConfig("attachmentFolderPath",f())})),new FR(e,t.inputEl),h=t})),u=new DA(n).setName(qV("option-attachment-subfolder-path")).setDesc(qV("option-attachment-subfolder-path-description")).addText((function(t){return t.setPlaceholder(qV("option-attachment-subfolder-path-placeholder")).onChange((function(t){e.vault.setConfig("attachmentFolderPath",f())})).then((function(t){p=t}))})),o(),function(t){if("/"!==t)if("."!==t&&"./"!==t){if(t.startsWith("./"))return l.setValue("subfolder"),void p.setValue(t.slice(2));l.setValue("folder"),h.setValue(t)}else l.setValue("current");else l.setValue("root")}(e.vault.getConfig("attachmentFolderPath")),d()},e}(pN),UV=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.name=Ee("setting.hotkeys.name"),i.id="hotkeys",i.setHotkeyScope=null,i.commandBeingCustomized=null,i.searchInputEl=null,i.hotkeyListContainerEl=null,i.setHotkeyScope=new Nb,i.setHotkeyScope.register(null,null,(function(t,n){var r=i.commandBeingCustomized,o=e.hotkeyManager;if(r){var s=Bb.decompileModifiers(n.modifiers);if(s.length>0){var a=GA(s,n.vkey),l=o.getHotkeys(r.id)||[];l.filter((function(t){return $A(t)===$A(a)})).length>0||(l.push(a),o.setHotkeys(r.id,l),D(i,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,o.save()];case 1:return t.sent(),[2]}}))}))),i.finishCustomizingHotkey()}t.preventDefault(),t.stopPropagation()}})),i.setHotkeyScope.register([],"Escape",(function(){if(i.commandBeingCustomized)return i.finishCustomizingHotkey(),!1})),i}return M(e,t),e.prototype.display=function(){var t=this,e=this.containerEl;e.empty();var n=e.createDiv("hotkey-settings-container");n.createDiv("hotkey-search-container",(function(e){t.searchInputEl=e.createEl("input",{type:"text"},(function(e){e.setAttribute("placeholder",Ee("setting.hotkeys.prompt-filter")),e.addEventListener("input",(function(){t.updateHotkeyVisibility()}))}))})),this.hotkeyListContainerEl=n.createDiv("hotkey-list-container"),this.updateHotkeyVisibility()},e.prototype.hide=function(){this.finishCustomizingHotkey()},e.prototype.updateHotkeyVisibility=function(){var t=this,e=this.app.commands,n=this.app.hotkeyManager;this.hotkeyListContainerEl.empty();var i=new At;for(var r in e.commands)if(e.commands.hasOwnProperty(r)){var o=e.commands[r],s=n.getHotkeys(r),a=n.getDefaultHotkeys(r),l=void 0!==a;if(void 0!==s)for(var c=0,u=s;c<u.length;c++){var h=u[c];i.add($A(h),o.name)}else if(l&&a.length>0)for(var p=0,d=a;p<d.length;p++){var f=d[p];i.add($A(f),o.name)}}var g=Object.values(e.commands);g.sort((function(t,e){return DN(t.name,e.name)}));for(var m=function(e){var r=e.id,o=e.name,s=v.searchInputEl.value.toLowerCase();if(""!==s&&!o.toLowerCase().contains(s))return"continue";var a=new DA(v.hotkeyListContainerEl).setName(o).controlEl,l=n.getHotkeys(r),c=n.getDefaultHotkeys(r),u=a.createDiv("setting-command-hotkeys"),h=void 0!==l,p=void 0!==c,d=function(t,e,n){var r=$A(e);if(i.get(r)){var s=i.get(r).filter((function(t){return t!==o}));if(s.length>0)if(t.addClass("has-conflict"),1===s.length){var a=s[0];$e(t,Ee("setting.hotkeys.tooltip-hotkey-single-conflict",{command:a}))}else{var l=s.length;$e(t,Ee("setting.hotkeys.tooltip-hotkey-multiple-conflicts",{count:l}))}}t.appendText(" "+r+" "),t.createSpan("setting-hotkey-icon setting-delete-hotkey",(function(t){Ty(t,Am,8),$e(t,Ee("setting.hotkeys.tooltip-delete-hotkey")),t.addEventListener("click",n)}))};if(h)for(var f=function(e){u.createSpan("setting-hotkey",(function(i){d(i,e,(function(){return D(t,void 0,void 0,(function(){var t;return A(this,(function(i){switch(i.label){case 0:return t=l.filter((function(t){return $A(t)!==$A(e)})),n.setHotkeys(r,t),[4,n.save()];case 1:return i.sent(),this.updateHotkeyVisibility(),[2]}}))}))}))}))},g=0,m=l;g<m.length;g++){f(m[g])}else if(p&&c.length>0)for(var y=function(e){u.createSpan("setting-hotkey",(function(i){d(i,e,(function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return n.setHotkeys(r,[]),[4,n.save()];case 1:return t.sent(),this.updateHotkeyVisibility(),[2]}}))}))}))}))},b=0,w=c;b<w.length;b++){y(w[b])}v.commandBeingCustomized&&r===v.commandBeingCustomized.id?u.createSpan({cls:"setting-hotkey mod-active",text:Ee("setting.hotkeys.label-waiting-for-hotkey-press")}):(h&&0===l.length||!h&&!p)&&u.createSpan({cls:"setting-hotkey mod-empty",text:Ee("setting.hotkeys.label-blank-hotkey")}),h&&a.createSpan("setting-restore-hotkey-button",(function(e){Ty(e,Pm,18),$e(e,Ee("setting.hotkeys.tooltip-restore-default")),e.addEventListener("click",(function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return n.removeHotkeys(r),[4,n.save()];case 1:return t.sent(),this.finishCustomizingHotkey(),[2]}}))}))}))})),a.createSpan("setting-add-hotkey-button",(function(n){Ty(n,Tm,22),$e(n,Ee("setting.hotkeys.tooltip-customize-command")),n.addEventListener("click",(function(){t.commandBeingCustomized=e,t.app.keymap.pushScope(t.setHotkeyScope),t.updateHotkeyVisibility()})),n.toggleClass("mod-active",e===t.commandBeingCustomized)}))},v=this,y=0,b=g;y<b.length;y++){m(o=b[y])}},e.prototype.finishCustomizingHotkey=function(){this.app.keymap.popScope(this.setHotkeyScope),this.commandBeingCustomized=null,this.updateHotkeyVisibility()},e}(pN),_V=Me("setting.mobile-toolbar"),WV=function(t){function e(e){var n=t.call(this,e)||this;return n.emptyStateText=Ee("plugins.command-palette.label-no-commands"),n.setPlaceholder(_V("placeholder-select-quick-action")),n}return M(e,t),e.prototype.getItems=function(){return Object.values(this.app.commands.commands)},e.prototype.getItemText=function(t){return t.name},e.prototype.onChooseItem=function(t){this.app.vault.setConfig("mobilePullAction",t.id)},e}(fN),GV=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.name=_V("name"),i.id="mobile",e.commands.addCommand({id:"mobile:quick-action",name:_V("option-configure-quick-action"),icon:Jv,checkCallback:function(t){if(By.isMobile)return t||new WV(e).open(),!0}}),i}return M(e,t),e.prototype.display=function(){var t=this,e=this.app,n=this.containerEl;n.empty();var i=e.vault.getConfig("mobilePullAction"),r=e.commands.findCommand(i);new DA(n).setName(_V("option-configure-quick-action")).setDesc(_V("option-configure-quick-action-description",{command:r?r.name:""})).addButton((function(t){return t.setButtonText(_V("button-configure")).onClick((function(t){e.commands.executeCommandById("mobile:quick-action",t)}))}));var o=e.commands.commands,s=e.commands.editorCommands,a=e.vault.getConfig("mobileToolbarCommands"),l=Object.keys(s).filter((function(t){return!a.contains(t)})),c=function(){e.vault.setConfig("mobileToolbarCommands",a),t.display()};if(a){new DA(n).setName(_V("manage-toolbar-options")).setHeading();for(var u=n.createDiv(),h=function(t){var e=o[t];u.createDiv("mobile-option-setting-item",(function(n){n.createSpan("mobile-option-setting-item-remove-icon",(function(e){Ty(e,Pv,22),e.addEventListener("click",(function(){a.contains(t)&&(a.remove(t),c())}))})),n.createSpan("mobile-option-setting-item-option-icon",(function(t){return Ty(t,e.icon||sy,22)})),n.createSpan({cls:"mobile-option-setting-item-name",text:e.name}),n.createSpan("mobile-option-setting-drag-icon",(function(e){Ty(e,Qg),$e(e,Ee("interface.drag-to-rearrange")),He(e,n,u,0,(function(){return null}),(function(e){a.remove(t),a.splice(e,0,t),c()}))}))}))},p=0,d=a=a.filter((function(t){return o[t]}));p<d.length;p++){h(d[p])}}if(l.length>0){new DA(n).setName(_V("option-more-toolbar-options")).setHeading();for(var f=function(t){var e=o[t];n.createDiv("mobile-option-setting-item",(function(n){n.createSpan("mobile-option-setting-item-add-icon",(function(e){Ty(e,Tv,22),e.addEventListener("click",(function(){a.contains(t)||(a.push(t),c())}))})),n.createSpan("mobile-option-setting-item-option-icon",(function(t){return Ty(t,e.icon||sy,22)})),n.createSpan({text:e.name})}))},g=0,m=l;g<m.length;g++){f(m[g])}}var v=Object.keys(o).filter((function(t){return!s[t]&&!a.contains(t)})).map((function(t){return o[t]}));new DA(n).setName(_V("option-add-command")).setDesc(_V("option-add-command-description")).addText((function(e){return e.setPlaceholder(Ee("plugins.command-palette.prompt-type-command")).then((function(){new LR(t.app,e.inputEl,v,(function(t){var e=t.id;a.contains(e)||(a.push(e),c())}))}))}))},e}(pN),KV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=Ee("setting.builtin-plugins"),e.id="plugins",e}return M(e,t),e.prototype.display=function(){var t=this,e=this.app.internalPlugins;this.containerEl.empty();var n=this.containerEl.createDiv("plugin-list-plugins");new DA(n).setName(Ee("setting.core-plugin.option-search-plugin")).setDesc(Ee("setting.core-plugin.option-search-plugin-description")).addSearch((function(t){return t.setPlaceholder(Ee("setting.core-plugin.placeholder-search-plugin")).onChange((function(t){return o(t)}))}));var i=n.createDiv(),r={},o=function(t){i.empty(),new DA(i).setHeading().setName(Ee("setting.core-plugin.plugin-list"));for(var n=(t=(t||"").trim().toLowerCase()).split(" "),o=e.plugins,s=function(e){var s=o[e],a=s.instance,l=null,c=null;if(t&&(l=IT(n,a.name.toLowerCase()),c=IT(n,a.description.toLowerCase()),!l&&!c))return"continue";new DA(i).setName(createFragment((function(t){return RT(t,a.name,l)}))).setDesc(createFragment((function(t){return RT(t,a.description,c)}))).addToggle((function(t){r[a.id]=t,t.setValue(s.enabled).onChange((function(t){t?s.enable(!0):s.disable(!0)}))}))},a=0,l=Object.keys(o);a<l.length;a++){s(l[a])}};o(),e.on("change",(function(){t.updateEnabledState(r,t.app.internalPlugins)}))},e.prototype.updateEnabledState=function(t,e){var n=e.plugins;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i],o=t[i];o&&o.setValue(r.enabled)}},e}(pN),$V=function(t){function e(e){var n=t.call(this,e)||this;return n.settingTabs=[],n.pluginTabs=[],n.activeTab=null,n.lastTabId="",n.modalEl.addClass("mod-settings"),n.settingContainerEl=n.contentEl.createDiv("vertical-tabs-container",(function(t){n.tabHeadersEl=t.createDiv("vertical-tab-header",(function(t){t.createDiv("vertical-tab-header-group",(function(t){t.createDiv({cls:"vertical-tab-header-group-title",text:Ee("setting.options")}),n.tabContainer=t.createDiv("vertical-tab-header-group-items")})),t.createDiv("vertical-tab-header-group",(function(t){n.pluginTabHeaderGroup=t.createDiv({cls:"vertical-tab-header-group-title",text:Ee("setting.plugin-options")}),n.pluginTabHeaderGroup.hide(),n.pluginTabContainer=t.createDiv("vertical-tab-header-group-items")}))}));var e=n.tabContentContainer=t.createDiv("vertical-tab-content-container");By.isMobile&&e.detach()})),By.isMobile&&n.addSettingTab(new GV(e,n)),n.addSettingTab(new zV(e,n)),n.addSettingTab(new jV(e,n)),n.addSettingTab(new PV(e,n)),n.addSettingTab(new UV(e,n)),n.addSettingTab(new LV(e,n)),n.addSettingTab(new DV(e,n)),n.addSettingTab(new KV(e,n)),n.addSettingTab(new RV(e,n)),n}return M(e,t),e.prototype.addSettingTab=function(t){var e=this;t.navEl||(t.navEl=createDiv({cls:"vertical-tab-nav-item",text:t.name},(function(n){n.addEventListener("click",(function(){e.openTab(t)}))}))),this.isPluginSettingTab(t)?this.pluginTabs.push(t):(this.settingTabs.push(t),this.tabContainer.appendChild(t.navEl)),this.updatePluginSection()},e.prototype.removeSettingTab=function(t){this.pluginTabs.remove(t),this.settingTabs.remove(t);var e=this.activeTab;e&&e===t&&this.closeActiveTab(),this.updatePluginSection()},e.prototype.isPluginSettingTab=function(t){return t instanceof NN||t instanceof IN},e.prototype.updatePluginSection=function(){var t=this.pluginTabs;t.sort((function(t,e){return DN(t.name,e.name)})),this.pluginTabHeaderGroup.toggle(t.length>0),this.pluginTabContainer.setChildrenInPlace(t.map((function(t){return t.navEl})))},e.prototype.openTab=function(t){var e=this,n=this,i=n.activeTab,r=n.settingContainerEl,o=n.tabContentContainer;if(i&&(i.navEl.removeClass("is-active"),o.empty(),i.hide()),this.activeTab=t,this.lastTabId=t.id,t.navEl.addClass("is-active"),o.empty(),By.isMobile){var s=o.createDiv("modal-setting-back-button",(function(t){t.addEventListener("click",(function(){return e.closeActiveTab()}))}));s.createSpan("modal-setting-back-button-icon",(function(t){Ty(t,fm,20)})),s.createSpan({text:t.name}),o.appendChild(t.containerEl),Lb(r,o,"right")}else o.appendChild(t.containerEl);t.display()},e.prototype.closeActiveTab=function(){var t=this,e=this.activeTab;if(e){e.navEl.removeClass("is-active");var n=function(){t.tabContentContainer.empty(),e.hide()};By.isMobile?(this.activeTab=null,Lb(this.settingContainerEl,this.tabHeadersEl,"left",n)):n(),this.activeTab=null}},e.prototype.openTabById=function(t){for(var e=0,n=this.settingTabs;e<n.length;e++){if((o=n[e]).id===t)return this.openTab(o),o}for(var i=0,r=this.pluginTabs;i<r.length;i++){var o;if((o=r[i]).id===t)return this.openTab(o),o}return null},e.prototype.onOpen=function(){t.prototype.onOpen.call(this),By.isMobile||this.openTabById(this.lastTabId)||this.openTab(this.settingTabs[0])},e.prototype.onClose=function(){t.prototype.onClose.call(this),this.closeActiveTab()},e}(KD),YV=function(){function t(){var t=this;this.showTimeout=0;var e=this.el=createDiv({cls:"progress-bar"});this.messageEl=e.createDiv({cls:"progress-bar-message u-center-text",text:""}),e.createDiv("progress-bar-indicator",(function(e){e.createDiv("progress-bar-line"),t.lineEl=e.createDiv("progress-bar-subline"),t.line1El=e.createDiv("progress-bar-subline mod-increase"),t.line2El=e.createDiv("progress-bar-subline mod-decrease")})),e.addEventListener("click",(function(e){e.preventDefault(),t.show()})),this.setUnknownProgress()}return t.prototype.delayedShow=function(){var t=this;return document.body.appendChild(this.el),this.el.style.opacity="0",this.showTimeout=window.setTimeout((function(){return t.show()}),300),this},t.prototype.show=function(){return window.clearTimeout(this.showTimeout),this.showTimeout=0,document.body.appendChild(this.el),this.el.style.opacity="",this},t.prototype.hide=function(){return window.clearTimeout(this.showTimeout),this.showTimeout=0,this.el.remove(),this},t.prototype.setMessage=function(t){return this.messageEl.setText(t),this},t.prototype.setUnknownProgress=function(){return this.lineEl.hide(),this.line1El.show(),this.line2El.show(),this},t.prototype.setProgress=function(t,e){this.lineEl.show(),this.line1El.hide(),this.line2El.hide();var n=(t/e*100).toFixed(4);return this.lineEl.style.width=n+"%",this},t}(),JV=function(){function t(){this.id="slash-command",this.name=Ee("plugins.slash-command.name"),this.description=Ee("plugins.slash-command.desc"),this.defaultOn=!1}return t.prototype.init=function(t,e){this.suggest=new XV(t)},t.prototype.onEnable=function(t,e){return D(this,void 0,Promise,(function(){return A(this,(function(e){return t.workspace.editorSuggest.addSuggest(this.suggest),[2]}))}))},t.prototype.onDisable=function(t,e){t.workspace.editorSuggest.removeSuggest(this.suggest)},t}(),QV=/(^|\s)\/([^\s\/]*)$/,XV=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.onTrigger=function(t,e,n){var i=t.line,r=e.getLine(i).substr(0,t.ch).match(QV);if(r){var o=r.index+r[1].length,s=r[2];return{start:{line:i,ch:o},end:{line:i,ch:t.ch},query:s}}return null},e.prototype.selectSuggestion=function(t,e){var n=this.context;(this.close(),n)&&(this.app.lastEvent=e,n.editor.replaceRange("",n.start,n.end),lR(t.item))},e.prototype.getSuggestions=function(t){var e=t.query;e=e.toLowerCase();for(var n=this.app.internalPlugins.getPluginById("command-palette").instance.getCommands(),i=DT(e),r=[],o=0,s=n;o<s.length;o++){var a=s[o],l=i(a.name);l&&r.push({match:l,item:a})}return OT(r),r},e.prototype.renderSuggestion=function(t,e){var n=e.createSpan("suggestion-prefix"),i=e.createSpan("suggestion-content"),r=t.item,o=this.app.internalPlugins.getPluginById("command-palette").instance.options.pinned;o&&o.contains(r.id)&&e.createSpan({cls:"suggestion-flair"},(function(t){Ty(t,Nm,13)}));var s=r.name,a=s.indexOf(": ");if(-1!==a){var l=s.slice(0,a),c=s.slice(a+2);BT(n,l,t.match),BT(i,c,t.match,-(a+2))}else BT(i,s,t.match),n.remove();var u=this.app,h=u.hotkeyManager.getHotkeys(r.id),p=u.hotkeyManager.getDefaultHotkeys(r.id);if(h)for(var d=0,f=h;d<f.length;d++){var g=f[d];e.createEl("kbd",{cls:"suggestion-hotkey",text:$A(g)})}else if(p)for(var m=0,v=p;m<v.length;m++){g=v[m];e.createEl("kbd",{cls:"suggestion-hotkey",text:$A(g)})}},e}(ZI),ZV="0.13.18";le((function(t){ZV=t.ipcRenderer.sendSync("version")}));var tq,eq=function(t){this.appContainerEl=null,this.horizontalMainContainerEl=null,this.workspaceEl=null,this.statusBarEl=null,this.appContainerEl=t.createDiv("app-container is-left-sidedock-collapsed is-right-sidedock-collapsed"),this.horizontalMainContainerEl=this.appContainerEl.createDiv("horizontal-main-container"),this.workspaceEl=this.horizontalMainContainerEl.createDiv("workspace"),this.statusBarEl=this.appContainerEl.createDiv("status-bar")},nq=window.frameDom;if(nq){var iq=document.createDocumentFragment(),rq=iq.createDiv("titlebar-button mod-back");Ty(rq,fm,15),rq.addEventListener("click",(function(){window.history.back()}));var oq=iq.createDiv("titlebar-button mod-forward");Ty(oq,gm,15),oq.addEventListener("click",(function(){window.history.forward()})),ke.then((function(){$e(rq,Ee("interface.window.go-back")),$e(oq,Ee("interface.window.go-forward"))})),nq.leftButtonContainerEl.appendChild(iq),nq.leftSpacing=30,nq.updateStatus()}le((function(t){t.remote.dialog}));try{var sq="";dt?sq="mod-macos":ft?sq="mod-windows":gt&&(sq="mod-linux"),sq&&document.body.addClass(sq)}catch(t){console.error(t)}(tq=document.body).on("mouseover","[aria-label]",_e),tq.on("mouseout","[aria-label]",We),tq.addEventListener("mouseup",Ke),window.addEventListener("touchstart",(function(t){1===t.touches.length&&(Re.sx=t.changedTouches[0].clientX,Re.sy=t.changedTouches[0].clientY,Re.t=Date.now())}),!0),window.addEventListener("touchend",(function(t){0===t.touches.length&&(Re.ex=t.changedTouches[0].clientX,Re.ey=t.changedTouches[0].clientY,Re.t=Date.now())}),!0),document.addEventListener("scroll",(function(){return document.documentElement.scrollTop=0}),{passive:!1});var aq="EmulateMobile",lq=function(){function t(t,e){var n=this;this.hotkeyManager=null,this.customCss=null,this.viewRegistry=new BF,this.nextFrameEvents=[],this.nextFrameTimer=null,this.fileManager=null,this.setting=null,this.account=null,this.isMobile=!1,this.mobileToolbar=null,this.shareReceiver=null,this.lastEvent=null,console.log("%cObsidian Developer Console","color:#7f6df2; font-size:40px; font-weight:bold;");var i=document.body;this.appId=e,this.keymap=new Bb,this.scope=this.keymap.getRootScope(),this.commands=new cR(this),this.hotkeyManager=new XA(this),this.dragManager=new _A(this),this.dom=new eq(i),this.customCss=new uR(this),this.loadProgress=new YV,this.shareReceiver=new CR(this),localStorage.getItem(aq)&&(By.isMobile=!0,By.isDesktop=!1),this.isMobile=By.isMobile,By.isMobile&&(this.mobileToolbar=new bR(this),i.addClass("is-mobile"),i.createDiv("safe-area-top-cover"),i.style.backgroundColor="var(--background-primary)"),By.isIosApp&&function(){document.body.style["-webkit-touch-callout"]="none";var t=document.body;t.addEventListener("touchstart",(function(e){if(!(e.touches.length>1)){var n=e.touches[0],i=e.target,r=n.clientX,o=n.clientY,s=n.identifier,a=!1,l=window.setTimeout((function(){a=!0,t.removeEventListener("touchmove",p,!0),i.dispatchEvent(new MouseEvent("contextmenu",{button:0,buttons:0,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey,shiftKey:e.shiftKey,screenX:n.screenX,screenY:n.screenY,bubbles:!0,cancelable:!0,clientX:r,clientY:o}))}),400),c=function(e,n){t.removeEventListener("touchcancel",h,!0),t.removeEventListener("touchend",h,!0),t.removeEventListener("touchmove",p,!0),window.clearTimeout(l),a&&e.preventDefault()},u=function(e,n){if(!a){var i=n.clientX-r,s=n.clientY-o;i*i+s*s>25&&(t.removeEventListener("touchcancel",h,!0),t.removeEventListener("touchend",h,!0),t.removeEventListener("touchmove",p,!0),window.clearTimeout(l))}},h=function(t){for(var e=t.changedTouches,n=0;n<e.length;n++){if(e[n].identifier===s)return void c(t)}},p=function(t){for(var e=t.changedTouches,n=0;n<e.length;n++){var i=e[n];if(i.identifier===s)return void u(0,i)}};t.addEventListener("touchcancel",h,!0),t.addEventListener("touchend",h,!0),t.addEventListener("touchmove",p,!0)}}))}(),D(n,void 0,void 0,(function(){var e,n,i=this;return A(this,(function(r){switch(r.label){case 0:e=this.loadProgress,r.label=1;case 1:return r.trys.push([1,3,,4]),e.setMessage(Ee("interface.start-up.loading-obsidian")).delayedShow(),[4,this.initializeWithAdapter(t)];case 2:return r.sent(),e.hide(),[3,4];case 3:return n=r.sent(),console.error(n),e.setMessage(Ee("interface.start-up.obsidian-load-error")+" "+(n?n.toString():"unknown")),e.el.createEl("button",{cls:"mod-cta",text:Ee("interface.start-up.button-reload-app")},(function(t){t.style.marginTop="50px",t.onClickEvent((function(){window.location.reload()}))})),e.el.createEl("button",{cls:"mod-cta",text:Ee("interface.start-up.button-open-another-vault")},(function(t){t.style.marginTop="20px",t.onClickEvent((function(){i.openVaultChooser()}))})),[3,4];case 4:return[2]}}))}))}return t.prototype.setAttachmentFolder=function(t){this.vault.setConfig("attachmentFolderPath",t.path);var e=Ee("plugins.file-explorer.msg-set-attachment-folder",{path:t.path});new jb(e)},t.prototype.nextFrame=function(t){this.nextFrameTimer||(this.nextFrameTimer=window.requestAnimationFrame(this.onNextFrame.bind(this))),this.nextFrameEvents.push(t)},t.prototype.nextFramePromise=function(){var t=this;return new Promise((function(e){return t.nextFrame(e)}))},t.prototype.onNextFrame=function(t){this.nextFrameTimer=null;var e=this.nextFrameEvents;this.nextFrameEvents=[];for(var n=0,i=e;n<i.length;n++){(0,i[n])(t)}},t.prototype.nextFrameOnceCallback=function(t){var e=this,n=!1;return function(){n||(n=!0,e.nextFrame((function(e){n=!1,t(e)})))}},t.prototype.initializeWithAdapter=function(e){return D(this,void 0,void 0,(function(){var n,i,r,o,s,a,l,c=this;return A(this,(function(u){switch(u.label){case 0:if(this.vault=new hb(e),this.loadProgress.setMessage(Ee("interface.start-up.loading-components")),!By.isDesktopApp)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.vault.readRaw("")];case 2:return u.sent(),[3,4];case 3:return"ENOENT"===(n=u.sent()).code?(this.vault=null,this.openVaultChooser(),window.close(),[2]):(n.code,[3,4]);case 4:return(i=t.getOverrideConfigDir(this.appId))&&this.vault.setConfigDir(i),[4,this.vault.setupConfig()];case 5:return u.sent(),this.disableCssTransition(),this.workspace=new hN(this,this.dom.workspaceEl),this.fileManager=new wN(this),this.statusBar=new MV(this,this.dom.statusBarEl),this.metadataCache=new LA(this,this.vault),this.account=new fn,this.account.license,this.setting=new $V(this),this.foldManager=new yR(this),this.setTheme(this.vault.getConfig("theme")),this.changeBaseFontSize(this.vault.getConfig("baseFontSize")),this.customCss.load(),window.addEventListener("click",this.onMouseEvent.bind(this)),window.addEventListener("mousedown",this.onMouseEvent.bind(this)),this.shareReceiver.setupWorkspace(),this.loadProgress.setMessage(Ee("interface.start-up.loading-plugins")),this.internalPlugins=new YN(this),this.plugins=new BN(this),this.internalPlugins.loadPlugin(new jR),this.internalPlugins.loadPlugin(new iz),this.internalPlugins.loadPlugin(new EH),this.internalPlugins.loadPlugin(new RI),this.internalPlugins.loadPlugin(new hB),this.internalPlugins.loadPlugin(new Cz),this.internalPlugins.loadPlugin(new sV),this.internalPlugins.loadPlugin(new Bz),this.internalPlugins.loadPlugin(new BR),this.internalPlugins.loadPlugin(new fV),this.internalPlugins.loadPlugin(new mz),this.internalPlugins.loadPlugin(new DR),this.internalPlugins.loadPlugin(new JV),this.internalPlugins.loadPlugin(new VR),this.internalPlugins.loadPlugin(new OH),this.internalPlugins.loadPlugin(new az),this.internalPlugins.loadPlugin(new SV),this.internalPlugins.loadPlugin(new DH),this.internalPlugins.loadPlugin(new Iz),this.internalPlugins.loadPlugin(new yV),this.internalPlugins.loadPlugin(new TH),this.internalPlugins.loadPlugin(new ER),this.internalPlugins.loadPlugin(new HR),this.internalPlugins.loadPlugin(new bV),this.internalPlugins.loadPlugin(new XR),this.internalPlugins.loadPlugin(new xH),this.internalPlugins.loadPlugin(new WH),[4,this.plugins.initialize()];case 6:return u.sent(),[4,this.hotkeyManager.load()];case 7:return u.sent(),this.registerCommands(),[4,this.internalPlugins.enable()];case 8:u.sent(),this.loadProgress.setMessage(Ee("interface.start-up.loading-vault")),u.label=9;case 9:return u.trys.push([9,11,,12]),[4,this.vault.load()];case 10:return u.sent(),[3,12];case 11:throw r=u.sent(),new jb(Ee("interface.start-up.msg-failed-to-load-vault")+r?r.message:""),console.error(r),r;case 12:return this.vault.on("closed",(function(){c.openVaultChooser(),window.close()})),this.loadProgress.setMessage(Ee("interface.start-up.loading-cache")),[4,this.metadataCache.initialize()];case 13:return u.sent(),"Obsidian Help"===this.vault.getName()&&"boolean"!=typeof this.vault.config.legacyEditor&&this.vault.setConfig("legacyEditor",!1),this.vault.getConfig("legacyEditor")||(nR.enable=!0),(By.isMobile||nR.enable)&&this.commands.addCommand({id:"editor:toggle-source",name:Ee("commands.toggle-source-mode"),icon:hv,editorCheckCallback:function(t,e,n){if(n.editMode&&n.currentMode===n.editMode){if(!t){var i=n.leaf,r=n.getState();r.source=!r.source,i.setViewState({type:iR,state:r}),c.workspace.requestSaveLayout()}return!0}}}),this.loadProgress.setMessage(Ee("interface.start-up.loading-workspace")),[4,this.workspace.loadLayout()];case 14:u.sent(),setTimeout((function(){c.enableCssTransition()}),500),this.workspace.registerUriHook(),this.registerQuitHook(),this.metadataCache.showIndexingNotice(),this.shareReceiver.setupNative(),By.isDesktopApp&&(o=function(){le((function(t){"update-manual-required"===t.ipcRenderer.sendSync("update")&&(clearInterval(s),new jb(createFragment((function(t){t.createEl("b",{text:Ee("interface.label-update-available")}),t.createEl("p",{text:Ee("setting.about.label-manual-install-required")}),t.createEl("p").createEl("button",{cls:"mod-cta",text:Ee("setting.about.label-download")}).addEventListener("click",(function(){return window.open("https://obsidian.md/download")}))})),0))}))},s=setInterval(o,36e5),o(),!localStorage.getItem("shownLivePreview-"+this.appId)&&this.vault.getConfig("legacyEditor")&&((a=new KD(this)).setTitle(Ee("setting.editor.label-live-preview-update")),a.contentEl.createEl("p",{text:Ee("setting.editor.label-live-preview-update-1")}),a.contentEl.createEl("p",{text:Ee("setting.editor.label-live-preview-update-2")}),a.contentEl.createEl("p",{text:Ee("setting.editor.label-live-preview-update-3")}),a.contentEl.createEl("p",{cls:"u-center-text"},(function(t){t.createEl("div",{cls:"live-preview-image"})})),a.contentEl.createEl("p",{text:Ee("setting.editor.label-live-preview-update-4")}),a.contentEl.createDiv("modal-button-container",(function(t){t.createEl("button",{cls:"mod-cta",text:Ee("setting.editor.button-turn-on-live-preview")},(function(t){t.onClickEvent((function(){return D(c,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return this.vault.setConfig("legacyEditor",!1),this.vault.setConfig("livePreview",!0),[4,this.vault.saveConfig()];case 1:return t.sent(),localStorage.setItem("shownLivePreview-"+this.appId,"true"),window.location.reload(),[2]}}))}))}))})),t.createEl("button",{text:Ee("interface.button-learn-more")},(function(t){t.onClickEvent((function(){window.open("https://help.obsidian.md/Live+preview+update")}))})),t.createEl("button",{text:Ee("interface.button-not-now")},(function(t){t.onClickEvent((function(){a.close()}))}))})),a.open(),a.onClose=function(){localStorage.setItem("shownLivePreview-"+c.appId,"true")})),u.label=15;case 15:return u.trys.push([15,18,,19]),!(l=this.internalPlugins.getPluginById("sync"))||l.enabled?[3,17]:[4,bA(this.appId+"-sync")];case 16:u.sent(),u.label=17;case 17:return[3,19];case 18:return u.sent(),[3,19];case 19:return[2]}}))}))},t.prototype.registerCommands=function(){var t=this,e=this.commands;e.addCommand({id:"app:go-back",name:Ee("commands.navigate-back"),icon:fm,callback:function(){history.back()},hotkeys:[GA(["Mod","Alt"],"ArrowLeft")]}),e.addCommand({id:"app:go-forward",name:Ee("commands.navigate-forward"),icon:gm,callback:function(){history.forward()},hotkeys:[GA(["Mod","Alt"],"ArrowRight")]}),e.addCommand({id:"app:open-vault",name:Ee("interface.switch-vault"),icon:zm,callback:this.openVaultChooser.bind(this)}),e.addCommand({id:"theme:use-dark",name:Ee("commands.use-dark-mode"),callback:function(){t.changeTheme("obsidian")}}),e.addCommand({id:"theme:use-light",name:Ee("commands.use-light-mode"),callback:function(){t.changeTheme("moonstone")}}),e.addCommand({id:"app:open-settings",name:Ee("commands.open-settings"),icon:Dv,callback:function(){t.setting.open()},hotkeys:[GA(["Mod"],",")]}),e.addCommand({id:"markdown:toggle-preview",name:Ee("commands.toggle-preview"),icon:Ly,checkCallback:function(e){var n=t.workspace.getActiveViewOfType(rR);if(n){if(!e){var i=n.leaf,r=i.getViewState();r.state.mode="preview"===r.state.mode?"source":"preview",i.setViewState(r,{focus:!0})}return!0}},hotkeys:[GA(["Mod"],"E")]}),e.addCommand({id:"workspace:close",name:Ee("commands.close-active-pane"),icon:Am,checkCallback:function(e){var n=t.workspace.activeLeaf;return!!n&&(e||n.detach(),!0)},hotkeys:[GA(["Mod"],"W")]}),e.addCommand({id:"workspace:close-others",name:Ee("commands.close-other-panes"),icon:Am,checkCallback:function(e){var n=t.workspace.activeLeaf,i=[];if(t.workspace.iterateRootLeaves((function(t){t!==n&&i.push(t)})),!e)for(var r=0,o=i;r<o.length;r++){o[r].detach()}return i.length>0}}),e.addCommand({id:"app:delete-file",name:Ee("commands.delete-current-file"),icon:Ug,checkCallback:function(e){var n=t.workspace.getActiveFile();if(n)return e||t.fileManager.promptForFileDeletion(n),!0}}),e.addCommand({id:"app:toggle-left-sidebar",name:Ee("commands.toggle-left-sidebar"),callback:function(){t.workspace.leftSplit.toggle()}}),e.addCommand({id:"app:toggle-right-sidebar",name:Ee("commands.toggle-right-sidebar"),callback:function(){t.workspace.rightSplit.toggle()}}),e.addCommand({id:"app:toggle-default-new-pane-mode",name:Ee("commands.toggle-default-new-pane-mode"),callback:function(){var e=t.vault.getConfig("defaultViewMode");"source"===e?(t.vault.setConfig("defaultViewMode","preview"),new jb(Ee("interface.msg-switched-to-read"))):"preview"===e&&(t.vault.setConfig("defaultViewMode","source"),new jb(Ee("interface.msg-switched-to-edit")))}}),e.addCommand({id:"app:open-help",name:Ee("commands.open-help"),icon:sy,callback:this.openHelp.bind(this),hotkeys:[GA([],"F1")]}),e.addCommand({id:"app:reload",name:Ee("commands.reload"),icon:Pm,callback:function(){return window.location.reload()}}),e.addCommand({id:"app:show-debug-info",name:Ee("commands.show-debug-info"),callback:function(){new aN(t).open()}}),e.addCommand({id:"file-explorer:new-file",name:Ee("plugins.file-explorer.action-create-note"),icon:Gv,callback:function(){return t.fileManager.createAndOpenMarkdownFile()},hotkeys:[GA(["Mod"],"N")]}),e.addCommand({id:"file-explorer:new-file-in-new-pane",name:Ee("plugins.file-explorer.action-create-note-in-new-pane"),icon:Gv,callback:function(){return t.fileManager.createAndOpenMarkdownFile(void 0,!0)},hotkeys:[GA(["Mod","Shift"],"N")]}),function(t){var e=this,n=t.commands;function i(){var e=t.vault.getConfig("foldHeading"),n=t.vault.getConfig("foldIndent");return e||n}n.addCommand({id:"editor:open-search",name:Ee("commands.search-current-file"),icon:ly,checkCallback:function(e){var n=t.workspace.getActiveViewOfType(rR);if(n)return e||n.showSearch(),!0},hotkeys:[GA(["Mod"],"F")]}),n.addCommand({id:"editor:open-search-replace",name:Ee("commands.search-replace-current-file"),icon:ly,checkCallback:function(e){var n=t.workspace.getActiveViewOfType(rR);if(n&&"source"===n.getMode())return e||n.showSearch(!0),!0},hotkeys:[dt?GA(["Mod","Alt"],"F"):GA(["Mod"],"H")]}),n.addCommand({id:"editor:focus",name:Ee("commands.focus-editor"),icon:"",editorCallback:function(t){return t.focus()}}),n.addCommand({id:"editor:toggle-fold",name:Ee("commands.toggle-fold"),icon:Uv,editorCheckCallback:function(t,e){if(i())return t||e.exec("toggleFold"),!0}}),n.addCommand({id:"editor:fold-all",name:Ee("commands.fold-all"),icon:zv,allowPreview:!0,editorCheckCallback:function(t,e,n){if(i()){if("source"===n.getMode())return t||e.exec("foldAll"),!0;if("preview"===n.getMode())return t||n.previewMode.foldAll(),!0}}}),n.addCommand({id:"editor:unfold-all",name:Ee("commands.unfold-all"),icon:Hv,allowPreview:!0,editorCheckCallback:function(t,e,n){if(i()){if("source"===n.getMode())return t||e.exec("unfoldAll"),!0;if("preview"===n.getMode())return t||n.previewMode.unfoldAll(),!0}}}),n.addCommand({id:"editor:insert-wikilink",name:Ee("setting.mobile-toolbar.option-internal-link"),icon:nv,editorCallback:function(t){return t.triggerWikilink(!1)}}),n.addCommand({id:"editor:insert-embed",name:Ee("setting.mobile-toolbar.option-internal-embed"),icon:iv,editorCallback:function(t){return t.triggerWikilink(!0)}}),n.addCommand({id:"editor:insert-link",name:Ee("commands.insert-link"),icon:dv,editorCallback:function(t){return t.insertMarkdownLink()},hotkeys:[GA(["Mod"],"K")]}),n.addCommand({id:"editor:insert-tag",name:Ee("setting.mobile-toolbar.option-tag"),icon:ov,editorCallback:function(t){return t.insertText("#")}}),n.addCommand({id:"editor:set-heading",name:Ee("setting.mobile-toolbar.option-heading"),icon:sv,editorCallback:function(e){return new vR(t,new Nb(t.scope),e).open()}}),n.addCommand({id:"editor:toggle-bold",name:Ee("commands.toggle-bold"),icon:av,editorCallback:function(t){return t.toggleSurroundingMarkdown("**")},hotkeys:[GA(["Mod"],"B")]}),n.addCommand({id:"editor:toggle-italics",name:Ee("commands.toggle-italics"),icon:lv,editorCallback:function(t){return t.toggleSurroundingMarkdown("*")},hotkeys:[GA(["Mod"],"I")]}),n.addCommand({id:"editor:toggle-strikethrough",name:Ee("setting.mobile-toolbar.option-strikethrough"),icon:cv,editorCallback:function(t){return t.toggleSurroundingMarkdown("~~")}}),n.addCommand({id:"editor:toggle-highlight",name:Ee("commands.toggle-highlight"),icon:uv,editorCallback:function(t){return t.toggleSurroundingMarkdown("==")}}),n.addCommand({id:"editor:toggle-code",name:Ee("setting.mobile-toolbar.option-code"),icon:hv,editorCallback:function(t){return t.toggleSurroundingMarkdown("`")}}),n.addCommand({id:"editor:toggle-blockquote",name:Ee("setting.mobile-toolbar.option-blockquote"),icon:pv,editorCallback:function(t){return t.toggleBlockquote()}}),n.addCommand({id:"editor:toggle-comments",name:Ee("commands.toggle-comments"),icon:xv,editorCallback:function(t){return t.toggleSurroundingMarkdown("%%")},hotkeys:[GA(["Mod"],"/")]}),n.addCommand({id:"editor:toggle-bullet-list",name:Ee("setting.mobile-toolbar.option-bullet-list"),icon:fv,editorCallback:function(t){return t.toggleBulletList()}}),n.addCommand({id:"editor:toggle-numbered-list",name:Ee("setting.mobile-toolbar.option-numbered-list"),icon:gv,editorCallback:function(t){return t.toggleNumberList()}}),n.addCommand({id:"editor:toggle-checklist-status",name:Ee("commands.toggle-checklist"),icon:mv,editorCallback:function(t){return t.toggleCheckList()},hotkeys:[GA(["Mod"],"Enter")]}),n.addCommand({id:"editor:indent-list",name:Ee("setting.mobile-toolbar.option-indent-list"),icon:Ov,mobileOnly:!0,editorCallback:function(t){return t.indentList()}}),n.addCommand({id:"editor:unindent-list",name:Ee("setting.mobile-toolbar.option-unindent-list"),icon:Fv,mobileOnly:!0,editorCallback:function(t){return t.unindentList()}}),n.addCommand({id:"editor:swap-line-up",name:Ee("commands.swap-line-up"),icon:qv,editorCallback:function(t){return t.exec("swapLineUp")}}),n.addCommand({id:"editor:swap-line-down",name:Ee("commands.swap-line-down"),icon:jv,editorCallback:function(t){return t.exec("swapLineDown")}}),n.addCommand({id:"editor:undo",name:Ee("setting.mobile-toolbar.option-undo"),icon:vv,mobileOnly:!0,editorCallback:function(t){return t.undo()}}),n.addCommand({id:"editor:redo",name:Ee("setting.mobile-toolbar.option-redo"),icon:yv,mobileOnly:!0,editorCallback:function(t){return t.redo()}}),n.addCommand({id:"editor:move-caret-up",name:Ee("setting.mobile-toolbar.option-move-caret-up"),icon:bv,mobileOnly:!0,editorCallback:function(t){return t.exec("goUp")}}),n.addCommand({id:"editor:move-caret-down",name:Ee("setting.mobile-toolbar.option-move-caret-down"),icon:wv,mobileOnly:!0,editorCallback:function(t){return t.exec("goDown")}}),n.addCommand({id:"editor:move-caret-left",name:Ee("setting.mobile-toolbar.option-move-caret-left"),icon:kv,mobileOnly:!0,editorCallback:function(t){return t.exec("goLeft")}}),n.addCommand({id:"editor:move-caret-right",name:Ee("setting.mobile-toolbar.option-move-caret-right"),icon:Cv,mobileOnly:!0,editorCallback:function(t){return t.exec("goRight")}}),n.addCommand({id:"editor:go-start",name:Ee("setting.mobile-toolbar.option-first-line"),icon:Ev,mobileOnly:!0,editorCallback:function(t){return t.exec("goStart")}}),n.addCommand({id:"editor:go-end",name:Ee("setting.mobile-toolbar.option-last-line"),icon:Mv,mobileOnly:!0,editorCallback:function(t){return t.exec("goEnd")}}),n.addCommand({id:"editor:toggle-keyboard",name:Ee("setting.mobile-toolbar.option-toggle-keyboard"),icon:Sv,mobileOnly:!0,editorCallback:function(t){t.hasFocus()?t.blur():t.focus()}}),n.addCommand({id:"editor:configure-toolbar",name:Ee("setting.mobile-toolbar.option-configure-toolbar"),icon:Dv,mobileOnly:!0,editorCallback:function(){var e=t.setting;e.openTabById("mobile-toolbar"),e.open()}}),n.addCommand({id:"editor:attach-file",name:Ee("setting.mobile-toolbar.option-attach"),icon:Lv,editorCallback:function(n){var i,r=document.body.createEl("input",{type:"file"});r.style.position="fixed",r.style.opacity="0",r.style.zIndex="-9999",r.addEventListener("change",(function(){return D(e,void 0,void 0,(function(){var e,i,a,l,c,u,h,p;return A(this,(function(d){switch(d.label){case 0:if(o(),!(e=r.files))return s(),[2];if(!(i=t.workspace.getActiveFile()))return s(),[2];d.label=1;case 1:d.trys.push([1,,7,8]),a=0,d.label=2;case 2:return a<e.length?(l=e[a],c=Kt(l.name),[4,l.arrayBuffer()]):[3,6];case 3:return u=d.sent(),[4,t.saveAttachment(Jt(c),Xt(c),u)];case 4:(h=d.sent())&&(p=t.fileManager.generateMarkdownLink(h,i.path),n.replaceSelection(p)),d.label=5;case 5:return a++,[3,2];case 6:return[3,8];case 7:return s(),[7];case 8:return[2]}}))}))}));var o=function(){document.removeEventListener("focus",a),document.removeEventListener("click",a),clearTimeout(i)},s=function(){r.detach()},a=function(){o(),i=window.setTimeout(s,5e3)};r.focus(),r.click(),setTimeout((function(){document.addEventListener("focus",a),document.addEventListener("click",a)}),0)}}),n.addCommand({id:"editor:delete-paragraph",name:Ee("commands.delete-paragraph"),icon:Vv,editorCallback:function(t){return t.exec("deleteLine")},hotkeys:[GA(["Mod"],"D")]}),n.addCommand({id:"editor:toggle-spellcheck",name:Ee("commands.toggle-spellcheck"),callback:function(){t.vault.setConfig("spellcheck",!t.vault.getConfig("spellcheck"))}}),By.isMobileApp&&(n.addCommand({id:"editor:paste",name:Ee("interface.menu.paste"),icon:Cy,editorCallback:function(t){return D(e,void 0,void 0,(function(){var e,n;return A(this,(function(i){switch(i.label){case 0:return n=(e=t).replaceSelection,[4,window.navigator.clipboard.readText()];case 1:return[2,n.apply(e,[i.sent()])]}}))}))}}),n.addCommand({id:"editor:copy",name:Ee("interface.menu.copy"),icon:by,editorCallback:function(t){return D(e,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,window.navigator.clipboard.writeText(t.getSelection())];case 1:return[2,e.sent()]}}))}))}}),n.addCommand({id:"editor:context-menu",name:Ee("commands.context-menu"),icon:Qg,editorCallback:function(t,e){var n=e.editMode,i=e.sourceMode,r=n||i;if(r){var o=t.getCursor("head"),s=t.coordsAtPos(o);r.clipboardManager.onContextMenu(new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:0,buttons:0,clientX:s.left,clientY:s.top}))}}}))}(this),By.isDesktopApp&&Wy.registerPostProcessor((function(e){return t.fixFileLinks(e)})),Wy.registerPostProcessor((function(e){for(var n=function(e){var n=e.parentElement;if(!n)return"continue";if(n.findAll(".copy-code-button").length>0)return"continue";var i=Jy(e);i.endsWith("\n")&&(i=i.substr(0,i.length-1)),n.createEl("button",{cls:"copy-code-button",text:Ee("interface.menu.copy")}).onClickEvent((function(){return D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,navigator.clipboard.writeText(i)];case 1:return t.sent(),new jb(Ee("interface.copied",{item:""})),[2]}}))}))}))},i=0,r=e.findAll("pre > code");i<r.length;i++){n(r[i])}}))},t.prototype.disableCssTransition=function(){this.dom.appContainerEl.addClass("no-transition")},t.prototype.enableCssTransition=function(){this.dom.appContainerEl.removeClass("no-transition")},t.prototype.getTheme=function(){return this.vault.getConfig("theme")},t.prototype.fixFileLinks=function(t){if(By.isDesktopApp)for(var e=0,n=t.findAll("img, audio, video, iframe");e<n.length;e++){var i=n[e];(i instanceof HTMLImageElement||i instanceof HTMLMediaElement||i instanceof HTMLIFrameElement)&&i.src.startsWith("file:///")&&(i.src="app://local/"+i.src.substr("file:///".length))}},t.prototype.changeTheme=function(t){var e=this;t&&(this.disableCssTransition(),this.setTheme(t),setTimeout((function(){e.enableCssTransition()}),200),this.vault.setConfig("theme",t),this.workspace.trigger("css-change"))},t.prototype.changeBaseFontSize=function(t){t=Math.clamp(t,10,30),document.body.style.setProperty("--editor-font-size",t+"px"),this.vault.setConfig("baseFontSize",t),this.workspace.trigger("css-change")},t.prototype.setTheme=function(t){var e=document.body;"obsidian"===t?(e.removeClass("theme-light"),e.addClass("theme-dark")):"moonstone"===t&&(e.removeClass("theme-dark"),e.addClass("theme-light")),By.isMobileApp&&(By.isAndroidApp&&ZF.setStyle({style:Ye.Dark}),By.isIosApp&&("obsidian"===t?ZF.setStyle({style:Ye.Dark}):"moonstone"===t&&ZF.setStyle({style:Ye.Light})))},t.prototype.garbleText=function(){this.dom.appContainerEl.addClass("is-text-garbled")},t.prototype.importLocalFile=function(t){return D(this,void 0,Promise,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:return[4,LF.readLocalFile(t)];case 1:return(e=o.sent())?(n=Kt(ne(t)),i=Xt(n),r=Jt(n),[2,this.saveAttachment(r,i,e)]):[2,null]}}))}))},t.prototype.saveAttachment=function(t,e,n){return D(this,void 0,Promise,(function(){var i,r,o;return A(this,(function(s){switch(s.label){case 0:return i=null,(r=this.workspace.getActiveViewOfType(rR))&&(i=r.file),[4,this.vault.getAvailablePathForAttachments(t,e,i)];case 1:return o=s.sent(),[4,this.vault.createBinary(o,n)];case 2:return[2,s.sent()]}}))}))},t.prototype.onMouseEvent=function(t){3!==t.button&&4!==t.button||(t.preventDefault(),t.stopPropagation())},t.prototype.openVaultChooser=function(){By.isDesktopApp&&le((function(t){t.ipcRenderer.sendSync("starter")})),By.isMobileApp&&(localStorage.removeItem("mobile-selected-vault"),setTimeout((function(){location.reload()}),200))},t.prototype.openHelp=function(){By.isDesktopApp?le((function(t){var e=localStorage.getItem(fe);t.ipcRenderer.sendSync("helpdocs",e)})):window.open("https://help.obsidian.md/","_blank")},t.prototype.openWithDefaultApp=function(t){return D(this,void 0,void 0,(function(){var e,n,i;return A(this,(function(r){switch(r.label){case 0:if(e=this.vault.adapter,By.isDesktopApp&&e instanceof LF&&(n=e.getFullPath(t),le((function(t){var e=t.shell;e&&(e.openPath?e.openPath(n):e.openItem(n))}))),!(By.isMobileApp&&GF&&e instanceof mR))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.open(t)];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),new jb(i.message||"Failed to open file"),[3,4];case 4:return[2]}}))}))},t.prototype.showInFolder=function(t){var e=this;le((function(n){var i=e.vault.adapter,r=n.shell;if(r&&i instanceof LF){var o=i.getFullPath(t);r.showItemInFolder(o)}}))},t.prototype.getObsidianUrl=function(t){var e=this.vault.getName(),n=oe(t.path);return"obsidian://open?vault="+encodeURIComponent(e)+"&file="+encodeURIComponent(n)},t.prototype.copyObsidianUrl=function(t){Ae(this.getObsidianUrl(t)),new jb(Ee("interface.copied",{item:Ee("interface.url")}))},t.prototype.registerQuitHook=function(){var t=this;window.onbeforeunload=function(e){window.onbeforeunload=null;var n=t.workspace;if(n){var i=new Oh;n.trigger("quit",i),i.isEmpty()||(e.preventDefault(),t.loadProgress.show().setMessage("Saving..."),D(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,i.promise()];case 1:return t.sent(),window.close(),[2]}}))})))}}},t.prototype.loadLocalStorage=function(t){try{var e=localStorage.getItem(this.appId+"-"+t);if(e)return JSON.parse(e)}catch(t){}return null},t.prototype.saveLocalStorage=function(t,e){try{e?localStorage.setItem(this.appId+"-"+t,JSON.stringify(e)):localStorage.removeItem(this.appId+"-"+t)}catch(t){}},t.prototype.on=function(t,e,n){return this.workspace.on(t,e,n)},t.prototype.emulateMobile=function(t){t?localStorage.EmulateMobile=1:delete localStorage.EmulateMobile,window.location.reload()},t.getOverrideConfigDir=function(t){var e=localStorage.getItem(t+"-config");return e&&String.isString(e)?e:null},t}();function cq(t){return D(this,void 0,void 0,(function(){var e,n,i,r;return A(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,bA(t+"-sync")];case 1:return o.sent(),[3,3];case 2:return o.sent(),[3,3];case 3:return o.trys.push([3,5,,6]),[4,bA(t+"-cache")];case 4:return o.sent(),[3,6];case 5:return o.sent(),[3,6];case 6:try{for(e=Object.keys(localStorage).filter((function(e){return e.startsWith(t+"-")})),n=0,i=e;n<i.length;n++)r=i[n],localStorage.removeItem(r)}catch(t){}return[2]}}))}))}function uq(){return D(this,void 0,void 0,(function(){function t(t){if(KF){if(t.startsWith("icloud/")){if(r)return{fs:r,path:s+"/"+Kt(t)}}else if(t.startsWith("documents/"))return{fs:i,path:Kt(t)}}else if($F)return t.contains("/")?{fs:o,path:t}:{fs:i,path:a+"/"+t};return null}function e(e){return D(this,void 0,Promise,(function(){var i,s,a,l,h,p,d,f,g,m,v,y;return A(this,(function(b){switch(b.label){case 0:if(!e)return[2,!1];if(!(i=t(e)))return[2];s=i.fs,a=i.path,b.label=1;case 1:return b.trys.push([1,3,,4]),[4,s.stat(a)];case 2:return b.sent(),[3,4];case 3:return b.sent(),[2,!1];case 4:return localStorage.setItem("mobile-selected-vault",e),s===o&&c.contains(e)&&c[0]!==e&&(c.remove(e),c.unshift(e),u()),n.empty(),l=n.createDiv("mobile-vault-chooser-screen mod-main"),(h=l.createDiv("mobile-vault-chooser-content")).createDiv({cls:"mobile-vault-chooser-logo-container"},(function(t){t.createDiv({cls:"mobile-vault-chooser-logo",text:"Obsidian"})})),p=h.createDiv(),KF&&s===r?(d=lq.getOverrideConfigDir(e)||ab,f=Mh(),p.setText("Waiting for iCloud to synchronize Obsidian configuration files..."),g=h.createDiv(),(m=h.createEl("button",{cls:"mod-cta",text:"Skip"})).addEventListener("click",(function(){f.resolve()})),v=QF.addListener("icloud",(function(t){g.setText("... "+t.current+" files left"),0===t.current&&f.resolve()})),[4,s.verifyIcloud(a+"/"+d)]):[3,8];case 5:return b.sent(),[4,f.promise];case 6:return b.sent(),[4,v.remove()];case 7:b.sent(),g.detach(),m.detach(),b.label=8;case 8:return p.setText("Loading your vault data..."),[4,s.watch(a)];case 9:return b.sent(),l.detach(),n.detach(),y=new mR(a,s),window.app=new lq(y,e),XF.hide(),[2,!0]}}))}))}var n,i,r,o,s,a,l,c,u,h,p,d,f,g,m,v=this;return A(this,(function(y){switch(y.label){case 0:By.isMobileApp=!0,By.isMobile=!0,By.isAndroidApp=$F,By.isIosApp=KF;try{navigator.clipboard.readText=function(){return D(v,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return[4,JF.read()];case 1:return[2,t.sent().value]}}))}))},navigator.clipboard.writeText=function(t){return D(v,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,JF.write({string:t})];case 1:return e.sent(),[2]}}))}))}}catch(t){}if(document.body.addClass("is-mobile"),$F&&document.body.addClass("is-android"),KF&&document.body.addClass("is-ios"),n=document.body.createDiv("mobile-vault-chooser"),!$F)return[3,8];if(!Symbol||!Symbol.asyncIterator)return n.createDiv("mobile-vault-chooser-screen mod-main").createDiv("mobile-vault-chooser-content",(function(t){t.createDiv({cls:"mobile-vault-chooser-logo-container"},(function(t){t.createDiv({cls:"mobile-vault-chooser-logo",text:"Obsidian"})})),t.createDiv({text:'Your Android device is not up to date, and must be updated for Obsidian to work. Please find a way to upgrade the app "Android WebView".'})})),[2];y.label=1;case 1:0,y.label=2;case 2:return y.trys.push([2,4,,6]),[4,QF.checkPerms()];case 3:return y.sent(),[3,7];case 4:return y.sent(),[4,new Promise((function(t){var e=n.createDiv("mobile-vault-chooser-screen mod-main");e.createDiv("mobile-vault-chooser-content",(function(n){n.createDiv({cls:"mobile-vault-chooser-logo-container"},(function(t){t.createDiv({cls:"mobile-vault-chooser-logo",text:"Obsidian"})})),new DA(n).setDesc(createFragment((function(t){t.createEl("p","",(function(t){t.createSpan({text:"Obsidian will now request permission to access your device storage. "}),t.createEl("a",{cls:"external-link",href:"https://help.obsidian.md/Android+App#Storage+Permission",text:"Learn more"})})),t.createEl("p",{text:"Note: Obsidian will never access files outside of the vault folders you choose."})}))).addButton((function(n){return n.setButtonText("Grant permission").onClick((function(){return D(v,void 0,void 0,(function(){var n;return A(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,QF.requestPerms()];case 1:return i.sent(),e.detach(),t(),[3,3];case 2:return n=i.sent(),new jb(n.toString()),[3,3];case 3:return[2]}}))}))}))}))}))}))];case 5:return y.sent(),[3,6];case 6:return[3,1];case 7:return[3,10];case 8:return[4,QF.requestPermissions()];case 9:y.sent(),y.label=10;case 10:return[4,(i=new fR(_F.Documents)).init()];case 11:if(y.sent(),r=null,o=null,!KF)return[3,15];r=new fR("ICLOUD"),y.label=12;case 12:return y.trys.push([12,14,,15]),[4,r.init()];case 13:return y.sent(),[3,15];case 14:return y.sent(),r=null,[3,15];case 15:return $F?[4,(o=new fR(null)).init()]:[3,17];case 16:y.sent(),y.label=17;case 17:if(s="Documents",a="Obsidian",!KF||!r)return[3,28];y.label=18;case 18:return y.trys.push([18,23,,25]),[4,r.stat(s)];case 19:return"directory"===y.sent().type?[3,22]:[4,r.delete(s)];case 20:return y.sent(),[4,r.mkdir(s)];case 21:y.sent(),y.label=22;case 22:return[3,25];case 23:return y.sent(),[4,r.mkdir(s)];case 24:return y.sent(),[3,25];case 25:return y.trys.push([25,27,,28]),[4,r.write(".hidden","")];case 26:return y.sent(),[3,28];case 27:return y.sent(),[3,28];case 28:l=localStorage.getItem("mobile-selected-vault"),c=[];try{c=JSON.parse(localStorage.getItem("mobile-external-vaults"))}catch(t){}return c&&Array.isArray(c)||(c=[]),u=function(){localStorage.setItem("mobile-external-vaults",JSON.stringify(c))},[4,function(){return D(v,void 0,Promise,(function(){var t,n,o,l,u,h,p,d=this;return A(this,(function(f){switch(f.label){case 0:return[4,YF.getLaunchUrl()];case 1:return(t=f.sent())&&t.url&&((n=cN(t.url))&&(o=n.vault))?(l=function(t,n,i){return D(d,void 0,Promise,(function(){var r,s,a,l,c,u;return A(this,(function(h){switch(h.label){case 0:return h.trys.push([0,2,,3]),[4,t.readdir(n)];case 1:return r=h.sent(),[3,3];case 2:return s=h.sent(),console.error(s),[2,!1];case 3:a=0,l=r,h.label=4;case 4:if(!(a<l.length))return[3,11];if((c=l[a]).toLowerCase()!==o.toLowerCase()||c.startsWith("."))return[3,10];h.label=5;case 5:return h.trys.push([5,9,,10]),[4,t.stat(n?n+"/"+c:c)];case 6:return"directory"!==h.sent().type?[3,8]:[4,e(i+c)];case 7:return[2,h.sent()];case 8:return[3,10];case 9:return u=h.sent(),console.error(u),[3,10];case 10:return a++,[3,4];case 11:return[2,!1]}}))}))},KF?r?[4,l(r,s,"icloud/")]:[3,3]:[3,5]):[2,!1];case 2:if(f.sent())return[2,!0];f.label=3;case 3:return[4,l(i,"","documents/")];case 4:return f.sent()?[2,!0]:[3,11];case 5:if(!$F)return[3,11];u=0,h=c,f.label=6;case 6:return u<h.length?Kt(p=h[u])!==o?[3,8]:[4,e(p)]:[3,9];case 7:if(f.sent())return[2,!0];f.label=8;case 8:return u++,[3,6];case 9:return[4,l(i,a,"")];case 10:if(f.sent())return[2];f.label=11;case 11:return[2,!1]}}))}))}()];case 29:return y.sent()?[2]:[4,e(l)];case 30:return y.sent()?[2]:(h=null,[4,YF.getInfo()]);case 31:return p=y.sent(),(d=n.createDiv("mobile-vault-chooser-screen mod-main")).createDiv("mobile-vault-chooser-content",(function(t){t.createDiv({cls:"mobile-vault-chooser-logo-container"},(function(t){t.createDiv({cls:"mobile-vault-chooser-logo",text:"Obsidian"}),t.createDiv({cls:"mobile-vault-chooser-version",text:"Version "+p.version})})),t.createDiv("mobile-vault-chooser-actions",(function(t){KF&&!r&&t.createEl("p","mod-warning",(function(t){t.createSpan({text:"You cannot access or create vaults in iCloud because it's disabled for Obsidian."})})),t.createEl("hr"),new hq(t).setIcon(Cm).setTitle("How to setup sync").addButton(Jg).onClick((function(){return window.open($F?"https://help.obsidian.md/Android+app#Sync":"https://help.obsidian.md/iOS+app#Sync")})),t.createEl("hr"),new hq(t).setIcon(Tv).setTitle("Create new vault").addButton(Jg).onClick((function(){return Lb(n,g(),"right")})),$F&&new hq(t).setIcon(Kg).setTitle("Open folder as vault").addButton(Jg).onClick((function(){return D(v,void 0,void 0,(function(){var t,n,i,r;return A(this,(function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),[4,QF.choose()];case 1:return(t=s.sent())&&t.path?t.isRoot?(new jb("Please choose a different folder than the root folder of your device."),[2]):(n=t.path,[4,o.stat(n)]):[3,5];case 2:return"directory"!==(null===(r=s.sent())||void 0===r?void 0:r.type)?[3,4]:(c.contains(n)||c.unshift(n),u(),[4,e(n)]);case 3:return s.sent(),[3,5];case 4:new jb("Failed to load external vault."),s.label=5;case 5:return[3,7];case 6:return(i=s.sent())&&i.message&&i.message.contains("canceled")||new jb(i.toString()),[3,7];case 7:return[2]}}))}))})),h=t.createDiv()}))})),f=function(t,e,i){var r=createDiv("mobile-vault-chooser-screen");return r.createDiv("mobile-vault-chooser-header",(function(i){i.createDiv("mobile-vault-chooser-header-icon",(function(t){Ty(t,fm,20)})),i.createDiv({cls:"mobile-vault-chooser-header-title",text:t}),i.addEventListener("click",(function(){return Lb(n,e,"left")}))})),r.createDiv("mobile-vault-chooser-content",i),r},g=function(){return f("Create new vault",d,(function(n){var i,s;new DA(n).setName("Vault name").addText((function(t){return t.setPlaceholder("Enter name...").then((function(t){return i=t}))})),KF&&(r?new DA(n).setName("Store in iCloud").setDesc("This cannot be changed later.").addToggle((function(t){t.setValue(!1),s=t})):new DA(n).setName("Store in iCloud").setDesc(createFragment((function(t){return t.createEl("p",{cls:"mod-warning",text:"This option is not available right now because iCloud is disabled for Obsidian."})}))).addToggle((function(t){t.setValue(!1)})).setDisabled(!0));var a="";if($F)var l=new DA(n).setName("Vault location").setDesc("Pick a folder to put your new vault.").addButton((function(t){return t.setButtonText("Choose").onClick((function(){return D(v,void 0,void 0,(function(){var t,e,n,i;return A(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,QF.choose()];case 1:return(t=r.sent())&&t.path?(new jb(t.uri),e=t.path,[4,o.stat(e)]):[3,3];case 2:if("directory"!==(null===(i=r.sent())||void 0===i?void 0:i.type))return new jb("Failed to pick vault."),[2];a=e,l.setDesc(createFragment((function(t){t.appendText("Your new vault will be placed in "),t.createSpan({cls:"u-pop",text:e}),t.appendText(".")}))),r.label=3;case 3:return[3,5];case 4:return(n=r.sent())&&n.message&&n.message.contains("canceled")||new jb(n.toString()),[2];case 5:return[2]}}))}))}))}));new DA(n).addButton((function(n){return n.setButtonText("Create").then((function(t){t.buttonEl.addEventListener("mousedown",(function(t){return t.preventDefault()}))})).setCta().onClick((function(){return D(v,void 0,void 0,(function(){var n,r,o,l,h,p;return A(this,(function(d){switch(d.label){case 0:if(!(n=i.getValue().trim()))return new jb("Please enter a vault name."),[2];if(Bt.test(n))return new jb("Vault name cannot contain any of these characters: "+It),[2];if(KF)r=s&&s.getValue()?"icloud/"+n:"documents/"+n;else if($F){if(!a)return new jb("Please choose a location for your new vault."),[2];r=a+"/"+n}if(!(o=t(r)))return[3,8];l=o.fs,h=o.path,d.label=1;case 1:return d.trys.push([1,5,,6]),[4,l.exists(h)];case 2:return d.sent()?[3,4]:[4,l.mkdir(h)];case 3:d.sent(),d.label=4;case 4:return[3,6];case 5:return p=d.sent(),new jb("Failed to create vault. "+p.message),[2];case 6:return $F&&(c.contains(r)||(c.unshift(r),u())),[4,e(r)];case 7:d.sent(),d.label=8;case 8:return[2]}}))}))}))}))}))},[4,(m=function(){return D(v,void 0,void 0,(function(){var l,p,g,v,y,b,w,k,C,x,S,E=this;return A(this,(function(M){switch(M.label){case 0:return h.empty(),h.createEl("hr"),l=function(r,s,l){var p=function(){var l=f(s,d,(function(h){if($F){var p=r;if(!r.contains("/")){var g=i.uri+"/"+a;g.startsWith("file://")&&(g=g.substr("file://".length)),p=g+"/"+r}new DA(h).setName("Vault location").setDesc(createFragment((function(t){t.appendText("This vault is located at "),t.createSpan({cls:"u-pop",text:p}).style.wordBreak="break-all"}))).controlEl.detach(),h.createEl("hr")}h.createDiv("mobile-vault-chooser-actions",(function(i){new hq(i).setIcon(Bm).setTitle("Enter vault").addButton(Jg).onClick((function(){return e(r)})),new hq(i).setIcon($g).setTitle("Rename vault").addButton(Jg).onClick((function(){return Lb(n,f("Rename vault "+s,l,(function(e){var i=null;new DA(e).setName("New vault name").addText((function(t){return t.setValue(s).setPlaceholder("Enter name...").then((function(t){return i=t}))})),e.createDiv("mobile-vault-chooser-button-container",(function(e){e.createEl("button",{cls:"mobile-vault-chooser-button mod-cta",text:"Rename"},(function(e){e.addEventListener("mousedown",(function(t){return t.preventDefault()})),e.addEventListener("click",(function(){return D(E,void 0,void 0,(function(){var e,s,a,l,h,p,f,g,v,y,b,w;return A(this,(function(k){switch(k.label){case 0:return(e=i.getValue())?Bt.test(e)?(new jb("Vault name cannot contain any of these characters: "+It),[2]):(s=t(r))?(a=s.fs,l=s.path,h=$t(l),p=h+"/"+e,[4,a.exists(p)]):(new jb("Failed to rename vault."),[2]):(new jb("Please enter a vault name."),[2]);case 1:if(k.sent())return new jb("A vault with this name already exists."),[2];k.label=2;case 2:return k.trys.push([2,4,,5]),[4,a.rename(l,p)];case 3:return k.sent(),[3,5];case 4:return f=k.sent(),new jb("Failed to rename vault. "+f.message),[2];case 5:return k.trys.push([5,11,,12]),g=Kt(l),(v=r.replace(new RegExp(Mt(g)+"$"),e))===r?[3,10]:[4,_H(r)];case 6:return[4,k.sent().get("data","data")];case 7:return(y=k.sent())?(y.appId=v,[4,_H(v)]):[3,10];case 8:return[4,k.sent().put("data",y,"data")];case 9:k.sent(),k.label=10;case 10:return[3,12];case 11:return b=k.sent(),console.error("Failed to transfer sync data",b),[3,12];case 12:return[4,cq(r)];case 13:return k.sent(),a===o&&(-1!==(w=c.indexOf(r))?c.splice(w,1,p):c.unshift(p),u()),Lb(n,d,"left"),[4,m()];case 14:return k.sent(),[2]}}))}))}))}))}))})),"right")})),$F&&r.contains("/")&&new hq(i).setIcon(Am).setTitle("Forget vault").addButton(Jg).onClick((function(){return Lb(n,f("Forget vault "+s,l,(function(t){t.createEl("p","",(function(t){t.createSpan({text:"Forgetting this vault will remove it from the list of vaults without deleting any files."})})),t.createDiv("mobile-vault-chooser-button-container",(function(t){t.createEl("button",{cls:"mobile-vault-chooser-button mod-warning",text:"Forget"}).addEventListener("click",(function(){return D(E,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return c.remove(r),u(),[4,cq(r)];case 1:return t.sent(),Lb(n,d,"left"),[4,m()];case 2:return t.sent(),[2]}}))}))}))}))})),"right")})),new hq(i).setIcon(Ug).setTitle("Delete vault").addButton(Jg).onClick((function(){return Lb(n,f("Delete vault "+s,l,(function(e){e.createEl("p","mod-warning",(function(t){t.createSpan({text:"Deleting this vault will delete all files in it."})})),e.createEl("p","mod-warning",(function(t){t.createSpan({text:"This action is irreversible. Please confirm you want to delete it."})})),e.createDiv("mobile-vault-chooser-button-container",(function(e){e.createEl("button",{cls:"mobile-vault-chooser-button mod-warning",text:"Delete"},(function(e){e.addEventListener("click",(function(){return D(E,void 0,void 0,(function(){var e,i,o,s;return A(this,(function(a){switch(a.label){case 0:if(!(e=t(r)))return new jb("Failed to delete vault."),[2];i=e.fs,o=e.path,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.rmdir(o)];case 2:return a.sent(),[3,4];case 3:return s=a.sent(),new jb("Failed to delete vault. "+s.message),[2];case 4:return[4,cq(r)];case 5:return a.sent(),Lb(n,d,"left"),[4,m()];case 6:return a.sent(),[2]}}))}))}))}))}))})),"right")}))}))}));return l};new hq(h).setIcon(l?Bv:zm).setTitle(s).addButton(Jg).onClick((function(){return Lb(n,p(),"right")}))},p=function(t,e,n,i,r){return D(E,void 0,void 0,(function(){var o,s,a,c,u,h,p;return A(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,t.readdir(e)];case 1:return o=d.sent(),[3,3];case 2:return s=d.sent(),console.error(s),[2];case 3:a=0,c=o,d.label=4;case 4:if(!(a<c.length))return[3,9];if((u=c[a]).startsWith("."))return[3,8];if(r&&r.contains(u))return[3,8];d.label=5;case 5:return d.trys.push([5,7,,8]),h=e?e+"/"+u:u,[4,t.stat(h)];case 6:return"directory"===d.sent().type&&l(n+u,u,i),[3,8];case 7:return p=d.sent(),console.error(p),[3,8];case 8:return a++,[3,4];case 9:return[2]}}))}))},KF?r?[4,p(r,s,"icloud/",!0)]:[3,2]:[3,4];case 1:M.sent(),M.label=2;case 2:return[4,p(i,"","documents/")];case 3:return M.sent(),[3,12];case 4:if(!$F)return[3,12];g=i.getUri("")+"/",v=[],y=0,b=c,M.label=5;case 5:if(!(y<b.length))return[3,10];w=b[y],M.label=6;case 6:return M.trys.push([6,8,,9]),(k=o.getUri(w)).startsWith(g)&&(C=k.substr(g.length)).toLowerCase().startsWith("obsidian/")&&((x=C.substr(9)).contains("/")||v.push(decodeURIComponent(x))),[4,o.stat(w)];case 7:return"directory"===M.sent().type&&l(w,Kt(w),!1),[3,9];case 8:return S=M.sent(),console.error(S),[3,9];case 9:return y++,[3,5];case 10:return[4,p(i,a,"",!1,v)];case 11:M.sent(),M.label=12;case 12:return[2]}}))}))})()];case 32:return y.sent(),[4,XF.hide()];case 33:return y.sent(),[2]}}))}))}var hq=function(){function t(t){var e=this.el=t.createDiv("mobile-vault-chooser-action");this.iconEl=e.createDiv({cls:"mobile-vault-chooser-action-icon"}),this.titleEl=e.createDiv({cls:"mobile-vault-chooser-action-name"})}return t.prototype.setIcon=function(t){return Ty(this.iconEl,t,20),this},t.prototype.setTitle=function(t){return this.titleEl.setText(t),this},t.prototype.onClick=function(t){return this.el.addEventListener("click",(function(e){0!==e.button||e.defaultPrevented||t(e)})),this},t.prototype.addButton=function(t,e){var n=this.el.createDiv({cls:"mobile-vault-chooser-action-icon"});return Ty(n,t,20),e&&n.onClickEvent((function(t){t.preventDefault(),e(t)})),this},t}();D(void 0,void 0,void 0,(function(){var t;return A(this,(function(e){switch(e.label){case 0:return[4,ke];case 1:return e.sent(),(t=ae("electron"))?(function(t){var e=this,n=t.ipcRenderer.sendSync("vault"),i=n.id,r=n.path;if(!r||!ae("original-fs").existsSync(r))return t.ipcRenderer.sendSync("starter"),void window.close();var o=new LF(r);document.title=Kt(ne(r))+" - Obsidian v"+t.ipcRenderer.sendSync("version"),By.isDesktopApp=!0,By.isDesktop=!0,ready((function(){return D(e,void 0,void 0,(function(){return A(this,(function(t){return window.app=new lq(o,i),[2]}))}))}))}(t),[2]):GF?[4,uq()]:[3,3];case 2:return e.sent(),[2];case 3:return window.close(),[2]}}))}))})()})();